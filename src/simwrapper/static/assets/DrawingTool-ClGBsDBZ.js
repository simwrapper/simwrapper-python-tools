import{h as Ct,c as _e,g as St,m as ye,C as ve,M as be,d as we,n as ke}from"./index-BwIP81FD.js";import{c as It,G as xe,S as Ae}from"./geojson-layer-DohWtVq3.js";import{D as Se}from"./layer-T9N9JmIf.js";var Bt={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var qt;function ze(){return qt||(qt=1,(function(Y,k){(function(h){Y.exports=h()})(function(){return(function h(C,c,n){function s(m,g){if(!c[m]){if(!C[m]){var y=typeof It=="function"&&It;if(!g&&y)return y(m,!0);if(r)return r(m,!0);var v=new Error("Cannot find module '"+m+"'");throw v.code="MODULE_NOT_FOUND",v}var a=c[m]={exports:{}};C[m][0].call(a.exports,function(p){var i=C[m][1][p];return s(i||p)},a,a.exports,h,C,c,n)}return c[m].exports}for(var r=typeof It=="function"&&It,o=0;o<n.length;o++)s(n[o]);return s})({1:[function(h,C,c){var n=h("./utils"),s=h("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(o){for(var m,g,y,v,a,p,i,l=[],u=0,_=o.length,w=_,S=n.getTypeOf(o)!=="string";u<o.length;)w=_-u,y=S?(m=o[u++],g=u<_?o[u++]:0,u<_?o[u++]:0):(m=o.charCodeAt(u++),g=u<_?o.charCodeAt(u++):0,u<_?o.charCodeAt(u++):0),v=m>>2,a=(3&m)<<4|g>>4,p=1<w?(15&g)<<2|y>>6:64,i=2<w?63&y:64,l.push(r.charAt(v)+r.charAt(a)+r.charAt(p)+r.charAt(i));return l.join("")},c.decode=function(o){var m,g,y,v,a,p,i=0,l=0,u="data:";if(o.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var _,w=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===r.charAt(64)&&w--,o.charAt(o.length-2)===r.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=s.uint8array?new Uint8Array(0|w):new Array(0|w);i<o.length;)m=r.indexOf(o.charAt(i++))<<2|(v=r.indexOf(o.charAt(i++)))>>4,g=(15&v)<<4|(a=r.indexOf(o.charAt(i++)))>>2,y=(3&a)<<6|(p=r.indexOf(o.charAt(i++))),_[l++]=m,a!==64&&(_[l++]=g),p!==64&&(_[l++]=y);return _}},{"./support":30,"./utils":32}],2:[function(h,C,c){var n=h("./external"),s=h("./stream/DataWorker"),r=h("./stream/Crc32Probe"),o=h("./stream/DataLengthProbe");function m(g,y,v,a,p){this.compressedSize=g,this.uncompressedSize=y,this.crc32=v,this.compression=a,this.compressedContent=p}m.prototype={getContentWorker:function(){var g=new s(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),y=this;return g.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new s(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(g,y,v){return g.pipe(new r).pipe(new o("uncompressedSize")).pipe(y.compressWorker(v)).pipe(new o("compressedSize")).withStreamInfo("compression",y)},C.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(h,C,c){var n=h("./stream/GenericWorker");c.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},c.DEFLATE=h("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(h,C,c){var n=h("./utils"),s=(function(){for(var r,o=[],m=0;m<256;m++){r=m;for(var g=0;g<8;g++)r=1&r?3988292384^r>>>1:r>>>1;o[m]=r}return o})();C.exports=function(r,o){return r!==void 0&&r.length?n.getTypeOf(r)!=="string"?(function(m,g,y,v){var a=s,p=v+y;m^=-1;for(var i=v;i<p;i++)m=m>>>8^a[255&(m^g[i])];return-1^m})(0|o,r,r.length,0):(function(m,g,y,v){var a=s,p=v+y;m^=-1;for(var i=v;i<p;i++)m=m>>>8^a[255&(m^g.charCodeAt(i))];return-1^m})(0|o,r,r.length,0):0}},{"./utils":32}],5:[function(h,C,c){c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],6:[function(h,C,c){var n=null;n=typeof Promise<"u"?Promise:h("lie"),C.exports={Promise:n}},{lie:37}],7:[function(h,C,c){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=h("pako"),r=h("./utils"),o=h("./stream/GenericWorker"),m=n?"uint8array":"array";function g(y,v){o.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=v,this.meta={}}c.magic="\b\0",r.inherits(g,o),g.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(m,y.data),!1)},g.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(v){y.push({data:v,meta:y.meta})}},c.compressWorker=function(y){return new g("Deflate",y)},c.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(h,C,c){function n(a,p){var i,l="";for(i=0;i<p;i++)l+=String.fromCharCode(255&a),a>>>=8;return l}function s(a,p,i,l,u,_){var w,S,A=a.file,R=a.compression,O=_!==m.utf8encode,N=r.transformTo("string",_(A.name)),B=r.transformTo("string",m.utf8encode(A.name)),W=A.comment,V=r.transformTo("string",_(W)),b=r.transformTo("string",m.utf8encode(W)),T=B.length!==A.name.length,e=b.length!==W.length,P="",$="",M="",tt=A.dir,j=A.date,J={crc32:0,compressedSize:0,uncompressedSize:0};p&&!i||(J.crc32=a.crc32,J.compressedSize=a.compressedSize,J.uncompressedSize=a.uncompressedSize);var I=0;p&&(I|=8),O||!T&&!e||(I|=2048);var E=0,X=0;tt&&(E|=16),u==="UNIX"?(X=798,E|=(function(q,at){var ht=q;return q||(ht=at?16893:33204),(65535&ht)<<16})(A.unixPermissions,tt)):(X=20,E|=(function(q){return 63&(q||0)})(A.dosPermissions)),w=j.getUTCHours(),w<<=6,w|=j.getUTCMinutes(),w<<=5,w|=j.getUTCSeconds()/2,S=j.getUTCFullYear()-1980,S<<=4,S|=j.getUTCMonth()+1,S<<=5,S|=j.getUTCDate(),T&&($=n(1,1)+n(g(N),4)+B,P+="up"+n($.length,2)+$),e&&(M=n(1,1)+n(g(V),4)+b,P+="uc"+n(M.length,2)+M);var H="";return H+=`
\0`,H+=n(I,2),H+=R.magic,H+=n(w,2),H+=n(S,2),H+=n(J.crc32,4),H+=n(J.compressedSize,4),H+=n(J.uncompressedSize,4),H+=n(N.length,2),H+=n(P.length,2),{fileRecord:y.LOCAL_FILE_HEADER+H+N+P,dirRecord:y.CENTRAL_FILE_HEADER+n(X,2)+H+n(V.length,2)+"\0\0\0\0"+n(E,4)+n(l,4)+N+P+V}}var r=h("../utils"),o=h("../stream/GenericWorker"),m=h("../utf8"),g=h("../crc32"),y=h("../signature");function v(a,p,i,l){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=i,this.encodeFileName=l,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(v,o),v.prototype.push=function(a){var p=a.meta.percent||0,i=this.entriesCount,l=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,o.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:i?(p+100*(i-l-1))/i:100}}))},v.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten,this.currentFile=a.file.name;var p=this.streamFiles&&!a.file.dir;if(p){var i=s(a,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(a){this.accumulate=!1;var p=this.streamFiles&&!a.file.dir,i=s(a,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),p)this.push({data:(function(l){return y.DATA_DESCRIPTOR+n(l.crc32,4)+n(l.compressedSize,4)+n(l.uncompressedSize,4)})(a),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var a=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var i=this.bytesWritten-a,l=(function(u,_,w,S,A){var R=r.transformTo("string",A(S));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(u,2)+n(u,2)+n(_,4)+n(w,4)+n(R.length,2)+R})(this.dirRecords.length,i,a,this.zipComment,this.encodeFileName);this.push({data:l,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(a){this._sources.push(a);var p=this;return a.on("data",function(i){p.processChunk(i)}),a.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),a.on("error",function(i){p.error(i)}),this},v.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(a){var p=this._sources;if(!o.prototype.error.call(this,a))return!1;for(var i=0;i<p.length;i++)try{p[i].error(a)}catch{}return!0},v.prototype.lock=function(){o.prototype.lock.call(this);for(var a=this._sources,p=0;p<a.length;p++)a[p].lock()},C.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(h,C,c){var n=h("../compressions"),s=h("./ZipFileWorker");c.generateWorker=function(r,o,m){var g=new s(o.streamFiles,m,o.platform,o.encodeFileName),y=0;try{r.forEach(function(v,a){y++;var p=(function(_,w){var S=_||w,A=n[S];if(!A)throw new Error(S+" is not a valid compression method !");return A})(a.options.compression,o.compression),i=a.options.compressionOptions||o.compressionOptions||{},l=a.dir,u=a.date;a._compressWorker(p,i).withStreamInfo("file",{name:v,dir:l,date:u,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(g)}),g.entriesCount=y}catch(v){g.error(v)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(h,C,c){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new n;for(var r in this)typeof this[r]!="function"&&(s[r]=this[r]);return s}}(n.prototype=h("./object")).loadAsync=h("./load"),n.support=h("./support"),n.defaults=h("./defaults"),n.version="3.10.1",n.loadAsync=function(s,r){return new n().loadAsync(s,r)},n.external=h("./external"),C.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(h,C,c){var n=h("./utils"),s=h("./external"),r=h("./utf8"),o=h("./zipEntries"),m=h("./stream/Crc32Probe"),g=h("./nodejsUtils");function y(v){return new s.Promise(function(a,p){var i=v.decompressed.getContentWorker().pipe(new m);i.on("error",function(l){p(l)}).on("end",function(){i.streamInfo.crc32!==v.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):a()}).resume()})}C.exports=function(v,a){var p=this;return a=n.extend(a||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),g.isNode&&g.isStream(v)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",v,!0,a.optimizedBinaryString,a.base64).then(function(i){var l=new o(a);return l.load(i),l}).then(function(i){var l=[s.Promise.resolve(i)],u=i.files;if(a.checkCRC32)for(var _=0;_<u.length;_++)l.push(y(u[_]));return s.Promise.all(l)}).then(function(i){for(var l=i.shift(),u=l.files,_=0;_<u.length;_++){var w=u[_],S=w.fileNameStr,A=n.resolve(w.fileNameStr);p.file(A,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:a.createFolders}),w.dir||(p.file(A).unsafeOriginalName=S)}return l.zipComment.length&&(p.comment=l.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(h,C,c){var n=h("../utils"),s=h("../stream/GenericWorker");function r(o,m){s.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(m)}n.inherits(r,s),r.prototype._bindStream=function(o){var m=this;(this._stream=o).pause(),o.on("data",function(g){m.push({data:g,meta:{percent:0}})}).on("error",function(g){m.isPaused?this.generatedError=g:m.error(g)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},r.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},C.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(h,C,c){var n=h("readable-stream").Readable;function s(r,o,m){n.call(this,o),this._helper=r;var g=this;r.on("data",function(y,v){g.push(y)||g._helper.pause(),m&&m(v)}).on("error",function(y){g.emit("error",y)}).on("end",function(){g.push(null)})}h("../utils").inherits(s,n),s.prototype._read=function(){this._helper.resume()},C.exports=s},{"../utils":32,"readable-stream":16}],14:[function(h,C,c){C.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,s);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,s)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var s=new Buffer(n);return s.fill(0),s},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(h,C,c){function n(A,R,O){var N,B=r.getTypeOf(R),W=r.extend(O||{},g);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(A=u(A)),W.createFolders&&(N=l(A))&&_.call(this,N,!0);var V=B==="string"&&W.binary===!1&&W.base64===!1;O&&O.binary!==void 0||(W.binary=!V),(R instanceof y&&R.uncompressedSize===0||W.dir||!R||R.length===0)&&(W.base64=!1,W.binary=!0,R="",W.compression="STORE",B="string");var b=null;b=R instanceof y||R instanceof o?R:p.isNode&&p.isStream(R)?new i(A,R):r.prepareContent(A,R,W.binary,W.optimizedBinaryString,W.base64);var T=new v(A,b,W);this.files[A]=T}var s=h("./utf8"),r=h("./utils"),o=h("./stream/GenericWorker"),m=h("./stream/StreamHelper"),g=h("./defaults"),y=h("./compressedObject"),v=h("./zipObject"),a=h("./generate"),p=h("./nodejsUtils"),i=h("./nodejs/NodejsStreamInputAdapter"),l=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var R=A.lastIndexOf("/");return 0<R?A.substring(0,R):""},u=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},_=function(A,R){return R=R!==void 0?R:g.createFolders,A=u(A),this.files[A]||n.call(this,A,null,{dir:!0,createFolders:R}),this.files[A]};function w(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var R,O,N;for(R in this.files)N=this.files[R],(O=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&A(O,N)},filter:function(A){var R=[];return this.forEach(function(O,N){A(O,N)&&R.push(N)}),R},file:function(A,R,O){if(arguments.length!==1)return A=this.root+A,n.call(this,A,R,O),this;if(w(A)){var N=A;return this.filter(function(W,V){return!V.dir&&N.test(W)})}var B=this.files[this.root+A];return B&&!B.dir?B:null},folder:function(A){if(!A)return this;if(w(A))return this.filter(function(B,W){return W.dir&&A.test(B)});var R=this.root+A,O=_.call(this,R),N=this.clone();return N.root=O.name,N},remove:function(A){A=this.root+A;var R=this.files[A];if(R||(A.slice(-1)!=="/"&&(A+="/"),R=this.files[A]),R&&!R.dir)delete this.files[A];else for(var O=this.filter(function(B,W){return W.name.slice(0,A.length)===A}),N=0;N<O.length;N++)delete this.files[O[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var R,O={};try{if((O=r.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");r.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var N=O.comment||this.comment||"";R=a.generateWorker(this,O,N)}catch(B){(R=new o("error")).error(B)}return new m(R,O.type||"string",O.mimeType)},generateAsync:function(A,R){return this.generateInternalStream(A).accumulate(R)},generateNodeStream:function(A,R){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(R)}};C.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(h,C,c){C.exports=h("stream")},{stream:void 0}],17:[function(h,C,c){var n=h("./DataReader");function s(r){n.call(this,r);for(var o=0;o<this.data.length;o++)r[o]=255&r[o]}h("../utils").inherits(s,n),s.prototype.byteAt=function(r){return this.data[this.zero+r]},s.prototype.lastIndexOfSignature=function(r){for(var o=r.charCodeAt(0),m=r.charCodeAt(1),g=r.charCodeAt(2),y=r.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===o&&this.data[v+1]===m&&this.data[v+2]===g&&this.data[v+3]===y)return v-this.zero;return-1},s.prototype.readAndCheckSignature=function(r){var o=r.charCodeAt(0),m=r.charCodeAt(1),g=r.charCodeAt(2),y=r.charCodeAt(3),v=this.readData(4);return o===v[0]&&m===v[1]&&g===v[2]&&y===v[3]},s.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},C.exports=s},{"../utils":32,"./DataReader":18}],18:[function(h,C,c){var n=h("../utils");function s(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var o,m=0;for(this.checkOffset(r),o=this.index+r-1;o>=this.index;o--)m=(m<<8)+this.byteAt(o);return this.index+=r,m},readString:function(r){return n.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},C.exports=s},{"../utils":32}],19:[function(h,C,c){var n=h("./Uint8ArrayReader");function s(r){n.call(this,r)}h("../utils").inherits(s,n),s.prototype.readData=function(r){this.checkOffset(r);var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},C.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(h,C,c){var n=h("./DataReader");function s(r){n.call(this,r)}h("../utils").inherits(s,n),s.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},s.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},s.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},s.prototype.readData=function(r){this.checkOffset(r);var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},C.exports=s},{"../utils":32,"./DataReader":18}],21:[function(h,C,c){var n=h("./ArrayReader");function s(r){n.call(this,r)}h("../utils").inherits(s,n),s.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},C.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(h,C,c){var n=h("../utils"),s=h("../support"),r=h("./ArrayReader"),o=h("./StringReader"),m=h("./NodeBufferReader"),g=h("./Uint8ArrayReader");C.exports=function(y){var v=n.getTypeOf(y);return n.checkSupport(v),v!=="string"||s.uint8array?v==="nodebuffer"?new m(y):s.uint8array?new g(n.transformTo("uint8array",y)):new r(n.transformTo("array",y)):new o(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(h,C,c){c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(h,C,c){var n=h("./GenericWorker"),s=h("../utils");function r(o){n.call(this,"ConvertWorker to "+o),this.destType=o}s.inherits(r,n),r.prototype.processChunk=function(o){this.push({data:s.transformTo(this.destType,o.data),meta:o.meta})},C.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(h,C,c){var n=h("./GenericWorker"),s=h("../crc32");function r(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}h("../utils").inherits(r,n),r.prototype.processChunk=function(o){this.streamInfo.crc32=s(o.data,this.streamInfo.crc32||0),this.push(o)},C.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(h,C,c){var n=h("../utils"),s=h("./GenericWorker");function r(o){s.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}n.inherits(r,s),r.prototype.processChunk=function(o){if(o){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+o.data.length}s.prototype.processChunk.call(this,o)},C.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(h,C,c){var n=h("../utils"),s=h("./GenericWorker");function r(o){s.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(g){m.dataIsReady=!0,m.data=g,m.max=g&&g.length||0,m.type=n.getTypeOf(g),m.isPaused||m._tickAndRepeat()},function(g){m.error(g)})}n.inherits(r,s),r.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,m);break;case"uint8array":o=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":o=this.data.slice(this.index,m)}return this.index=m,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},C.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(h,C,c){function n(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,r){return this._listeners[s].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,r){if(this._listeners[s])for(var o=0;o<this._listeners[s].length;o++)this._listeners[s][o].call(this,r)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var r=this;return s.on("data",function(o){r.processChunk(o)}),s.on("end",function(){r.end()}),s.on("error",function(o){r.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,r){return this.extraStreamInfo[s]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},C.exports=n},{}],29:[function(h,C,c){var n=h("../utils"),s=h("./ConvertWorker"),r=h("./GenericWorker"),o=h("../base64"),m=h("../support"),g=h("../external"),y=null;if(m.nodestream)try{y=h("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(p,i){return new g.Promise(function(l,u){var _=[],w=p._internalType,S=p._outputType,A=p._mimeType;p.on("data",function(R,O){_.push(R),i&&i(O)}).on("error",function(R){_=[],u(R)}).on("end",function(){try{var R=(function(O,N,B){switch(O){case"blob":return n.newBlob(n.transformTo("arraybuffer",N),B);case"base64":return o.encode(N);default:return n.transformTo(O,N)}})(S,(function(O,N){var B,W=0,V=null,b=0;for(B=0;B<N.length;B++)b+=N[B].length;switch(O){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(V=new Uint8Array(b),B=0;B<N.length;B++)V.set(N[B],W),W+=N[B].length;return V;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+O+"'")}})(w,_),A);l(R)}catch(O){u(O)}_=[]}).resume()})}function a(p,i,l){var u=i;switch(i){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=i,this._mimeType=l,n.checkSupport(u),this._worker=p.pipe(new s(u)),p.lock()}catch(_){this._worker=new r("error"),this._worker.error(_)}}a.prototype={accumulate:function(p){return v(this,p)},on:function(p,i){var l=this;return p==="data"?this._worker.on(p,function(u){i.call(l,u.data,u.meta)}):this._worker.on(p,function(){n.delay(i,arguments,l)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},p)}},C.exports=a},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(h,C,c){if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",c.nodebuffer=typeof Buffer<"u",c.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")c.blob=!1;else{var n=new ArrayBuffer(0);try{c.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(n),c.blob=s.getBlob("application/zip").size===0}catch{c.blob=!1}}}try{c.nodestream=!!h("readable-stream").Readable}catch{c.nodestream=!1}},{"readable-stream":16}],31:[function(h,C,c){for(var n=h("./utils"),s=h("./support"),r=h("./nodejsUtils"),o=h("./stream/GenericWorker"),m=new Array(256),g=0;g<256;g++)m[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;m[254]=m[254]=1;function y(){o.call(this,"utf-8 decode"),this.leftOver=null}function v(){o.call(this,"utf-8 encode")}c.utf8encode=function(a){return s.nodebuffer?r.newBufferFrom(a,"utf-8"):(function(p){var i,l,u,_,w,S=p.length,A=0;for(_=0;_<S;_++)(64512&(l=p.charCodeAt(_)))==55296&&_+1<S&&(64512&(u=p.charCodeAt(_+1)))==56320&&(l=65536+(l-55296<<10)+(u-56320),_++),A+=l<128?1:l<2048?2:l<65536?3:4;for(i=s.uint8array?new Uint8Array(A):new Array(A),_=w=0;w<A;_++)(64512&(l=p.charCodeAt(_)))==55296&&_+1<S&&(64512&(u=p.charCodeAt(_+1)))==56320&&(l=65536+(l-55296<<10)+(u-56320),_++),l<128?i[w++]=l:(l<2048?i[w++]=192|l>>>6:(l<65536?i[w++]=224|l>>>12:(i[w++]=240|l>>>18,i[w++]=128|l>>>12&63),i[w++]=128|l>>>6&63),i[w++]=128|63&l);return i})(a)},c.utf8decode=function(a){return s.nodebuffer?n.transformTo("nodebuffer",a).toString("utf-8"):(function(p){var i,l,u,_,w=p.length,S=new Array(2*w);for(i=l=0;i<w;)if((u=p[i++])<128)S[l++]=u;else if(4<(_=m[u]))S[l++]=65533,i+=_-1;else{for(u&=_===2?31:_===3?15:7;1<_&&i<w;)u=u<<6|63&p[i++],_--;1<_?S[l++]=65533:u<65536?S[l++]=u:(u-=65536,S[l++]=55296|u>>10&1023,S[l++]=56320|1023&u)}return S.length!==l&&(S.subarray?S=S.subarray(0,l):S.length=l),n.applyFromCharCode(S)})(a=n.transformTo(s.uint8array?"uint8array":"array",a))},n.inherits(y,o),y.prototype.processChunk=function(a){var p=n.transformTo(s.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var i=p;(p=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),p.set(i,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var l=(function(_,w){var S;for((w=w||_.length)>_.length&&(w=_.length),S=w-1;0<=S&&(192&_[S])==128;)S--;return S<0||S===0?w:S+m[_[S]]>w?S:w})(p),u=p;l!==p.length&&(s.uint8array?(u=p.subarray(0,l),this.leftOver=p.subarray(l,p.length)):(u=p.slice(0,l),this.leftOver=p.slice(l,p.length))),this.push({data:c.utf8decode(u),meta:a.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=y,n.inherits(v,o),v.prototype.processChunk=function(a){this.push({data:c.utf8encode(a.data),meta:a.meta})},c.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(h,C,c){var n=h("./support"),s=h("./base64"),r=h("./nodejsUtils"),o=h("./external");function m(i){return i}function g(i,l){for(var u=0;u<i.length;++u)l[u]=255&i.charCodeAt(u);return l}h("setimmediate"),c.newBlob=function(i,l){c.checkSupport("blob");try{return new Blob([i],{type:l})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(i),u.getBlob(l)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(i,l,u){var _=[],w=0,S=i.length;if(S<=u)return String.fromCharCode.apply(null,i);for(;w<S;)l==="array"||l==="nodebuffer"?_.push(String.fromCharCode.apply(null,i.slice(w,Math.min(w+u,S)))):_.push(String.fromCharCode.apply(null,i.subarray(w,Math.min(w+u,S)))),w+=u;return _.join("")},stringifyByChar:function(i){for(var l="",u=0;u<i.length;u++)l+=String.fromCharCode(i[u]);return l},applyCanBeUsed:{uint8array:(function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}})()}};function v(i){var l=65536,u=c.getTypeOf(i),_=!0;if(u==="uint8array"?_=y.applyCanBeUsed.uint8array:u==="nodebuffer"&&(_=y.applyCanBeUsed.nodebuffer),_)for(;1<l;)try{return y.stringifyByChunk(i,u,l)}catch{l=Math.floor(l/2)}return y.stringifyByChar(i)}function a(i,l){for(var u=0;u<i.length;u++)l[u]=i[u];return l}c.applyFromCharCode=v;var p={};p.string={string:m,array:function(i){return g(i,new Array(i.length))},arraybuffer:function(i){return p.string.uint8array(i).buffer},uint8array:function(i){return g(i,new Uint8Array(i.length))},nodebuffer:function(i){return g(i,r.allocBuffer(i.length))}},p.array={string:v,array:m,arraybuffer:function(i){return new Uint8Array(i).buffer},uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return r.newBufferFrom(i)}},p.arraybuffer={string:function(i){return v(new Uint8Array(i))},array:function(i){return a(new Uint8Array(i),new Array(i.byteLength))},arraybuffer:m,uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return r.newBufferFrom(new Uint8Array(i))}},p.uint8array={string:v,array:function(i){return a(i,new Array(i.length))},arraybuffer:function(i){return i.buffer},uint8array:m,nodebuffer:function(i){return r.newBufferFrom(i)}},p.nodebuffer={string:v,array:function(i){return a(i,new Array(i.length))},arraybuffer:function(i){return p.nodebuffer.uint8array(i).buffer},uint8array:function(i){return a(i,new Uint8Array(i.length))},nodebuffer:m},c.transformTo=function(i,l){if(l=l||"",!i)return l;c.checkSupport(i);var u=c.getTypeOf(l);return p[u][i](l)},c.resolve=function(i){for(var l=i.split("/"),u=[],_=0;_<l.length;_++){var w=l[_];w==="."||w===""&&_!==0&&_!==l.length-1||(w===".."?u.pop():u.push(w))}return u.join("/")},c.getTypeOf=function(i){return typeof i=="string"?"string":Object.prototype.toString.call(i)==="[object Array]"?"array":n.nodebuffer&&r.isBuffer(i)?"nodebuffer":n.uint8array&&i instanceof Uint8Array?"uint8array":n.arraybuffer&&i instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(i){if(!n[i.toLowerCase()])throw new Error(i+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(i){var l,u,_="";for(u=0;u<(i||"").length;u++)_+="\\x"+((l=i.charCodeAt(u))<16?"0":"")+l.toString(16).toUpperCase();return _},c.delay=function(i,l,u){setImmediate(function(){i.apply(u||null,l||[])})},c.inherits=function(i,l){function u(){}u.prototype=l.prototype,i.prototype=new u},c.extend=function(){var i,l,u={};for(i=0;i<arguments.length;i++)for(l in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],l)&&u[l]===void 0&&(u[l]=arguments[i][l]);return u},c.prepareContent=function(i,l,u,_,w){return o.Promise.resolve(l).then(function(S){return n.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new o.Promise(function(A,R){var O=new FileReader;O.onload=function(N){A(N.target.result)},O.onerror=function(N){R(N.target.error)},O.readAsArrayBuffer(S)}):S}).then(function(S){var A=c.getTypeOf(S);return A?(A==="arraybuffer"?S=c.transformTo("uint8array",S):A==="string"&&(w?S=s.decode(S):u&&_!==!0&&(S=(function(R){return g(R,n.uint8array?new Uint8Array(R.length):new Array(R.length))})(S))),S):o.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(h,C,c){var n=h("./reader/readerFor"),s=h("./utils"),r=h("./signature"),o=h("./zipEntry"),m=h("./support");function g(y){this.files=[],this.loadOptions=y}g.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(v)+", expected "+s.pretty(y)+")")}},isSignature:function(y,v){var a=this.reader.index;this.reader.setIndex(y);var p=this.reader.readString(4)===v;return this.reader.setIndex(a),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),v=m.uint8array?"uint8array":"array",a=s.transformTo(v,y);this.zipComment=this.loadOptions.decodeFileName(a)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,v,a,p=this.zip64EndOfCentralSize-44;0<p;)y=this.reader.readInt(2),v=this.reader.readInt(4),a=this.reader.readData(v),this.zip64ExtensibleData[y]={id:y,length:v,value:a}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,v;for(y=0;y<this.files.length;y++)v=this.files[y],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(y=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var v=y;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);var p=v-a;if(0<p)this.isSignature(v,r.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(y){this.reader=n(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},C.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(h,C,c){var n=h("./reader/readerFor"),s=h("./utils"),r=h("./compressedObject"),o=h("./crc32"),m=h("./utf8"),g=h("./compressions"),y=h("./support");function v(a,p){this.options=a,this.loadOptions=p}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(a){var p,i;if(a.skip(22),this.fileNameLength=a.readInt(2),i=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(i),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=(function(l){for(var u in g)if(Object.prototype.hasOwnProperty.call(g,u)&&g[u].magic===l)return g[u];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,p,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var p=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(p),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a==0&&(this.dosPermissions=63&this.externalFileAttributes),a==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var a=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=a.readInt(4))}},readExtraFields:function(a){var p,i,l,u=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index+4<u;)p=a.readInt(2),i=a.readInt(2),l=a.readData(i),this.extraFields[p]={id:p,length:i,value:l};a.setIndex(u)},handleUTF8:function(){var a=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var i=s.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var l=this.findExtraFieldUnicodeComment();if(l!==null)this.fileCommentStr=l;else{var u=s.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var p=n(a.value);return p.readInt(1)!==1||o(this.fileName)!==p.readInt(4)?null:m.utf8decode(p.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var p=n(a.value);return p.readInt(1)!==1||o(this.fileComment)!==p.readInt(4)?null:m.utf8decode(p.readData(a.length-5))}return null}},C.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(h,C,c){function n(p,i,l){this.name=p,this.dir=l.dir,this.date=l.date,this.comment=l.comment,this.unixPermissions=l.unixPermissions,this.dosPermissions=l.dosPermissions,this._data=i,this._dataBinary=l.binary,this.options={compression:l.compression,compressionOptions:l.compressionOptions}}var s=h("./stream/StreamHelper"),r=h("./stream/DataWorker"),o=h("./utf8"),m=h("./compressedObject"),g=h("./stream/GenericWorker");n.prototype={internalStream:function(p){var i=null,l="string";try{if(!p)throw new Error("No output type specified.");var u=(l=p.toLowerCase())==="string"||l==="text";l!=="binarystring"&&l!=="text"||(l="string"),i=this._decompressWorker();var _=!this._dataBinary;_&&!u&&(i=i.pipe(new o.Utf8EncodeWorker)),!_&&u&&(i=i.pipe(new o.Utf8DecodeWorker))}catch(w){(i=new g("error")).error(w)}return new s(i,l,"")},async:function(p,i){return this.internalStream(p).accumulate(i)},nodeStream:function(p,i){return this.internalStream(p||"nodebuffer").toNodejsStream(i)},_compressWorker:function(p,i){if(this._data instanceof m&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var l=this._decompressWorker();return this._dataBinary||(l=l.pipe(new o.Utf8EncodeWorker)),m.createWorkerFrom(l,p,i)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof g?this._data:new r(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},a=0;a<y.length;a++)n.prototype[y[a]]=v;C.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(h,C,c){(function(n){var s,r,o=n.MutationObserver||n.WebKitMutationObserver;if(o){var m=0,g=new o(p),y=n.document.createTextNode("");g.observe(y,{characterData:!0}),s=function(){y.data=m=++m%2}}else if(n.setImmediate||n.MessageChannel===void 0)s="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var i=n.document.createElement("script");i.onreadystatechange=function(){p(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},n.document.documentElement.appendChild(i)}:function(){setTimeout(p,0)};else{var v=new n.MessageChannel;v.port1.onmessage=p,s=function(){v.port2.postMessage(0)}}var a=[];function p(){var i,l;r=!0;for(var u=a.length;u;){for(l=a,a=[],i=-1;++i<u;)l[i]();u=a.length}r=!1}C.exports=function(i){a.push(i)!==1||r||s()}}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(h,C,c){var n=h("immediate");function s(){}var r={},o=["REJECTED"],m=["FULFILLED"],g=["PENDING"];function y(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,u!==s&&i(this,u)}function v(u,_,w){this.promise=u,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function a(u,_,w){n(function(){var S;try{S=_(w)}catch(A){return r.reject(u,A)}S===u?r.reject(u,new TypeError("Cannot resolve promise with itself")):r.resolve(u,S)})}function p(u){var _=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof _=="function")return function(){_.apply(u,arguments)}}function i(u,_){var w=!1;function S(O){w||(w=!0,r.reject(u,O))}function A(O){w||(w=!0,r.resolve(u,O))}var R=l(function(){_(A,S)});R.status==="error"&&S(R.value)}function l(u,_){var w={};try{w.value=u(_),w.status="success"}catch(S){w.status="error",w.value=S}return w}(C.exports=y).prototype.finally=function(u){if(typeof u!="function")return this;var _=this.constructor;return this.then(function(w){return _.resolve(u()).then(function(){return w})},function(w){return _.resolve(u()).then(function(){throw w})})},y.prototype.catch=function(u){return this.then(null,u)},y.prototype.then=function(u,_){if(typeof u!="function"&&this.state===m||typeof _!="function"&&this.state===o)return this;var w=new this.constructor(s);return this.state!==g?a(w,this.state===m?u:_,this.outcome):this.queue.push(new v(w,u,_)),w},v.prototype.callFulfilled=function(u){r.resolve(this.promise,u)},v.prototype.otherCallFulfilled=function(u){a(this.promise,this.onFulfilled,u)},v.prototype.callRejected=function(u){r.reject(this.promise,u)},v.prototype.otherCallRejected=function(u){a(this.promise,this.onRejected,u)},r.resolve=function(u,_){var w=l(p,_);if(w.status==="error")return r.reject(u,w.value);var S=w.value;if(S)i(u,S);else{u.state=m,u.outcome=_;for(var A=-1,R=u.queue.length;++A<R;)u.queue[A].callFulfilled(_)}return u},r.reject=function(u,_){u.state=o,u.outcome=_;for(var w=-1,S=u.queue.length;++w<S;)u.queue[w].callRejected(_);return u},y.resolve=function(u){return u instanceof this?u:r.resolve(new this(s),u)},y.reject=function(u){var _=new this(s);return r.reject(_,u)},y.all=function(u){var _=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=u.length,S=!1;if(!w)return this.resolve([]);for(var A=new Array(w),R=0,O=-1,N=new this(s);++O<w;)B(u[O],O);return N;function B(W,V){_.resolve(W).then(function(b){A[V]=b,++R!==w||S||(S=!0,r.resolve(N,A))},function(b){S||(S=!0,r.reject(N,b))})}},y.race=function(u){var _=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=u.length,S=!1;if(!w)return this.resolve([]);for(var A=-1,R=new this(s);++A<w;)O=u[A],_.resolve(O).then(function(N){S||(S=!0,r.resolve(R,N))},function(N){S||(S=!0,r.reject(R,N))});var O;return R}},{immediate:36}],38:[function(h,C,c){var n={};(0,h("./lib/utils/common").assign)(n,h("./lib/deflate"),h("./lib/inflate"),h("./lib/zlib/constants")),C.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(h,C,c){var n=h("./zlib/deflate"),s=h("./utils/common"),r=h("./utils/strings"),o=h("./zlib/messages"),m=h("./zlib/zstream"),g=Object.prototype.toString,y=0,v=-1,a=0,p=8;function i(u){if(!(this instanceof i))return new i(u);this.options=s.assign({level:v,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:a,to:""},u||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var w=n.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(w!==y)throw new Error(o[w]);if(_.header&&n.deflateSetHeader(this.strm,_.header),_.dictionary){var S;if(S=typeof _.dictionary=="string"?r.string2buf(_.dictionary):g.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(w=n.deflateSetDictionary(this.strm,S))!==y)throw new Error(o[w]);this._dict_set=!0}}function l(u,_){var w=new i(_);if(w.push(u,!0),w.err)throw w.msg||o[w.err];return w.result}i.prototype.push=function(u,_){var w,S,A=this.strm,R=this.options.chunkSize;if(this.ended)return!1;S=_===~~_?_:_===!0?4:0,typeof u=="string"?A.input=r.string2buf(u):g.call(u)==="[object ArrayBuffer]"?A.input=new Uint8Array(u):A.input=u,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new s.Buf8(R),A.next_out=0,A.avail_out=R),(w=n.deflate(A,S))!==1&&w!==y)return this.onEnd(w),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(s.shrinkBuf(A.output,A.next_out))):this.onData(s.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&w!==1);return S===4?(w=n.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===y):S!==2||(this.onEnd(y),!(A.avail_out=0))},i.prototype.onData=function(u){this.chunks.push(u)},i.prototype.onEnd=function(u){u===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},c.Deflate=i,c.deflate=l,c.deflateRaw=function(u,_){return(_=_||{}).raw=!0,l(u,_)},c.gzip=function(u,_){return(_=_||{}).gzip=!0,l(u,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(h,C,c){var n=h("./zlib/inflate"),s=h("./utils/common"),r=h("./utils/strings"),o=h("./zlib/constants"),m=h("./zlib/messages"),g=h("./zlib/zstream"),y=h("./zlib/gzheader"),v=Object.prototype.toString;function a(i){if(!(this instanceof a))return new a(i);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},i||{});var l=this.options;l.raw&&0<=l.windowBits&&l.windowBits<16&&(l.windowBits=-l.windowBits,l.windowBits===0&&(l.windowBits=-15)),!(0<=l.windowBits&&l.windowBits<16)||i&&i.windowBits||(l.windowBits+=32),15<l.windowBits&&l.windowBits<48&&(15&l.windowBits)==0&&(l.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var u=n.inflateInit2(this.strm,l.windowBits);if(u!==o.Z_OK)throw new Error(m[u]);this.header=new y,n.inflateGetHeader(this.strm,this.header)}function p(i,l){var u=new a(l);if(u.push(i,!0),u.err)throw u.msg||m[u.err];return u.result}a.prototype.push=function(i,l){var u,_,w,S,A,R,O=this.strm,N=this.options.chunkSize,B=this.options.dictionary,W=!1;if(this.ended)return!1;_=l===~~l?l:l===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof i=="string"?O.input=r.binstring2buf(i):v.call(i)==="[object ArrayBuffer]"?O.input=new Uint8Array(i):O.input=i,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new s.Buf8(N),O.next_out=0,O.avail_out=N),(u=n.inflate(O,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&B&&(R=typeof B=="string"?r.string2buf(B):v.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,u=n.inflateSetDictionary(this.strm,R)),u===o.Z_BUF_ERROR&&W===!0&&(u=o.Z_OK,W=!1),u!==o.Z_STREAM_END&&u!==o.Z_OK)return this.onEnd(u),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&u!==o.Z_STREAM_END&&(O.avail_in!==0||_!==o.Z_FINISH&&_!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=r.utf8border(O.output,O.next_out),S=O.next_out-w,A=r.buf2string(O.output,w),O.next_out=S,O.avail_out=N-S,S&&s.arraySet(O.output,O.output,w,S,0),this.onData(A)):this.onData(s.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(W=!0)}while((0<O.avail_in||O.avail_out===0)&&u!==o.Z_STREAM_END);return u===o.Z_STREAM_END&&(_=o.Z_FINISH),_===o.Z_FINISH?(u=n.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===o.Z_OK):_!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(O.avail_out=0))},a.prototype.onData=function(i){this.chunks.push(i)},a.prototype.onEnd=function(i){i===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},c.Inflate=a,c.inflate=p,c.inflateRaw=function(i,l){return(l=l||{}).raw=!0,p(i,l)},c.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(h,C,c){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";c.assign=function(o){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var g=m.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var y in g)g.hasOwnProperty(y)&&(o[y]=g[y])}}return o},c.shrinkBuf=function(o,m){return o.length===m?o:o.subarray?o.subarray(0,m):(o.length=m,o)};var s={arraySet:function(o,m,g,y,v){if(m.subarray&&o.subarray)o.set(m.subarray(g,g+y),v);else for(var a=0;a<y;a++)o[v+a]=m[g+a]},flattenChunks:function(o){var m,g,y,v,a,p;for(m=y=0,g=o.length;m<g;m++)y+=o[m].length;for(p=new Uint8Array(y),m=v=0,g=o.length;m<g;m++)a=o[m],p.set(a,v),v+=a.length;return p}},r={arraySet:function(o,m,g,y,v){for(var a=0;a<y;a++)o[v+a]=m[g+a]},flattenChunks:function(o){return[].concat.apply([],o)}};c.setTyped=function(o){o?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,s)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,r))},c.setTyped(n)},{}],42:[function(h,C,c){var n=h("./common"),s=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var o=new n.Buf8(256),m=0;m<256;m++)o[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function g(y,v){if(v<65537&&(y.subarray&&r||!y.subarray&&s))return String.fromCharCode.apply(null,n.shrinkBuf(y,v));for(var a="",p=0;p<v;p++)a+=String.fromCharCode(y[p]);return a}o[254]=o[254]=1,c.string2buf=function(y){var v,a,p,i,l,u=y.length,_=0;for(i=0;i<u;i++)(64512&(a=y.charCodeAt(i)))==55296&&i+1<u&&(64512&(p=y.charCodeAt(i+1)))==56320&&(a=65536+(a-55296<<10)+(p-56320),i++),_+=a<128?1:a<2048?2:a<65536?3:4;for(v=new n.Buf8(_),i=l=0;l<_;i++)(64512&(a=y.charCodeAt(i)))==55296&&i+1<u&&(64512&(p=y.charCodeAt(i+1)))==56320&&(a=65536+(a-55296<<10)+(p-56320),i++),a<128?v[l++]=a:(a<2048?v[l++]=192|a>>>6:(a<65536?v[l++]=224|a>>>12:(v[l++]=240|a>>>18,v[l++]=128|a>>>12&63),v[l++]=128|a>>>6&63),v[l++]=128|63&a);return v},c.buf2binstring=function(y){return g(y,y.length)},c.binstring2buf=function(y){for(var v=new n.Buf8(y.length),a=0,p=v.length;a<p;a++)v[a]=y.charCodeAt(a);return v},c.buf2string=function(y,v){var a,p,i,l,u=v||y.length,_=new Array(2*u);for(a=p=0;a<u;)if((i=y[a++])<128)_[p++]=i;else if(4<(l=o[i]))_[p++]=65533,a+=l-1;else{for(i&=l===2?31:l===3?15:7;1<l&&a<u;)i=i<<6|63&y[a++],l--;1<l?_[p++]=65533:i<65536?_[p++]=i:(i-=65536,_[p++]=55296|i>>10&1023,_[p++]=56320|1023&i)}return g(_,p)},c.utf8border=function(y,v){var a;for((v=v||y.length)>y.length&&(v=y.length),a=v-1;0<=a&&(192&y[a])==128;)a--;return a<0||a===0?v:a+o[y[a]]>v?a:v}},{"./common":41}],43:[function(h,C,c){C.exports=function(n,s,r,o){for(var m=65535&n|0,g=n>>>16&65535|0,y=0;r!==0;){for(r-=y=2e3<r?2e3:r;g=g+(m=m+s[o++]|0)|0,--y;);m%=65521,g%=65521}return m|g<<16|0}},{}],44:[function(h,C,c){C.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(h,C,c){var n=(function(){for(var s,r=[],o=0;o<256;o++){s=o;for(var m=0;m<8;m++)s=1&s?3988292384^s>>>1:s>>>1;r[o]=s}return r})();C.exports=function(s,r,o,m){var g=n,y=m+o;s^=-1;for(var v=m;v<y;v++)s=s>>>8^g[255&(s^r[v])];return-1^s}},{}],46:[function(h,C,c){var n,s=h("../utils/common"),r=h("./trees"),o=h("./adler32"),m=h("./crc32"),g=h("./messages"),y=0,v=4,a=0,p=-2,i=-1,l=4,u=2,_=8,w=9,S=286,A=30,R=19,O=2*S+1,N=15,B=3,W=258,V=W+B+1,b=42,T=113,e=1,P=2,$=3,M=4;function tt(t,L){return t.msg=g[L],L}function j(t){return(t<<1)-(4<t?9:0)}function J(t){for(var L=t.length;0<=--L;)t[L]=0}function I(t){var L=t.state,D=L.pending;D>t.avail_out&&(D=t.avail_out),D!==0&&(s.arraySet(t.output,L.pending_buf,L.pending_out,D,t.next_out),t.next_out+=D,L.pending_out+=D,t.total_out+=D,t.avail_out-=D,L.pending-=D,L.pending===0&&(L.pending_out=0))}function E(t,L){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,L),t.block_start=t.strstart,I(t.strm)}function X(t,L){t.pending_buf[t.pending++]=L}function H(t,L){t.pending_buf[t.pending++]=L>>>8&255,t.pending_buf[t.pending++]=255&L}function q(t,L){var D,d,f=t.max_chain_length,x=t.strstart,F=t.prev_length,U=t.nice_match,z=t.strstart>t.w_size-V?t.strstart-(t.w_size-V):0,Z=t.window,K=t.w_mask,G=t.prev,Q=t.strstart+W,it=Z[x+F-1],rt=Z[x+F];t.prev_length>=t.good_match&&(f>>=2),U>t.lookahead&&(U=t.lookahead);do if(Z[(D=L)+F]===rt&&Z[D+F-1]===it&&Z[D]===Z[x]&&Z[++D]===Z[x+1]){x+=2,D++;do;while(Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&Z[++x]===Z[++D]&&x<Q);if(d=W-(Q-x),x=Q-W,F<d){if(t.match_start=L,U<=(F=d))break;it=Z[x+F-1],rt=Z[x+F]}}while((L=G[L&K])>z&&--f!=0);return F<=t.lookahead?F:t.lookahead}function at(t){var L,D,d,f,x,F,U,z,Z,K,G=t.w_size;do{if(f=t.window_size-t.lookahead-t.strstart,t.strstart>=G+(G-V)){for(s.arraySet(t.window,t.window,G,G,0),t.match_start-=G,t.strstart-=G,t.block_start-=G,L=D=t.hash_size;d=t.head[--L],t.head[L]=G<=d?d-G:0,--D;);for(L=D=G;d=t.prev[--L],t.prev[L]=G<=d?d-G:0,--D;);f+=G}if(t.strm.avail_in===0)break;if(F=t.strm,U=t.window,z=t.strstart+t.lookahead,Z=f,K=void 0,K=F.avail_in,Z<K&&(K=Z),D=K===0?0:(F.avail_in-=K,s.arraySet(U,F.input,F.next_in,K,z),F.state.wrap===1?F.adler=o(F.adler,U,K,z):F.state.wrap===2&&(F.adler=m(F.adler,U,K,z)),F.next_in+=K,F.total_in+=K,K),t.lookahead+=D,t.lookahead+t.insert>=B)for(x=t.strstart-t.insert,t.ins_h=t.window[x],t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+B-1])&t.hash_mask,t.prev[x&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=x,x++,t.insert--,!(t.lookahead+t.insert<B)););}while(t.lookahead<V&&t.strm.avail_in!==0)}function ht(t,L){for(var D,d;;){if(t.lookahead<V){if(at(t),t.lookahead<V&&L===y)return e;if(t.lookahead===0)break}if(D=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),D!==0&&t.strstart-D<=t.w_size-V&&(t.match_length=q(t,D)),t.match_length>=B)if(d=r._tr_tally(t,t.strstart-t.match_start,t.match_length-B),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=B){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else d=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(d&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<B-1?t.strstart:B-1,L===v?(E(t,!0),t.strm.avail_out===0?$:M):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:P}function et(t,L){for(var D,d,f;;){if(t.lookahead<V){if(at(t),t.lookahead<V&&L===y)return e;if(t.lookahead===0)break}if(D=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=B-1,D!==0&&t.prev_length<t.max_lazy_match&&t.strstart-D<=t.w_size-V&&(t.match_length=q(t,D),t.match_length<=5&&(t.strategy===1||t.match_length===B&&4096<t.strstart-t.match_start)&&(t.match_length=B-1)),t.prev_length>=B&&t.match_length<=t.prev_length){for(f=t.strstart+t.lookahead-B,d=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-B),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=f&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=B-1,t.strstart++,d&&(E(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((d=r._tr_tally(t,0,t.window[t.strstart-1]))&&E(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(d=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<B-1?t.strstart:B-1,L===v?(E(t,!0),t.strm.avail_out===0?$:M):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?e:P}function nt(t,L,D,d,f){this.good_length=t,this.max_lazy=L,this.nice_length=D,this.max_chain=d,this.func=f}function ut(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*O),this.dyn_dtree=new s.Buf16(2*(2*A+1)),this.bl_tree=new s.Buf16(2*(2*R+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(N+1),this.heap=new s.Buf16(2*S+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*S+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function st(t){var L;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=u,(L=t.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?b:T,t.adler=L.wrap===2?0:1,L.last_flush=y,r._tr_init(L),a):tt(t,p)}function ct(t){var L=st(t);return L===a&&(function(D){D.window_size=2*D.w_size,J(D.head),D.max_lazy_match=n[D.level].max_lazy,D.good_match=n[D.level].good_length,D.nice_match=n[D.level].nice_length,D.max_chain_length=n[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=B-1,D.match_available=0,D.ins_h=0})(t.state),L}function ft(t,L,D,d,f,x){if(!t)return p;var F=1;if(L===i&&(L=6),d<0?(F=0,d=-d):15<d&&(F=2,d-=16),f<1||w<f||D!==_||d<8||15<d||L<0||9<L||x<0||l<x)return tt(t,p);d===8&&(d=9);var U=new ut;return(t.state=U).strm=t,U.wrap=F,U.gzhead=null,U.w_bits=d,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=f+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+B-1)/B),U.window=new s.Buf8(2*U.w_size),U.head=new s.Buf16(U.hash_size),U.prev=new s.Buf16(U.w_size),U.lit_bufsize=1<<f+6,U.pending_buf_size=4*U.lit_bufsize,U.pending_buf=new s.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=L,U.strategy=x,U.method=D,ct(t)}n=[new nt(0,0,0,0,function(t,L){var D=65535;for(D>t.pending_buf_size-5&&(D=t.pending_buf_size-5);;){if(t.lookahead<=1){if(at(t),t.lookahead===0&&L===y)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var d=t.block_start+D;if((t.strstart===0||t.strstart>=d)&&(t.lookahead=t.strstart-d,t.strstart=d,E(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-V&&(E(t,!1),t.strm.avail_out===0))return e}return t.insert=0,L===v?(E(t,!0),t.strm.avail_out===0?$:M):(t.strstart>t.block_start&&(E(t,!1),t.strm.avail_out),e)}),new nt(4,4,8,4,ht),new nt(4,5,16,8,ht),new nt(4,6,32,32,ht),new nt(4,4,16,16,et),new nt(8,16,32,32,et),new nt(8,16,128,128,et),new nt(8,32,128,256,et),new nt(32,128,258,1024,et),new nt(32,258,258,4096,et)],c.deflateInit=function(t,L){return ft(t,L,_,15,8,0)},c.deflateInit2=ft,c.deflateReset=ct,c.deflateResetKeep=st,c.deflateSetHeader=function(t,L){return t&&t.state?t.state.wrap!==2?p:(t.state.gzhead=L,a):p},c.deflate=function(t,L){var D,d,f,x;if(!t||!t.state||5<L||L<0)return t?tt(t,p):p;if(d=t.state,!t.output||!t.input&&t.avail_in!==0||d.status===666&&L!==v)return tt(t,t.avail_out===0?-5:p);if(d.strm=t,D=d.last_flush,d.last_flush=L,d.status===b)if(d.wrap===2)t.adler=0,X(d,31),X(d,139),X(d,8),d.gzhead?(X(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),X(d,255&d.gzhead.time),X(d,d.gzhead.time>>8&255),X(d,d.gzhead.time>>16&255),X(d,d.gzhead.time>>24&255),X(d,d.level===9?2:2<=d.strategy||d.level<2?4:0),X(d,255&d.gzhead.os),d.gzhead.extra&&d.gzhead.extra.length&&(X(d,255&d.gzhead.extra.length),X(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(t.adler=m(t.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=69):(X(d,0),X(d,0),X(d,0),X(d,0),X(d,0),X(d,d.level===9?2:2<=d.strategy||d.level<2?4:0),X(d,3),d.status=T);else{var F=_+(d.w_bits-8<<4)<<8;F|=(2<=d.strategy||d.level<2?0:d.level<6?1:d.level===6?2:3)<<6,d.strstart!==0&&(F|=32),F+=31-F%31,d.status=T,H(d,F),d.strstart!==0&&(H(d,t.adler>>>16),H(d,65535&t.adler)),t.adler=1}if(d.status===69)if(d.gzhead.extra){for(f=d.pending;d.gzindex<(65535&d.gzhead.extra.length)&&(d.pending!==d.pending_buf_size||(d.gzhead.hcrc&&d.pending>f&&(t.adler=m(t.adler,d.pending_buf,d.pending-f,f)),I(t),f=d.pending,d.pending!==d.pending_buf_size));)X(d,255&d.gzhead.extra[d.gzindex]),d.gzindex++;d.gzhead.hcrc&&d.pending>f&&(t.adler=m(t.adler,d.pending_buf,d.pending-f,f)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=73)}else d.status=73;if(d.status===73)if(d.gzhead.name){f=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>f&&(t.adler=m(t.adler,d.pending_buf,d.pending-f,f)),I(t),f=d.pending,d.pending===d.pending_buf_size)){x=1;break}x=d.gzindex<d.gzhead.name.length?255&d.gzhead.name.charCodeAt(d.gzindex++):0,X(d,x)}while(x!==0);d.gzhead.hcrc&&d.pending>f&&(t.adler=m(t.adler,d.pending_buf,d.pending-f,f)),x===0&&(d.gzindex=0,d.status=91)}else d.status=91;if(d.status===91)if(d.gzhead.comment){f=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>f&&(t.adler=m(t.adler,d.pending_buf,d.pending-f,f)),I(t),f=d.pending,d.pending===d.pending_buf_size)){x=1;break}x=d.gzindex<d.gzhead.comment.length?255&d.gzhead.comment.charCodeAt(d.gzindex++):0,X(d,x)}while(x!==0);d.gzhead.hcrc&&d.pending>f&&(t.adler=m(t.adler,d.pending_buf,d.pending-f,f)),x===0&&(d.status=103)}else d.status=103;if(d.status===103&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&I(t),d.pending+2<=d.pending_buf_size&&(X(d,255&t.adler),X(d,t.adler>>8&255),t.adler=0,d.status=T)):d.status=T),d.pending!==0){if(I(t),t.avail_out===0)return d.last_flush=-1,a}else if(t.avail_in===0&&j(L)<=j(D)&&L!==v)return tt(t,-5);if(d.status===666&&t.avail_in!==0)return tt(t,-5);if(t.avail_in!==0||d.lookahead!==0||L!==y&&d.status!==666){var U=d.strategy===2?(function(z,Z){for(var K;;){if(z.lookahead===0&&(at(z),z.lookahead===0)){if(Z===y)return e;break}if(z.match_length=0,K=r._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,K&&(E(z,!1),z.strm.avail_out===0))return e}return z.insert=0,Z===v?(E(z,!0),z.strm.avail_out===0?$:M):z.last_lit&&(E(z,!1),z.strm.avail_out===0)?e:P})(d,L):d.strategy===3?(function(z,Z){for(var K,G,Q,it,rt=z.window;;){if(z.lookahead<=W){if(at(z),z.lookahead<=W&&Z===y)return e;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=B&&0<z.strstart&&(G=rt[Q=z.strstart-1])===rt[++Q]&&G===rt[++Q]&&G===rt[++Q]){it=z.strstart+W;do;while(G===rt[++Q]&&G===rt[++Q]&&G===rt[++Q]&&G===rt[++Q]&&G===rt[++Q]&&G===rt[++Q]&&G===rt[++Q]&&G===rt[++Q]&&Q<it);z.match_length=W-(it-Q),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=B?(K=r._tr_tally(z,1,z.match_length-B),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(K=r._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),K&&(E(z,!1),z.strm.avail_out===0))return e}return z.insert=0,Z===v?(E(z,!0),z.strm.avail_out===0?$:M):z.last_lit&&(E(z,!1),z.strm.avail_out===0)?e:P})(d,L):n[d.level].func(d,L);if(U!==$&&U!==M||(d.status=666),U===e||U===$)return t.avail_out===0&&(d.last_flush=-1),a;if(U===P&&(L===1?r._tr_align(d):L!==5&&(r._tr_stored_block(d,0,0,!1),L===3&&(J(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),I(t),t.avail_out===0))return d.last_flush=-1,a}return L!==v?a:d.wrap<=0?1:(d.wrap===2?(X(d,255&t.adler),X(d,t.adler>>8&255),X(d,t.adler>>16&255),X(d,t.adler>>24&255),X(d,255&t.total_in),X(d,t.total_in>>8&255),X(d,t.total_in>>16&255),X(d,t.total_in>>24&255)):(H(d,t.adler>>>16),H(d,65535&t.adler)),I(t),0<d.wrap&&(d.wrap=-d.wrap),d.pending!==0?a:1)},c.deflateEnd=function(t){var L;return t&&t.state?(L=t.state.status)!==b&&L!==69&&L!==73&&L!==91&&L!==103&&L!==T&&L!==666?tt(t,p):(t.state=null,L===T?tt(t,-3):a):p},c.deflateSetDictionary=function(t,L){var D,d,f,x,F,U,z,Z,K=L.length;if(!t||!t.state||(x=(D=t.state).wrap)===2||x===1&&D.status!==b||D.lookahead)return p;for(x===1&&(t.adler=o(t.adler,L,K,0)),D.wrap=0,K>=D.w_size&&(x===0&&(J(D.head),D.strstart=0,D.block_start=0,D.insert=0),Z=new s.Buf8(D.w_size),s.arraySet(Z,L,K-D.w_size,D.w_size,0),L=Z,K=D.w_size),F=t.avail_in,U=t.next_in,z=t.input,t.avail_in=K,t.next_in=0,t.input=L,at(D);D.lookahead>=B;){for(d=D.strstart,f=D.lookahead-(B-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[d+B-1])&D.hash_mask,D.prev[d&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=d,d++,--f;);D.strstart=d,D.lookahead=B-1,at(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=B-1,D.match_available=0,t.next_in=U,t.input=z,t.avail_in=F,D.wrap=x,a},c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(h,C,c){C.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(h,C,c){C.exports=function(n,s){var r,o,m,g,y,v,a,p,i,l,u,_,w,S,A,R,O,N,B,W,V,b,T,e,P;r=n.state,o=n.next_in,e=n.input,m=o+(n.avail_in-5),g=n.next_out,P=n.output,y=g-(s-n.avail_out),v=g+(n.avail_out-257),a=r.dmax,p=r.wsize,i=r.whave,l=r.wnext,u=r.window,_=r.hold,w=r.bits,S=r.lencode,A=r.distcode,R=(1<<r.lenbits)-1,O=(1<<r.distbits)-1;t:do{w<15&&(_+=e[o++]<<w,w+=8,_+=e[o++]<<w,w+=8),N=S[_&R];e:for(;;){if(_>>>=B=N>>>24,w-=B,(B=N>>>16&255)===0)P[g++]=65535&N;else{if(!(16&B)){if((64&B)==0){N=S[(65535&N)+(_&(1<<B)-1)];continue e}if(32&B){r.mode=12;break t}n.msg="invalid literal/length code",r.mode=30;break t}W=65535&N,(B&=15)&&(w<B&&(_+=e[o++]<<w,w+=8),W+=_&(1<<B)-1,_>>>=B,w-=B),w<15&&(_+=e[o++]<<w,w+=8,_+=e[o++]<<w,w+=8),N=A[_&O];r:for(;;){if(_>>>=B=N>>>24,w-=B,!(16&(B=N>>>16&255))){if((64&B)==0){N=A[(65535&N)+(_&(1<<B)-1)];continue r}n.msg="invalid distance code",r.mode=30;break t}if(V=65535&N,w<(B&=15)&&(_+=e[o++]<<w,(w+=8)<B&&(_+=e[o++]<<w,w+=8)),a<(V+=_&(1<<B)-1)){n.msg="invalid distance too far back",r.mode=30;break t}if(_>>>=B,w-=B,(B=g-y)<V){if(i<(B=V-B)&&r.sane){n.msg="invalid distance too far back",r.mode=30;break t}if(T=u,(b=0)===l){if(b+=p-B,B<W){for(W-=B;P[g++]=u[b++],--B;);b=g-V,T=P}}else if(l<B){if(b+=p+l-B,(B-=l)<W){for(W-=B;P[g++]=u[b++],--B;);if(b=0,l<W){for(W-=B=l;P[g++]=u[b++],--B;);b=g-V,T=P}}}else if(b+=l-B,B<W){for(W-=B;P[g++]=u[b++],--B;);b=g-V,T=P}for(;2<W;)P[g++]=T[b++],P[g++]=T[b++],P[g++]=T[b++],W-=3;W&&(P[g++]=T[b++],1<W&&(P[g++]=T[b++]))}else{for(b=g-V;P[g++]=P[b++],P[g++]=P[b++],P[g++]=P[b++],2<(W-=3););W&&(P[g++]=P[b++],1<W&&(P[g++]=P[b++]))}break}}break}}while(o<m&&g<v);o-=W=w>>3,_&=(1<<(w-=W<<3))-1,n.next_in=o,n.next_out=g,n.avail_in=o<m?m-o+5:5-(o-m),n.avail_out=g<v?v-g+257:257-(g-v),r.hold=_,r.bits=w}},{}],49:[function(h,C,c){var n=h("../utils/common"),s=h("./adler32"),r=h("./crc32"),o=h("./inffast"),m=h("./inftrees"),g=1,y=2,v=0,a=-2,p=1,i=852,l=592;function u(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(b){var T;return b&&b.state?(T=b.state,b.total_in=b.total_out=T.total=0,b.msg="",T.wrap&&(b.adler=1&T.wrap),T.mode=p,T.last=0,T.havedict=0,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new n.Buf32(i),T.distcode=T.distdyn=new n.Buf32(l),T.sane=1,T.back=-1,v):a}function S(b){var T;return b&&b.state?((T=b.state).wsize=0,T.whave=0,T.wnext=0,w(b)):a}function A(b,T){var e,P;return b&&b.state?(P=b.state,T<0?(e=0,T=-T):(e=1+(T>>4),T<48&&(T&=15)),T&&(T<8||15<T)?a:(P.window!==null&&P.wbits!==T&&(P.window=null),P.wrap=e,P.wbits=T,S(b))):a}function R(b,T){var e,P;return b?(P=new _,(b.state=P).window=null,(e=A(b,T))!==v&&(b.state=null),e):a}var O,N,B=!0;function W(b){if(B){var T;for(O=new n.Buf32(512),N=new n.Buf32(32),T=0;T<144;)b.lens[T++]=8;for(;T<256;)b.lens[T++]=9;for(;T<280;)b.lens[T++]=7;for(;T<288;)b.lens[T++]=8;for(m(g,b.lens,0,288,O,0,b.work,{bits:9}),T=0;T<32;)b.lens[T++]=5;m(y,b.lens,0,32,N,0,b.work,{bits:5}),B=!1}b.lencode=O,b.lenbits=9,b.distcode=N,b.distbits=5}function V(b,T,e,P){var $,M=b.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new n.Buf8(M.wsize)),P>=M.wsize?(n.arraySet(M.window,T,e-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(P<($=M.wsize-M.wnext)&&($=P),n.arraySet(M.window,T,e-P,$,M.wnext),(P-=$)?(n.arraySet(M.window,T,e-P,P,0),M.wnext=P,M.whave=M.wsize):(M.wnext+=$,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=$))),0}c.inflateReset=S,c.inflateReset2=A,c.inflateResetKeep=w,c.inflateInit=function(b){return R(b,15)},c.inflateInit2=R,c.inflate=function(b,T){var e,P,$,M,tt,j,J,I,E,X,H,q,at,ht,et,nt,ut,st,ct,ft,t,L,D,d,f=0,x=new n.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&b.avail_in!==0)return a;(e=b.state).mode===12&&(e.mode=13),tt=b.next_out,$=b.output,J=b.avail_out,M=b.next_in,P=b.input,j=b.avail_in,I=e.hold,E=e.bits,X=j,H=J,L=v;t:for(;;)switch(e.mode){case p:if(e.wrap===0){e.mode=13;break}for(;E<16;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}if(2&e.wrap&&I===35615){x[e.check=0]=255&I,x[1]=I>>>8&255,e.check=r(e.check,x,2,0),E=I=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&I)<<8)+(I>>8))%31){b.msg="incorrect header check",e.mode=30;break}if((15&I)!=8){b.msg="unknown compression method",e.mode=30;break}if(E-=4,t=8+(15&(I>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){b.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,b.adler=e.check=1,e.mode=512&I?10:12,E=I=0;break;case 2:for(;E<16;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}if(e.flags=I,(255&e.flags)!=8){b.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){b.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=I>>8&1),512&e.flags&&(x[0]=255&I,x[1]=I>>>8&255,e.check=r(e.check,x,2,0)),E=I=0,e.mode=3;case 3:for(;E<32;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}e.head&&(e.head.time=I),512&e.flags&&(x[0]=255&I,x[1]=I>>>8&255,x[2]=I>>>16&255,x[3]=I>>>24&255,e.check=r(e.check,x,4,0)),E=I=0,e.mode=4;case 4:for(;E<16;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}e.head&&(e.head.xflags=255&I,e.head.os=I>>8),512&e.flags&&(x[0]=255&I,x[1]=I>>>8&255,e.check=r(e.check,x,2,0)),E=I=0,e.mode=5;case 5:if(1024&e.flags){for(;E<16;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}e.length=I,e.head&&(e.head.extra_len=I),512&e.flags&&(x[0]=255&I,x[1]=I>>>8&255,e.check=r(e.check,x,2,0)),E=I=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(j<(q=e.length)&&(q=j),q&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),n.arraySet(e.head.extra,P,M,q,t)),512&e.flags&&(e.check=r(e.check,P,q,M)),j-=q,M+=q,e.length-=q),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(j===0)break t;for(q=0;t=P[M+q++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&q<j;);if(512&e.flags&&(e.check=r(e.check,P,q,M)),j-=q,M+=q,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(j===0)break t;for(q=0;t=P[M+q++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&q<j;);if(512&e.flags&&(e.check=r(e.check,P,q,M)),j-=q,M+=q,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;E<16;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}if(I!==(65535&e.check)){b.msg="header crc mismatch",e.mode=30;break}E=I=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),b.adler=e.check=0,e.mode=12;break;case 10:for(;E<32;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}b.adler=e.check=u(I),E=I=0,e.mode=11;case 11:if(e.havedict===0)return b.next_out=tt,b.avail_out=J,b.next_in=M,b.avail_in=j,e.hold=I,e.bits=E,2;b.adler=e.check=1,e.mode=12;case 12:if(T===5||T===6)break t;case 13:if(e.last){I>>>=7&E,E-=7&E,e.mode=27;break}for(;E<3;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}switch(e.last=1&I,E-=1,3&(I>>>=1)){case 0:e.mode=14;break;case 1:if(W(e),e.mode=20,T!==6)break;I>>>=2,E-=2;break t;case 2:e.mode=17;break;case 3:b.msg="invalid block type",e.mode=30}I>>>=2,E-=2;break;case 14:for(I>>>=7&E,E-=7&E;E<32;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}if((65535&I)!=(I>>>16^65535)){b.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&I,E=I=0,e.mode=15,T===6)break t;case 15:e.mode=16;case 16:if(q=e.length){if(j<q&&(q=j),J<q&&(q=J),q===0)break t;n.arraySet($,P,M,q,tt),j-=q,M+=q,J-=q,tt+=q,e.length-=q;break}e.mode=12;break;case 17:for(;E<14;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}if(e.nlen=257+(31&I),I>>>=5,E-=5,e.ndist=1+(31&I),I>>>=5,E-=5,e.ncode=4+(15&I),I>>>=4,E-=4,286<e.nlen||30<e.ndist){b.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;E<3;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}e.lens[F[e.have++]]=7&I,I>>>=3,E-=3}for(;e.have<19;)e.lens[F[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,D={bits:e.lenbits},L=m(0,e.lens,0,19,e.lencode,0,e.work,D),e.lenbits=D.bits,L){b.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;nt=(f=e.lencode[I&(1<<e.lenbits)-1])>>>16&255,ut=65535&f,!((et=f>>>24)<=E);){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}if(ut<16)I>>>=et,E-=et,e.lens[e.have++]=ut;else{if(ut===16){for(d=et+2;E<d;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}if(I>>>=et,E-=et,e.have===0){b.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],q=3+(3&I),I>>>=2,E-=2}else if(ut===17){for(d=et+3;E<d;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}E-=et,t=0,q=3+(7&(I>>>=et)),I>>>=3,E-=3}else{for(d=et+7;E<d;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}E-=et,t=0,q=11+(127&(I>>>=et)),I>>>=7,E-=7}if(e.have+q>e.nlen+e.ndist){b.msg="invalid bit length repeat",e.mode=30;break}for(;q--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){b.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,D={bits:e.lenbits},L=m(g,e.lens,0,e.nlen,e.lencode,0,e.work,D),e.lenbits=D.bits,L){b.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,D={bits:e.distbits},L=m(y,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,D),e.distbits=D.bits,L){b.msg="invalid distances set",e.mode=30;break}if(e.mode=20,T===6)break t;case 20:e.mode=21;case 21:if(6<=j&&258<=J){b.next_out=tt,b.avail_out=J,b.next_in=M,b.avail_in=j,e.hold=I,e.bits=E,o(b,H),tt=b.next_out,$=b.output,J=b.avail_out,M=b.next_in,P=b.input,j=b.avail_in,I=e.hold,E=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;nt=(f=e.lencode[I&(1<<e.lenbits)-1])>>>16&255,ut=65535&f,!((et=f>>>24)<=E);){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}if(nt&&(240&nt)==0){for(st=et,ct=nt,ft=ut;nt=(f=e.lencode[ft+((I&(1<<st+ct)-1)>>st)])>>>16&255,ut=65535&f,!(st+(et=f>>>24)<=E);){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}I>>>=st,E-=st,e.back+=st}if(I>>>=et,E-=et,e.back+=et,e.length=ut,nt===0){e.mode=26;break}if(32&nt){e.back=-1,e.mode=12;break}if(64&nt){b.msg="invalid literal/length code",e.mode=30;break}e.extra=15&nt,e.mode=22;case 22:if(e.extra){for(d=e.extra;E<d;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}e.length+=I&(1<<e.extra)-1,I>>>=e.extra,E-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;nt=(f=e.distcode[I&(1<<e.distbits)-1])>>>16&255,ut=65535&f,!((et=f>>>24)<=E);){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}if((240&nt)==0){for(st=et,ct=nt,ft=ut;nt=(f=e.distcode[ft+((I&(1<<st+ct)-1)>>st)])>>>16&255,ut=65535&f,!(st+(et=f>>>24)<=E);){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}I>>>=st,E-=st,e.back+=st}if(I>>>=et,E-=et,e.back+=et,64&nt){b.msg="invalid distance code",e.mode=30;break}e.offset=ut,e.extra=15&nt,e.mode=24;case 24:if(e.extra){for(d=e.extra;E<d;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}e.offset+=I&(1<<e.extra)-1,I>>>=e.extra,E-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){b.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(J===0)break t;if(q=H-J,e.offset>q){if((q=e.offset-q)>e.whave&&e.sane){b.msg="invalid distance too far back",e.mode=30;break}at=q>e.wnext?(q-=e.wnext,e.wsize-q):e.wnext-q,q>e.length&&(q=e.length),ht=e.window}else ht=$,at=tt-e.offset,q=e.length;for(J<q&&(q=J),J-=q,e.length-=q;$[tt++]=ht[at++],--q;);e.length===0&&(e.mode=21);break;case 26:if(J===0)break t;$[tt++]=e.length,J--,e.mode=21;break;case 27:if(e.wrap){for(;E<32;){if(j===0)break t;j--,I|=P[M++]<<E,E+=8}if(H-=J,b.total_out+=H,e.total+=H,H&&(b.adler=e.check=e.flags?r(e.check,$,H,tt-H):s(e.check,$,H,tt-H)),H=J,(e.flags?I:u(I))!==e.check){b.msg="incorrect data check",e.mode=30;break}E=I=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;E<32;){if(j===0)break t;j--,I+=P[M++]<<E,E+=8}if(I!==(4294967295&e.total)){b.msg="incorrect length check",e.mode=30;break}E=I=0}e.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return a}return b.next_out=tt,b.avail_out=J,b.next_in=M,b.avail_in=j,e.hold=I,e.bits=E,(e.wsize||H!==b.avail_out&&e.mode<30&&(e.mode<27||T!==4))&&V(b,b.output,b.next_out,H-b.avail_out)?(e.mode=31,-4):(X-=b.avail_in,H-=b.avail_out,b.total_in+=X,b.total_out+=H,e.total+=H,e.wrap&&H&&(b.adler=e.check=e.flags?r(e.check,$,H,b.next_out-H):s(e.check,$,H,b.next_out-H)),b.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(X==0&&H===0||T===4)&&L===v&&(L=-5),L)},c.inflateEnd=function(b){if(!b||!b.state)return a;var T=b.state;return T.window&&(T.window=null),b.state=null,v},c.inflateGetHeader=function(b,T){var e;return b&&b.state?(2&(e=b.state).wrap)==0?a:((e.head=T).done=!1,v):a},c.inflateSetDictionary=function(b,T){var e,P=T.length;return b&&b.state?(e=b.state).wrap!==0&&e.mode!==11?a:e.mode===11&&s(1,T,P,0)!==e.check?-3:V(b,T,P,P)?(e.mode=31,-4):(e.havedict=1,v):a},c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(h,C,c){var n=h("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];C.exports=function(g,y,v,a,p,i,l,u){var _,w,S,A,R,O,N,B,W,V=u.bits,b=0,T=0,e=0,P=0,$=0,M=0,tt=0,j=0,J=0,I=0,E=null,X=0,H=new n.Buf16(16),q=new n.Buf16(16),at=null,ht=0;for(b=0;b<=15;b++)H[b]=0;for(T=0;T<a;T++)H[y[v+T]]++;for($=V,P=15;1<=P&&H[P]===0;P--);if(P<$&&($=P),P===0)return p[i++]=20971520,p[i++]=20971520,u.bits=1,0;for(e=1;e<P&&H[e]===0;e++);for($<e&&($=e),b=j=1;b<=15;b++)if(j<<=1,(j-=H[b])<0)return-1;if(0<j&&(g===0||P!==1))return-1;for(q[1]=0,b=1;b<15;b++)q[b+1]=q[b]+H[b];for(T=0;T<a;T++)y[v+T]!==0&&(l[q[y[v+T]]++]=T);if(O=g===0?(E=at=l,19):g===1?(E=s,X-=257,at=r,ht-=257,256):(E=o,at=m,-1),b=e,R=i,tt=T=I=0,S=-1,A=(J=1<<(M=$))-1,g===1&&852<J||g===2&&592<J)return 1;for(;;){for(N=b-tt,W=l[T]<O?(B=0,l[T]):l[T]>O?(B=at[ht+l[T]],E[X+l[T]]):(B=96,0),_=1<<b-tt,e=w=1<<M;p[R+(I>>tt)+(w-=_)]=N<<24|B<<16|W|0,w!==0;);for(_=1<<b-1;I&_;)_>>=1;if(_!==0?(I&=_-1,I+=_):I=0,T++,--H[b]==0){if(b===P)break;b=y[v+l[T]]}if($<b&&(I&A)!==S){for(tt===0&&(tt=$),R+=e,j=1<<(M=b-tt);M+tt<P&&!((j-=H[M+tt])<=0);)M++,j<<=1;if(J+=1<<M,g===1&&852<J||g===2&&592<J)return 1;p[S=I&A]=$<<24|M<<16|R-i|0}}return I!==0&&(p[R+I]=b-tt<<24|64<<16|0),u.bits=$,0}},{"../utils/common":41}],51:[function(h,C,c){C.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(h,C,c){var n=h("../utils/common"),s=0,r=1;function o(f){for(var x=f.length;0<=--x;)f[x]=0}var m=0,g=29,y=256,v=y+1+g,a=30,p=19,i=2*v+1,l=15,u=16,_=7,w=256,S=16,A=17,R=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(v+2));o(V);var b=new Array(2*a);o(b);var T=new Array(512);o(T);var e=new Array(256);o(e);var P=new Array(g);o(P);var $,M,tt,j=new Array(a);function J(f,x,F,U,z){this.static_tree=f,this.extra_bits=x,this.extra_base=F,this.elems=U,this.max_length=z,this.has_stree=f&&f.length}function I(f,x){this.dyn_tree=f,this.max_code=0,this.stat_desc=x}function E(f){return f<256?T[f]:T[256+(f>>>7)]}function X(f,x){f.pending_buf[f.pending++]=255&x,f.pending_buf[f.pending++]=x>>>8&255}function H(f,x,F){f.bi_valid>u-F?(f.bi_buf|=x<<f.bi_valid&65535,X(f,f.bi_buf),f.bi_buf=x>>u-f.bi_valid,f.bi_valid+=F-u):(f.bi_buf|=x<<f.bi_valid&65535,f.bi_valid+=F)}function q(f,x,F){H(f,F[2*x],F[2*x+1])}function at(f,x){for(var F=0;F|=1&f,f>>>=1,F<<=1,0<--x;);return F>>>1}function ht(f,x,F){var U,z,Z=new Array(l+1),K=0;for(U=1;U<=l;U++)Z[U]=K=K+F[U-1]<<1;for(z=0;z<=x;z++){var G=f[2*z+1];G!==0&&(f[2*z]=at(Z[G]++,G))}}function et(f){var x;for(x=0;x<v;x++)f.dyn_ltree[2*x]=0;for(x=0;x<a;x++)f.dyn_dtree[2*x]=0;for(x=0;x<p;x++)f.bl_tree[2*x]=0;f.dyn_ltree[2*w]=1,f.opt_len=f.static_len=0,f.last_lit=f.matches=0}function nt(f){8<f.bi_valid?X(f,f.bi_buf):0<f.bi_valid&&(f.pending_buf[f.pending++]=f.bi_buf),f.bi_buf=0,f.bi_valid=0}function ut(f,x,F,U){var z=2*x,Z=2*F;return f[z]<f[Z]||f[z]===f[Z]&&U[x]<=U[F]}function st(f,x,F){for(var U=f.heap[F],z=F<<1;z<=f.heap_len&&(z<f.heap_len&&ut(x,f.heap[z+1],f.heap[z],f.depth)&&z++,!ut(x,U,f.heap[z],f.depth));)f.heap[F]=f.heap[z],F=z,z<<=1;f.heap[F]=U}function ct(f,x,F){var U,z,Z,K,G=0;if(f.last_lit!==0)for(;U=f.pending_buf[f.d_buf+2*G]<<8|f.pending_buf[f.d_buf+2*G+1],z=f.pending_buf[f.l_buf+G],G++,U===0?q(f,z,x):(q(f,(Z=e[z])+y+1,x),(K=O[Z])!==0&&H(f,z-=P[Z],K),q(f,Z=E(--U),F),(K=N[Z])!==0&&H(f,U-=j[Z],K)),G<f.last_lit;);q(f,w,x)}function ft(f,x){var F,U,z,Z=x.dyn_tree,K=x.stat_desc.static_tree,G=x.stat_desc.has_stree,Q=x.stat_desc.elems,it=-1;for(f.heap_len=0,f.heap_max=i,F=0;F<Q;F++)Z[2*F]!==0?(f.heap[++f.heap_len]=it=F,f.depth[F]=0):Z[2*F+1]=0;for(;f.heap_len<2;)Z[2*(z=f.heap[++f.heap_len]=it<2?++it:0)]=1,f.depth[z]=0,f.opt_len--,G&&(f.static_len-=K[2*z+1]);for(x.max_code=it,F=f.heap_len>>1;1<=F;F--)st(f,Z,F);for(z=Q;F=f.heap[1],f.heap[1]=f.heap[f.heap_len--],st(f,Z,1),U=f.heap[1],f.heap[--f.heap_max]=F,f.heap[--f.heap_max]=U,Z[2*z]=Z[2*F]+Z[2*U],f.depth[z]=(f.depth[F]>=f.depth[U]?f.depth[F]:f.depth[U])+1,Z[2*F+1]=Z[2*U+1]=z,f.heap[1]=z++,st(f,Z,1),2<=f.heap_len;);f.heap[--f.heap_max]=f.heap[1],(function(rt,lt){var _t,dt,yt,ot,zt,Ot,pt=lt.dyn_tree,Wt=lt.max_code,pe=lt.stat_desc.static_tree,me=lt.stat_desc.has_stree,ge=lt.stat_desc.extra_bits,Gt=lt.stat_desc.extra_base,vt=lt.stat_desc.max_length,Et=0;for(ot=0;ot<=l;ot++)rt.bl_count[ot]=0;for(pt[2*rt.heap[rt.heap_max]+1]=0,_t=rt.heap_max+1;_t<i;_t++)vt<(ot=pt[2*pt[2*(dt=rt.heap[_t])+1]+1]+1)&&(ot=vt,Et++),pt[2*dt+1]=ot,Wt<dt||(rt.bl_count[ot]++,zt=0,Gt<=dt&&(zt=ge[dt-Gt]),Ot=pt[2*dt],rt.opt_len+=Ot*(ot+zt),me&&(rt.static_len+=Ot*(pe[2*dt+1]+zt)));if(Et!==0){do{for(ot=vt-1;rt.bl_count[ot]===0;)ot--;rt.bl_count[ot]--,rt.bl_count[ot+1]+=2,rt.bl_count[vt]--,Et-=2}while(0<Et);for(ot=vt;ot!==0;ot--)for(dt=rt.bl_count[ot];dt!==0;)Wt<(yt=rt.heap[--_t])||(pt[2*yt+1]!==ot&&(rt.opt_len+=(ot-pt[2*yt+1])*pt[2*yt],pt[2*yt+1]=ot),dt--)}})(f,x),ht(Z,it,f.bl_count)}function t(f,x,F){var U,z,Z=-1,K=x[1],G=0,Q=7,it=4;for(K===0&&(Q=138,it=3),x[2*(F+1)+1]=65535,U=0;U<=F;U++)z=K,K=x[2*(U+1)+1],++G<Q&&z===K||(G<it?f.bl_tree[2*z]+=G:z!==0?(z!==Z&&f.bl_tree[2*z]++,f.bl_tree[2*S]++):G<=10?f.bl_tree[2*A]++:f.bl_tree[2*R]++,Z=z,it=(G=0)===K?(Q=138,3):z===K?(Q=6,3):(Q=7,4))}function L(f,x,F){var U,z,Z=-1,K=x[1],G=0,Q=7,it=4;for(K===0&&(Q=138,it=3),U=0;U<=F;U++)if(z=K,K=x[2*(U+1)+1],!(++G<Q&&z===K)){if(G<it)for(;q(f,z,f.bl_tree),--G!=0;);else z!==0?(z!==Z&&(q(f,z,f.bl_tree),G--),q(f,S,f.bl_tree),H(f,G-3,2)):G<=10?(q(f,A,f.bl_tree),H(f,G-3,3)):(q(f,R,f.bl_tree),H(f,G-11,7));Z=z,it=(G=0)===K?(Q=138,3):z===K?(Q=6,3):(Q=7,4)}}o(j);var D=!1;function d(f,x,F,U){H(f,(m<<1)+(U?1:0),3),(function(z,Z,K,G){nt(z),X(z,K),X(z,~K),n.arraySet(z.pending_buf,z.window,Z,K,z.pending),z.pending+=K})(f,x,F)}c._tr_init=function(f){D||((function(){var x,F,U,z,Z,K=new Array(l+1);for(z=U=0;z<g-1;z++)for(P[z]=U,x=0;x<1<<O[z];x++)e[U++]=z;for(e[U-1]=z,z=Z=0;z<16;z++)for(j[z]=Z,x=0;x<1<<N[z];x++)T[Z++]=z;for(Z>>=7;z<a;z++)for(j[z]=Z<<7,x=0;x<1<<N[z]-7;x++)T[256+Z++]=z;for(F=0;F<=l;F++)K[F]=0;for(x=0;x<=143;)V[2*x+1]=8,x++,K[8]++;for(;x<=255;)V[2*x+1]=9,x++,K[9]++;for(;x<=279;)V[2*x+1]=7,x++,K[7]++;for(;x<=287;)V[2*x+1]=8,x++,K[8]++;for(ht(V,v+1,K),x=0;x<a;x++)b[2*x+1]=5,b[2*x]=at(x,5);$=new J(V,O,y+1,v,l),M=new J(b,N,0,a,l),tt=new J(new Array(0),B,0,p,_)})(),D=!0),f.l_desc=new I(f.dyn_ltree,$),f.d_desc=new I(f.dyn_dtree,M),f.bl_desc=new I(f.bl_tree,tt),f.bi_buf=0,f.bi_valid=0,et(f)},c._tr_stored_block=d,c._tr_flush_block=function(f,x,F,U){var z,Z,K=0;0<f.level?(f.strm.data_type===2&&(f.strm.data_type=(function(G){var Q,it=4093624447;for(Q=0;Q<=31;Q++,it>>>=1)if(1&it&&G.dyn_ltree[2*Q]!==0)return s;if(G.dyn_ltree[18]!==0||G.dyn_ltree[20]!==0||G.dyn_ltree[26]!==0)return r;for(Q=32;Q<y;Q++)if(G.dyn_ltree[2*Q]!==0)return r;return s})(f)),ft(f,f.l_desc),ft(f,f.d_desc),K=(function(G){var Q;for(t(G,G.dyn_ltree,G.l_desc.max_code),t(G,G.dyn_dtree,G.d_desc.max_code),ft(G,G.bl_desc),Q=p-1;3<=Q&&G.bl_tree[2*W[Q]+1]===0;Q--);return G.opt_len+=3*(Q+1)+5+5+4,Q})(f),z=f.opt_len+3+7>>>3,(Z=f.static_len+3+7>>>3)<=z&&(z=Z)):z=Z=F+5,F+4<=z&&x!==-1?d(f,x,F,U):f.strategy===4||Z===z?(H(f,2+(U?1:0),3),ct(f,V,b)):(H(f,4+(U?1:0),3),(function(G,Q,it,rt){var lt;for(H(G,Q-257,5),H(G,it-1,5),H(G,rt-4,4),lt=0;lt<rt;lt++)H(G,G.bl_tree[2*W[lt]+1],3);L(G,G.dyn_ltree,Q-1),L(G,G.dyn_dtree,it-1)})(f,f.l_desc.max_code+1,f.d_desc.max_code+1,K+1),ct(f,f.dyn_ltree,f.dyn_dtree)),et(f),U&&nt(f)},c._tr_tally=function(f,x,F){return f.pending_buf[f.d_buf+2*f.last_lit]=x>>>8&255,f.pending_buf[f.d_buf+2*f.last_lit+1]=255&x,f.pending_buf[f.l_buf+f.last_lit]=255&F,f.last_lit++,x===0?f.dyn_ltree[2*F]++:(f.matches++,x--,f.dyn_ltree[2*(e[F]+y+1)]++,f.dyn_dtree[2*E(x)]++),f.last_lit===f.lit_bufsize-1},c._tr_align=function(f){H(f,2,3),q(f,w,V),(function(x){x.bi_valid===16?(X(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)})(f)}},{"../utils/common":41}],53:[function(h,C,c){C.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(h,C,c){(function(n){(function(s,r){if(!s.setImmediate){var o,m,g,y,v=1,a={},p=!1,i=s.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(s);l=l&&l.setTimeout?l:s,o={}.toString.call(s.process)==="[object process]"?function(S){process.nextTick(function(){_(S)})}:(function(){if(s.postMessage&&!s.importScripts){var S=!0,A=s.onmessage;return s.onmessage=function(){S=!1},s.postMessage("","*"),s.onmessage=A,S}})()?(y="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",w,!1):s.attachEvent("onmessage",w),function(S){s.postMessage(y+S,"*")}):s.MessageChannel?((g=new MessageChannel).port1.onmessage=function(S){_(S.data)},function(S){g.port2.postMessage(S)}):i&&"onreadystatechange"in i.createElement("script")?(m=i.documentElement,function(S){var A=i.createElement("script");A.onreadystatechange=function(){_(S),A.onreadystatechange=null,m.removeChild(A),A=null},m.appendChild(A)}):function(S){setTimeout(_,0,S)},l.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var A=new Array(arguments.length-1),R=0;R<A.length;R++)A[R]=arguments[R+1];var O={callback:S,args:A};return a[v]=O,o(v),v++},l.clearImmediate=u}function u(S){delete a[S]}function _(S){if(p)setTimeout(_,0,S);else{var A=a[S];if(A){p=!0;try{(function(R){var O=R.callback,N=R.args;switch(N.length){case 0:O();break;case 1:O(N[0]);break;case 2:O(N[0],N[1]);break;case 3:O(N[0],N[1],N[2]);break;default:O.apply(r,N)}})(A)}finally{u(S),p=!1}}}}function w(S){S.source===s&&typeof S.data=="string"&&S.data.indexOf(y)===0&&_(+S.data.slice(y.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Bt)),Bt.exports}var bt={},Rt={},Ht;function jt(){return Ht||(Ht=1,Rt.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31}),Rt}var Tt={},Lt,Kt;function le(){return Kt||(Kt=1,Lt={C:254,L:1,D:8,N:18,M:18,F:18,B:8}),Lt}var wt={},Yt;function Ee(){return Yt||(Yt=1,wt.lpad=function(k,h,C){for(;k.length<h;)k=C+k;return k},wt.rpad=function(k,h,C){for(;k.length<h;)k=k+C;return k},wt.writeField=function(k,h,C,c){for(var n=0;n<h;n++)k.setUint8(c,C.charCodeAt(n)),c++;return c}),wt}var kt={},Qt;function Ce(){if(Qt)return kt;Qt=1;var Y=le(),k={string:"C",number:"N",boolean:"L",null:"C"};kt.multi=h,kt.bytesPer=n,kt.obj=c;function h(s){var r={};s.forEach(o);function o(m){C(r,m)}return c(r)}function C(s,r){for(var o in r){var m=typeof r[o]<"u"&&r[o]!==null;(typeof s[o]>"u"||m)&&(s[o]=r[o])}return s}function c(s){var r={},o=[];for(var m in s)r[m]=s[m]===null?"null":typeof s[m];for(var g in r){var y=k[r[g]];y&&o.push({name:g,type:y,size:Y[y]})}return o}function n(s){return s.reduce(function(r,o){return r+o.size},1)}return kt}var Pt,Xt;function Ie(){if(Xt)return Pt;Xt=1,le();var Y=Ee(),k=Ce();return Pt=function(C,c){var n=c||k.multi(C),s=32*n.length+1,r=k.bytesPer(n),o=new ArrayBuffer(s+32+r*C.length+1),m=new Date,g=new DataView(o);g.setUint8(0,3),g.setUint8(1,m.getFullYear()-1900),g.setUint8(2,m.getMonth()),g.setUint8(3,m.getDate()),g.setUint32(4,C.length,!0);var y=s+32;g.setUint16(8,y,!0),g.setUint16(10,r,!0),g.setInt8(32+s-1,13),n.forEach(function(a,p){a.name.split("").slice(0,8).forEach(function(i,l){g.setInt8(32+p*32+l,i.charCodeAt(0))}),g.setInt8(32+p*32+11,a.type.charCodeAt(0)),g.setInt8(32+p*32+16,a.size),a.type=="N"&&g.setInt8(32+p*32+17,3)});var v=s+32;return C.forEach(function(a,p){g.setUint8(v,32),v++,n.forEach(function(i){var l=a[i.name];switch((l===null||typeof l>"u")&&(l=""),i.type){case"L":g.setUint8(v,l?84:70),v++;break;case"D":v=Y.writeField(g,8,Y.lpad(l.toString(),8," "),v);break;case"N":v=Y.writeField(g,i.size,Y.lpad(l.toString(),i.size," ").substr(0,18),v);break;case"C":v=Y.writeField(g,i.size,Y.rpad(l.toString(),i.size," "),v);break;default:throw new Error("Unknown field type")}})}),g.setUint8(v,26),g},Pt}var Vt;function De(){return Vt||(Vt=1,Tt.structure=Ie()),Tt}var Ft,Jt;function fe(){return Jt||(Jt=1,Ft='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]'),Ft}var xt={},$t;function Zt(){return $t||($t=1,xt.enlarge=function(k,h){return h[0]<k.xmin&&(k.xmin=h[0]),h[0]>k.xmax&&(k.xmax=h[0]),h[1]<k.ymin&&(k.ymin=h[1]),h[1]>k.ymax&&(k.ymax=h[1]),k},xt.enlargeExtent=function(k,h){return h.xmax>k.xmax&&(k.xmax=h.xmax),h.xmin<k.xmin&&(k.xmin=h.xmin),h.ymax>k.ymax&&(k.ymax=h.ymax),h.ymin<k.ymin&&(k.ymin=h.ymin),k},xt.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}}),xt}var Dt={},te;function Oe(){if(te)return Dt;te=1;var Y=jt().jstypes;Dt.geojson=k,Dt.obj=C;function k(c){var n={};c.forEach(s);function s(r){h(n,r.properties)}return C(n)}function h(c,n){for(var s in n)c[s]=n[s];return c}function C(c){var n={},s=[];for(var r in c)n[r]=typeof c[r];for(var o in n)s.push({name:o,type:Y[n[o]]});return s}return Dt}var mt={},ee;function Be(){if(ee)return mt;ee=1;var Y=Zt();return mt.write=function(h,C,c,n){var s=28,r=100,o=0,m=0;h.forEach(function(y,v){c.setInt32(o,v),c.setInt32(o+4,10),c.setInt32(o+8,1,!0),c.setFloat64(o+12,y[0],!0),c.setFloat64(o+20,y[1],!0),n.setInt32(m,r/2),n.setInt32(m+4,10),m+=8,o+=s,r+=s})},mt.extent=function(k){return k.reduce(function(h,C){return Y.enlarge(h,C)},Y.blank())},mt.parts=function(h,C){return h.length},mt.shxLength=function(k){return k.length*8},mt.shpLength=function(k){return k.length*28},mt}var gt={},re;function Re(){if(re)return gt;re=1;var Y=Zt(),k=jt();gt.write=function(n,s,r,o,m){var g=0,y=0,v=100;n.forEach(a);function a(p,i){var l=C(p),u=h([p],m),_=l.length*16+48+(u-1)*4,w=l.reduce(function(R,O){return Y.enlarge(R,O)},Y.blank());o.setInt32(y,v/2),o.setInt32(y+4,_/2),y+=8,v+=_+8,r.setInt32(g,i+1),r.setInt32(g+4,_/2),r.setInt32(g+8,m,!0),r.setFloat64(g+12,w.xmin,!0),r.setFloat64(g+20,w.ymin,!0),r.setFloat64(g+28,w.xmax,!0),r.setFloat64(g+36,w.ymax,!0),r.setInt32(g+44,u,!0),r.setInt32(g+48,l.length,!0),r.setInt32(g+52,0,!0);for(var S=p.reduce(function(R,O){return Array.isArray(O[0][0])?R=R.concat(O):R.push(O),R},[]),A=1;A<u;A++)r.setInt32(g+52+A*4,S.reduce(function(R,O,N){return N<A?R+O.length:R},0),!0);l.forEach(function(O,N){r.setFloat64(g+56+N*16+(u-1)*4,O[0],!0),r.setFloat64(g+56+N*16+(u-1)*4+8,O[1],!0)}),g+=_+8}},gt.shpLength=function(c){return c.length*56+C(c).length*16},gt.shxLength=function(c){return c.length*8},gt.extent=function(c){return C(c).reduce(function(n,s){return Y.enlarge(n,s)},Y.blank())};function h(c,n){var s=1;return(n===k.geometries.POLYGON||n===k.geometries.POLYLINE)&&(s=c.reduce(function(r,o){return r+=o.length,Array.isArray(o[0][0][0])&&(r+=o.reduce(function(m,g){return m+g.length-1},0)),r},0)),s}gt.parts=h;function C(c,n){return n===void 0&&(n=[]),typeof c[0][0]=="object"?c.reduce(function(s,r){return s.concat(C(r))},n):c}return gt}var Ut,ne;function ce(){if(ne)return Ut;ne=1;var Y=jt(),k=De(),h=fe();Zt(),Oe();var C=Be(),c=Re(),n={1:C,5:c,3:c};Ut=s;function s(m,g,y,v){var a=Y.geometries[g],p=n[a],i=p.parts(y,a),l=100+(i-y.length)*4+p.shpLength(y),u=100+p.shxLength(y),_=new ArrayBuffer(l),w=new DataView(_),S=new ArrayBuffer(u),A=new DataView(S),R=p.extent(y);r(w,a),r(A,a),o(R,w),o(R,A),p.write(y,R,new DataView(_,100),new DataView(S,100),a),w.setInt32(24,l/2),A.setInt32(24,50+y.length*4);var O=k.structure(m);v(null,{shp:w,shx:A,dbf:O,prj:h})}function r(m,g){m.setInt32(0,9994),m.setInt32(28,1e3,!0),m.setInt32(32,g,!0)}function o(m,g){g.setFloat64(36,m.xmin,!0),g.setFloat64(44,m.ymin,!0),g.setFloat64(52,m.xmax,!0),g.setFloat64(60,m.ymax,!0)}return Ut}var At={},ie;function Te(){if(ie)return At;ie=1,At.point=Y("Point","POINT"),At.line=Y("LineString","POLYLINE"),At.polygon=Y("Polygon","POLYGON");function Y(c,n){return function(s){var r=s.features.filter(C(c));return{geometries:n==="POLYGON"||n==="POLYLINE"?[r.map(k)]:r.map(k),properties:r.map(h),type:n}}}function k(c){return c.geometry.coordinates[0]!==void 0&&c.geometry.coordinates[0][0]!==void 0&&c.geometry.coordinates[0][0][0]!==void 0?c.geometry.coordinates[0]:c.geometry.coordinates}function h(c){return c.properties}function C(c){return function(n){return n.geometry.type===c}}return At}var Nt,ae;function de(){if(ae)return Nt;ae=1;var Y=ce(),k=Te(),h=fe(),C=ze();return Nt=function(c,n){var s=new C,r=s.folder(n&&n.folder?n.folder:"layers");[k.point(c),k.line(c),k.polygon(c)].forEach(function(m){m.geometries.length&&m.geometries[0].length&&Y(m.properties,m.type,m.geometries,function(g,y){var v=n&&n.types[m.type.toLowerCase()]?n.types[m.type.toLowerCase()]:m.type;r.file(v+".shp",y.shp.buffer,{binary:!0}),r.file(v+".shx",y.shx.buffer,{binary:!0}),r.file(v+".dbf",y.dbf.buffer,{binary:!0}),r.file(v+".prj",h)})});var o={type:"base64"};return s.generateAsync(o)},Nt}var Mt,se;function Le(){if(se)return Mt;se=1;var Y=de();return Mt=async function(k,h){var C=await Y(k,h);location.href="data:application/zip;base64,"+C},Mt}var oe;function Pe(){return oe||(oe=1,bt.download=Le(),bt.write=ce(),bt.zip=de()),bt}var Fe=Pe();const Ue=_e(Fe),Ne={layers:[],mapStyle:St.getters.mapStyle,controller:!0,screenshotFilename:"",useDevicePixels:!1,getCursor:({isDragging:Y,isHovering:k})=>Y?"grabbing":k?"pointer":""},ue={position:"absolute",left:0,top:0,width:"100%",height:"100%"};St.state.colorScheme,ve.DarkMode;function Me(Y){let{container:k=document.body}=Y;if(typeof k=="string"&&(k=document.querySelector(k)),!k)throw new Error("[DeckMap] container not found");window.getComputedStyle(k).position==="static"&&(k.style.position="relative");const C=document.createElement("div");k.appendChild(C),Object.assign(C.style,ue);const c=document.createElement("canvas");return c.width=window.innerWidth,c.height=window.innerHeight,c.oncontextmenu=()=>!1,k.appendChild(c),Object.assign(c.style,ue),{container:k,mapboxCanvas:C,deckCanvas:c}}class je extends Se{constructor(k={}){k={...Ne,onResize:()=>{this._map&&this._map.resize()},onAfterRender:()=>{this.props.screenshotFilename&&(this.savePNGcallback(),this.props.screenshotFilename="")},...k};const{mapboxCanvas:h,deckCanvas:C}=Me(k),c=k.viewState,n=k.basemap;super({canvas:C,...k}),n?this._map=n:this._map=new ye.Map({container:h,style:k.mapStyle,interactive:!1,center:[c.longitude,c.latitude],zoom:c.zoom,bearing:c.bearing||0,pitch:c.pitch||0}),this._onBeforeRender=s=>{if(this.onBeforeRender(s),this._map){const r=this.getViewports()[0];this._map.jumpTo({center:[r.longitude,r.latitude],zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),this.redrawMapbox()}}}redrawMapbox(){const k=this._map;k.style&&(k._frame&&(k._frame.cancel(),k._frame=null),k._render())}setMapStyle(k){this._map&&this._map.setStyle(k)}getMapboxMap(){return this._map}finalize(){this._map&&this._map.remove(),this._map=null,super.finalize()}setProps(k){"onBeforeRender"in k&&this._onBeforeRender&&k.onBeforeRender!==this._onBeforeRender&&(this.onBeforeRender=k.onBeforeRender,k.onBeforeRender=this._onBeforeRender),super.setProps(k)}takeScreenshot(){this.props.useDevicePixels=!0,this.props.screenshotFilename="screenshot1.png",this.redraw()}savePNGcallback(){const k=this._map._canvas.toDataURL("image/png"),h=this.canvas.toDataURL("image/png"),C=this.mergeImageURIs({width:this.canvas.width,height:this.canvas.height,imageDataURLs:[k,h]});this.props.useDevicePixels=!1,C.then(c=>{var n=document.createElement("a");n.setAttribute("href",c),n.setAttribute("download","screenshot.png"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)})}mergeImageURIs(k){return new Promise((h,C)=>{var c=document.createElement("canvas");c.width=k.width,c.height=k.height,Promise.all(k.imageDataURLs.map(n=>this.add2canvas(c,n))).then(()=>{const n=c.getContext("2d"),s=c.width-152,r=c.height-8;n.beginPath(),n.rect(s-4,r-14,158,22),n.fillStyle="#ffffff44",n.fill(),n.font="11px Arial",n.fillStyle="#888",n.fillText("© Mapbox  © OpenStreetMap",s,r),h(c.toDataURL("image/png"))})})}add2canvas(k,h){return new Promise((C,c)=>{k||c(),h||c();var n=new Image;n.onload=function(){k.getContext("2d").drawImage(this,0,0),C(!0)},n.src=h})}}class Ze{layers;deckInstance;constructor(){this.layers={},this.deckInstance=null}init(k){if(this.deckInstance=new je({...k,map:be}),k.mapStyle!==null){const h=St.getters.mapStyle;this.deckInstance.setMapStyle(h)}}destroy(){this.deckInstance&&(this.deckInstance.finalize(),delete this.deckInstance)}hasLayer(k){return!!this.layers[k]}getLayers(){return this.layers}isVisible(k){return this.layers[k]&&this.layers[k].props.visible!==!1}updateDeckInstance(){if(!this.deckInstance)return;const k=[...Object.values(this.layers)];this.deckInstance.setProps({layers:k})}updateStyle(){if(!this.deckInstance)return;const k=St.getters.mapStyle;this.deckInstance.setMapStyle(k)}addLayer(k){if(!k.id)throw new Error(`[layerManager.addLayer] layer id must defined. Received "${k.id}" instead`);this.layers[k.id]=k,this.updateDeckInstance()}updateLayer(k,h){if(!this.layers[k])return;const C=this.layers[k];this.layers[k]=C.clone(h),this.updateDeckInstance()}removeLayer(k){this.hasLayer(k)&&(delete this.layers[k],this.updateDeckInstance())}hideLayer(k){this.hasLayer(k)&&this.updateLayer(k,{visible:!1})}showLayer(k){this.hasLayer(k)&&this.updateLayer(k,{visible:!0})}takeScreenshot(){this.deckInstance.takeScreenshot()}}const We={messages:{en:{title:"Draw Shapes",hint:"Click on map to draw shapes.",clear:"Clear",shapefile:"Export","close-shape":"Add more points to close shape.","more-shapes":"Export now or start new shape."},de:{}}},Ge=we({name:"DrawingTool",i18n:We,data:()=>{const Y=[];return{canExport:!1,hint:"",isDark:St.state.isDarkMode,points:Y,showShapeDrawer:!1,layerManager:new Ze,mapID:`map-id-${Math.floor(1e12*Math.random())}`,polygons:[{type:"Feature",geometry:{type:"Polygon",coordinates:[Y]},finished:!1}]}},mounted(){console.log("DRATWOOL"),this.hint=this.$t("hint"),this.setupLayerManager(),this.updateLayers()},beforeDestroy(){this.showShapeDrawer=!1,this.layerManager.destroy()},watch:{viewState(){this.layerManager.deckInstance.setProps({viewState:this.viewState})},"globalStore.state.isDarkMode"(){this.isDark=this.$store.state.isDarkMode,this.layerManager.updateStyle()}},computed:{viewState(){return this.$store.state.viewState}},methods:{toggleShapeDrawer(){this.clearShapes(),this.updateLayers(),this.showShapeDrawer=!this.showShapeDrawer},clearShapes(){this.canExport=!1,this.points=[],this.polygons=[{type:"Feature",geometry:{type:"Polygon",coordinates:[this.points]},finished:!1}]},setupLayerManager(){this.layerManager.init({container:`#${this.mapID}`,viewState:this.$store.state.viewState,pickingRadius:3,mapStyle:null,getCursor:({isDragging:Y,isHovering:k})=>Y?"grabbing":k?"pointer":"crosshair",onViewStateChange:({viewState:Y})=>{this.$store.commit("setMapCamera",Y)},onClick:this.handleMapClick})},exportIt(){this.polygons=this.polygons.filter(k=>k.finished),this.points=[],this.updateLayers();const Y={type:"FeatureCollection",features:this.polygons};Ue.download(Y,{folder:"shapefile-wgs84",types:{point:"points",polygon:"polygons",line:"lines"}}),this.startNewPolygon()},cancel(){this.hint=this.$t("hint"),this.clearShapes(),this.updateLayers(),this.showShapeDrawer=!1},handleMapClick(Y,k){Y.coordinate&&(k.rightButton?this.points.pop():(this.points.push(Y.coordinate),this.hint=this.$t("close-shape")),this.updateLayers())},startNewPolygon(){this.points=[],this.polygons.push({type:"Feature",geometry:{type:"Polygon",coordinates:[this.points]},finished:!1})},handlePointClick(Y){return Y.index===0&&(this.points.push(this.points[0]),this.polygons[this.polygons.length-1].finished=!0,this.startNewPolygon(),this.canExport=!0,this.hint=this.$t("more-shapes"),this.updateLayers()),!0},handleViewState(Y){this.$store.commit("setMapCamera",Y)},updateLayers(){const Y=this.polygons.slice(0),k=this.points.slice(0);this.layerManager.removeLayer("draw-polygon-layer"),this.layerManager.addLayer(new xe({id:"draw-polygon-layer",data:Y,pickable:!1,stroked:!0,filled:!0,extruded:!1,lineWidthMinPixels:4,getFillColor:[175,160,255,80],getLineColor:[255,0,200],getLineWidth:10,parameters:{depthTest:!1}})),this.layerManager.removeLayer("draw-scatterplot-layer"),this.layerManager.addLayer(new Ae({id:"draw-scatterplot-layer",data:k,getPosition:h=>h,pickable:!0,stroked:!0,filled:!0,radiusMinPixels:6,radiusMaxPixels:6,lineWidthMinPixels:2,getFillColor:[255,0,200],getLineColor:[255,255,255],opacity:1,onClick:this.handlePointClick}))}}}),he="/assets/draw-icon-dm-DbFh91q-.png",qe="data:image/png;base64,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";var He=function(){var k=this,h=k._self._c;return k._self._setupProxy,h("div",{staticClass:"draw-thing"},[h("div",{directives:[{name:"show",rawName:"v-show",value:k.showShapeDrawer,expression:"showShapeDrawer"}],staticClass:"map",attrs:{id:k.mapID},on:{click:k.handleMapClick}}),h("div",{staticClass:"map-actions"},[k.isDark&&k.showShapeDrawer?h("button",{staticClass:"button draw-button is-tiny",class:{"is-drawing":k.showShapeDrawer},style:{border:"1px solid rgb(119,119,119)"},attrs:{title:"Draw"},on:{click:k.toggleShapeDrawer}},[h("img",{attrs:{src:he,width:"16"}})]):k.isDark&&!k.showShapeDrawer?h("button",{staticClass:"button draw-button is-tiny",class:{"is-drawing":k.showShapeDrawer},style:{background:"rgb(43,60,78)",border:"1px solid rgb(119,119,119)"},attrs:{title:"Draw"},on:{click:k.toggleShapeDrawer}},[h("img",{attrs:{src:he,width:"16"}})]):h("button",{staticClass:"button draw-button is-tiny",class:{"is-drawing":k.showShapeDrawer},style:{border:"1px solid rgb(224,224,224)"},attrs:{title:"Draw"},on:{click:k.toggleShapeDrawer}},[h("img",{attrs:{src:qe,width:"16"}})])]),k.showShapeDrawer?h("div",{staticClass:"control-panel"},[h("h3",[k._v(k._s(k.$t("title")))]),h("p",[k._v(k._s(k.hint))]),h("div",{staticClass:"buttons"},[h("button",{staticClass:"button is-small export-button",style:{"is-outlined":!k.canExport},attrs:{disabled:!k.canExport},on:{click:k.exportIt}},[k._v(k._s(k.$t("shapefile")))]),h("button",{staticClass:"button is-small is-outlined",on:{click:k.cancel}},[k._v(k._s(k.$t("clear")))])])]):k._e()])},Ke=[],Ye=ke(Ge,He,Ke,!1,null,"ef05087b");const Je=Ye.exports;export{Je as D,ze as r};
