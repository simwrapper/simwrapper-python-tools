import{c as oe,h as fe,r as E}from"./color-CBfzWUsH.js";import{b as I,g as re,h as se,l as le,d as ce,c as de}from"./bisect-CYcslDjR.js";import{s as ie,a as ue,b as be,c as me,d as he,e as ge,f as pe,g as ye,h as ve,i as we,o as _,t as L}from"./threshold-BCEk2Ck_.js";import{c as k}from"./init-DZFJxo1o.js";import{w as F,v as Be,l as ke,k as Me,j as Fe,u as Ae,t as Re,n as xe,m as Ce,h as $e,s as Ge,p as Ve,f as Oe,g as Ne,e as De,r as Pe,d as Ie,q as ze,o as Ee,b as Se,c as Ye,a as je,i as Te,x as _e,y as Le,z as qe,A as We,B as He,C as Ue,D as Je,E as Ke,F as Qe,G as Xe,H as Ze,I as ea,J as aa,K as ta,L as na,M as oa,N as fa,O as ra}from"./viridis-Dsxo9Ge-.js";import{c as sa,i as q,w as la}from"./rainbow-DYLOPEGn.js";import{i as W,g as N}from"./index-D3p5oi12.js";const ca=Object.freeze(Object.defineProperty({__proto__:null,color:oe,cubehelix:I,gray:re,hcl:se,hsl:fe,lab:le,lch:ce,rgb:E},Symbol.toStringTag,{value:"Module"})),da=k("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var H=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(k);const ia=F(H);var U=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(k);const ua=F(U);var J=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(k);const ba=F(J);var K=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(k);const ma=F(K);var Q=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(k);const ha=F(Q);var X=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(k);const ga=F(X);var Z=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(k);const pa=F(Z);var ee=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(k);const ya=F(ee);var ae=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(k);const va=F(ae);function wa(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const Ba=de(I(300,.5,0),I(-240,.5,1));var V=E(),ka=Math.PI/3,Ma=Math.PI*2/3;function Fa(e){var a;return e=(.5-e)*Math.PI,V.r=255*(a=Math.sin(e))*a,V.g=255*(a=Math.sin(e+ka))*a,V.b=255*(a=Math.sin(e+Ma))*a,V+""}function Aa(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}const te=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:Be,interpolateBrBG:ia,interpolateBuGn:ke,interpolateBuPu:Me,interpolateCividis:wa,interpolateCool:sa,interpolateCubehelixDefault:Ba,interpolateGnBu:Fe,interpolateGreens:Ae,interpolateGreys:Re,interpolateInferno:xe,interpolateMagma:Ce,interpolateOrRd:$e,interpolateOranges:Ge,interpolatePRGn:ua,interpolatePiYG:ba,interpolatePlasma:Ve,interpolatePuBu:Oe,interpolatePuBuGn:Ne,interpolatePuOr:ma,interpolatePuRd:De,interpolatePurples:Pe,interpolateRainbow:q,interpolateRdBu:ha,interpolateRdGy:ga,interpolateRdPu:Ie,interpolateRdYlBu:pa,interpolateRdYlGn:ya,interpolateReds:ze,interpolateSinebow:Fa,interpolateSpectral:va,interpolateTurbo:Aa,interpolateViridis:Ee,interpolateWarm:la,interpolateYlGn:Se,interpolateYlGnBu:Ye,interpolateYlOrBr:je,interpolateYlOrRd:Te,schemeAccent:ie,schemeBlues:_e,schemeBrBG:H,schemeBuGn:Le,schemeBuPu:qe,schemeCategory10:ue,schemeDark2:be,schemeGnBu:We,schemeGreens:He,schemeGreys:Ue,schemeObservable10:me,schemeOrRd:Je,schemeOranges:Ke,schemePRGn:U,schemePaired:he,schemePastel1:ge,schemePastel2:pe,schemePiYG:J,schemePuBu:Qe,schemePuBuGn:Xe,schemePuOr:K,schemePuRd:Ze,schemePurples:ea,schemeRdBu:Q,schemeRdGy:X,schemeRdPu:aa,schemeRdYlBu:Z,schemeRdYlGn:ee,schemeReds:ta,schemeSet1:ye,schemeSet2:ve,schemeSet3:we,schemeSpectral:ae,schemeTableau10:da,schemeYlGn:na,schemeYlGnBu:oa,schemeYlOrBr:fa,schemeYlOrRd:ra},Symbol.toStringTag,{value:"Module"})),j={greenRed:["#a6d96a","#d9ef8b","#ffffbf","#fee08b","#fdae61","#f46d43","#d73027"]},C={...te,...ca};var Ra=(e=>(e[e.categorical=0]="categorical",e[e.diverging=1]="diverging",e[e.sequential=2]="sequential",e))(Ra||{});function et(e,a){let t=e;typeof e=="string"&&(t=e.split(",").map(d=>d.trim()));const n=`interpolate${a||"Rainbow"}`,s=te[n]||q,o=_().domain(t).range(t.map((d,b)=>s((b+1)/t.length))),c={};return t.forEach(d=>c[d]=o(d)),c}function xa(e){return e.data?e.data.type===W.STRING||e.options.colorRamp.style==0?Ya(e):e.data2?ja(e):Ca(e):{rgbArray:null,legend:[],calculatedValues:null}}function Ca(e){const{metric:a,max:t,min:n}=_a(e),s=La({options:e.options,max:t,min:n}),o=$a(e),{rgbArray:c,legend:d,isRGBA:b}=Wa({numFeatures:e.numFeatures,metric:a,breakpoints:s,max:t,min:n,transparencies:o,fixedColors:e.options.fixedColors||[]});return{rgbArray:c,legend:d,calculatedValues:a,isRGBA:b}}function $a(e){if(!e.transparency)return;const a=new Uint8Array(e.numFeatures);for(let t=0;t<e.transparency.values.length;t++){const n=e.lookup?e.lookup.values[t]:t;a[n]=Math.floor(255*e.data.values[t])}return a}function Ga(e,a){if(e.length<2)throw new Error("At least two colors are required for interpolation.");const t=[];for(let n=0;n<e.length-1;n++){const s=T(e[n]),o=T(e[n+1]);for(let c=0;c<a;c++){const d=Va(s,o,a,c);t.push(Oa(d))}}return t}function T(e){const a=parseInt(e.slice(1),16),t=a>>16&255,n=a>>8&255,s=a&255;return[t,n,s]}function Va(e,a,t,n){const[s,o,c]=e,[d,b,u]=a,m=Math.round(s+(d-s)*n/t),r=Math.round(o+(b-o)*n/t),f=Math.round(c+(u-c)*n/t);return[m,r,f]}function Oa(e){const[a,t,n]=e;return`#${(1<<24|a<<16|t<<8|n).toString(16).slice(1)}`}function Na(e,a){let t;if(Object.keys(j).includes(e.ramp))return Ga(j[e.ramp],a);if(e.style===0)return C[`scheme${e.ramp}`].slice(0,a);const n=`scheme${e.ramp}`;if(a>3&&C[n]&&C[n][a])t=C[`scheme${e.ramp}`][a];else try{const s=C[`interpolate${e.ramp}`];t=[];for(let o=0;o<a;++o){const c=a<=3?.7*o/(a-1)+.15:o/(a-1),d=s(c),b=C.rgb(d).hex();t.push(b)}}catch{return Na(e,a-1)}return e.style===1&&a%2===1&&(t[Math.floor(a/2)]=N.state.isDarkMode?"#282828":"#e4e4e4"),t}function Da(e){return e.data.type===W.STRING?Pa(e):e.data2?Ia(e):za(e)}function Pa(e){const{columnName:a,dataset:t,scaleFactor:n}=e.options;return{array:new Float32Array,legend:[],calculatedValues:null}}function Ia(e){const{numFeatures:a,data:t,data2:n,lookup:s,lookup2:o,normalize:c,join:d,options:b}=e,{columnName:u,dataset:m,scaleFactor:r,relative:f}=b;if(isNaN(r))return{array:null,legend:[],calculatedValues:null};const p=new Float32Array(a),l=new Float32Array(a),g=new Float32Array(a);n&&o&&(t.values.forEach((i,y)=>{l[s.values[y]]+=i}),n.values.forEach((i,y)=>{g[o.values[y]]+=i}));const B=new Float32Array(a);let M=new Float32Array(0);f&&(M=new Float32Array(a));for(let i=0;i<a;i++)B[i]=l[i]-g[i],f&&(M[i]=100*(B[i]/g[i]));const A=f?M:B;if(r)for(let i=0;i<a;i++)p[i]=Math.abs(A[i]/r);const w=[];for(const i of[1,5,10,17,25,50])w.push({label:r*i,value:i});return w[0].label="<"+w[0].label,w[w.length-1].label=w[w.length-1].label+"+",{array:p,legend:w,calculatedValues:A}}function za(e){const{numFeatures:a,data:t,lookup:n,normalize:s,options:o}=e,{columnName:c,dataset:d,scaleFactor:b}=o;if(Number.isNaN(b))return{array:null,legend:[],calculatedValues:null};const u=new Float32Array(a),m=new Float32Array(a);if(b)for(let f=0;f<t.values.length;f++){const p=n?n.values[f]:f;u[p]=t.values[f]/b,m[p]=t.values[f]}const r=[];for(const f of[1,5,10,17,25,50])r.push({label:b*f,value:f});return r[0].label="<"+r[0].label,r[r.length-1].label=r[r.length-1].label+"+",{array:u,legend:r,calculatedValues:m}}function Ea(e){const{length:a,data:t,lookup:n,normalize:s,join:o,options:c}=e,{columnName:d,dataset:b,scaleFactor:u}=c;if(typeof u!="number")return{heights:0,calculatedValues:null};const m=new Float32Array(a),r=new Float32Array(a);if(o==="@count")for(let l=0;l<t.values.length;l++){const g=n?n.values[l]:l;r[g]+=1}else for(let l=0;l<t.values.length;l++){const g=n?n.values[l]:l;r[g]+=t.values[l]}let f=t.values,p=t.max||-1/0;if(s){f=new Float32Array(t.values.length),p=-1/0;for(let l=0;l<t.values.length;l++)f[l]=s.values[l]?t.values[l]/s.values[l]:NaN,f[l]>p&&(p=f[l])}if(u)for(let l=0;l<t.values.length;l++){const g=n?n.values[l]:l;r[g]=f[l],m[g]=f[l]/u}return{heights:m,calculatedValues:r,normalizedValues:null}}function Sa(e){const{length:a,data:t,lookup:n,normalize:s,join:o,options:c}=e,{columnName:d,dataset:b,scaleFactor:u}=c;if(typeof u!="number")return{radius:0,calculatedValues:null};const m=new Float32Array(a),r=new Float32Array(a);if(!u)return{radius:m,calculatedValues:r};if(o==="@count")for(let f=0;f<t.values.length;f++){const p=n?n.values[f]:f;r[p]+=1}else for(let f=0;f<t.values.length;f++){const p=n?n.values[f]:f;r[p]+=t.values[f]}for(let f=0;f<a;f++)m[f]=Math.sqrt(r[f]/u);return{radius:m,calculatedValues:r}}function Ya(e){const{numFeatures:a,data:t,lookup:n,normalize:s,join:o,options:c}=e,{colorRamp:d,columnName:b,dataset:u,fixedColors:m}=c,r=S(m),f=_().range(r),p=N.state.isDarkMode?48:228,l=new Uint8ClampedArray(a*3).fill(p),g=[];for(let i=0;i<t.values.length;i++){const y=n?n.values[i]:i;g[y]=t.values[i]}for(let i=0;i<a;i++){if(e.filter[i]===-1||g[i]==null)continue;const y=f(g[i]),R=i*3;l[R+0]=y[0],l[R+1]=y[1],l[R+2]=y[2]}const B=[],M=f.domain(),A=f.range();M.forEach((i,y)=>B.push({label:i,value:A[y%A.length]})),B.sort((i,y)=>i.label<y.label?-1:1);const w=g.map(i=>!!i);return{rgbArray:l,legend:B,calculatedValues:null,normalizedValues:null,hasCategory:w}}function ne(e){let{colorRamp:a,fixedColors:t,minDiff:n,maxDiff:s}=e;const o=a.steps??t?.length??5;if(a.breakpoints){const u=a.breakpoints.split(",").map(r=>parseFloat(r.trim()));if(a.steps!==u.length+1)throw Error('Color ramp "steps" must be one larger than number of breakpoints');let m=-1/0;for(const r of u){if(r<m)throw Error("Breakpoints must be in lowest to highest order");m=r}return u}if(o==2)return[0];if(o==3)return[-1,1];const c=s>Math.abs(n)?s:-1*n,d=Math.floor(o/2)-1,b=d+1;if(o%2==1){const u=[1];for(let r=1;r<=d;r++)u.push(r*c/b);const m=u.slice().reverse().map(r=>-1*r);return m.push(...u),m}else{const u=[0];for(let r=1;r<=d;r++)u.push(r*c/b);const m=u.slice().reverse().map(r=>-1*r);return m.pop(),m.push(...u),m}}function ja(e){const{numFeatures:a,options:t,relative:n,data:s,data2:o,lookup:c,lookup2:d}=e,{colorRamp:b,fixedColors:u}=t;let m=new Float32Array(a),r=new Float32Array(a);o&&d&&(s.values.forEach((h,v)=>{m[c.values[v]]+=h}),o.values.forEach((h,v)=>{r[d.values[v]]+=h})),m=z(m,e),r=z(r,e);const f=new Float32Array(a);let p=new Float32Array(0);n&&(p=new Float32Array(a));for(let h=0;h<a;h++)f[h]=m[h]-r[h],n&&(p[h]=100*(f[h]/r[h]));const l=n?p:f,g=l.reduce((h,v)=>Number.isFinite(v)?Math.min(h,v):h,1/0),B=l.reduce((h,v)=>Number.isFinite(v)?Math.max(h,v):h,-1/0);let M;const A=!!t.colorRamp.breakpoints;g<0?M=ne({colorRamp:b,fixedColors:u,minDiff:g,maxDiff:B}):M=Ta({colorRamp:b,fixedColors:u||[],min:g,max:B}).map(h=>b.style===1?h:h*B);const w=S(u||[]),i=L().range(w).domain(M),y=N.state.isDarkMode?[48,48,48]:[232,232,232],R=new Uint8ClampedArray(a*3);l.forEach((h,v)=>{const G=Number.isFinite(h)?i(h):y,x=v*3;R[x+0]=G[0],R[x+1]=G[1],R[x+2]=G[2]});const D=[],P=i.domain(),Y=i.range();let $;for(let h=0;h<P.length;h++){const v=P[h],G=A?$:Math.round($*1),x=A?v:Math.round(v*1);D.push({label:$!==void 0?`${G} — ${x}`:`< ${x}`,value:Y[h]}),$=v}return D.push({label:`> ${Math.round($*1)}`,value:Y[P.length]}),{rgbArray:R,legend:D,calculatedValues:l,normalizedValues:null}}function Ta(e){const{colorRamp:a,fixedColors:t,min:n,max:s}=e;if(a.style===1)return ne({colorRamp:a,fixedColors:t,minDiff:n,maxDiff:s});if(a.breakpoints){const b=a.breakpoints.split(",").map(m=>parseFloat(m));if(a.steps!==b.length+1)throw Error('Color ramp "steps" must be one larger than number of breakpoints');let u=-1/0;for(const m of b){if(m<u)throw Error("Breakpoints must be in lowest to highest order");u=m}return b}const o=t.length,c=3;return new Array(o-1).fill(0).map((b,u)=>Math.pow(1/o*(u+1),c))}function _a(e){const a=new Float32Array(e.numFeatures);if(e.join==="@count")for(let o=0;o<e.data.values.length;o++){const c=e.lookup?e.lookup.values[o]:o;a[c]+=1}else for(let o=0;o<e.data.values.length;o++){const c=e.lookup?e.lookup.values[o]:o;a[c]+=e.data.values[o]}const t=z(a,e);let n=1/0,s=-1/0;for(let o=0;o<e.numFeatures;o++){const c=t[o];Number.isFinite(c)&&(n=Math.min(n,c),s=Math.max(s,c))}return n=n??1/0,s=s??-1/0,{metric:t,max:s,min:n}}function La(e){if(e.options.colorRamp.breakpoints)return qa(e);let a=9;a=e.options.colorRamp?.steps||a,a=e.options.fixedColors?.length||a;const t=3,n=new Array(a-1).fill(0).map((c,d)=>Math.pow(1/a*(d+1),t));let s=[],o=e.max-e.min||1;for(let c=0;c<a-1;c++)s.push(e.min+o*n[c]);return s}function qa(e){if(!e.options.colorRamp.breakpoints)return[];const a=e.options.colorRamp.breakpoints.split(",").map(n=>parseFloat(n));if(e.options.colorRamp.steps!==a.length+1)throw Error('Color ramp "steps" must be one larger than number of breakpoints');let t=-1/0;for(const n of a){if(n<t)throw Error("Breakpoints must be in lowest to highest order");t=n}return a}function Wa(e){const a=S(e.fixedColors),t=L().range(a).domain(e.breakpoints),n=e.transparencies,s=n?4:3,o=new Uint8ClampedArray(e.numFeatures*s),c=N.state.isDarkMode?[48,48,48]:[212,212,212];for(let f=0;f<e.numFeatures;f++){let p=e.metric[f];const l=Number.isNaN(p)?c:t(p),g=f*s;o[g+0]=l[0],o[g+1]=l[1],o[g+2]=l[2],n&&(o[g+3]=n[f])}const d=[],b=t.domain(),u=t.range();let m=e.max>=1e3?0:3,r=e.min;for(let f=0;f<b.length;f++){let p=b[f];const l=O({value:r,precision:m}),g=O({value:p,precision:m});d.push({label:`${l} — ${g}`,value:u[f]}),r=p}return d.push({label:`${O({value:r,precision:m})} — ${O({value:e.max,precision:m})}`,value:u[b.length]}),{rgbArray:o,legend:d,isRGBA:!!e.transparencies}}function z(e,a){if(!a.normalColumn)return e;const t=new Float32Array(a.numFeatures);let n=-1/0;const s=new Float32Array(a.numFeatures);a.normalColumn.values.forEach((d,b)=>{const u=a.normalLookup?a.normalLookup.values[b]:b;s[u]=d});for(let d=0;d<a.numFeatures;d++)t[d]=e[d]/s[d],n=Math.max(t[d],n);const o=t.reduce((d,b)=>Number.isFinite(b)?Math.min(d,b):d,1/0);if(!(a.options.colorRamp?.style===1)&&o<0)throw Error(`Column "${a.data.name}" has negative values: use a diverging color scale`);return t}function S(e){return e.map(t=>{const n=E(t);return[n.r,n.g,n.b]})}function O({value:e,precision:a}){let t=a??3;if(t==0&&(t=-1),typeof e!="number")return e;let n=""+e;if(n.includes(".")&&n.indexOf(".")===n.lastIndexOf(".")&&/\d$/.test(n)){const s=n.substring(0,1+t+n.lastIndexOf("."));try{if(parseInt(s.substring(1+s.indexOf(".")))===0)return s.substring(0,s.indexOf("."))}catch{}return s}return e}const at={getHeightsBasedOnNumericValues:Ea,getColorsForDataColumn:xa,getWidthsForDataColumn:Da,getRadiusForDataColumn:Sa};export{at as C,Ra as S,ya as a,et as b,pa as c,ga as d,ha as e,ma as f,Na as g,T as h,va as i,ba as j,ua as k,ia as l,Fa as m,Ba as n,wa as o,Aa as p,S as q,te as r,ca as s};
