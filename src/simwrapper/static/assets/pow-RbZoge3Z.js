import{k}from"./threshold-CrWFx_nu.js";import{a as L,b as $,i as B,t as C,c as I,p as D,d as G,e as H,g as J,f as P,h as b,j as K}from"./precisionRound-CRsIqO1V.js";import{k as O}from"./cubehelix-BzW-tINw.js";function Q(n){return function(){return n}}function T(n){return+n}var q=[0,1];function g(n){return n}function d(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:Q(isNaN(t)?NaN:.5)}function U(n,t){var e;return n>t&&(e=n,n=t,t=e),function(r){return Math.max(n,Math.min(t,r))}}function V(n,t,e){var r=n[0],o=n[1],a=t[0],i=t[1];return o<r?(r=d(o,r),a=e(i,a)):(r=d(r,o),a=e(a,i)),function(l){return a(r(l))}}function W(n,t,e){var r=Math.min(n.length,t.length)-1,o=new Array(r),a=new Array(r),i=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++i<r;)o[i]=d(n[i],n[i+1]),a[i]=e(t[i],t[i+1]);return function(l){var s=O(n,l,1,r)-1;return a[s](o[s](l))}}function w(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function N(){var n=q,t=q,e=$,r,o,a,i=g,l,s,c;function f(){var u=Math.min(n.length,t.length);return i!==g&&(i=U(n[0],n[u-1])),l=u>2?W:V,s=c=null,h}function h(u){return u==null||isNaN(u=+u)?a:(s||(s=l(n.map(r),t,e)))(r(i(u)))}return h.invert=function(u){return i(o((c||(c=l(t,n.map(r),L)))(u)))},h.domain=function(u){return arguments.length?(n=Array.from(u,T),f()):n.slice()},h.range=function(u){return arguments.length?(t=Array.from(u),f()):t.slice()},h.rangeRound=function(u){return t=Array.from(u),e=B,f()},h.clamp=function(u){return arguments.length?(i=u?!0:g,f()):i!==g},h.interpolate=function(u){return arguments.length?(e=u,f()):e},h.unknown=function(u){return arguments.length?(a=u,h):a},function(u,m){return r=u,o=m,f()}}function X(){return N()(g,g)}function Y(n,t,e,r){var o=C(n,t,e),a;switch(r=I(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(n),Math.abs(t));return r.precision==null&&!isNaN(a=H(o,i))&&(r.precision=a),J(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=G(o,Math.max(Math.abs(n),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=D(o))&&(r.precision=a-(r.type==="%")*2);break}}return P(r)}function S(n){var t=n.domain;return n.ticks=function(e){var r=t();return b(r[0],r[r.length-1],e??10)},n.tickFormat=function(e,r){var o=t();return Y(o[0],o[o.length-1],e??10,r)},n.nice=function(e){e==null&&(e=10);var r=t(),o=0,a=r.length-1,i=r[o],l=r[a],s,c,f=10;for(l<i&&(c=i,i=l,l=c,c=o,o=a,a=c);f-- >0;){if(c=K(i,l,e),c===s)return r[o]=i,r[a]=l,t(r);if(c>0)i=Math.floor(i/c)*c,l=Math.ceil(l/c)*c;else if(c<0)i=Math.ceil(i*c)/c,l=Math.floor(l*c)/c;else break;s=c}return n},n}function Z(){var n=X();return n.copy=function(){return w(n,Z())},k.apply(n,arguments),S(n)}function _(n,t){n=n.slice();var e=0,r=n.length-1,o=n[e],a=n[r],i;return a<o&&(i=e,e=r,r=i,i=o,o=a,a=i),n[e]=t.floor(o),n[r]=t.ceil(a),n}function x(n){return Math.log(n)}function A(n){return Math.exp(n)}function nn(n){return-Math.log(-n)}function tn(n){return-Math.exp(-n)}function rn(n){return isFinite(n)?+("1e"+n):n<0?0:n}function en(n){return n===10?rn:n===Math.E?Math.exp:t=>Math.pow(n,t)}function an(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),t=>Math.log(t)/n)}function F(n){return(t,e)=>-n(-t,e)}function un(n){const t=n(x,A),e=t.domain;let r=10,o,a;function i(){return o=an(r),a=en(r),e()[0]<0?(o=F(o),a=F(a),n(nn,tn)):n(x,A),t}return t.base=function(l){return arguments.length?(r=+l,i()):r},t.domain=function(l){return arguments.length?(e(l),i()):e()},t.ticks=l=>{const s=e();let c=s[0],f=s[s.length-1];const h=f<c;h&&([c,f]=[f,c]);let u=o(c),m=o(f),p,M;const y=l==null?10:+l;let v=[];if(!(r%1)&&m-u<y){if(u=Math.floor(u),m=Math.ceil(m),c>0){for(;u<=m;++u)for(p=1;p<r;++p)if(M=u<0?p/a(-u):p*a(u),!(M<c)){if(M>f)break;v.push(M)}}else for(;u<=m;++u)for(p=r-1;p>=1;--p)if(M=u>0?p/a(-u):p*a(u),!(M<c)){if(M>f)break;v.push(M)}v.length*2<y&&(v=b(c,f,y))}else v=b(u,m,Math.min(m-u,y)).map(a);return h?v.reverse():v},t.tickFormat=(l,s)=>{if(l==null&&(l=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=I(s)).precision==null&&(s.trim=!0),s=P(s)),l===1/0)return s;const c=Math.max(1,r*l/t.ticks().length);return f=>{let h=f/a(Math.round(o(f)));return h*r<r-.5&&(h*=r),h<=c?s(f):""}},t.nice=()=>e(_(e(),{floor:l=>a(Math.floor(o(l))),ceil:l=>a(Math.ceil(o(l)))})),t}function on(){const n=un(N()).domain([1,10]);return n.copy=()=>w(n,on()).base(n.base()),k.apply(n,arguments),n}function R(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function j(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function ln(n){var t=1,e=n(R(t),j(t));return e.constant=function(r){return arguments.length?n(R(t=+r),j(t)):t},S(e)}function cn(){var n=ln(N());return n.copy=function(){return w(n,cn()).constant(n.constant())},k.apply(n,arguments)}function E(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function sn(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function fn(n){return n<0?-n*n:n*n}function hn(n){var t=n(g,g),e=1;function r(){return e===1?n(g,g):e===.5?n(sn,fn):n(E(e),E(1/e))}return t.exponent=function(o){return arguments.length?(e=+o,r()):e},S(t)}function z(){var n=hn(N());return n.copy=function(){return w(n,z()).exponent(n.exponent())},k.apply(n,arguments),n}function Mn(){return z.apply(null,arguments).exponent(.5)}export{on as a,Mn as b,S as c,hn as d,un as e,ln as f,X as g,_ as h,g as i,w as j,Z as l,T as n,z as p,cn as s,Y as t};
