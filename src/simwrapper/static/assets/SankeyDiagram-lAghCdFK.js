import{b as It,h as Ei,d as Lp,g as Ai,n as Dp}from"./index-BX7jQcoh.js";import{Y as Rp}from"./index-DFKcNkqO.js";import{q as ut,k as vn,z as Fp,s as kp,u as zp,t as Bp,i as Ti,b as Mi}from"./cubehelix-BzW-tINw.js";import{j as pn,a as gn,d as Di,k as Up,l as Vp,o as Ri,r as Fi,v as jp,i as qp,b as Hp,c as Kp,m as Wp,w as Yp,f as Zp,h as Xp,x as Jp,q as Qp,y as Gp,e as tg,u as eg,z as ng,g as ki,T as rg,s as ig,t as ag,A as og,B as sg,n as ug}from"./timer-qV2ZeSM_.js";import{e as _e}from"./extent-Ccx1MofX.js";import{m as zi,A as fg,f as cg,a as lg}from"./min-C6O82vcA.js";import{r as Bi,g as Ui,i as hg,f as dg,a as vg,b as pg,c as gg,d as yg,e as _g}from"./group-hI8ly2Wr.js";import{j as be,h as Vi,t as mg,F as wg,f as bg,r as xg,k as Eg,g as Ag,c as Tg,p as Mg,e as Sg,d as Cg,a as Og,q as Ig}from"./precisionRound-CRsIqO1V.js";import{I as ji,a as En}from"./index-_doEQLKC.js";import{r as Pg}from"./range-OtVwhkKS.js";import{P as $g}from"./papaparse.min-ClXMzAJ8.js";import{H as Ng}from"./HTTPFileSystem-D9FfZC5j.js";import{i as Lg}from"./rainbow-DNS2KC2A.js";import"./hcl-DetDTYpa.js";import"./fxp-DjoqftHf.js";function Dg(n,a){if(!((a=+a)>=0))throw new RangeError("invalid r");let o=n.length;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid length");if(!o||!a)return n;const u=An(a),c=n.slice();return u(n,c,0,o,1),u(c,n,0,o,1),u(n,c,0,o,1),n}const Rg=qi(An),Fg=qi(kg);function qi(n){return function(a,o,u=o){if(!((o=+o)>=0))throw new RangeError("invalid rx");if(!((u=+u)>=0))throw new RangeError("invalid ry");let{data:c,width:l,height:d}=a;if(!((l=Math.floor(l))>=0))throw new RangeError("invalid width");if(!((d=Math.floor(d!==void 0?d:c.length/l))>=0))throw new RangeError("invalid height");if(!l||!d||!o&&!u)return a;const g=o&&n(o),w=u&&n(u),b=c.slice();return g&&w?(zt(g,b,c,l,d),zt(g,c,b,l,d),zt(g,b,c,l,d),Bt(w,c,b,l,d),Bt(w,b,c,l,d),Bt(w,c,b,l,d)):g?(zt(g,c,b,l,d),zt(g,b,c,l,d),zt(g,c,b,l,d)):w&&(Bt(w,c,b,l,d),Bt(w,b,c,l,d),Bt(w,c,b,l,d)),a}}function zt(n,a,o,u,c){for(let l=0,d=u*c;l<d;)n(a,o,l,l+=u,1)}function Bt(n,a,o,u,c){for(let l=0,d=u*c;l<u;++l)n(a,o,l,l+d,u)}function kg(n){const a=An(n);return(o,u,c,l,d)=>{c<<=2,l<<=2,d<<=2,a(o,u,c+0,l+0,d),a(o,u,c+1,l+1,d),a(o,u,c+2,l+2,d),a(o,u,c+3,l+3,d)}}function An(n){const a=Math.floor(n);if(a===n)return zg(n);const o=n-a,u=2*n+1;return(c,l,d,g,w)=>{if(!((g-=w)>=d))return;let b=a*l[d];const T=w*a,N=T+w;for(let O=d,R=d+T;O<R;O+=w)b+=l[Math.min(g,O)];for(let O=d,R=g;O<=R;O+=w)b+=l[Math.min(g,O+T)],c[O]=(b+o*(l[Math.max(d,O-N)]+l[Math.min(g,O+N)]))/u,b-=l[Math.max(d,O-T)]}}function zg(n){const a=2*n+1;return(o,u,c,l,d)=>{if(!((l-=d)>=c))return;let g=n*u[c];const w=d*n;for(let b=c,T=c+w;b<T;b+=d)g+=u[Math.min(l,b)];for(let b=c,T=l;b<=T;b+=d)g+=u[Math.min(l,b+w)],o[b]=g/a,g-=u[Math.max(c,b-w)]}}function Te(n,a){let o=0;if(a===void 0)for(let u of n)u!=null&&(u=+u)>=u&&++o;else{let u=-1;for(let c of n)(c=a(c,++u,n))!=null&&(c=+c)>=c&&++o}return o}function Bg(n){return n.length|0}function Ug(n){return!(n>0)}function Vg(n){return typeof n!="object"||"length"in n?n:Array.from(n)}function jg(n){return a=>n(...a)}function qg(...n){const a=typeof n[n.length-1]=="function"&&jg(n.pop());n=n.map(Vg);const o=n.map(Bg),u=n.length-1,c=new Array(u+1).fill(0),l=[];if(u<0||o.some(Ug))return l;for(;;){l.push(c.map((g,w)=>n[w][g]));let d=u;for(;++c[d]===o[d];){if(d===0)return a?l.map(a):l;c[d--]=0}}}function Hg(n,a){var o=0,u=0;return Float64Array.from(n,a===void 0?c=>o+=+c||0:c=>o+=+a(c,u++,n)||0)}function Kg(n,a,o){return(a.length!==2?pn(Bi(n,a,o),(([u,c],[l,d])=>ut(c,d)||ut(u,l))):pn(Ui(n,o),(([u,c],[l,d])=>a(c,d)||ut(u,l)))).map(([u])=>u)}var Wg=Array.prototype,Yg=Wg.slice;function dn(n){return()=>n}function Hi(n,a,o){let u;for(;;){const c=be(n,a,o);if(c===u||c===0||!isFinite(c))return[n,a];c>0?(n=Math.floor(n/c)*c,a=Math.ceil(a/c)*c):c<0&&(n=Math.ceil(n*c)/c,a=Math.floor(a*c)/c),u=c}}function Ki(n){return Math.max(1,Math.ceil(Math.log(Te(n))/Math.LN2)+1)}function Si(){var n=hg,a=_e,o=Ki;function u(c){Array.isArray(c)||(c=Array.from(c));var l,d=c.length,g,w,b=new Array(d);for(l=0;l<d;++l)b[l]=n(c[l],l,c);var T=a(b),N=T[0],O=T[1],R=o(b,N,O);if(!Array.isArray(R)){const nt=O,ft=+R;if(a===_e&&([N,O]=Hi(N,O,ft)),R=Vi(N,O,ft),R[0]<=N&&(w=be(N,O,ft)),R[R.length-1]>=O)if(nt>=O&&a===_e){const it=be(N,O,ft);isFinite(it)&&(it>0?O=(Math.floor(O/it)+1)*it:it<0&&(O=(Math.ceil(O*-it)+1)/-it))}else R.pop()}for(var q=R.length,Y=0,J=q;R[Y]<=N;)++Y;for(;R[J-1]>O;)--J;(Y||J<q)&&(R=R.slice(Y,J),q=J-Y);var rt=new Array(q+1),Q;for(l=0;l<=q;++l)Q=rt[l]=[],Q.x0=l>0?R[l-1]:N,Q.x1=l<q?R[l]:O;if(isFinite(w)){if(w>0)for(l=0;l<d;++l)(g=b[l])!=null&&N<=g&&g<=O&&rt[Math.min(q,Math.floor((g-N)/w))].push(c[l]);else if(w<0){for(l=0;l<d;++l)if((g=b[l])!=null&&N<=g&&g<=O){const nt=Math.floor((N-g)*w);rt[Math.min(q,nt+(R[nt]<=g))].push(c[l])}}}else for(l=0;l<d;++l)(g=b[l])!=null&&N<=g&&g<=O&&rt[vn(R,g,0,q)].push(c[l]);return rt}return u.value=function(c){return arguments.length?(n=typeof c=="function"?c:dn(c),u):n},u.domain=function(c){return arguments.length?(a=typeof c=="function"?c:dn([c[0],c[1]]),u):a},u.thresholds=function(c){return arguments.length?(o=typeof c=="function"?c:dn(Array.isArray(c)?Yg.call(c):c),u):o},u}function Zg(n,a,o){const u=Te(n),c=gn(n,.75)-gn(n,.25);return u&&c?Math.ceil((o-a)/(2*c*Math.pow(u,-1/3))):1}function Xg(n,a,o){const u=Te(n),c=Di(n);return u&&c?Math.ceil((o-a)*Math.cbrt(u)/(3.49*c)):1}function Jg(n,a){const o=new ji;if(a===void 0)for(let l of n)l!=null&&l>=l&&o.set(l,(o.get(l)||0)+1);else{let l=-1;for(let d of n)(d=a(d,++l,n))!=null&&d>=d&&o.set(d,(o.get(d)||0)+1)}let u,c=0;for(const[l,d]of o)d>c&&(c=d,u=l);return u}function Qg(n,a=Gg){const o=[];let u,c=!1;for(const l of n)c&&o.push(a(u,l)),u=l,c=!0;return o}function Gg(n,a){return[n,a]}function ty(n,a=ut){if(typeof n[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let o=Array.from(n);const u=new Float64Array(o.length);a.length!==2&&(o=o.map(a),a=ut);const c=(g,w)=>a(o[g],o[w]);let l,d;return n=Uint32Array.from(o,(g,w)=>w),n.sort(a===ut?(g,w)=>Up(o[g],o[w]):Vp(c)),n.forEach((g,w)=>{const b=c(g,l===void 0?g:l);b>=0?((l===void 0||b>0)&&(l=g,d=w),u[g]=d):u[g]=NaN}),u}function ey(n,a=ut){let o,u=!1;if(a.length===1){let c;for(const l of n){const d=a(l);(u?ut(d,c)<0:ut(d,d)===0)&&(o=l,c=d,u=!0)}}else for(const c of n)(u?a(c,o)<0:a(c,c)===0)&&(o=c,u=!0);return o}function Wi(n,a=ut){if(a.length===1)return Ri(n,a);let o,u=-1,c=-1;for(const l of n)++c,(u<0?a(l,l)===0:a(l,o)<0)&&(o=l,u=c);return u}function ny(n,a=ut){if(a.length===1)return Fi(n,a);let o,u=-1,c=-1;for(const l of n)++c,(u<0?a(l,l)===0:a(l,o)>0)&&(o=l,u=c);return u}function ry(n,a){const o=Wi(n,a);return o<0?void 0:o}const iy=Yi(Math.random);function Yi(n){return function(o,u=0,c=o.length){let l=c-(u=+u);for(;l;){const d=n()*l--|0,g=o[l+u];o[l+u]=o[d+u],o[d+u]=g}return o}}function Zi(n){if(!(l=n.length))return[];for(var a=-1,o=zi(n,ay),u=new Array(o);++a<o;)for(var c=-1,l,d=u[a]=new Array(l);++c<l;)d[c]=n[c][a];return u}function ay(n){return n.length}function oy(){return Zi(arguments)}function sy(n,a){if(typeof a!="function")throw new TypeError("test is not a function");let o=-1;for(const u of n)if(!a(u,++o,n))return!1;return!0}function uy(n,a){if(typeof a!="function")throw new TypeError("test is not a function");let o=-1;for(const u of n)if(a(u,++o,n))return!0;return!1}function fy(n,a){if(typeof a!="function")throw new TypeError("test is not a function");const o=[];let u=-1;for(const c of n)a(c,++u,n)&&o.push(c);return o}function cy(n,a){if(typeof n[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof a!="function")throw new TypeError("mapper is not a function");return Array.from(n,(o,u)=>a(o,u,n))}function ly(n,a,o){if(typeof a!="function")throw new TypeError("reducer is not a function");const u=n[Symbol.iterator]();let c,l,d=-1;if(arguments.length<3){if({done:c,value:o}=u.next(),c)return;++d}for(;{done:c,value:l}=u.next(),!c;)o=a(o,l,++d,n);return o}function hy(n){if(typeof n[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(n).reverse()}function dy(n,...a){n=new En(n);for(const o of a)for(const u of o)n.delete(u);return n}function vy(n,a){const o=a[Symbol.iterator](),u=new En;for(const c of n){if(u.has(c))return!1;let l,d;for(;({value:l,done:d}=o.next())&&!d;){if(Object.is(c,l))return!1;u.add(l)}}return!0}function Xi(n,a){const o=n[Symbol.iterator](),u=new Set;for(const c of a){const l=Ci(c);if(u.has(l))continue;let d,g;for(;{value:d,done:g}=o.next();){if(g)return!1;const w=Ci(d);if(u.add(w),Object.is(l,w))break}}return!0}function Ci(n){return n!==null&&typeof n=="object"?n.valueOf():n}function py(n,a){return Xi(a,n)}const gy=Object.freeze(Object.defineProperty({__proto__:null,Adder:fg,InternMap:ji,InternSet:En,ascending:ut,bin:Si,bisect:vn,bisectCenter:Fp,bisectLeft:kp,bisectRight:vn,bisector:zp,blur:Dg,blur2:Rg,blurImage:Fg,count:Te,cross:qg,cumsum:Hg,descending:Bp,deviation:Di,difference:dy,disjoint:vy,every:sy,extent:_e,fcumsum:cg,filter:fy,flatGroup:dg,flatRollup:vg,fsum:lg,greatest:jp,greatestIndex:ny,group:Ui,groupSort:Kg,groups:pg,histogram:Si,index:gg,indexes:yg,intersection:qp,least:ey,leastIndex:Wi,map:cy,max:Hp,maxIndex:Fi,mean:Kp,median:Wp,medianIndex:Yp,merge:Zp,min:zi,minIndex:Ri,mode:Jg,nice:Hi,pairs:Qg,permute:Xp,quantile:gn,quantileIndex:Jp,quantileSorted:Qp,quickselect:Gp,range:Pg,rank:ty,reduce:ly,reverse:hy,rollup:Bi,rollups:_g,scan:ry,shuffle:iy,shuffler:Yi,some:uy,sort:pn,subset:py,sum:tg,superset:Xi,thresholdFreedmanDiaconis:Zg,thresholdScott:Xg,thresholdSturges:Ki,tickIncrement:be,tickStep:mg,ticks:Vi,transpose:Zi,union:eg,variance:ng,zip:oy},Symbol.toStringTag,{value:"Module"})),yy=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier:wg,get format(){return bg},formatDefaultLocale:xg,formatLocale:Eg,get formatPrefix(){return Ag},formatSpecifier:Tg,precisionFixed:Mg,precisionPrefix:Sg,precisionRound:Cg},Symbol.toStringTag,{value:"Module"})),_y=Object.freeze(Object.defineProperty({__proto__:null,dispatch:ki},Symbol.toStringTag,{value:"Module"}));function Oi(n,a,o){var u=new rg;return a=a==null?0:+a,u.restart(c=>{u.stop(),n(c+a)},a,o),u}var Kt={exports:{}};const my=It(gy);var st="$";function xe(){}xe.prototype=Wt.prototype={constructor:xe,has:function(n){return st+n in this},get:function(n){return this[st+n]},set:function(n,a){return this[st+n]=a,this},remove:function(n){var a=st+n;return a in this&&delete this[a]},clear:function(){for(var n in this)n[0]===st&&delete this[n]},keys:function(){var n=[];for(var a in this)a[0]===st&&n.push(a.slice(1));return n},values:function(){var n=[];for(var a in this)a[0]===st&&n.push(this[a]);return n},entries:function(){var n=[];for(var a in this)a[0]===st&&n.push({key:a.slice(1),value:this[a]});return n},size:function(){var n=0;for(var a in this)a[0]===st&&++n;return n},empty:function(){for(var n in this)if(n[0]===st)return!1;return!0},each:function(n){for(var a in this)a[0]===st&&n(this[a],a.slice(1),this)}};function Wt(n,a){var o=new xe;if(n instanceof xe)n.each(function(g,w){o.set(w,g)});else if(Array.isArray(n)){var u=-1,c=n.length,l;if(a==null)for(;++u<c;)o.set(u,n[u]);else for(;++u<c;)o.set(a(l=n[u],u,n),l)}else if(n)for(var d in n)o.set(d,n[d]);return o}function wy(){var n=[],a=[],o,u,c;function l(g,w,b,T){if(w>=n.length)return o!=null&&g.sort(o),u!=null?u(g):g;for(var N=-1,O=g.length,R=n[w++],q,Y,J=Wt(),rt,Q=b();++N<O;)(rt=J.get(q=R(Y=g[N])+""))?rt.push(Y):J.set(q,[Y]);return J.each(function(nt,ft){T(Q,ft,l(nt,w,b,T))}),Q}function d(g,w){if(++w>n.length)return g;var b,T=a[w-1];return u!=null&&w>=n.length?b=g.entries():(b=[],g.each(function(N,O){b.push({key:O,values:d(N,w)})})),T!=null?b.sort(function(N,O){return T(N.key,O.key)}):b}return c={object:function(g){return l(g,0,by,xy)},map:function(g){return l(g,0,Ii,Pi)},entries:function(g){return d(l(g,0,Ii,Pi),0)},key:function(g){return n.push(g),c},sortKeys:function(g){return a[n.length-1]=g,c},sortValues:function(g){return o=g,c},rollup:function(g){return u=g,c}}}function by(){return{}}function xy(n,a,o){n[a]=o}function Ii(){return Wt()}function Pi(n,a,o){n.set(a,o)}function Ee(){}var Ct=Wt.prototype;Ee.prototype=Ji.prototype={constructor:Ee,has:Ct.has,add:function(n){return n+="",this[st+n]=n,this},remove:Ct.remove,clear:Ct.clear,values:Ct.keys,size:Ct.size,empty:Ct.empty,each:Ct.each};function Ji(n,a){var o=new Ee;if(n instanceof Ee)n.each(function(l){o.add(l)});else if(n){var u=-1,c=n.length;if(a==null)for(;++u<c;)o.add(n[u]);else for(;++u<c;)o.add(a(n[u],u,n))}return o}function Ey(n){var a=[];for(var o in n)a.push(o);return a}function Ay(n){var a=[];for(var o in n)a.push(n[o]);return a}function Ty(n){var a=[];for(var o in n)a.push({key:o,value:n[o]});return a}const My=Object.freeze(Object.defineProperty({__proto__:null,entries:Ty,keys:Ey,map:Wt,nest:wy,set:Ji,values:Ay},Symbol.toStringTag,{value:"Module"})),Sy=It(My),Cy=It(ig);var yn="http://www.w3.org/1999/xhtml";const _n={svg:"http://www.w3.org/2000/svg",xhtml:yn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yt(n){var a=n+="",o=a.indexOf(":");return o>=0&&(a=n.slice(0,o))!=="xmlns"&&(n=n.slice(o+1)),_n.hasOwnProperty(a)?{space:_n[a],local:n}:n}function Oy(n){return function(){var a=this.ownerDocument,o=this.namespaceURI;return o===yn&&a.documentElement.namespaceURI===yn?a.createElement(n):a.createElementNS(o,n)}}function Iy(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Me(n){var a=Yt(n);return(a.local?Iy:Oy)(a)}function Py(){}function Se(n){return n==null?Py:function(){return this.querySelector(n)}}function $y(n){typeof n!="function"&&(n=Se(n));for(var a=this._groups,o=a.length,u=new Array(o),c=0;c<o;++c)for(var l=a[c],d=l.length,g=u[c]=new Array(d),w,b,T=0;T<d;++T)(w=l[T])&&(b=n.call(w,w.__data__,T,l))&&("__data__"in w&&(b.__data__=w.__data__),g[T]=b);return new tt(u,this._parents)}function Qi(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Ny(){return[]}function Tn(n){return n==null?Ny:function(){return this.querySelectorAll(n)}}function Ly(n){return function(){return Qi(n.apply(this,arguments))}}function Dy(n){typeof n=="function"?n=Ly(n):n=Tn(n);for(var a=this._groups,o=a.length,u=[],c=[],l=0;l<o;++l)for(var d=a[l],g=d.length,w,b=0;b<g;++b)(w=d[b])&&(u.push(n.call(w,w.__data__,b,d)),c.push(w));return new tt(u,c)}function Mn(n){return function(){return this.matches(n)}}function Gi(n){return function(a){return a.matches(n)}}var Ry=Array.prototype.find;function Fy(n){return function(){return Ry.call(this.children,n)}}function ky(){return this.firstElementChild}function zy(n){return this.select(n==null?ky:Fy(typeof n=="function"?n:Gi(n)))}var By=Array.prototype.filter;function Uy(){return Array.from(this.children)}function Vy(n){return function(){return By.call(this.children,n)}}function jy(n){return this.selectAll(n==null?Uy:Vy(typeof n=="function"?n:Gi(n)))}function qy(n){typeof n!="function"&&(n=Mn(n));for(var a=this._groups,o=a.length,u=new Array(o),c=0;c<o;++c)for(var l=a[c],d=l.length,g=u[c]=[],w,b=0;b<d;++b)(w=l[b])&&n.call(w,w.__data__,b,l)&&g.push(w);return new tt(u,this._parents)}function ta(n){return new Array(n.length)}function Hy(){return new tt(this._enter||this._groups.map(ta),this._parents)}function Ae(n,a){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=a}Ae.prototype={constructor:Ae,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,a){return this._parent.insertBefore(n,a)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Ky(n){return function(){return n}}function Wy(n,a,o,u,c,l){for(var d=0,g,w=a.length,b=l.length;d<b;++d)(g=a[d])?(g.__data__=l[d],u[d]=g):o[d]=new Ae(n,l[d]);for(;d<w;++d)(g=a[d])&&(c[d]=g)}function Yy(n,a,o,u,c,l,d){var g,w,b=new Map,T=a.length,N=l.length,O=new Array(T),R;for(g=0;g<T;++g)(w=a[g])&&(O[g]=R=d.call(w,w.__data__,g,a)+"",b.has(R)?c[g]=w:b.set(R,w));for(g=0;g<N;++g)R=d.call(n,l[g],g,l)+"",(w=b.get(R))?(u[g]=w,w.__data__=l[g],b.delete(R)):o[g]=new Ae(n,l[g]);for(g=0;g<T;++g)(w=a[g])&&b.get(O[g])===w&&(c[g]=w)}function Zy(n){return n.__data__}function Xy(n,a){if(!arguments.length)return Array.from(this,Zy);var o=a?Yy:Wy,u=this._parents,c=this._groups;typeof n!="function"&&(n=Ky(n));for(var l=c.length,d=new Array(l),g=new Array(l),w=new Array(l),b=0;b<l;++b){var T=u[b],N=c[b],O=N.length,R=Jy(n.call(T,T&&T.__data__,b,u)),q=R.length,Y=g[b]=new Array(q),J=d[b]=new Array(q),rt=w[b]=new Array(O);o(T,N,Y,J,rt,R,a);for(var Q=0,nt=0,ft,it;Q<q;++Q)if(ft=Y[Q]){for(Q>=nt&&(nt=Q+1);!(it=J[nt])&&++nt<q;);ft._next=it||null}}return d=new tt(d,u),d._enter=g,d._exit=w,d}function Jy(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Qy(){return new tt(this._exit||this._groups.map(ta),this._parents)}function Gy(n,a,o){var u=this.enter(),c=this,l=this.exit();return typeof n=="function"?(u=n(u),u&&(u=u.selection())):u=u.append(n+""),a!=null&&(c=a(c),c&&(c=c.selection())),o==null?l.remove():o(l),u&&c?u.merge(c).order():c}function t_(n){for(var a=n.selection?n.selection():n,o=this._groups,u=a._groups,c=o.length,l=u.length,d=Math.min(c,l),g=new Array(c),w=0;w<d;++w)for(var b=o[w],T=u[w],N=b.length,O=g[w]=new Array(N),R,q=0;q<N;++q)(R=b[q]||T[q])&&(O[q]=R);for(;w<c;++w)g[w]=o[w];return new tt(g,this._parents)}function e_(){for(var n=this._groups,a=-1,o=n.length;++a<o;)for(var u=n[a],c=u.length-1,l=u[c],d;--c>=0;)(d=u[c])&&(l&&d.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(d,l),l=d);return this}function n_(n){n||(n=r_);function a(N,O){return N&&O?n(N.__data__,O.__data__):!N-!O}for(var o=this._groups,u=o.length,c=new Array(u),l=0;l<u;++l){for(var d=o[l],g=d.length,w=c[l]=new Array(g),b,T=0;T<g;++T)(b=d[T])&&(w[T]=b);w.sort(a)}return new tt(c,this._parents).order()}function r_(n,a){return n<a?-1:n>a?1:n>=a?0:NaN}function i_(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function a_(){return Array.from(this)}function o_(){for(var n=this._groups,a=0,o=n.length;a<o;++a)for(var u=n[a],c=0,l=u.length;c<l;++c){var d=u[c];if(d)return d}return null}function s_(){let n=0;for(const a of this)++n;return n}function u_(){return!this.node()}function f_(n){for(var a=this._groups,o=0,u=a.length;o<u;++o)for(var c=a[o],l=0,d=c.length,g;l<d;++l)(g=c[l])&&n.call(g,g.__data__,l,c);return this}function c_(n){return function(){this.removeAttribute(n)}}function l_(n){return function(){this.removeAttributeNS(n.space,n.local)}}function h_(n,a){return function(){this.setAttribute(n,a)}}function d_(n,a){return function(){this.setAttributeNS(n.space,n.local,a)}}function v_(n,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttribute(n):this.setAttribute(n,o)}}function p_(n,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,o)}}function g_(n,a){var o=Yt(n);if(arguments.length<2){var u=this.node();return o.local?u.getAttributeNS(o.space,o.local):u.getAttribute(o)}return this.each((a==null?o.local?l_:c_:typeof a=="function"?o.local?p_:v_:o.local?d_:h_)(o,a))}function Sn(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function y_(n){return function(){this.style.removeProperty(n)}}function __(n,a,o){return function(){this.style.setProperty(n,a,o)}}function m_(n,a,o){return function(){var u=a.apply(this,arguments);u==null?this.style.removeProperty(n):this.style.setProperty(n,u,o)}}function w_(n,a,o){return arguments.length>1?this.each((a==null?y_:typeof a=="function"?m_:__)(n,a,o??"")):Ot(this.node(),n)}function Ot(n,a){return n.style.getPropertyValue(a)||Sn(n).getComputedStyle(n,null).getPropertyValue(a)}function b_(n){return function(){delete this[n]}}function x_(n,a){return function(){this[n]=a}}function E_(n,a){return function(){var o=a.apply(this,arguments);o==null?delete this[n]:this[n]=o}}function A_(n,a){return arguments.length>1?this.each((a==null?b_:typeof a=="function"?E_:x_)(n,a)):this.node()[n]}function ea(n){return n.trim().split(/^|\s+/)}function Cn(n){return n.classList||new na(n)}function na(n){this._node=n,this._names=ea(n.getAttribute("class")||"")}na.prototype={add:function(n){var a=this._names.indexOf(n);a<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var a=this._names.indexOf(n);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function ra(n,a){for(var o=Cn(n),u=-1,c=a.length;++u<c;)o.add(a[u])}function ia(n,a){for(var o=Cn(n),u=-1,c=a.length;++u<c;)o.remove(a[u])}function T_(n){return function(){ra(this,n)}}function M_(n){return function(){ia(this,n)}}function S_(n,a){return function(){(a.apply(this,arguments)?ra:ia)(this,n)}}function C_(n,a){var o=ea(n+"");if(arguments.length<2){for(var u=Cn(this.node()),c=-1,l=o.length;++c<l;)if(!u.contains(o[c]))return!1;return!0}return this.each((typeof a=="function"?S_:a?T_:M_)(o,a))}function O_(){this.textContent=""}function I_(n){return function(){this.textContent=n}}function P_(n){return function(){var a=n.apply(this,arguments);this.textContent=a??""}}function $_(n){return arguments.length?this.each(n==null?O_:(typeof n=="function"?P_:I_)(n)):this.node().textContent}function N_(){this.innerHTML=""}function L_(n){return function(){this.innerHTML=n}}function D_(n){return function(){var a=n.apply(this,arguments);this.innerHTML=a??""}}function R_(n){return arguments.length?this.each(n==null?N_:(typeof n=="function"?D_:L_)(n)):this.node().innerHTML}function F_(){this.nextSibling&&this.parentNode.appendChild(this)}function k_(){return this.each(F_)}function z_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function B_(){return this.each(z_)}function U_(n){var a=typeof n=="function"?n:Me(n);return this.select(function(){return this.appendChild(a.apply(this,arguments))})}function V_(){return null}function j_(n,a){var o=typeof n=="function"?n:Me(n),u=a==null?V_:typeof a=="function"?a:Se(a);return this.select(function(){return this.insertBefore(o.apply(this,arguments),u.apply(this,arguments)||null)})}function q_(){var n=this.parentNode;n&&n.removeChild(this)}function H_(){return this.each(q_)}function K_(){var n=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function W_(){var n=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(n,this.nextSibling):n}function Y_(n){return this.select(n?W_:K_)}function Z_(n){return arguments.length?this.property("__data__",n):this.node().__data__}function X_(n){return function(a){n.call(this,a,this.__data__)}}function J_(n){return n.trim().split(/^|\s+/).map(function(a){var o="",u=a.indexOf(".");return u>=0&&(o=a.slice(u+1),a=a.slice(0,u)),{type:a,name:o}})}function Q_(n){return function(){var a=this.__on;if(a){for(var o=0,u=-1,c=a.length,l;o<c;++o)l=a[o],(!n.type||l.type===n.type)&&l.name===n.name?this.removeEventListener(l.type,l.listener,l.options):a[++u]=l;++u?a.length=u:delete this.__on}}}function G_(n,a,o){return function(){var u=this.__on,c,l=X_(a);if(u){for(var d=0,g=u.length;d<g;++d)if((c=u[d]).type===n.type&&c.name===n.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=l,c.options=o),c.value=a;return}}this.addEventListener(n.type,l,o),c={type:n.type,name:n.name,value:a,listener:l,options:o},u?u.push(c):this.__on=[c]}}function tm(n,a,o){var u=J_(n+""),c,l=u.length,d;if(arguments.length<2){var g=this.node().__on;if(g){for(var w=0,b=g.length,T;w<b;++w)for(c=0,T=g[w];c<l;++c)if((d=u[c]).type===T.type&&d.name===T.name)return T.value}return}for(g=a?G_:Q_,c=0;c<l;++c)this.each(g(u[c],a,o));return this}function aa(n,a,o){var u=Sn(n),c=u.CustomEvent;typeof c=="function"?c=new c(a,o):(c=u.document.createEvent("Event"),o?(c.initEvent(a,o.bubbles,o.cancelable),c.detail=o.detail):c.initEvent(a,!1,!1)),n.dispatchEvent(c)}function em(n,a){return function(){return aa(this,n,a)}}function nm(n,a){return function(){return aa(this,n,a.apply(this,arguments))}}function rm(n,a){return this.each((typeof a=="function"?nm:em)(n,a))}function*im(){for(var n=this._groups,a=0,o=n.length;a<o;++a)for(var u=n[a],c=0,l=u.length,d;c<l;++c)(d=u[c])&&(yield d)}var On=[null];function tt(n,a){this._groups=n,this._parents=a}function Pt(){return new tt([[document.documentElement]],On)}function am(){return this}tt.prototype=Pt.prototype={constructor:tt,select:$y,selectAll:Dy,selectChild:zy,selectChildren:jy,filter:qy,data:Xy,enter:Hy,exit:Qy,join:Gy,merge:t_,selection:am,order:e_,sort:n_,call:i_,nodes:a_,node:o_,size:s_,empty:u_,each:f_,attr:g_,style:w_,property:A_,classed:C_,text:$_,html:R_,raise:k_,lower:B_,append:U_,insert:j_,remove:H_,clone:Y_,datum:Z_,on:tm,dispatch:rm,[Symbol.iterator]:im};function In(n){return typeof n=="string"?new tt([[document.querySelector(n)]],[document.documentElement]):new tt([[n]],On)}function om(n){return In(Me(n).call(document.documentElement))}var sm=0;function oa(){return new mn}function mn(){this._="@"+(++sm).toString(36)}mn.prototype=oa.prototype={constructor:mn,get:function(n){for(var a=this._;!(a in n);)if(!(n=n.parentNode))return;return n[a]},set:function(n,a){return n[this._]=a},remove:function(n){return this._ in n&&delete n[this._]},toString:function(){return this._}};function sa(n){let a;for(;a=n.sourceEvent;)n=a;return n}function ua(n,a){if(n=sa(n),a===void 0&&(a=n.currentTarget),a){var o=a.ownerSVGElement||a;if(o.createSVGPoint){var u=o.createSVGPoint();return u.x=n.clientX,u.y=n.clientY,u=u.matrixTransform(a.getScreenCTM().inverse()),[u.x,u.y]}if(a.getBoundingClientRect){var c=a.getBoundingClientRect();return[n.clientX-c.left-a.clientLeft,n.clientY-c.top-a.clientTop]}}return[n.pageX,n.pageY]}function um(n,a){return n.target&&(n=sa(n),a===void 0&&(a=n.currentTarget),n=n.touches||[n]),Array.from(n,o=>ua(o,a))}function fm(n){return typeof n=="string"?new tt([document.querySelectorAll(n)],[document.documentElement]):new tt([Qi(n)],On)}const cm=Object.freeze(Object.defineProperty({__proto__:null,create:om,creator:Me,local:oa,matcher:Mn,namespace:Yt,namespaces:_n,pointer:ua,pointers:um,select:In,selectAll:fm,selection:Pt,selector:Se,selectorAll:Tn,style:Ot,window:Sn},Symbol.toStringTag,{value:"Module"})),lm=It(cm);var hm=ki("start","end","cancel","interrupt"),dm=[],fa=0,wn=1,bn=2,me=3,$i=4,xn=5,we=6;function Ce(n,a,o,u,c,l){var d=n.__transition;if(!d)n.__transition={};else if(o in d)return;vm(n,o,{name:a,index:u,group:c,on:hm,tween:dm,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:fa})}function Pn(n,a){var o=ct(n,a);if(o.state>fa)throw new Error("too late; already scheduled");return o}function vt(n,a){var o=ct(n,a);if(o.state>me)throw new Error("too late; already running");return o}function ct(n,a){var o=n.__transition;if(!o||!(o=o[a]))throw new Error("transition not found");return o}function vm(n,a,o){var u=n.__transition,c;u[a]=o,o.timer=ag(l,0,o.time);function l(b){o.state=wn,o.timer.restart(d,o.delay,o.time),o.delay<=b&&d(b-o.delay)}function d(b){var T,N,O,R;if(o.state!==wn)return w();for(T in u)if(R=u[T],R.name===o.name){if(R.state===me)return Oi(d);R.state===$i?(R.state=we,R.timer.stop(),R.on.call("interrupt",n,n.__data__,R.index,R.group),delete u[T]):+T<a&&(R.state=we,R.timer.stop(),R.on.call("cancel",n,n.__data__,R.index,R.group),delete u[T])}if(Oi(function(){o.state===me&&(o.state=$i,o.timer.restart(g,o.delay,o.time),g(b))}),o.state=bn,o.on.call("start",n,n.__data__,o.index,o.group),o.state===bn){for(o.state=me,c=new Array(O=o.tween.length),T=0,N=-1;T<O;++T)(R=o.tween[T].value.call(n,n.__data__,o.index,o.group))&&(c[++N]=R);c.length=N+1}}function g(b){for(var T=b<o.duration?o.ease.call(null,b/o.duration):(o.timer.restart(w),o.state=xn,1),N=-1,O=c.length;++N<O;)c[N].call(n,T);o.state===xn&&(o.on.call("end",n,n.__data__,o.index,o.group),w())}function w(){o.state=we,o.timer.stop(),delete u[a];for(var b in u)return;delete n.__transition}}function ca(n,a){var o=n.__transition,u,c,l=!0,d;if(o){a=a==null?null:a+"";for(d in o){if((u=o[d]).name!==a){l=!1;continue}c=u.state>bn&&u.state<xn,u.state=we,u.timer.stop(),u.on.call(c?"interrupt":"cancel",n,n.__data__,u.index,u.group),delete o[d]}l&&delete n.__transition}}function pm(n){return this.each(function(){ca(this,n)})}function gm(n,a){var o,u;return function(){var c=vt(this,n),l=c.tween;if(l!==o){u=o=l;for(var d=0,g=u.length;d<g;++d)if(u[d].name===a){u=u.slice(),u.splice(d,1);break}}c.tween=u}}function ym(n,a,o){var u,c;if(typeof o!="function")throw new Error;return function(){var l=vt(this,n),d=l.tween;if(d!==u){c=(u=d).slice();for(var g={name:a,value:o},w=0,b=c.length;w<b;++w)if(c[w].name===a){c[w]=g;break}w===b&&c.push(g)}l.tween=c}}function _m(n,a){var o=this._id;if(n+="",arguments.length<2){for(var u=ct(this.node(),o).tween,c=0,l=u.length,d;c<l;++c)if((d=u[c]).name===n)return d.value;return null}return this.each((a==null?gm:ym)(o,n,a))}function $n(n,a,o){var u=n._id;return n.each(function(){var c=vt(this,u);(c.value||(c.value={}))[a]=o.apply(this,arguments)}),function(c){return ct(c,u).value[a]}}function la(n,a){var o;return(typeof a=="number"?Og:a instanceof Mi?Ti:(o=Mi(a))?(a=o,Ti):Ig)(n,a)}function mm(n){return function(){this.removeAttribute(n)}}function wm(n){return function(){this.removeAttributeNS(n.space,n.local)}}function bm(n,a,o){var u,c=o+"",l;return function(){var d=this.getAttribute(n);return d===c?null:d===u?l:l=a(u=d,o)}}function xm(n,a,o){var u,c=o+"",l;return function(){var d=this.getAttributeNS(n.space,n.local);return d===c?null:d===u?l:l=a(u=d,o)}}function Em(n,a,o){var u,c,l;return function(){var d,g=o(this),w;return g==null?void this.removeAttribute(n):(d=this.getAttribute(n),w=g+"",d===w?null:d===u&&w===c?l:(c=w,l=a(u=d,g)))}}function Am(n,a,o){var u,c,l;return function(){var d,g=o(this),w;return g==null?void this.removeAttributeNS(n.space,n.local):(d=this.getAttributeNS(n.space,n.local),w=g+"",d===w?null:d===u&&w===c?l:(c=w,l=a(u=d,g)))}}function Tm(n,a){var o=Yt(n),u=o==="transform"?og:la;return this.attrTween(n,typeof a=="function"?(o.local?Am:Em)(o,u,$n(this,"attr."+n,a)):a==null?(o.local?wm:mm)(o):(o.local?xm:bm)(o,u,a))}function Mm(n,a){return function(o){this.setAttribute(n,a.call(this,o))}}function Sm(n,a){return function(o){this.setAttributeNS(n.space,n.local,a.call(this,o))}}function Cm(n,a){var o,u;function c(){var l=a.apply(this,arguments);return l!==u&&(o=(u=l)&&Sm(n,l)),o}return c._value=a,c}function Om(n,a){var o,u;function c(){var l=a.apply(this,arguments);return l!==u&&(o=(u=l)&&Mm(n,l)),o}return c._value=a,c}function Im(n,a){var o="attr."+n;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(a==null)return this.tween(o,null);if(typeof a!="function")throw new Error;var u=Yt(n);return this.tween(o,(u.local?Cm:Om)(u,a))}function Pm(n,a){return function(){Pn(this,n).delay=+a.apply(this,arguments)}}function $m(n,a){return a=+a,function(){Pn(this,n).delay=a}}function Nm(n){var a=this._id;return arguments.length?this.each((typeof n=="function"?Pm:$m)(a,n)):ct(this.node(),a).delay}function Lm(n,a){return function(){vt(this,n).duration=+a.apply(this,arguments)}}function Dm(n,a){return a=+a,function(){vt(this,n).duration=a}}function Rm(n){var a=this._id;return arguments.length?this.each((typeof n=="function"?Lm:Dm)(a,n)):ct(this.node(),a).duration}function Fm(n,a){if(typeof a!="function")throw new Error;return function(){vt(this,n).ease=a}}function km(n){var a=this._id;return arguments.length?this.each(Fm(a,n)):ct(this.node(),a).ease}function zm(n,a){return function(){var o=a.apply(this,arguments);if(typeof o!="function")throw new Error;vt(this,n).ease=o}}function Bm(n){if(typeof n!="function")throw new Error;return this.each(zm(this._id,n))}function Um(n){typeof n!="function"&&(n=Mn(n));for(var a=this._groups,o=a.length,u=new Array(o),c=0;c<o;++c)for(var l=a[c],d=l.length,g=u[c]=[],w,b=0;b<d;++b)(w=l[b])&&n.call(w,w.__data__,b,l)&&g.push(w);return new dt(u,this._parents,this._name,this._id)}function Vm(n){if(n._id!==this._id)throw new Error;for(var a=this._groups,o=n._groups,u=a.length,c=o.length,l=Math.min(u,c),d=new Array(u),g=0;g<l;++g)for(var w=a[g],b=o[g],T=w.length,N=d[g]=new Array(T),O,R=0;R<T;++R)(O=w[R]||b[R])&&(N[R]=O);for(;g<u;++g)d[g]=a[g];return new dt(d,this._parents,this._name,this._id)}function jm(n){return(n+"").trim().split(/^|\s+/).every(function(a){var o=a.indexOf(".");return o>=0&&(a=a.slice(0,o)),!a||a==="start"})}function qm(n,a,o){var u,c,l=jm(a)?Pn:vt;return function(){var d=l(this,n),g=d.on;g!==u&&(c=(u=g).copy()).on(a,o),d.on=c}}function Hm(n,a){var o=this._id;return arguments.length<2?ct(this.node(),o).on.on(n):this.each(qm(o,n,a))}function Km(n){return function(){var a=this.parentNode;for(var o in this.__transition)if(+o!==n)return;a&&a.removeChild(this)}}function Wm(){return this.on("end.remove",Km(this._id))}function Ym(n){var a=this._name,o=this._id;typeof n!="function"&&(n=Se(n));for(var u=this._groups,c=u.length,l=new Array(c),d=0;d<c;++d)for(var g=u[d],w=g.length,b=l[d]=new Array(w),T,N,O=0;O<w;++O)(T=g[O])&&(N=n.call(T,T.__data__,O,g))&&("__data__"in T&&(N.__data__=T.__data__),b[O]=N,Ce(b[O],a,o,O,b,ct(T,o)));return new dt(l,this._parents,a,o)}function Zm(n){var a=this._name,o=this._id;typeof n!="function"&&(n=Tn(n));for(var u=this._groups,c=u.length,l=[],d=[],g=0;g<c;++g)for(var w=u[g],b=w.length,T,N=0;N<b;++N)if(T=w[N]){for(var O=n.call(T,T.__data__,N,w),R,q=ct(T,o),Y=0,J=O.length;Y<J;++Y)(R=O[Y])&&Ce(R,a,o,Y,O,q);l.push(O),d.push(T)}return new dt(l,d,a,o)}var Xm=Pt.prototype.constructor;function Jm(){return new Xm(this._groups,this._parents)}function Qm(n,a){var o,u,c;return function(){var l=Ot(this,n),d=(this.style.removeProperty(n),Ot(this,n));return l===d?null:l===o&&d===u?c:c=a(o=l,u=d)}}function ha(n){return function(){this.style.removeProperty(n)}}function Gm(n,a,o){var u,c=o+"",l;return function(){var d=Ot(this,n);return d===c?null:d===u?l:l=a(u=d,o)}}function t0(n,a,o){var u,c,l;return function(){var d=Ot(this,n),g=o(this),w=g+"";return g==null&&(w=g=(this.style.removeProperty(n),Ot(this,n))),d===w?null:d===u&&w===c?l:(c=w,l=a(u=d,g))}}function e0(n,a){var o,u,c,l="style."+a,d="end."+l,g;return function(){var w=vt(this,n),b=w.on,T=w.value[l]==null?g||(g=ha(a)):void 0;(b!==o||c!==T)&&(u=(o=b).copy()).on(d,c=T),w.on=u}}function n0(n,a,o){var u=(n+="")=="transform"?sg:la;return a==null?this.styleTween(n,Qm(n,u)).on("end.style."+n,ha(n)):typeof a=="function"?this.styleTween(n,t0(n,u,$n(this,"style."+n,a))).each(e0(this._id,n)):this.styleTween(n,Gm(n,u,a),o).on("end.style."+n,null)}function r0(n,a,o){return function(u){this.style.setProperty(n,a.call(this,u),o)}}function i0(n,a,o){var u,c;function l(){var d=a.apply(this,arguments);return d!==c&&(u=(c=d)&&r0(n,d,o)),u}return l._value=a,l}function a0(n,a,o){var u="style."+(n+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(a==null)return this.tween(u,null);if(typeof a!="function")throw new Error;return this.tween(u,i0(n,a,o??""))}function o0(n){return function(){this.textContent=n}}function s0(n){return function(){var a=n(this);this.textContent=a??""}}function u0(n){return this.tween("text",typeof n=="function"?s0($n(this,"text",n)):o0(n==null?"":n+""))}function f0(n){return function(a){this.textContent=n.call(this,a)}}function c0(n){var a,o;function u(){var c=n.apply(this,arguments);return c!==o&&(a=(o=c)&&f0(c)),a}return u._value=n,u}function l0(n){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;return this.tween(a,c0(n))}function h0(){for(var n=this._name,a=this._id,o=va(),u=this._groups,c=u.length,l=0;l<c;++l)for(var d=u[l],g=d.length,w,b=0;b<g;++b)if(w=d[b]){var T=ct(w,a);Ce(w,n,o,b,d,{time:T.time+T.delay+T.duration,delay:0,duration:T.duration,ease:T.ease})}return new dt(u,this._parents,n,o)}function d0(){var n,a,o=this,u=o._id,c=o.size();return new Promise(function(l,d){var g={value:d},w={value:function(){--c===0&&l()}};o.each(function(){var b=vt(this,u),T=b.on;T!==n&&(a=(n=T).copy(),a._.cancel.push(g),a._.interrupt.push(g),a._.end.push(w)),b.on=a}),c===0&&l()})}var v0=0;function dt(n,a,o,u){this._groups=n,this._parents=a,this._name=o,this._id=u}function da(n){return Pt().transition(n)}function va(){return++v0}var gt=Pt.prototype;dt.prototype=da.prototype={constructor:dt,select:Ym,selectAll:Zm,selectChild:gt.selectChild,selectChildren:gt.selectChildren,filter:Um,merge:Vm,selection:Jm,transition:h0,call:gt.call,nodes:gt.nodes,node:gt.node,size:gt.size,empty:gt.empty,each:gt.each,on:Hm,attr:Tm,attrTween:Im,style:n0,styleTween:a0,text:u0,textTween:l0,remove:Wm,tween:_m,delay:Nm,duration:Rm,ease:km,easeVarying:Bm,end:d0,[Symbol.iterator]:gt[Symbol.iterator]};function p0(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var g0={time:null,delay:0,duration:250,ease:p0};function y0(n,a){for(var o;!(o=n.__transition)||!(o=o[a]);)if(!(n=n.parentNode))throw new Error(`transition ${a} not found`);return o}function _0(n){var a,o;n instanceof dt?(a=n._id,n=n._name):(a=va(),(o=g0).time=ug(),n=n==null?null:n+"");for(var u=this._groups,c=u.length,l=0;l<c;++l)for(var d=u[l],g=d.length,w,b=0;b<g;++b)(w=d[b])&&Ce(w,n,a,b,d,o||y0(w,a));return new dt(u,this._parents,n,a)}Pt.prototype.interrupt=pm;Pt.prototype.transition=_0;var m0=[null];function w0(n,a){var o=n.__transition,u,c;if(o){a=a==null?null:a+"";for(c in o)if((u=o[c]).state>wn&&u.name===a)return new dt([[n]],m0,a,+c)}return null}const b0=Object.freeze(Object.defineProperty({__proto__:null,active:w0,interrupt:ca,transition:da},Symbol.toStringTag,{value:"Module"})),x0=It(b0),E0=It(_y),A0=It(yy);var T0=Kt.exports,Ni;function M0(){return Ni||(Ni=1,(function(n,a){(function(o,u){u(a,my,Sy,Cy,lm,x0,E0,A0)})(T0,(function(o,u,c,l,d,g,w,b){var T=typeof window<"u"?window:typeof Ei<"u"?Ei:typeof self<"u"?self:{};function N(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function O(t,e){return e={exports:{}},t(e,e.exports),e.exports}function R(){this.__data__=[],this.size=0}var q=R;function Y(t,e){return t===e||t!==t&&e!==e}var J=Y;function rt(t,e){for(var r=t.length;r--;)if(J(t[r][0],e))return r;return-1}var Q=rt,nt=Array.prototype,ft=nt.splice;function it(t){var e=this.__data__,r=Q(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():ft.call(e,r,1),--this.size,!0}var pa=it;function ga(t){var e=this.__data__,r=Q(e,t);return r<0?void 0:e[r][1]}var ya=ga;function _a(t){return Q(this.__data__,t)>-1}var ma=_a;function wa(t,e){var r=this.__data__,i=Q(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}var ba=wa;function $t(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}$t.prototype.clear=q,$t.prototype.delete=pa,$t.prototype.get=ya,$t.prototype.has=ma,$t.prototype.set=ba;var Zt=$t;function xa(){this.__data__=new Zt,this.size=0}var Ea=xa;function Aa(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Ta=Aa;function Ma(t){return this.__data__.get(t)}var Sa=Ma;function Ca(t){return this.__data__.has(t)}var Oa=Ca,Ia=typeof T=="object"&&T&&T.Object===Object&&T,Nn=Ia,Pa=typeof self=="object"&&self&&self.Object===Object&&self,$a=Nn||Pa||Function("return this")(),lt=$a,Na=lt.Symbol,at=Na,Ln=Object.prototype,La=Ln.hasOwnProperty,Da=Ln.toString,Ut=at?at.toStringTag:void 0;function Ra(t){var e=La.call(t,Ut),r=t[Ut];try{t[Ut]=void 0;var i=!0}catch{}var s=Da.call(t);return i&&(e?t[Ut]=r:delete t[Ut]),s}var Fa=Ra,ka=Object.prototype,za=ka.toString;function Ba(t){return za.call(t)}var Ua=Ba,Va="[object Null]",ja="[object Undefined]",Dn=at?at.toStringTag:void 0;function qa(t){return t==null?t===void 0?ja:Va:Dn&&Dn in Object(t)?Fa(t):Ua(t)}var _t=qa;function Ha(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var mt=Ha,Ka="[object AsyncFunction]",Wa="[object Function]",Ya="[object GeneratorFunction]",Za="[object Proxy]";function Xa(t){if(!mt(t))return!1;var e=_t(t);return e==Wa||e==Ya||e==Ka||e==Za}var Xt=Xa,Ja=lt["__core-js_shared__"],Oe=Ja,Rn=(function(){var t=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function Qa(t){return!!Rn&&Rn in t}var Ga=Qa,to=Function.prototype,eo=to.toString;function no(t){if(t!=null){try{return eo.call(t)}catch{}try{return t+""}catch{}}return""}var wt=no,ro=/[\\^$.*+?()[\]{}|]/g,io=/^\[object .+?Constructor\]$/,ao=Function.prototype,oo=Object.prototype,so=ao.toString,uo=oo.hasOwnProperty,fo=RegExp("^"+so.call(uo).replace(ro,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function co(t){if(!mt(t)||Ga(t))return!1;var e=Xt(t)?fo:io;return e.test(wt(t))}var lo=co;function ho(t,e){return t?.[e]}var vo=ho;function po(t,e){var r=vo(t,e);return lo(r)?r:void 0}var bt=po,go=bt(lt,"Map"),Vt=go,yo=bt(Object,"create"),jt=yo;function _o(){this.__data__=jt?jt(null):{},this.size=0}var mo=_o;function wo(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var bo=wo,xo="__lodash_hash_undefined__",Eo=Object.prototype,Ao=Eo.hasOwnProperty;function To(t){var e=this.__data__;if(jt){var r=e[t];return r===xo?void 0:r}return Ao.call(e,t)?e[t]:void 0}var Mo=To,So=Object.prototype,Co=So.hasOwnProperty;function Oo(t){var e=this.__data__;return jt?e[t]!==void 0:Co.call(e,t)}var Io=Oo,Po="__lodash_hash_undefined__";function $o(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=jt&&e===void 0?Po:e,this}var No=$o;function Nt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Nt.prototype.clear=mo,Nt.prototype.delete=bo,Nt.prototype.get=Mo,Nt.prototype.has=Io,Nt.prototype.set=No;var Fn=Nt;function Lo(){this.size=0,this.__data__={hash:new Fn,map:new(Vt||Zt),string:new Fn}}var Do=Lo;function Ro(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Fo=Ro;function ko(t,e){var r=t.__data__;return Fo(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Jt=ko;function zo(t){var e=Jt(this,t).delete(t);return this.size-=e?1:0,e}var Bo=zo;function Uo(t){return Jt(this,t).get(t)}var Vo=Uo;function jo(t){return Jt(this,t).has(t)}var qo=jo;function Ho(t,e){var r=Jt(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}var Ko=Ho;function Lt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Lt.prototype.clear=Do,Lt.prototype.delete=Bo,Lt.prototype.get=Vo,Lt.prototype.has=qo,Lt.prototype.set=Ko;var Qt=Lt,Wo=200;function Yo(t,e){var r=this.__data__;if(r instanceof Zt){var i=r.__data__;if(!Vt||i.length<Wo-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Qt(i)}return r.set(t,e),this.size=r.size,this}var Zo=Yo;function Dt(t){var e=this.__data__=new Zt(t);this.size=e.size}Dt.prototype.clear=Ea,Dt.prototype.delete=Ta,Dt.prototype.get=Sa,Dt.prototype.has=Oa,Dt.prototype.set=Zo;var qt=Dt;function Xo(t,e){for(var r=-1,i=t==null?0:t.length;++r<i&&e(t[r],r,t)!==!1;);return t}var Ie=Xo,Jo=(function(){try{var t=bt(Object,"defineProperty");return t({},"",{}),t}catch{}})(),Gt=Jo;function Qo(t,e,r){e=="__proto__"&&Gt?Gt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var kn=Qo,Go=Object.prototype,ts=Go.hasOwnProperty;function es(t,e,r){var i=t[e];(!(ts.call(t,e)&&J(i,r))||r===void 0&&!(e in t))&&kn(t,e,r)}var zn=es;function ns(t,e,r,i){var s=!r;r||(r={});for(var f=-1,h=e.length;++f<h;){var v=e[f],_=i?i(r[v],t[v],v,r,t):void 0;_===void 0&&(_=t[v]),s?kn(r,v,_):zn(r,v,_)}return r}var te=ns;function rs(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var is=rs;function as(t){return t!=null&&typeof t=="object"}var ht=as,os="[object Arguments]";function ss(t){return ht(t)&&_t(t)==os}var Bn=ss,Un=Object.prototype,us=Un.hasOwnProperty,fs=Un.propertyIsEnumerable,cs=Bn((function(){return arguments})())?Bn:function(t){return ht(t)&&us.call(t,"callee")&&!fs.call(t,"callee")},ee=cs,ls=Array.isArray,Z=ls;function hs(){return!1}var ds=hs,Rt=O(function(t,e){var r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,f=s?lt.Buffer:void 0,h=f?f.isBuffer:void 0,v=h||ds;t.exports=v}),vs=9007199254740991,ps=/^(?:0|[1-9]\d*)$/;function gs(t,e){var r=typeof t;return e=e??vs,!!e&&(r=="number"||r!="symbol"&&ps.test(t))&&t>-1&&t%1==0&&t<e}var Vn=gs,ys=9007199254740991;function _s(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ys}var Pe=_s,ms="[object Arguments]",ws="[object Array]",bs="[object Boolean]",xs="[object Date]",Es="[object Error]",As="[object Function]",Ts="[object Map]",Ms="[object Number]",Ss="[object Object]",Cs="[object RegExp]",Os="[object Set]",Is="[object String]",Ps="[object WeakMap]",$s="[object ArrayBuffer]",Ns="[object DataView]",Ls="[object Float32Array]",Ds="[object Float64Array]",Rs="[object Int8Array]",Fs="[object Int16Array]",ks="[object Int32Array]",zs="[object Uint8Array]",Bs="[object Uint8ClampedArray]",Us="[object Uint16Array]",Vs="[object Uint32Array]",K={};K[Ls]=K[Ds]=K[Rs]=K[Fs]=K[ks]=K[zs]=K[Bs]=K[Us]=K[Vs]=!0,K[ms]=K[ws]=K[$s]=K[bs]=K[Ns]=K[xs]=K[Es]=K[As]=K[Ts]=K[Ms]=K[Ss]=K[Cs]=K[Os]=K[Is]=K[Ps]=!1;function js(t){return ht(t)&&Pe(t.length)&&!!K[_t(t)]}var qs=js;function Hs(t){return function(e){return t(e)}}var $e=Hs,Ft=O(function(t,e){var r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,f=s&&Nn.process,h=(function(){try{var v=i&&i.require&&i.require("util").types;return v||f&&f.binding&&f.binding("util")}catch{}})();t.exports=h}),jn=Ft&&Ft.isTypedArray,Ks=jn?$e(jn):qs,ne=Ks,Ws=Object.prototype,Ys=Ws.hasOwnProperty;function Zs(t,e){var r=Z(t),i=!r&&ee(t),s=!r&&!i&&Rt(t),f=!r&&!i&&!s&&ne(t),h=r||i||s||f,v=h?is(t.length,String):[],_=v.length;for(var m in t)(e||Ys.call(t,m))&&!(h&&(m=="length"||s&&(m=="offset"||m=="parent")||f&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Vn(m,_)))&&v.push(m);return v}var qn=Zs,Xs=Object.prototype;function Js(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Xs;return t===r}var re=Js;function Qs(t,e){return function(r){return t(e(r))}}var Hn=Qs,Gs=Hn(Object.keys,Object),tu=Gs,eu=Object.prototype,nu=eu.hasOwnProperty;function ru(t){if(!re(t))return tu(t);var e=[];for(var r in Object(t))nu.call(t,r)&&r!="constructor"&&e.push(r);return e}var Ne=ru;function iu(t){return t!=null&&Pe(t.length)&&!Xt(t)}var xt=iu;function au(t){return xt(t)?qn(t):Ne(t)}var Et=au;function ou(t,e){return t&&te(e,Et(e),t)}var su=ou;function uu(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var fu=uu,cu=Object.prototype,lu=cu.hasOwnProperty;function hu(t){if(!mt(t))return fu(t);var e=re(t),r=[];for(var i in t)i=="constructor"&&(e||!lu.call(t,i))||r.push(i);return r}var du=hu;function vu(t){return xt(t)?qn(t,!0):du(t)}var Le=vu;function pu(t,e){return t&&te(e,Le(e),t)}var gu=pu,yu=O(function(t,e){var r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,f=s?lt.Buffer:void 0,h=f?f.allocUnsafe:void 0;function v(_,m){if(m)return _.slice();var p=_.length,y=h?h(p):new _.constructor(p);return _.copy(y),y}t.exports=v});function _u(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}var mu=_u;function wu(t,e){for(var r=-1,i=t==null?0:t.length,s=0,f=[];++r<i;){var h=t[r];e(h,r,t)&&(f[s++]=h)}return f}var Kn=wu;function bu(){return[]}var Wn=bu,xu=Object.prototype,Eu=xu.propertyIsEnumerable,Yn=Object.getOwnPropertySymbols,Au=Yn?function(t){return t==null?[]:(t=Object(t),Kn(Yn(t),function(e){return Eu.call(t,e)}))}:Wn,De=Au;function Tu(t,e){return te(t,De(t),e)}var Mu=Tu;function Su(t,e){for(var r=-1,i=e.length,s=t.length;++r<i;)t[s+r]=e[r];return t}var Re=Su,Cu=Hn(Object.getPrototypeOf,Object),Fe=Cu,Ou=Object.getOwnPropertySymbols,Iu=Ou?function(t){for(var e=[];t;)Re(e,De(t)),t=Fe(t);return e}:Wn,Zn=Iu;function Pu(t,e){return te(t,Zn(t),e)}var $u=Pu;function Nu(t,e,r){var i=e(t);return Z(t)?i:Re(i,r(t))}var Xn=Nu;function Lu(t){return Xn(t,Et,De)}var ke=Lu;function Du(t){return Xn(t,Le,Zn)}var Ru=Du,Fu=bt(lt,"DataView"),ze=Fu,ku=bt(lt,"Promise"),Be=ku,zu=bt(lt,"Set"),kt=zu,Bu=bt(lt,"WeakMap"),Ue=Bu,Jn="[object Map]",Uu="[object Object]",Qn="[object Promise]",Gn="[object Set]",tr="[object WeakMap]",er="[object DataView]",Vu=wt(ze),ju=wt(Vt),qu=wt(Be),Hu=wt(kt),Ku=wt(Ue),At=_t;(ze&&At(new ze(new ArrayBuffer(1)))!=er||Vt&&At(new Vt)!=Jn||Be&&At(Be.resolve())!=Qn||kt&&At(new kt)!=Gn||Ue&&At(new Ue)!=tr)&&(At=function(t){var e=_t(t),r=e==Uu?t.constructor:void 0,i=r?wt(r):"";if(i)switch(i){case Vu:return er;case ju:return Jn;case qu:return Qn;case Hu:return Gn;case Ku:return tr}return e});var Tt=At,Wu=Object.prototype,Yu=Wu.hasOwnProperty;function Zu(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&Yu.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Xu=Zu,Ju=lt.Uint8Array,ie=Ju;function Qu(t){var e=new t.constructor(t.byteLength);return new ie(e).set(new ie(t)),e}var Ve=Qu;function Gu(t,e){var r=e?Ve(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var tf=Gu,ef=/\w*$/;function nf(t){var e=new t.constructor(t.source,ef.exec(t));return e.lastIndex=t.lastIndex,e}var rf=nf,nr=at?at.prototype:void 0,rr=nr?nr.valueOf:void 0;function af(t){return rr?Object(rr.call(t)):{}}var of=af;function sf(t,e){var r=e?Ve(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var uf=sf,ff="[object Boolean]",cf="[object Date]",lf="[object Map]",hf="[object Number]",df="[object RegExp]",vf="[object Set]",pf="[object String]",gf="[object Symbol]",yf="[object ArrayBuffer]",_f="[object DataView]",mf="[object Float32Array]",wf="[object Float64Array]",bf="[object Int8Array]",xf="[object Int16Array]",Ef="[object Int32Array]",Af="[object Uint8Array]",Tf="[object Uint8ClampedArray]",Mf="[object Uint16Array]",Sf="[object Uint32Array]";function Cf(t,e,r){var i=t.constructor;switch(e){case yf:return Ve(t);case ff:case cf:return new i(+t);case _f:return tf(t,r);case mf:case wf:case bf:case xf:case Ef:case Af:case Tf:case Mf:case Sf:return uf(t,r);case lf:return new i;case hf:case pf:return new i(t);case df:return rf(t);case vf:return new i;case gf:return of(t)}}var Of=Cf,ir=Object.create,If=(function(){function t(){}return function(e){if(!mt(e))return{};if(ir)return ir(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}})(),ar=If;function Pf(t){return typeof t.constructor=="function"&&!re(t)?ar(Fe(t)):{}}var $f=Pf,Nf="[object Map]";function Lf(t){return ht(t)&&Tt(t)==Nf}var Df=Lf,or=Ft&&Ft.isMap,Rf=or?$e(or):Df,Ff=Rf,kf="[object Set]";function zf(t){return ht(t)&&Tt(t)==kf}var Bf=zf,sr=Ft&&Ft.isSet,Uf=sr?$e(sr):Bf,Vf=Uf,jf=1,qf=2,Hf=4,ur="[object Arguments]",Kf="[object Array]",Wf="[object Boolean]",Yf="[object Date]",Zf="[object Error]",fr="[object Function]",Xf="[object GeneratorFunction]",Jf="[object Map]",Qf="[object Number]",cr="[object Object]",Gf="[object RegExp]",tc="[object Set]",ec="[object String]",nc="[object Symbol]",rc="[object WeakMap]",ic="[object ArrayBuffer]",ac="[object DataView]",oc="[object Float32Array]",sc="[object Float64Array]",uc="[object Int8Array]",fc="[object Int16Array]",cc="[object Int32Array]",lc="[object Uint8Array]",hc="[object Uint8ClampedArray]",dc="[object Uint16Array]",vc="[object Uint32Array]",H={};H[ur]=H[Kf]=H[ic]=H[ac]=H[Wf]=H[Yf]=H[oc]=H[sc]=H[uc]=H[fc]=H[cc]=H[Jf]=H[Qf]=H[cr]=H[Gf]=H[tc]=H[ec]=H[nc]=H[lc]=H[hc]=H[dc]=H[vc]=!0,H[Zf]=H[fr]=H[rc]=!1;function ae(t,e,r,i,s,f){var h,v=e&jf,_=e&qf,m=e&Hf;if(r&&(h=s?r(t,i,s,f):r(t)),h!==void 0)return h;if(!mt(t))return t;var p=Z(t);if(p){if(h=Xu(t),!v)return mu(t,h)}else{var y=Tt(t),x=y==fr||y==Xf;if(Rt(t))return yu(t,v);if(y==cr||y==ur||x&&!s){if(h=_||x?{}:$f(t),!v)return _?$u(t,gu(h,t)):Mu(t,su(h,t))}else{if(!H[y])return s?t:{};h=Of(t,y,v)}}f||(f=new qt);var E=f.get(t);if(E)return E;f.set(t,h),Vf(t)?t.forEach(function(L){h.add(ae(L,e,r,L,t,f))}):Ff(t)&&t.forEach(function(L,M){h.set(M,ae(L,e,r,M,t,f))});var I=m?_?Ru:ke:_?Le:Et,P=p?void 0:I(t);return Ie(P||t,function(L,M){P&&(M=L,L=t[M]),zn(h,M,ae(L,e,r,M,t,f))}),h}var pc=ae,gc=4;function yc(t){return pc(t,gc)}var _c=yc;function mc(t){return function(){return t}}var lr=mc;function wc(t){return function(e,r,i){for(var s=-1,f=Object(e),h=i(e),v=h.length;v--;){var _=h[t?v:++s];if(r(f[_],_,f)===!1)break}return e}}var bc=wc,xc=bc(),Ec=xc;function Ac(t,e){return t&&Ec(t,e,Et)}var hr=Ac;function Tc(t,e){return function(r,i){if(r==null)return r;if(!xt(r))return t(r,i);for(var s=r.length,f=e?s:-1,h=Object(r);(e?f--:++f<s)&&i(h[f],f,h)!==!1;);return r}}var Mc=Tc,Sc=Mc(hr),oe=Sc;function Cc(t){return t}var se=Cc;function Oc(t){return typeof t=="function"?t:se}var Ic=Oc;function Pc(t,e){var r=Z(t)?Ie:oe;return r(t,Ic(e))}var $c=Pc,Nc=$c;function Lc(t,e){var r=[];return oe(t,function(i,s,f){e(i,s,f)&&r.push(i)}),r}var Dc=Lc,Rc="__lodash_hash_undefined__";function Fc(t){return this.__data__.set(t,Rc),this}var kc=Fc;function zc(t){return this.__data__.has(t)}var Bc=zc;function ue(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Qt;++e<r;)this.add(t[e])}ue.prototype.add=ue.prototype.push=kc,ue.prototype.has=Bc;var dr=ue;function Uc(t,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}var Vc=Uc;function jc(t,e){return t.has(e)}var vr=jc,qc=1,Hc=2;function Kc(t,e,r,i,s,f){var h=r&qc,v=t.length,_=e.length;if(v!=_&&!(h&&_>v))return!1;var m=f.get(t),p=f.get(e);if(m&&p)return m==e&&p==t;var y=-1,x=!0,E=r&Hc?new dr:void 0;for(f.set(t,e),f.set(e,t);++y<v;){var I=t[y],P=e[y];if(i)var L=h?i(P,I,y,e,t,f):i(I,P,y,t,e,f);if(L!==void 0){if(L)continue;x=!1;break}if(E){if(!Vc(e,function(M,k){if(!vr(E,k)&&(I===M||s(I,M,r,i,f)))return E.push(k)})){x=!1;break}}else if(!(I===P||s(I,P,r,i,f))){x=!1;break}}return f.delete(t),f.delete(e),x}var pr=Kc;function Wc(t){var e=-1,r=Array(t.size);return t.forEach(function(i,s){r[++e]=[s,i]}),r}var Yc=Wc;function Zc(t){var e=-1,r=Array(t.size);return t.forEach(function(i){r[++e]=i}),r}var je=Zc,Xc=1,Jc=2,Qc="[object Boolean]",Gc="[object Date]",tl="[object Error]",el="[object Map]",nl="[object Number]",rl="[object RegExp]",il="[object Set]",al="[object String]",ol="[object Symbol]",sl="[object ArrayBuffer]",ul="[object DataView]",gr=at?at.prototype:void 0,qe=gr?gr.valueOf:void 0;function fl(t,e,r,i,s,f,h){switch(r){case ul:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case sl:return!(t.byteLength!=e.byteLength||!f(new ie(t),new ie(e)));case Qc:case Gc:case nl:return J(+t,+e);case tl:return t.name==e.name&&t.message==e.message;case rl:case al:return t==e+"";case el:var v=Yc;case il:var _=i&Xc;if(v||(v=je),t.size!=e.size&&!_)return!1;var m=h.get(t);if(m)return m==e;i|=Jc,h.set(t,e);var p=pr(v(t),v(e),i,s,f,h);return h.delete(t),p;case ol:if(qe)return qe.call(t)==qe.call(e)}return!1}var cl=fl,ll=1,hl=Object.prototype,dl=hl.hasOwnProperty;function vl(t,e,r,i,s,f){var h=r&ll,v=ke(t),_=v.length,m=ke(e),p=m.length;if(_!=p&&!h)return!1;for(var y=_;y--;){var x=v[y];if(!(h?x in e:dl.call(e,x)))return!1}var E=f.get(t),I=f.get(e);if(E&&I)return E==e&&I==t;var P=!0;f.set(t,e),f.set(e,t);for(var L=h;++y<_;){x=v[y];var M=t[x],k=e[x];if(i)var A=h?i(k,M,x,e,t,f):i(M,k,x,t,e,f);if(!(A===void 0?M===k||s(M,k,r,i,f):A)){P=!1;break}L||(L=x=="constructor")}if(P&&!L){var $=t.constructor,C=e.constructor;$!=C&&"constructor"in t&&"constructor"in e&&!(typeof $=="function"&&$ instanceof $&&typeof C=="function"&&C instanceof C)&&(P=!1)}return f.delete(t),f.delete(e),P}var pl=vl,gl=1,yr="[object Arguments]",_r="[object Array]",fe="[object Object]",yl=Object.prototype,mr=yl.hasOwnProperty;function _l(t,e,r,i,s,f){var h=Z(t),v=Z(e),_=h?_r:Tt(t),m=v?_r:Tt(e);_=_==yr?fe:_,m=m==yr?fe:m;var p=_==fe,y=m==fe,x=_==m;if(x&&Rt(t)){if(!Rt(e))return!1;h=!0,p=!1}if(x&&!p)return f||(f=new qt),h||ne(t)?pr(t,e,r,i,s,f):cl(t,e,_,r,i,s,f);if(!(r&gl)){var E=p&&mr.call(t,"__wrapped__"),I=y&&mr.call(e,"__wrapped__");if(E||I){var P=E?t.value():t,L=I?e.value():e;return f||(f=new qt),s(P,L,r,i,f)}}return x?(f||(f=new qt),pl(t,e,r,i,s,f)):!1}var ml=_l;function wr(t,e,r,i,s){return t===e?!0:t==null||e==null||!ht(t)&&!ht(e)?t!==t&&e!==e:ml(t,e,r,i,wr,s)}var br=wr,wl=1,bl=2;function xl(t,e,r,i){var s=r.length,f=s,h=!i;if(t==null)return!f;for(t=Object(t);s--;){var v=r[s];if(h&&v[2]?v[1]!==t[v[0]]:!(v[0]in t))return!1}for(;++s<f;){v=r[s];var _=v[0],m=t[_],p=v[1];if(h&&v[2]){if(m===void 0&&!(_ in t))return!1}else{var y=new qt;if(i)var x=i(m,p,_,t,e,y);if(!(x===void 0?br(p,m,wl|bl,i,y):x))return!1}}return!0}var El=xl;function Al(t){return t===t&&!mt(t)}var xr=Al;function Tl(t){for(var e=Et(t),r=e.length;r--;){var i=e[r],s=t[i];e[r]=[i,s,xr(s)]}return e}var Ml=Tl;function Sl(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Er=Sl;function Cl(t){var e=Ml(t);return e.length==1&&e[0][2]?Er(e[0][0],e[0][1]):function(r){return r===t||El(r,t,e)}}var Ol=Cl,Il="[object Symbol]";function Pl(t){return typeof t=="symbol"||ht(t)&&_t(t)==Il}var He=Pl,$l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nl=/^\w*$/;function Ll(t,e){if(Z(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||He(t)?!0:Nl.test(t)||!$l.test(t)||e!=null&&t in Object(e)}var Ke=Ll,Dl="Expected a function";function We(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Dl);var r=function(){var i=arguments,s=e?e.apply(this,i):i[0],f=r.cache;if(f.has(s))return f.get(s);var h=t.apply(this,i);return r.cache=f.set(s,h)||f,h};return r.cache=new(We.Cache||Qt),r}We.Cache=Qt;var Rl=We,Fl=500;function kl(t){var e=Rl(t,function(i){return r.size===Fl&&r.clear(),i}),r=e.cache;return e}var zl=kl,Bl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ul=/\\(\\)?/g,Vl=zl(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Bl,function(r,i,s,f){e.push(s?f.replace(Ul,"$1"):i||r)}),e}),jl=Vl;function ql(t,e){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=e(t[r],r,t);return s}var Ye=ql,Ar=at?at.prototype:void 0,Tr=Ar?Ar.toString:void 0;function Mr(t){if(typeof t=="string")return t;if(Z(t))return Ye(t,Mr)+"";if(He(t))return Tr?Tr.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Hl=Mr;function Kl(t){return t==null?"":Hl(t)}var Wl=Kl;function Yl(t,e){return Z(t)?t:Ke(t,e)?[t]:jl(Wl(t))}var Sr=Yl;function Zl(t){if(typeof t=="string"||He(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var ce=Zl;function Xl(t,e){e=Sr(e,t);for(var r=0,i=e.length;t!=null&&r<i;)t=t[ce(e[r++])];return r&&r==i?t:void 0}var Cr=Xl;function Jl(t,e,r){var i=t==null?void 0:Cr(t,e);return i===void 0?r:i}var Ql=Jl;function Gl(t,e){return t!=null&&e in Object(t)}var th=Gl;function eh(t,e,r){e=Sr(e,t);for(var i=-1,s=e.length,f=!1;++i<s;){var h=ce(e[i]);if(!(f=t!=null&&r(t,h)))break;t=t[h]}return f||++i!=s?f:(s=t==null?0:t.length,!!s&&Pe(s)&&Vn(h,s)&&(Z(t)||ee(t)))}var Or=eh;function nh(t,e){return t!=null&&Or(t,e,th)}var rh=nh,ih=1,ah=2;function oh(t,e){return Ke(t)&&xr(e)?Er(ce(t),e):function(r){var i=Ql(r,t);return i===void 0&&i===e?rh(r,t):br(e,i,ih|ah)}}var sh=oh;function uh(t){return function(e){return e?.[t]}}var Ir=uh;function fh(t){return function(e){return Cr(e,t)}}var ch=fh;function lh(t){return Ke(t)?Ir(ce(t)):ch(t)}var hh=lh;function dh(t){return typeof t=="function"?t:t==null?se:typeof t=="object"?Z(t)?sh(t[0],t[1]):Ol(t):hh(t)}var le=dh;function vh(t,e){var r=Z(t)?Kn:Dc;return r(t,le(e))}var ph=vh,gh=Object.prototype,yh=gh.hasOwnProperty;function _h(t,e){return t!=null&&yh.call(t,e)}var mh=_h;function wh(t,e){return t!=null&&Or(t,e,mh)}var bh=wh,xh="[object Map]",Eh="[object Set]",Ah=Object.prototype,Th=Ah.hasOwnProperty;function Mh(t){if(t==null)return!0;if(xt(t)&&(Z(t)||typeof t=="string"||typeof t.splice=="function"||Rt(t)||ne(t)||ee(t)))return!t.length;var e=Tt(t);if(e==xh||e==Eh)return!t.size;if(re(t))return!Ne(t).length;for(var r in t)if(Th.call(t,r))return!1;return!0}var Sh=Mh;function Ch(t){return t===void 0}var Oh=Ch;function Ih(t,e){var r=-1,i=xt(t)?Array(t.length):[];return oe(t,function(s,f,h){i[++r]=e(s,f,h)}),i}var Ph=Ih;function $h(t,e){var r=Z(t)?Ye:Ph;return r(t,le(e))}var Nh=$h;function Lh(t,e,r,i){var s=-1,f=t==null?0:t.length;for(i&&f&&(r=t[++s]);++s<f;)r=e(r,t[s],s,t);return r}var Dh=Lh;function Rh(t,e,r,i,s){return s(t,function(f,h,v){r=i?(i=!1,f):e(r,f,h,v)}),r}var Fh=Rh;function kh(t,e,r){var i=Z(t)?Dh:Fh,s=arguments.length<3;return i(t,le(e),r,s,oe)}var zh=kh,Bh="[object String]";function Uh(t){return typeof t=="string"||!Z(t)&&ht(t)&&_t(t)==Bh}var Vh=Uh,jh=Ir("length"),qh=jh,Hh="\\ud800-\\udfff",Kh="\\u0300-\\u036f",Wh="\\ufe20-\\ufe2f",Yh="\\u20d0-\\u20ff",Zh=Kh+Wh+Yh,Xh="\\ufe0e\\ufe0f",Jh="\\u200d",Qh=RegExp("["+Jh+Hh+Zh+Xh+"]");function Gh(t){return Qh.test(t)}var td=Gh,Pr="\\ud800-\\udfff",ed="\\u0300-\\u036f",nd="\\ufe20-\\ufe2f",rd="\\u20d0-\\u20ff",id=ed+nd+rd,ad="\\ufe0e\\ufe0f",od="["+Pr+"]",Ze="["+id+"]",Xe="\\ud83c[\\udffb-\\udfff]",sd="(?:"+Ze+"|"+Xe+")",$r="[^"+Pr+"]",Nr="(?:\\ud83c[\\udde6-\\uddff]){2}",Lr="[\\ud800-\\udbff][\\udc00-\\udfff]",ud="\\u200d",Dr=sd+"?",Rr="["+ad+"]?",fd="(?:"+ud+"(?:"+[$r,Nr,Lr].join("|")+")"+Rr+Dr+")*",cd=Rr+Dr+fd,ld="(?:"+[$r+Ze+"?",Ze,Nr,Lr,od].join("|")+")",Fr=RegExp(Xe+"(?="+Xe+")|"+ld+cd,"g");function hd(t){for(var e=Fr.lastIndex=0;Fr.test(t);)++e;return e}var dd=hd;function vd(t){return td(t)?dd(t):qh(t)}var pd=vd,gd="[object Map]",yd="[object Set]";function _d(t){if(t==null)return 0;if(xt(t))return Vh(t)?pd(t):t.length;var e=Tt(t);return e==gd||e==yd?t.size:Ne(t).length}var md=_d;function wd(t,e,r){var i=Z(t),s=i||Rt(t)||ne(t);if(e=le(e),r==null){var f=t&&t.constructor;s?r=i?new f:[]:mt(t)?r=Xt(f)?ar(Fe(t)):{}:r={}}return(s?Ie:hr)(t,function(h,v,_){return e(r,h,v,_)}),r}var bd=wd,kr=at?at.isConcatSpreadable:void 0;function xd(t){return Z(t)||ee(t)||!!(kr&&t&&t[kr])}var Ed=xd;function zr(t,e,r,i,s){var f=-1,h=t.length;for(r||(r=Ed),s||(s=[]);++f<h;){var v=t[f];e>0&&r(v)?e>1?zr(v,e-1,r,i,s):Re(s,v):i||(s[s.length]=v)}return s}var Ad=zr;function Td(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Md=Td,Br=Math.max;function Sd(t,e,r){return e=Br(e===void 0?t.length-1:e,0),function(){for(var i=arguments,s=-1,f=Br(i.length-e,0),h=Array(f);++s<f;)h[s]=i[e+s];s=-1;for(var v=Array(e+1);++s<e;)v[s]=i[s];return v[e]=r(h),Md(t,this,v)}}var Cd=Sd,Od=Gt?function(t,e){return Gt(t,"toString",{configurable:!0,enumerable:!1,value:lr(e),writable:!0})}:se,Id=Od,Pd=800,$d=16,Nd=Date.now;function Ld(t){var e=0,r=0;return function(){var i=Nd(),s=$d-(i-r);if(r=i,s>0){if(++e>=Pd)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Dd=Ld,Rd=Dd(Id),Fd=Rd;function kd(t,e){return Fd(Cd(t,e,se),t+"")}var zd=kd;function Bd(t,e,r,i){for(var s=t.length,f=r+(i?1:-1);i?f--:++f<s;)if(e(t[f],f,t))return f;return-1}var Ud=Bd;function Vd(t){return t!==t}var jd=Vd;function qd(t,e,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===e)return i;return-1}var Hd=qd;function Kd(t,e,r){return e===e?Hd(t,e,r):Ud(t,jd,r)}var Wd=Kd;function Yd(t,e){var r=t==null?0:t.length;return!!r&&Wd(t,e,0)>-1}var Zd=Yd;function Xd(t,e,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(e,t[i]))return!0;return!1}var Jd=Xd;function Qd(){}var Gd=Qd,tv=1/0,ev=kt&&1/je(new kt([,-0]))[1]==tv?function(t){return new kt(t)}:Gd,nv=ev,rv=200;function iv(t,e,r){var i=-1,s=Zd,f=t.length,h=!0,v=[],_=v;if(r)h=!1,s=Jd;else if(f>=rv){var m=e?null:nv(t);if(m)return je(m);h=!1,s=vr,_=new dr}else _=e?[]:v;t:for(;++i<f;){var p=t[i],y=e?e(p):p;if(p=r||p!==0?p:0,h&&y===y){for(var x=_.length;x--;)if(_[x]===y)continue t;e&&_.push(y),v.push(p)}else s(_,y,r)||(_!==v&&_.push(y),v.push(p))}return v}var av=iv;function ov(t){return ht(t)&&xt(t)}var sv=ov,uv=zd(function(t){return av(Ad(t,1,sv,!0))}),fv=uv;function cv(t,e){return Ye(e,function(r){return t[r]})}var lv=cv;function hv(t){return t==null?[]:lv(t,Et(t))}var dv=hv,he;if(typeof N=="function")try{he={clone:_c,constant:lr,each:Nc,filter:ph,has:bh,isArray:Z,isEmpty:Sh,isFunction:Xt,isUndefined:Oh,keys:Et,map:Nh,reduce:zh,size:md,transform:bd,union:fv,values:dv}}catch{}he||(he=window._);var D=he,Ur=U,vv="\0",Mt="\0",Vr="";function U(t){this._isDirected=D.has(t,"directed")?t.directed:!0,this._isMultigraph=D.has(t,"multigraph")?t.multigraph:!1,this._isCompound=D.has(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=D.constant(void 0),this._defaultEdgeLabelFn=D.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Mt]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}U.prototype._nodeCount=0,U.prototype._edgeCount=0,U.prototype.isDirected=function(){return this._isDirected},U.prototype.isMultigraph=function(){return this._isMultigraph},U.prototype.isCompound=function(){return this._isCompound},U.prototype.setGraph=function(t){return this._label=t,this},U.prototype.graph=function(){return this._label},U.prototype.setDefaultNodeLabel=function(t){return D.isFunction(t)||(t=D.constant(t)),this._defaultNodeLabelFn=t,this},U.prototype.nodeCount=function(){return this._nodeCount},U.prototype.nodes=function(){return D.keys(this._nodes)},U.prototype.sources=function(){var t=this;return D.filter(this.nodes(),function(e){return D.isEmpty(t._in[e])})},U.prototype.sinks=function(){var t=this;return D.filter(this.nodes(),function(e){return D.isEmpty(t._out[e])})},U.prototype.setNodes=function(t,e){var r=arguments,i=this;return D.each(t,function(s){r.length>1?i.setNode(s,e):i.setNode(s)}),this},U.prototype.setNode=function(t,e){return D.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=Mt,this._children[t]={},this._children[Mt][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},U.prototype.node=function(t){return this._nodes[t]},U.prototype.hasNode=function(t){return D.has(this._nodes,t)},U.prototype.removeNode=function(t){var e=this;if(D.has(this._nodes,t)){var r=function(i){e.removeEdge(e._edgeObjs[i])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],D.each(this.children(t),function(i){e.setParent(i)}),delete this._children[t]),D.each(D.keys(this._in[t]),r),delete this._in[t],delete this._preds[t],D.each(D.keys(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},U.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(D.isUndefined(e))e=Mt;else{e+="";for(var r=e;!D.isUndefined(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},U.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},U.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==Mt)return e}},U.prototype.children=function(t){if(D.isUndefined(t)&&(t=Mt),this._isCompound){var e=this._children[t];if(e)return D.keys(e)}else{if(t===Mt)return this.nodes();if(this.hasNode(t))return[]}},U.prototype.predecessors=function(t){var e=this._preds[t];if(e)return D.keys(e)},U.prototype.successors=function(t){var e=this._sucs[t];if(e)return D.keys(e)},U.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return D.union(e,this.successors(t))},U.prototype.isLeaf=function(t){var e;return this.isDirected()?e=this.successors(t):e=this.neighbors(t),e.length===0},U.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;D.each(this._nodes,function(f,h){t(h)&&e.setNode(h,f)}),D.each(this._edgeObjs,function(f){e.hasNode(f.v)&&e.hasNode(f.w)&&e.setEdge(f,r.edge(f))});var i={};function s(f){var h=r.parent(f);return h===void 0||e.hasNode(h)?(i[f]=h,h):h in i?i[h]:s(h)}return this._isCompound&&D.each(e.nodes(),function(f){e.setParent(f,s(f))}),e},U.prototype.setDefaultEdgeLabel=function(t){return D.isFunction(t)||(t=D.constant(t)),this._defaultEdgeLabelFn=t,this},U.prototype.edgeCount=function(){return this._edgeCount},U.prototype.edges=function(){return D.values(this._edgeObjs)},U.prototype.setPath=function(t,e){var r=this,i=arguments;return D.reduce(t,function(s,f){return i.length>1?r.setEdge(s,f,e):r.setEdge(s,f),f}),this},U.prototype.setEdge=function(){var t,e,r,i,s=!1,f=arguments[0];typeof f=="object"&&f!==null&&"v"in f?(t=f.v,e=f.w,r=f.name,arguments.length===2&&(i=arguments[1],s=!0)):(t=f,e=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],s=!0)),t=""+t,e=""+e,D.isUndefined(r)||(r=""+r);var h=Ht(this._isDirected,t,e,r);if(D.has(this._edgeLabels,h))return s&&(this._edgeLabels[h]=i),this;if(!D.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[h]=s?i:this._defaultEdgeLabelFn(t,e,r);var v=pv(this._isDirected,t,e,r);return t=v.v,e=v.w,Object.freeze(v),this._edgeObjs[h]=v,jr(this._preds[e],t),jr(this._sucs[t],e),this._in[e][h]=v,this._out[t][h]=v,this._edgeCount++,this},U.prototype.edge=function(t,e,r){var i=arguments.length===1?Je(this._isDirected,arguments[0]):Ht(this._isDirected,t,e,r);return this._edgeLabels[i]},U.prototype.hasEdge=function(t,e,r){var i=arguments.length===1?Je(this._isDirected,arguments[0]):Ht(this._isDirected,t,e,r);return D.has(this._edgeLabels,i)},U.prototype.removeEdge=function(t,e,r){var i=arguments.length===1?Je(this._isDirected,arguments[0]):Ht(this._isDirected,t,e,r),s=this._edgeObjs[i];return s&&(t=s.v,e=s.w,delete this._edgeLabels[i],delete this._edgeObjs[i],qr(this._preds[e],t),qr(this._sucs[t],e),delete this._in[e][i],delete this._out[t][i],this._edgeCount--),this},U.prototype.inEdges=function(t,e){var r=this._in[t];if(r){var i=D.values(r);return e?D.filter(i,function(s){return s.v===e}):i}},U.prototype.outEdges=function(t,e){var r=this._out[t];if(r){var i=D.values(r);return e?D.filter(i,function(s){return s.w===e}):i}},U.prototype.nodeEdges=function(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))};function jr(t,e){t[e]?t[e]++:t[e]=1}function qr(t,e){--t[e]||delete t[e]}function Ht(t,e,r,i){var s=""+e,f=""+r;if(!t&&s>f){var h=s;s=f,f=h}return s+Vr+f+Vr+(D.isUndefined(i)?vv:i)}function pv(t,e,r,i){var s=""+e,f=""+r;if(!t&&s>f){var h=s;s=f,f=h}var v={v:s,w:f};return i&&(v.name=i),v}function Je(t,e){return Ht(t,e.v,e.w,e.name)}var gv={Graph:Ur},yv=_v;function _v(t){var e={},r=[],i;function s(f){D.has(e,f)||(e[f]=!0,i.push(f),D.each(t.successors(f),s),D.each(t.predecessors(f),s))}return D.each(t.nodes(),function(f){i=[],s(f),i.length&&r.push(i)}),r}var Hr=ot;function ot(){this._arr=[],this._keyIndices={}}ot.prototype.size=function(){return this._arr.length},ot.prototype.keys=function(){return this._arr.map(function(t){return t.key})},ot.prototype.has=function(t){return D.has(this._keyIndices,t)},ot.prototype.priority=function(t){var e=this._keyIndices[t];if(e!==void 0)return this._arr[e].priority},ot.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ot.prototype.add=function(t,e){var r=this._keyIndices;if(t=String(t),!D.has(r,t)){var i=this._arr,s=i.length;return r[t]=s,i.push({key:t,priority:e}),this._decrease(s),!0}return!1},ot.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},ot.prototype.decrease=function(t,e){var r=this._keyIndices[t];if(e>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+e);this._arr[r].priority=e,this._decrease(r)},ot.prototype._heapify=function(t){var e=this._arr,r=2*t,i=r+1,s=t;r<e.length&&(s=e[r].priority<e[s].priority?r:s,i<e.length&&(s=e[i].priority<e[s].priority?i:s),s!==t&&(this._swap(t,s),this._heapify(s)))},ot.prototype._decrease=function(t){for(var e=this._arr,r=e[t].priority,i;t!==0&&(i=t>>1,!(e[i].priority<r));)this._swap(t,i),t=i},ot.prototype._swap=function(t,e){var r=this._arr,i=this._keyIndices,s=r[t],f=r[e];r[t]=f,r[e]=s,i[f.key]=t,i[s.key]=e};var Kr=wv,mv=D.constant(1);function wv(t,e,r,i){return bv(t,String(e),r||mv,i||function(s){return t.outEdges(s)})}function bv(t,e,r,i){var s={},f=new Hr,h,v,_=function(m){var p=m.v!==h?m.v:m.w,y=s[p],x=r(m),E=v.distance+x;if(x<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+m+" Weight: "+x);E<y.distance&&(y.distance=E,y.predecessor=h,f.decrease(p,E))};for(t.nodes().forEach(function(m){var p=m===e?0:Number.POSITIVE_INFINITY;s[m]={distance:p},f.add(m,p)});f.size()>0&&(h=f.removeMin(),v=s[h],v.distance!==Number.POSITIVE_INFINITY);)i(h).forEach(_);return s}var xv=Ev;function Ev(t,e,r){return D.transform(t.nodes(),function(i,s){i[s]=Kr(t,s,e,r)},{})}var Wr=Av;function Av(t){var e=0,r=[],i={},s=[];function f(h){var v=i[h]={onStack:!0,lowlink:e,index:e++};if(r.push(h),t.successors(h).forEach(function(p){D.has(i,p)?i[p].onStack&&(v.lowlink=Math.min(v.lowlink,i[p].index)):(f(p),v.lowlink=Math.min(v.lowlink,i[p].lowlink))}),v.lowlink===v.index){var _=[],m;do m=r.pop(),i[m].onStack=!1,_.push(m);while(h!==m);s.push(_)}}return t.nodes().forEach(function(h){D.has(i,h)||f(h)}),s}var Tv=Mv;function Mv(t){return D.filter(Wr(t),function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})}var Sv=Ov,Cv=D.constant(1);function Ov(t,e,r){return Iv(t,e||Cv,r||function(i){return t.outEdges(i)})}function Iv(t,e,r){var i={},s=t.nodes();return s.forEach(function(f){i[f]={},i[f][f]={distance:0},s.forEach(function(h){f!==h&&(i[f][h]={distance:Number.POSITIVE_INFINITY})}),r(f).forEach(function(h){var v=h.v===f?h.w:h.v,_=e(h);i[f][v]={distance:_,predecessor:f}})}),s.forEach(function(f){var h=i[f];s.forEach(function(v){var _=i[v];s.forEach(function(m){var p=_[f],y=h[m],x=_[m],E=p.distance+y.distance;E<x.distance&&(x.distance=E,x.predecessor=y.predecessor)})})}),i}var Qe=Yr;Yr.CycleException=de;function Yr(t){var e={},r={},i=[];function s(f){if(D.has(r,f))throw new de;D.has(e,f)||(r[f]=!0,e[f]=!0,D.each(t.predecessors(f),s),delete r[f],i.push(f))}if(D.each(t.sinks(),s),D.size(e)!==t.nodeCount())throw new de;return i}function de(){}de.prototype=new Error;var Pv=$v;function $v(t){try{Qe(t)}catch(e){if(e instanceof Qe.CycleException)return!1;throw e}return!0}var Zr=Nv;function Nv(t,e,r){D.isArray(e)||(e=[e]);var i=(t.isDirected()?t.successors:t.neighbors).bind(t),s=[],f={};return D.each(e,function(h){if(!t.hasNode(h))throw new Error("Graph does not have node: "+h);Xr(t,h,r==="post",f,i,s)}),s}function Xr(t,e,r,i,s,f){D.has(i,e)||(i[e]=!0,r||f.push(e),D.each(s(e),function(h){Xr(t,h,r,i,s,f)}),r&&f.push(e))}var Lv=Dv;function Dv(t,e){return Zr(t,e,"post")}var Rv=Fv;function Fv(t,e){return Zr(t,e,"pre")}var kv=zv;function zv(t,e){var r=new Ur,i={},s=new Hr,f;function h(_){var m=_.v===f?_.w:_.v,p=s.priority(m);if(p!==void 0){var y=e(_);y<p&&(i[m]=f,s.decrease(m,y))}}if(t.nodeCount()===0)return r;D.each(t.nodes(),function(_){s.add(_,Number.POSITIVE_INFINITY),r.setNode(_)}),s.decrease(t.nodes()[0],0);for(var v=!1;s.size()>0;){if(f=s.removeMin(),D.has(i,f))r.setEdge(f,i[f]);else{if(v)throw new Error("Input graph is not connected: "+t);v=!0}t.nodeEdges(f).forEach(h)}return r}var Bv={components:yv,dijkstra:Kr,dijkstraAll:xv,findCycles:Tv,floydWarshall:Sv,isAcyclic:Pv,postorder:Lv,preorder:Rv,prim:kv,tarjan:Wr,topsort:Qe},Jr={Graph:gv.Graph,alg:Bv},Ge=Jr.Graph,Uv=Jr.alg;function Vv(t,e){e===void 0&&(e=[]);var r=new Ge({directed:!0});if(t.nodes().length===0)return r;e=jv(t,e);var i=c.map(),s,f,h,v;for(h=0;h<e.length;++h)if(s=e[h],!(!s.nodes||s.nodes.length===0)){for(f=""+h,v=0;v<s.nodes.length;++v)i.set(s.nodes[v],f);r.setNode(f,{type:s.type,nodes:s.nodes})}return t.nodes(),t.nodes().forEach(function(_){t.node(_),i.has(_)||(f=""+h++,s={type:"same",nodes:[_]},i.set(_,f),r.setNode(f,s))}),t.edges().forEach(function(_){t.edge(_);var m=i.get(_.v),p=i.get(_.w),y=r.edge(m,p)||{delta:0};m===p?(y.delta=0,r.setEdge(m,p,y)):t.node(_.v).backwards?(y.delta=Math.max(y.delta,t.node(_.w).backwards?1:0),r.setEdge(p,m,y)):(y.delta=Math.max(y.delta,t.node(_.w).backwards?0:1),r.setEdge(m,p,y))}),r}function jv(t,e){for(var r=0;r<e.length;++r)if(e[r].type==="min")return e;var i=t.sources(),s=i.length?i[0]:t.nodes()[0];return[{type:"min",nodes:[s]}].concat(e)}function qv(t,e){var r=Hv(t,e);return t.edges().forEach(function(i){var s=Kv(r,i.v,i.w);if(s<0){var f=t.edge(i)||{};f.reversed=!0,t.removeEdge(i),t.setEdge(i.w,i.v,f)}}),t}function Hv(t,e){var r=c.set(),i=new Ge({directed:!0}),s=[];if(!t.hasNode(e))throw Error("node not in graph");return tn(t,e,r,i,s),t.nodes().forEach(function(f){r.has(f)||tn(t,f,r,i,s)}),s.forEach(function(f,h){i.node(f).thread=h+1<s.length?s[h+1]:s[0]}),i}function Kv(t,e,r){var i=t.node(e),s=t.node(r);if(i.depth<s.depth)for(var f=i.thread;t.node(f).depth>i.depth;){if(f===r)return 1;f=t.node(f).thread}else if(s.depth<i.depth)for(var h=s.thread;t.node(h).depth>s.depth;){if(h===e)return-1;h=t.node(h).thread}return 0}function tn(t,e,r,i,s,f){if(f===void 0&&(f=0),!r.has(e)){r.add(e),s.push(e),i.setNode(e,{depth:f});var h=t.outEdges(e).map(function(v){return v.w});h.forEach(function(v,_){r.has(v)||i.setEdge(e,v,{delta:1}),tn(t,v,r,i,s,f+1)})}}function Wv(t){var e=t.sources(),r=c.set(),i=c.set();t.edges().forEach(function(f){f.v===f.w&&i.add(en(f))}),t.nodes().forEach(function(f){t.node(f).rank=0});for(var s=function(){var f=e.shift();r.add(f);var h=t.node(f);h||t.setNode(f,h={}),h.rank=0,t.inEdges(f).forEach(function(v){var _=t.edge(v).delta===void 0?1:t.edge(v).delta;h.rank=Math.max(h.rank,t.node(v.v).rank+_)}),t.outEdges(f).forEach(function(v){i.add(en(v))}),t.nodes().forEach(function(v){e.indexOf(v)<0&&!r.has(v)&&!t.inEdges(v).some(function(_){return!i.has(en(_))})&&e.push(v)})};e.length>0;)s()}function en(t){return t.v+""+t.w+""+t.name}function Yv(t,e){var r=Vv(t,e);r.nodeCount()!==0&&(Zv(r),qv(r,"0"),Wv(r),Xv(r),r.nodes().forEach(function(i){var s=r.node(i);s.nodes.forEach(function(f){t.node(f).rank=s.rank})}))}function Zv(t){t.sources().forEach(function(e){e!=="0"&&t.setEdge("0",e,{temp:!0,delta:0})})}function Xv(t){t.edges().forEach(function(r){var i=t.edge(r);i.temp&&e(r.w)});function e(r){var i=t.node(r),s=u.min(t.outEdges(r),function(f){return t.node(f.w).rank-t.edge(f).delta});s!==void 0&&(i.rank=s)}}function Jv(t,e){var r=[];if(e.length===0)return r;var i=t.sources(),s=c.map();return e.forEach(function(f,h){r.push([]),f.forEach(function(v){h===0&&i.indexOf(v)<0&&i.push(v),s.set(v,h)})}),Uv.preorder(t,i).forEach(function(f){r[s.get(f)].push(f)}),r}function nn(t,e,r){return Qv(t,e,r)}function Qv(t,e,r){var i,s,f;e.length>r.length?(i=e,s=r):(i=r,s=e),f=s.length;var h=[];i.forEach(function(x){s.forEach(function(E,I){(t.hasEdge(x,E)||t.hasEdge(E,x))&&h.push(I)})});for(var v=1;v<f;)v*=2;var _=2*v-1;v-=1;for(var m=new Array(_),p=0;p<_;p++)m[p]=0;var y=0;return h.forEach(function(x){var E=x+v;for(m[E]++;E>0;)E%2&&(y+=m[E+1]),E=Math.floor((E-1)/2),m[E]++}),y}function Gv(t,e){for(var r=!0;r;){r=!1;for(var i=0;i<e.length;++i)for(var s=0;s<e[i].length-1;++s){var f=Qr(t,e,i);Gr(e[i],s,s+1);var h=Qr(t,e,i);h<f?r=!0:Gr(e[i],s,s+1)}}}function Qr(t,e,r){var i=0;return r>0&&(i+=nn(t,e[r-1],e[r])),r+1<e.length&&(i+=nn(t,e[r],e[r+1])),i}function Gr(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function ti(t){var e=Math.floor(t.length/2);if(t.length===0)return-1;if(t.length%2===1)return t[e];if(t.length===2)return(t[0]+t[1])/2;var r=t[e-1]-t[0],i=t[t.length-1]-t[e];return(t[e-1]*i+t[e]*r)/(r+i)}function ei(t,e,r,i,s,f){f===void 0&&(f=!1);var h=e[r],v=e[i],_=[];return v.forEach(function(m,p){t.nodeEdges(m,s).length>0&&_.push(p)}),_.length===0&&f&&h.forEach(function(m,p){t.nodeEdges(m,s).length>0&&_.push(p+.5)}),_.sort(function(m,p){return m-p}),_}function ni(t,e){for(var r=c.map(t.map(function(m,p){return[m,p]}),function(m){return m[0]}),i=1;i<t.length;++i)for(var s=i;s>0;--s){for(var f=s-1,h=e.get(t[f]),v=e.get(t[s]);(h=e.get(t[f]))===-1&&f>0;)f--;if(v===-1||h===-1||(h===v&&(h=r.get(t[f]),v=r.get(t[s])),v>=h))break;var _;_=[t[f],t[s]],t[s]=_[0],t[f]=_[1]}}function tp(t,e,r,i){if(r===void 0&&(r=1),i===void 0&&(i=!1),r>0)for(var s=function(_){var m=c.map();e[_].forEach(function(p){var y=ti(ei(t,e,_,_-1,p,i));m.set(p,y)}),ni(e[_],m)},f=1;f<e.length;++f)s(f);else for(var h=function(_){var m=c.map();e[_].forEach(function(p){var y=ti(ei(t,e,_,_+1,p,i));m.set(p,y)}),ni(e[_],m)},v=e.length-2;v>=0;--v)h(v)}function ri(t,e){for(var r=ep(t),i=Jv(t,r),s=i,f=0;f++<e;)tp(t,i,f%2===0),Gv(t,i),ii(t,i)<ii(t,s)&&(s=np(i));s.forEach(function(h){h.forEach(function(v,_){t.node(v).depth=_})})}function ep(t){var e=[];return t.nodes().forEach(function(r){for(var i=t.node(r).rank||0;i>=e.length;)e.push([]);e[i].push(r)}),e}function ii(t,e){for(var r=0,i=0;i<e.length-1;++i)r+=nn(t,e[i],e[i+1]);return r}function np(t){var e=[];return t.forEach(function(r){e.push(r.map(function(i){return i}))}),e}function rp(t){typeof t.graph()!="object"&&t.setGraph({}),t.graph().dummyChains=[],t.edges().forEach(function(e){return ip(t,e)})}function ip(t,e){var r=t.edge(e),i=op(t.node(e.v),t.node(e.w));if(i.length===0)return;t.removeEdge(e);var s=e.v;i.forEach(function(h,v){var _="__"+e.v+"_"+e.w+"_"+v;t.hasNode(_)||(h.dummy="edge",t.setNode(_,h),v===0&&t.graph().dummyChains.push(_)),f(s,s=_)}),f(s,e.w);function f(h,v){var _={points:[],value:r.value,origEdge:e,origLabel:r};t.setEdge(h,v,_,e.name)}}function ap(t){var e=t.graph().dummyChains||[];e.forEach(function(r){var i=t.node(r),s=t.inEdges(r).map(function(v){return t.edge(v)});s.forEach(function(v){v.origLabel.dy=v.dy,v.origLabel.x0=v.x0,v.origLabel.y0=v.y0,v.origLabel.r0=v.r0,v.origLabel.d0=v.d0,t.setEdge(v.origEdge,v.origLabel)});for(var f=s.map(function(v){return v.r1}),h;i.dummy;)s=t.outEdges(r).map(function(v){return t.edge(v)}),s.forEach(function(v,_){v.origLabel.points.push({x:(i.x0+i.x1)/2,y:v.y0,d:v.d0,ro:v.r0,ri:f[_]})}),f=s.map(function(v){return v.r1}),h=t.successors(r)[0],t.removeNode(r),i=t.node(r=h);s.forEach(function(v){v.origLabel.x1=v.x1,v.origLabel.y1=v.y1,v.origLabel.r1=v.r1,v.origLabel.d1=v.d1})})}function op(t,e){var r=[],i=t.rank;if(i+1<=e.rank){for(t.backwards&&r.push({rank:i,backwards:!1});++i<e.rank;)r.push({rank:i,backwards:!1});e.backwards&&r.push({rank:i,backwards:!1})}else if(i>e.rank){for(t.backwards||r.push({rank:i,backwards:!0});i-- >e.rank+1;)r.push({rank:i,backwards:!0});e.backwards||r.push({rank:i,backwards:!0})}return r}function ai(t){for(var e=u.max(t,function(m){return m.rank||0})||0,r=u.max(t,function(m){return m.band||0})||0,i=c.nest().key(function(m){return m.rank||0}).key(function(m){return m.band||0}).sortValues(function(m,p){return m.depth-p.depth}).map(t),s=new Array(e+1),f,h=0;h<=e;++h)if(s[h]=new Array(r+1),f=i.get(h),f)for(var v=0;v<=r;++v)s[h][v]=f.get(v)||[];else for(var _=0;_<=r;++_)s[h][_]=[];return s.bandValues=sp(s),s}function sp(t){if(t.length===0||t[0].length===0)return[];for(var e=t[0].length,r=new Array(e),i=0;i<e;i++)r[i]=0;return t.forEach(function(s){s.forEach(function(f,h){var v=u.sum(f,function(_){return _.value});r[h]=Math.max(r[h],v)})}),r}function up(t,e,r){var i=u.max(t.nodes(),function(f){return t.node(f).rank||0})||0,s=(e-r)/i;t.nodes().forEach(function(f){var h=t.node(f);h.x0=s*(h.rank||0),h.x1=h.x0+r})}function fp(t,e){return 1}function oi(){var t=fp;function e(r,i,s){r.forEach(function(f){var h=0;f.forEach(function(v,_){var m=r.bandValues[_]/u.sum(r.bandValues)*i,p=s*m/5,y=m-2*p,x=u.sum(v,function(k){return k.dy}),E=v.map(function(k,A){return k.value&&v[A+1]?t(v[A],v[A+1],e):0}),I=Math.max(0,y-x),P=u.sum(E)?I/u.sum(E):0,L=h+p;v.length===1&&(L+=(y-v[0].dy)/2);var M=Number.MAX_VALUE;v.forEach(function(k,A){k.y=L,k.spaceAbove=M,k.spaceBelow=E[A]*P,L+=k.dy+k.spaceBelow,M=k.spaceBelow,k.data&&k.data.forceY!==void 0&&(k.y=p+k.data.forceY*(y-k.dy))}),v.length>0&&(v[v.length-1].spaceBelow=Number.MAX_VALUE),h+=m})})}return e.separation=function(r){return arguments.length?(t=cp(r),e):t},e}function cp(t){if(typeof t!="function")throw new Error;return t}function si(t,e){t.nodes().forEach(function(r){var i=t.node(r),s=c.map();function f(m,p){if(s.has(m))return s.get(m);var y={id:m,node:i.data,side:p,incoming:[],outgoing:[]};return s.set(m,y),y}t.inEdges(r).forEach(function(m){var p=t.edge(m),y=f(p.targetPortId||"in",i.direction!=="l"?"west":"east");y.incoming.push(m),p.targetPort=y}),t.outEdges(r).forEach(function(m){var p=t.edge(m),y=f(p.sourcePortId||"out",i.direction!=="l"?"east":"west");y.outgoing.push(m),p.sourcePort=y}),i.ports=s.values(),i.ports.sort(e),i.fromElsewhere=i.fromElsewhere||[],i.toElsewhere=i.toElsewhere||[];var h=0;i.fromElsewhere.forEach(function(m){m.x1=i.x0,h+=m.dy});var v={west:h,east:0},_={west:0,east:0};i.ports.forEach(function(m){m.y=v[m.side],m.index=_[m.side],m.dy=Math.max(u.sum(m.incoming,function(y){return t.edge(y).dy}),u.sum(m.outgoing,function(y){return t.edge(y).dy}));var p=m.side==="west"?i.x0:i.x1;m.outgoing.forEach(function(y){var x=t.edge(y);x.x0=p,x.y0=i.y+m.y+x.dy/2}),m.incoming.forEach(function(y){var x=t.edge(y);x.x1=p,x.y1=i.y+m.y+x.dy/2}),v[m.side]+=m.dy,_[m.side]+=1}),i.toElsewhere.forEach(function(m){m.x0=i.x1})})}function ui(t,e,r){if(r===void 0&&(r=!0),e.v===e.w)return Math.PI/2*(r?1:-1);var i=t.edge(e);return Math.atan2(i.y1-i.y0,i.x1-i.x0)}function fi(t,e){t.nodes().forEach(function(r){return lp(t,r)})}function lp(t,e){var r=t.node(e);r.ports.forEach(function(i){i.incoming.sort(ci(t,r,!1)),i.outgoing.sort(ci(t,r,!0))})}function ci(t,e,r){return r===void 0&&(r=!0),function(i,s){var f=ui(t,i,r),h=ui(t,s,r),v=r?1:-1;return i.v===s.v&&i.w===s.w&&Math.abs(f-h)<.001?typeof i.name=="number"&&typeof s.name=="number"?i.name-s.name:typeof i.name=="string"&&typeof s.name=="string"?i.name.localeCompare(s.name):0:Math.abs(f-h)<.001?i.w===s.w?t.node(s.v).y-t.node(i.v).y:i.v===s.v?t.node(s.w).y-t.node(i.w).y:0:v*(f-h)}}function li(t,e){for(var r=null,i=0;i<t.length;++i)if(e(t[i])){r=i;break}return r}function hi(t,e){if(t.length!==0){for(var r=0,i,s=t.length-1;s>=0;--s)i=t[s].dy/2,t[s][e]-i<r&&(t[s][e]=Math.min(t[s].Rmax,r+i)),r=t[s][e]+i;for(var f=t[0].Rmax+t[0].dy/2,h=0;h<t.length;++h)i=t[h].dy/2,t[h][e]+i>f&&(t[h][e]=Math.max(i,f-i)),f=t[h][e]-i}}function di(t){return hp(t),dp(t),t}function hp(t){t.nodes().forEach(function(e){var r=t.node(e),i=r.y,s=r.y;r.fromElsewhere.forEach(function(f){f.y1=s+f.dy/2,f.d1=r.backwards?"l":"r",f.dy=f.dy,s+=f.dy}),r.ports.forEach(function(f){i=r.y+f.y,s=r.y+f.y,f.outgoing.forEach(function(h){var v=t.edge(h);v.y0=i+v.dy/2,v.d0=r.backwards?"l":"r",v.dy=v.dy,i+=v.dy}),f.incoming.forEach(function(h){var v=t.edge(h);v.y1=s+v.dy/2,v.d1=r.backwards?"l":"r",v.dy=v.dy,s+=v.dy})}),r.toElsewhere.forEach(function(f){f.y0=i+f.dy/2,f.d0=r.backwards?"l":"r",f.dy=f.dy,i+=f.dy})})}function dp(t){t.nodes().forEach(function(e){var r=t.node(e);ve(r.toElsewhere,"r0"),ve(r.fromElsewhere,"r1"),r.ports.forEach(function(i){ve(i.outgoing.map(function(s){return t.edge(s)}),"r0"),ve(i.incoming.map(function(s){return t.edge(s)}),"r1")})})}function vp(t){var e=t.x1-t.x0,r=t.y1-t.y0;return t.d0!==t.d1?Math.abs(r)/2.1:r!==0?(e*e+r*r)/Math.abs(4*r):1/0}function ve(t,e){t.forEach(function(f){f.Rmax=vp(f),f[e]=Math.max(f.dy/2,f.d0===f.d1?f.Rmax*.6:5+f.dy/2)});var r=e==="r0"?li(t,function(f){return f.y1>f.y0}):li(t,function(f){return f.y0>f.y1});if(r===null&&(r=t.length),hi(t.slice(r),e),r>0){for(var i=[],s=r-1;s>=0;s--)i.push(t[s]);hi(i,e)}}function vi(t,e,r,i,s,f,h){var v=new Ge({directed:!0,multigraph:!0});return t.nodes.forEach(function(_,m){var p=e(_,m);if(v.hasNode(p))throw new Error("duplicate: "+p);v.setNode(p,{data:_,index:m,backwards:r(_,m),fromElsewhere:_.fromElsewhere||[],toElsewhere:_.toElsewhere||[],x0:_.x0,x1:_.x1,y:_.y0})}),t.links.forEach(function(_,m){var p=pi(i(_,m)),y=pi(s(_,m)),x={data:_,sourcePortId:p.port,targetPortId:y.port,index:m,points:[],value:h(_,m),type:f(_,m)};if(!v.hasNode(p.id))throw new Error("missing: "+p.id);if(!v.hasNode(y.id))throw new Error("missing: "+y.id);v.setEdge(p.id,y.id,x,f(_,m))}),v.setGraph({}),v}function pi(t){return typeof t=="object"?t:{id:t,port:void 0}}function pp(t){return t.nodes}function gp(t){return t.links}function yp(t){return t.id}function _p(t){return t.direction&&t.direction.toLowerCase()==="l"}function mp(t){return{id:typeof t.source=="object"?t.source.id:t.source,port:typeof t.sourcePort=="object"?t.sourcePort.id:t.sourcePort}}function wp(t){return{id:typeof t.target=="object"?t.target.id:t.target,port:typeof t.targetPort=="object"?t.targetPort.id:t.targetPort}}function bp(t){return t.type}function xp(t,e){return t.id.localeCompare(e.id)}function Ep(){var t=pp,e=gp,r=yp,i=_p,s=mp,f=wp,h=bp,v=null,_=[],m=25,p=null,y=xp,x=0,E=0,I=1,P=1,L=1,M=null,k=function(S){return S.value},A=.5,$=oi();function C(){var S={nodes:t.apply(null,arguments),links:e.apply(null,arguments)},B=vi(S,r,i,s,f,h,k);if(rn(B,k),p)B.nodes().forEach(function(W){var V=B.node(W),et=p(V.data);V.x0=et[0],V.x1=et[0]+L,V.y=et[1]}),an(B,M);else{v!==null?z(B,v):(Yv(B,_),ri(B,m)),rp(B),rn(B,k),v===null&&ri(B,m);var j=ai(B.nodes().map(function(W){return B.node(W)}));F(B,j),an(B,M),$(j,P-E,A),up(B,I-x,L),B.nodes().forEach(function(W){var V=B.node(W);V.x0+=x,V.x1+=x,V.y+=E})}return si(B,y),fi(B),di(B),ap(B),gi(B),yi(B),S}C.update=function(S,B){var j=vi(S,r,i,s,f,h,k);rn(j,k);var W=ai(j.nodes().map(function(V){return j.node(V)}));return F(j,W),an(j,M),si(j,y),fi(j),di(j),gi(j),yi(j),S},C.nodes=function(S){return arguments.length?(t=pt(S),C):t},C.links=function(S){return arguments.length?(e=pt(S),C):e},C.nodeId=function(S){return arguments.length?(r=pt(S),C):r},C.nodeBackwards=function(S){return arguments.length?(i=pt(S),C):i},C.sourceId=function(S){return arguments.length?(s=pt(S),C):s},C.targetId=function(S){return arguments.length?(f=pt(S),C):f},C.linkType=function(S){return arguments.length?(h=pt(S),C):h},C.sortPorts=function(S){return arguments.length?(y=pt(S),C):y};function F(S,B){if(M===null){var j=u.sum(B.bandValues);j<=0?M=1:(M=(P-E)/j,A!==1&&(M*=1-A))}}C.ordering=function(S){return arguments.length?(v=S,C):v},C.rankSets=function(S){return arguments.length?(_=S,C):_},C.nodeWidth=function(S){return arguments.length?(L=S,C):L},C.nodePosition=function(S){return arguments.length?(p=S,C):p},C.size=function(S){return arguments.length?(x=E=0,I=+S[0],P=+S[1],C):[I-x,P-E]},C.extent=function(S){return arguments.length?(x=+S[0][0],E=+S[0][1],I=+S[1][0],P=+S[1][1],C):[[x,E],[I,P]]},C.whitespace=function(S){return arguments.length?(A=S,C):A},C.scale=function(S){return arguments.length?(M=S,C):M},C.linkValue=function(S){return arguments.length?(k=S,C):k},C.verticalLayout=function(S){return arguments.length?($=pt(S),C):$};function z(S,B){B.forEach(function(j,W){j.forEach(function(V,et){if(V.forEach)V.forEach(function(G,St){var yt=S.node(G);yt&&(yt.rank=W,yt.band=et,yt.depth=St)});else{var X=S.node(V);X&&(X.rank=W,X.depth=et)}})})}return C}function rn(t,e){t.nodes().forEach(function(r){var i=t.node(r),s=u.sum(t.inEdges(r),function(h){return t.edge(h).value}),f=u.sum(t.outEdges(r),function(h){return t.edge(h).value});s+=u.sum(i.fromElsewhere||[],function(h){return e(h)}),f+=u.sum(i.toElsewhere||[],function(h){return e(h)}),i.value=Math.max(s,f)})}function an(t,e){t.edges().forEach(function(r){var i=t.edge(r);i.dy=i.value*e}),t.nodes().forEach(function(r){var i=t.node(r);i.dy=i.value*e,i.fromElsewhere=i.fromElsewhere||[],i.toElsewhere=i.toElsewhere||[],i.fromElsewhere.forEach(function(s){s.dy=s.value*e,s.source={id:"__from_elsewhere_"+r},s.target=i.data}),i.toElsewhere.forEach(function(s){s.dy=s.value*e,s.source=i.data,s.target={id:"__to_elsewhere_"+r}})})}function pt(t){if(typeof t!="function")throw new Error;return t}function gi(t){t.edges().forEach(function(e){var r=t.edge(e);r.points.unshift({x:r.x0,y:r.y0,ro:r.r0,d:r.d0}),r.points.push({x:r.x1,y:r.y1,ri:r.r1,d:r.d1})}),t.nodes().forEach(function(e){var r=t.node(e);r.fromElsewhere.forEach(function(i){i.points=[{x:i.x1,y:i.y1,ri:i.r1,d:i.d1,style:"down-right"}]}),r.toElsewhere.forEach(function(i){i.points=[{x:i.x0,y:i.y0,ri:i.r0,d:i.d0,style:"right-down"}]})})}function yi(t,e){t.nodes().forEach(function(r){var i=t.node(r);i.data.incoming=[],i.data.outgoing=[],i.data.ports=i.ports,i.data.ports.forEach(function(s){s.incoming=[],s.outgoing=[]}),i.data.dy=i.dy,i.data.x0=i.x0,i.data.x1=i.x1,i.data.y0=i.y,i.data.y1=i.y+i.dy,i.data.rank=i.rank,i.data.band=i.band,i.data.depth=i.depth,i.data.value=i.value,i.data.spaceAbove=i.spaceAbove,i.data.spaceBelow=i.spaceBelow}),t.edges().forEach(function(r){var i=t.edge(r);i.data.source=t.node(r.v).data,i.data.target=t.node(r.w).data,i.data.sourcePort=i.sourcePort,i.data.targetPort=i.targetPort,i.data.source.outgoing.push(i.data),i.data.target.incoming.push(i.data),i.data.sourcePort&&i.data.sourcePort.outgoing.push(i.data),i.data.targetPort&&i.data.targetPort.incoming.push(i.data),i.data.value=i.value,i.data.type=i.type,i.data.dy=i.dy,i.data.points=i.points||[]})}function Ap(){var t=25,e=8;function r(i,s){v(),p();for(var f=1,h=t;h>0;--h)m(f*=.99),p(),_(f),p();function v(){i.forEach(function(y){var x=0;y.forEach(function(E){E.forEach(function(I){I.y=x++})})})}function _(y){i.forEach(function(E){E.forEach(function(I){I.forEach(function(P){var L=P.incoming||P.edges;if(L.length){var M=u.sum(L,x)/u.sum(L,_i);P.y+=(M-pe(P))*y}})})});function x(E){return pe(E.source)*E.value}}function m(y){i.slice().reverse().forEach(function(E){E.forEach(function(I){I.forEach(function(P){var L=P.outgoing||P.edges;if(L.length){var M=u.sum(L,x)/u.sum(L,_i);P.y+=(M-pe(P))*y}})})});function x(E){return pe(E.target)*E.value}}function p(){i.forEach(function(y){y.forEach(function(x){var E,I,P=0,L=x.length,M;for(x.sort(Tp),M=0;M<L;++M)E=x[M],I=P-E.y,I>0&&(E.y+=I),P=E.y+E.dy+e;if(I=P-e-s,I>0)for(P=E.y-=I,M=L-2;M>=0;--M)E=x[M],I=E.y+E.dy+e-P,I>0&&(E.y-=I),P=E.y})})}}return r.iterations=function(i){return arguments.length?(t=+i,r):t},r.padding=function(i){return arguments.length?(e=+i,r):e},r}function pe(t){return t.y+t.dy/2}function _i(t){return t.value}function Tp(t,e){return t.y-e.y}function Mp(t){return t.dy===0?0:2}function mi(){var t=Mp;function e(p){var y=p.x1-p.x0,x=p.y1-p.y0,E=p.dy/2,I=(y*y+x*x)/Math.abs(4*x);return[E,I]}function r(p){if(p.points.length===1)return m(p);for(var y="",x,E=0;E<p.points.length-1;++E)x={x0:p.points[E].x,y0:p.points[E].y,x1:p.points[E+1].x,y1:p.points[E+1].y,r0:p.points[E].ro,r1:p.points[E+1].ri,d0:p.points[E].d,d1:p.points[E+1].d,dy:p.dy},y+=i(x);return y}function i(p){var y=(p.d0||"r")+(p.d1||"r");if(p.source&&p.source===p.target)return s(p);if(y==="rl")return f(p);if(y==="rd")return h(p);if(y==="dr")return v(p);if(y==="lr")return _(p);var x=Math.max(t(p),p.dy)/2,E=p.x0,I=p.x1,P=p.y0,L=p.y1;if(I<E){var M;M=[I,E],E=M[0],I=M[1];var k;k=[L,P],P=k[0],L=k[1]}var A=L>P?1:-1,$=1,C=e(p),F=Math.max(C[0],Math.min(C[1],(I-E)/3)),z=Math.max(C[0],Math.min(C[1],p.r0||F)),S=Math.max(C[0],Math.min(C[1],p.r1||F)),B=I-E,j=L-P-A*(z+S),W=Math.sqrt(B*B+j*j),V=-A*Math.acos(Math.min(1,(z+S)/W)),et=Math.atan2(j,B),X=Math.PI/2+A*(et+V),G=x*A*Math.sin(X),St=x*Math.cos(X),yt=E+$*z*Math.sin(Math.abs(X)),un=I-$*S*Math.sin(Math.abs(X)),fn=P+z*A*(1-Math.cos(X)),cn=L-S*A*(1-Math.cos(X));(isNaN(X)||Math.abs(X)<.001)&&(X=z=S=0,yt=E,un=I,fn=P,cn=L,G=0,St=x);function ge(xi,ln){var Np=xi*(L-P)>0?1:0,hn=$*xi*(L-P)>0?ln+x:ln-x;return X===0&&(hn=ln),"A"+hn+" "+hn+" "+Math.abs(X)+" 0 "+Np+" "}var ye;return ye="M"+[E,P-x]+" "+ge(1,z)+[yt+G,fn-St]+" L"+[un+G,cn-St]+" "+ge(-1,S)+[I,L-x]+" L"+[I,L+x]+" "+ge(1,S)+[un-G,cn+St]+" L"+[yt-G,fn+St]+" "+ge(-1,z)+[E,P+x]+" Z",/NaN/.test(ye)&&console.error("path NaN",p,ye),ye}function s(p){var y=Math.max(t(p),p.dy)/2,x=y*1.5,E=2*Math.PI,I=p.x0,P=p.y0;function L(M){var k=M>0?1:0,A=M>0?x+y:x-y;return"A"+A+" "+A+" "+Math.abs(E)+" 1 "+k+" "}return"M"+[I+.1,P-y]+" "+L(1)+[I-.1,P-y]+" L"+[I-.1,P+y]+" "+L(-1)+[I+.1,P+y]+" Z"}function f(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,I=p.y0,P=p.y1,L=p.x1-p.x0,M=p.y1-p.y0,k=(p.r0+p.r1)/2||5+y,A=Math.min(Math.abs(P-I)/2.1,k),$=Math.atan2(M-2*A,L),C=p.y1>p.y0?1:-1,F=y*Math.sin($),z=y*Math.cos($),S=p.x0+A*Math.sin(Math.abs($)),B=p.x1+A*Math.sin(Math.abs($)),j=p.y0+A*C*(1-Math.cos($)),W=p.y1-A*C*(1-Math.cos($));function V(et){var X=et*$>0?1:0,G=et*$>0?A+y:A-y;return $===0&&(G=A),"A"+G+" "+G+" "+Math.abs($)+" 0 "+X+" "}return"M"+[x,I-y]+" "+V(1)+[S+F,j-z]+" L"+[B+F,W-z]+" "+V(1)+[E,P+y]+" L"+[E,P-y]+" "+V(-1)+[B-F,W+z]+" L"+[S-F,j+z]+" "+V(-1)+[x,I+y]+" Z"}function h(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,I=p.y0,P=p.y1;p.x1-p.x0,p.y1-p.y0;var L=Math.PI/2,M=Math.max(0,E-x);p.y1>p.y0;var k=I+M;function A($){var C=$*L>0?1:0,F=$*L>0?M+y:M-y;return L===0&&(F=M),"A"+F+" "+F+" "+Math.abs(L)+" 0 "+C+" "}return"M"+[x,I-y]+" "+A(1)+[E+y,k]+" L"+[E+y,P]+" "+[E-y,P]+" "+[E-y,k]+" "+A(-1)+[x,I+y]+" Z"}function v(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,I=p.y0,P=p.y1;p.x1-p.x0,p.y1-p.y0;var L=Math.PI/2,M=Math.max(0,E-x);p.y1>p.y0;var k=P-M;function A($){var C=$*L>0?1:0,F=$*L>0?M+y:M-y;return L===0&&(F=M),"A"+F+" "+F+" "+Math.abs(L)+" 0 "+C+" "}return"M"+[x-y,I]+" L"+[x+y,I]+" "+[x+y,k]+" "+A(-1)+[E,P-y]+" L"+[E,P+y]+" "+A(1)+[x-y,k]+" Z"}function _(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,I=p.y0,P=p.y1,L=p.x1-p.x0,M=p.y1-p.y0,k=(p.r0+p.r1)/2||5+y,A=Math.min(Math.abs(M)/2.1,k),$=Math.atan2(M-2*A,L),C=p.y1>p.y0?1:-1,F=y*Math.sin($),z=y*Math.cos($),S=p.x0-A*Math.sin(Math.abs($)),B=p.x1-A*Math.sin(Math.abs($)),j=p.y0+A*C*(1-Math.cos($)),W=p.y1-A*C*(1-Math.cos($));function V(et){var X=et*$>0?1:0,G=-et*$>0?A+y:A-y;return $===0&&(G=A),"A"+G+" "+G+" "+Math.abs($)+" 0 "+X+" "}return"M"+[x,I-y]+" "+V(-1)+[S-F,j-z]+" L"+[B-F,W-z]+" "+V(-1)+[E,P+y]+" L"+[E,P-y]+" "+V(1)+[B+F,W-z]+" L"+[S+F,j-z]+" "+V(1)+[x,I+y]+" Z"}function m(p){var y=p.points[0],x=Math.max(t(p),p.dy)/2;if(y.style==="down-right")return"M"+[y.x-20,y.y-x]+" L"+[y.x,y.y-x]+" L"+[y.x,y.y+x]+" L"+[y.x-20,y.y+x]+" Z";if(y.style==="right-down")return"M"+[y.x,y.y-x]+" L"+[y.x+20,y.y-x]+" L"+[y.x+20,y.y+x]+" L"+[y.x,y.y+x]+" Z"}return r.minWidth=function(p){return arguments.length?(t=Sp(p),r):t},r}function Sp(t){if(typeof t!="function")throw new Error;return t}var wi=function(){var t=function(s){return s.title!==void 0?s.title:s.id},e=function(s){return null},r=function(s){return!!t(s)};function i(s){var f=s.selection?s.selection():s;f.select("text").empty()&&(f.append("title"),f.append("line").attr("x1",0).attr("x2",0),f.append("rect").attr("class","node-body"),f.append("text").attr("class","node-value").attr("dy",".35em").attr("text-anchor","middle"),f.append("text").attr("class","node-title").attr("dy",".35em"),f.append("rect").attr("class","node-click-target").attr("x",-5).attr("y",-5).attr("width",10).style("fill","none").style("visibility","hidden").style("pointer-events","all"),f.attr("transform",bi)),f.each(function(h){var v=d.select(this).select("title"),_=d.select(this).select(".node-value"),m=d.select(this).select(".node-title"),p=d.select(this).select("line"),y=d.select(this).select(".node-body"),x=d.select(this).select(".node-click-target"),E=Cp(h);E.dy=h.y0===h.y1?0:Math.max(1,h.y1-h.y0);var I=h.x1-h.x0>2,P=t(h)+(!I&&e(h)?" ("+e(h)+")":"");v.text(P),_.text(e).style("display",I?"inline":"none"),m.attr("text-anchor",E.right?"end":"start").text(P).each(Op,100),s!==f&&(m=m.transition(s),p=p.transition(s),y=y.transition(s),x=x.transition(s)),s.attr("transform",bi),p.attr("y1",function(M){return E.titleAbove?-5:0}).attr("y2",function(M){return E.dy}).style("display",function(M){return M.y0===M.y1||!r(M)?"none":"inline"}),x.attr("height",function(M){return E.dy+5}),y.attr("width",function(M){return M.x1-M.x0}).attr("height",function(M){return E.dy}),m.attr("transform",L).style("display",function(M){return M.y0===M.y1||!r(M)?"none":"inline"}),_.style("font-size",function(M){return Math.min(M.x1-M.x0-4,M.y1-M.y0-4)+"px"}).attr("transform",function(M){var k=M.x1-M.x0,A=M.y1-M.y0,$=k>A?0:-90;return"translate("+k/2+","+A/2+") rotate("+$+")"});function L(M){var k=E,A=k.titleAbove?-10:(M.y1-M.y0)/2,$;return k.titleAbove?$=k.right?4:-4:$=k.right?-4:M.x1-M.x0+4,"translate("+$+","+A+")"}})}return i.nodeVisible=function(s){return arguments.length?(r=on(s),i):r},i.nodeTitle=function(s){return arguments.length?(t=on(s),i):t},i.nodeValue=function(s){return arguments.length?(e=on(s),i):e},i};function bi(t){return"translate("+t.x0+","+t.y0+")"}function Cp(t){var e=!1,r=!1;return t.spaceAbove>20&&t.style!=="type"?e=!0:e=!1,t.incoming.length===0?(r=!0,e=!1):t.outgoing.length===0&&(r=!1,e=!1),{titleAbove:e,right:r}}function Op(t,e){var r=d.select(this),i=r.text().split(/\n/),s=1.1;i.length!==1&&(r.text(null),i.forEach(function(f,h){r.append("tspan").attr("x",0).attr("dy",(h===0?.7-i.length/2:1)*s+"em").text(f)}))}function on(t){if(typeof t!="function")throw new Error;return t}function Ip(t,e){var r={top:Number.MAX_VALUE,left:Number.MAX_VALUE,bottom:0,right:0};return e.nodes.forEach(function(i){var s=t.get(i);s&&(s.x0<r.left&&(r.left=s.x0),s.x1>r.right&&(r.right=s.x1),s.y0<r.top&&(r.top=s.y0),s.y1>r.bottom&&(r.bottom=s.y1))}),e.rect=r,e}function sn(t,e,r){return function(i){var s=[],f=t(i.source),h=t(i.target),v=e(i);return s.push(f+" → "+h),v&&s.push(v),s.push(r(i.value)),s.join(`
`)}}function Pp(){var t={top:0,right:0,bottom:0,left:0},e=null,r=[],i=b.format(".3s"),s=wi(),f=mi(),h=function(A){return null},v=sn(s.nodeTitle(),function(A){return A.type},i),_=$p,m=w.dispatch("selectNode","selectGroup","selectLink");function p(A){var $=A.selection?A.selection():A;$.each(function(C){var F=d.select(this),z=F.selectAll(".sankey").data([{type:"sankey"}]),S=z.enter().append("g").classed("sankey",!0);S.append("g").classed("groups",!0),S.append("g").classed("links",!0),S.append("g").classed("nodes",!0),S.append("g").classed("slice-titles",!0),z=z.merge(S),z.attr("transform","translate("+t.left+","+t.top+")");var B=c.map(C.nodes,function(V){return V.id}),j=(r||[]).map(function(V){return Ip(B,V)}),W=Array.from(C.links);C.nodes.forEach(function(V){Array.prototype.push.apply(W,V.fromElsewhere||[]),Array.prototype.push.apply(W,V.toElsewhere||[])}),y(z,A,C.nodes),x(z,A,W),E(F,j),F.on("click",function(){m.call("selectNode",this,null),m.call("selectLink",this,null)})})}function y(A,$,C){var F=A.select(".nodes").selectAll(".node").data(C,function(z){return z.id});F.exit().remove(),F=F.merge(F.enter().append("g").attr("class","node").call(s).on("click",k)),$ instanceof g.transition?F.transition($).call(s):F.call(s)}function x(A,$,C){var F=A.select(".links").selectAll(".link").data(C,function(S){return S.source.id+"-"+S.target.id+"-"+S.type});F.exit().remove();var z=F.enter().append("g").attr("class","link").on("click",M);z.append("path").attr("d",f).style("fill","white").each(function(S){this._current=S}),z.append("title"),z.append("text").attr("class","label").attr("dy","0.35em").attr("x",function(S){return S.points[0].x+4}).attr("y",function(S){return S.points[0].y}),F=F.merge(z),F.classed("selected",function(S){return S.id===e}),F.sort(L),$ instanceof g.transition?(F=F.transition($),F.select("path").style("fill",h).each(function(S){d.select(this).transition($).attrTween("d",I)})):F.select("path").style("fill",h).attr("d",f),F.select("title").text(v),F.select(".label").text(_).attr("x",function(S){return S.points[0].x+4}).attr("y",function(S){return S.points[0].y})}function E(A,$){var C=A.select(".groups").selectAll(".group").data($);C.exit().remove();var F=C.enter().append("g").attr("class","group");F.append("rect"),F.append("text").attr("x",-10).attr("y",-25),C=C.merge(F),C.style("display",function(z){return z.title?"inline":"none"}).attr("transform",function(z){return"translate("+z.rect.left+","+z.rect.top+")"}).select("rect").attr("x",-10).attr("y",-20).attr("width",function(z){return z.rect.right-z.rect.left+20}).attr("height",function(z){return z.rect.bottom-z.rect.top+30}),C.select("text").text(function(z){return z.title})}function I(A){A.points.forEach(function(F){F.ri>1e3&&(F.ri=1e3),F.ro>1e3&&(F.ro=1e3)});var $=l.interpolate(P(this._current),A),C=this;return function(F){return C._current=$(F),f(C._current)}}function P(A){return{points:A.points,dy:A.dy}}function L(A,$){return A.id===e?1:$.id===e||!A.source||A.target&&A.target.direction==="d"?-1:!$.source||$.target&&$.target.direction==="d"?1:!A.target||A.source&&A.source.direction==="d"?-1:!$.target||$.source&&$.source.direction==="d"?1:A.dy-$.dy}function M(A){d.event.stopPropagation();var $=d.select(this).node();m.call("selectLink",$,A)}function k(A){d.event.stopPropagation();var $=d.select(this).node();m.call("selectNode",$,A)}return p.margins=function(A){return arguments.length?(t={top:A.top===void 0?t.top:A.top,left:A.left===void 0?t.left:A.left,bottom:A.bottom===void 0?t.bottom:A.bottom,right:A.right===void 0?t.right:A.right},this):t},p.groups=function(A){return arguments.length?(r=A,this):r},p.nodeTitle=function(A){return arguments.length?(s.nodeTitle(A),v=sn(A,function($){return $.type},i),this):s.nodeTitle()},p.nodeValue=function(A){return arguments.length?(s.nodeValue(A),this):s.nodeValue()},p.linkTitle=function(A){return arguments.length?(v=A,this):v},p.linkLabel=function(A){return arguments.length?(_=A,this):_},p.linkColor=function(A){return arguments.length?(h=A,this):h},p.linkMinWidth=function(A){return arguments.length?(f.minWidth(A),this):f.minWidth()},p.selectNode=function(A){return this},p.selectLink=function(A){return e=A,this},p.on=function(){var A=m.on.apply(m,arguments);return A===m?p:A},p}function $p(t){return null}o.sankey=Ep,o.sankeyPositionJustified=oi,o.sankeyPositionRelaxation=Ap,o.sankeyLink=mi,o.sankeyNode=wi,o.sankeyDiagram=Pp,o.sankeyLinkTitle=sn,Object.defineProperty(o,"__esModule",{value:!0})}))})(Kt,Kt.exports)),Kt.exports}var Li=M0();const S0={messages:{en:{total:"total",showChanges:"Only show changes"},de:{total:"Insgesamt",showChanges:"Nur Änderungen zeigen"}}},C0=Lp({name:"SankeyPlugin",i18n:S0,props:{root:{type:String,required:!0},subfolder:{type:String,required:!0},yamlConfig:String,thumbnail:Boolean,config:Object},data(){return{globalState:Ai.state,vizDetails:{csv:"",dataset:"",title:"",description:""},loadingText:"",jsonChart:{},totalTrips:0,cleanConfigId:`sankey-${Math.floor(1e12*Math.random())}`,onlyShowChanges:!1,csvData:[],colorRamp:[],textSize:0,resizeObserver:null}},computed:{fileApi(){return new Ng(this.fileSystem,Ai)},fileSystem(){const n=this.$store.state.svnProjects.filter(a=>a.slug===this.root);if(n.length===0)throw console.log("no such project"),Error;return n[0]}},watch:{"globalState.resizeEvents"(){this.changeDimensions()},yamlConfig(){this.getVizDetails()},subfolder(){this.getVizDetails()},onlyShowChanges(){this.jsonChart=this.processInputs(),this.doD3()}},methods:{changeDimensions(){const n=document.querySelector(`#${this.cleanConfigId}`);n&&(this.textSize=n.clientWidth>900?2:n.clientWidth>600?1:0),this.jsonChart?.nodes&&this.doD3()},async getVizDetails(){if(this.config){this.vizDetails=Object.assign({},this.config),this.$emit("title",this.vizDetails.title);return}this.loadingText="Loading config...";const n=this.yamlConfig??"",a=n.indexOf("/")>-1?n:this.subfolder+"/"+n,o=await this.fileApi.getFileText(a);this.vizDetails=Rp.parse(o),this.$emit("title",this.vizDetails.title)},async loadFiles(){const n=this.vizDetails.csv||this.vizDetails.dataset;if(!n)return this.$emit("error",'YAML must specify csv "dataset" filename'),[];this.loadingText="Loading files...";let a;try{a=await this.fileApi.getFileText(this.subfolder+"/"+n)}catch{return this.$emit("error","File not found: "+this.subfolder+"/"+n),[]}try{return $g.parse(a,{header:!1,dynamicTyping:!0,skipEmptyLines:!0,delimitersToGuess:["	",";",","," "],comments:"#"}).data}catch(o){const u=o;console.error({e:u}),this.loadingText=""+u,this.$emit("error","File loaded but could not parse: "+this.subfolder+"/"+this.vizDetails.csv)}return[]},processInputs(){this.loadingText="Building node graph...";const n=[],a=[],o=[];this.totalTrips=0;try{for(const T of this.csvData.slice(1)){n.includes(T[0])||n.push(T[0]),a.includes(T[1])||a.push(T[1]);const N=T[2];if(N!==0){if(N<0){console.warn("Data contains NEGATIVE numbers!!!");continue}this.onlyShowChanges&&T[0]===T[1]||(o.push([T[0],T[1],N]),this.totalTrips+=N)}}}catch(T){console.error(T)}const u=[],c=[],l={nodes:[],links:[],ordering:[[u],[c]]},d={},g={};n.forEach((T,N)=>{l.nodes.push({id:N,title:T}),d[T]=N,u.push(N)}),a.forEach((T,N)=>{const O=N+n.length;l.nodes.push({id:O,title:T}),g[T]=O,c.push(O)});for(const T of o)l.links.push({source:d[T[0]],target:g[T[1]],value:T[2]});const w=n.length,b=[...Array(w).keys()].map(T=>Lg(T/w).replace(/rgb(.*)\)/,"rgba$1, 0.7)"));return this.colorRamp=b,l},getMaxLabelWidth(){const a=document.createElement("canvas").getContext("2d");if(!a)return 120;a.font=this.textSize==2?"bold 33px Arial":this.textSize==1?"24px Arial":"16px Arial";let o=0;for(const u of this.jsonChart.nodes){const c=u.title,l=a.measureText(c).width;o=Math.max(o,l)}return o},doD3(){const n=this.jsonChart;let a=document.querySelector(`#${this.cleanConfigId}`),o=a?a.clientWidth:100,u=a?a.clientHeight:100,c=10+this.getMaxLabelWidth();const l=Li.sankey().nodeWidth(8).ordering(n.ordering).extent([[c,0],[o-c,u]]),d=Li.sankeyDiagram().linkColor(g=>this.colorRamp[g.source.id]);In("#"+this.cleanConfigId).datum(l(n)).call(d).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${o} ${u}`)}},beforeDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()},async mounted(){try{await this.getVizDetails(),this.csvData=await this.loadFiles(),this.jsonChart=this.processInputs()}catch(a){this.$emit("error",""+a)}this.resizeObserver=new ResizeObserver(()=>{this.changeDimensions()});const n=document.querySelector(`#${this.cleanConfigId}`);n&&this.resizeObserver.observe(n),this.doD3()}});var O0=function(){var a=this,o=a._self._c;return a._self._setupProxy,o("div",{staticClass:"sankey-container",class:{"is-thumbnail":a.thumbnail,"is-large":a.textSize==2,"is-medium":a.textSize==1}},[o("svg",{staticClass:"chart-area",class:{"is-thumbnail":a.thumbnail},attrs:{id:a.cleanConfigId}}),a.thumbnail?a._e():o("div",{staticClass:"labels"},[o("p",{staticClass:"center"},[o("b",[a._v(a._s(a.totalTrips.toLocaleString())+" "+a._s(a.$t("total")))])])]),a.thumbnail?a._e():o("b-switch",{staticClass:"switcher",attrs:{size:"is-small"},model:{value:a.onlyShowChanges,callback:function(u){a.onlyShowChanges=u},expression:"onlyShowChanges"}},[a._v(a._s(a.$t("showChanges")))])],1)},I0=[],P0=Dp(C0,O0,I0,!1,null,"860e2bb7");const W0=P0.exports;export{W0 as default};
