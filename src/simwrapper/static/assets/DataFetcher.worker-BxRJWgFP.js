(function(){"use strict";const mt="AAK"+Object.keys({light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/vsp-tu-berlin/ckek59op0011219pbwfar1rex",transparentLight:"mapbox://styles/vsp-tu-berlin/clgxnk7m500dt01p687w8e693",transparentDark:"mapbox://styles/vsp-tu-berlin/clgwrqa0w00av01pg5jox0a35"}).length+"QRQ0EldfvmCW4Cyu";var le=(b=>(b[b.NUMBER=0]="NUMBER",b[b.STRING=1]="STRING",b[b.BOOLEAN=2]="BOOLEAN",b[b.DATE=3]="DATE",b[b.LOOKUP=4]="LOOKUP",b[b.UNKNOWN=5]="UNKNOWN",b))(le||{});function ur(){return this._source.cancel()}function yt(b){return/^[nf]$/i.test(b)?!1:/^[yt]$/i.test(b)?!0:null}function bt(b){return new Date(+b.substring(0,4),b.substring(4,6)-1,+b.substring(6,8))}function de(b){return!(b=b.trim())||isNaN(b=+b)?null:b}function At(b){return b.trim()||null}var lr={B:de,C:At,D:bt,F:de,L:yt,M:de,N:de};function cr(){var b=this,f=1;return b._source.slice(b._recordLength).then(function(h){return h&&h[0]!==26?{done:!1,value:b._fields.reduce(function(l,g){return l[g.name]=lr[g.type](b._decode(h.subarray(f,f+=g.length))),l},{})}:{done:!0,value:void 0}})}var Et={B:de,C:At,D:bt,F:de,L:yt,M:de,N:de};const fr={B:le.NUMBER,C:le.STRING,D:le.DATE,F:le.NUMBER,L:le.BOOLEAN,M:le.NUMBER,N:le.NUMBER};function hr(b,f){const h=new Uint8Array(b),l=new DataView(b.slice(0,32)),g=l.getUint16(8,!0),i=new DataView(b.slice(32,g)),e=new _t(h,f,l,i),t={},n=Math.round((h.byteLength-g-1)/e._recordLength);e._fields.length;for(const d of e._fields){const a=fr[d.type],N={values:Et[d.type]===de?new Float32Array(n):[],name:d.name,type:a};t[d.name]=N}let r=0;const s=h.byteLength;try{for(;;){const d=g+r*e._recordLength;if(d+e._recordLength>s)break;const a=h.slice(d,d+e._recordLength);if(a&&a[0]!==26){let R=1;e._fields.reduce(function(N,x){const L=Et[x.type](e._decode(a.slice(R,R+x.length)));t[x.name].values[r]=L,R=R+x.length},{})}else break;r++}}catch(d){console.warn(d)}return console.log("dbf total records",r),t}function _t(b,f,h,l){this._source=b,this._decode=f.decode.bind(f),this._recordLength=h.getUint16(10,!0),this._fields=[];for(var g=0;l.getUint8(g)!==13;g+=32){for(var i=0;i<11&&l.getUint8(g+i)!==0;++i);this._fields.push({name:this._decode(new Uint8Array(l.buffer,l.byteOffset+g,i)),type:String.fromCharCode(l.getUint8(g+11)),length:l.getUint8(g+16)})}}var Rt=_t.prototype;Rt.read=cr,Rt.cancel=ur;function xe(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}function dr(b){if(Object.prototype.hasOwnProperty.call(b,"__esModule"))return b;var f=b.default;if(typeof f=="function"){var h=function l(){return this instanceof l?Reflect.construct(f,arguments,this.constructor):f.apply(this,arguments)};h.prototype=f.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(b).forEach(function(l){var g=Object.getOwnPropertyDescriptor(b,l);Object.defineProperty(h,l,g.get?g:{enumerable:!0,get:function(){return b[l]}})}),h}var Re={exports:{}};/* @license
Papa Parse
v5.3.2
https://github.com/mholt/PapaParse
License: MIT
*/var pr=Re.exports,vt;function gr(){return vt||(vt=1,(function(b,f){(function(h,l){b.exports=l()})(pr,function h(){var l=typeof self<"u"?self:typeof window<"u"?window:l!==void 0?l:{},g=!l.document&&!!l.postMessage,i=g&&/blob:/i.test((l.location||{}).protocol),e={},t=0,n={},r=[];if(n.parse=function(o,u){var v=(u=u||{}).dynamicTyping||!1;if(w(v)&&(u.dynamicTypingFunction=v,v={}),u.dynamicTyping=v,u.transform=!!w(u.transform)&&u.transform,u.worker&&n.WORKERS_SUPPORTED){var C=(function(){if(!n.WORKERS_SUPPORTED)return!1;var k=(q=l.URL||l.webkitURL||null,G=h.toString(),n.BLOB_URL||(n.BLOB_URL=q.createObjectURL(new Blob(["(",G,")();"],{type:"text/javascript"})))),I=new l.Worker(k),q,G;return I.onmessage=m,I.id=t++,e[I.id]=I})();return C.userStep=u.step,C.userChunk=u.chunk,C.userComplete=u.complete,C.userError=u.error,u.step=w(u.step),u.chunk=w(u.chunk),u.complete=w(u.complete),u.error=w(u.error),delete u.worker,void C.postMessage({input:o,config:u,workerId:C.id})}var y=null;return n.NODE_STREAM_INPUT,typeof o=="string"?y=u.download?new a(u):new N(u):o.readable===!0&&w(o.read)&&w(o.on)?y=new x(u):(l.File&&o instanceof File||o instanceof Object)&&(y=new R(u)),y.stream(o)},n.unparse=function(o,u){var v=!1,C=!0,y=",",k=`\r
`,I='"',q=I+I,G=!1,P=null,Q=!1;(function(){if(typeof u=="object"){if(typeof u.delimiter!="string"||n.BAD_DELIMITERS.filter(function(M){return u.delimiter.indexOf(M)!==-1}).length||(y=u.delimiter),(typeof u.quotes=="boolean"||typeof u.quotes=="function"||Array.isArray(u.quotes))&&(v=u.quotes),typeof u.skipEmptyLines!="boolean"&&typeof u.skipEmptyLines!="string"||(G=u.skipEmptyLines),typeof u.newline=="string"&&(k=u.newline),typeof u.quoteChar=="string"&&(I=u.quoteChar),typeof u.header=="boolean"&&(C=u.header),Array.isArray(u.columns)){if(u.columns.length===0)throw new Error("Option columns is empty");P=u.columns}u.escapeChar!==void 0&&(q=u.escapeChar+I),(typeof u.escapeFormulae=="boolean"||u.escapeFormulae instanceof RegExp)&&(Q=u.escapeFormulae instanceof RegExp?u.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var B=new RegExp(c(I),"g");if(typeof o=="string"&&(o=JSON.parse(o)),Array.isArray(o)){if(!o.length||Array.isArray(o[0]))return $(null,o,G);if(typeof o[0]=="object")return $(P||Object.keys(o[0]),o,G)}else if(typeof o=="object")return typeof o.data=="string"&&(o.data=JSON.parse(o.data)),Array.isArray(o.data)&&(o.fields||(o.fields=o.meta&&o.meta.fields||P),o.fields||(o.fields=Array.isArray(o.data[0])?o.fields:typeof o.data[0]=="object"?Object.keys(o.data[0]):[]),Array.isArray(o.data[0])||typeof o.data[0]=="object"||(o.data=[o.data])),$(o.fields||[],o.data||[],G);throw new Error("Unable to serialize unrecognized input");function $(M,ee,T){var S="";typeof M=="string"&&(M=JSON.parse(M)),typeof ee=="string"&&(ee=JSON.parse(ee));var j=Array.isArray(M)&&0<M.length,W=!Array.isArray(ee[0]);if(j&&C){for(var ne=0;ne<M.length;ne++)0<ne&&(S+=y),S+=re(M[ne],ne);0<ee.length&&(S+=k)}for(var K=0;K<ee.length;K++){var X=j?M.length:ee[K].length,Y=!1,oe=j?Object.keys(ee[K]).length===0:ee[K].length===0;if(T&&!j&&(Y=T==="greedy"?ee[K].join("").trim()==="":ee[K].length===1&&ee[K][0].length===0),T==="greedy"&&j){for(var V=[],J=0;J<X;J++){var U=W?M[J]:J;V.push(ee[K][U])}Y=V.join("").trim()===""}if(!Y){for(var z=0;z<X;z++){0<z&&!oe&&(S+=y);var he=j&&W?M[z]:z;S+=re(ee[K][he],z)}K<ee.length-1&&(!T||0<X&&!oe)&&(S+=k)}}return S}function re(M,ee){if(M==null)return"";if(M.constructor===Date)return JSON.stringify(M).slice(1,25);var T=!1;Q&&typeof M=="string"&&Q.test(M)&&(M="'"+M,T=!0);var S=M.toString().replace(B,q);return(T=T||v===!0||typeof v=="function"&&v(M,ee)||Array.isArray(v)&&v[ee]||(function(j,W){for(var ne=0;ne<W.length;ne++)if(-1<j.indexOf(W[ne]))return!0;return!1})(S,n.BAD_DELIMITERS)||-1<S.indexOf(y)||S.charAt(0)===" "||S.charAt(S.length-1)===" ")?I+S+I:S}},n.RECORD_SEP="",n.UNIT_SEP="",n.BYTE_ORDER_MARK="\uFEFF",n.BAD_DELIMITERS=["\r",`
`,'"',n.BYTE_ORDER_MARK],n.WORKERS_SUPPORTED=!g&&!!l.Worker,n.NODE_STREAM_INPUT=1,n.LocalChunkSize=10485760,n.RemoteChunkSize=5242880,n.DefaultDelimiter=",",n.Parser=_,n.ParserHandle=L,n.NetworkStreamer=a,n.FileStreamer=R,n.StringStreamer=N,n.ReadableStreamStreamer=x,l.jQuery){var s=l.jQuery;s.fn.parse=function(o){var u=o.config||{},v=[];return this.each(function(k){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&l.FileReader)||!this.files||this.files.length===0)return!0;for(var I=0;I<this.files.length;I++)v.push({file:this.files[I],inputElem:this,instanceConfig:s.extend({},u)})}),C(),this;function C(){if(v.length!==0){var k,I,q,G,P=v[0];if(w(o.before)){var Q=o.before(P.file,P.inputElem);if(typeof Q=="object"){if(Q.action==="abort")return k="AbortError",I=P.file,q=P.inputElem,G=Q.reason,void(w(o.error)&&o.error({name:k},I,q,G));if(Q.action==="skip")return void y();typeof Q.config=="object"&&(P.instanceConfig=s.extend(P.instanceConfig,Q.config))}else if(Q==="skip")return void y()}var B=P.instanceConfig.complete;P.instanceConfig.complete=function($){w(B)&&B($,P.file,P.inputElem),y()},n.parse(P.file,P.instanceConfig)}else w(o.complete)&&o.complete()}function y(){v.splice(0,1),C()}}}function d(o){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],comments:[],meta:{}},function(u){var v=E(u);v.chunkSize=parseInt(v.chunkSize),u.step||u.chunk||(v.chunkSize=null),this._handle=new L(v),(this._handle.streamer=this)._config=v}.call(this,o),this.parseChunk=function(u,v){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var C=this._config.beforeFirstChunk(u);C!==void 0&&(u=C)}this.isFirstChunk=!1,this._halted=!1;var y=this._partialLine+u;this._partialLine="";var k=this._handle.parse(y,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var I=k.meta.cursor;this._finished||(this._partialLine=y.substring(I-this._baseIndex),this._baseIndex=I),k&&k.data&&(this._rowCount+=k.data.length);var q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)l.postMessage({results:k,workerId:n.WORKER_ID,finished:q});else if(w(this._config.chunk)&&!v){if(this._config.chunk(k,this._handle),r=[],this._handle.paused()||this._handle.aborted())return void(this._halted=!0);k=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(k.data),this._completeResults.errors=this._completeResults.errors.concat(k.errors),this._completeResults.comments=this._completeResults.comments.concat(k.comments),this._completeResults.meta=k.meta),this._completed||!q||!w(this._config.complete)||k&&k.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),q||k&&k.meta.paused||this._nextChunk(),k}this._halted=!0},this._sendError=function(u){w(this._config.error)?this._config.error(u):i&&this._config.error&&l.postMessage({workerId:n.WORKER_ID,error:u,finished:!1})}}function a(o){var u;(o=o||{}).chunkSize||(o.chunkSize=n.RemoteChunkSize),d.call(this,o),this._nextChunk=g?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(v){this._input=v,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(u=new XMLHttpRequest,this._config.withCredentials&&(u.withCredentials=this._config.withCredentials),g||(u.onload=A(this._chunkLoaded,this),u.onerror=A(this._chunkError,this)),u.open(this._config.downloadRequestBody?"POST":"GET",this._input,!g),this._config.downloadRequestHeaders){var v=this._config.downloadRequestHeaders;for(var C in v)u.setRequestHeader(C,v[C])}if(this._config.chunkSize){var y=this._start+this._config.chunkSize-1;u.setRequestHeader("Range","bytes="+this._start+"-"+y)}try{u.send(this._config.downloadRequestBody)}catch(k){this._chunkError(k.message)}g&&u.status===0&&this._chunkError()}},this._chunkLoaded=function(){var v;u.readyState===4&&(u.status<200||400<=u.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:u.responseText.length,this._finished=!this._config.chunkSize||this._start>=((v=u.getResponseHeader("Content-Range"))!==null?parseInt(v.substring(v.lastIndexOf("/")+1)):-1),this.parseChunk(u.responseText)))},this._chunkError=function(v){var C=u.statusText||v;this._sendError(new Error(C))}}function R(o){var u,v;(o=o||{}).chunkSize||(o.chunkSize=n.LocalChunkSize),d.call(this,o);var C=typeof FileReader<"u";this.stream=function(y){this._input=y,v=y.slice||y.webkitSlice||y.mozSlice,C?((u=new FileReader).onload=A(this._chunkLoaded,this),u.onerror=A(this._chunkError,this)):u=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var y=this._input;if(this._config.chunkSize){var k=Math.min(this._start+this._config.chunkSize,this._input.size);y=v.call(y,this._start,k)}var I=u.readAsText(y,this._config.encoding);C||this._chunkLoaded({target:{result:I}})},this._chunkLoaded=function(y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(y.target.result)},this._chunkError=function(){this._sendError(u.error)}}function N(o){var u;d.call(this,o=o||{}),this.stream=function(v){return u=v,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var v,C=this._config.chunkSize;return u=C?(v=u.substring(0,C),u.substring(C)):(v=u,""),this._finished=!u,this.parseChunk(v)}}}function x(o){d.call(this,o=o||{});var u=[],v=!0,C=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(y){this._input=y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&u.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),u.length?this.parseChunk(u.shift()):v=!0},this._streamData=A(function(y){try{u.push(typeof y=="string"?y:y.toString(this._config.encoding)),v&&(v=!1,this._checkIsFinished(),this.parseChunk(u.shift()))}catch(k){this._streamError(k)}},this),this._streamError=A(function(y){this._streamCleanUp(),this._sendError(y)},this),this._streamEnd=A(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function L(o){var u,v,C,y=Math.pow(2,53),k=-y,I=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,q=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,G=this,P=0,Q=0,B=!1,$=!1,re=[],M={data:[],errors:[],comments:[],meta:{}};if(w(o.step)){var ee=o.step;o.step=function(K){if(M=K,j())S();else{if(S(),M.data.length===0)return;P+=K.data.length,o.preview&&P>o.preview?v.abort():(M.data=M.data[0],ee(M,G))}}}function T(K){return o.skipEmptyLines==="greedy"?K.join("").trim()==="":K.length===1&&K[0].length===0}function S(){return M&&C&&(ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+n.DefaultDelimiter+"'"),C=!1),o.skipEmptyLines&&(M.data=M.data.filter(function(K){return!T(K)})),j()&&(function(){if(!M)return;function K(Y,oe){w(o.transformHeader)&&(Y=o.transformHeader(Y,oe)),re.push(Y)}if(Array.isArray(M.data[0])){for(var X=0;j()&&X<M.data.length;X++)M.data[X].forEach(K);M.data.splice(0,1)}else M.data.forEach(K)})(),(function(){if(!M||!o.header&&!o.dynamicTyping&&!o.transform)return M;function K(Y,oe){var V,J=o.header?{}:[];for(V=0;V<Y.length;V++){var U=V,z=Y[V];o.header&&(U=V>=re.length?"__parsed_extra":re[V]),o.transform&&(z=o.transform(z,U)),z=W(U,z),U==="__parsed_extra"?(J[U]=J[U]||[],J[U].push(z)):J[U]=z}return o.header&&(V>re.length?ne("FieldMismatch","TooManyFields","Too many fields: expected "+re.length+" fields but parsed "+V,Q+oe):V<re.length&&ne("FieldMismatch","TooFewFields","Too few fields: expected "+re.length+" fields but parsed "+V,Q+oe)),J}var X=1;return!M.data.length||Array.isArray(M.data[0])?(M.data=M.data.map(K),X=M.data.length):M.data=K(M.data,0),o.header&&M.meta&&(M.meta.fields=re),Q+=X,M})()}function j(){return o.header&&re.length===0}function W(K,X){return Y=K,o.dynamicTypingFunction&&o.dynamicTyping[Y]===void 0&&(o.dynamicTyping[Y]=o.dynamicTypingFunction(Y)),(o.dynamicTyping[Y]||o.dynamicTyping)===!0?X==="true"||X==="TRUE"||X!=="false"&&X!=="FALSE"&&(X.startsWith('"')?X.slice(1):(function(oe){if(I.test(oe)){var V=parseFloat(oe);if(k<V&&V<y)return!0}return!1})(X)?parseFloat(X):q.test(X)?new Date(X):X===""?null:X):X;var Y}function ne(K,X,Y,oe){var V={type:K,code:X,message:Y};oe!==void 0&&(V.row=oe),M.errors.push(V)}this.parse=function(K,X,Y){var oe=o.quoteChar||'"';if(o.newline||(o.newline=(function(U,z){U=U.substring(0,1048576);var he=new RegExp(c(z)+"([^]*?)"+c(z),"gm"),F=(U=U.replace(he,"")).split("\r"),D=U.split(`
`),H=1<D.length&&D[0].length<F[0].length;if(F.length===1||H)return`
`;for(var Z=0,te=0;te<F.length;te++)F[te][0]===`
`&&Z++;return Z>=F.length/2?`\r
`:"\r"})(K,oe)),C=!1,o.delimiter)w(o.delimiter)&&(o.delimiter=o.delimiter(K),M.meta.delimiter=o.delimiter);else{var V=(function(U,z,he,F,D){var H,Z,te,se;D=D||[",","	","|",";",n.RECORD_SEP,n.UNIT_SEP];for(var ie=0;ie<D.length;ie++){var ue=D[ie],fe=0,ge=0,ar=0;te=void 0;for(var Ee=new _({comments:F,delimiter:ue,newline:z,preview:10}).parse(U),Ne=0;Ne<Ee.data.length;Ne++)if(he&&T(Ee.data[Ne]))ar++;else{var _e=Ee.data[Ne].length;ge+=_e,te!==void 0?0<_e&&(fe+=Math.abs(_e-te),te=_e):te=_e}0<Ee.data.length&&(ge/=Ee.data.length-ar),(Z===void 0||fe<=Z)&&(se===void 0||se<ge)&&1.99<ge&&(Z=fe,H=ue,se=ge)}return{successful:!!(o.delimiter=H),bestDelimiter:H}})(K,o.newline,o.skipEmptyLines,o.comments,o.delimitersToGuess);V.successful?o.delimiter=V.bestDelimiter:(C=!0,o.delimiter=n.DefaultDelimiter),M.meta.delimiter=o.delimiter}var J=E(o);return o.preview&&o.header&&J.preview++,u=K,v=new _(J),M=v.parse(u,X,Y),S(),B?{meta:{paused:!0}}:M||{meta:{paused:!1}}},this.paused=function(){return B},this.pause=function(){B=!0,v.abort(),u=w(o.chunk)?"":u.substring(v.getCharIndex())},this.resume=function(){G.streamer._halted?(B=!1,G.streamer.parseChunk(u,!0)):setTimeout(G.resume,3)},this.aborted=function(){return $},this.abort=function(){$=!0,v.abort(),M.meta.aborted=!0,w(o.complete)&&o.complete(M),u=""}}function c(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(o){var u,v=(o=o||{}).delimiter,C=o.newline,y=o.comments,k=o.step,I=o.preview,q=o.fastMode,G=u=o.quoteChar===void 0||o.quoteChar===null?'"':o.quoteChar;if(o.escapeChar!==void 0&&(G=o.escapeChar),(typeof v!="string"||-1<n.BAD_DELIMITERS.indexOf(v))&&(v=","),y===v)throw new Error("Comment character same as delimiter");y===!0?y="#":(typeof y!="string"||-1<n.BAD_DELIMITERS.indexOf(y))&&(y=!1),C!==`
`&&C!=="\r"&&C!==`\r
`&&(C=`
`);var P=0,Q=!1;this.parse=function(B,$,re){if(typeof B!="string")throw new Error("Input must be a string");var M=B.length,ee=v.length,T=C.length,S=y.length,j=w(k),W=[],ne=[],K=[],X=P=0;if(!B)return se();if(q||q!==!1&&B.indexOf(u)===-1){for(var Y=B.split(C),oe=0;oe<Y.length;oe++){if(K=Y[oe],P+=K.length,oe!==Y.length-1)P+=C.length;else if(re)return se();if(y&&K.substring(0,S)===y)r.push(K);else{if(j){if(W=[],D(K.split(v)),ie(),Q)return se()}else D(K.split(v));if(I&&I<=oe)return W=W.slice(0,I),se(!0)}}return se()}for(var V=B.indexOf(v,P),J=B.indexOf(C,P),U=new RegExp(c(G)+c(u),"g"),z=B.indexOf(u,P);;)if(B[P]!==u)if(y&&K.length===0&&B.substring(P,P+S)===y){if(J===-1)return se();P=J+T,J=B.indexOf(C,P),V=B.indexOf(v,P)}else if(V!==-1&&(V<J||J===-1))K.push(B.substring(P,V)),P=V+ee,V=B.indexOf(v,P);else{if(J===-1)break;if(K.push(B.substring(P,J)),te(J+T),j&&(ie(),Q))return se();if(I&&W.length>=I)return se(!0)}else for(z=P,P++;;){if((z=B.indexOf(u,z+1))===-1)return re||ne.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:W.length,index:P}),Z();if(z===M-1)return Z(B.substring(P,z).replace(U,u));if(u!==G||B[z+1]!==G){if(u===G||z===0||B[z-1]!==G){V!==-1&&V<z+1&&(V=B.indexOf(v,z+1)),J!==-1&&J<z+1&&(J=B.indexOf(C,z+1));var he=H(J===-1?V:Math.min(V,J));if(B.substr(z+1+he,ee)===v){K.push(B.substring(P-1,z).replace(U,u)),B[P=z+1+he+ee]!==u&&(z=B.indexOf(u,P)),V=B.indexOf(v,P),J=B.indexOf(C,P);break}var F=H(J);if(B.substring(z+1+F,z+1+F+T)===C){if(K.push(B.substring(P-1,z).replace(U,u)),te(z+1+F+T),V=B.indexOf(v,P),z=B.indexOf(u,P),j&&(ie(),Q))return se();if(I&&W.length>=I)return se(!0);break}ne.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:W.length,index:P}),z++}}else z++}return Z();function D(ue){W.push(ue),X=P}function H(ue){var fe=0;if(ue!==-1){var ge=B.substring(z+1,ue);ge&&ge.trim()===""&&(fe=ge.length)}return fe}function Z(ue){return re||(ue===void 0&&(ue=B.substring(P)),K.push(ue),P=M,D(K),j&&ie()),se()}function te(ue){P=ue,D(K),K=[],J=B.indexOf(C,P)}function se(ue){var fe=JSON.parse(JSON.stringify(r));return{data:W,errors:ne,comments:fe,meta:{delimiter:v,linebreak:C,aborted:Q,truncated:!!ue,cursor:X+($||0)}}}function ie(){k(se()),W=[],ne=[]}},this.abort=function(){Q=!0},this.getCharIndex=function(){return P}}function m(o){var u=o.data,v=e[u.workerId],C=!1;if(u.error)v.userError(u.error,u.file);else if(u.results&&u.results.data){var y={abort:function(){C=!0,O(u.workerId,{data:[],comments:[],errors:[],meta:{aborted:!0}})},pause:p,resume:p};if(w(v.userStep)){for(var k=0;k<u.results.data.length&&(v.userStep({data:u.results.data[k],errors:u.results.errors,comments:u.results.comments,meta:u.results.meta},y),!C);k++);delete u.results}else w(v.userChunk)&&(v.userChunk(u.results,y,u.file),delete u.results)}u.finished&&!C&&O(u.workerId,u.results)}function O(o,u){var v=e[o];w(v.userComplete)&&v.userComplete(u),v.terminate(),delete e[o]}function p(){throw new Error("Not implemented.")}function E(o){if(typeof o!="object"||o===null)return o;var u=Array.isArray(o)?[]:{};for(var v in o)u[v]=E(o[v]);return u}function A(o,u){return function(){o.apply(u,arguments)}}function w(o){return typeof o=="function"}return i&&(l.onmessage=function(o){var u=o.data;if(n.WORKER_ID===void 0&&u&&(n.WORKER_ID=u.workerId),typeof u.input=="string")l.postMessage({workerId:n.WORKER_ID,results:n.parse(u.input,u.config),finished:!0});else if(l.File&&u.input instanceof File||u.input instanceof Object){var v=n.parse(u.input,u.config);v&&l.postMessage({workerId:n.WORKER_ID,results:v,finished:!0})}}),(a.prototype=Object.create(d.prototype)).constructor=a,(R.prototype=Object.create(d.prototype)).constructor=R,(N.prototype=Object.create(N.prototype)).constructor=N,(x.prototype=Object.create(d.prototype)).constructor=x,n})})(Re)),Re.exports}var mr=gr(),yr=xe(mr),br={},Ar=Object.freeze({__proto__:null,default:br}),Ct=dr(Ar),Se={},wt;function Te(){return wt||(wt=1,(function(b){b.isInteger=f=>typeof f=="number"?Number.isInteger(f):typeof f=="string"&&f.trim()!==""?Number.isInteger(Number(f)):!1,b.find=(f,h)=>f.nodes.find(l=>l.type===h),b.exceedsLimit=(f,h,l=1,g)=>g===!1||!b.isInteger(f)||!b.isInteger(h)?!1:(Number(h)-Number(f))/Number(l)>=g,b.escapeNode=(f,h=0,l)=>{const g=f.nodes[h];g&&(l&&g.type===l||g.type==="open"||g.type==="close")&&g.escaped!==!0&&(g.value="\\"+g.value,g.escaped=!0)},b.encloseBrace=f=>f.type!=="brace"?!1:f.commas>>0+f.ranges>>0===0?(f.invalid=!0,!0):!1,b.isInvalidBrace=f=>f.type!=="brace"?!1:f.invalid===!0||f.dollar?!0:f.commas>>0+f.ranges>>0===0||f.open!==!0||f.close!==!0?(f.invalid=!0,!0):!1,b.isOpenOrClose=f=>f.type==="open"||f.type==="close"?!0:f.open===!0||f.close===!0,b.reduce=f=>f.reduce((h,l)=>(l.type==="text"&&h.push(l.value),l.type==="range"&&(l.type="text"),h),[]),b.flatten=(...f)=>{const h=[],l=g=>{for(let i=0;i<g.length;i++){const e=g[i];if(Array.isArray(e)){l(e);continue}e!==void 0&&h.push(e)}return h};return l(f),h}})(Se)),Se}var Oe,Nt;function $e(){if(Nt)return Oe;Nt=1;const b=Te();return Oe=(f,h={})=>{const l=(g,i={})=>{const e=h.escapeInvalid&&b.isInvalidBrace(i),t=g.invalid===!0&&h.escapeInvalid===!0;let n="";if(g.value)return(e||t)&&b.isOpenOrClose(g)?"\\"+g.value:g.value;if(g.value)return g.value;if(g.nodes)for(const r of g.nodes)n+=l(r);return n};return l(f)},Oe}/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var Le,xt;function Er(){return xt||(xt=1,Le=function(b){return typeof b=="number"?b-b===0:typeof b=="string"&&b.trim()!==""?Number.isFinite?Number.isFinite(+b):isFinite(+b):!1}),Le}/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */var Ie,St;function _r(){if(St)return Ie;St=1;const b=Er(),f=(L,c,_)=>{if(b(L)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(c===void 0||L===c)return String(L);if(b(c)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let m={relaxZeros:!0,..._};typeof m.strictZeros=="boolean"&&(m.relaxZeros=m.strictZeros===!1);let O=String(m.relaxZeros),p=String(m.shorthand),E=String(m.capture),A=String(m.wrap),w=L+":"+c+"="+O+p+E+A;if(f.cache.hasOwnProperty(w))return f.cache[w].result;let o=Math.min(L,c),u=Math.max(L,c);if(Math.abs(o-u)===1){let I=L+"|"+c;return m.capture?`(${I})`:m.wrap===!1?I:`(?:${I})`}let v=N(L)||N(c),C={min:L,max:c,a:o,b:u},y=[],k=[];if(v&&(C.isPadded=v,C.maxLen=String(C.max).length),o<0){let I=u<0?Math.abs(u):1;k=i(I,Math.abs(o),C,m),o=C.a=0}return u>=0&&(y=i(o,u,C,m)),C.negatives=k,C.positives=y,C.result=h(k,y),m.capture===!0?C.result=`(${C.result})`:m.wrap!==!1&&y.length+k.length>1&&(C.result=`(?:${C.result})`),f.cache[w]=C,C.result};function h(L,c,_){let m=e(L,c,"-",!1)||[],O=e(c,L,"",!1)||[],p=e(L,c,"-?",!0)||[];return m.concat(p).concat(O).join("|")}function l(L,c){let _=1,m=1,O=s(L,_),p=new Set([c]);for(;L<=O&&O<=c;)p.add(O),_+=1,O=s(L,_);for(O=d(c+1,m)-1;L<O&&O<=c;)p.add(O),m+=1,O=d(c+1,m)-1;return p=[...p],p.sort(n),p}function g(L,c,_){if(L===c)return{pattern:L,count:[],digits:0};let m=t(L,c),O=m.length,p="",E=0;for(let A=0;A<O;A++){let[w,o]=m[A];w===o?p+=w:w!=="0"||o!=="9"?p+=R(w,o):E++}return E&&(p+=_.shorthand===!0?"\\d":"[0-9]"),{pattern:p,count:[E],digits:O}}function i(L,c,_,m){let O=l(L,c),p=[],E=L,A;for(let w=0;w<O.length;w++){let o=O[w],u=g(String(E),String(o),m),v="";if(!_.isPadded&&A&&A.pattern===u.pattern){A.count.length>1&&A.count.pop(),A.count.push(u.count[0]),A.string=A.pattern+a(A.count),E=o+1;continue}_.isPadded&&(v=x(o,_,m)),u.string=v+u.pattern+a(u.count),p.push(u),E=o+1,A=u}return p}function e(L,c,_,m,O){let p=[];for(let E of L){let{string:A}=E;!m&&!r(c,"string",A)&&p.push(_+A),m&&r(c,"string",A)&&p.push(_+A)}return p}function t(L,c){let _=[];for(let m=0;m<L.length;m++)_.push([L[m],c[m]]);return _}function n(L,c){return L>c?1:c>L?-1:0}function r(L,c,_){return L.some(m=>m[c]===_)}function s(L,c){return Number(String(L).slice(0,-c)+"9".repeat(c))}function d(L,c){return L-L%Math.pow(10,c)}function a(L){let[c=0,_=""]=L;return _||c>1?`{${c+(_?","+_:"")}}`:""}function R(L,c,_){return`[${L}${c-L===1?"":"-"}${c}]`}function N(L){return/^-?(0+)\d/.test(L)}function x(L,c,_){if(!c.isPadded)return L;let m=Math.abs(c.maxLen-String(L).length),O=_.relaxZeros!==!1;switch(m){case 0:return"";case 1:return O?"0?":"0";case 2:return O?"0{0,2}":"00";default:return O?`0{0,${m}}`:`0{${m}}`}}return f.cache={},f.clearCache=()=>f.cache={},Ie=f,Ie}/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ke,Tt;function Ot(){if(Tt)return ke;Tt=1;const b=Ct,f=_r(),h=m=>m!==null&&typeof m=="object"&&!Array.isArray(m),l=m=>O=>m===!0?Number(O):String(O),g=m=>typeof m=="number"||typeof m=="string"&&m!=="",i=m=>Number.isInteger(+m),e=m=>{let O=`${m}`,p=-1;if(O[0]==="-"&&(O=O.slice(1)),O==="0")return!1;for(;O[++p]==="0";);return p>0},t=(m,O,p)=>typeof m=="string"||typeof O=="string"?!0:p.stringify===!0,n=(m,O,p)=>{if(O>0){let E=m[0]==="-"?"-":"";E&&(m=m.slice(1)),m=E+m.padStart(E?O-1:O,"0")}return p===!1?String(m):m},r=(m,O)=>{let p=m[0]==="-"?"-":"";for(p&&(m=m.slice(1),O--);m.length<O;)m="0"+m;return p?"-"+m:m},s=(m,O,p)=>{m.negatives.sort((u,v)=>u<v?-1:u>v?1:0),m.positives.sort((u,v)=>u<v?-1:u>v?1:0);let E=O.capture?"":"?:",A="",w="",o;return m.positives.length&&(A=m.positives.map(u=>r(String(u),p)).join("|")),m.negatives.length&&(w=`-(${E}${m.negatives.map(u=>r(String(u),p)).join("|")})`),A&&w?o=`${A}|${w}`:o=A||w,O.wrap?`(${E}${o})`:o},d=(m,O,p,E)=>{if(p)return f(m,O,{wrap:!1,...E});let A=String.fromCharCode(m);if(m===O)return A;let w=String.fromCharCode(O);return`[${A}-${w}]`},a=(m,O,p)=>{if(Array.isArray(m)){let E=p.wrap===!0,A=p.capture?"":"?:";return E?`(${A}${m.join("|")})`:m.join("|")}return f(m,O,p)},R=(...m)=>new RangeError("Invalid range arguments: "+b.inspect(...m)),N=(m,O,p)=>{if(p.strictRanges===!0)throw R([m,O]);return[]},x=(m,O)=>{if(O.strictRanges===!0)throw new TypeError(`Expected step "${m}" to be a number`);return[]},L=(m,O,p=1,E={})=>{let A=Number(m),w=Number(O);if(!Number.isInteger(A)||!Number.isInteger(w)){if(E.strictRanges===!0)throw R([m,O]);return[]}A===0&&(A=0),w===0&&(w=0);let o=A>w,u=String(m),v=String(O),C=String(p);p=Math.max(Math.abs(p),1);let y=e(u)||e(v)||e(C),k=y?Math.max(u.length,v.length,C.length):0,I=y===!1&&t(m,O,E)===!1,q=E.transform||l(I);if(E.toRegex&&p===1)return d(r(m,k),r(O,k),!0,E);let G={negatives:[],positives:[]},P=$=>G[$<0?"negatives":"positives"].push(Math.abs($)),Q=[],B=0;for(;o?A>=w:A<=w;)E.toRegex===!0&&p>1?P(A):Q.push(n(q(A,B),k,I)),A=o?A-p:A+p,B++;return E.toRegex===!0?p>1?s(G,E,k):a(Q,null,{wrap:!1,...E}):Q},c=(m,O,p=1,E={})=>{if(!i(m)&&m.length>1||!i(O)&&O.length>1)return N(m,O,E);let A=E.transform||(I=>String.fromCharCode(I)),w=`${m}`.charCodeAt(0),o=`${O}`.charCodeAt(0),u=w>o,v=Math.min(w,o),C=Math.max(w,o);if(E.toRegex&&p===1)return d(v,C,!1,E);let y=[],k=0;for(;u?w>=o:w<=o;)y.push(A(w,k)),w=u?w-p:w+p,k++;return E.toRegex===!0?a(y,null,{wrap:!1,options:E}):y},_=(m,O,p,E={})=>{if(O==null&&g(m))return[m];if(!g(m)||!g(O))return N(m,O,E);if(typeof p=="function")return _(m,O,1,{transform:p});if(h(p))return _(m,O,0,p);let A={...E};return A.capture===!0&&(A.wrap=!0),p=p||A.step||1,i(p)?i(m)&&i(O)?L(m,O,p,A):c(m,O,Math.max(Math.abs(p),1),A):p!=null&&!h(p)?x(p,A):_(m,O,1,p)};return ke=_,ke}var He,$t;function Rr(){if($t)return He;$t=1;const b=Ot(),f=Te();return He=(l,g={})=>{const i=(e,t={})=>{const n=f.isInvalidBrace(t),r=e.invalid===!0&&g.escapeInvalid===!0,s=n===!0||r===!0,d=g.escapeInvalid===!0?"\\":"";let a="";if(e.isOpen===!0)return d+e.value;if(e.isClose===!0)return console.log("node.isClose",d,e.value),d+e.value;if(e.type==="open")return s?d+e.value:"(";if(e.type==="close")return s?d+e.value:")";if(e.type==="comma")return e.prev.type==="comma"?"":s?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){const R=f.reduce(e.nodes),N=b(...R,{...g,wrap:!1,toRegex:!0,strictZeros:!0});if(N.length!==0)return R.length>1&&N.length>1?`(${N})`:N}if(e.nodes)for(const R of e.nodes)a+=i(R,e);return a};return i(l)},He}var Pe,Lt;function vr(){if(Lt)return Pe;Lt=1;const b=Ot(),f=$e(),h=Te(),l=(i="",e="",t=!1)=>{const n=[];if(i=[].concat(i),e=[].concat(e),!e.length)return i;if(!i.length)return t?h.flatten(e).map(r=>`{${r}}`):e;for(const r of i)if(Array.isArray(r))for(const s of r)n.push(l(s,e,t));else for(let s of e)t===!0&&typeof s=="string"&&(s=`{${s}}`),n.push(Array.isArray(s)?l(r,s,t):r+s);return h.flatten(n)};return Pe=(i,e={})=>{const t=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(r,s={})=>{r.queue=[];let d=s,a=s.queue;for(;d.type!=="brace"&&d.type!=="root"&&d.parent;)d=d.parent,a=d.queue;if(r.invalid||r.dollar){a.push(l(a.pop(),f(r,e)));return}if(r.type==="brace"&&r.invalid!==!0&&r.nodes.length===2){a.push(l(a.pop(),["{}"]));return}if(r.nodes&&r.ranges>0){const L=h.reduce(r.nodes);if(h.exceedsLimit(...L,e.step,t))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let c=b(...L,e);c.length===0&&(c=f(r,e)),a.push(l(a.pop(),c)),r.nodes=[];return}const R=h.encloseBrace(r);let N=r.queue,x=r;for(;x.type!=="brace"&&x.type!=="root"&&x.parent;)x=x.parent,N=x.queue;for(let L=0;L<r.nodes.length;L++){const c=r.nodes[L];if(c.type==="comma"&&r.type==="brace"){L===1&&N.push(""),N.push("");continue}if(c.type==="close"){a.push(l(a.pop(),N,R));continue}if(c.value&&c.type!=="open"){N.push(l(N.pop(),c.value));continue}c.nodes&&n(c,r)}return N};return h.flatten(n(i))},Pe}var Fe,It;function Cr(){return It||(It=1,Fe={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}),Fe}var Me,kt;function wr(){if(kt)return Me;kt=1;const b=$e(),{MAX_LENGTH:f,CHAR_BACKSLASH:h,CHAR_BACKTICK:l,CHAR_COMMA:g,CHAR_DOT:i,CHAR_LEFT_PARENTHESES:e,CHAR_RIGHT_PARENTHESES:t,CHAR_LEFT_CURLY_BRACE:n,CHAR_RIGHT_CURLY_BRACE:r,CHAR_LEFT_SQUARE_BRACKET:s,CHAR_RIGHT_SQUARE_BRACKET:d,CHAR_DOUBLE_QUOTE:a,CHAR_SINGLE_QUOTE:R,CHAR_NO_BREAK_SPACE:N,CHAR_ZERO_WIDTH_NOBREAK_SPACE:x}=Cr();return Me=(c,_={})=>{if(typeof c!="string")throw new TypeError("Expected a string");const m=_||{},O=typeof m.maxLength=="number"?Math.min(f,m.maxLength):f;if(c.length>O)throw new SyntaxError(`Input length (${c.length}), exceeds max characters (${O})`);const p={type:"root",input:c,nodes:[]},E=[p];let A=p,w=p,o=0;const u=c.length;let v=0,C=0,y;const k=()=>c[v++],I=q=>{if(q.type==="text"&&w.type==="dot"&&(w.type="text"),w&&w.type==="text"&&q.type==="text"){w.value+=q.value;return}return A.nodes.push(q),q.parent=A,q.prev=w,w=q,q};for(I({type:"bos"});v<u;)if(A=E[E.length-1],y=k(),!(y===x||y===N)){if(y===h){I({type:"text",value:(_.keepEscaping?y:"")+k()});continue}if(y===d){I({type:"text",value:"\\"+y});continue}if(y===s){o++;let q;for(;v<u&&(q=k());){if(y+=q,q===s){o++;continue}if(q===h){y+=k();continue}if(q===d&&(o--,o===0))break}I({type:"text",value:y});continue}if(y===e){A=I({type:"paren",nodes:[]}),E.push(A),I({type:"text",value:y});continue}if(y===t){if(A.type!=="paren"){I({type:"text",value:y});continue}A=E.pop(),I({type:"text",value:y}),A=E[E.length-1];continue}if(y===a||y===R||y===l){const q=y;let G;for(_.keepQuotes!==!0&&(y="");v<u&&(G=k());){if(G===h){y+=G+k();continue}if(G===q){_.keepQuotes===!0&&(y+=G);break}y+=G}I({type:"text",value:y});continue}if(y===n){C++;const G={type:"brace",open:!0,close:!1,dollar:w.value&&w.value.slice(-1)==="$"||A.dollar===!0,depth:C,commas:0,ranges:0,nodes:[]};A=I(G),E.push(A),I({type:"open",value:y});continue}if(y===r){if(A.type!=="brace"){I({type:"text",value:y});continue}const q="close";A=E.pop(),A.close=!0,I({type:q,value:y}),C--,A=E[E.length-1];continue}if(y===g&&C>0){if(A.ranges>0){A.ranges=0;const q=A.nodes.shift();A.nodes=[q,{type:"text",value:b(A)}]}I({type:"comma",value:y}),A.commas++;continue}if(y===i&&C>0&&A.commas===0){const q=A.nodes;if(C===0||q.length===0){I({type:"text",value:y});continue}if(w.type==="dot"){if(A.range=[],w.value+=y,w.type="range",A.nodes.length!==3&&A.nodes.length!==5){A.invalid=!0,A.ranges=0,w.type="text";continue}A.ranges++,A.args=[];continue}if(w.type==="range"){q.pop();const G=q[q.length-1];G.value+=w.value+y,w=G,A.ranges--;continue}I({type:"dot",value:y});continue}I({type:"text",value:y})}do if(A=E.pop(),A.type!=="root"){A.nodes.forEach(P=>{P.nodes||(P.type==="open"&&(P.isOpen=!0),P.type==="close"&&(P.isClose=!0),P.nodes||(P.type="text"),P.invalid=!0)});const q=E[E.length-1],G=q.nodes.indexOf(A);q.nodes.splice(G,1,...A.nodes)}while(E.length>0);return I({type:"eos"}),p},Me}var Be,Ht;function Nr(){if(Ht)return Be;Ht=1;const b=$e(),f=Rr(),h=vr(),l=wr(),g=(i,e={})=>{let t=[];if(Array.isArray(i))for(const n of i){const r=g.create(n,e);Array.isArray(r)?t.push(...r):t.push(r)}else t=[].concat(g.create(i,e));return e&&e.expand===!0&&e.nodupes===!0&&(t=[...new Set(t)]),t};return g.parse=(i,e={})=>l(i,e),g.stringify=(i,e={})=>b(typeof i=="string"?g.parse(i,e):i,e),g.compile=(i,e={})=>(typeof i=="string"&&(i=g.parse(i,e)),f(i,e)),g.expand=(i,e={})=>{typeof i=="string"&&(i=g.parse(i,e));let t=h(i,e);return e.noempty===!0&&(t=t.filter(Boolean)),e.nodupes===!0&&(t=[...new Set(t)]),t},g.create=(i,e={})=>i===""||i.length<3?[i]:e.expand!==!0?g.compile(i,e):g.expand(i,e),Be=g,Be}var Ue,Pt;function qe(){if(Pt)return Ue;Pt=1;function b(g){if(typeof g!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(g))}function f(g,i){for(var e="",t=0,n=-1,r=0,s,d=0;d<=g.length;++d){if(d<g.length)s=g.charCodeAt(d);else{if(s===47)break;s=47}if(s===47){if(!(n===d-1||r===1))if(n!==d-1&&r===2){if(e.length<2||t!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var a=e.lastIndexOf("/");if(a!==e.length-1){a===-1?(e="",t=0):(e=e.slice(0,a),t=e.length-1-e.lastIndexOf("/")),n=d,r=0;continue}}else if(e.length===2||e.length===1){e="",t=0,n=d,r=0;continue}}i&&(e.length>0?e+="/..":e="..",t=2)}else e.length>0?e+="/"+g.slice(n+1,d):e=g.slice(n+1,d),t=d-n-1;n=d,r=0}else s===46&&r!==-1?++r:r=-1}return e}function h(g,i){var e=i.dir||i.root,t=i.base||(i.name||"")+(i.ext||"");return e?e===i.root?e+t:e+g+t:t}var l={resolve:function(){for(var i="",e=!1,t,n=arguments.length-1;n>=-1&&!e;n--){var r;n>=0?r=arguments[n]:(t===void 0&&(t=process.cwd()),r=t),b(r),r.length!==0&&(i=r+"/"+i,e=r.charCodeAt(0)===47)}return i=f(i,!e),e?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(b(i),i.length===0)return".";var e=i.charCodeAt(0)===47,t=i.charCodeAt(i.length-1)===47;return i=f(i,!e),i.length===0&&!e&&(i="."),i.length>0&&t&&(i+="/"),e?"/"+i:i},isAbsolute:function(i){return b(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,e=0;e<arguments.length;++e){var t=arguments[e];b(t),t.length>0&&(i===void 0?i=t:i+="/"+t)}return i===void 0?".":l.normalize(i)},relative:function(i,e){if(b(i),b(e),i===e||(i=l.resolve(i),e=l.resolve(e),i===e))return"";for(var t=1;t<i.length&&i.charCodeAt(t)===47;++t);for(var n=i.length,r=n-t,s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var d=e.length,a=d-s,R=r<a?r:a,N=-1,x=0;x<=R;++x){if(x===R){if(a>R){if(e.charCodeAt(s+x)===47)return e.slice(s+x+1);if(x===0)return e.slice(s+x)}else r>R&&(i.charCodeAt(t+x)===47?N=x:x===0&&(N=0));break}var L=i.charCodeAt(t+x),c=e.charCodeAt(s+x);if(L!==c)break;L===47&&(N=x)}var _="";for(x=t+N+1;x<=n;++x)(x===n||i.charCodeAt(x)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+e.slice(s+N):(s+=N,e.charCodeAt(s)===47&&++s,e.slice(s))},_makeLong:function(i){return i},dirname:function(i){if(b(i),i.length===0)return".";for(var e=i.charCodeAt(0),t=e===47,n=-1,r=!0,s=i.length-1;s>=1;--s)if(e=i.charCodeAt(s),e===47){if(!r){n=s;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":i.slice(0,n)},basename:function(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');b(i);var t=0,n=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";var d=e.length-1,a=-1;for(s=i.length-1;s>=0;--s){var R=i.charCodeAt(s);if(R===47){if(!r){t=s+1;break}}else a===-1&&(r=!1,a=s+1),d>=0&&(R===e.charCodeAt(d)?--d===-1&&(n=s):(d=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}else{for(s=i.length-1;s>=0;--s)if(i.charCodeAt(s)===47){if(!r){t=s+1;break}}else n===-1&&(r=!1,n=s+1);return n===-1?"":i.slice(t,n)}},extname:function(i){b(i);for(var e=-1,t=0,n=-1,r=!0,s=0,d=i.length-1;d>=0;--d){var a=i.charCodeAt(d);if(a===47){if(!r){t=d+1;break}continue}n===-1&&(r=!1,n=d+1),a===46?e===-1?e=d:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return h("/",i)},parse:function(i){b(i);var e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;var t=i.charCodeAt(0),n=t===47,r;n?(e.root="/",r=1):r=0;for(var s=-1,d=0,a=-1,R=!0,N=i.length-1,x=0;N>=r;--N){if(t=i.charCodeAt(N),t===47){if(!R){d=N+1;break}continue}a===-1&&(R=!1,a=N+1),t===46?s===-1?s=N:x!==1&&(x=1):s!==-1&&(x=-1)}return s===-1||a===-1||x===0||x===1&&s===a-1&&s===d+1?a!==-1&&(d===0&&n?e.base=e.name=i.slice(1,a):e.base=e.name=i.slice(d,a)):(d===0&&n?(e.name=i.slice(1,s),e.base=i.slice(1,a)):(e.name=i.slice(d,s),e.base=i.slice(d,a)),e.ext=i.slice(s,a)),d>0?e.dir=i.slice(0,d-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return l.posix=l,Ue=l,Ue}var Ge={},ze,Ft;function ve(){if(Ft)return ze;Ft=1;const b=qe(),f="\\\\/",h=`[^${f}]`,l="\\.",g="\\+",i="\\?",e="\\/",t="(?=.)",n="[^/]",r=`(?:${e}|$)`,s=`(?:^|${e})`,d=`${l}{1,2}${r}`,a=`(?!${l})`,R=`(?!${s}${d})`,N=`(?!${l}{0,1}${r})`,x=`(?!${d})`,L=`[^.${e}]`,c=`${n}*?`,_={DOT_LITERAL:l,PLUS_LITERAL:g,QMARK_LITERAL:i,SLASH_LITERAL:e,ONE_CHAR:t,QMARK:n,END_ANCHOR:r,DOTS_SLASH:d,NO_DOT:a,NO_DOTS:R,NO_DOT_SLASH:N,NO_DOTS_SLASH:x,QMARK_NO_DOT:L,STAR:c,START_ANCHOR:s},m={..._,SLASH_LITERAL:`[${f}]`,QMARK:h,STAR:`${h}*?`,DOTS_SLASH:`${l}{1,2}(?:[${f}]|$)`,NO_DOT:`(?!${l})`,NO_DOTS:`(?!(?:^|[${f}])${l}{1,2}(?:[${f}]|$))`,NO_DOT_SLASH:`(?!${l}{0,1}(?:[${f}]|$))`,NO_DOTS_SLASH:`(?!${l}{1,2}(?:[${f}]|$))`,QMARK_NO_DOT:`[^.${f}]`,START_ANCHOR:`(?:^|[${f}])`,END_ANCHOR:`(?:[${f}]|$)`},O={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};return ze={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:O,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:b.sep,extglobChars(p){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${p.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(p){return p===!0?m:_}},ze}var Mt;function Ce(){return Mt||(Mt=1,(function(b){const f=qe(),{REGEX_BACKSLASH:h,REGEX_REMOVE_BACKSLASH:l,REGEX_SPECIAL_CHARS:g,REGEX_SPECIAL_CHARS_GLOBAL:i}=ve();b.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),b.hasRegexChars=e=>g.test(e),b.isRegexChar=e=>e.length===1&&b.hasRegexChars(e),b.escapeRegex=e=>e.replace(i,"\\$1"),b.toPosixSlashes=e=>e.replace(h,"/"),b.removeBackslashes=e=>e.replace(l,t=>t==="\\"?"":t),b.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10},b.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:f.sep==="\\",b.escapeLast=(e,t,n)=>{const r=e.lastIndexOf(t,n);return r===-1?e:e[r-1]==="\\"?b.escapeLast(e,t,r-1):`${e.slice(0,r)}\\${e.slice(r)}`},b.removePrefix=(e,t={})=>{let n=e;return n.startsWith("./")&&(n=n.slice(2),t.prefix="./"),n},b.wrapOutput=(e,t={},n={})=>{const r=n.contains?"":"^",s=n.contains?"":"$";let d=`${r}(?:${e})${s}`;return t.negated===!0&&(d=`(?:^(?!${d}).*$)`),d}})(Ge)),Ge}var Ke,Bt;function xr(){if(Bt)return Ke;Bt=1;const b=Ce(),{CHAR_ASTERISK:f,CHAR_AT:h,CHAR_BACKWARD_SLASH:l,CHAR_COMMA:g,CHAR_DOT:i,CHAR_EXCLAMATION_MARK:e,CHAR_FORWARD_SLASH:t,CHAR_LEFT_CURLY_BRACE:n,CHAR_LEFT_PARENTHESES:r,CHAR_LEFT_SQUARE_BRACKET:s,CHAR_PLUS:d,CHAR_QUESTION_MARK:a,CHAR_RIGHT_CURLY_BRACE:R,CHAR_RIGHT_PARENTHESES:N,CHAR_RIGHT_SQUARE_BRACKET:x}=ve(),L=m=>m===t||m===l,c=m=>{m.isPrefix!==!0&&(m.depth=m.isGlobstar?1/0:1)};return Ke=(m,O)=>{const p=O||{},E=m.length-1,A=p.parts===!0||p.scanToEnd===!0,w=[],o=[],u=[];let v=m,C=-1,y=0,k=0,I=!1,q=!1,G=!1,P=!1,Q=!1,B=!1,$=!1,re=!1,M=!1,ee=!1,T=0,S,j,W={value:"",depth:0,isGlob:!1};const ne=()=>C>=E,K=()=>v.charCodeAt(C+1),X=()=>(S=j,v.charCodeAt(++C));for(;C<E;){j=X();let U;if(j===l){$=W.backslashes=!0,j=X(),j===n&&(B=!0);continue}if(B===!0||j===n){for(T++;ne()!==!0&&(j=X());){if(j===l){$=W.backslashes=!0,X();continue}if(j===n){T++;continue}if(B!==!0&&j===i&&(j=X())===i){if(I=W.isBrace=!0,G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(B!==!0&&j===g){if(I=W.isBrace=!0,G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(j===R&&(T--,T===0)){B=!1,I=W.isBrace=!0,ee=!0;break}}if(A===!0)continue;break}if(j===t){if(w.push(C),o.push(W),W={value:"",depth:0,isGlob:!1},ee===!0)continue;if(S===i&&C===y+1){y+=2;continue}k=C+1;continue}if(p.noext!==!0&&(j===d||j===h||j===f||j===a||j===e)===!0&&K()===r){if(G=W.isGlob=!0,P=W.isExtglob=!0,ee=!0,j===e&&C===y&&(M=!0),A===!0){for(;ne()!==!0&&(j=X());){if(j===l){$=W.backslashes=!0,j=X();continue}if(j===N){G=W.isGlob=!0,ee=!0;break}}continue}break}if(j===f){if(S===f&&(Q=W.isGlobstar=!0),G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(j===a){if(G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(j===s){for(;ne()!==!0&&(U=X());){if(U===l){$=W.backslashes=!0,X();continue}if(U===x){q=W.isBracket=!0,G=W.isGlob=!0,ee=!0;break}}if(A===!0)continue;break}if(p.nonegate!==!0&&j===e&&C===y){re=W.negated=!0,y++;continue}if(p.noparen!==!0&&j===r){if(G=W.isGlob=!0,A===!0){for(;ne()!==!0&&(j=X());){if(j===r){$=W.backslashes=!0,j=X();continue}if(j===N){ee=!0;break}}continue}break}if(G===!0){if(ee=!0,A===!0)continue;break}}p.noext===!0&&(P=!1,G=!1);let Y=v,oe="",V="";y>0&&(oe=v.slice(0,y),v=v.slice(y),k-=y),Y&&G===!0&&k>0?(Y=v.slice(0,k),V=v.slice(k)):G===!0?(Y="",V=v):Y=v,Y&&Y!==""&&Y!=="/"&&Y!==v&&L(Y.charCodeAt(Y.length-1))&&(Y=Y.slice(0,-1)),p.unescape===!0&&(V&&(V=b.removeBackslashes(V)),Y&&$===!0&&(Y=b.removeBackslashes(Y)));const J={prefix:oe,input:m,start:y,base:Y,glob:V,isBrace:I,isBracket:q,isGlob:G,isExtglob:P,isGlobstar:Q,negated:re,negatedExtglob:M};if(p.tokens===!0&&(J.maxDepth=0,L(j)||o.push(W),J.tokens=o),p.parts===!0||p.tokens===!0){let U;for(let z=0;z<w.length;z++){const he=U?U+1:y,F=w[z],D=m.slice(he,F);p.tokens&&(z===0&&y!==0?(o[z].isPrefix=!0,o[z].value=oe):o[z].value=D,c(o[z]),J.maxDepth+=o[z].depth),(z!==0||D!=="")&&u.push(D),U=F}if(U&&U+1<m.length){const z=m.slice(U+1);u.push(z),p.tokens&&(o[o.length-1].value=z,c(o[o.length-1]),J.maxDepth+=o[o.length-1].depth)}J.slashes=w,J.parts=u}return J},Ke}var We,Ut;function Sr(){if(Ut)return We;Ut=1;const b=ve(),f=Ce(),{MAX_LENGTH:h,POSIX_REGEX_SOURCE:l,REGEX_NON_SPECIAL_CHARS:g,REGEX_SPECIAL_CHARS_BACKREF:i,REPLACEMENTS:e}=b,t=(s,d)=>{if(typeof d.expandRange=="function")return d.expandRange(...s,d);s.sort();const a=`[${s.join("-")}]`;try{new RegExp(a)}catch{return s.map(N=>f.escapeRegex(N)).join("..")}return a},n=(s,d)=>`Missing ${s}: "${d}" - use "\\\\${d}" to match literal characters`,r=(s,d)=>{if(typeof s!="string")throw new TypeError("Expected a string");s=e[s]||s;const a={...d},R=typeof a.maxLength=="number"?Math.min(h,a.maxLength):h;let N=s.length;if(N>R)throw new SyntaxError(`Input length: ${N}, exceeds maximum allowed length: ${R}`);const x={type:"bos",value:"",output:a.prepend||""},L=[x],c=a.capture?"":"?:",_=f.isWindows(d),m=b.globChars(_),O=b.extglobChars(m),{DOT_LITERAL:p,PLUS_LITERAL:E,SLASH_LITERAL:A,ONE_CHAR:w,DOTS_SLASH:o,NO_DOT:u,NO_DOT_SLASH:v,NO_DOTS_SLASH:C,QMARK:y,QMARK_NO_DOT:k,STAR:I,START_ANCHOR:q}=m,G=F=>`(${c}(?:(?!${q}${F.dot?o:p}).)*?)`,P=a.dot?"":u,Q=a.dot?y:k;let B=a.bash===!0?G(a):I;a.capture&&(B=`(${B})`),typeof a.noext=="boolean"&&(a.noextglob=a.noext);const $={input:s,index:-1,start:0,dot:a.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:L};s=f.removePrefix(s,$),N=s.length;const re=[],M=[],ee=[];let T=x,S;const j=()=>$.index===N-1,W=$.peek=(F=1)=>s[$.index+F],ne=$.advance=()=>s[++$.index]||"",K=()=>s.slice($.index+1),X=(F="",D=0)=>{$.consumed+=F,$.index+=D},Y=F=>{$.output+=F.output!=null?F.output:F.value,X(F.value)},oe=()=>{let F=1;for(;W()==="!"&&(W(2)!=="("||W(3)==="?");)ne(),$.start++,F++;return F%2===0?!1:($.negated=!0,$.start++,!0)},V=F=>{$[F]++,ee.push(F)},J=F=>{$[F]--,ee.pop()},U=F=>{if(T.type==="globstar"){const D=$.braces>0&&(F.type==="comma"||F.type==="brace"),H=F.extglob===!0||re.length&&(F.type==="pipe"||F.type==="paren");F.type!=="slash"&&F.type!=="paren"&&!D&&!H&&($.output=$.output.slice(0,-T.output.length),T.type="star",T.value="*",T.output=B,$.output+=T.output)}if(re.length&&F.type!=="paren"&&(re[re.length-1].inner+=F.value),(F.value||F.output)&&Y(F),T&&T.type==="text"&&F.type==="text"){T.value+=F.value,T.output=(T.output||"")+F.value;return}F.prev=T,L.push(F),T=F},z=(F,D)=>{const H={...O[D],conditions:1,inner:""};H.prev=T,H.parens=$.parens,H.output=$.output;const Z=(a.capture?"(":"")+H.open;V("parens"),U({type:F,value:D,output:$.output?"":w}),U({type:"paren",extglob:!0,value:ne(),output:Z}),re.push(H)},he=F=>{let D=F.close+(a.capture?")":""),H;if(F.type==="negate"){let Z=B;if(F.inner&&F.inner.length>1&&F.inner.includes("/")&&(Z=G(a)),(Z!==B||j()||/^\)+$/.test(K()))&&(D=F.close=`)$))${Z}`),F.inner.includes("*")&&(H=K())&&/^\.[^\\/.]+$/.test(H)){const te=r(H,{...d,fastpaths:!1}).output;D=F.close=`)${te})${Z})`}F.prev.type==="bos"&&($.negatedExtglob=!0)}U({type:"paren",extglob:!0,value:S,output:D}),J("parens")};if(a.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(s)){let F=!1,D=s.replace(i,(H,Z,te,se,ie,ue)=>se==="\\"?(F=!0,H):se==="?"?Z?Z+se+(ie?y.repeat(ie.length):""):ue===0?Q+(ie?y.repeat(ie.length):""):y.repeat(te.length):se==="."?p.repeat(te.length):se==="*"?Z?Z+se+(ie?B:""):B:Z?H:`\\${H}`);return F===!0&&(a.unescape===!0?D=D.replace(/\\/g,""):D=D.replace(/\\+/g,H=>H.length%2===0?"\\\\":H?"\\":"")),D===s&&a.contains===!0?($.output=s,$):($.output=f.wrapOutput(D,$,d),$)}for(;!j();){if(S=ne(),S==="\0")continue;if(S==="\\"){const H=W();if(H==="/"&&a.bash!==!0||H==="."||H===";")continue;if(!H){S+="\\",U({type:"text",value:S});continue}const Z=/^\\+/.exec(K());let te=0;if(Z&&Z[0].length>2&&(te=Z[0].length,$.index+=te,te%2!==0&&(S+="\\")),a.unescape===!0?S=ne():S+=ne(),$.brackets===0){U({type:"text",value:S});continue}}if($.brackets>0&&(S!=="]"||T.value==="["||T.value==="[^")){if(a.posix!==!1&&S===":"){const H=T.value.slice(1);if(H.includes("[")&&(T.posix=!0,H.includes(":"))){const Z=T.value.lastIndexOf("["),te=T.value.slice(0,Z),se=T.value.slice(Z+2),ie=l[se];if(ie){T.value=te+ie,$.backtrack=!0,ne(),!x.output&&L.indexOf(T)===1&&(x.output=w);continue}}}(S==="["&&W()!==":"||S==="-"&&W()==="]")&&(S=`\\${S}`),S==="]"&&(T.value==="["||T.value==="[^")&&(S=`\\${S}`),a.posix===!0&&S==="!"&&T.value==="["&&(S="^"),T.value+=S,Y({value:S});continue}if($.quotes===1&&S!=='"'){S=f.escapeRegex(S),T.value+=S,Y({value:S});continue}if(S==='"'){$.quotes=$.quotes===1?0:1,a.keepQuotes===!0&&U({type:"text",value:S});continue}if(S==="("){V("parens"),U({type:"paren",value:S});continue}if(S===")"){if($.parens===0&&a.strictBrackets===!0)throw new SyntaxError(n("opening","("));const H=re[re.length-1];if(H&&$.parens===H.parens+1){he(re.pop());continue}U({type:"paren",value:S,output:$.parens?")":"\\)"}),J("parens");continue}if(S==="["){if(a.nobracket===!0||!K().includes("]")){if(a.nobracket!==!0&&a.strictBrackets===!0)throw new SyntaxError(n("closing","]"));S=`\\${S}`}else V("brackets");U({type:"bracket",value:S});continue}if(S==="]"){if(a.nobracket===!0||T&&T.type==="bracket"&&T.value.length===1){U({type:"text",value:S,output:`\\${S}`});continue}if($.brackets===0){if(a.strictBrackets===!0)throw new SyntaxError(n("opening","["));U({type:"text",value:S,output:`\\${S}`});continue}J("brackets");const H=T.value.slice(1);if(T.posix!==!0&&H[0]==="^"&&!H.includes("/")&&(S=`/${S}`),T.value+=S,Y({value:S}),a.literalBrackets===!1||f.hasRegexChars(H))continue;const Z=f.escapeRegex(T.value);if($.output=$.output.slice(0,-T.value.length),a.literalBrackets===!0){$.output+=Z,T.value=Z;continue}T.value=`(${c}${Z}|${T.value})`,$.output+=T.value;continue}if(S==="{"&&a.nobrace!==!0){V("braces");const H={type:"brace",value:S,output:"(",outputIndex:$.output.length,tokensIndex:$.tokens.length};M.push(H),U(H);continue}if(S==="}"){const H=M[M.length-1];if(a.nobrace===!0||!H){U({type:"text",value:S,output:S});continue}let Z=")";if(H.dots===!0){const te=L.slice(),se=[];for(let ie=te.length-1;ie>=0&&(L.pop(),te[ie].type!=="brace");ie--)te[ie].type!=="dots"&&se.unshift(te[ie].value);Z=t(se,a),$.backtrack=!0}if(H.comma!==!0&&H.dots!==!0){const te=$.output.slice(0,H.outputIndex),se=$.tokens.slice(H.tokensIndex);H.value=H.output="\\{",S=Z="\\}",$.output=te;for(const ie of se)$.output+=ie.output||ie.value}U({type:"brace",value:S,output:Z}),J("braces"),M.pop();continue}if(S==="|"){re.length>0&&re[re.length-1].conditions++,U({type:"text",value:S});continue}if(S===","){let H=S;const Z=M[M.length-1];Z&&ee[ee.length-1]==="braces"&&(Z.comma=!0,H="|"),U({type:"comma",value:S,output:H});continue}if(S==="/"){if(T.type==="dot"&&$.index===$.start+1){$.start=$.index+1,$.consumed="",$.output="",L.pop(),T=x;continue}U({type:"slash",value:S,output:A});continue}if(S==="."){if($.braces>0&&T.type==="dot"){T.value==="."&&(T.output=p);const H=M[M.length-1];T.type="dots",T.output+=S,T.value+=S,H.dots=!0;continue}if($.braces+$.parens===0&&T.type!=="bos"&&T.type!=="slash"){U({type:"text",value:S,output:p});continue}U({type:"dot",value:S,output:p});continue}if(S==="?"){if(!(T&&T.value==="(")&&a.noextglob!==!0&&W()==="("&&W(2)!=="?"){z("qmark",S);continue}if(T&&T.type==="paren"){const Z=W();let te=S;if(Z==="<"&&!f.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(T.value==="("&&!/[!=<:]/.test(Z)||Z==="<"&&!/<([!=]|\w+>)/.test(K()))&&(te=`\\${S}`),U({type:"text",value:S,output:te});continue}if(a.dot!==!0&&(T.type==="slash"||T.type==="bos")){U({type:"qmark",value:S,output:k});continue}U({type:"qmark",value:S,output:y});continue}if(S==="!"){if(a.noextglob!==!0&&W()==="("&&(W(2)!=="?"||!/[!=<:]/.test(W(3)))){z("negate",S);continue}if(a.nonegate!==!0&&$.index===0){oe();continue}}if(S==="+"){if(a.noextglob!==!0&&W()==="("&&W(2)!=="?"){z("plus",S);continue}if(T&&T.value==="("||a.regex===!1){U({type:"plus",value:S,output:E});continue}if(T&&(T.type==="bracket"||T.type==="paren"||T.type==="brace")||$.parens>0){U({type:"plus",value:S});continue}U({type:"plus",value:E});continue}if(S==="@"){if(a.noextglob!==!0&&W()==="("&&W(2)!=="?"){U({type:"at",extglob:!0,value:S,output:""});continue}U({type:"text",value:S});continue}if(S!=="*"){(S==="$"||S==="^")&&(S=`\\${S}`);const H=g.exec(K());H&&(S+=H[0],$.index+=H[0].length),U({type:"text",value:S});continue}if(T&&(T.type==="globstar"||T.star===!0)){T.type="star",T.star=!0,T.value+=S,T.output=B,$.backtrack=!0,$.globstar=!0,X(S);continue}let F=K();if(a.noextglob!==!0&&/^\([^?]/.test(F)){z("star",S);continue}if(T.type==="star"){if(a.noglobstar===!0){X(S);continue}const H=T.prev,Z=H.prev,te=H.type==="slash"||H.type==="bos",se=Z&&(Z.type==="star"||Z.type==="globstar");if(a.bash===!0&&(!te||F[0]&&F[0]!=="/")){U({type:"star",value:S,output:""});continue}const ie=$.braces>0&&(H.type==="comma"||H.type==="brace"),ue=re.length&&(H.type==="pipe"||H.type==="paren");if(!te&&H.type!=="paren"&&!ie&&!ue){U({type:"star",value:S,output:""});continue}for(;F.slice(0,3)==="/**";){const fe=s[$.index+4];if(fe&&fe!=="/")break;F=F.slice(3),X("/**",3)}if(H.type==="bos"&&j()){T.type="globstar",T.value+=S,T.output=G(a),$.output=T.output,$.globstar=!0,X(S);continue}if(H.type==="slash"&&H.prev.type!=="bos"&&!se&&j()){$.output=$.output.slice(0,-(H.output+T.output).length),H.output=`(?:${H.output}`,T.type="globstar",T.output=G(a)+(a.strictSlashes?")":"|$)"),T.value+=S,$.globstar=!0,$.output+=H.output+T.output,X(S);continue}if(H.type==="slash"&&H.prev.type!=="bos"&&F[0]==="/"){const fe=F[1]!==void 0?"|$":"";$.output=$.output.slice(0,-(H.output+T.output).length),H.output=`(?:${H.output}`,T.type="globstar",T.output=`${G(a)}${A}|${A}${fe})`,T.value+=S,$.output+=H.output+T.output,$.globstar=!0,X(S+ne()),U({type:"slash",value:"/",output:""});continue}if(H.type==="bos"&&F[0]==="/"){T.type="globstar",T.value+=S,T.output=`(?:^|${A}|${G(a)}${A})`,$.output=T.output,$.globstar=!0,X(S+ne()),U({type:"slash",value:"/",output:""});continue}$.output=$.output.slice(0,-T.output.length),T.type="globstar",T.output=G(a),T.value+=S,$.output+=T.output,$.globstar=!0,X(S);continue}const D={type:"star",value:S,output:B};if(a.bash===!0){D.output=".*?",(T.type==="bos"||T.type==="slash")&&(D.output=P+D.output),U(D);continue}if(T&&(T.type==="bracket"||T.type==="paren")&&a.regex===!0){D.output=S,U(D);continue}($.index===$.start||T.type==="slash"||T.type==="dot")&&(T.type==="dot"?($.output+=v,T.output+=v):a.dot===!0?($.output+=C,T.output+=C):($.output+=P,T.output+=P),W()!=="*"&&($.output+=w,T.output+=w)),U(D)}for(;$.brackets>0;){if(a.strictBrackets===!0)throw new SyntaxError(n("closing","]"));$.output=f.escapeLast($.output,"["),J("brackets")}for(;$.parens>0;){if(a.strictBrackets===!0)throw new SyntaxError(n("closing",")"));$.output=f.escapeLast($.output,"("),J("parens")}for(;$.braces>0;){if(a.strictBrackets===!0)throw new SyntaxError(n("closing","}"));$.output=f.escapeLast($.output,"{"),J("braces")}if(a.strictSlashes!==!0&&(T.type==="star"||T.type==="bracket")&&U({type:"maybe_slash",value:"",output:`${A}?`}),$.backtrack===!0){$.output="";for(const F of $.tokens)$.output+=F.output!=null?F.output:F.value,F.suffix&&($.output+=F.suffix)}return $};return r.fastpaths=(s,d)=>{const a={...d},R=typeof a.maxLength=="number"?Math.min(h,a.maxLength):h,N=s.length;if(N>R)throw new SyntaxError(`Input length: ${N}, exceeds maximum allowed length: ${R}`);s=e[s]||s;const x=f.isWindows(d),{DOT_LITERAL:L,SLASH_LITERAL:c,ONE_CHAR:_,DOTS_SLASH:m,NO_DOT:O,NO_DOTS:p,NO_DOTS_SLASH:E,STAR:A,START_ANCHOR:w}=b.globChars(x),o=a.dot?p:O,u=a.dot?E:O,v=a.capture?"":"?:",C={negated:!1,prefix:""};let y=a.bash===!0?".*?":A;a.capture&&(y=`(${y})`);const k=P=>P.noglobstar===!0?y:`(${v}(?:(?!${w}${P.dot?m:L}).)*?)`,I=P=>{switch(P){case"*":return`${o}${_}${y}`;case".*":return`${L}${_}${y}`;case"*.*":return`${o}${y}${L}${_}${y}`;case"*/*":return`${o}${y}${c}${_}${u}${y}`;case"**":return o+k(a);case"**/*":return`(?:${o}${k(a)}${c})?${u}${_}${y}`;case"**/*.*":return`(?:${o}${k(a)}${c})?${u}${y}${L}${_}${y}`;case"**/.*":return`(?:${o}${k(a)}${c})?${L}${_}${y}`;default:{const Q=/^(.*?)\.(\w+)$/.exec(P);if(!Q)return;const B=I(Q[1]);return B?B+L+Q[2]:void 0}}},q=f.removePrefix(s,C);let G=I(q);return G&&a.strictSlashes!==!0&&(G+=`${c}?`),G},We=r,We}var je,qt;function Tr(){if(qt)return je;qt=1;const b=qe(),f=xr(),h=Sr(),l=Ce(),g=ve(),i=t=>t&&typeof t=="object"&&!Array.isArray(t),e=(t,n,r=!1)=>{if(Array.isArray(t)){const c=t.map(m=>e(m,n,r));return m=>{for(const O of c){const p=O(m);if(p)return p}return!1}}const s=i(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");const d=n||{},a=l.isWindows(n),R=s?e.compileRe(t,n):e.makeRe(t,n,!1,!0),N=R.state;delete R.state;let x=()=>!1;if(d.ignore){const c={...n,ignore:null,onMatch:null,onResult:null};x=e(d.ignore,c,r)}const L=(c,_=!1)=>{const{isMatch:m,match:O,output:p}=e.test(c,R,n,{glob:t,posix:a}),E={glob:t,state:N,regex:R,posix:a,input:c,output:p,match:O,isMatch:m};return typeof d.onResult=="function"&&d.onResult(E),m===!1?(E.isMatch=!1,_?E:!1):x(c)?(typeof d.onIgnore=="function"&&d.onIgnore(E),E.isMatch=!1,_?E:!1):(typeof d.onMatch=="function"&&d.onMatch(E),_?E:!0)};return r&&(L.state=N),L};return e.test=(t,n,r,{glob:s,posix:d}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};const a=r||{},R=a.format||(d?l.toPosixSlashes:null);let N=t===s,x=N&&R?R(t):t;return N===!1&&(x=R?R(t):t,N=x===s),(N===!1||a.capture===!0)&&(a.matchBase===!0||a.basename===!0?N=e.matchBase(t,n,r,d):N=n.exec(x)),{isMatch:!!N,match:N,output:x}},e.matchBase=(t,n,r,s=l.isWindows(r))=>(n instanceof RegExp?n:e.makeRe(n,r)).test(b.basename(t)),e.isMatch=(t,n,r)=>e(n,r)(t),e.parse=(t,n)=>Array.isArray(t)?t.map(r=>e.parse(r,n)):h(t,{...n,fastpaths:!1}),e.scan=(t,n)=>f(t,n),e.compileRe=(t,n,r=!1,s=!1)=>{if(r===!0)return t.output;const d=n||{},a=d.contains?"":"^",R=d.contains?"":"$";let N=`${a}(?:${t.output})${R}`;t&&t.negated===!0&&(N=`^(?!${N}).*$`);const x=e.toRegex(N,n);return s===!0&&(x.state=t),x},e.makeRe=(t,n={},r=!1,s=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let d={negated:!1,fastpaths:!0};return n.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(d.output=h.fastpaths(t,n)),d.output||(d=h(t,n)),e.compileRe(d,n,r,s)},e.toRegex=(t,n)=>{try{const r=n||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(n&&n.debug===!0)throw r;return/$^/}},e.constants=g,je=e,je}var Xe,Gt;function Or(){return Gt||(Gt=1,Xe=Tr()),Xe}var Ve,zt;function $r(){if(zt)return Ve;zt=1;const b=Ct,f=Nr(),h=Or(),l=Ce(),g=t=>t===""||t==="./",i=t=>{const n=t.indexOf("{");return n>-1&&t.indexOf("}",n)>-1},e=(t,n,r)=>{n=[].concat(n),t=[].concat(t);let s=new Set,d=new Set,a=new Set,R=0,N=c=>{a.add(c.output),r&&r.onResult&&r.onResult(c)};for(let c=0;c<n.length;c++){let _=h(String(n[c]),{...r,onResult:N},!0),m=_.state.negated||_.state.negatedExtglob;m&&R++;for(let O of t){let p=_(O,!0);(m?!p.isMatch:p.isMatch)&&(m?s.add(p.output):(s.delete(p.output),d.add(p.output)))}}let L=(R===n.length?[...a]:[...d]).filter(c=>!s.has(c));if(r&&L.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${n.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?n.map(c=>c.replace(/\\/g,"")):n}return L};return e.match=e,e.matcher=(t,n)=>h(t,n),e.isMatch=(t,n,r)=>h(n,r)(t),e.any=e.isMatch,e.not=(t,n,r={})=>{n=[].concat(n).map(String);let s=new Set,d=[],a=N=>{r.onResult&&r.onResult(N),d.push(N.output)},R=new Set(e(t,n,{...r,onResult:a}));for(let N of d)R.has(N)||s.add(N);return[...s]},e.contains=(t,n,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${b.inspect(t)}"`);if(Array.isArray(n))return n.some(s=>e.contains(t,s,r));if(typeof n=="string"){if(g(t)||g(n))return!1;if(t.includes(n)||t.startsWith("./")&&t.slice(2).includes(n))return!0}return e.isMatch(t,n,{...r,contains:!0})},e.matchKeys=(t,n,r)=>{if(!l.isObject(t))throw new TypeError("Expected the first argument to be an object");let s=e(Object.keys(t),n,r),d={};for(let a of s)d[a]=t[a];return d},e.some=(t,n,r)=>{let s=[].concat(t);for(let d of[].concat(n)){let a=h(String(d),r);if(s.some(R=>a(R)))return!0}return!1},e.every=(t,n,r)=>{let s=[].concat(t);for(let d of[].concat(n)){let a=h(String(d),r);if(!s.every(R=>a(R)))return!1}return!0},e.all=(t,n,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${b.inspect(t)}"`);return[].concat(n).every(s=>h(s,r)(t))},e.capture=(t,n,r)=>{let s=l.isWindows(r),a=h.makeRe(String(t),{...r,capture:!0}).exec(s?l.toPosixSlashes(n):n);if(a)return a.slice(1).map(R=>R===void 0?"":R)},e.makeRe=(...t)=>h.makeRe(...t),e.scan=(...t)=>h.scan(...t),e.parse=(t,n)=>{let r=[];for(let s of[].concat(t||[]))for(let d of f(String(s),n))r.push(h.parse(d,n));return r},e.braces=(t,n)=>{if(typeof t!="string")throw new TypeError("Expected a string");return n&&n.nobrace===!0||!i(t)?[t]:f(t,n)},e.braceExpand=(t,n)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e.braces(t,{...n,expand:!0})},e.hasBraces=i,Ve=e,Ve}var Lr=$r(),ye=xe(Lr),Ze,Kt;function Ir(){return Kt||(Kt=1,Ze=function b(f,h){var l=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,g=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,e=/^0x[0-9a-f]+$/i,t=/^0/,n=function(m){return b.insensitive&&(""+m).toLowerCase()||""+m},r=n(f).replace(g,"")||"",s=n(h).replace(g,"")||"",d=r.replace(l,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),a=s.replace(l,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),R=parseInt(r.match(e),16)||d.length!==1&&r.match(i)&&Date.parse(r),N=parseInt(s.match(e),16)||R&&s.match(i)&&Date.parse(s)||null,x,L;if(N){if(R<N)return-1;if(R>N)return 1}for(var c=0,_=Math.max(d.length,a.length);c<_;c++){if(x=!(d[c]||"").match(t)&&parseFloat(d[c])||d[c]||0,L=!(a[c]||"").match(t)&&parseFloat(a[c])||a[c]||0,isNaN(x)!==isNaN(L))return isNaN(x)?1:-1;if(typeof x!=typeof L&&(x+="",L+=""),x<L)return-1;if(x>L)return 1}return 0}),Ze}var kr=Ir(),Qe=xe(kr),Ye={},Je={},Wt;function De(){return Wt||(Wt=1,(function(b){const f=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",h=f+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+f+"]["+h+"]*",g=new RegExp("^"+l+"$"),i=function(t,n){const r=[];let s=n.exec(t);for(;s;){const d=[];d.startIndex=n.lastIndex-s[0].length;const a=s.length;for(let R=0;R<a;R++)d.push(s[R]);r.push(d),s=n.exec(t)}return r},e=function(t){const n=g.exec(t);return!(n===null||typeof n>"u")};b.isExist=function(t){return typeof t<"u"},b.isEmptyObject=function(t){return Object.keys(t).length===0},b.merge=function(t,n,r){if(n){const s=Object.keys(n),d=s.length;for(let a=0;a<d;a++)r==="strict"?t[s[a]]=[n[s[a]]]:t[s[a]]=n[s[a]]}},b.getValue=function(t){return b.isExist(t)?t:""},b.isName=e,b.getAllMatches=i,b.nameRegexp=l})(Je)),Je}var jt;function Xt(){if(jt)return Ye;jt=1;const b=De(),f={allowBooleanAttributes:!1,unpairedTags:[]};Ye.validate=function(c,_){_=Object.assign({},f,_);const m=[];let O=!1,p=!1;c[0]==="\uFEFF"&&(c=c.substr(1));for(let E=0;E<c.length;E++)if(c[E]==="<"&&c[E+1]==="?"){if(E+=2,E=l(c,E),E.err)return E}else if(c[E]==="<"){let A=E;if(E++,c[E]==="!"){E=g(c,E);continue}else{let w=!1;c[E]==="/"&&(w=!0,E++);let o="";for(;E<c.length&&c[E]!==">"&&c[E]!==" "&&c[E]!=="	"&&c[E]!==`
`&&c[E]!=="\r";E++)o+=c[E];if(o=o.trim(),o[o.length-1]==="/"&&(o=o.substring(0,o.length-1),E--),!N(o)){let C;return o.trim().length===0?C="Invalid space after '<'.":C="Tag '"+o+"' is an invalid name.",a("InvalidTag",C,x(c,E))}const u=t(c,E);if(u===!1)return a("InvalidAttr","Attributes for '"+o+"' have open quote.",x(c,E));let v=u.value;if(E=u.index,v[v.length-1]==="/"){const C=E-v.length;v=v.substring(0,v.length-1);const y=r(v,_);if(y===!0)O=!0;else return a(y.err.code,y.err.msg,x(c,C+y.err.line))}else if(w)if(u.tagClosed){if(v.trim().length>0)return a("InvalidTag","Closing tag '"+o+"' can't have attributes or invalid starting.",x(c,A));if(m.length===0)return a("InvalidTag","Closing tag '"+o+"' has not been opened.",x(c,A));{const C=m.pop();if(o!==C.tagName){let y=x(c,C.tagStartPos);return a("InvalidTag","Expected closing tag '"+C.tagName+"' (opened in line "+y.line+", col "+y.col+") instead of closing tag '"+o+"'.",x(c,A))}m.length==0&&(p=!0)}}else return a("InvalidTag","Closing tag '"+o+"' doesn't have proper closing.",x(c,E));else{const C=r(v,_);if(C!==!0)return a(C.err.code,C.err.msg,x(c,E-v.length+C.err.line));if(p===!0)return a("InvalidXml","Multiple possible root nodes found.",x(c,E));_.unpairedTags.indexOf(o)!==-1||m.push({tagName:o,tagStartPos:A}),O=!0}for(E++;E<c.length;E++)if(c[E]==="<")if(c[E+1]==="!"){E++,E=g(c,E);continue}else if(c[E+1]==="?"){if(E=l(c,++E),E.err)return E}else break;else if(c[E]==="&"){const C=d(c,E);if(C==-1)return a("InvalidChar","char '&' is not expected.",x(c,E));E=C}else if(p===!0&&!h(c[E]))return a("InvalidXml","Extra text at the end",x(c,E));c[E]==="<"&&E--}}else{if(h(c[E]))continue;return a("InvalidChar","char '"+c[E]+"' is not expected.",x(c,E))}if(O){if(m.length==1)return a("InvalidTag","Unclosed tag '"+m[0].tagName+"'.",x(c,m[0].tagStartPos));if(m.length>0)return a("InvalidXml","Invalid '"+JSON.stringify(m.map(E=>E.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return a("InvalidXml","Start tag expected.",1);return!0};function h(c){return c===" "||c==="	"||c===`
`||c==="\r"}function l(c,_){const m=_;for(;_<c.length;_++)if(c[_]=="?"||c[_]==" "){const O=c.substr(m,_-m);if(_>5&&O==="xml")return a("InvalidXml","XML declaration allowed only at the start of the document.",x(c,_));if(c[_]=="?"&&c[_+1]==">"){_++;break}else continue}return _}function g(c,_){if(c.length>_+5&&c[_+1]==="-"&&c[_+2]==="-"){for(_+=3;_<c.length;_++)if(c[_]==="-"&&c[_+1]==="-"&&c[_+2]===">"){_+=2;break}}else if(c.length>_+8&&c[_+1]==="D"&&c[_+2]==="O"&&c[_+3]==="C"&&c[_+4]==="T"&&c[_+5]==="Y"&&c[_+6]==="P"&&c[_+7]==="E"){let m=1;for(_+=8;_<c.length;_++)if(c[_]==="<")m++;else if(c[_]===">"&&(m--,m===0))break}else if(c.length>_+9&&c[_+1]==="["&&c[_+2]==="C"&&c[_+3]==="D"&&c[_+4]==="A"&&c[_+5]==="T"&&c[_+6]==="A"&&c[_+7]==="["){for(_+=8;_<c.length;_++)if(c[_]==="]"&&c[_+1]==="]"&&c[_+2]===">"){_+=2;break}}return _}const i='"',e="'";function t(c,_){let m="",O="",p=!1;for(;_<c.length;_++){if(c[_]===i||c[_]===e)O===""?O=c[_]:O!==c[_]||(O="");else if(c[_]===">"&&O===""){p=!0;break}m+=c[_]}return O!==""?!1:{value:m,index:_,tagClosed:p}}const n=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function r(c,_){const m=b.getAllMatches(c,n),O={};for(let p=0;p<m.length;p++){if(m[p][1].length===0)return a("InvalidAttr","Attribute '"+m[p][2]+"' has no space in starting.",L(m[p]));if(m[p][3]!==void 0&&m[p][4]===void 0)return a("InvalidAttr","Attribute '"+m[p][2]+"' is without value.",L(m[p]));if(m[p][3]===void 0&&!_.allowBooleanAttributes)return a("InvalidAttr","boolean attribute '"+m[p][2]+"' is not allowed.",L(m[p]));const E=m[p][2];if(!R(E))return a("InvalidAttr","Attribute '"+E+"' is an invalid name.",L(m[p]));if(!O.hasOwnProperty(E))O[E]=1;else return a("InvalidAttr","Attribute '"+E+"' is repeated.",L(m[p]))}return!0}function s(c,_){let m=/\d/;for(c[_]==="x"&&(_++,m=/[\da-fA-F]/);_<c.length;_++){if(c[_]===";")return _;if(!c[_].match(m))break}return-1}function d(c,_){if(_++,c[_]===";")return-1;if(c[_]==="#")return _++,s(c,_);let m=0;for(;_<c.length;_++,m++)if(!(c[_].match(/\w/)&&m<20)){if(c[_]===";")break;return-1}return _}function a(c,_,m){return{err:{code:c,msg:_,line:m.line||m,col:m.col}}}function R(c){return b.isName(c)}function N(c){return b.isName(c)}function x(c,_){const m=c.substring(0,_).split(/\r?\n/);return{line:m.length,col:m[m.length-1].length+1}}function L(c){return c.startIndex+c[1].length}return Ye}var we={},Vt;function Hr(){if(Vt)return we;Vt=1;const b={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(h,l){return l},attributeValueProcessor:function(h,l){return l},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(h,l,g){return h}},f=function(h){return Object.assign({},b,h)};return we.buildOptions=f,we.defaultOptions=b,we}var et,Zt;function Pr(){if(Zt)return et;Zt=1;class b{constructor(h){this.tagname=h,this.child=[],this[":@"]={}}add(h,l){h==="__proto__"&&(h="#__proto__"),this.child.push({[h]:l})}addChild(h){h.tagname==="__proto__"&&(h.tagname="#__proto__"),h[":@"]&&Object.keys(h[":@"]).length>0?this.child.push({[h.tagname]:h.child,":@":h[":@"]}):this.child.push({[h.tagname]:h.child})}}return et=b,et}var tt,Qt;function Fr(){if(Qt)return tt;Qt=1;const b=De();function f(r,s){const d={};if(r[s+3]==="O"&&r[s+4]==="C"&&r[s+5]==="T"&&r[s+6]==="Y"&&r[s+7]==="P"&&r[s+8]==="E"){s=s+9;let a=1,R=!1,N=!1,x="";for(;s<r.length;s++)if(r[s]==="<"&&!N){if(R&&g(r,s)){s+=7;let L,c;[L,c,s]=h(r,s+1),c.indexOf("&")===-1&&(d[n(L)]={regx:RegExp(`&${L};`,"g"),val:c})}else if(R&&i(r,s))s+=8;else if(R&&e(r,s))s+=8;else if(R&&t(r,s))s+=9;else if(l)N=!0;else throw new Error("Invalid DOCTYPE");a++,x=""}else if(r[s]===">"){if(N?r[s-1]==="-"&&r[s-2]==="-"&&(N=!1,a--):a--,a===0)break}else r[s]==="["?R=!0:x+=r[s];if(a!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:d,i:s}}function h(r,s){let d="";for(;s<r.length&&r[s]!=="'"&&r[s]!=='"';s++)d+=r[s];if(d=d.trim(),d.indexOf(" ")!==-1)throw new Error("External entites are not supported");const a=r[s++];let R="";for(;s<r.length&&r[s]!==a;s++)R+=r[s];return[d,R,s]}function l(r,s){return r[s+1]==="!"&&r[s+2]==="-"&&r[s+3]==="-"}function g(r,s){return r[s+1]==="!"&&r[s+2]==="E"&&r[s+3]==="N"&&r[s+4]==="T"&&r[s+5]==="I"&&r[s+6]==="T"&&r[s+7]==="Y"}function i(r,s){return r[s+1]==="!"&&r[s+2]==="E"&&r[s+3]==="L"&&r[s+4]==="E"&&r[s+5]==="M"&&r[s+6]==="E"&&r[s+7]==="N"&&r[s+8]==="T"}function e(r,s){return r[s+1]==="!"&&r[s+2]==="A"&&r[s+3]==="T"&&r[s+4]==="T"&&r[s+5]==="L"&&r[s+6]==="I"&&r[s+7]==="S"&&r[s+8]==="T"}function t(r,s){return r[s+1]==="!"&&r[s+2]==="N"&&r[s+3]==="O"&&r[s+4]==="T"&&r[s+5]==="A"&&r[s+6]==="T"&&r[s+7]==="I"&&r[s+8]==="O"&&r[s+9]==="N"}function n(r){if(b.isName(r))return r;throw new Error(`Invalid entity name ${r}`)}return tt=f,tt}var rt,Yt;function Mr(){if(Yt)return rt;Yt=1;const b=/^[-+]?0x[a-fA-F0-9]+$/,f=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,h={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function l(e,t={}){if(t=Object.assign({},h,t),!e||typeof e!="string")return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(e==="0")return 0;if(t.hex&&b.test(n))return i(n,16);if(n.search(/[eE]/)!==-1){const r=n.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(r){if(t.leadingZeros)n=(r[1]||"")+r[3];else if(!(r[2]==="0"&&r[3][0]==="."))return e;return t.eNotation?Number(n):e}else return e}else{const r=f.exec(n);if(r){const s=r[1],d=r[2];let a=g(r[3]);if(!t.leadingZeros&&d.length>0&&s&&n[2]!==".")return e;if(!t.leadingZeros&&d.length>0&&!s&&n[1]!==".")return e;if(t.leadingZeros&&d===e)return 0;{const R=Number(n),N=""+R;return N.search(/[eE]/)!==-1?t.eNotation?R:e:n.indexOf(".")!==-1?N==="0"&&a===""||N===a||s&&N==="-"+a?R:e:d?a===N||s+a===N?R:e:n===N||n===s+N?R:e}}else return e}}function g(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}function i(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}return rt=l,rt}var nt,Jt;function Dt(){if(Jt)return nt;Jt=1;function b(f){return typeof f=="function"?f:Array.isArray(f)?h=>{for(const l of f)if(typeof l=="string"&&h===l||l instanceof RegExp&&l.test(h))return!0}:()=>!1}return nt=b,nt}var st,er;function Br(){if(er)return st;er=1;const b=De(),f=Pr(),h=Fr(),l=Mr(),g=Dt();class i{constructor(E){this.options=E,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(A,w)=>String.fromCharCode(Number.parseInt(w,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(A,w)=>String.fromCharCode(Number.parseInt(w,16))}},this.addExternalEntities=e,this.parseXml=d,this.parseTextData=t,this.resolveNameSpace=n,this.buildAttributesMap=s,this.isItStopNode=x,this.replaceEntitiesValue=R,this.readStopNodeData=m,this.saveTextToParentTag=N,this.addChild=a,this.ignoreAttributesFn=g(this.options.ignoreAttributes)}}function e(p){const E=Object.keys(p);for(let A=0;A<E.length;A++){const w=E[A];this.lastEntities[w]={regex:new RegExp("&"+w+";","g"),val:p[w]}}}function t(p,E,A,w,o,u,v){if(p!==void 0&&(this.options.trimValues&&!w&&(p=p.trim()),p.length>0)){v||(p=this.replaceEntitiesValue(p));const C=this.options.tagValueProcessor(E,p,A,o,u);return C==null?p:typeof C!=typeof p||C!==p?C:this.options.trimValues?O(p,this.options.parseTagValue,this.options.numberParseOptions):p.trim()===p?O(p,this.options.parseTagValue,this.options.numberParseOptions):p}}function n(p){if(this.options.removeNSPrefix){const E=p.split(":"),A=p.charAt(0)==="/"?"/":"";if(E[0]==="xmlns")return"";E.length===2&&(p=A+E[1])}return p}const r=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function s(p,E,A){if(this.options.ignoreAttributes!==!0&&typeof p=="string"){const w=b.getAllMatches(p,r),o=w.length,u={};for(let v=0;v<o;v++){const C=this.resolveNameSpace(w[v][1]);if(this.ignoreAttributesFn(C,E))continue;let y=w[v][4],k=this.options.attributeNamePrefix+C;if(C.length)if(this.options.transformAttributeName&&(k=this.options.transformAttributeName(k)),k==="__proto__"&&(k="#__proto__"),y!==void 0){this.options.trimValues&&(y=y.trim()),y=this.replaceEntitiesValue(y);const I=this.options.attributeValueProcessor(C,y,E);I==null?u[k]=y:typeof I!=typeof y||I!==y?u[k]=I:u[k]=O(y,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(u[k]=!0)}if(!Object.keys(u).length)return;if(this.options.attributesGroupName){const v={};return v[this.options.attributesGroupName]=u,v}return u}}const d=function(p){p=p.replace(/\r\n?/g,`
`);const E=new f("!xml");let A=E,w="",o="";for(let u=0;u<p.length;u++)if(p[u]==="<")if(p[u+1]==="/"){const C=c(p,">",u,"Closing Tag is not closed.");let y=p.substring(u+2,C).trim();if(this.options.removeNSPrefix){const q=y.indexOf(":");q!==-1&&(y=y.substr(q+1))}this.options.transformTagName&&(y=this.options.transformTagName(y)),A&&(w=this.saveTextToParentTag(w,A,o));const k=o.substring(o.lastIndexOf(".")+1);if(y&&this.options.unpairedTags.indexOf(y)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${y}>`);let I=0;k&&this.options.unpairedTags.indexOf(k)!==-1?(I=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):I=o.lastIndexOf("."),o=o.substring(0,I),A=this.tagsNodeStack.pop(),w="",u=C}else if(p[u+1]==="?"){let C=_(p,u,!1,"?>");if(!C)throw new Error("Pi Tag is not closed.");if(w=this.saveTextToParentTag(w,A,o),!(this.options.ignoreDeclaration&&C.tagName==="?xml"||this.options.ignorePiTags)){const y=new f(C.tagName);y.add(this.options.textNodeName,""),C.tagName!==C.tagExp&&C.attrExpPresent&&(y[":@"]=this.buildAttributesMap(C.tagExp,o,C.tagName)),this.addChild(A,y,o)}u=C.closeIndex+1}else if(p.substr(u+1,3)==="!--"){const C=c(p,"-->",u+4,"Comment is not closed.");if(this.options.commentPropName){const y=p.substring(u+4,C-2);w=this.saveTextToParentTag(w,A,o),A.add(this.options.commentPropName,[{[this.options.textNodeName]:y}])}u=C}else if(p.substr(u+1,2)==="!D"){const C=h(p,u);this.docTypeEntities=C.entities,u=C.i}else if(p.substr(u+1,2)==="!["){const C=c(p,"]]>",u,"CDATA is not closed.")-2,y=p.substring(u+9,C);w=this.saveTextToParentTag(w,A,o);let k=this.parseTextData(y,A.tagname,o,!0,!1,!0,!0);k==null&&(k=""),this.options.cdataPropName?A.add(this.options.cdataPropName,[{[this.options.textNodeName]:y}]):A.add(this.options.textNodeName,k),u=C+2}else{let C=_(p,u,this.options.removeNSPrefix),y=C.tagName;const k=C.rawTagName;let I=C.tagExp,q=C.attrExpPresent,G=C.closeIndex;this.options.transformTagName&&(y=this.options.transformTagName(y)),A&&w&&A.tagname!=="!xml"&&(w=this.saveTextToParentTag(w,A,o,!1));const P=A;if(P&&this.options.unpairedTags.indexOf(P.tagname)!==-1&&(A=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),y!==E.tagname&&(o+=o?"."+y:y),this.isItStopNode(this.options.stopNodes,o,y)){let Q="";if(I.length>0&&I.lastIndexOf("/")===I.length-1)y[y.length-1]==="/"?(y=y.substr(0,y.length-1),o=o.substr(0,o.length-1),I=y):I=I.substr(0,I.length-1),u=C.closeIndex;else if(this.options.unpairedTags.indexOf(y)!==-1)u=C.closeIndex;else{const $=this.readStopNodeData(p,k,G+1);if(!$)throw new Error(`Unexpected end of ${k}`);u=$.i,Q=$.tagContent}const B=new f(y);y!==I&&q&&(B[":@"]=this.buildAttributesMap(I,o,y)),Q&&(Q=this.parseTextData(Q,y,o,!0,q,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),B.add(this.options.textNodeName,Q),this.addChild(A,B,o)}else{if(I.length>0&&I.lastIndexOf("/")===I.length-1){y[y.length-1]==="/"?(y=y.substr(0,y.length-1),o=o.substr(0,o.length-1),I=y):I=I.substr(0,I.length-1),this.options.transformTagName&&(y=this.options.transformTagName(y));const Q=new f(y);y!==I&&q&&(Q[":@"]=this.buildAttributesMap(I,o,y)),this.addChild(A,Q,o),o=o.substr(0,o.lastIndexOf("."))}else{const Q=new f(y);this.tagsNodeStack.push(A),y!==I&&q&&(Q[":@"]=this.buildAttributesMap(I,o,y)),this.addChild(A,Q,o),A=Q}w="",u=G}}else w+=p[u];return E.child};function a(p,E,A){const w=this.options.updateTag(E.tagname,A,E[":@"]);w===!1||(typeof w=="string"&&(E.tagname=w),p.addChild(E))}const R=function(p){if(this.options.processEntities){for(let E in this.docTypeEntities){const A=this.docTypeEntities[E];p=p.replace(A.regx,A.val)}for(let E in this.lastEntities){const A=this.lastEntities[E];p=p.replace(A.regex,A.val)}if(this.options.htmlEntities)for(let E in this.htmlEntities){const A=this.htmlEntities[E];p=p.replace(A.regex,A.val)}p=p.replace(this.ampEntity.regex,this.ampEntity.val)}return p};function N(p,E,A,w){return p&&(w===void 0&&(w=E.child.length===0),p=this.parseTextData(p,E.tagname,A,!1,E[":@"]?Object.keys(E[":@"]).length!==0:!1,w),p!==void 0&&p!==""&&E.add(this.options.textNodeName,p),p=""),p}function x(p,E,A){const w="*."+A;for(const o in p){const u=p[o];if(w===u||E===u)return!0}return!1}function L(p,E,A=">"){let w,o="";for(let u=E;u<p.length;u++){let v=p[u];if(w)v===w&&(w="");else if(v==='"'||v==="'")w=v;else if(v===A[0])if(A[1]){if(p[u+1]===A[1])return{data:o,index:u}}else return{data:o,index:u};else v==="	"&&(v=" ");o+=v}}function c(p,E,A,w){const o=p.indexOf(E,A);if(o===-1)throw new Error(w);return o+E.length-1}function _(p,E,A,w=">"){const o=L(p,E+1,w);if(!o)return;let u=o.data;const v=o.index,C=u.search(/\s/);let y=u,k=!0;C!==-1&&(y=u.substring(0,C),u=u.substring(C+1).trimStart());const I=y;if(A){const q=y.indexOf(":");q!==-1&&(y=y.substr(q+1),k=y!==o.data.substr(q+1))}return{tagName:y,tagExp:u,closeIndex:v,attrExpPresent:k,rawTagName:I}}function m(p,E,A){const w=A;let o=1;for(;A<p.length;A++)if(p[A]==="<")if(p[A+1]==="/"){const u=c(p,">",A,`${E} is not closed`);if(p.substring(A+2,u).trim()===E&&(o--,o===0))return{tagContent:p.substring(w,A),i:u};A=u}else if(p[A+1]==="?")A=c(p,"?>",A+1,"StopNode is not closed.");else if(p.substr(A+1,3)==="!--")A=c(p,"-->",A+3,"StopNode is not closed.");else if(p.substr(A+1,2)==="![")A=c(p,"]]>",A,"StopNode is not closed.")-2;else{const u=_(p,A,">");u&&((u&&u.tagName)===E&&u.tagExp[u.tagExp.length-1]!=="/"&&o++,A=u.closeIndex)}}function O(p,E,A){if(E&&typeof p=="string"){const w=p.trim();return w==="true"?!0:w==="false"?!1:l(p,A)}else return b.isExist(p)?p:""}return st=i,st}var it={},tr;function Ur(){if(tr)return it;tr=1;function b(i,e){return f(i,e)}function f(i,e,t){let n;const r={};for(let s=0;s<i.length;s++){const d=i[s],a=h(d);let R="";if(t===void 0?R=a:R=t+"."+a,a===e.textNodeName)n===void 0?n=d[a]:n+=""+d[a];else{if(a===void 0)continue;if(d[a]){let N=f(d[a],e,R);const x=g(N,e);d[":@"]?l(N,d[":@"],R,e):Object.keys(N).length===1&&N[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?N=N[e.textNodeName]:Object.keys(N).length===0&&(e.alwaysCreateTextNode?N[e.textNodeName]="":N=""),r[a]!==void 0&&r.hasOwnProperty(a)?(Array.isArray(r[a])||(r[a]=[r[a]]),r[a].push(N)):e.isArray(a,R,x)?r[a]=[N]:r[a]=N}}}return typeof n=="string"?n.length>0&&(r[e.textNodeName]=n):n!==void 0&&(r[e.textNodeName]=n),r}function h(i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const n=e[t];if(n!==":@")return n}}function l(i,e,t,n){if(e){const r=Object.keys(e),s=r.length;for(let d=0;d<s;d++){const a=r[d];n.isArray(a,t+"."+a,!0,!0)?i[a]=[e[a]]:i[a]=e[a]}}}function g(i,e){const{textNodeName:t}=e,n=Object.keys(i).length;return!!(n===0||n===1&&(i[t]||typeof i[t]=="boolean"||i[t]===0))}return it.prettify=b,it}var ot,rr;function qr(){if(rr)return ot;rr=1;const{buildOptions:b}=Hr(),f=Br(),{prettify:h}=Ur(),l=Xt();class g{constructor(e){this.externalEntities={},this.options=b(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const s=l.validate(e,t);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const n=new f(this.options);n.addExternalEntities(this.externalEntities);const r=n.parseXml(e);return this.options.preserveOrder||r===void 0?r:h(r,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}}return ot=g,ot}var at,nr;function Gr(){if(nr)return at;nr=1;const b=`
`;function f(t,n){let r="";return n.format&&n.indentBy.length>0&&(r=b),h(t,n,"",r)}function h(t,n,r,s){let d="",a=!1;for(let R=0;R<t.length;R++){const N=t[R],x=l(N);if(x===void 0)continue;let L="";if(r.length===0?L=x:L=`${r}.${x}`,x===n.textNodeName){let p=N[x];i(L,n)||(p=n.tagValueProcessor(x,p),p=e(p,n)),a&&(d+=s),d+=p,a=!1;continue}else if(x===n.cdataPropName){a&&(d+=s),d+=`<![CDATA[${N[x][0][n.textNodeName]}]]>`,a=!1;continue}else if(x===n.commentPropName){d+=s+`<!--${N[x][0][n.textNodeName]}-->`,a=!0;continue}else if(x[0]==="?"){const p=g(N[":@"],n),E=x==="?xml"?"":s;let A=N[x][0][n.textNodeName];A=A.length!==0?" "+A:"",d+=E+`<${x}${A}${p}?>`,a=!0;continue}let c=s;c!==""&&(c+=n.indentBy);const _=g(N[":@"],n),m=s+`<${x}${_}`,O=h(N[x],n,L,c);n.unpairedTags.indexOf(x)!==-1?n.suppressUnpairedNode?d+=m+">":d+=m+"/>":(!O||O.length===0)&&n.suppressEmptyNode?d+=m+"/>":O&&O.endsWith(">")?d+=m+`>${O}${s}</${x}>`:(d+=m+">",O&&s!==""&&(O.includes("/>")||O.includes("</"))?d+=s+n.indentBy+O+s:d+=O,d+=`</${x}>`),a=!0}return d}function l(t){const n=Object.keys(t);for(let r=0;r<n.length;r++){const s=n[r];if(t.hasOwnProperty(s)&&s!==":@")return s}}function g(t,n){let r="";if(t&&!n.ignoreAttributes)for(let s in t){if(!t.hasOwnProperty(s))continue;let d=n.attributeValueProcessor(s,t[s]);d=e(d,n),d===!0&&n.suppressBooleanAttributes?r+=` ${s.substr(n.attributeNamePrefix.length)}`:r+=` ${s.substr(n.attributeNamePrefix.length)}="${d}"`}return r}function i(t,n){t=t.substr(0,t.length-n.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let s in n.stopNodes)if(n.stopNodes[s]===t||n.stopNodes[s]==="*."+r)return!0;return!1}function e(t,n){if(t&&t.length>0&&n.processEntities)for(let r=0;r<n.entities.length;r++){const s=n.entities[r];t=t.replace(s.regex,s.val)}return t}return at=f,at}var ut,sr;function zr(){if(sr)return ut;sr=1;const b=Gr(),f=Dt(),h={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,n){return n},attributeValueProcessor:function(t,n){return n},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function l(t){this.options=Object.assign({},h,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=f(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=e),this.processTextOrObjNode=g,this.options.format?(this.indentate=i,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}l.prototype.build=function(t){return this.options.preserveOrder?b(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)},l.prototype.j2x=function(t,n,r){let s="",d="";const a=r.join(".");for(let R in t)if(Object.prototype.hasOwnProperty.call(t,R))if(typeof t[R]>"u")this.isAttribute(R)&&(d+="");else if(t[R]===null)this.isAttribute(R)||R===this.options.cdataPropName?d+="":R[0]==="?"?d+=this.indentate(n)+"<"+R+"?"+this.tagEndChar:d+=this.indentate(n)+"<"+R+"/"+this.tagEndChar;else if(t[R]instanceof Date)d+=this.buildTextValNode(t[R],R,"",n);else if(typeof t[R]!="object"){const N=this.isAttribute(R);if(N&&!this.ignoreAttributesFn(N,a))s+=this.buildAttrPairStr(N,""+t[R]);else if(!N)if(R===this.options.textNodeName){let x=this.options.tagValueProcessor(R,""+t[R]);d+=this.replaceEntitiesValue(x)}else d+=this.buildTextValNode(t[R],R,"",n)}else if(Array.isArray(t[R])){const N=t[R].length;let x="",L="";for(let c=0;c<N;c++){const _=t[R][c];if(!(typeof _>"u"))if(_===null)R[0]==="?"?d+=this.indentate(n)+"<"+R+"?"+this.tagEndChar:d+=this.indentate(n)+"<"+R+"/"+this.tagEndChar;else if(typeof _=="object")if(this.options.oneListGroup){const m=this.j2x(_,n+1,r.concat(R));x+=m.val,this.options.attributesGroupName&&_.hasOwnProperty(this.options.attributesGroupName)&&(L+=m.attrStr)}else x+=this.processTextOrObjNode(_,R,n,r);else if(this.options.oneListGroup){let m=this.options.tagValueProcessor(R,_);m=this.replaceEntitiesValue(m),x+=m}else x+=this.buildTextValNode(_,R,"",n)}this.options.oneListGroup&&(x=this.buildObjectNode(x,R,L,n)),d+=x}else if(this.options.attributesGroupName&&R===this.options.attributesGroupName){const N=Object.keys(t[R]),x=N.length;for(let L=0;L<x;L++)s+=this.buildAttrPairStr(N[L],""+t[R][N[L]])}else d+=this.processTextOrObjNode(t[R],R,n,r);return{attrStr:s,val:d}},l.prototype.buildAttrPairStr=function(t,n){return n=this.options.attributeValueProcessor(t,""+n),n=this.replaceEntitiesValue(n),this.options.suppressBooleanAttributes&&n==="true"?" "+t:" "+t+'="'+n+'"'};function g(t,n,r,s){const d=this.j2x(t,r+1,s.concat(n));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],n,d.attrStr,r):this.buildObjectNode(d.val,n,d.attrStr,r)}l.prototype.buildObjectNode=function(t,n,r,s){if(t==="")return n[0]==="?"?this.indentate(s)+"<"+n+r+"?"+this.tagEndChar:this.indentate(s)+"<"+n+r+this.closeTag(n)+this.tagEndChar;{let d="</"+n+this.tagEndChar,a="";return n[0]==="?"&&(a="?",d=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(s)+"<"+n+r+a+">"+t+d:this.options.commentPropName!==!1&&n===this.options.commentPropName&&a.length===0?this.indentate(s)+`<!--${t}-->`+this.newLine:this.indentate(s)+"<"+n+r+a+this.tagEndChar+t+this.indentate(s)+d}},l.prototype.closeTag=function(t){let n="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(n="/"):this.options.suppressEmptyNode?n="/":n=`></${t}`,n},l.prototype.buildTextValNode=function(t,n,r,s){if(this.options.cdataPropName!==!1&&n===this.options.cdataPropName)return this.indentate(s)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&n===this.options.commentPropName)return this.indentate(s)+`<!--${t}-->`+this.newLine;if(n[0]==="?")return this.indentate(s)+"<"+n+r+"?"+this.tagEndChar;{let d=this.options.tagValueProcessor(n,t);return d=this.replaceEntitiesValue(d),d===""?this.indentate(s)+"<"+n+r+this.closeTag(n)+this.tagEndChar:this.indentate(s)+"<"+n+r+">"+d+"</"+n+this.tagEndChar}},l.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let n=0;n<this.options.entities.length;n++){const r=this.options.entities[n];t=t.replace(r.regex,r.val)}return t};function i(t){return this.options.indentBy.repeat(t)}function e(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}return ut=l,ut}var lt,ir;function Kr(){if(ir)return lt;ir=1;const b=Xt(),f=qr(),h=zr();return lt={XMLParser:f,XMLValidator:b,XMLBuilder:h},lt}Kr();function Wr(b,f){if(b.indexOf(f)>-1)return[f];const h=ye(b,f);return h.length?h:[]}async function ct(b){if(new Uint16Array(b,0,2)[0]===35615)try{const h=new Response(b),l=new DecompressionStream("gzip"),g=await h.body?.pipeThrough(l),i=await new Response(g).arrayBuffer();return await ct(i)}catch(h){console.error("eee",h)}return b}Qe.insensitive=!0;const jr=/.*\.(avro|dbf|gpkg|gz|h5|jpg|jpeg|omx|png|shp|shx|sqlite|zip|zst)$/,Xr=["simwrapper",".simwrapper"],be={};class Vr{baseUrl;urlId;slug;needsAuth;fsHandle;store;isGithub;isFlask;type;constructor(f,h){this.urlId=f.slug,this.slug=f.slug,this.needsAuth=!!f.needPassword,this.fsHandle=f.handle||null,this.store=h||null,this.isGithub=!!f.isGithub,this.isFlask=!!f.flask,this.type=0,this.fsHandle&&(this.type=1),this.isGithub&&(this.type=2),this.isFlask&&(this.type=3),this.baseUrl=f.baseURL,f.baseURL.endsWith("/")||(this.baseUrl+="/"),be[this.urlId]||(be[this.urlId]={})}hasHandle(){return!!this.fsHandle}async getChromePermission(f){return f&&await f.queryPermission({mode:"read"})!=="granted"&&this.store?await new Promise(i=>{this.store.commit("setFileHandleForPermissionRequest",{handle:f,resolve:i})}):!0}clearCache(){be[this.urlId]={}}cleanURL(f){let h=this.baseUrl+f.replace(/^0-9a-zA-Z_\-\/:+/i,"");return h=h.replaceAll("//","/"),h=h.replaceAll("//","/"),h=h.replace("https:/","https://"),h=h.replace("http:/","http://"),h=new URL(h).href,h}async _getFileResponse(f){switch(this.type){case 1:return this._getFileFromChromeFileSystem(f);case 2:return this._getFileFromGitHub(f);case 3:return this._getFileFromAzure(f);case 0:default:return this._getFileFetchResponse(f)}}async _getFileFetchResponse(f,h){const l=this.cleanURL(f),g={};h?.maxBytes&&(g.Range=`bytes=0-${h.maxBytes-1}`);const i=new Request(l,{headers:g});return await fetch(i).then(t=>{if(t.status>=300)throw console.warn("Status:",t.status),t;return t})}async _getDirectoryFromAzure(f){let h=f.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h=h.replaceAll("//","/");let l=`${this.baseUrl}list/${this.slug}?prefix=${h}`;const g=new URL(l).href,i={};if(this.needsAuth){let r=localStorage.getItem(`auth-token-${this.slug}`);if(r||(r=prompt("This server requires an access token to continue")),r)localStorage.setItem(`auth-token-${this.slug}`,r),i.AZURETOKEN=r;else return{dirs:[],files:[],handles:{}}}const e=new Request(g,{headers:i}),t=await fetch(e);if(t.status==400){let r=prompt("Authorization failure. This server requires a valid access token to continue");return r?(localStorage.setItem(`auth-token-${this.slug}`,r),i.AZURETOKEN=r,await this._getDirectoryFromAzure(f)):{dirs:[],files:[],handles:{}}}if(t.status!=200)throw console.log("Status:",t.status),t;return await t.json()}getSlug(){return this.slug}async _getFileFromAzure(f){let h=f.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h=h.replaceAll("//","/");let l=`${this.baseUrl}file/${this.slug}?prefix=${h}`;const g=new URL(l).href,i={},e=new Request(g,{headers:i}),t=await fetch(e);if(t.status!=200)throw console.log("Status:",t.status),t;return t}async _getFileFromChromeFileSystem(f,h){let l=f.replace(/^0-9a-zA-Z_\-\/:+/i,"");l=l.replaceAll("//","/"),l=new URL(`http://local/${l}`).href,l=l.substring(13);const g=l.lastIndexOf("/"),i=l.substring(0,g),e=decodeURIComponent(l.substring(g+1)),n=(await this.getDirectory(i)).handles[e];if(!n)throw Error(`File ${e} missing`);const r=await n.getFile();return r.json=()=>new Promise(async(s,d)=>{const a=await r.text(),R=JSON.parse(a);s(R)}),r.blob=()=>new Promise(async(s,d)=>{s(r)}),new Promise((s,d)=>{s(r)})}async _getFileFromGitHub(f){let h=f.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h.startsWith("/")&&(h=h.slice(1));const l=h.split("/").filter(a=>!!a);if(l.length<2)return new Promise((a,R)=>{a(null)});const g=`${l[0]}/${l[1]}`;let i=`https://api.github.com/repos/${g}/contents/`;l.shift(),l.shift(),i+=l.join("/");const n={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${mt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};let r=await await fetch(i,{headers:n}).then(a=>a.json()),s=r.content;if(s||(i=`https://api.github.com/repos/${g}/git/blobs/${r.sha}`,r=await await fetch(i,{headers:n}).then(a=>a.json()),s=r.content),r.encoding=="base64"){const a=Uint8Array.from(atob(r.content),R=>R.charCodeAt(0));jr.test(f.toLocaleLowerCase())?s=a:s=new TextDecoder().decode(a)}else r.encoding=="utf-8"?s=new TextDecoder().decode(r.content):s=r.content;return{text:()=>new Promise((a,R)=>{a(s)}),json:()=>new Promise(async(a,R)=>{const N=JSON.parse(s);a(N)}),blob:()=>new Promise(async(a,R)=>{a(new Blob([s],{type:"application/octet-stream"}))})}}async _getDirectoryFromGitHub(f){let h=f.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h.startsWith("/")&&(h=h.slice(1));const l={dirs:[],files:[],handles:{}},g=h.split("/").filter(s=>!!s);if(g.length<2)return l;let i=`https://api.github.com/repos/${g[0]}/${g[1]}/contents/`;g.shift(),g.shift(),i+=g.join("/");const n={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${mt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};return(await await fetch(i,{headers:n}).then(s=>s.json())).forEach(s=>{s.type=="file"&&l.files.push(s.name),s.type=="dir"&&l.dirs.push(s.name)}),l}async getFileText(f){return(await this._getFileResponse(f)).text()}async getFileJson(f){const g=await(await(await this._getFileResponse(f)).blob()).arrayBuffer(),i=await ct(g),e=new TextDecoder("utf-8").decode(i);return JSON.parse(e)}async getFileBlob(f){return(await this._getFileResponse(f)).blob()}async probeXmlFileType(f){let h=await this.getFileStream(f,{maxBytes:1024});f.toLocaleLowerCase().endsWith(".gz")&&(h=h.pipeThrough(new DecompressionStream("gzip")));const l=await h.getReader().read(),g=new Uint8Array(l.value),e=new TextDecoder("utf-8").decode(g.slice(0,Math.min(g.length,1024))).match(/<!DOCTYPE\s+(\w+)\s*(?:\[\s*([^\]]*)\s*\])?(?:\s+PUBLIC\s+"([^"]+)"\s+"([^"]+)"|(?:\s+SYSTEM\s+)?"([^"]+)")?/is);return e?e[1]:null}async getFileStream(f,h){let l;switch(this.type){case 1:return l=await this._getFileFromChromeFileSystem(f,h).then(i=>i.blob()).then(i=>i.stream()),l;case 0:return l=await this._getFileFetchResponse(f,h).then(i=>i.body),l;case 3:const g=`/file/${this.slug}?prefix=${f}`;return l=await this._getFileFetchResponse(g,h).then(i=>i.body),l;default:throw Error(`FileSystemType ${this.type} not implemented`)}}async getDirectory(f){let h=f.replaceAll("//","/");h.endsWith("/")||(h+="/");const l=be[this.urlId][h];if(l)return l;h=h.replaceAll("/./","/");try{let g;switch(this.type){case 1:g=await this._getDirectoryFromHandle(h);break;case 2:g=await this._getDirectoryFromGitHub(h);break;case 3:g=await this._getDirectoryFromAzure(h);break;case 0:default:g=await this._getDirectoryFromURL(h);break}return g.dirs.sort((i,e)=>Qe(i,e)),g.files.sort((i,e)=>Qe(i,e)),be[this.urlId][h]=g,g}catch(g){throw Error(""+g)}}async _getDirectoryFromHandle(f,h){const l={files:[],dirs:[],handles:{}};if(!this.fsHandle||!await this.getChromePermission(this.fsHandle))return l;let i=f.split("/").filter(r=>!!r);function e(r){const s=r.indexOf("..");if(s<=0)return r;const d=r.filter((a,R)=>R!==s-1&&R!==s);return e(d)}const t=e(i);let n=this.fsHandle;if(t.length)for(const r of t){let s=!1;for await(let[d,a]of n)if(d===r){n=a,s=!0;break}if(!s)throw Error(`Could not find folder "${r}"`)}for await(let r of n.values())l.handles&&(l.handles[r.name]=r),r.kind==="file"?l.files.push(r.name):l.dirs.push(r.name);return l}async _getDirectoryFromURL(f){const l=await(await this._getFileResponse(f).then()).text();return this.buildListFromHtml(l)}async findAllYamlConfigs(f){const h={dashboards:{},topsheets:{},vizes:{},configs:{}},l=[];let g="/";const e=(f.startsWith("/")?f:"/"+f).split("/");for(const d of e.slice(0,e.length-1)){g=`${g}${d}/`.replaceAll("//","/");try{const{dirs:a}=await this.getDirectory(g);for(const R of a)Xr.includes(R.toLocaleLowerCase())&&l.push(`${g}/${R}`.replaceAll("//","/"))}catch{}}l.push(f);const t="dashboard*.y?(a)ml",n="(topsheet|table)*.y?(a)ml",r="viz*.y?(a)ml",s="simwrapper-config.y?(a)ml";for(const d of l){const{files:a}=await this.getDirectory(d);ye.match(a,t).map(R=>h.dashboards[R]=`${d}/${R}`.replaceAll("//","/")),ye.match(a,n).map(R=>h.topsheets[R]=`${d}/${R}`.replaceAll("//","/")),ye.match(a,r).map(R=>h.vizes[R]=`${d}/${R}`.replaceAll("//","/")),ye.match(a,s).map(R=>h.configs[R]=`${d}/${R}`.replaceAll("//","/"))}return h}buildListFromHtml(f){return f.indexOf("SimpleWebServer")>-1?this.buildListFromSimpleWebServer(f):f.indexOf("<ul>")>-1?this.buildListFromSVN(f):f.indexOf('<ul id="files">')>-1?this.buildListFromNpxServe(f):f.indexOf("<table>")>-1?this.buildListFromApache24(f):f.indexOf(`
<a `)>-1?this.buildListFromNGINX(f):{dirs:[],files:[],handles:{}}}buildListFromSimpleWebServer(f){const h=/">(.*?)<\/a/,l=[],g=[],i=f.split(`
`);for(const e of i){if(e.indexOf('<li><a href="')<0)continue;const n=e.match(h);if(!n)continue;const r=n[1];r.endsWith("/")?l.push(r.substring(0,r.length-1)):g.push(r)}return{dirs:l,files:g,handles:{}}}buildListFromNpxServe(f){const h=/"(.*?)"/;let l=[],g=[];const i=f.split("</li>").map(e=>e.slice(e.lastIndexOf("<li")));for(const e of i){const t=e.indexOf('<li> <a href="');if(t<0||t>512)continue;const n=e.match(h);if(!n)continue;let r=n[1];r=r.replaceAll("&#47;","/"),r!=="/"&&r!=="../"&&(r.endsWith("/")?l.push(r.substring(0,r.length-1)):g.push(r))}return l=l.map(e=>e.slice(1+e.lastIndexOf("/"))),g=g.map(e=>e.slice(1+e.lastIndexOf("/"))),{dirs:l,files:g,handles:{}}}buildListFromSVN(f){const h=/"(.*?)"/,l=[],g=[],i=f.split(`
`);for(const e of i){if(e.indexOf('<li><a href="')<0)continue;const n=e.match(h);if(!n)continue;let r=n[1];r!=="../"&&(r.startsWith("./")&&(r=r.substring(2)),r.endsWith("/")?l.push(r.substring(0,r.length-1)):g.push(r))}return{dirs:l,files:g,handles:{}}}buildListFromApache24(f){const h=/"(.*?)"/,l=[],g=[],i=f.split(`
`);for(const e of i){if(e.indexOf('<th "')>-1||e.indexOf("[PARENTDIR]")>-1)continue;const t=e.indexOf('<td><a href="');if(t<0)continue;const n=e.substring(t).match(h);if(!n)continue;const r=n[1];r!=="../"&&(r.endsWith("/")?l.push(r.substring(0,r.length-1)):g.push(r))}return{dirs:l,files:g,handles:{}}}buildListFromNGINX(f){const h=/"(.*?)"/,l=[],g=[],i=f.split(`
`);for(const e of i){const t=e.indexOf('<a href="');if(t<0)continue;const n=e.substring(t).match(h);if(!n)continue;const r=n[1];r!=="../"&&(r.endsWith("/")?l.push(r.substring(0,r.length-1)):g.push(r))}return{dirs:l,files:g,handles:{}}}}let ft,me="",ht=[],ae={},ce="",dt,pt=!1,Ae=[];const pe={};onmessage=function(b){Zr(b.data)},postMessage({ready:!0});async function Zr(b){if(ae=b.config,ce=ae.dataset,b.options?.highPrecision&&(pt=!0),b.featureProperties){Qr(b.featureProperties),postMessage(pe[ce]);return}if(b.buffer){dt=b.buffer,or(ce,dt),postMessage(pe[ce]);return}ft=new Vr(b.fileSystemConfig),me=b.subfolder,ht=b.files,dt=b.buffer;try{const f=ae.dataset.indexOf("/");if(f>-1){let h=me;me&&(h+="/");const l=f===0?ae.dataset:`${h}${ae.dataset}`;ce=l.substring(1+l.lastIndexOf("/")),me=l.substring(0,l.lastIndexOf("/"));let g=me.startsWith("./")?me.slice(2):me;const{files:i}=await ft.getDirectory(g);ht=i}await Yr(),Ae.length&&(pe[ce]._comments=Ae),postMessage(pe[ce])}catch(f){const h=""+f;postMessage({error:h})}}function Qr(b){const f={},h=b[0];let l=Object.keys(h).sort();if(ae.drop){let g=Array.isArray(ae.drop)?ae.drop:ae.drop.split(",");g.length&&(console.log("DROPPING",g),l=l.filter(i=>g.indexOf(i)==-1))}if(ae.keep){let g=Array.isArray(ae.keep)?ae.keep:ae.keep.split(",");g.length&&(console.log("KEEPING",g),l=l.filter(i=>g.indexOf(i)>-1))}for(const g of l){let i,e=le.NUMBER;typeof h[g]=="number"?(i=pt?new Float64Array(b.length):new Float32Array(b.length),i.fill(NaN)):(i=[],e=le.STRING),f[g]={name:g,values:i,type:e}}for(let g=0;g<b.length;g++){const i=b[g];for(const e of l){const t=i[e];f[e].values[g]=t}}pe[ce]=f,gt(ce,f)}async function Yr(){const b=ce,f=Wr(ht,b);if(f.length==0)throw Error(`File not found: "${b}"`);if(f.length>1)throw Error(`More than one file matched "${b}": ${f}`);const h=f[0],l=await en(h);or(h,l)}async function or(b,f){try{if(b&&b.toLocaleLowerCase().endsWith(".dbf")){const h=hr(f,new TextDecoder("windows-1252"));gt(ce,h),pe[ce]=h}else{const h=new TextDecoder().decode(f);await Jr(ce,b,h)}}catch(h){const l=(""+h).replaceAll("Error: ","");postMessage({error:l})}}async function Jr(b,f,h){function l(g,i){return Array.isArray(i)&&i.length>0?l(g[i[0]],i.slice(1)):g}if(f.indexOf(".xml")>-1){const g={},i=ae;if(i.xmlElements){const e=i.xmlElements.split(".");l(g,e),pe[b]={}}else pe[b]={};return}Dr(b,f,h)}function Dr(b,f,h){const l={},g={},i=yr.parse(h,{delimitersToGuess:["	",";",","," "],comments:"#",skipEmptyLines:!0,dynamicTyping:!0,header:!0,transformHeader:(t,n)=>(g[t]||(g[t]=0),g[t]+=1,g[t]>1?`${t.trim()}_${g[t]-1}`:t.trim())});if(!i.data?.length)throw console.error("NODATA - Papaparse returned nothing!"),Error("Bad format, no data, or too large - Error loading");let e=i.meta.fields||[];if(ae.drop){let t=Array.isArray(ae.drop)?ae.drop:ae.drop.split(",");t.length&&(console.log("DROPPING",t),e=e.filter(n=>t.indexOf(n)==-1))}if(ae.keep){let t=Array.isArray(ae.keep)?ae.keep:ae.keep.split(",");t.length&&(console.log("KEEPING",t),e=e.filter(n=>t.indexOf(n)>-1))}for(const t of e){const n=pt?new Float64Array(i.data.length).fill(NaN):new Float32Array(i.data.length).fill(NaN);l[t]={name:t,values:n,type:le.NUMBER}}for(let t=0;t<i.data.length;t++){const n=i.data[t];for(const r of e){const s=n[r];if(s!=="")if(Number.isFinite(s))l[r].values[t]=s;else if(Array.isArray(l[r].values))l[r].values[t]=s;else{const d=Array.from(l[r].values.slice(0,t));typeof s=="string"&&(l[r].type=le.STRING),typeof s=="boolean"&&(l[r].type=le.BOOLEAN),d[t]=s,l[r].values=d}}}gt(b,l),pe[b]=l,Ae=[...new Set(i.comments)],Ae.length&&console.log({_comments:Ae})}function gt(b,f){for(const h of Object.values(f)){if(h.type!==le.NUMBER)continue;let l=-1/0;for(const g of h.values)l=Math.max(l,g);h.max=l}}async function en(b){const f=`${me}/${b}`,h=await ft.getFileBlob(f);if(!h)throw Error("BLOB IS NULL");const l=await h.arrayBuffer();return await ct(l)}})();
