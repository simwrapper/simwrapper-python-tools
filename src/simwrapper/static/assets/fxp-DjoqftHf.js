var L={},X={},j;function Q(){return j||(j=1,(function(P){const w=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",m=w+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",A="["+w+"]["+m+"]*",F=new RegExp("^"+A+"$"),C=function(n,r){const t=[];let e=r.exec(n);for(;e;){const d=[];d.startIndex=r.lastIndex-e[0].length;const a=e.length;for(let p=0;p<a;p++)d.push(e[p]);t.push(d),e=r.exec(n)}return t},f=function(n){const r=F.exec(n);return!(r===null||typeof r>"u")};P.isExist=function(n){return typeof n<"u"},P.isEmptyObject=function(n){return Object.keys(n).length===0},P.merge=function(n,r,t){if(r){const e=Object.keys(r),d=e.length;for(let a=0;a<d;a++)t==="strict"?n[e[a]]=[r[e[a]]]:n[e[a]]=r[e[a]]}},P.getValue=function(n){return P.isExist(n)?n:""},P.isName=f,P.getAllMatches=C,P.nameRegexp=A})(X)),X}var D;function de(){if(D)return L;D=1;const P=Q(),w={allowBooleanAttributes:!1,unpairedTags:[]};L.validate=function(s,u){u=Object.assign({},w,u);const N=[];let v=!1,i=!1;s[0]==="\uFEFF"&&(s=s.substr(1));for(let o=0;o<s.length;o++)if(s[o]==="<"&&s[o+1]==="?"){if(o+=2,o=A(s,o),o.err)return o}else if(s[o]==="<"){let l=o;if(o++,s[o]==="!"){o=F(s,o);continue}else{let E=!1;s[o]==="/"&&(E=!0,o++);let c="";for(;o<s.length&&s[o]!==">"&&s[o]!==" "&&s[o]!=="	"&&s[o]!==`
`&&s[o]!=="\r";o++)c+=s[o];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),o--),!y(c)){let b;return c.trim().length===0?b="Invalid space after '<'.":b="Tag '"+c+"' is an invalid name.",a("InvalidTag",b,T(s,o))}const g=n(s,o);if(g===!1)return a("InvalidAttr","Attributes for '"+c+"' have open quote.",T(s,o));let O=g.value;if(o=g.index,O[O.length-1]==="/"){const b=o-O.length;O=O.substring(0,O.length-1);const h=t(O,u);if(h===!0)v=!0;else return a(h.err.code,h.err.msg,T(s,b+h.err.line))}else if(E)if(g.tagClosed){if(O.trim().length>0)return a("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",T(s,l));if(N.length===0)return a("InvalidTag","Closing tag '"+c+"' has not been opened.",T(s,l));{const b=N.pop();if(c!==b.tagName){let h=T(s,b.tagStartPos);return a("InvalidTag","Expected closing tag '"+b.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+c+"'.",T(s,l))}N.length==0&&(i=!0)}}else return a("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",T(s,o));else{const b=t(O,u);if(b!==!0)return a(b.err.code,b.err.msg,T(s,o-O.length+b.err.line));if(i===!0)return a("InvalidXml","Multiple possible root nodes found.",T(s,o));u.unpairedTags.indexOf(c)!==-1||N.push({tagName:c,tagStartPos:l}),v=!0}for(o++;o<s.length;o++)if(s[o]==="<")if(s[o+1]==="!"){o++,o=F(s,o);continue}else if(s[o+1]==="?"){if(o=A(s,++o),o.err)return o}else break;else if(s[o]==="&"){const b=d(s,o);if(b==-1)return a("InvalidChar","char '&' is not expected.",T(s,o));o=b}else if(i===!0&&!m(s[o]))return a("InvalidXml","Extra text at the end",T(s,o));s[o]==="<"&&o--}}else{if(m(s[o]))continue;return a("InvalidChar","char '"+s[o]+"' is not expected.",T(s,o))}if(v){if(N.length==1)return a("InvalidTag","Unclosed tag '"+N[0].tagName+"'.",T(s,N[0].tagStartPos));if(N.length>0)return a("InvalidXml","Invalid '"+JSON.stringify(N.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return a("InvalidXml","Start tag expected.",1);return!0};function m(s){return s===" "||s==="	"||s===`
`||s==="\r"}function A(s,u){const N=u;for(;u<s.length;u++)if(s[u]=="?"||s[u]==" "){const v=s.substr(N,u-N);if(u>5&&v==="xml")return a("InvalidXml","XML declaration allowed only at the start of the document.",T(s,u));if(s[u]=="?"&&s[u+1]==">"){u++;break}else continue}return u}function F(s,u){if(s.length>u+5&&s[u+1]==="-"&&s[u+2]==="-"){for(u+=3;u<s.length;u++)if(s[u]==="-"&&s[u+1]==="-"&&s[u+2]===">"){u+=2;break}}else if(s.length>u+8&&s[u+1]==="D"&&s[u+2]==="O"&&s[u+3]==="C"&&s[u+4]==="T"&&s[u+5]==="Y"&&s[u+6]==="P"&&s[u+7]==="E"){let N=1;for(u+=8;u<s.length;u++)if(s[u]==="<")N++;else if(s[u]===">"&&(N--,N===0))break}else if(s.length>u+9&&s[u+1]==="["&&s[u+2]==="C"&&s[u+3]==="D"&&s[u+4]==="A"&&s[u+5]==="T"&&s[u+6]==="A"&&s[u+7]==="["){for(u+=8;u<s.length;u++)if(s[u]==="]"&&s[u+1]==="]"&&s[u+2]===">"){u+=2;break}}return u}const C='"',f="'";function n(s,u){let N="",v="",i=!1;for(;u<s.length;u++){if(s[u]===C||s[u]===f)v===""?v=s[u]:v!==s[u]||(v="");else if(s[u]===">"&&v===""){i=!0;break}N+=s[u]}return v!==""?!1:{value:N,index:u,tagClosed:i}}const r=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function t(s,u){const N=P.getAllMatches(s,r),v={};for(let i=0;i<N.length;i++){if(N[i][1].length===0)return a("InvalidAttr","Attribute '"+N[i][2]+"' has no space in starting.",x(N[i]));if(N[i][3]!==void 0&&N[i][4]===void 0)return a("InvalidAttr","Attribute '"+N[i][2]+"' is without value.",x(N[i]));if(N[i][3]===void 0&&!u.allowBooleanAttributes)return a("InvalidAttr","boolean attribute '"+N[i][2]+"' is not allowed.",x(N[i]));const o=N[i][2];if(!p(o))return a("InvalidAttr","Attribute '"+o+"' is an invalid name.",x(N[i]));if(!v.hasOwnProperty(o))v[o]=1;else return a("InvalidAttr","Attribute '"+o+"' is repeated.",x(N[i]))}return!0}function e(s,u){let N=/\d/;for(s[u]==="x"&&(u++,N=/[\da-fA-F]/);u<s.length;u++){if(s[u]===";")return u;if(!s[u].match(N))break}return-1}function d(s,u){if(u++,s[u]===";")return-1;if(s[u]==="#")return u++,e(s,u);let N=0;for(;u<s.length;u++,N++)if(!(s[u].match(/\w/)&&N<20)){if(s[u]===";")break;return-1}return u}function a(s,u,N){return{err:{code:s,msg:u,line:N.line||N,col:N.col}}}function p(s){return P.isName(s)}function y(s){return P.isName(s)}function T(s,u){const N=s.substring(0,u).split(/\r?\n/);return{line:N.length,col:N[N.length-1].length+1}}function x(s){return s.startIndex+s[1].length}return L}var R={},ee;function he(){if(ee)return R;ee=1;const P={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(m,A){return A},attributeValueProcessor:function(m,A){return A},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(m,A,F){return m}},w=function(m){return Object.assign({},P,m)};return R.buildOptions=w,R.defaultOptions=P,R}var B,te;function ge(){if(te)return B;te=1;class P{constructor(m){this.tagname=m,this.child=[],this[":@"]={}}add(m,A){m==="__proto__"&&(m="#__proto__"),this.child.push({[m]:A})}addChild(m){m.tagname==="__proto__"&&(m.tagname="#__proto__"),m[":@"]&&Object.keys(m[":@"]).length>0?this.child.push({[m.tagname]:m.child,":@":m[":@"]}):this.child.push({[m.tagname]:m.child})}}return B=P,B}var k,re;function pe(){if(re)return k;re=1;const P=Q();function w(t,e){const d={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let a=1,p=!1,y=!1,T="";for(;e<t.length;e++)if(t[e]==="<"&&!y){if(p&&F(t,e)){e+=7;let x,s;[x,s,e]=m(t,e+1),s.indexOf("&")===-1&&(d[r(x)]={regx:RegExp(`&${x};`,"g"),val:s})}else if(p&&C(t,e))e+=8;else if(p&&f(t,e))e+=8;else if(p&&n(t,e))e+=9;else if(A)y=!0;else throw new Error("Invalid DOCTYPE");a++,T=""}else if(t[e]===">"){if(y?t[e-1]==="-"&&t[e-2]==="-"&&(y=!1,a--):a--,a===0)break}else t[e]==="["?p=!0:T+=t[e];if(a!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:d,i:e}}function m(t,e){let d="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)d+=t[e];if(d=d.trim(),d.indexOf(" ")!==-1)throw new Error("External entites are not supported");const a=t[e++];let p="";for(;e<t.length&&t[e]!==a;e++)p+=t[e];return[d,p,e]}function A(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function F(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function C(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function f(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function n(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function r(t){if(P.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}return k=w,k}var M,ne;function Ne(){if(ne)return M;ne=1;const P=/^[-+]?0x[a-fA-F0-9]+$/,w=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,m={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function A(f,n={}){if(n=Object.assign({},m,n),!f||typeof f!="string")return f;let r=f.trim();if(n.skipLike!==void 0&&n.skipLike.test(r))return f;if(f==="0")return 0;if(n.hex&&P.test(r))return C(r,16);if(r.search(/[eE]/)!==-1){const t=r.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(t){if(n.leadingZeros)r=(t[1]||"")+t[3];else if(!(t[2]==="0"&&t[3][0]==="."))return f;return n.eNotation?Number(r):f}else return f}else{const t=w.exec(r);if(t){const e=t[1],d=t[2];let a=F(t[3]);if(!n.leadingZeros&&d.length>0&&e&&r[2]!==".")return f;if(!n.leadingZeros&&d.length>0&&!e&&r[1]!==".")return f;if(n.leadingZeros&&d===f)return 0;{const p=Number(r),y=""+p;return y.search(/[eE]/)!==-1?n.eNotation?p:f:r.indexOf(".")!==-1?y==="0"&&a===""||y===a||e&&y==="-"+a?p:f:d?a===y||e+a===y?p:f:r===y||r===e+y?p:f}}else return f}}function F(f){return f&&f.indexOf(".")!==-1&&(f=f.replace(/0+$/,""),f==="."?f="0":f[0]==="."?f="0"+f:f[f.length-1]==="."&&(f=f.substr(0,f.length-1))),f}function C(f,n){if(parseInt)return parseInt(f,n);if(Number.parseInt)return Number.parseInt(f,n);if(window&&window.parseInt)return window.parseInt(f,n);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}return M=A,M}var G,se;function ce(){if(se)return G;se=1;function P(w){return typeof w=="function"?w:Array.isArray(w)?m=>{for(const A of w)if(typeof A=="string"&&m===A||A instanceof RegExp&&A.test(m))return!0}:()=>!1}return G=P,G}var Z,ie;function be(){if(ie)return Z;ie=1;const P=Q(),w=ge(),m=pe(),A=Ne(),F=ce();class C{constructor(o){this.options=o,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(l,E)=>String.fromCharCode(Number.parseInt(E,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(l,E)=>String.fromCharCode(Number.parseInt(E,16))}},this.addExternalEntities=f,this.parseXml=d,this.parseTextData=n,this.resolveNameSpace=r,this.buildAttributesMap=e,this.isItStopNode=T,this.replaceEntitiesValue=p,this.readStopNodeData=N,this.saveTextToParentTag=y,this.addChild=a,this.ignoreAttributesFn=F(this.options.ignoreAttributes)}}function f(i){const o=Object.keys(i);for(let l=0;l<o.length;l++){const E=o[l];this.lastEntities[E]={regex:new RegExp("&"+E+";","g"),val:i[E]}}}function n(i,o,l,E,c,g,O){if(i!==void 0&&(this.options.trimValues&&!E&&(i=i.trim()),i.length>0)){O||(i=this.replaceEntitiesValue(i));const b=this.options.tagValueProcessor(o,i,l,c,g);return b==null?i:typeof b!=typeof i||b!==i?b:this.options.trimValues?v(i,this.options.parseTagValue,this.options.numberParseOptions):i.trim()===i?v(i,this.options.parseTagValue,this.options.numberParseOptions):i}}function r(i){if(this.options.removeNSPrefix){const o=i.split(":"),l=i.charAt(0)==="/"?"/":"";if(o[0]==="xmlns")return"";o.length===2&&(i=l+o[1])}return i}const t=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function e(i,o,l){if(this.options.ignoreAttributes!==!0&&typeof i=="string"){const E=P.getAllMatches(i,t),c=E.length,g={};for(let O=0;O<c;O++){const b=this.resolveNameSpace(E[O][1]);if(this.ignoreAttributesFn(b,o))continue;let h=E[O][4],V=this.options.attributeNamePrefix+b;if(b.length)if(this.options.transformAttributeName&&(V=this.options.transformAttributeName(V)),V==="__proto__"&&(V="#__proto__"),h!==void 0){this.options.trimValues&&(h=h.trim()),h=this.replaceEntitiesValue(h);const I=this.options.attributeValueProcessor(b,h,o);I==null?g[V]=h:typeof I!=typeof h||I!==h?g[V]=I:g[V]=v(h,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(g[V]=!0)}if(!Object.keys(g).length)return;if(this.options.attributesGroupName){const O={};return O[this.options.attributesGroupName]=g,O}return g}}const d=function(i){i=i.replace(/\r\n?/g,`
`);const o=new w("!xml");let l=o,E="",c="";for(let g=0;g<i.length;g++)if(i[g]==="<")if(i[g+1]==="/"){const b=s(i,">",g,"Closing Tag is not closed.");let h=i.substring(g+2,b).trim();if(this.options.removeNSPrefix){const _=h.indexOf(":");_!==-1&&(h=h.substr(_+1))}this.options.transformTagName&&(h=this.options.transformTagName(h)),l&&(E=this.saveTextToParentTag(E,l,c));const V=c.substring(c.lastIndexOf(".")+1);if(h&&this.options.unpairedTags.indexOf(h)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${h}>`);let I=0;V&&this.options.unpairedTags.indexOf(V)!==-1?(I=c.lastIndexOf(".",c.lastIndexOf(".")-1),this.tagsNodeStack.pop()):I=c.lastIndexOf("."),c=c.substring(0,I),l=this.tagsNodeStack.pop(),E="",g=b}else if(i[g+1]==="?"){let b=u(i,g,!1,"?>");if(!b)throw new Error("Pi Tag is not closed.");if(E=this.saveTextToParentTag(E,l,c),!(this.options.ignoreDeclaration&&b.tagName==="?xml"||this.options.ignorePiTags)){const h=new w(b.tagName);h.add(this.options.textNodeName,""),b.tagName!==b.tagExp&&b.attrExpPresent&&(h[":@"]=this.buildAttributesMap(b.tagExp,c,b.tagName)),this.addChild(l,h,c)}g=b.closeIndex+1}else if(i.substr(g+1,3)==="!--"){const b=s(i,"-->",g+4,"Comment is not closed.");if(this.options.commentPropName){const h=i.substring(g+4,b-2);E=this.saveTextToParentTag(E,l,c),l.add(this.options.commentPropName,[{[this.options.textNodeName]:h}])}g=b}else if(i.substr(g+1,2)==="!D"){const b=m(i,g);this.docTypeEntities=b.entities,g=b.i}else if(i.substr(g+1,2)==="!["){const b=s(i,"]]>",g,"CDATA is not closed.")-2,h=i.substring(g+9,b);E=this.saveTextToParentTag(E,l,c);let V=this.parseTextData(h,l.tagname,c,!0,!1,!0,!0);V==null&&(V=""),this.options.cdataPropName?l.add(this.options.cdataPropName,[{[this.options.textNodeName]:h}]):l.add(this.options.textNodeName,V),g=b+2}else{let b=u(i,g,this.options.removeNSPrefix),h=b.tagName;const V=b.rawTagName;let I=b.tagExp,_=b.attrExpPresent,z=b.closeIndex;this.options.transformTagName&&(h=this.options.transformTagName(h)),l&&E&&l.tagname!=="!xml"&&(E=this.saveTextToParentTag(E,l,c,!1));const H=l;if(H&&this.options.unpairedTags.indexOf(H.tagname)!==-1&&(l=this.tagsNodeStack.pop(),c=c.substring(0,c.lastIndexOf("."))),h!==o.tagname&&(c+=c?"."+h:h),this.isItStopNode(this.options.stopNodes,c,h)){let S="";if(I.length>0&&I.lastIndexOf("/")===I.length-1)h[h.length-1]==="/"?(h=h.substr(0,h.length-1),c=c.substr(0,c.length-1),I=h):I=I.substr(0,I.length-1),g=b.closeIndex;else if(this.options.unpairedTags.indexOf(h)!==-1)g=b.closeIndex;else{const q=this.readStopNodeData(i,V,z+1);if(!q)throw new Error(`Unexpected end of ${V}`);g=q.i,S=q.tagContent}const $=new w(h);h!==I&&_&&($[":@"]=this.buildAttributesMap(I,c,h)),S&&(S=this.parseTextData(S,h,c,!0,_,!0,!0)),c=c.substr(0,c.lastIndexOf(".")),$.add(this.options.textNodeName,S),this.addChild(l,$,c)}else{if(I.length>0&&I.lastIndexOf("/")===I.length-1){h[h.length-1]==="/"?(h=h.substr(0,h.length-1),c=c.substr(0,c.length-1),I=h):I=I.substr(0,I.length-1),this.options.transformTagName&&(h=this.options.transformTagName(h));const S=new w(h);h!==I&&_&&(S[":@"]=this.buildAttributesMap(I,c,h)),this.addChild(l,S,c),c=c.substr(0,c.lastIndexOf("."))}else{const S=new w(h);this.tagsNodeStack.push(l),h!==I&&_&&(S[":@"]=this.buildAttributesMap(I,c,h)),this.addChild(l,S,c),l=S}E="",g=z}}else E+=i[g];return o.child};function a(i,o,l){const E=this.options.updateTag(o.tagname,l,o[":@"]);E===!1||(typeof E=="string"&&(o.tagname=E),i.addChild(o))}const p=function(i){if(this.options.processEntities){for(let o in this.docTypeEntities){const l=this.docTypeEntities[o];i=i.replace(l.regx,l.val)}for(let o in this.lastEntities){const l=this.lastEntities[o];i=i.replace(l.regex,l.val)}if(this.options.htmlEntities)for(let o in this.htmlEntities){const l=this.htmlEntities[o];i=i.replace(l.regex,l.val)}i=i.replace(this.ampEntity.regex,this.ampEntity.val)}return i};function y(i,o,l,E){return i&&(E===void 0&&(E=o.child.length===0),i=this.parseTextData(i,o.tagname,l,!1,o[":@"]?Object.keys(o[":@"]).length!==0:!1,E),i!==void 0&&i!==""&&o.add(this.options.textNodeName,i),i=""),i}function T(i,o,l){const E="*."+l;for(const c in i){const g=i[c];if(E===g||o===g)return!0}return!1}function x(i,o,l=">"){let E,c="";for(let g=o;g<i.length;g++){let O=i[g];if(E)O===E&&(E="");else if(O==='"'||O==="'")E=O;else if(O===l[0])if(l[1]){if(i[g+1]===l[1])return{data:c,index:g}}else return{data:c,index:g};else O==="	"&&(O=" ");c+=O}}function s(i,o,l,E){const c=i.indexOf(o,l);if(c===-1)throw new Error(E);return c+o.length-1}function u(i,o,l,E=">"){const c=x(i,o+1,E);if(!c)return;let g=c.data;const O=c.index,b=g.search(/\s/);let h=g,V=!0;b!==-1&&(h=g.substring(0,b),g=g.substring(b+1).trimStart());const I=h;if(l){const _=h.indexOf(":");_!==-1&&(h=h.substr(_+1),V=h!==c.data.substr(_+1))}return{tagName:h,tagExp:g,closeIndex:O,attrExpPresent:V,rawTagName:I}}function N(i,o,l){const E=l;let c=1;for(;l<i.length;l++)if(i[l]==="<")if(i[l+1]==="/"){const g=s(i,">",l,`${o} is not closed`);if(i.substring(l+2,g).trim()===o&&(c--,c===0))return{tagContent:i.substring(E,l),i:g};l=g}else if(i[l+1]==="?")l=s(i,"?>",l+1,"StopNode is not closed.");else if(i.substr(l+1,3)==="!--")l=s(i,"-->",l+3,"StopNode is not closed.");else if(i.substr(l+1,2)==="![")l=s(i,"]]>",l,"StopNode is not closed.")-2;else{const g=u(i,l,">");g&&((g&&g.tagName)===o&&g.tagExp[g.tagExp.length-1]!=="/"&&c++,l=g.closeIndex)}}function v(i,o,l){if(o&&typeof i=="string"){const E=i.trim();return E==="true"?!0:E==="false"?!1:A(i,l)}else return P.isExist(i)?i:""}return Z=C,Z}var J={},oe;function Ee(){if(oe)return J;oe=1;function P(C,f){return w(C,f)}function w(C,f,n){let r;const t={};for(let e=0;e<C.length;e++){const d=C[e],a=m(d);let p="";if(n===void 0?p=a:p=n+"."+a,a===f.textNodeName)r===void 0?r=d[a]:r+=""+d[a];else{if(a===void 0)continue;if(d[a]){let y=w(d[a],f,p);const T=F(y,f);d[":@"]?A(y,d[":@"],p,f):Object.keys(y).length===1&&y[f.textNodeName]!==void 0&&!f.alwaysCreateTextNode?y=y[f.textNodeName]:Object.keys(y).length===0&&(f.alwaysCreateTextNode?y[f.textNodeName]="":y=""),t[a]!==void 0&&t.hasOwnProperty(a)?(Array.isArray(t[a])||(t[a]=[t[a]]),t[a].push(y)):f.isArray(a,p,T)?t[a]=[y]:t[a]=y}}}return typeof r=="string"?r.length>0&&(t[f.textNodeName]=r):r!==void 0&&(t[f.textNodeName]=r),t}function m(C){const f=Object.keys(C);for(let n=0;n<f.length;n++){const r=f[n];if(r!==":@")return r}}function A(C,f,n,r){if(f){const t=Object.keys(f),e=t.length;for(let d=0;d<e;d++){const a=t[d];r.isArray(a,n+"."+a,!0,!0)?C[a]=[f[a]]:C[a]=f[a]}}}function F(C,f){const{textNodeName:n}=f,r=Object.keys(C).length;return!!(r===0||r===1&&(C[n]||typeof C[n]=="boolean"||C[n]===0))}return J.prettify=P,J}var U,ue;function Te(){if(ue)return U;ue=1;const{buildOptions:P}=he(),w=be(),{prettify:m}=Ee(),A=de();class F{constructor(f){this.externalEntities={},this.options=P(f)}parse(f,n){if(typeof f!="string")if(f.toString)f=f.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const e=A.validate(f,n);if(e!==!0)throw Error(`${e.err.msg}:${e.err.line}:${e.err.col}`)}const r=new w(this.options);r.addExternalEntities(this.externalEntities);const t=r.parseXml(f);return this.options.preserveOrder||t===void 0?t:m(t,this.options)}addEntity(f,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(f.indexOf("&")!==-1||f.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[f]=n}}return U=F,U}var Y,fe;function ye(){if(fe)return Y;fe=1;const P=`
`;function w(n,r){let t="";return r.format&&r.indentBy.length>0&&(t=P),m(n,r,"",t)}function m(n,r,t,e){let d="",a=!1;for(let p=0;p<n.length;p++){const y=n[p],T=A(y);if(T===void 0)continue;let x="";if(t.length===0?x=T:x=`${t}.${T}`,T===r.textNodeName){let i=y[T];C(x,r)||(i=r.tagValueProcessor(T,i),i=f(i,r)),a&&(d+=e),d+=i,a=!1;continue}else if(T===r.cdataPropName){a&&(d+=e),d+=`<![CDATA[${y[T][0][r.textNodeName]}]]>`,a=!1;continue}else if(T===r.commentPropName){d+=e+`<!--${y[T][0][r.textNodeName]}-->`,a=!0;continue}else if(T[0]==="?"){const i=F(y[":@"],r),o=T==="?xml"?"":e;let l=y[T][0][r.textNodeName];l=l.length!==0?" "+l:"",d+=o+`<${T}${l}${i}?>`,a=!0;continue}let s=e;s!==""&&(s+=r.indentBy);const u=F(y[":@"],r),N=e+`<${T}${u}`,v=m(y[T],r,x,s);r.unpairedTags.indexOf(T)!==-1?r.suppressUnpairedNode?d+=N+">":d+=N+"/>":(!v||v.length===0)&&r.suppressEmptyNode?d+=N+"/>":v&&v.endsWith(">")?d+=N+`>${v}${e}</${T}>`:(d+=N+">",v&&e!==""&&(v.includes("/>")||v.includes("</"))?d+=e+r.indentBy+v+e:d+=v,d+=`</${T}>`),a=!0}return d}function A(n){const r=Object.keys(n);for(let t=0;t<r.length;t++){const e=r[t];if(n.hasOwnProperty(e)&&e!==":@")return e}}function F(n,r){let t="";if(n&&!r.ignoreAttributes)for(let e in n){if(!n.hasOwnProperty(e))continue;let d=r.attributeValueProcessor(e,n[e]);d=f(d,r),d===!0&&r.suppressBooleanAttributes?t+=` ${e.substr(r.attributeNamePrefix.length)}`:t+=` ${e.substr(r.attributeNamePrefix.length)}="${d}"`}return t}function C(n,r){n=n.substr(0,n.length-r.textNodeName.length-1);let t=n.substr(n.lastIndexOf(".")+1);for(let e in r.stopNodes)if(r.stopNodes[e]===n||r.stopNodes[e]==="*."+t)return!0;return!1}function f(n,r){if(n&&n.length>0&&r.processEntities)for(let t=0;t<r.entities.length;t++){const e=r.entities[t];n=n.replace(e.regex,e.val)}return n}return Y=w,Y}var W,le;function me(){if(le)return W;le=1;const P=ye(),w=ce(),m={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(n,r){return r},attributeValueProcessor:function(n,r){return r},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function A(n){this.options=Object.assign({},m,n),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=w(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=f),this.processTextOrObjNode=F,this.options.format?(this.indentate=C,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}A.prototype.build=function(n){return this.options.preserveOrder?P(n,this.options):(Array.isArray(n)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(n={[this.options.arrayNodeName]:n}),this.j2x(n,0,[]).val)},A.prototype.j2x=function(n,r,t){let e="",d="";const a=t.join(".");for(let p in n)if(Object.prototype.hasOwnProperty.call(n,p))if(typeof n[p]>"u")this.isAttribute(p)&&(d+="");else if(n[p]===null)this.isAttribute(p)||p===this.options.cdataPropName?d+="":p[0]==="?"?d+=this.indentate(r)+"<"+p+"?"+this.tagEndChar:d+=this.indentate(r)+"<"+p+"/"+this.tagEndChar;else if(n[p]instanceof Date)d+=this.buildTextValNode(n[p],p,"",r);else if(typeof n[p]!="object"){const y=this.isAttribute(p);if(y&&!this.ignoreAttributesFn(y,a))e+=this.buildAttrPairStr(y,""+n[p]);else if(!y)if(p===this.options.textNodeName){let T=this.options.tagValueProcessor(p,""+n[p]);d+=this.replaceEntitiesValue(T)}else d+=this.buildTextValNode(n[p],p,"",r)}else if(Array.isArray(n[p])){const y=n[p].length;let T="",x="";for(let s=0;s<y;s++){const u=n[p][s];if(!(typeof u>"u"))if(u===null)p[0]==="?"?d+=this.indentate(r)+"<"+p+"?"+this.tagEndChar:d+=this.indentate(r)+"<"+p+"/"+this.tagEndChar;else if(typeof u=="object")if(this.options.oneListGroup){const N=this.j2x(u,r+1,t.concat(p));T+=N.val,this.options.attributesGroupName&&u.hasOwnProperty(this.options.attributesGroupName)&&(x+=N.attrStr)}else T+=this.processTextOrObjNode(u,p,r,t);else if(this.options.oneListGroup){let N=this.options.tagValueProcessor(p,u);N=this.replaceEntitiesValue(N),T+=N}else T+=this.buildTextValNode(u,p,"",r)}this.options.oneListGroup&&(T=this.buildObjectNode(T,p,x,r)),d+=T}else if(this.options.attributesGroupName&&p===this.options.attributesGroupName){const y=Object.keys(n[p]),T=y.length;for(let x=0;x<T;x++)e+=this.buildAttrPairStr(y[x],""+n[p][y[x]])}else d+=this.processTextOrObjNode(n[p],p,r,t);return{attrStr:e,val:d}},A.prototype.buildAttrPairStr=function(n,r){return r=this.options.attributeValueProcessor(n,""+r),r=this.replaceEntitiesValue(r),this.options.suppressBooleanAttributes&&r==="true"?" "+n:" "+n+'="'+r+'"'};function F(n,r,t,e){const d=this.j2x(n,t+1,e.concat(r));return n[this.options.textNodeName]!==void 0&&Object.keys(n).length===1?this.buildTextValNode(n[this.options.textNodeName],r,d.attrStr,t):this.buildObjectNode(d.val,r,d.attrStr,t)}A.prototype.buildObjectNode=function(n,r,t,e){if(n==="")return r[0]==="?"?this.indentate(e)+"<"+r+t+"?"+this.tagEndChar:this.indentate(e)+"<"+r+t+this.closeTag(r)+this.tagEndChar;{let d="</"+r+this.tagEndChar,a="";return r[0]==="?"&&(a="?",d=""),(t||t==="")&&n.indexOf("<")===-1?this.indentate(e)+"<"+r+t+a+">"+n+d:this.options.commentPropName!==!1&&r===this.options.commentPropName&&a.length===0?this.indentate(e)+`<!--${n}-->`+this.newLine:this.indentate(e)+"<"+r+t+a+this.tagEndChar+n+this.indentate(e)+d}},A.prototype.closeTag=function(n){let r="";return this.options.unpairedTags.indexOf(n)!==-1?this.options.suppressUnpairedNode||(r="/"):this.options.suppressEmptyNode?r="/":r=`></${n}`,r},A.prototype.buildTextValNode=function(n,r,t,e){if(this.options.cdataPropName!==!1&&r===this.options.cdataPropName)return this.indentate(e)+`<![CDATA[${n}]]>`+this.newLine;if(this.options.commentPropName!==!1&&r===this.options.commentPropName)return this.indentate(e)+`<!--${n}-->`+this.newLine;if(r[0]==="?")return this.indentate(e)+"<"+r+t+"?"+this.tagEndChar;{let d=this.options.tagValueProcessor(r,n);return d=this.replaceEntitiesValue(d),d===""?this.indentate(e)+"<"+r+t+this.closeTag(r)+this.tagEndChar:this.indentate(e)+"<"+r+t+">"+d+"</"+r+this.tagEndChar}},A.prototype.replaceEntitiesValue=function(n){if(n&&n.length>0&&this.options.processEntities)for(let r=0;r<this.options.entities.length;r++){const t=this.options.entities[r];n=n.replace(t.regex,t.val)}return n};function C(n){return this.options.indentBy.repeat(n)}function f(n){return n.startsWith(this.options.attributeNamePrefix)&&n!==this.options.textNodeName?n.substr(this.attrPrefixLen):!1}return W=A,W}var K,ae;function Ae(){if(ae)return K;ae=1;const P=de(),w=Te(),m=me();return K={XMLParser:w,XMLValidator:P,XMLBuilder:m},K}var Pe=Ae();export{Pe as f};
