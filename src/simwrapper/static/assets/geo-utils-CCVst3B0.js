import{c as commonjsRequire}from"./geojson-layer-uU2lasyR.js";import{r as requirePathBrowserify,c as require$$5}from"./HTTPFileSystem-D9FfZC5j.js";import{l as lib$1,C as Coords,r as read}from"./Coords-C-Mhj230.js";import{b as getAugmentedNamespace,c as getDefaultExportFromCjs}from"./index-BX7jQcoh.js";var geopackage_min={exports:{}},lib={exports:{}},util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,util.getBooleanOption=(_,l)=>{let o=!1;if(l in _&&typeof(o=_[l])!="boolean")throw new TypeError(`Expected the "${l}" option to be a boolean`);return o},util.cppdb=Symbol(),util.inspect=Symbol.for("nodejs.util.inspect.custom")),util}var sqliteError,hasRequiredSqliteError;function requireSqliteError(){if(hasRequiredSqliteError)return sqliteError;hasRequiredSqliteError=1;const _={value:"SqliteError",writable:!0,enumerable:!1,configurable:!0};function l(o,c){if(new.target!==l)return new l(o,c);if(typeof c!="string")throw new TypeError("Expected second argument to be a string");Error.call(this,o),_.value=""+o,Object.defineProperty(this,"message",_),Error.captureStackTrace(this,l),this.code=c}return Object.setPrototypeOf(l,Error),Object.setPrototypeOf(l.prototype,Error.prototype),Object.defineProperty(l.prototype,"name",_),sqliteError=l,sqliteError}var bindings={exports:{}},fileUriToPath_1,hasRequiredFileUriToPath;function requireFileUriToPath(){if(hasRequiredFileUriToPath)return fileUriToPath_1;hasRequiredFileUriToPath=1;var _=requirePathBrowserify().sep||"/";fileUriToPath_1=l;function l(o){if(typeof o!="string"||o.length<=7||o.substring(0,7)!="file://")throw new TypeError("must pass in a file:// URI to convert to a file path");var c=decodeURI(o.substring(7)),d=c.indexOf("/"),m=c.substring(0,d),h=c.substring(d+1);return m=="localhost"&&(m=""),m&&(m=_+_+m),h=h.replace(/^(.+)\|/,"$1:"),_=="\\"&&(h=h.replace(/\//g,"\\")),/^.+\:/.test(h)||(h=_+h),m+h}return fileUriToPath_1}var hasRequiredBindings;function requireBindings(){return hasRequiredBindings||(hasRequiredBindings=1,(function(_,l){var o=[],c=require$$5,d=requirePathBrowserify(),m=requireFileUriToPath(),h=d.join,s=d.dirname,a=c.accessSync&&function(t){try{c.accessSync(t)}catch{return!1}return!0}||c.existsSync||d.existsSync,r={arrow:o.NODE_BINDINGS_ARROW||" → ",compiled:o.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:null,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-null-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};function n(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(r).map(function(E){E in t||(t[E]=r[E])}),t.module_root||(t.module_root=l.getRoot(l.getFileName())),d.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var i=typeof __webpack_require__=="function"?__non_webpack_require__:commonjsRequire,u=[],f=0,p=t.try.length,y,g,b;f<p;f++){y=h.apply(null,t.try[f].map(function(E){return t[E]||E})),u.push(y);try{return g=t.path?i.resolve(y):i(y),t.path||(g.path=y),g}catch(E){if(E.code!=="MODULE_NOT_FOUND"&&E.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(E.message))throw E}}throw b=new Error(`Could not locate the bindings file. Tried:
`+u.map(function(E){return t.arrow+E}).join(`
`)),b.tries=u,b}_.exports=l=n,l.getFileName=function(i){var u=Error.prepareStackTrace,f=Error.stackTraceLimit,p={},y;Error.stackTraceLimit=10,Error.prepareStackTrace=function(b,E){for(var x=0,M=E.length;x<M;x++)if(y=E[x].getFileName(),y!==__filename)if(i){if(y!==i)return}else return},Error.captureStackTrace(p),p.stack,Error.prepareStackTrace=u,Error.stackTraceLimit=f;var g="file://";return y.indexOf(g)===0&&(y=m(y)),y},l.getRoot=function(i){for(var u=s(i),f;;){if(u==="."&&(u=process.cwd()),a(h(u,"package.json"))||a(h(u,"node_modules")))return u;if(f===u)throw new Error('Could not find module root given file: "'+i+'". Do you have a `package.json` file? ');f=u,u=h(u,"..")}}})(bindings,bindings.exports)),bindings.exports}var wrappers={},hasRequiredWrappers;function requireWrappers(){if(hasRequiredWrappers)return wrappers;hasRequiredWrappers=1;const{cppdb:_}=requireUtil();return wrappers.prepare=function(o){return this[_].prepare(o,this,!1)},wrappers.exec=function(o){return this[_].exec(o),this},wrappers.close=function(){return this[_].close(),this},wrappers.loadExtension=function(...o){return this[_].loadExtension(...o),this},wrappers.defaultSafeIntegers=function(...o){return this[_].defaultSafeIntegers(...o),this},wrappers.unsafeMode=function(...o){return this[_].unsafeMode(...o),this},wrappers.getters={name:{get:function(){return this[_].name},enumerable:!0},open:{get:function(){return this[_].open},enumerable:!0},inTransaction:{get:function(){return this[_].inTransaction},enumerable:!0},readonly:{get:function(){return this[_].readonly},enumerable:!0},memory:{get:function(){return this[_].memory},enumerable:!0}},wrappers}var transaction,hasRequiredTransaction;function requireTransaction(){if(hasRequiredTransaction)return transaction;hasRequiredTransaction=1;const{cppdb:_}=requireUtil(),l=new WeakMap;transaction=function(m){if(typeof m!="function")throw new TypeError("Expected first argument to be a function");const h=this[_],s=o(h,this),{apply:a}=Function.prototype,r={default:{value:c(a,m,h,s.default)},deferred:{value:c(a,m,h,s.deferred)},immediate:{value:c(a,m,h,s.immediate)},exclusive:{value:c(a,m,h,s.exclusive)},database:{value:this,enumerable:!0}};return Object.defineProperties(r.default.value,r),Object.defineProperties(r.deferred.value,r),Object.defineProperties(r.immediate.value,r),Object.defineProperties(r.exclusive.value,r),r.default.value};const o=(d,m)=>{let h=l.get(d);if(!h){const s={commit:d.prepare("COMMIT",m,!1),rollback:d.prepare("ROLLBACK",m,!1),savepoint:d.prepare("SAVEPOINT `	_bs3.	`",m,!1),release:d.prepare("RELEASE `	_bs3.	`",m,!1),rollbackTo:d.prepare("ROLLBACK TO `	_bs3.	`",m,!1)};l.set(d,h={default:Object.assign({begin:d.prepare("BEGIN",m,!1)},s),deferred:Object.assign({begin:d.prepare("BEGIN DEFERRED",m,!1)},s),immediate:Object.assign({begin:d.prepare("BEGIN IMMEDIATE",m,!1)},s),exclusive:Object.assign({begin:d.prepare("BEGIN EXCLUSIVE",m,!1)},s)})}return h},c=(d,m,h,{begin:s,commit:a,rollback:r,savepoint:n,release:t,rollbackTo:i})=>function(){let f,p,y;h.inTransaction?(f=n,p=t,y=i):(f=s,p=a,y=r),f.run();try{const g=d.call(m,this,arguments);return p.run(),g}catch(g){throw h.inTransaction&&(y.run(),y!==r&&p.run()),g}};return transaction}var pragma,hasRequiredPragma;function requirePragma(){if(hasRequiredPragma)return pragma;hasRequiredPragma=1;const{getBooleanOption:_,cppdb:l}=requireUtil();return pragma=function(c,d){if(d==null&&(d={}),typeof c!="string")throw new TypeError("Expected first argument to be a string");if(typeof d!="object")throw new TypeError("Expected second argument to be an options object");const m=_(d,"simple"),h=this[l].prepare(`PRAGMA ${c}`,this,!0);return m?h.pluck().get():h.all()},pragma}var backup,hasRequiredBackup;function requireBackup(){if(hasRequiredBackup)return backup;hasRequiredBackup=1;const _=require$$5,l=requirePathBrowserify(),{promisify:o}=require$$5,{cppdb:c}=requireUtil(),d=o(_.access);backup=async function(s,a){if(a==null&&(a={}),typeof s!="string")throw new TypeError("Expected first argument to be a string");if(typeof a!="object")throw new TypeError("Expected second argument to be an options object");s=s.trim();const r="attached"in a?a.attached:"main",n="progress"in a?a.progress:null;if(!s)throw new TypeError("Backup filename cannot be an empty string");if(s===":memory:")throw new TypeError('Invalid backup filename ":memory:"');if(typeof r!="string")throw new TypeError('Expected the "attached" option to be a string');if(!r)throw new TypeError('The "attached" option cannot be an empty string');if(n!=null&&typeof n!="function")throw new TypeError('Expected the "progress" option to be a function');await d(l.dirname(s)).catch(()=>{throw new TypeError("Cannot save backup because the directory does not exist")});const t=await d(s).then(()=>!1,()=>!0);return m(this[c].backup(this,r,s,t),n||null)};const m=(h,s)=>{let a=0,r=!0;return new Promise((n,t)=>{setImmediate(function i(){try{const u=h.transfer(a);if(!u.remainingPages){h.close(),n(u);return}if(r&&(r=!1,a=100),s){const f=s(u);if(f!==void 0)if(typeof f=="number"&&f===f)a=Math.max(0,Math.min(2147483647,Math.round(f)));else throw new TypeError("Expected progress callback to return a number or undefined")}setImmediate(i)}catch(u){h.close(),t(u)}})})};return backup}var serialize,hasRequiredSerialize;function requireSerialize(){if(hasRequiredSerialize)return serialize;hasRequiredSerialize=1;const{cppdb:_}=requireUtil();return serialize=function(o){if(o==null&&(o={}),typeof o!="object")throw new TypeError("Expected first argument to be an options object");const c="attached"in o?o.attached:"main";if(typeof c!="string")throw new TypeError('Expected the "attached" option to be a string');if(!c)throw new TypeError('The "attached" option cannot be an empty string');return this[_].serialize(c)},serialize}var _function,hasRequired_function;function require_function(){if(hasRequired_function)return _function;hasRequired_function=1;const{getBooleanOption:_,cppdb:l}=requireUtil();return _function=function(c,d,m){if(d==null&&(d={}),typeof d=="function"&&(m=d,d={}),typeof c!="string")throw new TypeError("Expected first argument to be a string");if(typeof m!="function")throw new TypeError("Expected last argument to be a function");if(typeof d!="object")throw new TypeError("Expected second argument to be an options object");if(!c)throw new TypeError("User-defined function name cannot be an empty string");const h="safeIntegers"in d?+_(d,"safeIntegers"):2,s=_(d,"deterministic"),a=_(d,"directOnly"),r=_(d,"varargs");let n=-1;if(!r){if(n=m.length,!Number.isInteger(n)||n<0)throw new TypeError("Expected function.length to be a positive integer");if(n>100)throw new RangeError("User-defined functions cannot have more than 100 arguments")}return this[l].function(m,c,n,h,s,a),this},_function}var aggregate,hasRequiredAggregate;function requireAggregate(){if(hasRequiredAggregate)return aggregate;hasRequiredAggregate=1;const{getBooleanOption:_,cppdb:l}=requireUtil();aggregate=function(m,h){if(typeof m!="string")throw new TypeError("Expected first argument to be a string");if(typeof h!="object"||h===null)throw new TypeError("Expected second argument to be an options object");if(!m)throw new TypeError("User-defined function name cannot be an empty string");const s="start"in h?h.start:null,a=o(h,"step",!0),r=o(h,"inverse",!1),n=o(h,"result",!1),t="safeIntegers"in h?+_(h,"safeIntegers"):2,i=_(h,"deterministic"),u=_(h,"directOnly"),f=_(h,"varargs");let p=-1;if(!f&&(p=Math.max(c(a),r?c(r):0),p>0&&(p-=1),p>100))throw new RangeError("User-defined functions cannot have more than 100 arguments");return this[l].aggregate(s,a,r,n,m,p,t,i,u),this};const o=(d,m,h)=>{const s=m in d?d[m]:null;if(typeof s=="function")return s;if(s!=null)throw new TypeError(`Expected the "${m}" option to be a function`);if(h)throw new TypeError(`Missing required option "${m}"`);return null},c=({length:d})=>{if(Number.isInteger(d)&&d>=0)return d;throw new TypeError("Expected function.length to be a positive integer")};return aggregate}var table$2,hasRequiredTable;function requireTable(){if(hasRequiredTable)return table$2;hasRequiredTable=1;const{cppdb:_}=requireUtil();table$2=function(u,f){if(typeof u!="string")throw new TypeError("Expected first argument to be a string");if(!u)throw new TypeError("Virtual table module name cannot be an empty string");let p=!1;if(typeof f=="object"&&f!==null)p=!0,f=t(o(f,"used",u));else{if(typeof f!="function")throw new TypeError("Expected second argument to be a function or a table definition object");f=l(f)}return this[_].table(f,u,p),this};function l(i){return function(f,p,y,...g){const b={module:f,database:p,table:y},E=a.call(i,b,g);if(typeof E!="object"||E===null)throw new TypeError(`Virtual table module "${f}" did not return a table definition object`);return o(E,"returned",f)}}function o(i,u,f){if(!s.call(i,"rows"))throw new TypeError(`Virtual table module "${f}" ${u} a table definition without a "rows" property`);if(!s.call(i,"columns"))throw new TypeError(`Virtual table module "${f}" ${u} a table definition without a "columns" property`);const p=i.rows;if(typeof p!="function"||Object.getPrototypeOf(p)!==r)throw new TypeError(`Virtual table module "${f}" ${u} a table definition with an invalid "rows" property (should be a generator function)`);let y=i.columns;if(!Array.isArray(y)||!(y=[...y]).every(M=>typeof M=="string"))throw new TypeError(`Virtual table module "${f}" ${u} a table definition with an invalid "columns" property (should be an array of strings)`);if(y.length!==new Set(y).size)throw new TypeError(`Virtual table module "${f}" ${u} a table definition with duplicate column names`);if(!y.length)throw new RangeError(`Virtual table module "${f}" ${u} a table definition with zero columns`);let g;if(s.call(i,"parameters")){if(g=i.parameters,!Array.isArray(g)||!(g=[...g]).every(M=>typeof M=="string"))throw new TypeError(`Virtual table module "${f}" ${u} a table definition with an invalid "parameters" property (should be an array of strings)`)}else g=h(p);if(g.length!==new Set(g).size)throw new TypeError(`Virtual table module "${f}" ${u} a table definition with duplicate parameter names`);if(g.length>32)throw new RangeError(`Virtual table module "${f}" ${u} a table definition with more than the maximum number of 32 parameters`);for(const M of g)if(y.includes(M))throw new TypeError(`Virtual table module "${f}" ${u} a table definition with column "${M}" which was ambiguously defined as both a column and parameter`);let b=2;if(s.call(i,"safeIntegers")){const M=i.safeIntegers;if(typeof M!="boolean")throw new TypeError(`Virtual table module "${f}" ${u} a table definition with an invalid "safeIntegers" property (should be a boolean)`);b=+M}let E=!1;if(s.call(i,"directOnly")&&(E=i.directOnly,typeof E!="boolean"))throw new TypeError(`Virtual table module "${f}" ${u} a table definition with an invalid "directOnly" property (should be a boolean)`);return[`CREATE TABLE x(${[...g.map(n).map(M=>`${M} HIDDEN`),...y.map(n)].join(", ")});`,c(p,new Map(y.map((M,S)=>[M,g.length+S])),f),g,b,E]}function c(i,u,f){return function*(...y){const g=y.map(b=>Buffer.isBuffer(b)?Buffer.from(b):b);for(let b=0;b<u.size;++b)g.push(null);for(const b of i(...y))if(Array.isArray(b))d(b,g,u.size,f),yield g;else if(typeof b=="object"&&b!==null)m(b,g,u,f),yield g;else throw new TypeError(`Virtual table module "${f}" yielded something that isn't a valid row object`)}}function d(i,u,f,p){if(i.length!==f)throw new TypeError(`Virtual table module "${p}" yielded a row with an incorrect number of columns`);const y=u.length-f;for(let g=0;g<f;++g)u[g+y]=i[g]}function m(i,u,f,p){let y=0;for(const g of Object.keys(i)){const b=f.get(g);if(b===void 0)throw new TypeError(`Virtual table module "${p}" yielded a row with an undeclared column "${g}"`);u[b]=i[g],y+=1}if(y!==f.size)throw new TypeError(`Virtual table module "${p}" yielded a row with missing columns`)}function h({length:i}){if(!Number.isInteger(i)||i<0)throw new TypeError("Expected function.length to be a positive integer");const u=[];for(let f=0;f<i;++f)u.push(`$${f+1}`);return u}const{hasOwnProperty:s}=Object.prototype,{apply:a}=Function.prototype,r=Object.getPrototypeOf(function*(){}),n=i=>`"${i.replace(/"/g,'""')}"`,t=i=>()=>i;return table$2}var inspect,hasRequiredInspect;function requireInspect(){if(hasRequiredInspect)return inspect;hasRequiredInspect=1;const _=function(){};return inspect=function(o,c){return Object.assign(new _,this)},inspect}var database,hasRequiredDatabase;function requireDatabase(){if(hasRequiredDatabase)return database;hasRequiredDatabase=1;const _=require$$5,l=requirePathBrowserify(),o=requireUtil(),c=requireSqliteError();let d;function m(s,a){if(new.target==null)return new m(s,a);let r;if(Buffer.isBuffer(s)&&(r=s,s=":memory:"),s==null&&(s=""),a==null&&(a={}),typeof s!="string")throw new TypeError("Expected first argument to be a string");if(typeof a!="object")throw new TypeError("Expected second argument to be an options object");if("readOnly"in a)throw new TypeError('Misspelled option "readOnly" should be "readonly"');if("memory"in a)throw new TypeError('Option "memory" was removed in v7.0.0 (use ":memory:" filename instead)');const n=s.trim(),t=n===""||n===":memory:",i=o.getBooleanOption(a,"readonly"),u=o.getBooleanOption(a,"fileMustExist"),f="timeout"in a?a.timeout:5e3,p="verbose"in a?a.verbose:null,y="nativeBinding"in a?a.nativeBinding:null;if(i&&t&&!r)throw new TypeError("In-memory/temporary databases cannot be readonly");if(!Number.isInteger(f)||f<0)throw new TypeError('Expected the "timeout" option to be a positive integer');if(f>2147483647)throw new RangeError('Option "timeout" cannot be greater than 2147483647');if(p!=null&&typeof p!="function")throw new TypeError('Expected the "verbose" option to be a function');if(y!=null&&typeof y!="string"&&typeof y!="object")throw new TypeError('Expected the "nativeBinding" option to be a string or addon object');let g;if(y==null?g=d||(d=requireBindings()("better_sqlite3.node")):typeof y=="string"?g=(typeof __non_webpack_require__=="function"?__non_webpack_require__:commonjsRequire)(l.resolve(y).replace(/(\.node)?$/,".node")):g=y,g.isInitialized||(g.setErrorConstructor(c),g.isInitialized=!0),!t&&!_.existsSync(l.dirname(n)))throw new TypeError("Cannot open database because the directory does not exist");Object.defineProperties(this,{[o.cppdb]:{value:new g.Database(n,s,t,i,u,f,p||null,r||null)},...h.getters})}const h=requireWrappers();return m.prototype.prepare=h.prepare,m.prototype.transaction=requireTransaction(),m.prototype.pragma=requirePragma(),m.prototype.backup=requireBackup(),m.prototype.serialize=requireSerialize(),m.prototype.function=require_function(),m.prototype.aggregate=requireAggregate(),m.prototype.table=requireTable(),m.prototype.loadExtension=h.loadExtension,m.prototype.exec=h.exec,m.prototype.close=h.close,m.prototype.defaultSafeIntegers=h.defaultSafeIntegers,m.prototype.unsafeMode=h.unsafeMode,m.prototype[o.inspect]=requireInspect(),database=m,database}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,lib.exports=requireDatabase(),lib.exports.SqliteError=requireSqliteError()),lib.exports}/*! For license information please see geopackage.min.js.LICENSE.txt */geopackage_min.exports;var hasRequiredGeopackage_min;function requireGeopackage_min(){return hasRequiredGeopackage_min||(hasRequiredGeopackage_min=1,(function(module,exports){(function(_,l){module.exports=l((function(){try{return requireLib()}catch{}})())})(self,(__WEBPACK_EXTERNAL_MODULE__1498__=>(()=>{var __webpack_modules__={8927:(_,l,o)=>{var c,d=o(3085).lW,m=o(4155),h=o(5108),s=(c=(c=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(a={}){var r,n,t,i;r||(r=a!==void 0?a:{}),r.ready=new Promise((function(v,I){n=v,t=I})),(i=r).Qd=i.Qd||[],i.Qd.push((function(){i.MakeSWCanvasSurface=function(v){var I=v;if(I.tagName!=="CANVAS"&&!(I=document.getElementById(v)))throw"Canvas with id "+v+" was not found";return(v=i.MakeSurface(I.width,I.height))&&(v.Dd=I),v},i.MakeCanvasSurface||(i.MakeCanvasSurface=i.MakeSWCanvasSurface),i.MakeSurface=function(v,I){var j={width:v,height:I,colorType:i.ColorType.RGBA_8888,alphaType:i.AlphaType.Unpremul,colorSpace:i.ColorSpace.SRGB},H=v*I*4,re=i._malloc(H);return(j=i.Surface._makeRasterDirect(j,re,4*v))&&(j.Dd=null,j.uf=v,j.rf=I,j.tf=H,j.Ue=re,j.getCanvas().clear(i.TRANSPARENT)),j},i.MakeRasterDirectSurface=function(v,I,j){return i.Surface._makeRasterDirect(v,I.byteOffset,j)},i.Surface.prototype.flush=function(v){if(this._flush(),this.Dd){var I=new Uint8ClampedArray(i.HEAPU8.buffer,this.Ue,this.tf);I=new ImageData(I,this.uf,this.rf),v?this.Dd.getContext("2d").putImageData(I,0,0,v[0],v[1],v[2]-v[0],v[3]-v[1]):this.Dd.getContext("2d").putImageData(I,0,0)}},i.Surface.prototype.dispose=function(){this.Ue&&i._free(this.Ue),this.delete()},i.currentContext=i.currentContext||function(){},i.setCurrentContext=i.setCurrentContext||function(){}})),(function(v){v.Qd=v.Qd||[],v.Qd.push((function(){function I(j,H,re){return j&&j.hasOwnProperty(H)?j[H]:re}v.GetWebGLContext=function(j,H){if(!j)throw"null canvas passed into makeWebGLContext";var re={alpha:I(H,"alpha",1),depth:I(H,"depth",1),stencil:I(H,"stencil",8),antialias:I(H,"antialias",0),premultipliedAlpha:I(H,"premultipliedAlpha",1),preserveDrawingBuffer:I(H,"preserveDrawingBuffer",0),preferLowPowerToHighPerformance:I(H,"preferLowPowerToHighPerformance",0),failIfMajorPerformanceCaveat:I(H,"failIfMajorPerformanceCaveat",0),enableExtensionsByDefault:I(H,"enableExtensionsByDefault",1),explicitSwapControl:I(H,"explicitSwapControl",0),renderViaOffscreenBackBuffer:I(H,"renderViaOffscreenBackBuffer",0)};if(re.majorVersion=H&&H.majorVersion?H.majorVersion:typeof WebGL2RenderingContext<"u"?2:1,re.explicitSwapControl)throw"explicitSwapControl is not supported";return j=(function(_e,fe){_e.cf||(_e.cf=_e.getContext,_e.getContext=function(Le,Oe){return Le=="webgl"==(Oe=_e.cf(Le,Oe))instanceof WebGLRenderingContext?Oe:null});var ge=1<fe.majorVersion?_e.getContext("webgl2",fe):_e.getContext("webgl",fe);return ge?(function(Le,Oe){var gt=oe(Vn),Tt={Jf:gt,attributes:Oe,version:Oe.majorVersion,ze:Le};return Le.canvas&&(Le.canvas.df=Tt),Vn[gt]=Tt,(Oe.zf===void 0||Oe.zf)&&(function(Ot){if(Ot||(Ot=He),!Ot.Lf){Ot.Lf=!0;var Pt=Ot.ze;(function(Et){var Ht=Et.getExtension("ANGLE_instanced_arrays");Ht&&(Et.vertexAttribDivisor=function(w,N){Ht.vertexAttribDivisorANGLE(w,N)},Et.drawArraysInstanced=function(w,N,U,K){Ht.drawArraysInstancedANGLE(w,N,U,K)},Et.drawElementsInstanced=function(w,N,U,K,Z){Ht.drawElementsInstancedANGLE(w,N,U,K,Z)})})(Pt),(function(Et){var Ht=Et.getExtension("OES_vertex_array_object");Ht&&(Et.createVertexArray=function(){return Ht.createVertexArrayOES()},Et.deleteVertexArray=function(w){Ht.deleteVertexArrayOES(w)},Et.bindVertexArray=function(w){Ht.bindVertexArrayOES(w)},Et.isVertexArray=function(w){return Ht.isVertexArrayOES(w)})})(Pt),(function(Et){var Ht=Et.getExtension("WEBGL_draw_buffers");Ht&&(Et.drawBuffers=function(w,N){Ht.drawBuffersWEBGL(w,N)})})(Pt),Pt.hf=Pt.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),Pt.lf=Pt.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"),2<=Ot.version&&(Pt.jf=Pt.getExtension("EXT_disjoint_timer_query_webgl2")),(2>Ot.version||!Pt.jf)&&(Pt.jf=Pt.getExtension("EXT_disjoint_timer_query")),Pt.hg=Pt.getExtension("WEBGL_multi_draw"),(Pt.getSupportedExtensions()||[]).forEach((function(Et){Et.includes("lose_context")||Et.includes("debug")||Pt.getExtension(Et)}))}})(Tt),gt})(ge,fe):0})(j,re),j?(Ee(j),j):0},v.deleteContext=function(j){He===Vn[j]&&(He=null),typeof JSEvents=="object"&&JSEvents.jg(Vn[j].ze.canvas),Vn[j]&&Vn[j].ze.canvas&&(Vn[j].ze.canvas.df=void 0),Vn[j]=null},v.MakeWebGLCanvasSurface=function(j,H,re){H=H||null;var _e=j,fe=typeof OffscreenCanvas<"u"&&_e instanceof OffscreenCanvas;if(!(typeof HTMLCanvasElement<"u"&&_e instanceof HTMLCanvasElement||fe||(_e=document.getElementById(j),_e)))throw"Canvas with id "+j+" was not found";if(!(j=this.GetWebGLContext(_e,re))||0>j)throw"failed to create webgl context: err "+j;return re=this.MakeGrContext(j),(H=this.MakeOnScreenGLSurface(re,_e.width,_e.height,H))?(H.de=j,H.grContext=re,H.openGLversion=_e.df.version,H):(H=_e.cloneNode(!0),_e.parentNode.replaceChild(H,_e),H.classList.add("ck-replaced"),v.MakeSWCanvasSurface(H))},v.MakeCanvasSurface=v.MakeWebGLCanvasSurface}))})(r),(function(v){function I(q,G,te,me,Be){for(var at=0;at<q.length;at++)G[at*te+(at*Be+me+te)%te]=q[at];return G}function j(q){for(var G=q*q,te=Array(G);G--;)te[G]=G%(q+1)==0?1:0;return te}function H(q){return!!q&&q.constructor===Float32Array&&q.length===4}function re(q){return(ge(255*q[3])<<24|ge(255*q[0])<<16|ge(255*q[1])<<8|ge(255*q[2])<<0)>>>0}function _e(q){if(q instanceof Float32Array){for(var G=Math.floor(q.length/4),te=new Uint32Array(G),me=0;me<G;me++)te[me]=re(q.slice(4*me,4*(me+1)));return te}return q instanceof Uint32Array?q:q instanceof Array&&q[0]instanceof Float32Array?q.map(re):void 0}function fe(q){if(q===void 0)return 1;var G=parseFloat(q);return q&&q.indexOf("%")!==-1?G/100:G}function ge(q){return Math.round(Math.max(0,Math.min(q||0,255)))}function Le(q,G){G&&!G._ck&&v._free(q)}function Oe(q,G,te){if(!q||!q.length)return rn;if(q._ck)return q.byteOffset;var me=v[G].BYTES_PER_ELEMENT;return te||(te=v._malloc(q.length*me)),v[G].set(q,te/me),te}function gt(q){var G={Ud:rn,count:q.length,colorType:v.ColorType.RGBA_F32};if(q instanceof Float32Array)G.Ud=Oe(q,"HEAPF32"),G.count=q.length/4;else if(q instanceof Uint32Array)G.Ud=Oe(q,"HEAPU32"),G.colorType=v.ColorType.RGBA_8888;else{if(!(q instanceof Array))throw"Invalid argument to copyFlexibleColorArray, Not a color array "+typeof q;if(q&&q.length){for(var te=v._malloc(16*q.length),me=0,Be=te/4,at=0;at<q.length;at++)for(var bt=0;4>bt;bt++)v.HEAPF32[Be+me]=q[at][bt],me++;q=te}else q=rn;G.Ud=q}return G}function Tt(q){if(!q)return rn;if(q.length){if(q.length===6||q.length===9)return Oe(q,"HEAPF32",Ke),q.length===6&&v.HEAPF32.set($n,6+Ke/4),Ke;if(q.length===16){var G=J.toTypedArray();return G[0]=q[0],G[1]=q[1],G[2]=q[3],G[3]=q[4],G[4]=q[5],G[5]=q[7],G[6]=q[12],G[7]=q[13],G[8]=q[15],Ke}throw"invalid matrix size"}return(G=J.toTypedArray())[0]=q.m11,G[1]=q.m21,G[2]=q.m41,G[3]=q.m12,G[4]=q.m22,G[5]=q.m42,G[6]=q.m14,G[7]=q.m24,G[8]=q.m44,Ke}function Ot(q){for(var G=Array(16),te=0;16>te;te++)G[te]=v.HEAPF32[q/4+te];return G}function Pt(q,G){return Oe(q,"HEAPF32",ct)}function Et(q,G,te,me){var Be=ee.toTypedArray();return Be[0]=q,Be[1]=G,Be[2]=te,Be[3]=me,ct}function Ht(q){for(var G=new Float32Array(4),te=0;4>te;te++)G[te]=v.HEAPF32[q/4+te];return G}function w(q,G){return Oe(q,"HEAPF32",G||St)}function N(q,G){return Oe(q,"HEAPF32",G||In)}function U(){for(var q=0,G=0;G<arguments.length-1;G+=2)q+=arguments[G]*arguments[G+1];return q}function K(q,G,te){for(var me=Array(q.length),Be=0;Be<te;Be++)for(var at=0;at<te;at++){for(var bt=0,It=0;It<te;It++)bt+=q[te*Be+It]*G[te*It+at];me[Be*te+at]=bt}return me}function Z(q,G){for(var te=K(G[0],G[1],q),me=2;me<G.length;)te=K(te,G[me],q),me++;return te}v.Color=function(q,G,te,me){return me===void 0&&(me=1),v.Color4f(ge(q)/255,ge(G)/255,ge(te)/255,me)},v.ColorAsInt=function(q,G,te,me){return me===void 0&&(me=255),(ge(me)<<24|ge(q)<<16|ge(G)<<8|ge(te)<<0&268435455)>>>0},v.Color4f=function(q,G,te,me){return me===void 0&&(me=1),Float32Array.of(q,G,te,me)},Object.defineProperty(v,"TRANSPARENT",{get:function(){return v.Color4f(0,0,0,0)}}),Object.defineProperty(v,"BLACK",{get:function(){return v.Color4f(0,0,0,1)}}),Object.defineProperty(v,"WHITE",{get:function(){return v.Color4f(1,1,1,1)}}),Object.defineProperty(v,"RED",{get:function(){return v.Color4f(1,0,0,1)}}),Object.defineProperty(v,"GREEN",{get:function(){return v.Color4f(0,1,0,1)}}),Object.defineProperty(v,"BLUE",{get:function(){return v.Color4f(0,0,1,1)}}),Object.defineProperty(v,"YELLOW",{get:function(){return v.Color4f(1,1,0,1)}}),Object.defineProperty(v,"CYAN",{get:function(){return v.Color4f(0,1,1,1)}}),Object.defineProperty(v,"MAGENTA",{get:function(){return v.Color4f(1,0,1,1)}}),v.getColorComponents=function(q){return[Math.floor(255*q[0]),Math.floor(255*q[1]),Math.floor(255*q[2]),q[3]]},v.parseColorString=function(q,G){if((q=q.toLowerCase()).startsWith("#")){switch(G=255,q.length){case 9:G=parseInt(q.slice(7,9),16);case 7:var te=parseInt(q.slice(1,3),16),me=parseInt(q.slice(3,5),16),Be=parseInt(q.slice(5,7),16);break;case 5:G=17*parseInt(q.slice(4,5),16);case 4:te=17*parseInt(q.slice(1,2),16),me=17*parseInt(q.slice(2,3),16),Be=17*parseInt(q.slice(3,4),16)}return v.Color(te,me,Be,G/255)}return q.startsWith("rgba")?(q=(q=q.slice(5,-1)).split(","),v.Color(+q[0],+q[1],+q[2],fe(q[3]))):q.startsWith("rgb")?(q=(q=q.slice(4,-1)).split(","),v.Color(+q[0],+q[1],+q[2],fe(q[3]))):q.startsWith("gray(")||q.startsWith("hsl")||!G||(q=G[q])===void 0?v.BLACK:q},v.multiplyByAlpha=function(q,G){return(q=q.slice())[3]=Math.max(0,Math.min(q[3]*G,1)),q},v.Malloc=function(q,G){var te=v._malloc(G*q.BYTES_PER_ELEMENT);return{_ck:!0,length:G,byteOffset:te,he:null,subarray:function(me,Be){return(me=this.toTypedArray().subarray(me,Be))._ck=!0,me},toTypedArray:function(){return this.he&&this.he.length||(this.he=new q(v.HEAPU8.buffer,te,G),this.he._ck=!0),this.he}}},v.Free=function(q){v._free(q.byteOffset),q.byteOffset=rn,q.toTypedArray=null,q.he=null};var J,se,ee,ve,Ce,Pe,We,Je,Ze,it,Ke=rn,wt=rn,ct=rn,St=rn,Dt=rn,Lt=rn,Yt=rn,sn=rn,In=rn,jn=rn,$n=Float32Array.of(0,0,1),or={};v.ie=function(){this.ce=[],this.Jd=null,Object.defineProperty(this,"length",{enumerable:!0,get:function(){return this.ce.length/4}})},v.ie.prototype.push=function(q,G,te,me){this.Jd||this.ce.push(q,G,te,me)},v.ie.prototype.set=function(q,G,te,me,Be){0>q||q>=this.ce.length/4||(q*=4,this.Jd?(q=this.Jd/4+q,v.HEAPF32[q]=G,v.HEAPF32[q+1]=te,v.HEAPF32[q+2]=me,v.HEAPF32[q+3]=Be):(this.ce[q]=G,this.ce[q+1]=te,this.ce[q+2]=me,this.ce[q+3]=Be))},v.ie.prototype.build=function(){return this.Jd?this.Jd:this.Jd=Oe(this.ce,"HEAPF32")},v.ie.prototype.delete=function(){this.Jd&&(v._free(this.Jd),this.Jd=null)},v.Ae=function(){this.Fe=[],this.Jd=null,Object.defineProperty(this,"length",{enumerable:!0,get:function(){return this.Fe.length}})},v.Ae.prototype.push=function(q){this.Jd||this.Fe.push(q)},v.Ae.prototype.set=function(q,G){0>q||q>=this.Fe.length||(q*=4,this.Jd?v.HEAPU32[this.Jd/4+q]=G:this.Fe[q]=G)},v.Ae.prototype.build=function(){return this.Jd?this.Jd:this.Jd=Oe(this.Fe,"HEAPU32")},v.Ae.prototype.delete=function(){this.Jd&&(v._free(this.Jd),this.Jd=null)},v.RectBuilder=v.ie,v.RSXFormBuilder=v.ie,v.ColorBuilder=v.Ae;var rn=0,Gr=!new Function("try {return this===window;}catch(e){ return false;}")();v.onRuntimeInitialized=function(){function q(G,te,me,Be,at,bt){bt||(bt=4*Be.width,Be.colorType===v.ColorType.RGBA_F16?bt*=2:Be.colorType===v.ColorType.RGBA_F32&&(bt*=4));var It=bt*Be.height,qt=at?at.byteOffset:v._malloc(It);if(!G._readPixels(Be,qt,bt,te,me))return at||v._free(qt),null;if(at)return at.toTypedArray();switch(Be.colorType){case v.ColorType.RGBA_8888:case v.ColorType.RGBA_F16:G=new Uint8Array(v.HEAPU8.buffer,qt,It).slice();break;case v.ColorType.RGBA_F32:G=new Float32Array(v.HEAPU8.buffer,qt,It).slice();break;default:return null}return v._free(qt),G}ee=v.Malloc(Float32Array,4),ct=ee.byteOffset,se=v.Malloc(Float32Array,16),wt=se.byteOffset,J=v.Malloc(Float32Array,9),Ke=J.byteOffset,Ze=v.Malloc(Float32Array,12),In=Ze.byteOffset,it=v.Malloc(Float32Array,12),jn=it.byteOffset,ve=v.Malloc(Float32Array,4),St=ve.byteOffset,Ce=v.Malloc(Float32Array,4),Dt=Ce.byteOffset,Pe=v.Malloc(Float32Array,3),Lt=Pe.byteOffset,We=v.Malloc(Float32Array,3),Yt=We.byteOffset,Je=v.Malloc(Int32Array,4),sn=Je.byteOffset,v.ColorSpace.SRGB=v.ColorSpace._MakeSRGB(),v.ColorSpace.DISPLAY_P3=v.ColorSpace._MakeDisplayP3(),v.ColorSpace.ADOBE_RGB=v.ColorSpace._MakeAdobeRGB(),v.Path.MakeFromCmds=function(G){for(var te=0,me=0;me<G.length;me++)te+=G[me].length;if(or[te])var Be=or[te];else Be=new Float32Array(te),or[te]=Be;var at=0;for(me=0;me<G.length;me++)for(var bt=0;bt<G[me].length;bt++)Be[at]=G[me][bt],at++;return G=[Oe(Be,"HEAPF32"),te],te=v.Path._MakeFromCmds(G[0],G[1]),v._free(G[0]),te},v.Path.MakeFromVerbsPointsWeights=function(G,te,me){var Be=Oe(G,"HEAPU8"),at=Oe(te,"HEAPF32"),bt=Oe(me,"HEAPF32"),It=v.Path._MakeFromVerbsPointsWeights(Be,G.length,at,te.length,bt,me&&me.length||0);return Le(Be,G),Le(at,te),Le(bt,me),It},v.Path.prototype.addArc=function(G,te,me){return G=w(G),this._addArc(G,te,me),this},v.Path.prototype.addOval=function(G,te,me){return me===void 0&&(me=1),G=w(G),this._addOval(G,!!te,me),this},v.Path.prototype.addPath=function(){var G=Array.prototype.slice.call(arguments),te=G[0],me=!1;if(typeof G[G.length-1]=="boolean"&&(me=G.pop()),G.length===1)this._addPath(te,1,0,0,0,1,0,0,0,1,me);else if(G.length===2)G=G[1],this._addPath(te,G[0],G[1],G[2],G[3],G[4],G[5],G[6]||0,G[7]||0,G[8]||1,me);else{if(G.length!==7&&G.length!==10)return null;this._addPath(te,G[1],G[2],G[3],G[4],G[5],G[6],G[7]||0,G[8]||0,G[9]||1,me)}return this},v.Path.prototype.addPoly=function(G,te){var me=Oe(G,"HEAPF32");return this._addPoly(me,G.length/2,te),Le(me,G),this},v.Path.prototype.addRect=function(G,te){return G=w(G),this._addRect(G,!!te),this},v.Path.prototype.addRRect=function(G,te){return G=N(G),this._addRRect(G,!!te),this},v.Path.prototype.addVerbsPointsWeights=function(G,te,me){var Be=Oe(G,"HEAPU8"),at=Oe(te,"HEAPF32"),bt=Oe(me,"HEAPF32");this._addVerbsPointsWeights(Be,G.length,at,te.length,bt,me&&me.length||0),Le(Be,G),Le(at,te),Le(bt,me)},v.Path.prototype.arc=function(G,te,me,Be,at,bt){return G=v.LTRBRect(G-me,te-me,G+me,te+me),at=(at-Be)/Math.PI*180-360*!!bt,(bt=new v.Path).addArc(G,Be/Math.PI*180,at),this.addPath(bt,!0),bt.delete(),this},v.Path.prototype.arcToOval=function(G,te,me,Be){return G=w(G),this._arcToOval(G,te,me,Be),this},v.Path.prototype.arcToRotated=function(G,te,me,Be,at,bt,It){return this._arcToRotated(G,te,me,!!Be,!!at,bt,It),this},v.Path.prototype.arcToTangent=function(G,te,me,Be,at){return this._arcToTangent(G,te,me,Be,at),this},v.Path.prototype.close=function(){return this._close(),this},v.Path.prototype.conicTo=function(G,te,me,Be,at){return this._conicTo(G,te,me,Be,at),this},v.Path.prototype.computeTightBounds=function(G){this._computeTightBounds(St);var te=ve.toTypedArray();return G?(G.set(te),G):te.slice()},v.Path.prototype.cubicTo=function(G,te,me,Be,at,bt){return this._cubicTo(G,te,me,Be,at,bt),this},v.Path.prototype.dash=function(G,te,me){return this._dash(G,te,me)?this:null},v.Path.prototype.getBounds=function(G){this._getBounds(St);var te=ve.toTypedArray();return G?(G.set(te),G):te.slice()},v.Path.prototype.lineTo=function(G,te){return this._lineTo(G,te),this},v.Path.prototype.moveTo=function(G,te){return this._moveTo(G,te),this},v.Path.prototype.offset=function(G,te){return this._transform(1,0,G,0,1,te,0,0,1),this},v.Path.prototype.quadTo=function(G,te,me,Be){return this._quadTo(G,te,me,Be),this},v.Path.prototype.rArcTo=function(G,te,me,Be,at,bt,It){return this._rArcTo(G,te,me,Be,at,bt,It),this},v.Path.prototype.rConicTo=function(G,te,me,Be,at){return this._rConicTo(G,te,me,Be,at),this},v.Path.prototype.rCubicTo=function(G,te,me,Be,at,bt){return this._rCubicTo(G,te,me,Be,at,bt),this},v.Path.prototype.rLineTo=function(G,te){return this._rLineTo(G,te),this},v.Path.prototype.rMoveTo=function(G,te){return this._rMoveTo(G,te),this},v.Path.prototype.rQuadTo=function(G,te,me,Be){return this._rQuadTo(G,te,me,Be),this},v.Path.prototype.stroke=function(G){return(G=G||{}).width=G.width||1,G.miter_limit=G.miter_limit||4,G.cap=G.cap||v.StrokeCap.Butt,G.join=G.join||v.StrokeJoin.Miter,G.precision=G.precision||1,this._stroke(G)?this:null},v.Path.prototype.transform=function(){if(arguments.length===1){var G=arguments[0];this._transform(G[0],G[1],G[2],G[3],G[4],G[5],G[6]||0,G[7]||0,G[8]||1)}else{if(arguments.length!==6&&arguments.length!==9)throw"transform expected to take 1 or 9 arguments. Got "+arguments.length;G=arguments,this._transform(G[0],G[1],G[2],G[3],G[4],G[5],G[6]||0,G[7]||0,G[8]||1)}return this},v.Path.prototype.trim=function(G,te,me){return this._trim(G,te,!!me)?this:null},v.Image.prototype.makeShaderCubic=function(G,te,me,Be,at){return at=Tt(at),this._makeShaderCubic(G,te,me,Be,at)},v.Image.prototype.makeShaderOptions=function(G,te,me,Be,at){return at=Tt(at),this._makeShaderOptions(G,te,me,Be,at)},v.Image.prototype.readPixels=function(G,te,me,Be,at){return q(this,G,te,me,Be,at)},v.Canvas.prototype.clear=function(G){G=Pt(G),this._clear(G)},v.Canvas.prototype.clipRRect=function(G,te,me){G=N(G),this._clipRRect(G,te,me)},v.Canvas.prototype.clipRect=function(G,te,me){G=w(G),this._clipRect(G,te,me)},v.Canvas.prototype.concat=function(G){G=(function(te){if(!te)return rn;var me=se.toTypedArray();if(te.length){if(te.length!==16&&te.length!==6&&te.length!==9)throw"invalid matrix size";return te.length===16?Oe(te,"HEAPF32",wt):(me.fill(0),me[0]=te[0],me[1]=te[1],me[3]=te[2],me[4]=te[3],me[5]=te[4],me[7]=te[5],me[12]=te[6],me[13]=te[7],me[15]=te[8],te.length===6&&(me[12]=0,me[13]=0,me[15]=1),wt)}return me[0]=te.m11,me[1]=te.m21,me[2]=te.m31,me[3]=te.m41,me[4]=te.m12,me[5]=te.m22,me[6]=te.m32,me[7]=te.m42,me[8]=te.m13,me[9]=te.m23,me[10]=te.m33,me[11]=te.m43,me[12]=te.m14,me[13]=te.m24,me[14]=te.m34,me[15]=te.m44,wt})(G),this._concat(G)},v.Canvas.prototype.drawArc=function(G,te,me,Be,at){G=w(G),this._drawArc(G,te,me,Be,at)},v.Canvas.prototype.drawAtlas=function(G,te,me,Be,at,bt,It){if(G&&Be&&te&&me&&te.length===me.length){at||(at=v.BlendMode.SrcOver);var qt=te.build?te.build():Oe(te,"HEAPF32");if(me.build)var zt=me.build(),cn=me.length;else zt=Oe(me,"HEAPF32"),cn=me.length/4;var un=rn;if(bt&&(un=bt.build?bt.build():Oe(_e(bt),"HEAPU32")),It&&"B"in It&&"C"in It)this._drawAtlasCubic(G,zt,qt,un,cn,at,It.B,It.C,Be);else{let Dn=v.FilterMode.Linear,Zn=v.MipmapMode.None;It&&(Dn=It.filter,"mipmap"in It&&(Zn=It.mipmap)),this._drawAtlasOptions(G,zt,qt,un,cn,at,Dn,Zn,Be)}qt&&!te.build&&Le(qt,te),zt&&!me.build&&Le(zt,me),un&&!bt.build&&Le(un,bt)}},v.Canvas.prototype.drawColor=function(G,te){G=Pt(G),te!==void 0?this._drawColor(G,te):this._drawColor(G)},v.Canvas.prototype.drawColorComponents=function(G,te,me,Be,at){G=Et(G,te,me,Be),at!==void 0?this._drawColor(G,at):this._drawColor(G)},v.Canvas.prototype.drawDRRect=function(G,te,me){G=N(G,In),te=N(te,jn),this._drawDRRect(G,te,me)},v.Canvas.prototype.drawImageNine=function(G,te,me,Be,at){te=Oe(te,"HEAP32",sn),me=w(me),this._drawImageNine(G,te,me,Be,at||null)},v.Canvas.prototype.drawImageRect=function(G,te,me,Be,at){w(te,St),w(me,Dt),this._drawImageRect(G,St,Dt,Be,!!at)},v.Canvas.prototype.drawImageRectCubic=function(G,te,me,Be,at,bt){w(te,St),w(me,Dt),this._drawImageRectCubic(G,St,Dt,Be,at,bt||null)},v.Canvas.prototype.drawImageRectOptions=function(G,te,me,Be,at,bt){w(te,St),w(me,Dt),this._drawImageRectOptions(G,St,Dt,Be,at,bt||null)},v.Canvas.prototype.drawOval=function(G,te){G=w(G),this._drawOval(G,te)},v.Canvas.prototype.drawPoints=function(G,te,me){var Be=Oe(te,"HEAPF32");this._drawPoints(G,Be,te.length/2,me),Le(Be,te)},v.Canvas.prototype.drawRRect=function(G,te){G=N(G),this._drawRRect(G,te)},v.Canvas.prototype.drawRect=function(G,te){G=w(G),this._drawRect(G,te)},v.Canvas.prototype.drawShadow=function(G,te,me,Be,at,bt,It){var qt=Oe(at,"HEAPF32"),zt=Oe(bt,"HEAPF32");te=Oe(te,"HEAPF32",Lt),me=Oe(me,"HEAPF32",Yt),this._drawShadow(G,te,me,Be,qt,zt,It),Le(qt,at),Le(zt,bt)},v.getShadowLocalBounds=function(G,te,me,Be,at,bt,It){return G=Tt(G),me=Oe(me,"HEAPF32",Lt),Be=Oe(Be,"HEAPF32",Yt),this._getShadowLocalBounds(G,te,me,Be,at,bt,St)?(te=ve.toTypedArray(),It?(It.set(te),It):te.slice()):null},v.Canvas.prototype.getLocalToDevice=function(){return this._getLocalToDevice(wt),Ot(wt)},v.Canvas.prototype.findMarkedCTM=function(G){return this._findMarkedCTM(G,wt)?Ot(wt):null},v.Canvas.prototype.getTotalMatrix=function(){this._getTotalMatrix(Ke);for(var G=Array(9),te=0;9>te;te++)G[te]=v.HEAPF32[Ke/4+te];return G},v.Canvas.prototype.readPixels=function(G,te,me,Be,at){return q(this,G,te,me,Be,at)},v.Canvas.prototype.saveLayer=function(G,te,me,Be){return te=w(te),this._saveLayer(G||null,te,me||null,Be||0)},v.Canvas.prototype.writePixels=function(G,te,me,Be,at,bt,It,qt){if(G.byteLength%(te*me))throw"pixels length must be a multiple of the srcWidth * srcHeight";var zt=G.byteLength/(te*me);bt=bt||v.AlphaType.Unpremul,It=It||v.ColorType.RGBA_8888,qt=qt||v.ColorSpace.SRGB;var cn=zt*te;return zt=Oe(G,"HEAPU8"),te=this._writePixels({width:te,height:me,colorType:It,alphaType:bt,colorSpace:qt},zt,cn,Be,at),Le(zt,G),te},v.ColorFilter.MakeBlend=function(G,te){return G=Pt(G),v.ColorFilter._MakeBlend(G,te)},v.ColorFilter.MakeMatrix=function(G){if(!G||G.length!==20)throw"invalid color matrix";var te=Oe(G,"HEAPF32"),me=v.ColorFilter._makeMatrix(te);return Le(te,G),me},v.ContourMeasure.prototype.getPosTan=function(G,te){return this._getPosTan(G,St),G=ve.toTypedArray(),te?(te.set(G),te):G.slice()},v.ImageFilter.MakeMatrixTransform=function(G,te,me){return G=Tt(G),v.ImageFilter._MakeMatrixTransform(G,te,me)},v.Paint.prototype.getColor=function(){return this._getColor(ct),Ht(ct)},v.Paint.prototype.setColor=function(G,te){te=te||null,G=Pt(G),this._setColor(G,te)},v.Paint.prototype.setColorComponents=function(G,te,me,Be,at){at=at||null,G=Et(G,te,me,Be),this._setColor(G,at)},v.Path.prototype.getPoint=function(G,te){return this._getPoint(G,St),G=ve.toTypedArray(),te?(te[0]=G[0],te[1]=G[1],te):G.slice(0,2)},v.PictureRecorder.prototype.beginRecording=function(G){return G=w(G),this._beginRecording(G)},v.Surface.prototype.makeImageSnapshot=function(G){return G=Oe(G,"HEAP32",sn),this._makeImageSnapshot(G)},v.Surface.prototype.requestAnimationFrame=function(G,te){this.Be||(this.Be=this.getCanvas()),requestAnimationFrame(function(){this.de!==void 0&&v.setCurrentContext(this.de),G(this.Be),this.flush(te)}.bind(this))},v.Surface.prototype.drawOnce=function(G,te){this.Be||(this.Be=this.getCanvas()),requestAnimationFrame(function(){this.de!==void 0&&v.setCurrentContext(this.de),G(this.Be),this.flush(te),this.dispose()}.bind(this))},v.PathEffect.MakeDash=function(G,te){if(te||(te=0),!G.length||G.length%2==1)throw"Intervals array must have even length";var me=Oe(G,"HEAPF32");return te=v.PathEffect._MakeDash(me,G.length,te),Le(me,G),te},v.Shader.MakeColor=function(G,te){return te=te||null,G=Pt(G),v.Shader._MakeColor(G,te)},v.Shader.Blend=v.Shader.MakeBlend,v.Shader.Color=v.Shader.MakeColor,v.Shader.Lerp=v.Shader.MakeLerp,v.Shader.MakeLinearGradient=function(G,te,me,Be,at,bt,It,qt){qt=qt||null;var zt=gt(me),cn=Oe(Be,"HEAPF32");It=It||0,bt=Tt(bt);var un=ve.toTypedArray();return un.set(G),un.set(te,2),G=v.Shader._MakeLinearGradient(St,zt.Ud,zt.colorType,cn,zt.count,at,It,bt,qt),Le(zt.Ud,me),Be&&Le(cn,Be),G},v.Shader.MakeRadialGradient=function(G,te,me,Be,at,bt,It,qt){qt=qt||null;var zt=gt(me),cn=Oe(Be,"HEAPF32");return It=It||0,bt=Tt(bt),G=v.Shader._MakeRadialGradient(G[0],G[1],te,zt.Ud,zt.colorType,cn,zt.count,at,It,bt,qt),Le(zt.Ud,me),Be&&Le(cn,Be),G},v.Shader.MakeSweepGradient=function(G,te,me,Be,at,bt,It,qt,zt,cn){cn=cn||null;var un=gt(me),Dn=Oe(Be,"HEAPF32");return It=It||0,qt=qt||0,zt=zt||360,bt=Tt(bt),G=v.Shader._MakeSweepGradient(G,te,un.Ud,un.colorType,Dn,un.count,at,qt,zt,It,bt,cn),Le(un.Ud,me),Be&&Le(Dn,Be),G},v.Shader.MakeTwoPointConicalGradient=function(G,te,me,Be,at,bt,It,qt,zt,cn){cn=cn||null;var un=gt(at),Dn=Oe(bt,"HEAPF32");zt=zt||0,qt=Tt(qt);var Zn=ve.toTypedArray();return Zn.set(G),Zn.set(me,2),G=v.Shader._MakeTwoPointConicalGradient(St,te,Be,un.Ud,un.colorType,Dn,un.count,It,zt,qt,cn),Le(un.Ud,at),bt&&Le(Dn,bt),G},v.Vertices.prototype.bounds=function(G){this._bounds(St);var te=ve.toTypedArray();return G?(G.set(te),G):te.slice()},v.Qd&&v.Qd.forEach((function(G){G()}))},v.computeTonalColors=function(q){var G=Oe(q.ambient,"HEAPF32"),te=Oe(q.spot,"HEAPF32");this._computeTonalColors(G,te);var me={ambient:Ht(G),spot:Ht(te)};return Le(G,q.ambient),Le(te,q.spot),me},v.LTRBRect=function(q,G,te,me){return Float32Array.of(q,G,te,me)},v.XYWHRect=function(q,G,te,me){return Float32Array.of(q,G,q+te,G+me)},v.LTRBiRect=function(q,G,te,me){return Int32Array.of(q,G,te,me)},v.XYWHiRect=function(q,G,te,me){return Int32Array.of(q,G,q+te,G+me)},v.RRectXY=function(q,G,te){return Float32Array.of(q[0],q[1],q[2],q[3],G,te,G,te,G,te,G,te)},v.MakeAnimatedImageFromEncoded=function(q){q=new Uint8Array(q);var G=v._malloc(q.byteLength);return v.HEAPU8.set(q,G),(q=v._decodeAnimatedImage(G,q.byteLength))?q:null},v.MakeImageFromEncoded=function(q){q=new Uint8Array(q);var G=v._malloc(q.byteLength);return v.HEAPU8.set(q,G),(q=v._decodeImage(G,q.byteLength))?q:null};var jr=null;v.MakeImageFromCanvasImageSource=function(q){var G=q.width,te=q.height;jr||(jr=document.createElement("canvas")),jr.width=G,jr.height=te;var me=jr.getContext("2d");return me.drawImage(q,0,0),q=me.getImageData(0,0,G,te),v.MakeImage({width:G,height:te,alphaType:v.AlphaType.Unpremul,colorType:v.ColorType.RGBA_8888,colorSpace:v.ColorSpace.SRGB},q.data,4*G)},v.MakeImage=function(q,G,te){var me=v._malloc(G.length);return v.HEAPU8.set(G,me),v._MakeImage(q,me,G.length,te)},v.MakeVertices=function(q,G,te,me,Be,at){var bt=Be&&Be.length||0,It=0;if(te&&te.length&&(It|=1),me&&me.length&&(It|=2),at===void 0||at||(It|=4),Oe(G,"HEAPF32",(q=new v._VerticesBuilder(q,G.length/2,bt,It)).positions()),q.texCoords()&&Oe(te,"HEAPF32",q.texCoords()),q.colors()){if(me.build)throw"Color builder not accepted by MakeVertices, use array of ints";Oe(_e(me),"HEAPU32",q.colors())}return q.indices()&&Oe(Be,"HEAPU16",q.indices()),q.detach()},v.Matrix={},v.Matrix.identity=function(){return j(3)},v.Matrix.invert=function(q){var G=q[0]*q[4]*q[8]+q[1]*q[5]*q[6]+q[2]*q[3]*q[7]-q[2]*q[4]*q[6]-q[1]*q[3]*q[8]-q[0]*q[5]*q[7];return G?[(q[4]*q[8]-q[5]*q[7])/G,(q[2]*q[7]-q[1]*q[8])/G,(q[1]*q[5]-q[2]*q[4])/G,(q[5]*q[6]-q[3]*q[8])/G,(q[0]*q[8]-q[2]*q[6])/G,(q[2]*q[3]-q[0]*q[5])/G,(q[3]*q[7]-q[4]*q[6])/G,(q[1]*q[6]-q[0]*q[7])/G,(q[0]*q[4]-q[1]*q[3])/G]:null},v.Matrix.mapPoints=function(q,G){for(var te=0;te<G.length;te+=2){var me=G[te],Be=G[te+1],at=q[6]*me+q[7]*Be+q[8],bt=q[3]*me+q[4]*Be+q[5];G[te]=(q[0]*me+q[1]*Be+q[2])/at,G[te+1]=bt/at}return G},v.Matrix.multiply=function(){return Z(3,arguments)},v.Matrix.rotated=function(q,G,te){G=G||0,te=te||0;var me=Math.sin(q);return[q=Math.cos(q),-me,U(me,te,1-q,G),me,q,U(-me,G,1-q,te),0,0,1]},v.Matrix.scaled=function(q,G,te,me){te=te||0,me=me||0;var Be=I([q,G],j(3),3,0,1);return I([te-q*te,me-G*me],Be,3,2,0)},v.Matrix.skewed=function(q,G,te,me){te=te||0,me=me||0;var Be=I([q,G],j(3),3,1,-1);return I([-q*te,-G*me],Be,3,2,0)},v.Matrix.translated=function(q,G){return I(arguments,j(3),3,2,0)},v.Vector={},v.Vector.dot=function(q,G){return q.map((function(te,me){return te*G[me]})).reduce((function(te,me){return te+me}))},v.Vector.lengthSquared=function(q){return v.Vector.dot(q,q)},v.Vector.length=function(q){return Math.sqrt(v.Vector.lengthSquared(q))},v.Vector.mulScalar=function(q,G){return q.map((function(te){return te*G}))},v.Vector.add=function(q,G){return q.map((function(te,me){return te+G[me]}))},v.Vector.sub=function(q,G){return q.map((function(te,me){return te-G[me]}))},v.Vector.dist=function(q,G){return v.Vector.length(v.Vector.sub(q,G))},v.Vector.normalize=function(q){return v.Vector.mulScalar(q,1/v.Vector.length(q))},v.Vector.cross=function(q,G){return[q[1]*G[2]-q[2]*G[1],q[2]*G[0]-q[0]*G[2],q[0]*G[1]-q[1]*G[0]]},v.M44={},v.M44.identity=function(){return j(4)},v.M44.translated=function(q){return I(q,j(4),4,3,0)},v.M44.scaled=function(q){return I(q,j(4),4,0,1)},v.M44.rotated=function(q,G){return v.M44.rotatedUnitSinCos(v.Vector.normalize(q),Math.sin(G),Math.cos(G))},v.M44.rotatedUnitSinCos=function(q,G,te){var me=q[0],Be=q[1],at=1-te;return[at*me*me+te,at*me*Be-G*(q=q[2]),at*me*q+G*Be,0,at*me*Be+G*q,at*Be*Be+te,at*Be*q-G*me,0,at*me*q-G*Be,at*Be*q+G*me,at*q*q+te,0,0,0,0,1]},v.M44.lookat=function(q,G,te){G=v.Vector.normalize(v.Vector.sub(G,q)),te=v.Vector.normalize(te),te=v.Vector.normalize(v.Vector.cross(G,te));var me=v.M44.identity();return I(te,me,4,0,0),I(v.Vector.cross(te,G),me,4,1,0),I(v.Vector.mulScalar(G,-1),me,4,2,0),I(q,me,4,3,0),(q=v.M44.invert(me))===null?v.M44.identity():q},v.M44.perspective=function(q,G,te){var me=1/(G-q);return te/=2,[te=Math.cos(te)/Math.sin(te),0,0,0,0,te,0,0,0,0,(G+q)*me,2*G*q*me,0,0,-1,1]},v.M44.rc=function(q,G,te){return q[4*G+te]},v.M44.multiply=function(){return Z(4,arguments)},v.M44.invert=function(q){var G=q[0],te=q[4],me=q[8],Be=q[12],at=q[1],bt=q[5],It=q[9],qt=q[13],zt=q[2],cn=q[6],un=q[10],Dn=q[14],Zn=q[3],br=q[7],vr=q[11],Rr=G*bt-te*at,Pr=G*It-me*at,er=G*qt-Be*at,Mt=te*It-me*bt,ue=te*qt-Be*bt,xe=me*qt-Be*It,et=zt*br-cn*Zn,ut=zt*vr-un*Zn,yt=zt*(q=q[15])-Dn*Zn,vt=cn*vr-un*br,kt=cn*q-Dn*br,dn=un*q-Dn*vr,Hn=Rr*dn-Pr*kt+er*vt+Mt*yt-ue*ut+xe*et,An=1/Hn;return Hn===0||An===1/0?null:(G=[bt*(dn*=An)-It*(kt*=An)+qt*(vt*=An),It*(yt*=An)-at*dn-qt*(ut*=An),at*kt-bt*yt+qt*(et*=An),bt*ut-at*vt-It*et,me*kt-te*dn-Be*vt,G*dn-me*yt+Be*ut,te*yt-G*kt-Be*et,G*vt-te*ut+me*et,br*(xe*=An)-vr*(ue*=An)+q*(Mt*=An),vr*(er*=An)-Zn*xe-q*(Pr*=An),Zn*ue-br*er+q*(Rr*=An),br*Pr-Zn*Mt-vr*Rr,un*ue-cn*xe-Dn*Mt,zt*xe-un*er+Dn*Pr,cn*er-zt*ue-Dn*Rr,zt*Mt-cn*Pr+un*Rr]).every((function(Er){return!isNaN(Er)&&Er!==1/0&&Er!==-1/0}))?G:null},v.M44.transpose=function(q){return[q[0],q[4],q[8],q[12],q[1],q[5],q[9],q[13],q[2],q[6],q[10],q[14],q[3],q[7],q[11],q[15]]},v.M44.mustInvert=function(q){if((q=v.M44.invert(q))===null)throw"Matrix not invertible";return q},v.M44.setupCamera=function(q,G,te){var me=v.M44.lookat(te.eye,te.coa,te.up);return te=v.M44.perspective(te.near,te.far,te.angle),G=[(q[2]-q[0])/2,(q[3]-q[1])/2,G],q=v.M44.multiply(v.M44.translated([(q[0]+q[2])/2,(q[1]+q[3])/2,0]),v.M44.scaled(G)),v.M44.multiply(q,te,me,v.M44.mustInvert(q))},v.ColorMatrix={},v.ColorMatrix.identity=function(){var q=new Float32Array(20);return q[0]=1,q[6]=1,q[12]=1,q[18]=1,q},v.ColorMatrix.scaled=function(q,G,te,me){var Be=new Float32Array(20);return Be[0]=q,Be[6]=G,Be[12]=te,Be[18]=me,Be};var Wr=[[6,7,11,12],[0,10,2,12],[0,1,5,6]];v.ColorMatrix.rotated=function(q,G,te){var me=v.ColorMatrix.identity();return me[(q=Wr[q])[0]]=te,me[q[1]]=G,me[q[2]]=-G,me[q[3]]=te,me},v.ColorMatrix.postTranslate=function(q,G,te,me,Be){return q[4]+=G,q[9]+=te,q[14]+=me,q[19]+=Be,q},v.ColorMatrix.concat=function(q,G){for(var te=new Float32Array(20),me=0,Be=0;20>Be;Be+=5){for(var at=0;4>at;at++)te[me++]=q[Be]*G[at]+q[Be+1]*G[at+5]+q[Be+2]*G[at+10]+q[Be+3]*G[at+15];te[me++]=q[Be]*G[4]+q[Be+1]*G[9]+q[Be+2]*G[14]+q[Be+3]*G[19]+q[Be+4]}return te},v.Qd=v.Qd||[],v.Qd.push((function(){v.Path.prototype.op=function(q,G){return this._op(q,G)?this:null},v.Path.prototype.simplify=function(){return this._simplify()?this:null}})),v.Qd=v.Qd||[],v.Qd.push((function(){v.Canvas.prototype.drawText=function(q,G,te,me,Be){var at=he(q),bt=v._malloc(at+1);tt(q,Y,bt,at+1),this._drawSimpleText(bt,at,G,te,Be,me),v._free(bt)},v.Font.prototype.getGlyphBounds=function(q,G,te){var me=Oe(q,"HEAPU16"),Be=v._malloc(16*q.length);return this._getGlyphWidthBounds(me,q.length,rn,Be,G||null),G=new Float32Array(v.HEAPU8.buffer,Be,4*q.length),Le(me,q),te?(te.set(G),v._free(Be),te):(q=Float32Array.from(G),v._free(Be),q)},v.Font.prototype.getGlyphIDs=function(q,G,te){G||(G=q.length);var me=he(q)+1,Be=v._malloc(me);return tt(q,Y,Be,me),q=v._malloc(2*G),G=this._getGlyphIDs(Be,me-1,G,q),v._free(Be),0>G?(v._free(q),null):(Be=new Uint16Array(v.HEAPU8.buffer,q,G),te?(te.set(Be),v._free(q),te):(te=Uint32Array.from(Be),v._free(q),te))},v.Font.prototype.getGlyphWidths=function(q,G,te){var me=Oe(q,"HEAPU16"),Be=v._malloc(4*q.length);return this._getGlyphWidthBounds(me,q.length,Be,rn,G||null),G=new Float32Array(v.HEAPU8.buffer,Be,q.length),Le(me,q),te?(te.set(G),v._free(Be),te):(q=Float32Array.from(G),v._free(Be),q)},v.FontMgr.FromData=function(){if(!arguments.length)return null;var q=arguments;if(q.length===1&&Array.isArray(q[0])&&(q=arguments[0]),!q.length)return null;for(var G=[],te=[],me=0;me<q.length;me++){var Be=new Uint8Array(q[me]),at=Oe(Be,"HEAPU8");G.push(at),te.push(Be.byteLength)}return G=Oe(G,"HEAPU32"),te=Oe(te,"HEAPU32"),q=v.FontMgr._fromData(G,te,q.length),v._free(G),v._free(te),q},v.FontMgr.prototype.MakeTypefaceFromData=function(q){var G=Oe(q=new Uint8Array(q),"HEAPU8");return(q=this._makeTypefaceFromData(G,q.byteLength))?q:null},v.TextBlob.MakeOnPath=function(q,G,te,me){if(q&&q.length&&G&&G.countPoints()){if(G.countPoints()===1)return this.MakeFromText(q,te);me||(me=0);var Be=te.getGlyphIDs(q),at=te.getGlyphWidths(Be);Be=new v.RSXFormBuilder;for(var bt=(G=new v.ContourMeasureIter(G,!1,1)).next(),It=new Float32Array(4),qt=0;qt<q.length&&bt;qt++){var zt=at[qt];if((me+=zt/2)>bt.length()){if(bt.delete(),!(bt=G.next())){q=q.substring(0,qt);break}me=zt/2}bt.getPosTan(me,It);var cn=It[2],un=It[3];Be.push(cn,un,It[0]-zt/2*cn,It[1]-zt/2*un),me+=zt/2}return q=this.MakeFromRSXform(q,Be,te),Be.delete(),bt&&bt.delete(),G.delete(),q}},v.TextBlob.MakeFromRSXform=function(q,G,te){var me=he(q)+1,Be=v._malloc(me);return tt(q,Y,Be,me),q=G.build?G.build():Oe(G,"HEAPF32"),te=v.TextBlob._MakeFromRSXform(Be,me-1,q,te),v._free(Be),te||null},v.TextBlob.MakeFromRSXformGlyphs=function(q,G,te){var me=Oe(q,"HEAPU16");return G=G.build?G.build():Oe(G,"HEAPF32"),te=v.TextBlob._MakeFromRSXformGlyphs(me,2*q.length,G,te),Le(me,q),te||null},v.TextBlob.MakeFromGlyphs=function(q,G){var te=Oe(q,"HEAPU16");return G=v.TextBlob._MakeFromGlyphs(te,2*q.length,G),Le(te,q),G||null},v.TextBlob.MakeFromText=function(q,G){var te=he(q)+1,me=v._malloc(te);return tt(q,Y,me,te),q=v.TextBlob._MakeFromText(me,te-1,G),v._free(me),q||null},v.MallocGlyphIDs=function(q){return v.Malloc(Uint16Array,q)}})),(function(){function q(Mt){for(var ue=0;ue<Mt.length;ue++)if(Mt[ue]!==void 0&&!Number.isFinite(Mt[ue]))return!1;return!0}function G(Mt){var ue=v.getColorComponents(Mt);Mt=ue[0];var xe=ue[1],et=ue[2];return(ue=ue[3])===1?(Mt=Mt.toString(16).toLowerCase(),xe=xe.toString(16).toLowerCase(),et=et.toString(16).toLowerCase(),"#"+(Mt=Mt.length===1?"0"+Mt:Mt)+(xe=xe.length===1?"0"+xe:xe)+(et=et.length===1?"0"+et:et)):"rgba("+Mt+", "+xe+", "+et+", "+(ue=ue===0||ue===1?ue:ue.toFixed(8))+")"}function te(Mt){return v.parseColorString(Mt,Rr)}function me(Mt){if(!(Mt=Pr.exec(Mt)))return null;var ue=parseFloat(Mt[4]),xe=16;switch(Mt[5]){case"em":case"rem":case"pc":xe=16*ue;break;case"pt":xe=4*ue/3;break;case"px":xe=ue;break;case"in":xe=96*ue;break;case"cm":xe=96*ue/2.54;break;case"mm":xe=96/25.4*ue;break;case"q":xe=96/25.4/4*ue;break;case"%":xe=16/75*ue}return{style:Mt[1],variant:Mt[2],weight:Mt[3],sizePx:xe,family:Mt[6].trim()}}function Be(Mt){this.Dd=Mt,this.Fd=new v.Paint,this.Fd.setAntiAlias(!0),this.Fd.setStrokeMiter(10),this.Fd.setStrokeCap(v.StrokeCap.Butt),this.Fd.setStrokeJoin(v.StrokeJoin.Miter),this.Ke="10px monospace",this.le=new v.Font(null,10),this.le.setSubpixel(!0),this.Sd=this.Xd=v.BLACK,this.oe=0,this.De=v.TRANSPARENT,this.qe=this.pe=0,this.Ee=this.$d=1,this.Ce=0,this.ne=[],this.Ed=v.BlendMode.SrcOver,this.Fd.setStrokeWidth(this.Ee),this.Fd.setBlendMode(this.Ed),this.Hd=new v.Path,this.Id=v.Matrix.identity(),this.ef=[],this.ue=[],this.be=function(){this.Hd.delete(),this.Fd.delete(),this.le.delete(),this.ue.forEach((function(ue){ue.be()}))},Object.defineProperty(this,"currentTransform",{enumerable:!0,get:function(){return{a:this.Id[0],c:this.Id[1],e:this.Id[2],b:this.Id[3],d:this.Id[4],f:this.Id[5]}},set:function(ue){ue.a&&this.setTransform(ue.a,ue.b,ue.c,ue.d,ue.e,ue.f)}}),Object.defineProperty(this,"fillStyle",{enumerable:!0,get:function(){return H(this.Sd)?G(this.Sd):this.Sd},set:function(ue){typeof ue=="string"?this.Sd=te(ue):ue.me&&(this.Sd=ue)}}),Object.defineProperty(this,"font",{enumerable:!0,get:function(){return this.Ke},set:function(ue){var xe=me(ue),et=xe.family;xe.typeface=er[et]?er[et][(xe.style||"normal")+"|"+(xe.variant||"normal")+"|"+(xe.weight||"normal")]||er[et]["*"]:null,xe&&(this.le.setSize(xe.sizePx),this.le.setTypeface(xe.typeface),this.Ke=ue)}}),Object.defineProperty(this,"globalAlpha",{enumerable:!0,get:function(){return this.$d},set:function(ue){!isFinite(ue)||0>ue||1<ue||(this.$d=ue)}}),Object.defineProperty(this,"globalCompositeOperation",{enumerable:!0,get:function(){switch(this.Ed){case v.BlendMode.SrcOver:return"source-over";case v.BlendMode.DstOver:return"destination-over";case v.BlendMode.Src:return"copy";case v.BlendMode.Dst:return"destination";case v.BlendMode.Clear:return"clear";case v.BlendMode.SrcIn:return"source-in";case v.BlendMode.DstIn:return"destination-in";case v.BlendMode.SrcOut:return"source-out";case v.BlendMode.DstOut:return"destination-out";case v.BlendMode.SrcATop:return"source-atop";case v.BlendMode.DstATop:return"destination-atop";case v.BlendMode.Xor:return"xor";case v.BlendMode.Plus:return"lighter";case v.BlendMode.Multiply:return"multiply";case v.BlendMode.Screen:return"screen";case v.BlendMode.Overlay:return"overlay";case v.BlendMode.Darken:return"darken";case v.BlendMode.Lighten:return"lighten";case v.BlendMode.ColorDodge:return"color-dodge";case v.BlendMode.ColorBurn:return"color-burn";case v.BlendMode.HardLight:return"hard-light";case v.BlendMode.SoftLight:return"soft-light";case v.BlendMode.Difference:return"difference";case v.BlendMode.Exclusion:return"exclusion";case v.BlendMode.Hue:return"hue";case v.BlendMode.Saturation:return"saturation";case v.BlendMode.Color:return"color";case v.BlendMode.Luminosity:return"luminosity"}},set:function(ue){switch(ue){case"source-over":this.Ed=v.BlendMode.SrcOver;break;case"destination-over":this.Ed=v.BlendMode.DstOver;break;case"copy":this.Ed=v.BlendMode.Src;break;case"destination":this.Ed=v.BlendMode.Dst;break;case"clear":this.Ed=v.BlendMode.Clear;break;case"source-in":this.Ed=v.BlendMode.SrcIn;break;case"destination-in":this.Ed=v.BlendMode.DstIn;break;case"source-out":this.Ed=v.BlendMode.SrcOut;break;case"destination-out":this.Ed=v.BlendMode.DstOut;break;case"source-atop":this.Ed=v.BlendMode.SrcATop;break;case"destination-atop":this.Ed=v.BlendMode.DstATop;break;case"xor":this.Ed=v.BlendMode.Xor;break;case"lighter":case"plus-lighter":this.Ed=v.BlendMode.Plus;break;case"plus-darker":throw"plus-darker is not supported";case"multiply":this.Ed=v.BlendMode.Multiply;break;case"screen":this.Ed=v.BlendMode.Screen;break;case"overlay":this.Ed=v.BlendMode.Overlay;break;case"darken":this.Ed=v.BlendMode.Darken;break;case"lighten":this.Ed=v.BlendMode.Lighten;break;case"color-dodge":this.Ed=v.BlendMode.ColorDodge;break;case"color-burn":this.Ed=v.BlendMode.ColorBurn;break;case"hard-light":this.Ed=v.BlendMode.HardLight;break;case"soft-light":this.Ed=v.BlendMode.SoftLight;break;case"difference":this.Ed=v.BlendMode.Difference;break;case"exclusion":this.Ed=v.BlendMode.Exclusion;break;case"hue":this.Ed=v.BlendMode.Hue;break;case"saturation":this.Ed=v.BlendMode.Saturation;break;case"color":this.Ed=v.BlendMode.Color;break;case"luminosity":this.Ed=v.BlendMode.Luminosity;break;default:return}this.Fd.setBlendMode(this.Ed)}}),Object.defineProperty(this,"imageSmoothingEnabled",{enumerable:!0,get:function(){return!0},set:function(){}}),Object.defineProperty(this,"imageSmoothingQuality",{enumerable:!0,get:function(){return"high"},set:function(){}}),Object.defineProperty(this,"lineCap",{enumerable:!0,get:function(){switch(this.Fd.getStrokeCap()){case v.StrokeCap.Butt:return"butt";case v.StrokeCap.Round:return"round";case v.StrokeCap.Square:return"square"}},set:function(ue){switch(ue){case"butt":this.Fd.setStrokeCap(v.StrokeCap.Butt);break;case"round":this.Fd.setStrokeCap(v.StrokeCap.Round);break;case"square":this.Fd.setStrokeCap(v.StrokeCap.Square)}}}),Object.defineProperty(this,"lineDashOffset",{enumerable:!0,get:function(){return this.Ce},set:function(ue){isFinite(ue)&&(this.Ce=ue)}}),Object.defineProperty(this,"lineJoin",{enumerable:!0,get:function(){switch(this.Fd.getStrokeJoin()){case v.StrokeJoin.Miter:return"miter";case v.StrokeJoin.Round:return"round";case v.StrokeJoin.Bevel:return"bevel"}},set:function(ue){switch(ue){case"miter":this.Fd.setStrokeJoin(v.StrokeJoin.Miter);break;case"round":this.Fd.setStrokeJoin(v.StrokeJoin.Round);break;case"bevel":this.Fd.setStrokeJoin(v.StrokeJoin.Bevel)}}}),Object.defineProperty(this,"lineWidth",{enumerable:!0,get:function(){return this.Fd.getStrokeWidth()},set:function(ue){0>=ue||!ue||(this.Ee=ue,this.Fd.setStrokeWidth(ue))}}),Object.defineProperty(this,"miterLimit",{enumerable:!0,get:function(){return this.Fd.getStrokeMiter()},set:function(ue){0>=ue||!ue||this.Fd.setStrokeMiter(ue)}}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,get:function(){return this.oe},set:function(ue){0>ue||!isFinite(ue)||(this.oe=ue)}}),Object.defineProperty(this,"shadowColor",{enumerable:!0,get:function(){return G(this.De)},set:function(ue){this.De=te(ue)}}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,get:function(){return this.pe},set:function(ue){isFinite(ue)&&(this.pe=ue)}}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,get:function(){return this.qe},set:function(ue){isFinite(ue)&&(this.qe=ue)}}),Object.defineProperty(this,"strokeStyle",{enumerable:!0,get:function(){return G(this.Xd)},set:function(ue){typeof ue=="string"?this.Xd=te(ue):ue.me&&(this.Xd=ue)}}),this.arc=function(ue,xe,et,ut,yt,vt){un(this.Hd,ue,xe,et,et,0,ut,yt,vt)},this.arcTo=function(ue,xe,et,ut,yt){qt(this.Hd,ue,xe,et,ut,yt)},this.beginPath=function(){this.Hd.delete(),this.Hd=new v.Path},this.bezierCurveTo=function(ue,xe,et,ut,yt,vt){var kt=this.Hd;q([ue,xe,et,ut,yt,vt])&&(kt.isEmpty()&&kt.moveTo(ue,xe),kt.cubicTo(ue,xe,et,ut,yt,vt))},this.clearRect=function(ue,xe,et,ut){this.Fd.setStyle(v.PaintStyle.Fill),this.Fd.setBlendMode(v.BlendMode.Clear),this.Dd.drawRect(v.XYWHRect(ue,xe,et,ut),this.Fd),this.Fd.setBlendMode(this.Ed)},this.clip=function(ue,xe){typeof ue=="string"?(xe=ue,ue=this.Hd):ue&&ue.Te&&(ue=ue.Ld),ue||(ue=this.Hd),ue=ue.copy(),xe&&xe.toLowerCase()==="evenodd"?ue.setFillType(v.FillType.EvenOdd):ue.setFillType(v.FillType.Winding),this.Dd.clipPath(ue,v.ClipOp.Intersect,!0),ue.delete()},this.closePath=function(){zt(this.Hd)},this.createImageData=function(){if(arguments.length===1){var ue=arguments[0];return new bt(new Uint8ClampedArray(4*ue.width*ue.height),ue.width,ue.height)}if(arguments.length===2){ue=arguments[0];var xe=arguments[1];return new bt(new Uint8ClampedArray(4*ue*xe),ue,xe)}throw"createImageData expects 1 or 2 arguments, got "+arguments.length},this.createLinearGradient=function(ue,xe,et,ut){if(q(arguments)){var yt=new It(ue,xe,et,ut);return this.ue.push(yt),yt}},this.createPattern=function(ue,xe){return ue=new br(ue,xe),this.ue.push(ue),ue},this.createRadialGradient=function(ue,xe,et,ut,yt,vt){if(q(arguments)){var kt=new vr(ue,xe,et,ut,yt,vt);return this.ue.push(kt),kt}},this.drawImage=function(ue){var xe=this.Je();if(arguments.length===3||arguments.length===5)var et=v.XYWHRect(arguments[1],arguments[2],arguments[3]||ue.width(),arguments[4]||ue.height()),ut=v.XYWHRect(0,0,ue.width(),ue.height());else{if(arguments.length!==9)throw"invalid number of args for drawImage, need 3, 5, or 9; got "+arguments.length;et=v.XYWHRect(arguments[5],arguments[6],arguments[7],arguments[8]),ut=v.XYWHRect(arguments[1],arguments[2],arguments[3],arguments[4])}this.Dd.drawImageRect(ue,ut,et,xe,!1),xe.dispose()},this.ellipse=function(ue,xe,et,ut,yt,vt,kt,dn){un(this.Hd,ue,xe,et,ut,yt,vt,kt,dn)},this.Je=function(){var ue=this.Fd.copy();if(ue.setStyle(v.PaintStyle.Fill),H(this.Sd)){var xe=v.multiplyByAlpha(this.Sd,this.$d);ue.setColor(xe)}else xe=this.Sd.me(this.Id),ue.setColor(v.Color(0,0,0,this.$d)),ue.setShader(xe);return ue.dispose=function(){this.delete()},ue},this.fill=function(ue,xe){if(typeof ue=="string"?(xe=ue,ue=this.Hd):ue&&ue.Te&&(ue=ue.Ld),xe==="evenodd")this.Hd.setFillType(v.FillType.EvenOdd);else{if(xe!=="nonzero"&&xe)throw"invalid fill rule";this.Hd.setFillType(v.FillType.Winding)}ue||(ue=this.Hd),xe=this.Je();var et=this.re(xe);et&&(this.Dd.save(),this.je(),this.Dd.drawPath(ue,et),this.Dd.restore(),et.dispose()),this.Dd.drawPath(ue,xe),xe.dispose()},this.fillRect=function(ue,xe,et,ut){var yt=this.Je(),vt=this.re(yt);vt&&(this.Dd.save(),this.je(),this.Dd.drawRect(v.XYWHRect(ue,xe,et,ut),vt),this.Dd.restore(),vt.dispose()),this.Dd.drawRect(v.XYWHRect(ue,xe,et,ut),yt),yt.dispose()},this.fillText=function(ue,xe,et){var ut=this.Je();ue=v.TextBlob.MakeFromText(ue,this.le);var yt=this.re(ut);yt&&(this.Dd.save(),this.je(),this.Dd.drawTextBlob(ue,xe,et,yt),this.Dd.restore(),yt.dispose()),this.Dd.drawTextBlob(ue,xe,et,ut),ue.delete(),ut.dispose()},this.getImageData=function(ue,xe,et,ut){return(ue=this.Dd.readPixels(ue,xe,{width:et,height:ut,colorType:v.ColorType.RGBA_8888,alphaType:v.AlphaType.Unpremul,colorSpace:v.ColorSpace.SRGB}))?new bt(new Uint8ClampedArray(ue.buffer),et,ut):null},this.getLineDash=function(){return this.ne.slice()},this.ff=function(ue){var xe=v.Matrix.invert(this.Id);return v.Matrix.mapPoints(xe,ue),ue},this.isPointInPath=function(ue,xe,et){var ut=arguments;if(ut.length===3)var yt=this.Hd;else{if(ut.length!==4)throw"invalid arg count, need 3 or 4, got "+ut.length;yt=ut[0],ue=ut[1],xe=ut[2],et=ut[3]}return!(!isFinite(ue)||!isFinite(xe))&&((et=et||"nonzero")==="nonzero"||et==="evenodd")&&(ue=(ut=this.ff([ue,xe]))[0],xe=ut[1],yt.setFillType(et==="nonzero"?v.FillType.Winding:v.FillType.EvenOdd),yt.contains(ue,xe))},this.isPointInStroke=function(ue,xe){var et=arguments;if(et.length===2)var ut=this.Hd;else{if(et.length!==3)throw"invalid arg count, need 2 or 3, got "+et.length;ut=et[0],ue=et[1],xe=et[2]}return!(!isFinite(ue)||!isFinite(xe))&&(ue=(et=this.ff([ue,xe]))[0],xe=et[1],(ut=ut.copy()).setFillType(v.FillType.Winding),ut.stroke({width:this.lineWidth,miter_limit:this.miterLimit,cap:this.Fd.getStrokeCap(),join:this.Fd.getStrokeJoin(),precision:.3}),et=ut.contains(ue,xe),ut.delete(),et)},this.lineTo=function(ue,xe){Dn(this.Hd,ue,xe)},this.measureText=function(){throw Error("Clients wishing to properly measure text should use the Paragraph API")},this.moveTo=function(ue,xe){var et=this.Hd;q([ue,xe])&&et.moveTo(ue,xe)},this.putImageData=function(ue,xe,et,ut,yt,vt,kt){if(q([xe,et,ut,yt,vt,kt])){if(ut===void 0)this.Dd.writePixels(ue.data,ue.width,ue.height,xe,et);else if(ut=ut||0,yt=yt||0,vt=vt||ue.width,kt=kt||ue.height,0>vt&&(ut+=vt,vt=Math.abs(vt)),0>kt&&(yt+=kt,kt=Math.abs(kt)),0>ut&&(vt+=ut,ut=0),0>yt&&(kt+=yt,yt=0),!(0>=vt||0>=kt)){ue=v.MakeImage({width:ue.width,height:ue.height,alphaType:v.AlphaType.Unpremul,colorType:v.ColorType.RGBA_8888,colorSpace:v.ColorSpace.SRGB},ue.data,4*ue.width);var dn=v.XYWHRect(ut,yt,vt,kt);xe=v.XYWHRect(xe+ut,et+yt,vt,kt),et=v.Matrix.invert(this.Id),this.Dd.save(),this.Dd.concat(et),this.Dd.drawImageRect(ue,dn,xe,null,!1),this.Dd.restore(),ue.delete()}}},this.quadraticCurveTo=function(ue,xe,et,ut){var yt=this.Hd;q([ue,xe,et,ut])&&(yt.isEmpty()&&yt.moveTo(ue,xe),yt.quadTo(ue,xe,et,ut))},this.rect=function(ue,xe,et,ut){var yt=this.Hd;q(ue=v.XYWHRect(ue,xe,et,ut))&&yt.addRect(ue)},this.resetTransform=function(){this.Hd.transform(this.Id);var ue=v.Matrix.invert(this.Id);this.Dd.concat(ue),this.Id=this.Dd.getTotalMatrix()},this.restore=function(){var ue=this.ef.pop();if(ue){var xe=v.Matrix.multiply(this.Id,v.Matrix.invert(ue.wf));this.Hd.transform(xe),this.Fd.delete(),this.Fd=ue.Pf,this.ne=ue.Nf,this.Ee=ue.bg,this.Xd=ue.ag,this.Sd=ue.fs,this.pe=ue.Zf,this.qe=ue.$f,this.oe=ue.Tf,this.De=ue.Yf,this.$d=ue.Cf,this.Ed=ue.Df,this.Ce=ue.Of,this.Ke=ue.Bf,this.Dd.restore(),this.Id=this.Dd.getTotalMatrix()}},this.rotate=function(ue){if(isFinite(ue)){var xe=v.Matrix.rotated(-ue);this.Hd.transform(xe),this.Dd.rotate(ue/Math.PI*180,0,0),this.Id=this.Dd.getTotalMatrix()}},this.save=function(){if(this.Sd.ke){var ue=this.Sd.ke();this.ue.push(ue)}else ue=this.Sd;if(this.Xd.ke){var xe=this.Xd.ke();this.ue.push(xe)}else xe=this.Xd;this.ef.push({wf:this.Id.slice(),Nf:this.ne.slice(),bg:this.Ee,ag:xe,fs:ue,Zf:this.pe,$f:this.qe,Tf:this.oe,Yf:this.De,Cf:this.$d,Of:this.Ce,Df:this.Ed,Pf:this.Fd.copy(),Bf:this.Ke}),this.Dd.save()},this.scale=function(ue,xe){if(q(arguments)){var et=v.Matrix.scaled(1/ue,1/xe);this.Hd.transform(et),this.Dd.scale(ue,xe),this.Id=this.Dd.getTotalMatrix()}},this.setLineDash=function(ue){for(var xe=0;xe<ue.length;xe++)if(!isFinite(ue[xe])||0>ue[xe])return;ue.length%2==1&&Array.prototype.push.apply(ue,ue),this.ne=ue},this.setTransform=function(ue,xe,et,ut,yt,vt){q(arguments)&&(this.resetTransform(),this.transform(ue,xe,et,ut,yt,vt))},this.je=function(){var ue=v.Matrix.invert(this.Id);this.Dd.concat(ue),this.Dd.concat(v.Matrix.translated(this.pe,this.qe)),this.Dd.concat(this.Id)},this.re=function(ue){var xe=v.multiplyByAlpha(this.De,this.$d);if(!v.getColorComponents(xe)[3]||!(this.oe||this.qe||this.pe))return null;(ue=ue.copy()).setColor(xe);var et=v.MaskFilter.MakeBlur(v.BlurStyle.Normal,this.oe/2,!1);return ue.setMaskFilter(et),ue.dispose=function(){et.delete(),this.delete()},ue},this.Ve=function(){var ue=this.Fd.copy();if(ue.setStyle(v.PaintStyle.Stroke),H(this.Xd)){var xe=v.multiplyByAlpha(this.Xd,this.$d);ue.setColor(xe)}else xe=this.Xd.me(this.Id),ue.setColor(v.Color(0,0,0,this.$d)),ue.setShader(xe);if(ue.setStrokeWidth(this.Ee),this.ne.length){var et=v.PathEffect.MakeDash(this.ne,this.Ce);ue.setPathEffect(et)}return ue.dispose=function(){et&&et.delete(),this.delete()},ue},this.stroke=function(ue){ue=ue?ue.Ld:this.Hd;var xe=this.Ve(),et=this.re(xe);et&&(this.Dd.save(),this.je(),this.Dd.drawPath(ue,et),this.Dd.restore(),et.dispose()),this.Dd.drawPath(ue,xe),xe.dispose()},this.strokeRect=function(ue,xe,et,ut){var yt=this.Ve(),vt=this.re(yt);vt&&(this.Dd.save(),this.je(),this.Dd.drawRect(v.XYWHRect(ue,xe,et,ut),vt),this.Dd.restore(),vt.dispose()),this.Dd.drawRect(v.XYWHRect(ue,xe,et,ut),yt),yt.dispose()},this.strokeText=function(ue,xe,et){var ut=this.Ve();ue=v.TextBlob.MakeFromText(ue,this.le);var yt=this.re(ut);yt&&(this.Dd.save(),this.je(),this.Dd.drawTextBlob(ue,xe,et,yt),this.Dd.restore(),yt.dispose()),this.Dd.drawTextBlob(ue,xe,et,ut),ue.delete(),ut.dispose()},this.translate=function(ue,xe){if(q(arguments)){var et=v.Matrix.translated(-ue,-xe);this.Hd.transform(et),this.Dd.translate(ue,xe),this.Id=this.Dd.getTotalMatrix()}},this.transform=function(ue,xe,et,ut,yt,vt){ue=[ue,et,yt,xe,ut,vt,0,0,1],xe=v.Matrix.invert(ue),this.Hd.transform(xe),this.Dd.concat(ue),this.Id=this.Dd.getTotalMatrix()},this.addHitRegion=function(){},this.clearHitRegions=function(){},this.drawFocusIfNeeded=function(){},this.removeHitRegion=function(){},this.scrollPathIntoView=function(){},Object.defineProperty(this,"canvas",{value:null,writable:!1})}function at(Mt){this.We=Mt,this.de=new Be(Mt.getCanvas()),this.Le=[],this.qf=v.FontMgr.RefDefault(),this.decodeImage=function(ue){if(!(ue=v.MakeImageFromEncoded(ue)))throw"Invalid input";return this.Le.push(ue),ue},this.loadFont=function(ue,xe){if(!(ue=this.qf.MakeTypefaceFromData(ue)))return null;this.Le.push(ue);var et=(xe.style||"normal")+"|"+(xe.variant||"normal")+"|"+(xe.weight||"normal");xe=xe.family,er[xe]||(er[xe]={"*":ue}),er[xe][et]=ue},this.makePath2D=function(ue){return ue=new Zn(ue),this.Le.push(ue.Ld),ue},this.getContext=function(ue){return ue==="2d"?this.de:null},this.toDataURL=function(ue,xe){this.We.flush();var et=this.We.makeImageSnapshot();if(et){ue=ue||"image/png";var ut=v.ImageFormat.PNG;if(ue==="image/jpeg"&&(ut=v.ImageFormat.JPEG),xe=et.encodeToBytes(ut,xe||.92)){if(et.delete(),ue="data:"+ue+";base64,",Gr)xe=d.from(xe).toString("base64");else{et=0,ut=xe.length;for(var yt,vt="";et<ut;)yt=xe.slice(et,Math.min(et+32768,ut)),vt+=String.fromCharCode.apply(null,yt),et+=32768;xe=btoa(vt)}return ue+xe}}},this.dispose=function(){this.de.be(),this.Le.forEach((function(ue){ue.delete()})),this.We.dispose()}}function bt(Mt,ue,xe){if(!ue||xe===0)throw"invalid dimensions, width and height must be non-zero";if(Mt.length%4)throw"arr must be a multiple of 4";xe=xe||Mt.length/(4*ue),Object.defineProperty(this,"data",{value:Mt,writable:!1}),Object.defineProperty(this,"height",{value:xe,writable:!1}),Object.defineProperty(this,"width",{value:ue,writable:!1})}function It(Mt,ue,xe,et){this.Nd=null,this.Td=[],this.Pd=[],this.addColorStop=function(ut,yt){if(0>ut||1<ut||!isFinite(ut))throw"offset must be between 0 and 1 inclusively";yt=te(yt);var vt=this.Pd.indexOf(ut);if(vt!==-1)this.Td[vt]=yt;else{for(vt=0;vt<this.Pd.length&&!(this.Pd[vt]>ut);vt++);this.Pd.splice(vt,0,ut),this.Td.splice(vt,0,yt)}},this.ke=function(){var ut=new It(Mt,ue,xe,et);return ut.Td=this.Td.slice(),ut.Pd=this.Pd.slice(),ut},this.be=function(){this.Nd&&(this.Nd.delete(),this.Nd=null)},this.me=function(ut){var yt=[Mt,ue,xe,et];v.Matrix.mapPoints(ut,yt),ut=yt[0];var vt=yt[1],kt=yt[2];return yt=yt[3],this.be(),this.Nd=v.Shader.MakeLinearGradient([ut,vt],[kt,yt],this.Td,this.Pd,v.TileMode.Clamp)}}function qt(Mt,ue,xe,et,ut,yt){if(q([ue,xe,et,ut,yt])){if(0>yt)throw"radii cannot be negative";Mt.isEmpty()&&Mt.moveTo(ue,xe),Mt.arcToTangent(ue,xe,et,ut,yt)}}function zt(Mt){if(!Mt.isEmpty()){var ue=Mt.getBounds();(ue[3]-ue[1]||ue[2]-ue[0])&&Mt.close()}}function cn(Mt,ue,xe,et,ut,yt,vt){vt=(vt-yt)/Math.PI*180,yt=yt/Math.PI*180,ue=v.LTRBRect(ue-et,xe-ut,ue+et,xe+ut),1e-5>Math.abs(Math.abs(vt)-360)?(xe=vt/2,Mt.arcToOval(ue,yt,xe,!1),Mt.arcToOval(ue,yt+xe,xe,!1)):Mt.arcToOval(ue,yt,vt,!1)}function un(Mt,ue,xe,et,ut,yt,vt,kt,dn){if(q([ue,xe,et,ut,yt,vt,kt])){if(0>et||0>ut)throw"radii cannot be negative";var Hn=2*Math.PI,An=vt%Hn;0>An&&(An+=Hn);var Er=An-vt;vt=An,kt+=Er,!dn&&kt-vt>=Hn?kt=vt+Hn:dn&&vt-kt>=Hn?kt=vt-Hn:!dn&&vt>kt?kt=vt+(Hn-(vt-kt)%Hn):dn&&vt<kt&&(kt=vt-(Hn-(kt-vt)%Hn)),yt?(dn=v.Matrix.rotated(yt,ue,xe),yt=v.Matrix.rotated(-yt,ue,xe),Mt.transform(yt),cn(Mt,ue,xe,et,ut,vt,kt),Mt.transform(dn)):cn(Mt,ue,xe,et,ut,vt,kt)}}function Dn(Mt,ue,xe){q([ue,xe])&&(Mt.isEmpty()&&Mt.moveTo(ue,xe),Mt.lineTo(ue,xe))}function Zn(Mt){this.Ld=null,this.Ld=typeof Mt=="string"?v.Path.MakeFromSVGString(Mt):Mt&&Mt.Te?Mt.Ld.copy():new v.Path,this.Te=function(){return this.Ld},this.addPath=function(ue,xe){xe||(xe={a:1,c:0,e:0,b:0,d:1,f:0}),this.Ld.addPath(ue.Ld,[xe.a,xe.c,xe.e,xe.b,xe.d,xe.f])},this.arc=function(ue,xe,et,ut,yt,vt){un(this.Ld,ue,xe,et,et,0,ut,yt,vt)},this.arcTo=function(ue,xe,et,ut,yt){qt(this.Ld,ue,xe,et,ut,yt)},this.bezierCurveTo=function(ue,xe,et,ut,yt,vt){var kt=this.Ld;q([ue,xe,et,ut,yt,vt])&&(kt.isEmpty()&&kt.moveTo(ue,xe),kt.cubicTo(ue,xe,et,ut,yt,vt))},this.closePath=function(){zt(this.Ld)},this.ellipse=function(ue,xe,et,ut,yt,vt,kt,dn){un(this.Ld,ue,xe,et,ut,yt,vt,kt,dn)},this.lineTo=function(ue,xe){Dn(this.Ld,ue,xe)},this.moveTo=function(ue,xe){var et=this.Ld;q([ue,xe])&&et.moveTo(ue,xe)},this.quadraticCurveTo=function(ue,xe,et,ut){var yt=this.Ld;q([ue,xe,et,ut])&&(yt.isEmpty()&&yt.moveTo(ue,xe),yt.quadTo(ue,xe,et,ut))},this.rect=function(ue,xe,et,ut){var yt=this.Ld;q(ue=v.XYWHRect(ue,xe,et,ut))&&yt.addRect(ue)}}function br(Mt,ue){switch(this.Nd=null,this.sf=Mt,this._transform=v.Matrix.identity(),ue===""&&(ue="repeat"),ue){case"repeat-x":this.se=v.TileMode.Repeat,this.te=v.TileMode.Decal;break;case"repeat-y":this.se=v.TileMode.Decal,this.te=v.TileMode.Repeat;break;case"repeat":this.te=this.se=v.TileMode.Repeat;break;case"no-repeat":this.te=this.se=v.TileMode.Decal;break;default:throw"invalid repetition mode "+ue}this.setTransform=function(xe){q(xe=[xe.a,xe.c,xe.e,xe.b,xe.d,xe.f,0,0,1])&&(this._transform=xe)},this.ke=function(){var xe=new br;return xe.se=this.se,xe.te=this.te,xe},this.be=function(){this.Nd&&(this.Nd.delete(),this.Nd=null)},this.me=function(){return this.be(),this.Nd=this.sf.makeShaderCubic(this.se,this.te,1/3,1/3,this._transform)}}function vr(Mt,ue,xe,et,ut,yt){this.Nd=null,this.Td=[],this.Pd=[],this.addColorStop=function(vt,kt){if(0>vt||1<vt||!isFinite(vt))throw"offset must be between 0 and 1 inclusively";kt=te(kt);var dn=this.Pd.indexOf(vt);if(dn!==-1)this.Td[dn]=kt;else{for(dn=0;dn<this.Pd.length&&!(this.Pd[dn]>vt);dn++);this.Pd.splice(dn,0,vt),this.Td.splice(dn,0,kt)}},this.ke=function(){var vt=new vr(Mt,ue,xe,et,ut,yt);return vt.Td=this.Td.slice(),vt.Pd=this.Pd.slice(),vt},this.be=function(){this.Nd&&(this.Nd.delete(),this.Nd=null)},this.me=function(vt){var kt=[Mt,ue,et,ut];v.Matrix.mapPoints(vt,kt);var dn=kt[0],Hn=kt[1],An=kt[2];kt=kt[3];var Er=(Math.abs(vt[0])+Math.abs(vt[4]))/2;return vt=xe*Er,Er*=yt,this.be(),this.Nd=v.Shader.MakeTwoPointConicalGradient([dn,Hn],vt,[An,kt],Er,this.Td,this.Pd,v.TileMode.Clamp)}}v._testing={};var Rr={aliceblue:Float32Array.of(.941,.973,1,1),antiquewhite:Float32Array.of(.98,.922,.843,1),aqua:Float32Array.of(0,1,1,1),aquamarine:Float32Array.of(.498,1,.831,1),azure:Float32Array.of(.941,1,1,1),beige:Float32Array.of(.961,.961,.863,1),bisque:Float32Array.of(1,.894,.769,1),black:Float32Array.of(0,0,0,1),blanchedalmond:Float32Array.of(1,.922,.804,1),blue:Float32Array.of(0,0,1,1),blueviolet:Float32Array.of(.541,.169,.886,1),brown:Float32Array.of(.647,.165,.165,1),burlywood:Float32Array.of(.871,.722,.529,1),cadetblue:Float32Array.of(.373,.62,.627,1),chartreuse:Float32Array.of(.498,1,0,1),chocolate:Float32Array.of(.824,.412,.118,1),coral:Float32Array.of(1,.498,.314,1),cornflowerblue:Float32Array.of(.392,.584,.929,1),cornsilk:Float32Array.of(1,.973,.863,1),crimson:Float32Array.of(.863,.078,.235,1),cyan:Float32Array.of(0,1,1,1),darkblue:Float32Array.of(0,0,.545,1),darkcyan:Float32Array.of(0,.545,.545,1),darkgoldenrod:Float32Array.of(.722,.525,.043,1),darkgray:Float32Array.of(.663,.663,.663,1),darkgreen:Float32Array.of(0,.392,0,1),darkgrey:Float32Array.of(.663,.663,.663,1),darkkhaki:Float32Array.of(.741,.718,.42,1),darkmagenta:Float32Array.of(.545,0,.545,1),darkolivegreen:Float32Array.of(.333,.42,.184,1),darkorange:Float32Array.of(1,.549,0,1),darkorchid:Float32Array.of(.6,.196,.8,1),darkred:Float32Array.of(.545,0,0,1),darksalmon:Float32Array.of(.914,.588,.478,1),darkseagreen:Float32Array.of(.561,.737,.561,1),darkslateblue:Float32Array.of(.282,.239,.545,1),darkslategray:Float32Array.of(.184,.31,.31,1),darkslategrey:Float32Array.of(.184,.31,.31,1),darkturquoise:Float32Array.of(0,.808,.82,1),darkviolet:Float32Array.of(.58,0,.827,1),deeppink:Float32Array.of(1,.078,.576,1),deepskyblue:Float32Array.of(0,.749,1,1),dimgray:Float32Array.of(.412,.412,.412,1),dimgrey:Float32Array.of(.412,.412,.412,1),dodgerblue:Float32Array.of(.118,.565,1,1),firebrick:Float32Array.of(.698,.133,.133,1),floralwhite:Float32Array.of(1,.98,.941,1),forestgreen:Float32Array.of(.133,.545,.133,1),fuchsia:Float32Array.of(1,0,1,1),gainsboro:Float32Array.of(.863,.863,.863,1),ghostwhite:Float32Array.of(.973,.973,1,1),gold:Float32Array.of(1,.843,0,1),goldenrod:Float32Array.of(.855,.647,.125,1),gray:Float32Array.of(.502,.502,.502,1),green:Float32Array.of(0,.502,0,1),greenyellow:Float32Array.of(.678,1,.184,1),grey:Float32Array.of(.502,.502,.502,1),honeydew:Float32Array.of(.941,1,.941,1),hotpink:Float32Array.of(1,.412,.706,1),indianred:Float32Array.of(.804,.361,.361,1),indigo:Float32Array.of(.294,0,.51,1),ivory:Float32Array.of(1,1,.941,1),khaki:Float32Array.of(.941,.902,.549,1),lavender:Float32Array.of(.902,.902,.98,1),lavenderblush:Float32Array.of(1,.941,.961,1),lawngreen:Float32Array.of(.486,.988,0,1),lemonchiffon:Float32Array.of(1,.98,.804,1),lightblue:Float32Array.of(.678,.847,.902,1),lightcoral:Float32Array.of(.941,.502,.502,1),lightcyan:Float32Array.of(.878,1,1,1),lightgoldenrodyellow:Float32Array.of(.98,.98,.824,1),lightgray:Float32Array.of(.827,.827,.827,1),lightgreen:Float32Array.of(.565,.933,.565,1),lightgrey:Float32Array.of(.827,.827,.827,1),lightpink:Float32Array.of(1,.714,.757,1),lightsalmon:Float32Array.of(1,.627,.478,1),lightseagreen:Float32Array.of(.125,.698,.667,1),lightskyblue:Float32Array.of(.529,.808,.98,1),lightslategray:Float32Array.of(.467,.533,.6,1),lightslategrey:Float32Array.of(.467,.533,.6,1),lightsteelblue:Float32Array.of(.69,.769,.871,1),lightyellow:Float32Array.of(1,1,.878,1),lime:Float32Array.of(0,1,0,1),limegreen:Float32Array.of(.196,.804,.196,1),linen:Float32Array.of(.98,.941,.902,1),magenta:Float32Array.of(1,0,1,1),maroon:Float32Array.of(.502,0,0,1),mediumaquamarine:Float32Array.of(.4,.804,.667,1),mediumblue:Float32Array.of(0,0,.804,1),mediumorchid:Float32Array.of(.729,.333,.827,1),mediumpurple:Float32Array.of(.576,.439,.859,1),mediumseagreen:Float32Array.of(.235,.702,.443,1),mediumslateblue:Float32Array.of(.482,.408,.933,1),mediumspringgreen:Float32Array.of(0,.98,.604,1),mediumturquoise:Float32Array.of(.282,.82,.8,1),mediumvioletred:Float32Array.of(.78,.082,.522,1),midnightblue:Float32Array.of(.098,.098,.439,1),mintcream:Float32Array.of(.961,1,.98,1),mistyrose:Float32Array.of(1,.894,.882,1),moccasin:Float32Array.of(1,.894,.71,1),navajowhite:Float32Array.of(1,.871,.678,1),navy:Float32Array.of(0,0,.502,1),oldlace:Float32Array.of(.992,.961,.902,1),olive:Float32Array.of(.502,.502,0,1),olivedrab:Float32Array.of(.42,.557,.137,1),orange:Float32Array.of(1,.647,0,1),orangered:Float32Array.of(1,.271,0,1),orchid:Float32Array.of(.855,.439,.839,1),palegoldenrod:Float32Array.of(.933,.91,.667,1),palegreen:Float32Array.of(.596,.984,.596,1),paleturquoise:Float32Array.of(.686,.933,.933,1),palevioletred:Float32Array.of(.859,.439,.576,1),papayawhip:Float32Array.of(1,.937,.835,1),peachpuff:Float32Array.of(1,.855,.725,1),peru:Float32Array.of(.804,.522,.247,1),pink:Float32Array.of(1,.753,.796,1),plum:Float32Array.of(.867,.627,.867,1),powderblue:Float32Array.of(.69,.878,.902,1),purple:Float32Array.of(.502,0,.502,1),rebeccapurple:Float32Array.of(.4,.2,.6,1),red:Float32Array.of(1,0,0,1),rosybrown:Float32Array.of(.737,.561,.561,1),royalblue:Float32Array.of(.255,.412,.882,1),saddlebrown:Float32Array.of(.545,.271,.075,1),salmon:Float32Array.of(.98,.502,.447,1),sandybrown:Float32Array.of(.957,.643,.376,1),seagreen:Float32Array.of(.18,.545,.341,1),seashell:Float32Array.of(1,.961,.933,1),sienna:Float32Array.of(.627,.322,.176,1),silver:Float32Array.of(.753,.753,.753,1),skyblue:Float32Array.of(.529,.808,.922,1),slateblue:Float32Array.of(.416,.353,.804,1),slategray:Float32Array.of(.439,.502,.565,1),slategrey:Float32Array.of(.439,.502,.565,1),snow:Float32Array.of(1,.98,.98,1),springgreen:Float32Array.of(0,1,.498,1),steelblue:Float32Array.of(.275,.51,.706,1),tan:Float32Array.of(.824,.706,.549,1),teal:Float32Array.of(0,.502,.502,1),thistle:Float32Array.of(.847,.749,.847,1),tomato:Float32Array.of(1,.388,.278,1),transparent:Float32Array.of(0,0,0,0),turquoise:Float32Array.of(.251,.878,.816,1),violet:Float32Array.of(.933,.51,.933,1),wheat:Float32Array.of(.961,.871,.702,1),white:Float32Array.of(1,1,1,1),whitesmoke:Float32Array.of(.961,.961,.961,1),yellow:Float32Array.of(1,1,0,1),yellowgreen:Float32Array.of(.604,.804,.196,1)};v._testing.parseColor=te,v._testing.colorToString=G;var Pr=RegExp("(italic|oblique|normal|)\\s*(small-caps|normal|)\\s*(bold|bolder|lighter|[1-9]00|normal|)\\s*([\\d\\.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q)(.+)"),er={"Noto Mono":{"*":null},monospace:{"*":null}};v._testing.parseFontString=me,v.MakeCanvas=function(Mt,ue){return(Mt=v.MakeSurface(Mt,ue))?new at(Mt):null},v.ImageData=function(){if(arguments.length===2){var Mt=arguments[0],ue=arguments[1];return new bt(new Uint8ClampedArray(4*Mt*ue),Mt,ue)}if(arguments.length===3){var xe=arguments[0];if(xe.prototype.constructor!==Uint8ClampedArray)throw"bytes must be given as a Uint8ClampedArray";if(xe%4)throw"bytes must be given in a multiple of 4";if(xe%(Mt=arguments[1]))throw"bytes must divide evenly by width";if((ue=arguments[2])&&ue!==xe/(4*Mt))throw"invalid height given";return new bt(xe,Mt,xe/(4*Mt))}throw"invalid number of arguments - takes 2 or 3, saw "+arguments.length}})()})(r);var u,f,p,y=Object.assign({},r),g="./this.program",b=(v,I)=>{throw I},E=typeof window=="object",x=typeof importScripts=="function",M=typeof m=="object"&&typeof m.versions=="object"&&typeof m.versions.node=="string",S="";if(M){var O=o(5699),C=o(3935);S=x?C.dirname(S)+"/":"//",u=(v,I)=>(v=v.startsWith("file://")?new URL(v):C.normalize(v),O.readFileSync(v,I?void 0:"utf8")),p=v=>((v=u(v,!0)).buffer||(v=new Uint8Array(v)),v),f=(v,I,j)=>{v=v.startsWith("file://")?new URL(v):C.normalize(v),O.readFile(v,(function(H,re){H?j(H):I(re.buffer)}))},1<m.argv.length&&(g=m.argv[1].replace(/\\/g,"/")),m.argv.slice(2),m.on("uncaughtException",(function(v){if(!(v instanceof V))throw v})),15>m.version.match(/^v(\d+)\./)[1]&&m.on("unhandledRejection",(function(v){throw v})),b=(v,I)=>{throw m.exitCode=v,I},r.inspect=function(){return"[Emscripten Module object]"}}else(E||x)&&(x?S=self.location.href:typeof document<"u"&&document.currentScript&&(S=document.currentScript.src),c&&(S=c),S=S.indexOf("blob:")!==0?S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):"",u=v=>{var I=new XMLHttpRequest;return I.open("GET",v,!1),I.send(null),I.responseText},x&&(p=v=>{var I=new XMLHttpRequest;return I.open("GET",v,!1),I.responseType="arraybuffer",I.send(null),new Uint8Array(I.response)}),f=(v,I,j)=>{var H=new XMLHttpRequest;H.open("GET",v,!0),H.responseType="arraybuffer",H.onload=()=>{H.status==200||H.status==0&&H.response?I(H.response):j()},H.onerror=j,H.send(null)});var T,R=r.print||h.log.bind(h),B=r.printErr||h.warn.bind(h);Object.assign(r,y),y=null,r.thisProgram&&(g=r.thisProgram),r.quit&&(b=r.quit),r.wasmBinary&&(T=r.wasmBinary),r.noExitRuntime,typeof WebAssembly!="object"&&De("no native wasm support detected");var z,L,Y,ie,$,Q,ce,be,Ae,we=!1,Xe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ve(v,I,j){var H=I+j;for(j=I;v[j]&&!(j>=H);)++j;if(16<j-I&&v.buffer&&Xe)return Xe.decode(v.subarray(I,j));for(H="";I<j;){var re=v[I++];if(128&re){var _e=63&v[I++];if((224&re)==192)H+=String.fromCharCode((31&re)<<6|_e);else{var fe=63&v[I++];65536>(re=(240&re)==224?(15&re)<<12|_e<<6|fe:(7&re)<<18|_e<<12|fe<<6|63&v[I++])?H+=String.fromCharCode(re):(re-=65536,H+=String.fromCharCode(55296|re>>10,56320|1023&re))}}else H+=String.fromCharCode(re)}return H}function st(v,I){return v?Ve(Y,v,I):""}function tt(v,I,j,H){if(!(0<H))return 0;var re=j;H=j+H-1;for(var _e=0;_e<v.length;++_e){var fe=v.charCodeAt(_e);if(55296<=fe&&57343>=fe&&(fe=65536+((1023&fe)<<10)|1023&v.charCodeAt(++_e)),127>=fe){if(j>=H)break;I[j++]=fe}else{if(2047>=fe){if(j+1>=H)break;I[j++]=192|fe>>6}else{if(65535>=fe){if(j+2>=H)break;I[j++]=224|fe>>12}else{if(j+3>=H)break;I[j++]=240|fe>>18,I[j++]=128|fe>>12&63}I[j++]=128|fe>>6&63}I[j++]=128|63&fe}}return I[j]=0,j-re}function he(v){for(var I=0,j=0;j<v.length;++j){var H=v.charCodeAt(j);127>=H?I++:2047>=H?I+=2:55296<=H&&57343>=H?(I+=4,++j):I+=3}return I}function de(){var v=z.buffer;r.HEAP8=L=new Int8Array(v),r.HEAP16=ie=new Int16Array(v),r.HEAP32=Q=new Int32Array(v),r.HEAPU8=Y=new Uint8Array(v),r.HEAPU16=$=new Uint16Array(v),r.HEAPU32=ce=new Uint32Array(v),r.HEAPF32=be=new Float32Array(v),r.HEAPF64=Ae=new Float64Array(v)}var ze,P=[],A=[],D=[];function W(){var v=r.preRun.shift();P.unshift(v)}var ae,le=0,Ne=null;function De(v){throw r.onAbort&&r.onAbort(v),B(v="Aborted("+v+")"),we=!0,v=new WebAssembly.RuntimeError(v+". Build with -sASSERTIONS for more info."),t(v),v}function Ye(){return ae.startsWith("data:application/octet-stream;base64,")}if(ae="canvaskit.wasm",!Ye()){var ht=ae;ae=r.locateFile?r.locateFile(ht,S):S+ht}function F(){var v=ae;try{if(v==ae&&T)return new Uint8Array(T);if(p)return p(v);throw"both async and sync fetching of the wasm failed"}catch(I){De(I)}}function V(v){this.name="ExitStatus",this.message="Program terminated with exit("+v+")",this.status=v}function ne(v){for(;0<v.length;)v.shift()(r)}var Se={};function Ie(v){for(;v.length;){var I=v.pop();v.pop()(I)}}function ke(v){return this.fromWireType(Q[v>>2])}var $e={},xt={},At={};function Bt(v){if(v===void 0)return"_unknown";var I=(v=v.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=I&&57>=I?"_"+v:v}function Rt(v,I){return v=Bt(v),new Function("body","return function "+v+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(I)}function Gt(v){var I=Error,j=Rt(v,(function(H){this.name=v,this.message=H,(H=Error(H).stack)!==void 0&&(this.stack=this.toString()+`
`+H.replace(/^Error(:[^\n]*)?\n/,""))}));return j.prototype=Object.create(I.prototype),j.prototype.constructor=j,j.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},j}var _n=void 0;function fn(v){throw new _n(v)}function ln(v,I,j){function H(ge){(ge=j(ge)).length!==v.length&&fn("Mismatched type converter count");for(var Le=0;Le<v.length;++Le)Nt(v[Le],ge[Le])}v.forEach((function(ge){At[ge]=I}));var re=Array(I.length),_e=[],fe=0;I.forEach(((ge,Le)=>{xt.hasOwnProperty(ge)?re[Le]=xt[ge]:(_e.push(ge),$e.hasOwnProperty(ge)||($e[ge]=[]),$e[ge].push((()=>{re[Le]=xt[ge],++fe===_e.length&&H(re)})))})),_e.length===0&&H(re)}function rt(v){switch(v){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+v)}}var dt=void 0;function Qe(v){for(var I="";Y[v];)I+=dt[Y[v++]];return I}var pt=void 0;function mt(v){throw new pt(v)}function Nt(v,I,j={}){if(!("argPackAdvance"in I))throw new TypeError("registerType registeredInstance requires argPackAdvance");var H=I.name;if(v||mt('type "'+H+'" must have a positive integer typeid pointer'),xt.hasOwnProperty(v)){if(j.Kf)return;mt("Cannot register type '"+H+"' twice")}xt[v]=I,delete At[v],$e.hasOwnProperty(v)&&(I=$e[v],delete $e[v],I.forEach((re=>re())))}function lt(v){mt(v.Cd.Md.Gd.name+" instance already deleted")}var on=!1;function bn(){}function Ge(v){--v.count.value,v.count.value===0&&(v.Rd?v.Wd.ae(v.Rd):v.Md.Gd.ae(v.Kd))}function pe(v,I,j){return I===j?v:j.Yd===void 0||(v=pe(v,I,j.Yd))===null?null:j.yf(v)}var Te={},Me=[];function ye(){for(;Me.length;){var v=Me.pop();v.Cd.xe=!1,v.delete()}}var Fe=void 0,qe={};function je(v,I){return I.Md&&I.Kd||fn("makeClassHandle requires ptr and ptrType"),!!I.Wd!=!!I.Rd&&fn("Both smartPtrType and smartPtr must be specified"),I.count={value:1},ft(Object.create(v,{Cd:{value:I}}))}function ft(v){return typeof FinalizationRegistry>"u"?(ft=I=>I,v):(on=new FinalizationRegistry((I=>{Ge(I.Cd)})),bn=I=>{on.unregister(I)},(ft=I=>{var j=I.Cd;return j.Rd&&on.register(I,{Cd:j},I),I})(v))}function nt(){}function ot(v,I,j){if(v[I].Od===void 0){var H=v[I];v[I]=function(){return v[I].Od.hasOwnProperty(arguments.length)||mt("Function '"+j+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+v[I].Od+")!"),v[I].Od[arguments.length].apply(this,arguments)},v[I].Od=[],v[I].Od[H.ve]=H}}function _t(v,I,j){r.hasOwnProperty(v)?((j===void 0||r[v].Od!==void 0&&r[v].Od[j]!==void 0)&&mt("Cannot register public name '"+v+"' twice"),ot(r,v,v),r.hasOwnProperty(j)&&mt("Cannot register multiple overloads of a function with the same number of arguments ("+j+")!"),r[v].Od[j]=I):(r[v]=I,j!==void 0&&(r[v].ig=j))}function Ft(v,I,j,H,re,_e,fe,ge){this.name=v,this.constructor=I,this.ye=j,this.ae=H,this.Yd=re,this.Ef=_e,this.Ie=fe,this.yf=ge,this.Rf=[]}function Ut(v,I,j){for(;I!==j;)I.Ie||mt("Expected null or instance of "+j.name+", got an instance of "+I.name),v=I.Ie(v),I=I.Yd;return v}function Vt(v,I){return I===null?(this.Ye&&mt("null is not a valid "+this.name),0):(I.Cd||mt('Cannot pass "'+cr(I)+'" as a '+this.name),I.Cd.Kd||mt("Cannot pass deleted object as a pointer of type "+this.name),Ut(I.Cd.Kd,I.Cd.Md.Gd,this.Gd))}function $t(v,I){if(I===null){if(this.Ye&&mt("null is not a valid "+this.name),this.Ne){var j=this.Ze();return v!==null&&v.push(this.ae,j),j}return 0}if(I.Cd||mt('Cannot pass "'+cr(I)+'" as a '+this.name),I.Cd.Kd||mt("Cannot pass deleted object as a pointer of type "+this.name),!this.Me&&I.Cd.Md.Me&&mt("Cannot convert argument of type "+(I.Cd.Wd?I.Cd.Wd.name:I.Cd.Md.name)+" to parameter type "+this.name),j=Ut(I.Cd.Kd,I.Cd.Md.Gd,this.Gd),this.Ne)switch(I.Cd.Rd===void 0&&mt("Passing raw pointer to smart pointer is illegal"),this.Xf){case 0:I.Cd.Wd===this?j=I.Cd.Rd:mt("Cannot convert argument of type "+(I.Cd.Wd?I.Cd.Wd.name:I.Cd.Md.name)+" to parameter type "+this.name);break;case 1:j=I.Cd.Rd;break;case 2:if(I.Cd.Wd===this)j=I.Cd.Rd;else{var H=I.clone();j=this.Sf(j,kn((function(){H.delete()}))),v!==null&&v.push(this.ae,j)}break;default:mt("Unsupporting sharing policy")}return j}function an(v,I){return I===null?(this.Ye&&mt("null is not a valid "+this.name),0):(I.Cd||mt('Cannot pass "'+cr(I)+'" as a '+this.name),I.Cd.Kd||mt("Cannot pass deleted object as a pointer of type "+this.name),I.Cd.Md.Me&&mt("Cannot convert argument of type "+I.Cd.Md.name+" to parameter type "+this.name),Ut(I.Cd.Kd,I.Cd.Md.Gd,this.Gd))}function hn(v,I,j,H,re,_e,fe,ge,Le,Oe,gt){this.name=v,this.Gd=I,this.Ye=j,this.Me=H,this.Ne=re,this.Qf=_e,this.Xf=fe,this.mf=ge,this.Ze=Le,this.Sf=Oe,this.ae=gt,re||I.Yd!==void 0?this.toWireType=$t:(this.toWireType=H?Vt:an,this.Vd=null)}function xn(v,I,j){r.hasOwnProperty(v)||fn("Replacing nonexistant public symbol"),r[v].Od!==void 0&&j!==void 0?r[v].Od[j]=I:(r[v]=I,r[v].ve=j)}function Qt(v){return ze.get(v)}function Jt(v,I){var j=(v=Qe(v)).includes("j")?(function(H,re){var _e=[];return function(){if(_e.length=0,Object.assign(_e,arguments),H.includes("j")){var fe=r["dynCall_"+H];fe=_e&&_e.length?fe.apply(null,[re].concat(_e)):fe.call(null,re)}else fe=Qt(re).apply(null,_e);return fe}})(v,I):Qt(I);return typeof j!="function"&&mt("unknown function pointer with signature "+v+": "+I),j}var nn=void 0;function en(v){var I=Qe(v=ir(v));return Kt(v),I}function Zt(v,I){var j=[],H={};throw I.forEach((function re(_e){H[_e]||xt[_e]||(At[_e]?At[_e].forEach(re):(j.push(_e),H[_e]=!0))})),new nn(v+": "+j.map(en).join([", "]))}function yn(v){var I=Function;if(!(I instanceof Function))throw new TypeError("new_ called with constructor type "+typeof I+" which is not a function");var j=Rt(I.name||"unknownFunctionName",(function(){}));return j.prototype=I.prototype,j=new j,(v=I.apply(j,v))instanceof Object?v:j}function En(v,I,j,H,re){var _e=I.length;2>_e&&mt("argTypes array size mismatch! Must at least get return value and 'this' types!");var fe=I[1]!==null&&j!==null,ge=!1;for(j=1;j<I.length;++j)if(I[j]!==null&&I[j].Vd===void 0){ge=!0;break}var Le=I[0].name!=="void",Oe="",gt="";for(j=0;j<_e-2;++j)Oe+=(j!==0?", ":"")+"arg"+j,gt+=(j!==0?", ":"")+"arg"+j+"Wired";v="return function "+Bt(v)+"("+Oe+`) {
if (arguments.length !== `+(_e-2)+`) {
throwBindingError('function `+v+" called with ' + arguments.length + ' arguments, expected "+(_e-2)+` args!');
}
`,ge&&(v+=`var destructors = [];
`);var Tt=ge?"destructors":"null";for(Oe="throwBindingError invoker fn runDestructors retType classParam".split(" "),H=[mt,H,re,Ie,I[0],I[1]],fe&&(v+="var thisWired = classParam.toWireType("+Tt+`, this);
`),j=0;j<_e-2;++j)v+="var arg"+j+"Wired = argType"+j+".toWireType("+Tt+", arg"+j+"); // "+I[j+2].name+`
`,Oe.push("argType"+j),H.push(I[j+2]);if(fe&&(gt="thisWired"+(0<gt.length?", ":"")+gt),v+=(Le?"var rv = ":"")+"invoker(fn"+(0<gt.length?", ":"")+gt+`);
`,ge)v+=`runDestructors(destructors);
`;else for(j=fe?1:2;j<I.length;++j)_e=j===1?"thisWired":"arg"+(j-2)+"Wired",I[j].Vd!==null&&(v+=_e+"_dtor("+_e+"); // "+I[j].name+`
`,Oe.push(_e+"_dtor"),H.push(I[j].Vd));return Le&&(v+=`var ret = retType.fromWireType(rv);
return ret;
`),Oe.push(v+`}
`),yn(Oe).apply(null,H)}function Sn(v,I){for(var j=[],H=0;H<v;H++)j.push(ce[I+4*H>>2]);return j}var zn=[],gn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Kn(v){4<v&&--gn[v].$e==0&&(gn[v]=void 0,zn.push(v))}var Qn=v=>(v||mt("Cannot use deleted val. handle = "+v),gn[v].value),kn=v=>{switch(v){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var I=zn.length?zn.pop():gn.length;return gn[I]={$e:1,value:v},I}};function Tr(v,I,j){switch(I){case 0:return function(H){return this.fromWireType((j?L:Y)[H])};case 1:return function(H){return this.fromWireType((j?ie:$)[H>>1])};case 2:return function(H){return this.fromWireType((j?Q:ce)[H>>2])};default:throw new TypeError("Unknown integer type: "+v)}}function lr(v,I){var j=xt[v];return j===void 0&&mt(I+" has unknown type "+en(v)),j}function cr(v){if(v===null)return"null";var I=typeof v;return I==="object"||I==="array"||I==="function"?v.toString():""+v}function Lr(v,I){switch(I){case 2:return function(j){return this.fromWireType(be[j>>2])};case 3:return function(j){return this.fromWireType(Ae[j>>3])};default:throw new TypeError("Unknown float type: "+v)}}function Ur(v,I,j){switch(I){case 0:return j?function(H){return L[H]}:function(H){return Y[H]};case 1:return j?function(H){return ie[H>>1]}:function(H){return $[H>>1]};case 2:return j?function(H){return Q[H>>2]}:function(H){return ce[H>>2]};default:throw new TypeError("Unknown integer type: "+v)}}var Sr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Dr(v,I){for(var j=v>>1,H=j+I/2;!(j>=H)&&$[j];)++j;if(32<(j<<=1)-v&&Sr)return Sr.decode(Y.subarray(v,j));for(j="",H=0;!(H>=I/2);++H){var re=ie[v+2*H>>1];if(re==0)break;j+=String.fromCharCode(re)}return j}function fr(v,I,j){if(j===void 0&&(j=2147483647),2>j)return 0;var H=I;j=(j-=2)<2*v.length?j/2:v.length;for(var re=0;re<j;++re)ie[I>>1]=v.charCodeAt(re),I+=2;return ie[I>>1]=0,I-H}function pn(v){return 2*v.length}function ar(v,I){for(var j=0,H="";!(j>=I/4);){var re=Q[v+4*j>>2];if(re==0)break;++j,65536<=re?(re-=65536,H+=String.fromCharCode(55296|re>>10,56320|1023&re)):H+=String.fromCharCode(re)}return H}function hr(v,I,j){if(j===void 0&&(j=2147483647),4>j)return 0;var H=I;j=H+j-4;for(var re=0;re<v.length;++re){var _e=v.charCodeAt(re);if(55296<=_e&&57343>=_e&&(_e=65536+((1023&_e)<<10)|1023&v.charCodeAt(++re)),Q[I>>2]=_e,(I+=4)+4>j)break}return Q[I>>2]=0,I-H}function pr(v){for(var I=0,j=0;j<v.length;++j){var H=v.charCodeAt(j);55296<=H&&57343>=H&&++j,I+=4}return I}var Mr={};function tr(v){var I=Mr[v];return I===void 0?Qe(v):I}var Un,nr=[],Rn=[];Un=M?()=>{var v=m.hrtime();return 1e3*v[0]+v[1]/1e6}:()=>performance.now();var dr=1,sr=[],On=[],mr=[],Jn=[],Gn=[],Pn=[],Wn=[],Vn=[],Nn=[],qn=[],Xn={},wr={},k=4;function X(v){Re||(Re=v)}function oe(v){for(var I=dr++,j=v.length;j<I;j++)v[j]=null;return I}function Ee(v){return He=Vn[v],r.gg=Ue=He&&He.ze,!(v&&!Ue)}var Re,He,Ct=[];function jt(v,I,j,H){for(var re=0;re<v;re++){var _e=Ue[j](),fe=_e&&oe(H);_e?(_e.name=fe,H[fe]=_e):X(1282),Q[I+4*re>>2]=fe}}function Wt(v,I){if(I){var j=void 0;switch(v){case 36346:j=1;break;case 36344:return;case 34814:case 36345:j=0;break;case 34466:var H=Ue.getParameter(34467);j=H?H.length:0;break;case 33309:if(2>He.version)return void X(1282);j=2*(Ue.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(2>He.version)return void X(1280);j=v==33307?3:0}if(j===void 0)switch(H=Ue.getParameter(v),typeof H){case"number":j=H;break;case"boolean":j=H?1:0;break;case"string":return void X(1280);case"object":if(H===null)switch(v){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:j=0;break;default:return void X(1280)}else{if(H instanceof Float32Array||H instanceof Uint32Array||H instanceof Int32Array||H instanceof Array){for(v=0;v<H.length;++v)Q[I+4*v>>2]=H[v];return}try{j=0|H.name}catch(re){return X(1280),void B("GL_INVALID_ENUM in glGet0v: Unknown object returned from WebGL getParameter("+v+")! (error: "+re+")")}}break;default:return X(1280),void B("GL_INVALID_ENUM in glGet0v: Native code calling glGet0v("+v+") and it returns "+H+" of type "+typeof H+"!")}Q[I>>2]=j}else X(1281)}function tn(v){var I=he(v)+1,j=rr(I);return tt(v,Y,j,I),j}function Tn(v){return v.slice(-1)=="]"&&v.lastIndexOf("[")}function mn(v){return(v-=5120)==0?L:v==1?Y:v==2?ie:v==4?Q:v==6?be:v==5||v==28922||v==28520||v==30779||v==30782?ce:$}function Ln(v,I,j,H,re){v=mn(v);var _e=31-Math.clz32(v.BYTES_PER_ELEMENT),fe=k;return v.subarray(re>>_e,re+H*(j*({5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[I-6402]||1)*(1<<_e)+fe-1&-fe)>>_e)}function Xt(v){var I=Ue.xf;if(I){var j=I.He[v];return typeof j=="number"&&(I.He[v]=j=Ue.getUniformLocation(I,I.nf[v]+(0<j?"["+j+"]":""))),j}X(1282)}var Bn=[],Fn=[],Yn={};function yr(){if(!Ar){var v,I={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"};for(v in Yn)Yn[v]===void 0?delete I[v]:I[v]=Yn[v];var j=[];for(v in I)j.push(v+"="+I[v]);Ar=j}return Ar}var Ar,Br=[null,[],[]];function xr(v){return v%4==0&&(v%100!=0||v%400==0)}var kr=[31,29,31,30,31,30,31,31,30,31,30,31],Fr=[31,28,31,30,31,30,31,31,30,31,30,31];_n=r.InternalError=Gt("InternalError");for(var Or=Array(256),Cr=0;256>Cr;++Cr)Or[Cr]=String.fromCharCode(Cr);dt=Or,pt=r.BindingError=Gt("BindingError"),nt.prototype.isAliasOf=function(v){if(!(this instanceof nt&&v instanceof nt))return!1;var I=this.Cd.Md.Gd,j=this.Cd.Kd,H=v.Cd.Md.Gd;for(v=v.Cd.Kd;I.Yd;)j=I.Ie(j),I=I.Yd;for(;H.Yd;)v=H.Ie(v),H=H.Yd;return I===H&&j===v},nt.prototype.clone=function(){if(this.Cd.Kd||lt(this),this.Cd.Ge)return this.Cd.count.value+=1,this;var v=ft,I=Object,j=I.create,H=Object.getPrototypeOf(this),re=this.Cd;return(v=v(j.call(I,H,{Cd:{value:{count:re.count,xe:re.xe,Ge:re.Ge,Kd:re.Kd,Md:re.Md,Rd:re.Rd,Wd:re.Wd}}}))).Cd.count.value+=1,v.Cd.xe=!1,v},nt.prototype.delete=function(){this.Cd.Kd||lt(this),this.Cd.xe&&!this.Cd.Ge&&mt("Object already scheduled for deletion"),bn(this),Ge(this.Cd),this.Cd.Ge||(this.Cd.Rd=void 0,this.Cd.Kd=void 0)},nt.prototype.isDeleted=function(){return!this.Cd.Kd},nt.prototype.deleteLater=function(){return this.Cd.Kd||lt(this),this.Cd.xe&&!this.Cd.Ge&&mt("Object already scheduled for deletion"),Me.push(this),Me.length===1&&Fe&&Fe(ye),this.Cd.xe=!0,this},r.getInheritedInstanceCount=function(){return Object.keys(qe).length},r.getLiveInheritedInstances=function(){var v,I=[];for(v in qe)qe.hasOwnProperty(v)&&I.push(qe[v]);return I},r.flushPendingDeletes=ye,r.setDelayFunction=function(v){Fe=v,Me.length&&Fe&&Fe(ye)},hn.prototype.Ff=function(v){return this.mf&&(v=this.mf(v)),v},hn.prototype.gf=function(v){this.ae&&this.ae(v)},hn.prototype.argPackAdvance=8,hn.prototype.readValueFromPointer=ke,hn.prototype.deleteObject=function(v){v!==null&&v.delete()},hn.prototype.fromWireType=function(v){function I(){return this.Ne?je(this.Gd.ye,{Md:this.Qf,Kd:j,Wd:this,Rd:v}):je(this.Gd.ye,{Md:this,Kd:v})}var j=this.Ff(v);if(!j)return this.gf(v),null;var H=(function(_e,fe){for(fe===void 0&&mt("ptr should not be undefined");_e.Yd;)fe=_e.Ie(fe),_e=_e.Yd;return qe[fe]})(this.Gd,j);if(H!==void 0)return H.Cd.count.value===0?(H.Cd.Kd=j,H.Cd.Rd=v,H.clone()):(H=H.clone(),this.gf(v),H);if(H=this.Gd.Ef(j),!(H=Te[H]))return I.call(this);H=this.Me?H.vf:H.pointerType;var re=pe(j,this.Gd,H.Gd);return re===null?I.call(this):this.Ne?je(H.Gd.ye,{Md:H,Kd:re,Wd:this,Rd:v}):je(H.Gd.ye,{Md:H,Kd:re})},nn=r.UnboundTypeError=Gt("UnboundTypeError"),r.count_emval_handles=function(){for(var v=0,I=5;I<gn.length;++I)gn[I]!==void 0&&++v;return v},r.get_first_emval=function(){for(var v=5;v<gn.length;++v)if(gn[v]!==void 0)return gn[v];return null};for(var Ue,Cn=0;32>Cn;++Cn)Ct.push(Array(Cn));var gr=new Float32Array(288);for(Cn=0;288>Cn;++Cn)Bn[Cn]=gr.subarray(0,Cn+1);var _r=new Int32Array(288);for(Cn=0;288>Cn;++Cn)Fn[Cn]=_r.subarray(0,Cn+1);var Nr={H:function(){return 0},xb:function(){},zb:function(){return 0},ub:function(){},Ab:function(){},vb:function(){},P:function(v){var I=Se[v];delete Se[v];var j=I.Ze,H=I.ae,re=I.kf;ln([v],re.map((_e=>_e.If)).concat(re.map((_e=>_e.Vf))),(_e=>{var fe={};return re.forEach(((ge,Le)=>{var Oe=_e[Le],gt=ge.Gf,Tt=ge.Hf,Ot=_e[Le+re.length],Pt=ge.Uf,Et=ge.Wf;fe[ge.Af]={read:Ht=>Oe.fromWireType(gt(Tt,Ht)),write:(Ht,w)=>{var N=[];Pt(Et,Ht,Ot.toWireType(N,w)),Ie(N)}}})),[{name:I.name,fromWireType:function(ge){var Le,Oe={};for(Le in fe)Oe[Le]=fe[Le].read(ge);return H(ge),Oe},toWireType:function(ge,Le){for(var Oe in fe)if(!(Oe in Le))throw new TypeError('Missing field:  "'+Oe+'"');var gt=j();for(Oe in fe)fe[Oe].write(gt,Le[Oe]);return ge!==null&&ge.push(H,gt),gt},argPackAdvance:8,readValueFromPointer:ke,Vd:H}]}))},kb:function(){},Cb:function(v,I,j,H,re){var _e=rt(j);Nt(v,{name:I=Qe(I),fromWireType:function(fe){return!!fe},toWireType:function(fe,ge){return ge?H:re},argPackAdvance:8,readValueFromPointer:function(fe){if(j===1)var ge=L;else if(j===2)ge=ie;else{if(j!==4)throw new TypeError("Unknown boolean type size: "+I);ge=Q}return this.fromWireType(ge[fe>>_e])},Vd:null})},i:function(v,I,j,H,re,_e,fe,ge,Le,Oe,gt,Tt,Ot){gt=Qe(gt),_e=Jt(re,_e),ge&&(ge=Jt(fe,ge)),Oe&&(Oe=Jt(Le,Oe)),Ot=Jt(Tt,Ot);var Pt=Bt(gt);_t(Pt,(function(){Zt("Cannot construct "+gt+" due to unbound types",[H])})),ln([v,I,j],H?[H]:[],(function(Et){if(Et=Et[0],H)var Ht=Et.Gd,w=Ht.ye;else w=nt.prototype;Et=Rt(Pt,(function(){if(Object.getPrototypeOf(this)!==N)throw new pt("Use 'new' to construct "+gt);if(U.ee===void 0)throw new pt(gt+" has no accessible constructor");var Z=U.ee[arguments.length];if(Z===void 0)throw new pt("Tried to invoke ctor of "+gt+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(U.ee).toString()+") parameters instead!");return Z.apply(this,arguments)}));var N=Object.create(w,{constructor:{value:Et}});Et.prototype=N;var U=new Ft(gt,Et,N,Ot,Ht,_e,ge,Oe);Ht=new hn(gt,U,!0,!1,!1),w=new hn(gt+"*",U,!1,!1,!1);var K=new hn(gt+" const*",U,!1,!0,!1);return Te[v]={pointerType:w,vf:K},xn(Pt,Et),[Ht,w,K]}))},g:function(v,I,j,H,re,_e,fe){var ge=Sn(j,H);I=Qe(I),_e=Jt(re,_e),ln([],[v],(function(Le){function Oe(){Zt("Cannot call "+gt+" due to unbound types",ge)}var gt=(Le=Le[0]).name+"."+I;I.startsWith("@@")&&(I=Symbol[I.substring(2)]);var Tt=Le.Gd.constructor;return Tt[I]===void 0?(Oe.ve=j-1,Tt[I]=Oe):(ot(Tt,I,gt),Tt[I].Od[j-1]=Oe),ln([],ge,(function(Ot){return Ot=[Ot[0],null].concat(Ot.slice(1)),Ot=En(gt,Ot,null,_e,fe),Tt[I].Od===void 0?(Ot.ve=j-1,Tt[I]=Ot):Tt[I].Od[j-1]=Ot,[]})),[]}))},r:function(v,I,j,H,re,_e){0<I||De();var fe=Sn(I,j);re=Jt(H,re),ln([],[v],(function(ge){var Le="constructor "+(ge=ge[0]).name;if(ge.Gd.ee===void 0&&(ge.Gd.ee=[]),ge.Gd.ee[I-1]!==void 0)throw new pt("Cannot register multiple constructors with identical number of parameters ("+(I-1)+") for class '"+ge.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return ge.Gd.ee[I-1]=()=>{Zt("Cannot construct "+ge.name+" due to unbound types",fe)},ln([],fe,(function(Oe){return Oe.splice(1,0,null),ge.Gd.ee[I-1]=En(Le,Oe,null,re,_e),[]})),[]}))},b:function(v,I,j,H,re,_e,fe,ge){var Le=Sn(j,H);I=Qe(I),_e=Jt(re,_e),ln([],[v],(function(Oe){function gt(){Zt("Cannot call "+Tt+" due to unbound types",Le)}var Tt=(Oe=Oe[0]).name+"."+I;I.startsWith("@@")&&(I=Symbol[I.substring(2)]),ge&&Oe.Gd.Rf.push(I);var Ot=Oe.Gd.ye,Pt=Ot[I];return Pt===void 0||Pt.Od===void 0&&Pt.className!==Oe.name&&Pt.ve===j-2?(gt.ve=j-2,gt.className=Oe.name,Ot[I]=gt):(ot(Ot,I,Tt),Ot[I].Od[j-2]=gt),ln([],Le,(function(Et){return Et=En(Tt,Et,Oe,_e,fe),Ot[I].Od===void 0?(Et.ve=j-2,Ot[I]=Et):Ot[I].Od[j-2]=Et,[]})),[]}))},O:function(v,I,j){v=Qe(v),ln([],[I],(function(H){return H=H[0],r[v]=H.fromWireType(j),[]}))},Bb:function(v,I){Nt(v,{name:I=Qe(I),fromWireType:function(j){var H=Qn(j);return Kn(j),H},toWireType:function(j,H){return kn(H)},argPackAdvance:8,readValueFromPointer:ke,Vd:null})},k:function(v,I,j,H){function re(){}j=rt(j),I=Qe(I),re.values={},Nt(v,{name:I,constructor:re,fromWireType:function(_e){return this.constructor.values[_e]},toWireType:function(_e,fe){return fe.value},argPackAdvance:8,readValueFromPointer:Tr(I,j,H),Vd:null}),_t(I,re)},c:function(v,I,j){var H=lr(v,"enum");I=Qe(I),v=H.constructor,H=Object.create(H.constructor.prototype,{value:{value:j},constructor:{value:Rt(H.name+"_"+I,(function(){}))}}),v.values[j]=H,v[I]=H},L:function(v,I,j){j=rt(j),Nt(v,{name:I=Qe(I),fromWireType:function(H){return H},toWireType:function(H,re){return re},argPackAdvance:8,readValueFromPointer:Lr(I,j),Vd:null})},q:function(v,I,j,H,re,_e){var fe=Sn(I,j);v=Qe(v),re=Jt(H,re),_t(v,(function(){Zt("Cannot call "+v+" due to unbound types",fe)}),I-1),ln([],fe,(function(ge){return ge=[ge[0],null].concat(ge.slice(1)),xn(v,En(v,ge,null,re,_e),I-1),[]}))},s:function(v,I,j,H,re){I=Qe(I),re===-1&&(re=4294967295),re=rt(j);var _e=ge=>ge;if(H===0){var fe=32-8*j;_e=ge=>ge<<fe>>>fe}j=I.includes("unsigned")?function(ge,Le){return Le>>>0}:function(ge,Le){return Le},Nt(v,{name:I,fromWireType:_e,toWireType:j,argPackAdvance:8,readValueFromPointer:Ur(I,re,H!==0),Vd:null})},n:function(v,I,j){function H(_e){_e>>=2;var fe=ce;return new re(fe.buffer,fe[_e+1],fe[_e])}var re=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][I];Nt(v,{name:j=Qe(j),fromWireType:H,argPackAdvance:8,readValueFromPointer:H},{Kf:!0})},o:function(v,I,j,H,re,_e,fe,ge,Le,Oe,gt,Tt){j=Qe(j),_e=Jt(re,_e),ge=Jt(fe,ge),Oe=Jt(Le,Oe),Tt=Jt(gt,Tt),ln([v],[I],(function(Ot){return Ot=Ot[0],[new hn(j,Ot.Gd,!1,!1,!0,Ot,H,_e,ge,Oe,Tt)]}))},K:function(v,I){var j=(I=Qe(I))==="std::string";Nt(v,{name:I,fromWireType:function(H){var re=ce[H>>2],_e=H+4;if(j)for(var fe=_e,ge=0;ge<=re;++ge){var Le=_e+ge;if(ge==re||Y[Le]==0){if(fe=st(fe,Le-fe),Oe===void 0)var Oe=fe;else Oe+="\0",Oe+=fe;fe=Le+1}}else{for(Oe=Array(re),ge=0;ge<re;++ge)Oe[ge]=String.fromCharCode(Y[_e+ge]);Oe=Oe.join("")}return Kt(H),Oe},toWireType:function(H,re){re instanceof ArrayBuffer&&(re=new Uint8Array(re));var _e,fe=typeof re=="string";fe||re instanceof Uint8Array||re instanceof Uint8ClampedArray||re instanceof Int8Array||mt("Cannot pass non-string to std::string"),_e=j&&fe?he(re):re.length;var ge=rr(4+_e+1),Le=ge+4;if(ce[ge>>2]=_e,j&&fe)tt(re,Y,Le,_e+1);else if(fe)for(fe=0;fe<_e;++fe){var Oe=re.charCodeAt(fe);255<Oe&&(Kt(Le),mt("String has UTF-16 code units that do not fit in 8 bits")),Y[Le+fe]=Oe}else for(fe=0;fe<_e;++fe)Y[Le+fe]=re[fe];return H!==null&&H.push(Kt,ge),ge},argPackAdvance:8,readValueFromPointer:ke,Vd:function(H){Kt(H)}})},B:function(v,I,j){if(j=Qe(j),I===2)var H=Dr,re=fr,_e=pn,fe=()=>$,ge=1;else I===4&&(H=ar,re=hr,_e=pr,fe=()=>ce,ge=2);Nt(v,{name:j,fromWireType:function(Le){for(var Oe,gt=ce[Le>>2],Tt=fe(),Ot=Le+4,Pt=0;Pt<=gt;++Pt){var Et=Le+4+Pt*I;Pt!=gt&&Tt[Et>>ge]!=0||(Ot=H(Ot,Et-Ot),Oe===void 0?Oe=Ot:(Oe+="\0",Oe+=Ot),Ot=Et+I)}return Kt(Le),Oe},toWireType:function(Le,Oe){typeof Oe!="string"&&mt("Cannot pass non-string to C++ string type "+j);var gt=_e(Oe),Tt=rr(4+gt+I);return ce[Tt>>2]=gt>>ge,re(Oe,Tt+4,gt+I),Le!==null&&Le.push(Kt,Tt),Tt},argPackAdvance:8,readValueFromPointer:ke,Vd:function(Le){Kt(Le)}})},J:function(v,I,j,H,re,_e){Se[v]={name:Qe(I),Ze:Jt(j,H),ae:Jt(re,_e),kf:[]}},v:function(v,I,j,H,re,_e,fe,ge,Le,Oe){Se[v].kf.push({Af:Qe(I),If:j,Gf:Jt(H,re),Hf:_e,Vf:fe,Uf:Jt(ge,Le),Wf:Oe})},Db:function(v,I){Nt(v,{Mf:!0,name:I=Qe(I),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},rb:function(){return!0},mb:function(){throw 1/0},gb:function(v,I,j,H,re){v=nr[v],I=Qn(I),j=tr(j);var _e=[];return ce[H>>2]=kn(_e),v(I,j,_e,re)},w:function(v,I,j,H){(v=nr[v])(I=Qn(I),j=tr(j),null,H)},p:Kn,u:function(v,I){var j=(function(gt,Tt){for(var Ot=Array(gt),Pt=0;Pt<gt;++Pt)Ot[Pt]=lr(ce[Tt+4*Pt>>2],"parameter "+Pt);return Ot})(v,I),H=j[0];I=H.name+"_$"+j.slice(1).map((function(gt){return gt.name})).join("_")+"$";var re=Rn[I];if(re!==void 0)return re;re=["retType"];for(var _e=[H],fe="",ge=0;ge<v-1;++ge)fe+=(ge!==0?", ":"")+"arg"+ge,re.push("argType"+ge),_e.push(j[1+ge]);var Le="return function "+Bt("methodCaller_"+I)+`(handle, name, destructors, args) {
`,Oe=0;for(ge=0;ge<v-1;++ge)Le+="    var arg"+ge+" = argType"+ge+".readValueFromPointer(args"+(Oe?"+"+Oe:"")+`);
`,Oe+=j[ge+1].argPackAdvance;for(Le+="    var rv = handle[name]("+fe+`);
`,ge=0;ge<v-1;++ge)j[ge+1].deleteObject&&(Le+="    argType"+ge+".deleteObject(arg"+ge+`);
`);return H.Mf||(Le+=`    return retType.toWireType(destructors, rv);
`),re.push(Le+`};
`),re=(function(gt){var Tt=nr.length;return nr.push(gt),Tt})(v=yn(re).apply(null,_e)),Rn[I]=re},t:function(v){4<v&&(gn[v].$e+=1)},D:function(){return kn([])},x:function(v){return kn(tr(v))},hb:function(){return kn({})},fb:function(v){Ie(Qn(v)),Kn(v)},A:function(v,I,j){v=Qn(v),I=Qn(I),j=Qn(j),v[I]=j},y:function(v,I){return v=(v=lr(v,"_emval_take_value")).readValueFromPointer(I),kn(v)},ob:function(){return-52},pb:function(){},a:function(){De("")},qb:Un,Xc:function(v){Ue.activeTexture(v)},R:function(v,I){Ue.attachShader(On[v],Pn[I])},S:function(v,I,j){Ue.bindAttribLocation(On[v],I,st(j))},T:function(v,I){v==35051?Ue.Xe=I:v==35052&&(Ue.we=I),Ue.bindBuffer(v,sr[I])},_b:function(v,I){Ue.bindFramebuffer(v,mr[I])},$b:function(v,I){Ue.bindRenderbuffer(v,Jn[I])},Mb:function(v,I){Ue.bindSampler(v,Nn[I])},U:function(v,I){Ue.bindTexture(v,Gn[I])},tc:function(v){Ue.bindVertexArray(Wn[v])},wc:function(v){Ue.bindVertexArray(Wn[v])},V:function(v,I,j,H){Ue.blendColor(v,I,j,H)},W:function(v){Ue.blendEquation(v)},X:function(v,I){Ue.blendFunc(v,I)},Tb:function(v,I,j,H,re,_e,fe,ge,Le,Oe){Ue.blitFramebuffer(v,I,j,H,re,_e,fe,ge,Le,Oe)},Y:function(v,I,j,H){2<=He.version?j&&I?Ue.bufferData(v,Y,H,j,I):Ue.bufferData(v,I,H):Ue.bufferData(v,j?Y.subarray(j,j+I):I,H)},Z:function(v,I,j,H){2<=He.version?j&&Ue.bufferSubData(v,I,Y,H,j):Ue.bufferSubData(v,I,Y.subarray(H,H+j))},ac:function(v){return Ue.checkFramebufferStatus(v)},_:function(v){Ue.clear(v)},$:function(v,I,j,H){Ue.clearColor(v,I,j,H)},aa:function(v){Ue.clearStencil(v)},cb:function(v,I,j,H){return Ue.clientWaitSync(qn[v],I,(j>>>0)+4294967296*H)},ba:function(v,I,j,H){Ue.colorMask(!!v,!!I,!!j,!!H)},ca:function(v){Ue.compileShader(Pn[v])},da:function(v,I,j,H,re,_e,fe,ge){2<=He.version?Ue.we||!fe?Ue.compressedTexImage2D(v,I,j,H,re,_e,fe,ge):Ue.compressedTexImage2D(v,I,j,H,re,_e,Y,ge,fe):Ue.compressedTexImage2D(v,I,j,H,re,_e,ge?Y.subarray(ge,ge+fe):null)},ea:function(v,I,j,H,re,_e,fe,ge,Le){2<=He.version?Ue.we||!ge?Ue.compressedTexSubImage2D(v,I,j,H,re,_e,fe,ge,Le):Ue.compressedTexSubImage2D(v,I,j,H,re,_e,fe,Y,Le,ge):Ue.compressedTexSubImage2D(v,I,j,H,re,_e,fe,Le?Y.subarray(Le,Le+ge):null)},fa:function(v,I,j,H,re,_e,fe,ge){Ue.copyTexSubImage2D(v,I,j,H,re,_e,fe,ge)},ga:function(){var v=oe(On),I=Ue.createProgram();return I.name=v,I.Qe=I.Oe=I.Pe=0,I.bf=1,On[v]=I,v},ha:function(v){var I=oe(Pn);return Pn[I]=Ue.createShader(v),I},ia:function(v){Ue.cullFace(v)},ja:function(v,I){for(var j=0;j<v;j++){var H=Q[I+4*j>>2],re=sr[H];re&&(Ue.deleteBuffer(re),re.name=0,sr[H]=null,H==Ue.Xe&&(Ue.Xe=0),H==Ue.we&&(Ue.we=0))}},bc:function(v,I){for(var j=0;j<v;++j){var H=Q[I+4*j>>2],re=mr[H];re&&(Ue.deleteFramebuffer(re),re.name=0,mr[H]=null)}},ka:function(v){if(v){var I=On[v];I?(Ue.deleteProgram(I),I.name=0,On[v]=null):X(1281)}},cc:function(v,I){for(var j=0;j<v;j++){var H=Q[I+4*j>>2],re=Jn[H];re&&(Ue.deleteRenderbuffer(re),re.name=0,Jn[H]=null)}},Nb:function(v,I){for(var j=0;j<v;j++){var H=Q[I+4*j>>2],re=Nn[H];re&&(Ue.deleteSampler(re),re.name=0,Nn[H]=null)}},la:function(v){if(v){var I=Pn[v];I?(Ue.deleteShader(I),Pn[v]=null):X(1281)}},Vb:function(v){if(v){var I=qn[v];I?(Ue.deleteSync(I),I.name=0,qn[v]=null):X(1281)}},ma:function(v,I){for(var j=0;j<v;j++){var H=Q[I+4*j>>2],re=Gn[H];re&&(Ue.deleteTexture(re),re.name=0,Gn[H]=null)}},uc:function(v,I){for(var j=0;j<v;j++){var H=Q[I+4*j>>2];Ue.deleteVertexArray(Wn[H]),Wn[H]=null}},xc:function(v,I){for(var j=0;j<v;j++){var H=Q[I+4*j>>2];Ue.deleteVertexArray(Wn[H]),Wn[H]=null}},na:function(v){Ue.depthMask(!!v)},oa:function(v){Ue.disable(v)},pa:function(v){Ue.disableVertexAttribArray(v)},qa:function(v,I,j){Ue.drawArrays(v,I,j)},rc:function(v,I,j,H){Ue.drawArraysInstanced(v,I,j,H)},pc:function(v,I,j,H,re){Ue.hf.drawArraysInstancedBaseInstanceWEBGL(v,I,j,H,re)},nc:function(v,I){for(var j=Ct[v],H=0;H<v;H++)j[H]=Q[I+4*H>>2];Ue.drawBuffers(j)},ra:function(v,I,j,H){Ue.drawElements(v,I,j,H)},sc:function(v,I,j,H,re){Ue.drawElementsInstanced(v,I,j,H,re)},qc:function(v,I,j,H,re,_e,fe){Ue.hf.drawElementsInstancedBaseVertexBaseInstanceWEBGL(v,I,j,H,re,_e,fe)},hc:function(v,I,j,H,re,_e){Ue.drawElements(v,H,re,_e)},sa:function(v){Ue.enable(v)},ta:function(v){Ue.enableVertexAttribArray(v)},Rb:function(v,I){return(v=Ue.fenceSync(v,I))?(I=oe(qn),v.name=I,qn[I]=v,I):0},ua:function(){Ue.finish()},va:function(){Ue.flush()},dc:function(v,I,j,H){Ue.framebufferRenderbuffer(v,I,j,Jn[H])},ec:function(v,I,j,H,re){Ue.framebufferTexture2D(v,I,j,Gn[H],re)},wa:function(v){Ue.frontFace(v)},xa:function(v,I){jt(v,I,"createBuffer",sr)},fc:function(v,I){jt(v,I,"createFramebuffer",mr)},gc:function(v,I){jt(v,I,"createRenderbuffer",Jn)},Ob:function(v,I){jt(v,I,"createSampler",Nn)},ya:function(v,I){jt(v,I,"createTexture",Gn)},vc:function(v,I){jt(v,I,"createVertexArray",Wn)},yc:function(v,I){jt(v,I,"createVertexArray",Wn)},Wb:function(v){Ue.generateMipmap(v)},za:function(v,I,j){j?Q[j>>2]=Ue.getBufferParameter(v,I):X(1281)},Aa:function(){var v=Ue.getError()||Re;return Re=0,v},Xb:function(v,I,j,H){((v=Ue.getFramebufferAttachmentParameter(v,I,j))instanceof WebGLRenderbuffer||v instanceof WebGLTexture)&&(v=0|v.name),Q[H>>2]=v},ab:function(v,I){Wt(v,I)},Ba:function(v,I,j,H){(v=Ue.getProgramInfoLog(On[v]))===null&&(v="(unknown error)"),I=0<I&&H?tt(v,Y,H,I):0,j&&(Q[j>>2]=I)},Ca:function(v,I,j){if(j)if(v>=dr)X(1281);else if(v=On[v],I==35716)(v=Ue.getProgramInfoLog(v))===null&&(v="(unknown error)"),Q[j>>2]=v.length+1;else if(I==35719){if(!v.Qe)for(I=0;I<Ue.getProgramParameter(v,35718);++I)v.Qe=Math.max(v.Qe,Ue.getActiveUniform(v,I).name.length+1);Q[j>>2]=v.Qe}else if(I==35722){if(!v.Oe)for(I=0;I<Ue.getProgramParameter(v,35721);++I)v.Oe=Math.max(v.Oe,Ue.getActiveAttrib(v,I).name.length+1);Q[j>>2]=v.Oe}else if(I==35381){if(!v.Pe)for(I=0;I<Ue.getProgramParameter(v,35382);++I)v.Pe=Math.max(v.Pe,Ue.getActiveUniformBlockName(v,I).length+1);Q[j>>2]=v.Pe}else Q[j>>2]=Ue.getProgramParameter(v,I);else X(1281)},Yb:function(v,I,j){j?Q[j>>2]=Ue.getRenderbufferParameter(v,I):X(1281)},Da:function(v,I,j,H){(v=Ue.getShaderInfoLog(Pn[v]))===null&&(v="(unknown error)"),I=0<I&&H?tt(v,Y,H,I):0,j&&(Q[j>>2]=I)},Jb:function(v,I,j,H){v=Ue.getShaderPrecisionFormat(v,I),Q[j>>2]=v.rangeMin,Q[j+4>>2]=v.rangeMax,Q[H>>2]=v.precision},Ea:function(v,I,j){j?I==35716?((v=Ue.getShaderInfoLog(Pn[v]))===null&&(v="(unknown error)"),Q[j>>2]=v?v.length+1:0):I==35720?(v=Ue.getShaderSource(Pn[v]),Q[j>>2]=v?v.length+1:0):Q[j>>2]=Ue.getShaderParameter(Pn[v],I):X(1281)},F:function(v){var I=Xn[v];if(!I){switch(v){case 7939:I=tn((I=(I=Ue.getSupportedExtensions()||[]).concat(I.map((function(H){return"GL_"+H})))).join(" "));break;case 7936:case 7937:case 37445:case 37446:(I=Ue.getParameter(v))||X(1280),I=I&&tn(I);break;case 7938:I=Ue.getParameter(7938),I=tn(I=2<=He.version?"OpenGL ES 3.0 ("+I+")":"OpenGL ES 2.0 ("+I+")");break;case 35724:var j=(I=Ue.getParameter(35724)).match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);j!==null&&(j[1].length==3&&(j[1]+="0"),I="OpenGL ES GLSL ES "+j[1]+" ("+I+")"),I=tn(I);break;default:X(1280)}Xn[v]=I}return I},bb:function(v,I){if(2>He.version)return X(1282),0;var j=wr[v];return j?0>I||I>=j.length?(X(1281),0):j[I]:v===7939?(j=(j=(j=Ue.getSupportedExtensions()||[]).concat(j.map((function(H){return"GL_"+H})))).map((function(H){return tn(H)})),j=wr[v]=j,0>I||I>=j.length?(X(1281),0):j[I]):(X(1280),0)},Fa:function(v,I){if(I=st(I),v=On[v]){var j,H=v,re=H.He,_e=H.pf;if(!re)for(H.He=re={},H.nf={},j=0;j<Ue.getProgramParameter(H,35718);++j){var fe=Ue.getActiveUniform(H,j),ge=fe.name;fe=fe.size;var Le=Tn(ge);Le=0<Le?ge.slice(0,Le):ge;var Oe=H.bf;for(H.bf+=fe,_e[Le]=[fe,Oe],ge=0;ge<fe;++ge)re[Oe]=ge,H.nf[Oe++]=Le}if(H=v.He,re=0,_e=I,0<(j=Tn(I))&&(re=parseInt(I.slice(j+1))>>>0,_e=I.slice(0,j)),(_e=v.pf[_e])&&re<_e[0]&&(H[re+=_e[1]]=H[re]||Ue.getUniformLocation(v,I)))return re}else X(1281);return-1},Kb:function(v,I,j){for(var H=Ct[I],re=0;re<I;re++)H[re]=Q[j+4*re>>2];Ue.invalidateFramebuffer(v,H)},Lb:function(v,I,j,H,re,_e,fe){for(var ge=Ct[I],Le=0;Le<I;Le++)ge[Le]=Q[j+4*Le>>2];Ue.invalidateSubFramebuffer(v,ge,H,re,_e,fe)},Sb:function(v){return Ue.isSync(qn[v])},Ga:function(v){return(v=Gn[v])?Ue.isTexture(v):0},Ha:function(v){Ue.lineWidth(v)},Ia:function(v){v=On[v],Ue.linkProgram(v),v.He=0,v.pf={}},lc:function(v,I,j,H,re,_e){Ue.lf.multiDrawArraysInstancedBaseInstanceWEBGL(v,Q,I>>2,Q,j>>2,Q,H>>2,ce,re>>2,_e)},mc:function(v,I,j,H,re,_e,fe,ge){Ue.lf.multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL(v,Q,I>>2,j,Q,H>>2,Q,re>>2,Q,_e>>2,ce,fe>>2,ge)},Ja:function(v,I){v==3317&&(k=I),Ue.pixelStorei(v,I)},oc:function(v){Ue.readBuffer(v)},Ka:function(v,I,j,H,re,_e,fe){if(2<=He.version)if(Ue.Xe)Ue.readPixels(v,I,j,H,re,_e,fe);else{var ge=mn(_e);Ue.readPixels(v,I,j,H,re,_e,ge,fe>>31-Math.clz32(ge.BYTES_PER_ELEMENT))}else(fe=Ln(_e,re,j,H,fe))?Ue.readPixels(v,I,j,H,re,_e,fe):X(1280)},Zb:function(v,I,j,H){Ue.renderbufferStorage(v,I,j,H)},Ub:function(v,I,j,H,re){Ue.renderbufferStorageMultisample(v,I,j,H,re)},Pb:function(v,I,j){Ue.samplerParameteri(Nn[v],I,j)},Qb:function(v,I,j){Ue.samplerParameteri(Nn[v],I,Q[j>>2])},La:function(v,I,j,H){Ue.scissor(v,I,j,H)},Ma:function(v,I,j,H){for(var re="",_e=0;_e<I;++_e){var fe=H?Q[H+4*_e>>2]:-1;re+=st(Q[j+4*_e>>2],0>fe?void 0:fe)}Ue.shaderSource(Pn[v],re)},Na:function(v,I,j){Ue.stencilFunc(v,I,j)},Oa:function(v,I,j,H){Ue.stencilFuncSeparate(v,I,j,H)},Pa:function(v){Ue.stencilMask(v)},Qa:function(v,I){Ue.stencilMaskSeparate(v,I)},Ra:function(v,I,j){Ue.stencilOp(v,I,j)},Sa:function(v,I,j,H){Ue.stencilOpSeparate(v,I,j,H)},Ta:function(v,I,j,H,re,_e,fe,ge,Le){if(2<=He.version)if(Ue.we)Ue.texImage2D(v,I,j,H,re,_e,fe,ge,Le);else if(Le){var Oe=mn(ge);Ue.texImage2D(v,I,j,H,re,_e,fe,ge,Oe,Le>>31-Math.clz32(Oe.BYTES_PER_ELEMENT))}else Ue.texImage2D(v,I,j,H,re,_e,fe,ge,null);else Ue.texImage2D(v,I,j,H,re,_e,fe,ge,Le?Ln(ge,fe,H,re,Le):null)},Ua:function(v,I,j){Ue.texParameterf(v,I,j)},Va:function(v,I,j){Ue.texParameterf(v,I,be[j>>2])},Wa:function(v,I,j){Ue.texParameteri(v,I,j)},Ya:function(v,I,j){Ue.texParameteri(v,I,Q[j>>2])},ic:function(v,I,j,H,re){Ue.texStorage2D(v,I,j,H,re)},Za:function(v,I,j,H,re,_e,fe,ge,Le){if(2<=He.version)if(Ue.we)Ue.texSubImage2D(v,I,j,H,re,_e,fe,ge,Le);else if(Le){var Oe=mn(ge);Ue.texSubImage2D(v,I,j,H,re,_e,fe,ge,Oe,Le>>31-Math.clz32(Oe.BYTES_PER_ELEMENT))}else Ue.texSubImage2D(v,I,j,H,re,_e,fe,ge,null);else Oe=null,Le&&(Oe=Ln(ge,fe,re,_e,Le)),Ue.texSubImage2D(v,I,j,H,re,_e,fe,ge,Oe)},_a:function(v,I){Ue.uniform1f(Xt(v),I)},$a:function(v,I,j){if(2<=He.version)I&&Ue.uniform1fv(Xt(v),be,j>>2,I);else{if(288>=I)for(var H=Bn[I-1],re=0;re<I;++re)H[re]=be[j+4*re>>2];else H=be.subarray(j>>2,j+4*I>>2);Ue.uniform1fv(Xt(v),H)}},Tc:function(v,I){Ue.uniform1i(Xt(v),I)},Uc:function(v,I,j){if(2<=He.version)I&&Ue.uniform1iv(Xt(v),Q,j>>2,I);else{if(288>=I)for(var H=Fn[I-1],re=0;re<I;++re)H[re]=Q[j+4*re>>2];else H=Q.subarray(j>>2,j+4*I>>2);Ue.uniform1iv(Xt(v),H)}},Vc:function(v,I,j){Ue.uniform2f(Xt(v),I,j)},Wc:function(v,I,j){if(2<=He.version)I&&Ue.uniform2fv(Xt(v),be,j>>2,2*I);else{if(144>=I)for(var H=Bn[2*I-1],re=0;re<2*I;re+=2)H[re]=be[j+4*re>>2],H[re+1]=be[j+(4*re+4)>>2];else H=be.subarray(j>>2,j+8*I>>2);Ue.uniform2fv(Xt(v),H)}},Sc:function(v,I,j){Ue.uniform2i(Xt(v),I,j)},Rc:function(v,I,j){if(2<=He.version)I&&Ue.uniform2iv(Xt(v),Q,j>>2,2*I);else{if(144>=I)for(var H=Fn[2*I-1],re=0;re<2*I;re+=2)H[re]=Q[j+4*re>>2],H[re+1]=Q[j+(4*re+4)>>2];else H=Q.subarray(j>>2,j+8*I>>2);Ue.uniform2iv(Xt(v),H)}},Qc:function(v,I,j,H){Ue.uniform3f(Xt(v),I,j,H)},Pc:function(v,I,j){if(2<=He.version)I&&Ue.uniform3fv(Xt(v),be,j>>2,3*I);else{if(96>=I)for(var H=Bn[3*I-1],re=0;re<3*I;re+=3)H[re]=be[j+4*re>>2],H[re+1]=be[j+(4*re+4)>>2],H[re+2]=be[j+(4*re+8)>>2];else H=be.subarray(j>>2,j+12*I>>2);Ue.uniform3fv(Xt(v),H)}},Oc:function(v,I,j,H){Ue.uniform3i(Xt(v),I,j,H)},Nc:function(v,I,j){if(2<=He.version)I&&Ue.uniform3iv(Xt(v),Q,j>>2,3*I);else{if(96>=I)for(var H=Fn[3*I-1],re=0;re<3*I;re+=3)H[re]=Q[j+4*re>>2],H[re+1]=Q[j+(4*re+4)>>2],H[re+2]=Q[j+(4*re+8)>>2];else H=Q.subarray(j>>2,j+12*I>>2);Ue.uniform3iv(Xt(v),H)}},Mc:function(v,I,j,H,re){Ue.uniform4f(Xt(v),I,j,H,re)},Lc:function(v,I,j){if(2<=He.version)I&&Ue.uniform4fv(Xt(v),be,j>>2,4*I);else{if(72>=I){var H=Bn[4*I-1],re=be;j>>=2;for(var _e=0;_e<4*I;_e+=4){var fe=j+_e;H[_e]=re[fe],H[_e+1]=re[fe+1],H[_e+2]=re[fe+2],H[_e+3]=re[fe+3]}}else H=be.subarray(j>>2,j+16*I>>2);Ue.uniform4fv(Xt(v),H)}},zc:function(v,I,j,H,re){Ue.uniform4i(Xt(v),I,j,H,re)},Ac:function(v,I,j){if(2<=He.version)I&&Ue.uniform4iv(Xt(v),Q,j>>2,4*I);else{if(72>=I)for(var H=Fn[4*I-1],re=0;re<4*I;re+=4)H[re]=Q[j+4*re>>2],H[re+1]=Q[j+(4*re+4)>>2],H[re+2]=Q[j+(4*re+8)>>2],H[re+3]=Q[j+(4*re+12)>>2];else H=Q.subarray(j>>2,j+16*I>>2);Ue.uniform4iv(Xt(v),H)}},Bc:function(v,I,j,H){if(2<=He.version)I&&Ue.uniformMatrix2fv(Xt(v),!!j,be,H>>2,4*I);else{if(72>=I)for(var re=Bn[4*I-1],_e=0;_e<4*I;_e+=4)re[_e]=be[H+4*_e>>2],re[_e+1]=be[H+(4*_e+4)>>2],re[_e+2]=be[H+(4*_e+8)>>2],re[_e+3]=be[H+(4*_e+12)>>2];else re=be.subarray(H>>2,H+16*I>>2);Ue.uniformMatrix2fv(Xt(v),!!j,re)}},Cc:function(v,I,j,H){if(2<=He.version)I&&Ue.uniformMatrix3fv(Xt(v),!!j,be,H>>2,9*I);else{if(32>=I)for(var re=Bn[9*I-1],_e=0;_e<9*I;_e+=9)re[_e]=be[H+4*_e>>2],re[_e+1]=be[H+(4*_e+4)>>2],re[_e+2]=be[H+(4*_e+8)>>2],re[_e+3]=be[H+(4*_e+12)>>2],re[_e+4]=be[H+(4*_e+16)>>2],re[_e+5]=be[H+(4*_e+20)>>2],re[_e+6]=be[H+(4*_e+24)>>2],re[_e+7]=be[H+(4*_e+28)>>2],re[_e+8]=be[H+(4*_e+32)>>2];else re=be.subarray(H>>2,H+36*I>>2);Ue.uniformMatrix3fv(Xt(v),!!j,re)}},Dc:function(v,I,j,H){if(2<=He.version)I&&Ue.uniformMatrix4fv(Xt(v),!!j,be,H>>2,16*I);else{if(18>=I){var re=Bn[16*I-1],_e=be;H>>=2;for(var fe=0;fe<16*I;fe+=16){var ge=H+fe;re[fe]=_e[ge],re[fe+1]=_e[ge+1],re[fe+2]=_e[ge+2],re[fe+3]=_e[ge+3],re[fe+4]=_e[ge+4],re[fe+5]=_e[ge+5],re[fe+6]=_e[ge+6],re[fe+7]=_e[ge+7],re[fe+8]=_e[ge+8],re[fe+9]=_e[ge+9],re[fe+10]=_e[ge+10],re[fe+11]=_e[ge+11],re[fe+12]=_e[ge+12],re[fe+13]=_e[ge+13],re[fe+14]=_e[ge+14],re[fe+15]=_e[ge+15]}}else re=be.subarray(H>>2,H+64*I>>2);Ue.uniformMatrix4fv(Xt(v),!!j,re)}},Ec:function(v){v=On[v],Ue.useProgram(v),Ue.xf=v},Fc:function(v,I){Ue.vertexAttrib1f(v,I)},Gc:function(v,I){Ue.vertexAttrib2f(v,be[I>>2],be[I+4>>2])},Hc:function(v,I){Ue.vertexAttrib3f(v,be[I>>2],be[I+4>>2],be[I+8>>2])},Ic:function(v,I){Ue.vertexAttrib4f(v,be[I>>2],be[I+4>>2],be[I+8>>2],be[I+12>>2])},jc:function(v,I){Ue.vertexAttribDivisor(v,I)},kc:function(v,I,j,H,re){Ue.vertexAttribIPointer(v,I,j,H,re)},Jc:function(v,I,j,H,re,_e){Ue.vertexAttribPointer(v,I,j,!!H,re,_e)},Kc:function(v,I,j,H){Ue.viewport(v,I,j,H)},db:function(v,I,j,H){Ue.waitSync(qn[v],I,(j>>>0)+4294967296*H)},nb:function(v){var I=Y.length;if(2147483648<(v>>>=0))return!1;for(var j=1;4>=j;j*=2){var H=I*(1+.2/j);H=Math.min(H,v+100663296);var re=Math,_e=re.min;H=Math.max(v,H),H+=(65536-H%65536)%65536;e:{var fe=z.buffer;try{z.grow(_e.call(re,2147483648,H)-fe.byteLength+65535>>>16),de();var ge=1;break e}catch{}ge=void 0}if(ge)return!0}return!1},Yc:function(){return He?He.Jf:0},Q:function(v){return Ee(v)?0:-5},sb:function(v,I){var j=0;return yr().forEach((function(H,re){var _e=I+j;for(re=ce[v+4*re>>2]=_e,_e=0;_e<H.length;++_e)L[re++>>0]=H.charCodeAt(_e);L[re>>0]=0,j+=H.length+1})),0},tb:function(v,I){var j=yr();ce[v>>2]=j.length;var H=0;return j.forEach((function(re){H+=re.length+1})),ce[I>>2]=H,0},Eb:function(v){b(v,new V(v))},I:function(){return 52},ib:function(){return 52},yb:function(){return 52},jb:function(){return 70},G:function(v,I,j,H){for(var re=0,_e=0;_e<j;_e++){var fe=ce[I>>2],ge=ce[I+4>>2];I+=8;for(var Le=0;Le<ge;Le++){var Oe=Y[fe+Le],gt=Br[v];Oe===0||Oe===10?((v===1?R:B)(Ve(gt,0)),gt.length=0):gt.push(Oe)}re+=ge}return ce[H>>2]=re,0},Zc:function(v,I){Ue.bindFramebuffer(v,mr[I])},Xa:function(v){Ue.clear(v)},wb:function(v,I,j,H){Ue.clearColor(v,I,j,H)},eb:function(v){Ue.clearStencil(v)},E:function(v,I){Wt(v,I)},f:function(v,I){var j=wn();try{return Qt(v)(I)}catch(H){if(vn(j),H!==H+0)throw H;Mn(1,0)}},j:function(v,I,j){var H=wn();try{return Qt(v)(I,j)}catch(re){if(vn(H),re!==re+0)throw re;Mn(1,0)}},d:function(v,I,j,H){var re=wn();try{return Qt(v)(I,j,H)}catch(_e){if(vn(re),_e!==_e+0)throw _e;Mn(1,0)}},z:function(v,I,j,H,re){var _e=wn();try{return Qt(v)(I,j,H,re)}catch(fe){if(vn(_e),fe!==fe+0)throw fe;Mn(1,0)}},Ib:function(v,I,j,H,re,_e){var fe=wn();try{return Qt(v)(I,j,H,re,_e)}catch(ge){if(vn(fe),ge!==ge+0)throw ge;Mn(1,0)}},N:function(v,I,j,H,re,_e,fe){var ge=wn();try{return Qt(v)(I,j,H,re,_e,fe)}catch(Le){if(vn(ge),Le!==Le+0)throw Le;Mn(1,0)}},M:function(v,I,j,H,re,_e,fe,ge,Le,Oe){var gt=wn();try{return Qt(v)(I,j,H,re,_e,fe,ge,Le,Oe)}catch(Tt){if(vn(gt),Tt!==Tt+0)throw Tt;Mn(1,0)}},C:function(v){var I=wn();try{Qt(v)()}catch(j){if(vn(I),j!==j+0)throw j;Mn(1,0)}},h:function(v,I){var j=wn();try{Qt(v)(I)}catch(H){if(vn(j),H!==H+0)throw H;Mn(1,0)}},m:function(v,I,j){var H=wn();try{Qt(v)(I,j)}catch(re){if(vn(H),re!==re+0)throw re;Mn(1,0)}},e:function(v,I,j,H){var re=wn();try{Qt(v)(I,j,H)}catch(_e){if(vn(re),_e!==_e+0)throw _e;Mn(1,0)}},l:function(v,I,j,H,re){var _e=wn();try{Qt(v)(I,j,H,re)}catch(fe){if(vn(_e),fe!==fe+0)throw fe;Mn(1,0)}},Hb:function(v,I,j,H,re,_e){var fe=wn();try{Qt(v)(I,j,H,re,_e)}catch(ge){if(vn(fe),ge!==ge+0)throw ge;Mn(1,0)}},Fb:function(v,I,j,H,re,_e,fe){var ge=wn();try{Qt(v)(I,j,H,re,_e,fe)}catch(Le){if(vn(ge),Le!==Le+0)throw Le;Mn(1,0)}},Gb:function(v,I,j,H,re,_e,fe,ge,Le,Oe){var gt=wn();try{Qt(v)(I,j,H,re,_e,fe,ge,Le,Oe)}catch(Tt){if(vn(gt),Tt!==Tt+0)throw Tt;Mn(1,0)}},lb:function(v,I,j,H){return(function(re,_e,fe,ge){function Le(N,U,K){for(N=typeof N=="number"?N.toString():N||"";N.length<U;)N=K[0]+N;return N}function Oe(N,U){return Le(N,U,"0")}function gt(N,U){function K(J){return 0>J?-1:0<J?1:0}var Z;return(Z=K(N.getFullYear()-U.getFullYear()))===0&&(Z=K(N.getMonth()-U.getMonth()))===0&&(Z=K(N.getDate()-U.getDate())),Z}function Tt(N){switch(N.getDay()){case 0:return new Date(N.getFullYear()-1,11,29);case 1:return N;case 2:return new Date(N.getFullYear(),0,3);case 3:return new Date(N.getFullYear(),0,2);case 4:return new Date(N.getFullYear(),0,1);case 5:return new Date(N.getFullYear()-1,11,31);case 6:return new Date(N.getFullYear()-1,11,30)}}function Ot(N){var U=N.fe;for(N=new Date(new Date(N.ge+1900,0,1).getTime());0<U;){var K=N.getMonth(),Z=(xr(N.getFullYear())?kr:Fr)[K];if(!(U>Z-N.getDate())){N.setDate(N.getDate()+U);break}U-=Z-N.getDate()+1,N.setDate(1),11>K?N.setMonth(K+1):(N.setMonth(0),N.setFullYear(N.getFullYear()+1))}return K=new Date(N.getFullYear()+1,0,4),U=Tt(new Date(N.getFullYear(),0,4)),K=Tt(K),0>=gt(U,N)?0>=gt(K,N)?N.getFullYear()+1:N.getFullYear():N.getFullYear()-1}var Pt=Q[ge+40>>2];for(var Et in ge={eg:Q[ge>>2],dg:Q[ge+4>>2],Re:Q[ge+8>>2],af:Q[ge+12>>2],Se:Q[ge+16>>2],ge:Q[ge+20>>2],Zd:Q[ge+24>>2],fe:Q[ge+28>>2],kg:Q[ge+32>>2],cg:Q[ge+36>>2],fg:Pt?st(Pt):""},fe=st(fe),Pt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})fe=fe.replace(new RegExp(Et,"g"),Pt[Et]);var Ht="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),w="January February March April May June July August September October November December".split(" ");for(Et in Pt={"%a":function(N){return Ht[N.Zd].substring(0,3)},"%A":function(N){return Ht[N.Zd]},"%b":function(N){return w[N.Se].substring(0,3)},"%B":function(N){return w[N.Se]},"%C":function(N){return Oe((N.ge+1900)/100|0,2)},"%d":function(N){return Oe(N.af,2)},"%e":function(N){return Le(N.af,2," ")},"%g":function(N){return Ot(N).toString().substring(2)},"%G":function(N){return Ot(N)},"%H":function(N){return Oe(N.Re,2)},"%I":function(N){return(N=N.Re)==0?N=12:12<N&&(N-=12),Oe(N,2)},"%j":function(N){for(var U=0,K=0;K<=N.Se-1;U+=(xr(N.ge+1900)?kr:Fr)[K++]);return Oe(N.af+U,3)},"%m":function(N){return Oe(N.Se+1,2)},"%M":function(N){return Oe(N.dg,2)},"%n":function(){return`
`},"%p":function(N){return 0<=N.Re&&12>N.Re?"AM":"PM"},"%S":function(N){return Oe(N.eg,2)},"%t":function(){return"	"},"%u":function(N){return N.Zd||7},"%U":function(N){return Oe(Math.floor((N.fe+7-N.Zd)/7),2)},"%V":function(N){var U=Math.floor((N.fe+7-(N.Zd+6)%7)/7);if(2>=(N.Zd+371-N.fe-2)%7&&U++,U)U==53&&((K=(N.Zd+371-N.fe)%7)==4||K==3&&xr(N.ge)||(U=1));else{U=52;var K=(N.Zd+7-N.fe-1)%7;(K==4||K==5&&xr(N.ge%400-1))&&U++}return Oe(U,2)},"%w":function(N){return N.Zd},"%W":function(N){return Oe(Math.floor((N.fe+7-(N.Zd+6)%7)/7),2)},"%y":function(N){return(N.ge+1900).toString().substring(2)},"%Y":function(N){return N.ge+1900},"%z":function(N){var U=0<=(N=N.cg);return N=Math.abs(N)/60,(U?"+":"-")+("0000"+(N/60*100+N%60)).slice(-4)},"%Z":function(N){return N.fg},"%%":function(){return"%"}},fe=fe.replace(/%%/g,"\0\0"),Pt)fe.includes(Et)&&(fe=fe.replace(new RegExp(Et,"g"),Pt[Et](ge)));return Et=(function(N){var U=Array(he(N)+1);return tt(N,U,0,U.length),U})(fe=fe.replace(/\0\0/g,"%")),Et.length>_e?0:(L.set(Et,re),Et.length-1)})(v,I,j,H)}};(function(){function v(re){r.asm=re.exports,z=r.asm._c,de(),ze=r.asm.ad,A.unshift(r.asm.$c),le--,r.monitorRunDependencies&&r.monitorRunDependencies(le),le==0&&Ne&&(re=Ne,Ne=null,re())}function I(re){v(re.instance)}function j(re){return(function(){if(!T&&(E||x)){if(typeof fetch=="function"&&!ae.startsWith("file://"))return fetch(ae,{credentials:"same-origin"}).then((function(_e){if(!_e.ok)throw"failed to load wasm binary file at '"+ae+"'";return _e.arrayBuffer()})).catch((function(){return F()}));if(f)return new Promise((function(_e,fe){f(ae,(function(ge){_e(new Uint8Array(ge))}),fe)}))}return Promise.resolve().then((function(){return F()}))})().then((function(_e){return WebAssembly.instantiate(_e,H)})).then((function(_e){return _e})).then(re,(function(_e){B("failed to asynchronously prepare wasm: "+_e),De(_e)}))}var H={a:Nr};if(le++,r.monitorRunDependencies&&r.monitorRunDependencies(le),r.instantiateWasm)try{return r.instantiateWasm(H,v)}catch(re){B("Module.instantiateWasm callback failed with error: "+re),t(re)}(T||typeof WebAssembly.instantiateStreaming!="function"||Ye()||ae.startsWith("file://")||M||typeof fetch!="function"?j(I):fetch(ae,{credentials:"same-origin"}).then((function(re){return WebAssembly.instantiateStreaming(re,H).then(I,(function(_e){return B("wasm streaming compile failed: "+_e),B("falling back to ArrayBuffer instantiation"),j(I)}))}))).catch(t)})();var ur,Kt=r._free=function(){return(Kt=r._free=r.asm.bd).apply(null,arguments)},rr=r._malloc=function(){return(rr=r._malloc=r.asm.cd).apply(null,arguments)},ir=r.___getTypeName=function(){return(ir=r.___getTypeName=r.asm.dd).apply(null,arguments)};function Mn(){return(Mn=r.asm.fd).apply(null,arguments)}function wn(){return(wn=r.asm.gd).apply(null,arguments)}function vn(){return(vn=r.asm.hd).apply(null,arguments)}function Ir(){function v(){if(!ur&&(ur=!0,r.calledRun=!0,!we)){if(ne(A),n(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var I=r.postRun.shift();D.unshift(I)}ne(D)}}if(!(0<le)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)W();ne(P),0<le||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),v()}),1)):v())}}if(r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm.ed).apply(null,arguments)},r.dynCall_viji=function(){return(r.dynCall_viji=r.asm.id).apply(null,arguments)},r.dynCall_vijiii=function(){return(r.dynCall_vijiii=r.asm.jd).apply(null,arguments)},r.dynCall_viiiiij=function(){return(r.dynCall_viiiiij=r.asm.kd).apply(null,arguments)},r.dynCall_ji=function(){return(r.dynCall_ji=r.asm.ld).apply(null,arguments)},r.dynCall_jii=function(){return(r.dynCall_jii=r.asm.md).apply(null,arguments)},r.dynCall_iiij=function(){return(r.dynCall_iiij=r.asm.nd).apply(null,arguments)},r.dynCall_iiiij=function(){return(r.dynCall_iiiij=r.asm.od).apply(null,arguments)},r.dynCall_viij=function(){return(r.dynCall_viij=r.asm.pd).apply(null,arguments)},r.dynCall_viiij=function(){return(r.dynCall_viiij=r.asm.qd).apply(null,arguments)},r.dynCall_iij=function(){return(r.dynCall_iij=r.asm.rd).apply(null,arguments)},r.dynCall_vij=function(){return(r.dynCall_vij=r.asm.sd).apply(null,arguments)},r.dynCall_jiiii=function(){return(r.dynCall_jiiii=r.asm.td).apply(null,arguments)},r.dynCall_jiiiiii=function(){return(r.dynCall_jiiiiii=r.asm.ud).apply(null,arguments)},r.dynCall_jiiiiji=function(){return(r.dynCall_jiiiiji=r.asm.vd).apply(null,arguments)},r.dynCall_iijj=function(){return(r.dynCall_iijj=r.asm.wd).apply(null,arguments)},r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.xd).apply(null,arguments)},r.dynCall_viijii=function(){return(r.dynCall_viijii=r.asm.yd).apply(null,arguments)},r.dynCall_iiiiij=function(){return(r.dynCall_iiiiij=r.asm.zd).apply(null,arguments)},r.dynCall_iiiiijj=function(){return(r.dynCall_iiiiijj=r.asm.Ad).apply(null,arguments)},r.dynCall_iiiiiijj=function(){return(r.dynCall_iiiiiijj=r.asm.Bd).apply(null,arguments)},Ne=function v(){ur||Ir(),ur||(Ne=v)},r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();return Ir(),a.ready});_.exports=s},2331:(_,l,o)=>{let c=o(4472);c="default"in c?c.default:c,_.exports=function(d){const m=JSON.parse(d.tilePieceBoundingBox),h=JSON.parse(d.tileBoundingBox),s=d.height,a=d.width,r=new Uint8ClampedArray(a*s*4),n=new Uint8ClampedArray(d.sourceImageData);let t,i;try{c.defs(d.projectionTo)==null&&c.defs(d.projectionTo,d.projectionToDefinition),c.defs(d.projectionFrom)==null&&c.defs(d.projectionFrom,d.projectionFromDefinition),t=c(d.projectionTo,d.projectionFrom)}catch{throw new Error("Error creating projection conversion between "+d.projectionTo+" and "+d.projectionFrom+".")}for(let u=0;u<s;u++){i=h._maxLatitude-u*d.tileHeightUnitsPerPixel;for(let f=0;f<a;f++){const p=h._minLongitude+f*d.tileWidthUnitsPerPixel,y=t.forward([p,i]),g=y[0],b=y[1],E=d.tile_width-Math.round((m._maxLongitude-g)/d.pixel_x_size),x=Math.round((m._maxLatitude-b)/d.pixel_y_size);if(E>=0&&E<d.tile_width&&x>=0&&x<d.tile_height){const M=x*d.tile_width*4+4*E,S=n.slice(M,M+4);r.set(S,u*a*4+4*f)}}}return r.buffer}},824:(_,l,o)=>{o.r(l),o.d(l,{TileUtilities:()=>m});var c=o(1375),d=o(5604);class m{static getPiecePosition(s,a,r,n,t,i,u,f,p,y,g,b){let E;try{d.Projection.hasProjection(t)==null&&d.Projection.loadProjection(t,i),d.Projection.hasProjection(u)==null&&d.Projection.loadProjection(u,f),E=d.Projection.getConverter(t,u)}catch{throw new Error("Error creating projection conversion between "+t+" and "+u+".")}let x=s.maxLatitude,M=s.minLatitude,S=s.minLongitude-g,O=s.maxLongitude+g;t.toUpperCase()===c.ProjectionConstants.EPSG_3857&&u.toUpperCase()===c.ProjectionConstants.EPSG_4326&&(x=x>c.ProjectionConstants.WEB_MERCATOR_MAX_LAT_RANGE?c.ProjectionConstants.WEB_MERCATOR_MAX_LAT_RANGE:x,M=M<c.ProjectionConstants.WEB_MERCATOR_MIN_LAT_RANGE?c.ProjectionConstants.WEB_MERCATOR_MIN_LAT_RANGE:M,S=S<c.ProjectionConstants.WEB_MERCATOR_MIN_LON_RANGE?c.ProjectionConstants.WEB_MERCATOR_MIN_LON_RANGE:S,O=O>c.ProjectionConstants.WEB_MERCATOR_MAX_LON_RANGE?c.ProjectionConstants.WEB_MERCATOR_MAX_LON_RANGE:O);const C=d.Projection.convertCoordinates(c.ProjectionConstants.EPSG_4326,t,[-180,0]),T=d.Projection.convertCoordinates(c.ProjectionConstants.EPSG_4326,t,[180,0]);S=S<C[0]?C[0]:S,O=O>T[0]?T[0]:O;const R=E.inverse([S,M]),B=E.inverse([O,x]),z=isNaN(R[1])?a.minLatitude:R[1],L=isNaN(B[1])?a.maxLatitude:B[1],Y=R[0],ie=B[0];return{startY:Math.max(0,Math.floor((a.maxLatitude-L)/p)),startX:Math.max(0,Math.floor((Y-a.minLongitude)/y)),endY:Math.min(r,r-Math.floor((z-a.minLatitude)/p)),endX:Math.min(n,n-Math.floor((a.maxLongitude-ie)/y))}}}},7591:(_,l,o)=>{var c=o(5108);const d=o(2331);function m(h){const s=h.data,a=d(s);this.postMessage(a),this.close()}_.exports=function(h){h.onmessage=m,h.onerror=function(s){c.log("error",s)}}},9705:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(1540);function d(m){var h=[1/0,1/0,-1/0,-1/0];return c.coordEach(m,(function(s){h[0]>s[0]&&(h[0]=s[0]),h[1]>s[1]&&(h[1]=s[1]),h[2]<s[0]&&(h[2]=s[0]),h[3]<s[1]&&(h[3]=s[1])})),h}d.default=d,l.default=d},3809:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(611);l.default=function(d){for(var m,h,s=c.getCoords(d),a=0,r=1;r<s.length;)m=h||s[0],a+=((h=s[r])[0]-m[0])*(h[1]+m[1]),r++;return a>0}},8147:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(611);function d(m,h,s){var a=!1;h[0][0]===h[h.length-1][0]&&h[0][1]===h[h.length-1][1]&&(h=h.slice(0,h.length-1));for(var r=0,n=h.length-1;r<h.length;n=r++){var t=h[r][0],i=h[r][1],u=h[n][0],f=h[n][1];if(m[1]*(t-u)+i*(u-m[0])+f*(m[0]-t)==0&&(t-m[0])*(u-m[0])<=0&&(i-m[1])*(f-m[1])<=0)return!s;i>m[1]!=f>m[1]&&m[0]<(u-t)*(m[1]-i)/(f-i)+t&&(a=!a)}return a}l.default=function(m,h,s){if(s===void 0&&(s={}),!m)throw new Error("point is required");if(!h)throw new Error("polygon is required");var a=c.getCoord(m),r=c.getGeom(h),n=r.type,t=h.bbox,i=r.coordinates;if(t&&(function(g,b){return b[0]<=g[0]&&b[1]<=g[1]&&b[2]>=g[0]&&b[3]>=g[1]})(a,t)===!1)return!1;n==="Polygon"&&(i=[i]);for(var u=!1,f=0;f<i.length&&!u;f++)if(d(a,i[f][0],s.ignoreBoundary)){for(var p=!1,y=1;y<i[f].length&&!p;)d(a,i[f][y],!s.ignoreBoundary)&&(p=!0),y++;p||(u=!0)}return u}},2793:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(611);function d(m,h,s,a,r){var n=s[0],t=s[1],i=m[0],u=m[1],f=h[0],p=h[1],y=f-i,g=p-u,b=(s[0]-i)*g-(s[1]-u)*y;if(r!==null){if(Math.abs(b)>r)return!1}else if(b!==0)return!1;return a?a==="start"?Math.abs(y)>=Math.abs(g)?y>0?i<n&&n<=f:f<=n&&n<i:g>0?u<t&&t<=p:p<=t&&t<u:a==="end"?Math.abs(y)>=Math.abs(g)?y>0?i<=n&&n<f:f<n&&n<=i:g>0?u<=t&&t<p:p<t&&t<=u:a==="both"&&(Math.abs(y)>=Math.abs(g)?y>0?i<n&&n<f:f<n&&n<i:g>0?u<t&&t<p:p<t&&t<u):Math.abs(y)>=Math.abs(g)?y>0?i<=n&&n<=f:f<=n&&n<=i:g>0?u<=t&&t<=p:p<=t&&t<=u}l.default=function(m,h,s){s===void 0&&(s={});for(var a=c.getCoord(m),r=c.getCoords(h),n=0;n<r.length-1;n++){var t=!1;if(s.ignoreEndVertices&&(n===0&&(t="start"),n===r.length-2&&(t="end"),n===0&&n+1===r.length-1&&(t="both")),d(r[n],r[n+1],a,t,s.epsilon===void 0?null:s.epsilon))return!0}return!1}},5184:function(_,l,o){var c=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});var d=c(o(7906)),m=c(o(2793)),h=c(o(8147)),s=o(611);function a(n,t){return!(n[0]>t[0]||n[2]<t[2]||n[1]>t[1]||n[3]<t[3])}function r(n,t){return n[0]===t[0]&&n[1]===t[1]}l.default=function(n,t){var i=s.getGeom(n),u=s.getGeom(t),f=i.type,p=u.type;switch(f){case"Point":switch(p){case"MultiPoint":return(function(y,g){var b,E=!1;for(b=0;b<g.coordinates.length;b++)if(r(g.coordinates[b],y.coordinates)){E=!0;break}return E})(i,u);case"LineString":return m.default(i,u,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return h.default(i,u,{ignoreBoundary:!0});default:throw new Error("feature2 "+p+" geometry not supported")}case"MultiPoint":switch(p){case"MultiPoint":return(function(y,g){for(var b=0;b<y.coordinates.length;b++){for(var E=!1,x=0;x<g.coordinates.length;x++)r(y.coordinates[b],g.coordinates[x])&&(E=!0);if(!E)return!1}return!0})(i,u);case"LineString":return(function(y,g){for(var b=!1,E=0;E<y.coordinates.length;E++){if(!m.default(y.coordinates[E],g))return!1;b||(b=m.default(y.coordinates[E],g,{ignoreEndVertices:!0}))}return b})(i,u);case"Polygon":case"MultiPolygon":return(function(y,g){for(var b=!0,E=!1,x=0;x<y.coordinates.length;x++){if(!(E=h.default(y.coordinates[1],g))){b=!1;break}E=h.default(y.coordinates[1],g,{ignoreBoundary:!0})}return b&&E})(i,u);default:throw new Error("feature2 "+p+" geometry not supported")}case"LineString":switch(p){case"LineString":return(function(y,g){for(var b=0;b<y.coordinates.length;b++)if(!m.default(y.coordinates[b],g))return!1;return!0})(i,u);case"Polygon":case"MultiPolygon":return(function(y,g){var b,E;if(!a(d.default(g),d.default(y)))return!1;for(var x=!1,M=0;M<y.coordinates.length-1;M++){if(!h.default(y.coordinates[M],g))return!1;if(x||(x=h.default(y.coordinates[M],g,{ignoreBoundary:!0})),!x){var S=(b=y.coordinates[M],E=y.coordinates[M+1],[(b[0]+E[0])/2,(b[1]+E[1])/2]);x=h.default(S,g,{ignoreBoundary:!0})}}return x})(i,u);default:throw new Error("feature2 "+p+" geometry not supported")}case"Polygon":switch(p){case"Polygon":case"MultiPolygon":return(function(y,g){var b=d.default(y);if(!a(d.default(g),b))return!1;for(var E=0;E<y.coordinates[0].length;E++)if(!h.default(y.coordinates[0][E],g))return!1;return!0})(i,u);default:throw new Error("feature2 "+p+" geometry not supported")}default:throw new Error("feature1 "+f+" geometry not supported")}}},7906:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(1540);function d(m){var h=[1/0,1/0,-1/0,-1/0];return c.coordEach(m,(function(s){h[0]>s[0]&&(h[0]=s[0]),h[1]>s[1]&&(h[1]=s[1]),h[2]<s[0]&&(h[2]=s[0]),h[3]<s[1]&&(h[3]=s[1])})),h}d.default=d,l.default=d},1013:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(611),d=o(4102);l.default=function(m,h,s){s===void 0&&(s={});var a=c.getCoord(m),r=c.getCoord(h),n=d.degreesToRadians(r[1]-a[1]),t=d.degreesToRadians(r[0]-a[0]),i=d.degreesToRadians(a[1]),u=d.degreesToRadians(r[1]),f=Math.pow(Math.sin(n/2),2)+Math.pow(Math.sin(t/2),2)*Math.cos(i)*Math.cos(u);return d.radiansToLength(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),s.units)}},4102:(_,l)=>{function o(f,p,y){y===void 0&&(y={});var g={type:"Feature"};return(y.id===0||y.id)&&(g.id=y.id),y.bbox&&(g.bbox=y.bbox),g.properties=p||{},g.geometry=f,g}function c(f,p,y){if(y===void 0&&(y={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!u(f[0])||!u(f[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:f},p,y)}function d(f,p,y){y===void 0&&(y={});for(var g=0,b=f;g<b.length;g++){var E=b[g];if(E.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<E[E.length-1].length;x++)if(E[E.length-1][x]!==E[0][x])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:f},p,y)}function m(f,p,y){if(y===void 0&&(y={}),f.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:f},p,y)}function h(f,p){p===void 0&&(p={});var y={type:"FeatureCollection"};return p.id&&(y.id=p.id),p.bbox&&(y.bbox=p.bbox),y.features=f,y}function s(f,p,y){return y===void 0&&(y={}),o({type:"MultiLineString",coordinates:f},p,y)}function a(f,p,y){return y===void 0&&(y={}),o({type:"MultiPoint",coordinates:f},p,y)}function r(f,p,y){return y===void 0&&(y={}),o({type:"MultiPolygon",coordinates:f},p,y)}function n(f,p){p===void 0&&(p="kilometers");var y=l.factors[p];if(!y)throw new Error(p+" units is invalid");return f*y}function t(f,p){p===void 0&&(p="kilometers");var y=l.factors[p];if(!y)throw new Error(p+" units is invalid");return f/y}function i(f){return f%(2*Math.PI)*180/Math.PI}function u(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}Object.defineProperty(l,"__esModule",{value:!0}),l.earthRadius=63710088e-1,l.factors={centimeters:100*l.earthRadius,centimetres:100*l.earthRadius,degrees:l.earthRadius/111325,feet:3.28084*l.earthRadius,inches:39.37*l.earthRadius,kilometers:l.earthRadius/1e3,kilometres:l.earthRadius/1e3,meters:l.earthRadius,metres:l.earthRadius,miles:l.earthRadius/1609.344,millimeters:1e3*l.earthRadius,millimetres:1e3*l.earthRadius,nauticalmiles:l.earthRadius/1852,radians:1,yards:1.0936*l.earthRadius},l.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/l.earthRadius,yards:1.0936133},l.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},l.feature=o,l.geometry=function(f,p,y){switch(f){case"Point":return c(p).geometry;case"LineString":return m(p).geometry;case"Polygon":return d(p).geometry;case"MultiPoint":return a(p).geometry;case"MultiLineString":return s(p).geometry;case"MultiPolygon":return r(p).geometry;default:throw new Error(f+" is invalid")}},l.point=c,l.points=function(f,p,y){return y===void 0&&(y={}),h(f.map((function(g){return c(g,p)})),y)},l.polygon=d,l.polygons=function(f,p,y){return y===void 0&&(y={}),h(f.map((function(g){return d(g,p)})),y)},l.lineString=m,l.lineStrings=function(f,p,y){return y===void 0&&(y={}),h(f.map((function(g){return m(g,p)})),y)},l.featureCollection=h,l.multiLineString=s,l.multiPoint=a,l.multiPolygon=r,l.geometryCollection=function(f,p,y){return y===void 0&&(y={}),o({type:"GeometryCollection",geometries:f},p,y)},l.round=function(f,p){if(p===void 0&&(p=0),p&&!(p>=0))throw new Error("precision must be a positive number");var y=Math.pow(10,p||0);return Math.round(f*y)/y},l.radiansToLength=n,l.lengthToRadians=t,l.lengthToDegrees=function(f,p){return i(t(f,p))},l.bearingToAzimuth=function(f){var p=f%360;return p<0&&(p+=360),p},l.radiansToDegrees=i,l.degreesToRadians=function(f){return f%360*Math.PI/180},l.convertLength=function(f,p,y){if(p===void 0&&(p="kilometers"),y===void 0&&(y="kilometers"),!(f>=0))throw new Error("length must be a positive number");return n(t(f,p),y)},l.convertArea=function(f,p,y){if(p===void 0&&(p="meters"),y===void 0&&(y="kilometers"),!(f>=0))throw new Error("area must be a positive number");var g=l.areaFactors[p];if(!g)throw new Error("invalid original units");var b=l.areaFactors[y];if(!b)throw new Error("invalid final units");return f/g*b},l.isNumber=u,l.isObject=function(f){return!!f&&f.constructor===Object},l.validateBBox=function(f){if(!f)throw new Error("bbox is required");if(!Array.isArray(f))throw new Error("bbox must be an Array");if(f.length!==4&&f.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");f.forEach((function(p){if(!u(p))throw new Error("bbox must only contain numbers")}))},l.validateId=function(f){if(!f)throw new Error("id is required");if(["string","number"].indexOf(typeof f)===-1)throw new Error("id must be a number or a string")}},4170:function(_,l,o){var c=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});var d=o(4102),m=o(611),h=c(o(2676));l.default=function(s,a,r){r===void 0&&(r={});var n=m.getGeom(s),t=m.getGeom(a),i=h.default.intersection(n.coordinates,t.coordinates);return i.length===0?null:i.length===1?d.polygon(i[0],r.properties):d.multiPolygon(i,r.properties)}},611:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(4102);l.getCoord=function(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")},l.getCoords=function(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},l.containsNumber=function d(m){if(m.length>1&&c.isNumber(m[0])&&c.isNumber(m[1]))return!0;if(Array.isArray(m[0])&&m[0].length)return d(m[0]);throw new Error("coordinates must only contain numbers")},l.geojsonType=function(d,m,h){if(!m||!h)throw new Error("type and name required");if(!d||d.type!==m)throw new Error("Invalid input to "+h+": must be a "+m+", given "+d.type)},l.featureOf=function(d,m,h){if(!d)throw new Error("No feature passed");if(!h)throw new Error(".featureOf() requires a name");if(!d||d.type!=="Feature"||!d.geometry)throw new Error("Invalid input to "+h+", Feature with geometry required");if(!d.geometry||d.geometry.type!==m)throw new Error("Invalid input to "+h+": must be a "+m+", given "+d.geometry.type)},l.collectionOf=function(d,m,h){if(!d)throw new Error("No featureCollection passed");if(!h)throw new Error(".collectionOf() requires a name");if(!d||d.type!=="FeatureCollection")throw new Error("Invalid input to "+h+", FeatureCollection required");for(var s=0,a=d.features;s<a.length;s++){var r=a[s];if(!r||r.type!=="Feature"||!r.geometry)throw new Error("Invalid input to "+h+", Feature with geometry required");if(!r.geometry||r.geometry.type!==m)throw new Error("Invalid input to "+h+": must be a "+m+", given "+r.geometry.type)}},l.getGeom=function(d){return d.type==="Feature"?d.geometry:d},l.getType=function(d,m){return d.type==="FeatureCollection"?"FeatureCollection":d.type==="GeometryCollection"?"GeometryCollection":d.type==="Feature"&&d.geometry!==null?d.geometry.type:d.type}},3663:function(_,l,o){var c=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});var d=o(4102),m=o(611),h=c(o(4590)),s=o(1540),a=c(o(1787));function r(n,t){var i=m.getCoords(n),u=m.getCoords(t);if(i.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(u.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var f=i[0][0],p=i[0][1],y=i[1][0],g=i[1][1],b=u[0][0],E=u[0][1],x=u[1][0],M=u[1][1],S=(M-E)*(y-f)-(x-b)*(g-p);if(S===0)return null;var O=((x-b)*(p-E)-(M-E)*(f-b))/S,C=((y-f)*(p-E)-(g-p)*(f-b))/S;if(O>=0&&O<=1&&C>=0&&C<=1){var T=f+O*(y-f),R=p+O*(g-p);return d.point([T,R])}return null}l.default=function(n,t){var i={},u=[];if(n.type==="LineString"&&(n=d.feature(n)),t.type==="LineString"&&(t=d.feature(t)),n.type==="Feature"&&t.type==="Feature"&&n.geometry!==null&&t.geometry!==null&&n.geometry.type==="LineString"&&t.geometry.type==="LineString"&&n.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var f=r(n,t);return f&&u.push(f),d.featureCollection(u)}var p=a.default();return p.load(h.default(t)),s.featureEach(h.default(n),(function(y){s.featureEach(p.search(y),(function(g){var b=r(y,g);if(b){var E=m.getCoords(b).join(",");i[E]||(i[E]=!0,u.push(b))}}))})),d.featureCollection(u)}},4590:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(4102),d=o(611),m=o(1540);l.default=function(h){if(!h)throw new Error("geojson is required");var s=[];return m.flattenEach(h,(function(a){(function(r,n){var t=[],i=r.geometry;if(i!==null){switch(i.type){case"Polygon":t=d.getCoords(i);break;case"LineString":t=[d.getCoords(i)]}t.forEach((function(u){var f=(function(p,y){var g=[];return p.reduce((function(b,E){var x,M,S,O,C,T,R=c.lineString([b,E],y);return R.bbox=(M=E,S=(x=b)[0],O=x[1],[S<(C=M[0])?S:C,O<(T=M[1])?O:T,S>C?S:C,O>T?O:T]),g.push(R),E})),g})(u,r.properties);f.forEach((function(p){p.id=n.length,n.push(p)}))}))}})(a,s)})),c.featureCollection(s)}},1540:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(4102);function d(t,i,u){if(t!==null)for(var f,p,y,g,b,E,x,M,S=0,O=0,C=t.type,T=C==="FeatureCollection",R=C==="Feature",B=T?t.features.length:1,z=0;z<B;z++){b=(M=!!(x=T?t.features[z].geometry:R?t.geometry:t)&&x.type==="GeometryCollection")?x.geometries.length:1;for(var L=0;L<b;L++){var Y=0,ie=0;if((g=M?x.geometries[L]:x)!==null){E=g.coordinates;var $=g.type;switch(S=!u||$!=="Polygon"&&$!=="MultiPolygon"?0:1,$){case null:break;case"Point":if(i(E,O,z,Y,ie)===!1)return!1;O++,Y++;break;case"LineString":case"MultiPoint":for(f=0;f<E.length;f++){if(i(E[f],O,z,Y,ie)===!1)return!1;O++,$==="MultiPoint"&&Y++}$==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(f=0;f<E.length;f++){for(p=0;p<E[f].length-S;p++){if(i(E[f][p],O,z,Y,ie)===!1)return!1;O++}$==="MultiLineString"&&Y++,$==="Polygon"&&ie++}$==="Polygon"&&Y++;break;case"MultiPolygon":for(f=0;f<E.length;f++){for(ie=0,p=0;p<E[f].length;p++){for(y=0;y<E[f][p].length-S;y++){if(i(E[f][p][y],O,z,Y,ie)===!1)return!1;O++}ie++}Y++}break;case"GeometryCollection":for(f=0;f<g.geometries.length;f++)if(d(g.geometries[f],i,u)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function m(t,i){var u;switch(t.type){case"FeatureCollection":for(u=0;u<t.features.length&&i(t.features[u].properties,u)!==!1;u++);break;case"Feature":i(t.properties,0)}}function h(t,i){if(t.type==="Feature")i(t,0);else if(t.type==="FeatureCollection")for(var u=0;u<t.features.length&&i(t.features[u],u)!==!1;u++);}function s(t,i){var u,f,p,y,g,b,E,x,M,S,O=0,C=t.type==="FeatureCollection",T=t.type==="Feature",R=C?t.features.length:1;for(u=0;u<R;u++){for(b=C?t.features[u].geometry:T?t.geometry:t,x=C?t.features[u].properties:T?t.properties:{},M=C?t.features[u].bbox:T?t.bbox:void 0,S=C?t.features[u].id:T?t.id:void 0,g=(E=!!b&&b.type==="GeometryCollection")?b.geometries.length:1,p=0;p<g;p++)if((y=E?b.geometries[p]:b)!==null)switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(i(y,O,x,M,S)===!1)return!1;break;case"GeometryCollection":for(f=0;f<y.geometries.length;f++)if(i(y.geometries[f],O,x,M,S)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(i(null,O,x,M,S)===!1)return!1;O++}}function a(t,i){s(t,(function(u,f,p,y,g){var b,E=u===null?null:u.type;switch(E){case null:case"Point":case"LineString":case"Polygon":return i(c.feature(u,p,{bbox:y,id:g}),f,0)!==!1&&void 0}switch(E){case"MultiPoint":b="Point";break;case"MultiLineString":b="LineString";break;case"MultiPolygon":b="Polygon"}for(var x=0;x<u.coordinates.length;x++){var M={type:b,coordinates:u.coordinates[x]};if(i(c.feature(M,p),f,x)===!1)return!1}}))}function r(t,i){a(t,(function(u,f,p){var y=0;if(u.geometry){var g=u.geometry.type;if(g!=="Point"&&g!=="MultiPoint"){var b,E=0,x=0,M=0;return d(u,(function(S,O,C,T,R){if(b===void 0||f>E||T>x||R>M)return b=S,E=f,x=T,M=R,void(y=0);var B=c.lineString([b,S],u.properties);if(i(B,f,p,R,y)===!1)return!1;y++,b=S}))!==!1&&void 0}}}))}function n(t,i){if(!t)throw new Error("geojson is required");a(t,(function(u,f,p){if(u.geometry!==null){var y=u.geometry.type,g=u.geometry.coordinates;switch(y){case"LineString":if(i(u,f,p,0,0)===!1)return!1;break;case"Polygon":for(var b=0;b<g.length;b++)if(i(c.lineString(g[b],u.properties),f,p,b)===!1)return!1}}}))}l.coordAll=function(t){var i=[];return d(t,(function(u){i.push(u)})),i},l.coordEach=d,l.coordReduce=function(t,i,u,f){var p=u;return d(t,(function(y,g,b,E,x){p=g===0&&u===void 0?y:i(p,y,g,b,E,x)}),f),p},l.featureEach=h,l.featureReduce=function(t,i,u){var f=u;return h(t,(function(p,y){f=y===0&&u===void 0?p:i(f,p,y)})),f},l.findPoint=function(t,i){if(i=i||{},!c.isObject(i))throw new Error("options is invalid");var u,f=i.featureIndex||0,p=i.multiFeatureIndex||0,y=i.geometryIndex||0,g=i.coordIndex||0,b=i.properties;switch(t.type){case"FeatureCollection":f<0&&(f=t.features.length+f),b=b||t.features[f].properties,u=t.features[f].geometry;break;case"Feature":b=b||t.properties,u=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=t;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var E=u.coordinates;switch(u.type){case"Point":return c.point(E,b,i);case"MultiPoint":return p<0&&(p=E.length+p),c.point(E[p],b,i);case"LineString":return g<0&&(g=E.length+g),c.point(E[g],b,i);case"Polygon":return y<0&&(y=E.length+y),g<0&&(g=E[y].length+g),c.point(E[y][g],b,i);case"MultiLineString":return p<0&&(p=E.length+p),g<0&&(g=E[p].length+g),c.point(E[p][g],b,i);case"MultiPolygon":return p<0&&(p=E.length+p),y<0&&(y=E[p].length+y),g<0&&(g=E[p][y].length-g),c.point(E[p][y][g],b,i)}throw new Error("geojson is invalid")},l.findSegment=function(t,i){if(i=i||{},!c.isObject(i))throw new Error("options is invalid");var u,f=i.featureIndex||0,p=i.multiFeatureIndex||0,y=i.geometryIndex||0,g=i.segmentIndex||0,b=i.properties;switch(t.type){case"FeatureCollection":f<0&&(f=t.features.length+f),b=b||t.features[f].properties,u=t.features[f].geometry;break;case"Feature":b=b||t.properties,u=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=t;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var E=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return g<0&&(g=E.length+g-1),c.lineString([E[g],E[g+1]],b,i);case"Polygon":return y<0&&(y=E.length+y),g<0&&(g=E[y].length+g-1),c.lineString([E[y][g],E[y][g+1]],b,i);case"MultiLineString":return p<0&&(p=E.length+p),g<0&&(g=E[p].length+g-1),c.lineString([E[p][g],E[p][g+1]],b,i);case"MultiPolygon":return p<0&&(p=E.length+p),y<0&&(y=E[p].length+y),g<0&&(g=E[p][y].length-g-1),c.lineString([E[p][y][g],E[p][y][g+1]],b,i)}throw new Error("geojson is invalid")},l.flattenEach=a,l.flattenReduce=function(t,i,u){var f=u;return a(t,(function(p,y,g){f=y===0&&g===0&&u===void 0?p:i(f,p,y,g)})),f},l.geomEach=s,l.geomReduce=function(t,i,u){var f=u;return s(t,(function(p,y,g,b,E){f=y===0&&u===void 0?p:i(f,p,y,g,b,E)})),f},l.lineEach=n,l.lineReduce=function(t,i,u){var f=u;return n(t,(function(p,y,g,b){f=y===0&&u===void 0?p:i(f,p,y,g,b)})),f},l.propEach=m,l.propReduce=function(t,i,u){var f=u;return m(t,(function(p,y){f=y===0&&u===void 0?p:i(f,p,y)})),f},l.segmentEach=r,l.segmentReduce=function(t,i,u){var f=u,p=!1;return r(t,(function(y,g,b,E,x){f=p===!1&&u===void 0?y:i(f,y,g,b,E,x),p=!0})),f}},3892:function(_,l,o){var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});var d=c(o(1013)),m=o(4102),h=o(611),s=o(1540),a=c(o(6213));function r(t,i){return t[0]*i[0]+t[1]*i[1]}function n(t,i,u){return u.method==="planar"?a.default(t,i,u):d.default(t,i,u)}l.default=function(t,i,u){if(u===void 0&&(u={}),u.method||(u.method="geodesic"),u.units||(u.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=m.point(t):t.type==="Point"?t=m.feature(t):h.featureOf(t,"Point","point"),!i)throw new Error("line is required");Array.isArray(i)?i=m.lineString(i):i.type==="LineString"?i=m.feature(i):h.featureOf(i,"LineString","line");var f=1/0,p=t.geometry.coordinates;return s.segmentEach(i,(function(y){var g=y.geometry.coordinates[0],b=y.geometry.coordinates[1],E=(function(x,M,S,O){var C=[S[0]-M[0],S[1]-M[1]],T=r([x[0]-M[0],x[1]-M[1]],C);if(T<=0)return n(x,M,{method:O.method,units:"degrees"});var R=r(C,C);if(R<=T)return n(x,S,{method:O.method,units:"degrees"});var B=T/R;return n(x,[M[0]+B*C[0],M[1]+B*C[1]],{method:O.method,units:"degrees"})})(p,g,b,u);E<f&&(f=E)})),m.convertLength(f,"degrees",u.units)}},7383:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(4102),d=o(611);function m(a,r){return r===void 0&&(r={}),s(d.getGeom(a).coordinates,r.properties?r.properties:a.type==="Feature"?a.properties:{})}function h(a,r){r===void 0&&(r={});var n=d.getGeom(a).coordinates,t=r.properties?r.properties:a.type==="Feature"?a.properties:{},i=[];return n.forEach((function(u){i.push(s(u,t))})),c.featureCollection(i)}function s(a,r){return a.length>1?c.multiLineString(a,r):c.lineString(a[0],r)}l.default=function(a,r){r===void 0&&(r={});var n=d.getGeom(a);switch(r.properties||a.type!=="Feature"||(r.properties=a.properties),n.type){case"Polygon":return m(n,r);case"MultiPolygon":return h(n,r);default:throw new Error("invalid poly")}},l.polygonToLine=m,l.multiPolygonToLine=h,l.coordsToLine=s},6213:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=o(4102),d=o(611);l.default=function(m,h,s){s===void 0&&(s={});var a=d.getCoord(m),r=d.getCoord(h);r[0]+=r[0]-a[0]>180?-360:a[0]-r[0]>180?360:0;var n=(function(t,i,u){var f=u=u===void 0?c.earthRadius:Number(u),p=t[1]*Math.PI/180,y=i[1]*Math.PI/180,g=y-p,b=Math.abs(i[0]-t[0])*Math.PI/180;b>Math.PI&&(b-=2*Math.PI);var E=Math.log(Math.tan(y/2+Math.PI/4)/Math.tan(p/2+Math.PI/4)),x=Math.abs(E)>1e-11?g/E:Math.cos(p);return Math.sqrt(g*g+x*x*b*b)*f})(a,r);return c.convertLength(n,"meters",s.units)}},8583:(_,l,o)=>{var c=o(7418);function d(C,T){if(C===T)return 0;for(var R=C.length,B=T.length,z=0,L=Math.min(R,B);z<L;++z)if(C[z]!==T[z]){R=C[z],B=T[z];break}return R<B?-1:B<R?1:0}function m(C){return o.g.Buffer&&typeof o.g.Buffer.isBuffer=="function"?o.g.Buffer.isBuffer(C):!(C==null||!C._isBuffer)}var h=o(69),s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,r=function(){}.name==="foo";function n(C){return Object.prototype.toString.call(C)}function t(C){return!m(C)&&typeof o.g.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(C):!!C&&(C instanceof DataView||!!(C.buffer&&C.buffer instanceof ArrayBuffer)))}var i=_.exports=b,u=/\s*function\s+([^\(\s]*)\s*/;function f(C){if(h.isFunction(C)){if(r)return C.name;var T=C.toString().match(u);return T&&T[1]}}function p(C,T){return typeof C=="string"?C.length<T?C:C.slice(0,T):C}function y(C){if(r||!h.isFunction(C))return h.inspect(C);var T=f(C);return"[Function"+(T?": "+T:"")+"]"}function g(C,T,R,B,z){throw new i.AssertionError({message:R,actual:C,expected:T,operator:B,stackStartFunction:z})}function b(C,T){C||g(C,!0,T,"==",i.ok)}function E(C,T,R,B){if(C===T)return!0;if(m(C)&&m(T))return d(C,T)===0;if(h.isDate(C)&&h.isDate(T))return C.getTime()===T.getTime();if(h.isRegExp(C)&&h.isRegExp(T))return C.source===T.source&&C.global===T.global&&C.multiline===T.multiline&&C.lastIndex===T.lastIndex&&C.ignoreCase===T.ignoreCase;if(C!==null&&typeof C=="object"||T!==null&&typeof T=="object"){if(t(C)&&t(T)&&n(C)===n(T)&&!(C instanceof Float32Array||C instanceof Float64Array))return d(new Uint8Array(C.buffer),new Uint8Array(T.buffer))===0;if(m(C)!==m(T))return!1;var z=(B=B||{actual:[],expected:[]}).actual.indexOf(C);return z!==-1&&z===B.expected.indexOf(T)||(B.actual.push(C),B.expected.push(T),(function(L,Y,ie,$){if(L==null||Y==null)return!1;if(h.isPrimitive(L)||h.isPrimitive(Y))return L===Y;if(ie&&Object.getPrototypeOf(L)!==Object.getPrototypeOf(Y))return!1;var Q=x(L),ce=x(Y);if(Q&&!ce||!Q&&ce)return!1;if(Q)return E(L=a.call(L),Y=a.call(Y),ie);var be,Ae,we=O(L),Xe=O(Y);if(we.length!==Xe.length)return!1;for(we.sort(),Xe.sort(),Ae=we.length-1;Ae>=0;Ae--)if(we[Ae]!==Xe[Ae])return!1;for(Ae=we.length-1;Ae>=0;Ae--)if(!E(L[be=we[Ae]],Y[be],ie,$))return!1;return!0})(C,T,R,B))}return R?C===T:C==T}function x(C){return Object.prototype.toString.call(C)=="[object Arguments]"}function M(C,T){if(!C||!T)return!1;if(Object.prototype.toString.call(T)=="[object RegExp]")return T.test(C);try{if(C instanceof T)return!0}catch{}return!Error.isPrototypeOf(T)&&T.call({},C)===!0}function S(C,T,R,B){var z;if(typeof T!="function")throw new TypeError('"block" argument must be a function');typeof R=="string"&&(B=R,R=null),z=(function(ie){var $;try{ie()}catch(Q){$=Q}return $})(T),B=(R&&R.name?" ("+R.name+").":".")+(B?" "+B:"."),C&&!z&&g(z,R,"Missing expected exception"+B);var L=typeof B=="string",Y=!C&&z&&!R;if((!C&&h.isError(z)&&L&&M(z,R)||Y)&&g(z,R,"Got unwanted exception"+B),C&&z&&R&&!M(z,R)||!C&&z)throw z}i.AssertionError=function(C){this.name="AssertionError",this.actual=C.actual,this.expected=C.expected,this.operator=C.operator,C.message?(this.message=C.message,this.generatedMessage=!1):(this.message=(function(ie){return p(y(ie.actual),128)+" "+ie.operator+" "+p(y(ie.expected),128)})(this),this.generatedMessage=!0);var T=C.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var R=new Error;if(R.stack){var B=R.stack,z=f(T),L=B.indexOf(`
`+z);if(L>=0){var Y=B.indexOf(`
`,L+1);B=B.substring(Y+1)}this.stack=B}}},h.inherits(i.AssertionError,Error),i.fail=g,i.ok=b,i.equal=function(C,T,R){C!=T&&g(C,T,R,"==",i.equal)},i.notEqual=function(C,T,R){C==T&&g(C,T,R,"!=",i.notEqual)},i.deepEqual=function(C,T,R){E(C,T,!1)||g(C,T,R,"deepEqual",i.deepEqual)},i.deepStrictEqual=function(C,T,R){E(C,T,!0)||g(C,T,R,"deepStrictEqual",i.deepStrictEqual)},i.notDeepEqual=function(C,T,R){E(C,T,!1)&&g(C,T,R,"notDeepEqual",i.notDeepEqual)},i.notDeepStrictEqual=function C(T,R,B){E(T,R,!0)&&g(T,R,B,"notDeepStrictEqual",C)},i.strictEqual=function(C,T,R){C!==T&&g(C,T,R,"===",i.strictEqual)},i.notStrictEqual=function(C,T,R){C===T&&g(C,T,R,"!==",i.notStrictEqual)},i.throws=function(C,T,R){S(!0,C,T,R)},i.doesNotThrow=function(C,T,R){S(!1,C,T,R)},i.ifError=function(C){if(C)throw C},i.strict=c((function C(T,R){T||g(T,!0,R,"==",C)}),i,{equal:i.strictEqual,deepEqual:i.deepStrictEqual,notEqual:i.notStrictEqual,notDeepEqual:i.notDeepStrictEqual}),i.strict.strict=i.strict;var O=Object.keys||function(C){var T=[];for(var R in C)s.call(C,R)&&T.push(R);return T}},6076:_=>{typeof Object.create=="function"?_.exports=function(l,o){l.super_=o,l.prototype=Object.create(o.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}})}:_.exports=function(l,o){l.super_=o;var c=function(){};c.prototype=o.prototype,l.prototype=new c,l.prototype.constructor=l}},2014:_=>{_.exports=function(l){return l&&typeof l=="object"&&typeof l.copy=="function"&&typeof l.fill=="function"&&typeof l.readUInt8=="function"}},69:(_,l,o)=>{var c=o(4155),d=o(5108),m=/%[sdj%]/g;l.format=function(L){if(!b(L)){for(var Y=[],ie=0;ie<arguments.length;ie++)Y.push(a(arguments[ie]));return Y.join(" ")}ie=1;for(var $=arguments,Q=$.length,ce=String(L).replace(m,(function(Ae){if(Ae==="%%")return"%";if(ie>=Q)return Ae;switch(Ae){case"%s":return String($[ie++]);case"%d":return Number($[ie++]);case"%j":try{return JSON.stringify($[ie++])}catch{return"[Circular]"}default:return Ae}})),be=$[ie];ie<Q;be=$[++ie])y(be)||!M(be)?ce+=" "+be:ce+=" "+a(be);return ce},l.deprecate=function(L,Y){if(E(o.g.process))return function(){return l.deprecate(L,Y).apply(this,arguments)};if(c.noDeprecation===!0)return L;var ie=!1;return function(){if(!ie){if(c.throwDeprecation)throw new Error(Y);c.traceDeprecation?d.trace(Y):d.error(Y),ie=!0}return L.apply(this,arguments)}};var h,s={};function a(L,Y){var ie={seen:[],stylize:n};return arguments.length>=3&&(ie.depth=arguments[2]),arguments.length>=4&&(ie.colors=arguments[3]),p(Y)?ie.showHidden=Y:Y&&l._extend(ie,Y),E(ie.showHidden)&&(ie.showHidden=!1),E(ie.depth)&&(ie.depth=2),E(ie.colors)&&(ie.colors=!1),E(ie.customInspect)&&(ie.customInspect=!0),ie.colors&&(ie.stylize=r),t(ie,L,ie.depth)}function r(L,Y){var ie=a.styles[Y];return ie?"\x1B["+a.colors[ie][0]+"m"+L+"\x1B["+a.colors[ie][1]+"m":L}function n(L,Y){return L}function t(L,Y,ie){if(L.customInspect&&Y&&C(Y.inspect)&&Y.inspect!==l.inspect&&(!Y.constructor||Y.constructor.prototype!==Y)){var $=Y.inspect(ie,L);return b($)||($=t(L,$,ie)),$}var Q=(function(tt,he){if(E(he))return tt.stylize("undefined","undefined");if(b(he)){var de="'"+JSON.stringify(he).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return tt.stylize(de,"string")}return g(he)?tt.stylize(""+he,"number"):p(he)?tt.stylize(""+he,"boolean"):y(he)?tt.stylize("null","null"):void 0})(L,Y);if(Q)return Q;var ce=Object.keys(Y),be=(function(tt){var he={};return tt.forEach((function(de,ze){he[de]=!0})),he})(ce);if(L.showHidden&&(ce=Object.getOwnPropertyNames(Y)),O(Y)&&(ce.indexOf("message")>=0||ce.indexOf("description")>=0))return i(Y);if(ce.length===0){if(C(Y)){var Ae=Y.name?": "+Y.name:"";return L.stylize("[Function"+Ae+"]","special")}if(x(Y))return L.stylize(RegExp.prototype.toString.call(Y),"regexp");if(S(Y))return L.stylize(Date.prototype.toString.call(Y),"date");if(O(Y))return i(Y)}var we,Xe="",Ve=!1,st=["{","}"];return f(Y)&&(Ve=!0,st=["[","]"]),C(Y)&&(Xe=" [Function"+(Y.name?": "+Y.name:"")+"]"),x(Y)&&(Xe=" "+RegExp.prototype.toString.call(Y)),S(Y)&&(Xe=" "+Date.prototype.toUTCString.call(Y)),O(Y)&&(Xe=" "+i(Y)),ce.length!==0||Ve&&Y.length!=0?ie<0?x(Y)?L.stylize(RegExp.prototype.toString.call(Y),"regexp"):L.stylize("[Object]","special"):(L.seen.push(Y),we=Ve?(function(tt,he,de,ze,P){for(var A=[],D=0,W=he.length;D<W;++D)z(he,String(D))?A.push(u(tt,he,de,ze,String(D),!0)):A.push("");return P.forEach((function(ae){ae.match(/^\d+$/)||A.push(u(tt,he,de,ze,ae,!0))})),A})(L,Y,ie,be,ce):ce.map((function(tt){return u(L,Y,ie,be,tt,Ve)})),L.seen.pop(),(function(tt,he,de){return tt.reduce((function(ze,P){return P.indexOf(`
`),ze+P.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?de[0]+(he===""?"":he+`
 `)+" "+tt.join(`,
  `)+" "+de[1]:de[0]+he+" "+tt.join(", ")+" "+de[1]})(we,Xe,st)):st[0]+Xe+st[1]}function i(L){return"["+Error.prototype.toString.call(L)+"]"}function u(L,Y,ie,$,Q,ce){var be,Ae,we;if((we=Object.getOwnPropertyDescriptor(Y,Q)||{value:Y[Q]}).get?Ae=we.set?L.stylize("[Getter/Setter]","special"):L.stylize("[Getter]","special"):we.set&&(Ae=L.stylize("[Setter]","special")),z($,Q)||(be="["+Q+"]"),Ae||(L.seen.indexOf(we.value)<0?(Ae=y(ie)?t(L,we.value,null):t(L,we.value,ie-1)).indexOf(`
`)>-1&&(Ae=ce?Ae.split(`
`).map((function(Xe){return"  "+Xe})).join(`
`).substr(2):`
`+Ae.split(`
`).map((function(Xe){return"   "+Xe})).join(`
`)):Ae=L.stylize("[Circular]","special")),E(be)){if(ce&&Q.match(/^\d+$/))return Ae;(be=JSON.stringify(""+Q)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(be=be.substr(1,be.length-2),be=L.stylize(be,"name")):(be=be.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),be=L.stylize(be,"string"))}return be+": "+Ae}function f(L){return Array.isArray(L)}function p(L){return typeof L=="boolean"}function y(L){return L===null}function g(L){return typeof L=="number"}function b(L){return typeof L=="string"}function E(L){return L===void 0}function x(L){return M(L)&&T(L)==="[object RegExp]"}function M(L){return typeof L=="object"&&L!==null}function S(L){return M(L)&&T(L)==="[object Date]"}function O(L){return M(L)&&(T(L)==="[object Error]"||L instanceof Error)}function C(L){return typeof L=="function"}function T(L){return Object.prototype.toString.call(L)}function R(L){return L<10?"0"+L.toString(10):L.toString(10)}l.debuglog=function(L){if(E(h)&&(h=c.env.NODE_DEBUG||""),L=L.toUpperCase(),!s[L])if(new RegExp("\\b"+L+"\\b","i").test(h)){var Y=c.pid;s[L]=function(){var ie=l.format.apply(l,arguments);d.error("%s %d: %s",L,Y,ie)}}else s[L]=function(){};return s[L]},l.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},l.isArray=f,l.isBoolean=p,l.isNull=y,l.isNullOrUndefined=function(L){return L==null},l.isNumber=g,l.isString=b,l.isSymbol=function(L){return typeof L=="symbol"},l.isUndefined=E,l.isRegExp=x,l.isObject=M,l.isDate=S,l.isError=O,l.isFunction=C,l.isPrimitive=function(L){return L===null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||typeof L=="symbol"||L===void 0},l.isBuffer=o(2014);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function z(L,Y){return Object.prototype.hasOwnProperty.call(L,Y)}l.log=function(){var L,Y;d.log("%s - %s",(Y=[R((L=new Date).getHours()),R(L.getMinutes()),R(L.getSeconds())].join(":"),[L.getDate(),B[L.getMonth()],Y].join(" ")),l.format.apply(l,arguments))},l.inherits=o(6076),l._extend=function(L,Y){if(!Y||!M(Y))return L;for(var ie=Object.keys(Y),$=ie.length;$--;)L[ie[$]]=Y[ie[$]];return L}},9742:(_,l)=>{l.byteLength=function(n){var t=a(n),i=t[0],u=t[1];return 3*(i+u)/4-u},l.toByteArray=function(n){var t,i,u=a(n),f=u[0],p=u[1],y=new d((function(E,x,M){return 3*(x+M)/4-M})(0,f,p)),g=0,b=p>0?f-4:f;for(i=0;i<b;i+=4)t=c[n.charCodeAt(i)]<<18|c[n.charCodeAt(i+1)]<<12|c[n.charCodeAt(i+2)]<<6|c[n.charCodeAt(i+3)],y[g++]=t>>16&255,y[g++]=t>>8&255,y[g++]=255&t;return p===2&&(t=c[n.charCodeAt(i)]<<2|c[n.charCodeAt(i+1)]>>4,y[g++]=255&t),p===1&&(t=c[n.charCodeAt(i)]<<10|c[n.charCodeAt(i+1)]<<4|c[n.charCodeAt(i+2)]>>2,y[g++]=t>>8&255,y[g++]=255&t),y},l.fromByteArray=function(n){for(var t,i=n.length,u=i%3,f=[],p=16383,y=0,g=i-u;y<g;y+=p)f.push(r(n,y,y+p>g?g:y+p));return u===1?(t=n[i-1],f.push(o[t>>2]+o[t<<4&63]+"==")):u===2&&(t=(n[i-2]<<8)+n[i-1],f.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),f.join("")};for(var o=[],c=[],d=typeof Uint8Array<"u"?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,s=m.length;h<s;++h)o[h]=m[h],c[m.charCodeAt(h)]=h;function a(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=n.indexOf("=");return i===-1&&(i=t),[i,i===t?0:4-i%4]}function r(n,t,i){for(var u,f,p=[],y=t;y<i;y+=3)u=(n[y]<<16&16711680)+(n[y+1]<<8&65280)+(255&n[y+2]),p.push(o[(f=u)>>18&63]+o[f>>12&63]+o[f>>6&63]+o[63&f]);return p.join("")}c[45]=62,c[95]=63},8764:(_,l,o)=>{var c=o(5108),d=o(9742),m=o(645),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;l.Buffer=r,l.SlowBuffer=function(P){return+P!=P&&(P=0),r.alloc(+P)},l.INSPECT_MAX_BYTES=50;var s=2147483647;function a(P){if(P>s)throw new RangeError('The value "'+P+'" is invalid for option "size"');var A=new Uint8Array(P);return Object.setPrototypeOf(A,r.prototype),A}function r(P,A,D){if(typeof P=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return i(P)}return n(P,A,D)}function n(P,A,D){if(typeof P=="string")return(function(le,Ne){if(typeof Ne=="string"&&Ne!==""||(Ne="utf8"),!r.isEncoding(Ne))throw new TypeError("Unknown encoding: "+Ne);var De=0|y(le,Ne),Ye=a(De),ht=Ye.write(le,Ne);return ht!==De&&(Ye=Ye.slice(0,ht)),Ye})(P,A);if(ArrayBuffer.isView(P))return(function(le){if(he(le,Uint8Array)){var Ne=new Uint8Array(le);return f(Ne.buffer,Ne.byteOffset,Ne.byteLength)}return u(le)})(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(he(P,ArrayBuffer)||P&&he(P.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(he(P,SharedArrayBuffer)||P&&he(P.buffer,SharedArrayBuffer)))return f(P,A,D);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var W=P.valueOf&&P.valueOf();if(W!=null&&W!==P)return r.from(W,A,D);var ae=(function(le){if(r.isBuffer(le)){var Ne=0|p(le.length),De=a(Ne);return De.length===0||le.copy(De,0,0,Ne),De}return le.length!==void 0?typeof le.length!="number"||de(le.length)?a(0):u(le):le.type==="Buffer"&&Array.isArray(le.data)?u(le.data):void 0})(P);if(ae)return ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return r.from(P[Symbol.toPrimitive]("string"),A,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}function t(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function i(P){return t(P),a(P<0?0:0|p(P))}function u(P){for(var A=P.length<0?0:0|p(P.length),D=a(A),W=0;W<A;W+=1)D[W]=255&P[W];return D}function f(P,A,D){if(A<0||P.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(P.byteLength<A+(D||0))throw new RangeError('"length" is outside of buffer bounds');var W;return W=A===void 0&&D===void 0?new Uint8Array(P):D===void 0?new Uint8Array(P,A):new Uint8Array(P,A,D),Object.setPrototypeOf(W,r.prototype),W}function p(P){if(P>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|P}function y(P,A){if(r.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||he(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);var D=P.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&D===0)return 0;for(var ae=!1;;)switch(A){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return Ve(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*D;case"hex":return D>>>1;case"base64":return st(P).length;default:if(ae)return W?-1:Ve(P).length;A=(""+A).toLowerCase(),ae=!0}}function g(P,A,D){var W=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0)<=(A>>>=0))return"";for(P||(P="utf8");;)switch(P){case"hex":return ie(this,A,D);case"utf8":case"utf-8":return B(this,A,D);case"ascii":return L(this,A,D);case"latin1":case"binary":return Y(this,A,D);case"base64":return R(this,A,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,A,D);default:if(W)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),W=!0}}function b(P,A,D){var W=P[A];P[A]=P[D],P[D]=W}function E(P,A,D,W,ae){if(P.length===0)return-1;if(typeof D=="string"?(W=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),de(D=+D)&&(D=ae?0:P.length-1),D<0&&(D=P.length+D),D>=P.length){if(ae)return-1;D=P.length-1}else if(D<0){if(!ae)return-1;D=0}if(typeof A=="string"&&(A=r.from(A,W)),r.isBuffer(A))return A.length===0?-1:x(P,A,D,W,ae);if(typeof A=="number")return A&=255,typeof Uint8Array.prototype.indexOf=="function"?ae?Uint8Array.prototype.indexOf.call(P,A,D):Uint8Array.prototype.lastIndexOf.call(P,A,D):x(P,[A],D,W,ae);throw new TypeError("val must be string, number or Buffer")}function x(P,A,D,W,ae){var le,Ne=1,De=P.length,Ye=A.length;if(W!==void 0&&((W=String(W).toLowerCase())==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(P.length<2||A.length<2)return-1;Ne=2,De/=2,Ye/=2,D/=2}function ht(Se,Ie){return Ne===1?Se[Ie]:Se.readUInt16BE(Ie*Ne)}if(ae){var F=-1;for(le=D;le<De;le++)if(ht(P,le)===ht(A,F===-1?0:le-F)){if(F===-1&&(F=le),le-F+1===Ye)return F*Ne}else F!==-1&&(le-=le-F),F=-1}else for(D+Ye>De&&(D=De-Ye),le=D;le>=0;le--){for(var V=!0,ne=0;ne<Ye;ne++)if(ht(P,le+ne)!==ht(A,ne)){V=!1;break}if(V)return le}return-1}function M(P,A,D,W){D=Number(D)||0;var ae=P.length-D;W?(W=Number(W))>ae&&(W=ae):W=ae;var le=A.length;W>le/2&&(W=le/2);for(var Ne=0;Ne<W;++Ne){var De=parseInt(A.substr(2*Ne,2),16);if(de(De))return Ne;P[D+Ne]=De}return Ne}function S(P,A,D,W){return tt(Ve(A,P.length-D),P,D,W)}function O(P,A,D,W){return tt((function(ae){for(var le=[],Ne=0;Ne<ae.length;++Ne)le.push(255&ae.charCodeAt(Ne));return le})(A),P,D,W)}function C(P,A,D,W){return tt(st(A),P,D,W)}function T(P,A,D,W){return tt((function(ae,le){for(var Ne,De,Ye,ht=[],F=0;F<ae.length&&!((le-=2)<0);++F)De=(Ne=ae.charCodeAt(F))>>8,Ye=Ne%256,ht.push(Ye),ht.push(De);return ht})(A,P.length-D),P,D,W)}function R(P,A,D){return A===0&&D===P.length?d.fromByteArray(P):d.fromByteArray(P.slice(A,D))}function B(P,A,D){D=Math.min(P.length,D);for(var W=[],ae=A;ae<D;){var le,Ne,De,Ye,ht=P[ae],F=null,V=ht>239?4:ht>223?3:ht>191?2:1;if(ae+V<=D)switch(V){case 1:ht<128&&(F=ht);break;case 2:(192&(le=P[ae+1]))==128&&(Ye=(31&ht)<<6|63&le)>127&&(F=Ye);break;case 3:le=P[ae+1],Ne=P[ae+2],(192&le)==128&&(192&Ne)==128&&(Ye=(15&ht)<<12|(63&le)<<6|63&Ne)>2047&&(Ye<55296||Ye>57343)&&(F=Ye);break;case 4:le=P[ae+1],Ne=P[ae+2],De=P[ae+3],(192&le)==128&&(192&Ne)==128&&(192&De)==128&&(Ye=(15&ht)<<18|(63&le)<<12|(63&Ne)<<6|63&De)>65535&&Ye<1114112&&(F=Ye)}F===null?(F=65533,V=1):F>65535&&(F-=65536,W.push(F>>>10&1023|55296),F=56320|1023&F),W.push(F),ae+=V}return(function(ne){var Se=ne.length;if(Se<=z)return String.fromCharCode.apply(String,ne);for(var Ie="",ke=0;ke<Se;)Ie+=String.fromCharCode.apply(String,ne.slice(ke,ke+=z));return Ie})(W)}l.kMaxLength=s,r.TYPED_ARRAY_SUPPORT=(function(){try{var P=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(P,A),P.foo()===42}catch{return!1}})(),r.TYPED_ARRAY_SUPPORT||c===void 0||typeof c.error!="function"||c.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),r.poolSize=8192,r.from=function(P,A,D){return n(P,A,D)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array),r.alloc=function(P,A,D){return(function(W,ae,le){return t(W),W<=0?a(W):ae!==void 0?typeof le=="string"?a(W).fill(ae,le):a(W).fill(ae):a(W)})(P,A,D)},r.allocUnsafe=function(P){return i(P)},r.allocUnsafeSlow=function(P){return i(P)},r.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==r.prototype},r.compare=function(P,A){if(he(P,Uint8Array)&&(P=r.from(P,P.offset,P.byteLength)),he(A,Uint8Array)&&(A=r.from(A,A.offset,A.byteLength)),!r.isBuffer(P)||!r.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===A)return 0;for(var D=P.length,W=A.length,ae=0,le=Math.min(D,W);ae<le;++ae)if(P[ae]!==A[ae]){D=P[ae],W=A[ae];break}return D<W?-1:W<D?1:0},r.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(P,A){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return r.alloc(0);var D;if(A===void 0)for(A=0,D=0;D<P.length;++D)A+=P[D].length;var W=r.allocUnsafe(A),ae=0;for(D=0;D<P.length;++D){var le=P[D];if(he(le,Uint8Array))ae+le.length>W.length?r.from(le).copy(W,ae):Uint8Array.prototype.set.call(W,le,ae);else{if(!r.isBuffer(le))throw new TypeError('"list" argument must be an Array of Buffers');le.copy(W,ae)}ae+=le.length}return W},r.byteLength=y,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var P=this.length;if(P%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var A=0;A<P;A+=2)b(this,A,A+1);return this},r.prototype.swap32=function(){var P=this.length;if(P%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var A=0;A<P;A+=4)b(this,A,A+3),b(this,A+1,A+2);return this},r.prototype.swap64=function(){var P=this.length;if(P%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var A=0;A<P;A+=8)b(this,A,A+7),b(this,A+1,A+6),b(this,A+2,A+5),b(this,A+3,A+4);return this},r.prototype.toString=function(){var P=this.length;return P===0?"":arguments.length===0?B(this,0,P):g.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(P){if(!r.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P||r.compare(this,P)===0},r.prototype.inspect=function(){var P="",A=l.INSPECT_MAX_BYTES;return P=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(P+=" ... "),"<Buffer "+P+">"},h&&(r.prototype[h]=r.prototype.inspect),r.prototype.compare=function(P,A,D,W,ae){if(he(P,Uint8Array)&&(P=r.from(P,P.offset,P.byteLength)),!r.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(A===void 0&&(A=0),D===void 0&&(D=P?P.length:0),W===void 0&&(W=0),ae===void 0&&(ae=this.length),A<0||D>P.length||W<0||ae>this.length)throw new RangeError("out of range index");if(W>=ae&&A>=D)return 0;if(W>=ae)return-1;if(A>=D)return 1;if(this===P)return 0;for(var le=(ae>>>=0)-(W>>>=0),Ne=(D>>>=0)-(A>>>=0),De=Math.min(le,Ne),Ye=this.slice(W,ae),ht=P.slice(A,D),F=0;F<De;++F)if(Ye[F]!==ht[F]){le=Ye[F],Ne=ht[F];break}return le<Ne?-1:Ne<le?1:0},r.prototype.includes=function(P,A,D){return this.indexOf(P,A,D)!==-1},r.prototype.indexOf=function(P,A,D){return E(this,P,A,D,!0)},r.prototype.lastIndexOf=function(P,A,D){return E(this,P,A,D,!1)},r.prototype.write=function(P,A,D,W){if(A===void 0)W="utf8",D=this.length,A=0;else if(D===void 0&&typeof A=="string")W=A,D=this.length,A=0;else{if(!isFinite(A))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");A>>>=0,isFinite(D)?(D>>>=0,W===void 0&&(W="utf8")):(W=D,D=void 0)}var ae=this.length-A;if((D===void 0||D>ae)&&(D=ae),P.length>0&&(D<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");for(var le=!1;;)switch(W){case"hex":return M(this,P,A,D);case"utf8":case"utf-8":return S(this,P,A,D);case"ascii":case"latin1":case"binary":return O(this,P,A,D);case"base64":return C(this,P,A,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,P,A,D);default:if(le)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),le=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var z=4096;function L(P,A,D){var W="";D=Math.min(P.length,D);for(var ae=A;ae<D;++ae)W+=String.fromCharCode(127&P[ae]);return W}function Y(P,A,D){var W="";D=Math.min(P.length,D);for(var ae=A;ae<D;++ae)W+=String.fromCharCode(P[ae]);return W}function ie(P,A,D){var W=P.length;(!A||A<0)&&(A=0),(!D||D<0||D>W)&&(D=W);for(var ae="",le=A;le<D;++le)ae+=ze[P[le]];return ae}function $(P,A,D){for(var W=P.slice(A,D),ae="",le=0;le<W.length-1;le+=2)ae+=String.fromCharCode(W[le]+256*W[le+1]);return ae}function Q(P,A,D){if(P%1!=0||P<0)throw new RangeError("offset is not uint");if(P+A>D)throw new RangeError("Trying to access beyond buffer length")}function ce(P,A,D,W,ae,le){if(!r.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>ae||A<le)throw new RangeError('"value" argument is out of bounds');if(D+W>P.length)throw new RangeError("Index out of range")}function be(P,A,D,W,ae,le){if(D+W>P.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function Ae(P,A,D,W,ae){return A=+A,D>>>=0,ae||be(P,0,D,4),m.write(P,A,D,W,23,4),D+4}function we(P,A,D,W,ae){return A=+A,D>>>=0,ae||be(P,0,D,8),m.write(P,A,D,W,52,8),D+8}r.prototype.slice=function(P,A){var D=this.length;(P=~~P)<0?(P+=D)<0&&(P=0):P>D&&(P=D),(A=A===void 0?D:~~A)<0?(A+=D)<0&&(A=0):A>D&&(A=D),A<P&&(A=P);var W=this.subarray(P,A);return Object.setPrototypeOf(W,r.prototype),W},r.prototype.readUintLE=r.prototype.readUIntLE=function(P,A,D){P>>>=0,A>>>=0,D||Q(P,A,this.length);for(var W=this[P],ae=1,le=0;++le<A&&(ae*=256);)W+=this[P+le]*ae;return W},r.prototype.readUintBE=r.prototype.readUIntBE=function(P,A,D){P>>>=0,A>>>=0,D||Q(P,A,this.length);for(var W=this[P+--A],ae=1;A>0&&(ae*=256);)W+=this[P+--A]*ae;return W},r.prototype.readUint8=r.prototype.readUInt8=function(P,A){return P>>>=0,A||Q(P,1,this.length),this[P]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(P,A){return P>>>=0,A||Q(P,2,this.length),this[P]|this[P+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(P,A){return P>>>=0,A||Q(P,2,this.length),this[P]<<8|this[P+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(P,A){return P>>>=0,A||Q(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+16777216*this[P+3]},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(P,A){return P>>>=0,A||Q(P,4,this.length),16777216*this[P]+(this[P+1]<<16|this[P+2]<<8|this[P+3])},r.prototype.readIntLE=function(P,A,D){P>>>=0,A>>>=0,D||Q(P,A,this.length);for(var W=this[P],ae=1,le=0;++le<A&&(ae*=256);)W+=this[P+le]*ae;return W>=(ae*=128)&&(W-=Math.pow(2,8*A)),W},r.prototype.readIntBE=function(P,A,D){P>>>=0,A>>>=0,D||Q(P,A,this.length);for(var W=A,ae=1,le=this[P+--W];W>0&&(ae*=256);)le+=this[P+--W]*ae;return le>=(ae*=128)&&(le-=Math.pow(2,8*A)),le},r.prototype.readInt8=function(P,A){return P>>>=0,A||Q(P,1,this.length),128&this[P]?-1*(255-this[P]+1):this[P]},r.prototype.readInt16LE=function(P,A){P>>>=0,A||Q(P,2,this.length);var D=this[P]|this[P+1]<<8;return 32768&D?4294901760|D:D},r.prototype.readInt16BE=function(P,A){P>>>=0,A||Q(P,2,this.length);var D=this[P+1]|this[P]<<8;return 32768&D?4294901760|D:D},r.prototype.readInt32LE=function(P,A){return P>>>=0,A||Q(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},r.prototype.readInt32BE=function(P,A){return P>>>=0,A||Q(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},r.prototype.readFloatLE=function(P,A){return P>>>=0,A||Q(P,4,this.length),m.read(this,P,!0,23,4)},r.prototype.readFloatBE=function(P,A){return P>>>=0,A||Q(P,4,this.length),m.read(this,P,!1,23,4)},r.prototype.readDoubleLE=function(P,A){return P>>>=0,A||Q(P,8,this.length),m.read(this,P,!0,52,8)},r.prototype.readDoubleBE=function(P,A){return P>>>=0,A||Q(P,8,this.length),m.read(this,P,!1,52,8)},r.prototype.writeUintLE=r.prototype.writeUIntLE=function(P,A,D,W){P=+P,A>>>=0,D>>>=0,W||ce(this,P,A,D,Math.pow(2,8*D)-1,0);var ae=1,le=0;for(this[A]=255&P;++le<D&&(ae*=256);)this[A+le]=P/ae&255;return A+D},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(P,A,D,W){P=+P,A>>>=0,D>>>=0,W||ce(this,P,A,D,Math.pow(2,8*D)-1,0);var ae=D-1,le=1;for(this[A+ae]=255&P;--ae>=0&&(le*=256);)this[A+ae]=P/le&255;return A+D},r.prototype.writeUint8=r.prototype.writeUInt8=function(P,A,D){return P=+P,A>>>=0,D||ce(this,P,A,1,255,0),this[A]=255&P,A+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(P,A,D){return P=+P,A>>>=0,D||ce(this,P,A,2,65535,0),this[A]=255&P,this[A+1]=P>>>8,A+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(P,A,D){return P=+P,A>>>=0,D||ce(this,P,A,2,65535,0),this[A]=P>>>8,this[A+1]=255&P,A+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(P,A,D){return P=+P,A>>>=0,D||ce(this,P,A,4,4294967295,0),this[A+3]=P>>>24,this[A+2]=P>>>16,this[A+1]=P>>>8,this[A]=255&P,A+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(P,A,D){return P=+P,A>>>=0,D||ce(this,P,A,4,4294967295,0),this[A]=P>>>24,this[A+1]=P>>>16,this[A+2]=P>>>8,this[A+3]=255&P,A+4},r.prototype.writeIntLE=function(P,A,D,W){if(P=+P,A>>>=0,!W){var ae=Math.pow(2,8*D-1);ce(this,P,A,D,ae-1,-ae)}var le=0,Ne=1,De=0;for(this[A]=255&P;++le<D&&(Ne*=256);)P<0&&De===0&&this[A+le-1]!==0&&(De=1),this[A+le]=(P/Ne>>0)-De&255;return A+D},r.prototype.writeIntBE=function(P,A,D,W){if(P=+P,A>>>=0,!W){var ae=Math.pow(2,8*D-1);ce(this,P,A,D,ae-1,-ae)}var le=D-1,Ne=1,De=0;for(this[A+le]=255&P;--le>=0&&(Ne*=256);)P<0&&De===0&&this[A+le+1]!==0&&(De=1),this[A+le]=(P/Ne>>0)-De&255;return A+D},r.prototype.writeInt8=function(P,A,D){return P=+P,A>>>=0,D||ce(this,P,A,1,127,-128),P<0&&(P=255+P+1),this[A]=255&P,A+1},r.prototype.writeInt16LE=function(P,A,D){return P=+P,A>>>=0,D||ce(this,P,A,2,32767,-32768),this[A]=255&P,this[A+1]=P>>>8,A+2},r.prototype.writeInt16BE=function(P,A,D){return P=+P,A>>>=0,D||ce(this,P,A,2,32767,-32768),this[A]=P>>>8,this[A+1]=255&P,A+2},r.prototype.writeInt32LE=function(P,A,D){return P=+P,A>>>=0,D||ce(this,P,A,4,2147483647,-2147483648),this[A]=255&P,this[A+1]=P>>>8,this[A+2]=P>>>16,this[A+3]=P>>>24,A+4},r.prototype.writeInt32BE=function(P,A,D){return P=+P,A>>>=0,D||ce(this,P,A,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[A]=P>>>24,this[A+1]=P>>>16,this[A+2]=P>>>8,this[A+3]=255&P,A+4},r.prototype.writeFloatLE=function(P,A,D){return Ae(this,P,A,!0,D)},r.prototype.writeFloatBE=function(P,A,D){return Ae(this,P,A,!1,D)},r.prototype.writeDoubleLE=function(P,A,D){return we(this,P,A,!0,D)},r.prototype.writeDoubleBE=function(P,A,D){return we(this,P,A,!1,D)},r.prototype.copy=function(P,A,D,W){if(!r.isBuffer(P))throw new TypeError("argument should be a Buffer");if(D||(D=0),W||W===0||(W=this.length),A>=P.length&&(A=P.length),A||(A=0),W>0&&W<D&&(W=D),W===D||P.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),P.length-A<W-D&&(W=P.length-A+D);var ae=W-D;return this===P&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,D,W):Uint8Array.prototype.set.call(P,this.subarray(D,W),A),ae},r.prototype.fill=function(P,A,D,W){if(typeof P=="string"){if(typeof A=="string"?(W=A,A=0,D=this.length):typeof D=="string"&&(W=D,D=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!r.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(P.length===1){var ae=P.charCodeAt(0);(W==="utf8"&&ae<128||W==="latin1")&&(P=ae)}}else typeof P=="number"?P&=255:typeof P=="boolean"&&(P=Number(P));if(A<0||this.length<A||this.length<D)throw new RangeError("Out of range index");if(D<=A)return this;var le;if(A>>>=0,D=D===void 0?this.length:D>>>0,P||(P=0),typeof P=="number")for(le=A;le<D;++le)this[le]=P;else{var Ne=r.isBuffer(P)?P:r.from(P,W),De=Ne.length;if(De===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(le=0;le<D-A;++le)this[le+A]=Ne[le%De]}return this};var Xe=/[^+/0-9A-Za-z-_]/g;function Ve(P,A){var D;A=A||1/0;for(var W=P.length,ae=null,le=[],Ne=0;Ne<W;++Ne){if((D=P.charCodeAt(Ne))>55295&&D<57344){if(!ae){if(D>56319){(A-=3)>-1&&le.push(239,191,189);continue}if(Ne+1===W){(A-=3)>-1&&le.push(239,191,189);continue}ae=D;continue}if(D<56320){(A-=3)>-1&&le.push(239,191,189),ae=D;continue}D=65536+(ae-55296<<10|D-56320)}else ae&&(A-=3)>-1&&le.push(239,191,189);if(ae=null,D<128){if((A-=1)<0)break;le.push(D)}else if(D<2048){if((A-=2)<0)break;le.push(D>>6|192,63&D|128)}else if(D<65536){if((A-=3)<0)break;le.push(D>>12|224,D>>6&63|128,63&D|128)}else{if(!(D<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;le.push(D>>18|240,D>>12&63|128,D>>6&63|128,63&D|128)}}return le}function st(P){return d.toByteArray((function(A){if((A=(A=A.split("=")[0]).trim().replace(Xe,"")).length<2)return"";for(;A.length%4!=0;)A+="=";return A})(P))}function tt(P,A,D,W){for(var ae=0;ae<W&&!(ae+D>=A.length||ae>=P.length);++ae)A[ae+D]=P[ae];return ae}function he(P,A){return P instanceof A||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===A.name}function de(P){return P!=P}var ze=(function(){for(var P="0123456789abcdef",A=new Array(256),D=0;D<16;++D)for(var W=16*D,ae=0;ae<16;++ae)A[W+ae]=P[D]+P[ae];return A})()},584:_=>{_.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},5108:(_,l,o)=>{var c=o(9539),d=o(8583);function m(){return new Date().getTime()}var h,s=Array.prototype.slice,a={};h=o.g!==void 0&&o.g.console?o.g.console:typeof window<"u"&&window.console?window.console:{};for(var r=[[function(){},"log"],[function(){h.log.apply(h,arguments)},"info"],[function(){h.log.apply(h,arguments)},"warn"],[function(){h.warn.apply(h,arguments)},"error"],[function(f){a[f]=m()},"time"],[function(f){var p=a[f];if(!p)throw new Error("No such label: "+f);delete a[f];var y=m()-p;h.log(f+": "+y+"ms")},"timeEnd"],[function(){var f=new Error;f.name="Trace",f.message=c.format.apply(null,arguments),h.error(f.stack)},"trace"],[function(f){h.log(c.inspect(f)+`
`)},"dir"],[function(f){if(!f){var p=s.call(arguments,1);d.ok(!1,c.format.apply(null,p))}},"assert"]],n=0;n<r.length;n++){var t=r[n],i=t[0],u=t[1];h[u]||(h[u]=i)}_.exports=h},7187:(_,l,o)=>{var c=o(5108),d=Object.create||function(b){var E=function(){};return E.prototype=b,new E},m=Object.keys||function(b){var E=[];for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&E.push(x);return x},h=Function.prototype.bind||function(b){var E=this;return function(){return E.apply(b,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=d(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}_.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0;var a,r=10;try{var n={};Object.defineProperty&&Object.defineProperty(n,"x",{value:0}),a=n.x===0}catch{a=!1}function t(b){return b._maxListeners===void 0?s.defaultMaxListeners:b._maxListeners}function i(b,E,x,M){var S,O,C;if(typeof x!="function")throw new TypeError('"listener" argument must be a function');if((O=b._events)?(O.newListener&&(b.emit("newListener",E,x.listener?x.listener:x),O=b._events),C=O[E]):(O=b._events=d(null),b._eventsCount=0),C){if(typeof C=="function"?C=O[E]=M?[x,C]:[C,x]:M?C.unshift(x):C.push(x),!C.warned&&(S=t(b))&&S>0&&C.length>S){C.warned=!0;var T=new Error("Possible EventEmitter memory leak detected. "+C.length+' "'+String(E)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');T.name="MaxListenersExceededWarning",T.emitter=b,T.type=E,T.count=C.length,typeof c=="object"&&c.warn&&c.warn("%s: %s",T.name,T.message)}}else C=O[E]=x,++b._eventsCount;return b}function u(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var b=new Array(arguments.length),E=0;E<b.length;++E)b[E]=arguments[E];this.listener.apply(this.target,b)}}function f(b,E,x){var M={fired:!1,wrapFn:void 0,target:b,type:E,listener:x},S=h.call(u,M);return S.listener=x,M.wrapFn=S,S}function p(b,E,x){var M=b._events;if(!M)return[];var S=M[E];return S?typeof S=="function"?x?[S.listener||S]:[S]:x?(function(O){for(var C=new Array(O.length),T=0;T<C.length;++T)C[T]=O[T].listener||O[T];return C})(S):g(S,S.length):[]}function y(b){var E=this._events;if(E){var x=E[b];if(typeof x=="function")return 1;if(x)return x.length}return 0}function g(b,E){for(var x=new Array(E),M=0;M<E;++M)x[M]=b[M];return x}a?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(b){if(typeof b!="number"||b<0||b!=b)throw new TypeError('"defaultMaxListeners" must be a positive number');r=b}}):s.defaultMaxListeners=r,s.prototype.setMaxListeners=function(b){if(typeof b!="number"||b<0||isNaN(b))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=b,this},s.prototype.getMaxListeners=function(){return t(this)},s.prototype.emit=function(b){var E,x,M,S,O,C,T=b==="error";if(C=this._events)T=T&&C.error==null;else if(!T)return!1;if(T){if(arguments.length>1&&(E=arguments[1]),E instanceof Error)throw E;var R=new Error('Unhandled "error" event. ('+E+")");throw R.context=E,R}if(!(x=C[b]))return!1;var B=typeof x=="function";switch(M=arguments.length){case 1:(function(z,L,Y){if(L)z.call(Y);else for(var ie=z.length,$=g(z,ie),Q=0;Q<ie;++Q)$[Q].call(Y)})(x,B,this);break;case 2:(function(z,L,Y,ie){if(L)z.call(Y,ie);else for(var $=z.length,Q=g(z,$),ce=0;ce<$;++ce)Q[ce].call(Y,ie)})(x,B,this,arguments[1]);break;case 3:(function(z,L,Y,ie,$){if(L)z.call(Y,ie,$);else for(var Q=z.length,ce=g(z,Q),be=0;be<Q;++be)ce[be].call(Y,ie,$)})(x,B,this,arguments[1],arguments[2]);break;case 4:(function(z,L,Y,ie,$,Q){if(L)z.call(Y,ie,$,Q);else for(var ce=z.length,be=g(z,ce),Ae=0;Ae<ce;++Ae)be[Ae].call(Y,ie,$,Q)})(x,B,this,arguments[1],arguments[2],arguments[3]);break;default:for(S=new Array(M-1),O=1;O<M;O++)S[O-1]=arguments[O];(function(z,L,Y,ie){if(L)z.apply(Y,ie);else for(var $=z.length,Q=g(z,$),ce=0;ce<$;++ce)Q[ce].apply(Y,ie)})(x,B,this,S)}return!0},s.prototype.addListener=function(b,E){return i(this,b,E,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(b,E){return i(this,b,E,!0)},s.prototype.once=function(b,E){if(typeof E!="function")throw new TypeError('"listener" argument must be a function');return this.on(b,f(this,b,E)),this},s.prototype.prependOnceListener=function(b,E){if(typeof E!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(b,f(this,b,E)),this},s.prototype.removeListener=function(b,E){var x,M,S,O,C;if(typeof E!="function")throw new TypeError('"listener" argument must be a function');if(!(M=this._events))return this;if(!(x=M[b]))return this;if(x===E||x.listener===E)--this._eventsCount==0?this._events=d(null):(delete M[b],M.removeListener&&this.emit("removeListener",b,x.listener||E));else if(typeof x!="function"){for(S=-1,O=x.length-1;O>=0;O--)if(x[O]===E||x[O].listener===E){C=x[O].listener,S=O;break}if(S<0)return this;S===0?x.shift():(function(T,R){for(var B=R,z=B+1,L=T.length;z<L;B+=1,z+=1)T[B]=T[z];T.pop()})(x,S),x.length===1&&(M[b]=x[0]),M.removeListener&&this.emit("removeListener",b,C||E)}return this},s.prototype.removeAllListeners=function(b){var E,x,M;if(!(x=this._events))return this;if(!x.removeListener)return arguments.length===0?(this._events=d(null),this._eventsCount=0):x[b]&&(--this._eventsCount==0?this._events=d(null):delete x[b]),this;if(arguments.length===0){var S,O=m(x);for(M=0;M<O.length;++M)(S=O[M])!=="removeListener"&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events=d(null),this._eventsCount=0,this}if(typeof(E=x[b])=="function")this.removeListener(b,E);else if(E)for(M=E.length-1;M>=0;M--)this.removeListener(b,E[M]);return this},s.prototype.listeners=function(b){return p(this,b,!0)},s.prototype.rawListeners=function(b){return p(this,b,!1)},s.listenerCount=function(b,E){return typeof b.listenerCount=="function"?b.listenerCount(E):y.call(b,E)},s.prototype.listenerCount=y,s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},1:(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__(3085).lW;const Token=__webpack_require__(3416),strtok3=__webpack_require__(5849),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=__webpack_require__(6188),supported=__webpack_require__(9898),minimumBytes=4100;async function fromStream(_){const l=await strtok3.fromStream(_);try{return await fromTokenizer(l)}finally{await l.close()}}async function fromBuffer(_){if(!(_ instanceof Uint8Array||_ instanceof ArrayBuffer||Buffer.isBuffer(_)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof _}\``);const l=_ instanceof Buffer?_:Buffer.from(_);if(l&&l.length>1)return fromTokenizer(strtok3.fromBuffer(l))}function _check(_,l,o){o={offset:0,...o};for(const[c,d]of l.entries())if(o.mask){if(d!==(o.mask[c]&_[c+o.offset]))return!1}else if(d!==_[c+o.offset])return!1;return!0}async function fromTokenizer(_){try{return _fromTokenizer(_)}catch(l){if(!(l instanceof strtok3.EndOfStreamError))throw l}}async function _fromTokenizer(_){let l=Buffer.alloc(minimumBytes);const o=(d,m)=>_check(l,d,m),c=(d,m)=>o(stringToBytes(d),m);if(_.fileInfo.size||(_.fileInfo.size=Number.MAX_SAFE_INTEGER),await _.peekBuffer(l,{length:12,mayBeLess:!0}),o([66,77]))return{ext:"bmp",mime:"image/bmp"};if(o([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(o([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(o([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(o([37,33]))return await _.peekBuffer(l,{length:24,mayBeLess:!0}),c("PS-Adobe-",{offset:2})&&c(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(o([31,160])||o([31,157]))return{ext:"Z",mime:"application/x-compress"};if(o([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(o([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(o([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(o([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(c("ID3")){await _.ignore(6);const d=await _.readToken(uint32SyncSafeToken);return _.position+d>_.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await _.ignore(d),fromTokenizer(_))}if(c("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((l[0]===67||l[0]===70)&&o([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(o([71,73,70]))return{ext:"gif",mime:"image/gif"};if(c("FLIF"))return{ext:"flif",mime:"image/flif"};if(c("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(c("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(c("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(c("FORM"))return{ext:"aif",mime:"audio/aiff"};if(c("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(o([80,75,3,4])){try{for(;_.position+30<_.fileInfo.size;){await _.readBuffer(l,{length:30});const d={compressedSize:l.readUInt32LE(18),uncompressedSize:l.readUInt32LE(22),filenameLength:l.readUInt16LE(26),extraFieldLength:l.readUInt16LE(28)};if(d.filename=await _.readToken(new Token.StringType(d.filenameLength,"utf-8")),await _.ignore(d.extraFieldLength),d.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(d.filename.endsWith(".rels")||d.filename.endsWith(".xml"))switch(d.filename.split("/")[0]){case"_rels":default:break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}if(d.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(d.filename.startsWith("3D/")&&d.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(d.filename==="mimetype"&&d.compressedSize===d.uncompressedSize)switch(await _.readToken(new Token.StringType(d.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}if(d.compressedSize===0){let m=-1;for(;m<0&&_.position<_.fileInfo.size;)await _.peekBuffer(l,{mayBeLess:!0}),m=l.indexOf("504B0304",0,"hex"),await _.ignore(m>=0?m:l.length)}else await _.ignore(d.compressedSize)}}catch(d){if(!(d instanceof strtok3.EndOfStreamError))throw d}return{ext:"zip",mime:"application/zip"}}if(c("OggS")){await _.ignore(28);const d=Buffer.alloc(8);return await _.readBuffer(d),_check(d,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(d,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(d,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(d,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(d,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(d,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(o([80,75])&&(l[2]===3||l[2]===5||l[2]===7)&&(l[3]===4||l[3]===6||l[3]===8))return{ext:"zip",mime:"application/zip"};if(c("ftyp",{offset:4})&&(96&l[8])!=0){const d=l.toString("binary",8,12).replace("\0"," ").trim();switch(d){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return d.startsWith("3g")?d.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(c("MThd"))return{ext:"mid",mime:"audio/midi"};if(c("wOFF")&&(o([0,1,0,0],{offset:4})||c("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(c("wOF2")&&(o([0,1,0,0],{offset:4})||c("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(o([212,195,178,161])||o([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(c("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(c("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(c("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(o([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(c("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(c("%PDF")){await _.ignore(1350);const d=10485760,m=Buffer.alloc(Math.min(d,_.fileInfo.size));return await _.readBuffer(m,{mayBeLess:!0}),m.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(o([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(o([73,73,42,0]))return c("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:o([28,0,254,0],{offset:8})||o([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:o([8,0,0,0],{offset:4})&&(o([45,0,254,0],{offset:8})||o([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(l=Buffer.alloc(24),await _.peekBuffer(l),(o([16,251,134,1],{offset:4})||o([8,0,0,0],{offset:4}))&&o([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(o([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(c("MAC "))return{ext:"ape",mime:"audio/ape"};if(o([26,69,223,163])){async function d(){const a=await _.peekNumber(Token.UINT8);let r=128,n=0;for(;(a&r)==0&&r!==0;)++n,r>>=1;const t=Buffer.alloc(n+1);return await _.readBuffer(t),t}async function m(){const a=await d(),r=await d();r[0]^=128>>r.length-1;const n=Math.min(6,r.length);return{id:a.readUIntBE(0,a.length),len:r.readUIntBE(r.length-n,n)}}async function h(a,r){for(;r>0;){const n=await m();if(n.id===17026)return _.readToken(new Token.StringType(n.len,"utf-8"));await _.ignore(n.len),--r}}const s=await m();switch(await h(0,s.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(o([82,73,70,70])){if(o([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(o([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(o([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(c("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(o([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(c("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(c("MSCF")||c("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(o([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(o([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(o([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(o([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(c("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(c("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(o([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(c("IMPM"))return{ext:"it",mime:"audio/x-it"};if(c("-lh0-",{offset:2})||c("-lh1-",{offset:2})||c("-lh2-",{offset:2})||c("-lh3-",{offset:2})||c("-lh4-",{offset:2})||c("-lh5-",{offset:2})||c("-lh6-",{offset:2})||c("-lh7-",{offset:2})||c("-lzs-",{offset:2})||c("-lz4-",{offset:2})||c("-lz5-",{offset:2})||c("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(o([0,0,1,186])){if(o([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(o([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(c("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(o([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(c("<?xml "))return{ext:"xml",mime:"application/xml"};if(o([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(o([82,97,114,33,26,7])&&(l[6]===0||l[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(c("solid "))return{ext:"stl",mime:"model/stl"};if(c("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(c("!<arch>"))return await _.ignore(8),await _.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(o([137,80,78,71,13,10,26,10])){async function d(){return{length:await _.readToken(Token.INT32_BE),type:await _.readToken(new Token.StringType(4,"binary"))}}await _.ignore(8);do{const m=await d();if(m.length<0)return;switch(m.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await _.ignore(m.length+4)}}while(_.position+8<_.fileInfo.size);return{ext:"png",mime:"image/png"}}if(o([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(o([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(o([102,114,101,101],{offset:4})||o([109,100,97,116],{offset:4})||o([109,111,111,118],{offset:4})||o([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(o([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(c("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(o([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(o([48,38,178,117,142,102,207,17,166,217])){async function d(){const m=Buffer.alloc(16);return await _.readBuffer(m),{id:m,size:Number(await _.readToken(Token.UINT64_LE))}}for(await _.ignore(30);_.position+24<_.fileInfo.size;){const m=await d();let h=m.size-24;if(_check(m.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const s=Buffer.alloc(16);if(h-=await _.readBuffer(s),_check(s,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(s,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await _.ignore(h)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(o([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((o([126,16,4])||o([126,24,4]))&&o([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(o([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(o([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await _.ignore(20),await _.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(o([255,10])||o([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(o([0,0,1,186])||o([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(o([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(o([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(o([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(o([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await _.peekBuffer(l,{length:Math.min(256,_.fileInfo.size),mayBeLess:!0}),c("BEGIN:")){if(c("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(c("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(c("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(c("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(c("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(o([4,0,0,0])&&l.length>=16){const d=l.readUInt32LE(12);if(d>12&&l.length>=d+16)try{const m=l.slice(16,d+16).toString();if(JSON.parse(m).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(o([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(c("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(o([71],{offset:4})&&(o([71],{offset:192})||o([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(o([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(o([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(o([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(o([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(o([76,80],{offset:34})&&(o([0,0,1],{offset:8})||o([1,0,2],{offset:8})||o([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(o([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await _.peekBuffer(l,{length:Math.min(512,_.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(l))return{ext:"tar",mime:"application/x-tar"};if(o([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(c("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(l.length>=2&&o([255,224],{offset:0,mask:[255,224]})){if(o([16],{offset:1,mask:[22]}))return o([8],{offset:1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(o([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(o([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(o([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise(((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",(async()=>{const _=new stream.PassThrough;let l;l=stream.pipeline?stream.pipeline(readableStream,_,(()=>{})):readableStream.pipe(_);const o=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const c=await fromBuffer(o);_.fileType=c}catch(c){reject(c)}resolve(l)}))})),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get:()=>new Set(supported.extensions)}),Object.defineProperty(fileType,"mimeTypes",{get:()=>new Set(supported.mimeTypes)}),module.exports=fileType},7769:(_,l,o)=>{const c=o(6597),d=o(1),m={fromFile:async function(h){const s=await c.fromFile(h);try{return await d.fromTokenizer(s)}finally{await s.close()}}};Object.assign(m,d),Object.defineProperty(m,"extensions",{get:()=>d.extensions}),Object.defineProperty(m,"mimeTypes",{get:()=>d.mimeTypes}),_.exports=m},9898:_=>{_.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}},6188:(_,l)=>{l.stringToBytes=o=>[...o].map((c=>c.charCodeAt(0))),l.tarHeaderChecksumMatches=(o,c=0)=>{const d=parseInt(o.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(d))return!1;let m=256;for(let h=c;h<c+148;h++)m+=o[h];for(let h=c+156;h<c+512;h++)m+=o[h];return d===m},l.uint32SyncSafeToken={get:(o,c)=>127&o[c+3]|o[c+2]<<7|o[c+1]<<14|o[c]<<21,len:4}},1787:(_,l,o)=>{var c=o(2582),d=o(4102),m=o(1540),h=o(9705).default,s=m.featureEach,a=(m.coordEach,d.polygon,d.featureCollection);function r(n){var t=new c(n);return t.insert=function(i){if(i.type!=="Feature")throw new Error("invalid feature");return i.bbox=i.bbox?i.bbox:h(i),c.prototype.insert.call(this,i)},t.load=function(i){var u=[];return Array.isArray(i)?i.forEach((function(f){if(f.type!=="Feature")throw new Error("invalid features");f.bbox=f.bbox?f.bbox:h(f),u.push(f)})):s(i,(function(f){if(f.type!=="Feature")throw new Error("invalid features");f.bbox=f.bbox?f.bbox:h(f),u.push(f)})),c.prototype.load.call(this,u)},t.remove=function(i,u){if(i.type!=="Feature")throw new Error("invalid feature");return i.bbox=i.bbox?i.bbox:h(i),c.prototype.remove.call(this,i,u)},t.clear=function(){return c.prototype.clear.call(this)},t.search=function(i){var u=c.prototype.search.call(this,this.toBBox(i));return a(u)},t.collides=function(i){return c.prototype.collides.call(this,this.toBBox(i))},t.all=function(){var i=c.prototype.all.call(this);return a(i)},t.toJSON=function(){return c.prototype.toJSON.call(this)},t.fromJSON=function(i){return c.prototype.fromJSON.call(this,i)},t.toBBox=function(i){var u;if(i.bbox)u=i.bbox;else if(Array.isArray(i)&&i.length===4)u=i;else if(Array.isArray(i)&&i.length===6)u=[i[0],i[1],i[3],i[4]];else if(i.type==="Feature")u=h(i);else{if(i.type!=="FeatureCollection")throw new Error("invalid geojson");u=h(i)}return{minX:u[0],minY:u[1],maxX:u[2],maxY:u[3]}},t}_.exports=r,_.exports.default=r},645:(_,l)=>{l.read=function(o,c,d,m,h){var s,a,r=8*h-m-1,n=(1<<r)-1,t=n>>1,i=-7,u=d?h-1:0,f=d?-1:1,p=o[c+u];for(u+=f,s=p&(1<<-i)-1,p>>=-i,i+=r;i>0;s=256*s+o[c+u],u+=f,i-=8);for(a=s&(1<<-i)-1,s>>=-i,i+=m;i>0;a=256*a+o[c+u],u+=f,i-=8);if(s===0)s=1-t;else{if(s===n)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,m),s-=t}return(p?-1:1)*a*Math.pow(2,s-m)},l.write=function(o,c,d,m,h,s){var a,r,n,t=8*s-h-1,i=(1<<t)-1,u=i>>1,f=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=m?0:s-1,y=m?1:-1,g=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(r=isNaN(c)?1:0,a=i):(a=Math.floor(Math.log(c)/Math.LN2),c*(n=Math.pow(2,-a))<1&&(a--,n*=2),(c+=a+u>=1?f/n:f*Math.pow(2,1-u))*n>=2&&(a++,n/=2),a+u>=i?(r=0,a=i):a+u>=1?(r=(c*n-1)*Math.pow(2,h),a+=u):(r=c*Math.pow(2,u-1)*Math.pow(2,h),a=0));h>=8;o[d+p]=255&r,p+=y,r/=256,h-=8);for(a=a<<h|r,t+=h;t>0;o[d+p]=255&a,p+=y,a/=256,t-=8);o[d+p-y]|=128*g}},8849:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=o(9126),d=Object.keys(c.typeHandlers),m={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};l.detector=function(h){const s=h[0];if(s in m){const a=m[s];if(c.typeHandlers[a].validate(h))return a}return d.find((a=>c.typeHandlers[a].validate(h)))}},9248:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=o(8497);if(!("promises"in c)){class d{constructor(h){this.fd=h}stat(){return new Promise(((h,s)=>{c.fstat(this.fd,((a,r)=>{a?s(a):h(r)}))}))}read(h,s,a,r){return new Promise(((n,t)=>{c.read(this.fd,h,s,a,r,(i=>{i?t(i):n()}))}))}close(){return new Promise(((h,s)=>{c.close(this.fd,(a=>{a?s(a):h()}))}))}}Object.defineProperty(c,"promises",{value:{open:(m,h)=>new Promise(((s,a)=>{c.open(m,h,((r,n)=>{r?a(r):s(new d(n))}))}))},writable:!1})}},7935:function(_,l,o){var c=o(3085).lW,d=o(4155),m=this&&this.__awaiter||function(p,y,g,b){return new(g||(g=Promise))((function(E,x){function M(C){try{O(b.next(C))}catch(T){x(T)}}function S(C){try{O(b.throw(C))}catch(T){x(T)}}function O(C){var T;C.done?E(C.value):(T=C.value,T instanceof g?T:new g((function(R){R(T)}))).then(M,S)}O((b=b.apply(p,y||[])).next())}))};Object.defineProperty(l,"__esModule",{value:!0});const h=o(8497),s=o(3935),a=o(9189),r=o(9126),n=o(8849);o(9248);const t=524288,i=new a.default({concurrency:100,autostart:!0});function u(p,y){const g=n.detector(p);if(g&&g in r.typeHandlers){const b=r.typeHandlers[g].calculate(p,y);if(b!==void 0)return b.type=g,b}throw new TypeError("unsupported file type: "+g+" (file: "+y+")")}function f(p,y){if(c.isBuffer(p))return u(p);if(typeof p!="string")throw new TypeError("invalid invocation");const g=s.resolve(p);if(typeof y!="function"){const b=(function(E){const x=h.openSync(E,"r"),M=h.fstatSync(x).size,S=Math.min(M,t),O=c.alloc(S);return h.readSync(x,O,0,S,0),h.closeSync(x),O})(g);return u(b,g)}i.push((()=>(function(b){return m(this,void 0,void 0,(function*(){const E=yield h.promises.open(b,"r"),{size:x}=yield E.stat();if(x<=0)throw new Error("Empty file");const M=Math.min(x,t),S=c.alloc(M);return yield E.read(S,0,M,0),yield E.close(),S}))})(g).then((b=>d.nextTick(y,null,u(b,g)))).catch(y)))}_.exports=l=f,l.imageSize=f,l.setConcurrency=p=>{i.concurrency=p},l.types=Object.keys(r.typeHandlers)},8557:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.readUInt=function(o,c,d,m){return d=d||0,o["readUInt"+c+(m?"BE":"LE")].call(o,d)}},9126:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=o(3645),d=o(3552),m=o(1680),h=o(1542),s=o(7163),a=o(7800),r=o(6625),n=o(1558),t=o(2229),i=o(4663),u=o(6221),f=o(7851),p=o(2602),y=o(8531),g=o(9948),b=o(5236);l.typeHandlers={bmp:c.BMP,cur:d.CUR,dds:m.DDS,gif:h.GIF,icns:s.ICNS,ico:a.ICO,j2c:r.J2C,jp2:n.JP2,jpg:t.JPG,ktx:i.KTX,png:u.PNG,pnm:f.PNM,psd:p.PSD,svg:y.SVG,tiff:g.TIFF,webp:b.WEBP}},3645:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BMP={validate:o=>o.toString("ascii",0,2)==="BM",calculate:o=>({height:Math.abs(o.readInt32LE(22)),width:o.readUInt32LE(18)})}},3552:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=o(7800);l.CUR={validate:d=>d.readUInt16LE(0)===0&&d.readUInt16LE(2)===2,calculate:d=>c.ICO.calculate(d)}},1680:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DDS={validate:o=>o.readUInt32LE(0)===542327876,calculate:o=>({height:o.readUInt32LE(12),width:o.readUInt32LE(16)})}},1542:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const o=/^GIF8[79]a/;l.GIF={validate(c){const d=c.toString("ascii",0,6);return o.test(d)},calculate:c=>({height:c.readUInt16LE(8),width:c.readUInt16LE(6)})}},7163:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const o=4,c={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function d(h,s){const a=s+o;return[h.toString("ascii",s,a),h.readUInt32BE(a)]}function m(h){const s=c[h];return{width:s,height:s,type:h}}l.ICNS={validate:h=>h.toString("ascii",0,4)==="icns",calculate(h){const s=h.length,a=h.readUInt32BE(4);let r=8,n=d(h,r),t=m(n[0]);if(r+=n[1],r===a)return t;const i={height:t.height,images:[t],width:t.width};for(;r<a&&r<s;)n=d(h,r),t=m(n[0]),r+=n[1],i.images.push(t);return i}}},7800:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const o=6,c=16;function d(h,s){const a=h.readUInt8(s);return a===0?256:a}function m(h,s){const a=o+s*c;return{height:d(h,a+1),width:d(h,a)}}l.ICO={validate:h=>h.readUInt16LE(0)===0&&h.readUInt16LE(2)===1,calculate(h){const s=h.readUInt16LE(4),a=m(h,0);if(s===1)return a;const r=[a];for(let n=1;n<s;n+=1)r.push(m(h,n));return{height:a.height,images:r,width:a.width}}}},6625:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.J2C={validate:o=>o.toString("hex",0,4)==="ff4fff51",calculate:o=>({height:o.readUInt32BE(12),width:o.readUInt32BE(8)})}},1558:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const o=c=>({height:c.readUInt32BE(4),width:c.readUInt32BE(8)});l.JP2={validate(c){const d=c.toString("hex",4,8),m=c.readUInt32BE(0);if(d!=="6a502020"||m<1)return!1;const h=m+4,s=c.readUInt32BE(m);return c.slice(h,h+s).toString("hex",0,4)==="66747970"},calculate(c){const d=c.readUInt32BE(0);let m=d+4+c.readUInt16BE(d+2);switch(c.toString("hex",m,m+4)){case"72726571":return m=m+4+4+(h=>{const s=h.readUInt8(0);let a=1+2*s;return a=a+2+h.readUInt16BE(a)*(2+s),a+2+h.readUInt16BE(a)*(16+s)})(c.slice(m+4)),o(c.slice(m+8,m+24));case"6a703268":return o(c.slice(m+8,m+24));default:throw new TypeError("Unsupported header found: "+c.toString("ascii",m,m+4))}}}},2229:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const c=o(8557),d="45786966",m=2,h=6,s=2,a="4d4d",r="4949",n=12,t=2;function i(y){return y.toString("hex",2,6)===d}function u(y,g){return{height:y.readUInt16BE(g),width:y.readUInt16BE(g+2)}}function f(y,g){const b=y.slice(m,g),E=b.toString("hex",h,h+s),x=E===a;if(x||E===r)return(function(M,S){const O=h+8,C=c.readUInt(M,16,O,S);for(let T=0;T<C;T++){const R=O+t+T*n,B=R+n;if(R>M.length)return;const z=M.slice(R,B);if(c.readUInt(z,16,0,S)===274)return c.readUInt(z,16,2,S)!==3||c.readUInt(z,32,4,S)!==1?void 0:c.readUInt(z,16,8,S)}})(b,x)}function p(y,g){if(g>y.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(y[g]!==255)throw new TypeError("Invalid JPG, marker table corrupted")}l.JPG={validate:y=>y.toString("hex",0,2)==="ffd8",calculate(y){let g,b;for(y=y.slice(4);y.length;){const E=y.readUInt16BE(0);if(i(y)&&(g=f(y,E)),p(y,E),b=y[E+1],b===192||b===193||b===194){const x=u(y,E+5);return g?{height:x.height,orientation:g,width:x.width}:x}y=y.slice(E+2)}throw new TypeError("Invalid JPG, no size found")}}},4663:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.KTX={validate:o=>o.toString("ascii",1,7)==="KTX 11",calculate:o=>({height:o.readUInt32LE(40),width:o.readUInt32LE(36)})}},6221:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const o="CgBI";l.PNG={validate(c){if(c.toString("ascii",1,8)===`PNG\r

`){let d=c.toString("ascii",12,16);if(d===o&&(d=c.toString("ascii",28,32)),d!=="IHDR")throw new TypeError("Invalid PNG");return!0}return!1},calculate:c=>c.toString("ascii",12,16)===o?{height:c.readUInt32BE(36),width:c.readUInt32BE(32)}:{height:c.readUInt32BE(20),width:c.readUInt32BE(16)}}},7851:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const o={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},c=Object.keys(o),d={default:m=>{let h=[];for(;m.length>0;){const s=m.shift();if(s[0]!=="#"){h=s.split(" ");break}}if(h.length===2)return{height:parseInt(h[1],10),width:parseInt(h[0],10)};throw new TypeError("Invalid PNM")},pam:m=>{const h={};for(;m.length>0;){const s=m.shift();if(s.length>16||s.charCodeAt(0)>128)continue;const[a,r]=s.split(" ");if(a&&r&&(h[a.toLowerCase()]=parseInt(r,10)),h.height&&h.width)break}if(h.height&&h.width)return{height:h.height,width:h.width};throw new TypeError("Invalid PAM")}};l.PNM={validate(m){const h=m.toString("ascii",0,2);return c.includes(h)},calculate(m){const h=m.toString("ascii",0,2),s=o[h],a=m.toString("ascii",3).split(/[\r\n]+/);return(d[s]||d.default)(a)}}},2602:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PSD={validate:o=>o.toString("ascii",0,4)==="8BPS",calculate:o=>({height:o.readUInt32BE(14),width:o.readUInt32BE(18)})}},8531:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const o=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,c={height:/\sheight=(['"])([^%]+?)\1/,root:o,viewbox:/\sviewBox=(['"])(.+?)\1/,width:/\swidth=(['"])([^%]+?)\1/},d=2.54,m={cm:96/d,em:16,ex:8,m:96/d*100,mm:96/d/10,pc:96/72/12,pt:96/72};function h(a){const r=/([0-9.]+)([a-z]*)/.exec(a);if(r)return Math.round(parseFloat(r[1])*(m[r[2]]||1))}function s(a){const r=a.split(" ");return{height:h(r[3]),width:h(r[2])}}l.SVG={validate(a){const r=String(a);return o.test(r)},calculate(a){const r=a.toString("utf8").match(c.root);if(r){const n=(function(t){const i=t.match(c.width),u=t.match(c.height),f=t.match(c.viewbox);return{height:u&&h(u[2]),viewbox:f&&s(f[2]),width:i&&h(i[2])}})(r[0]);if(n.width&&n.height)return(function(t){return{height:t.height,width:t.width}})(n);if(n.viewbox)return(function(t,i){const u=i.width/i.height;return t.width?{height:Math.floor(t.width/u),width:t.width}:t.height?{height:t.height,width:Math.floor(t.height*u)}:{height:i.height,width:i.width}})(n,n.viewbox)}throw new TypeError("Invalid SVG")}}},9948:(_,l,o)=>{var c=o(3085).lW;Object.defineProperty(l,"__esModule",{value:!0});const d=o(7990),m=o(8557);function h(r,n){const t=m.readUInt(r,16,8,n);return(m.readUInt(r,16,10,n)<<16)+t}function s(r){if(r.length>24)return r.slice(12)}const a=["49492a00","4d4d002a"];l.TIFF={validate:r=>a.includes(r.toString("hex",0,4)),calculate(r,n){if(!n)throw new TypeError("Tiff doesn't support buffer");const t=(function(y){const g=y.toString("ascii",0,2);return g==="II"?"LE":g==="MM"?"BE":void 0})(r)==="BE",i=(function(y,g,b){const E=m.readUInt(y,32,4,b);let x=1024;const M=d.statSync(g).size;E+x>M&&(x=M-E-10);const S=c.alloc(x),O=d.openSync(g,"r");return d.readSync(O,S,0,x,E),S.slice(2)})(r,n,t),u=(function(y,g){const b={};let E=y;for(;E&&E.length;){const x=m.readUInt(E,16,0,g),M=m.readUInt(E,16,2,g),S=m.readUInt(E,32,4,g);if(x===0)break;S!==1||M!==3&&M!==4||(b[x]=h(E,g)),E=s(E)}return b})(i,t),f=u[256],p=u[257];if(!f||!p)throw new TypeError("Invalid Tiff. Missing tags");return{height:p,width:f}}}},5236:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WEBP={validate(o){const c=o.toString("ascii",0,4)==="RIFF",d=o.toString("ascii",8,12)==="WEBP",m=o.toString("ascii",12,15)==="VP8";return c&&d&&m},calculate(o){const c=o.toString("ascii",12,16);if(o=o.slice(20,30),c==="VP8X"){const m=o[0];if((192&m)==0&&(1&m)==0)return(function(h){return{height:1+h.readUIntLE(7,3),width:1+h.readUIntLE(4,3)}})(o);throw new TypeError("Invalid WebP")}if(c==="VP8 "&&o[0]!==47)return(function(m){return{height:16383&m.readInt16LE(8),width:16383&m.readInt16LE(6)}})(o);const d=o.toString("hex",3,6);if(c==="VP8L"&&d!=="9d012a")return(function(m){return{height:1+((15&m[4])<<10|m[3]<<2|(192&m[2])>>6),width:1+((63&m[2])<<8|m[1])}})(o);throw new TypeError("Invalid WebP")}}},5717:_=>{typeof Object.create=="function"?_.exports=function(l,o){o&&(l.super_=o,l.prototype=Object.create(o.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:_.exports=function(l,o){if(o){l.super_=o;var c=function(){};c.prototype=o.prototype,l.prototype=new c,l.prototype.constructor=l}}},8552:(_,l,o)=>{var c=o(852)(o(5639),"DataView");_.exports=c},1989:(_,l,o)=>{var c=o(1789),d=o(401),m=o(7667),h=o(1327),s=o(1866);function a(r){var n=-1,t=r==null?0:r.length;for(this.clear();++n<t;){var i=r[n];this.set(i[0],i[1])}}a.prototype.clear=c,a.prototype.delete=d,a.prototype.get=m,a.prototype.has=h,a.prototype.set=s,_.exports=a},8407:(_,l,o)=>{var c=o(7040),d=o(4125),m=o(2117),h=o(7518),s=o(4705);function a(r){var n=-1,t=r==null?0:r.length;for(this.clear();++n<t;){var i=r[n];this.set(i[0],i[1])}}a.prototype.clear=c,a.prototype.delete=d,a.prototype.get=m,a.prototype.has=h,a.prototype.set=s,_.exports=a},7071:(_,l,o)=>{var c=o(852)(o(5639),"Map");_.exports=c},3369:(_,l,o)=>{var c=o(4785),d=o(1285),m=o(6e3),h=o(9916),s=o(5265);function a(r){var n=-1,t=r==null?0:r.length;for(this.clear();++n<t;){var i=r[n];this.set(i[0],i[1])}}a.prototype.clear=c,a.prototype.delete=d,a.prototype.get=m,a.prototype.has=h,a.prototype.set=s,_.exports=a},3818:(_,l,o)=>{var c=o(852)(o(5639),"Promise");_.exports=c},8525:(_,l,o)=>{var c=o(852)(o(5639),"Set");_.exports=c},8668:(_,l,o)=>{var c=o(3369),d=o(619),m=o(2385);function h(s){var a=-1,r=s==null?0:s.length;for(this.__data__=new c;++a<r;)this.add(s[a])}h.prototype.add=h.prototype.push=d,h.prototype.has=m,_.exports=h},6384:(_,l,o)=>{var c=o(8407),d=o(7465),m=o(3779),h=o(7599),s=o(4758),a=o(4309);function r(n){var t=this.__data__=new c(n);this.size=t.size}r.prototype.clear=d,r.prototype.delete=m,r.prototype.get=h,r.prototype.has=s,r.prototype.set=a,_.exports=r},2705:(_,l,o)=>{var c=o(5639).Symbol;_.exports=c},1149:(_,l,o)=>{var c=o(5639).Uint8Array;_.exports=c},577:(_,l,o)=>{var c=o(852)(o(5639),"WeakMap");_.exports=c},4963:_=>{_.exports=function(l,o){for(var c=-1,d=l==null?0:l.length,m=0,h=[];++c<d;){var s=l[c];o(s,c,l)&&(h[m++]=s)}return h}},4636:(_,l,o)=>{var c=o(2545),d=o(5694),m=o(1469),h=o(4144),s=o(5776),a=o(6719),r=Object.prototype.hasOwnProperty;_.exports=function(n,t){var i=m(n),u=!i&&d(n),f=!i&&!u&&h(n),p=!i&&!u&&!f&&a(n),y=i||u||f||p,g=y?c(n.length,String):[],b=g.length;for(var E in n)!t&&!r.call(n,E)||y&&(E=="length"||f&&(E=="offset"||E=="parent")||p&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||s(E,b))||g.push(E);return g}},9932:_=>{_.exports=function(l,o){for(var c=-1,d=l==null?0:l.length,m=Array(d);++c<d;)m[c]=o(l[c],c,l);return m}},2488:_=>{_.exports=function(l,o){for(var c=-1,d=o.length,m=l.length;++c<d;)l[m+c]=o[c];return l}},2908:_=>{_.exports=function(l,o){for(var c=-1,d=l==null?0:l.length;++c<d;)if(o(l[c],c,l))return!0;return!1}},8470:(_,l,o)=>{var c=o(7813);_.exports=function(d,m){for(var h=d.length;h--;)if(c(d[h][0],m))return h;return-1}},8866:(_,l,o)=>{var c=o(2488),d=o(1469);_.exports=function(m,h,s){var a=h(m);return d(m)?a:c(a,s(m))}},4239:(_,l,o)=>{var c=o(2705),d=o(9607),m=o(2333),h=c?c.toStringTag:void 0;_.exports=function(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":h&&h in Object(s)?d(s):m(s)}},9454:(_,l,o)=>{var c=o(4239),d=o(7005);_.exports=function(m){return d(m)&&c(m)=="[object Arguments]"}},939:(_,l,o)=>{var c=o(2492),d=o(7005);_.exports=function m(h,s,a,r,n){return h===s||(h==null||s==null||!d(h)&&!d(s)?h!=h&&s!=s:c(h,s,a,r,m,n))}},2492:(_,l,o)=>{var c=o(6384),d=o(7114),m=o(8351),h=o(6096),s=o(4160),a=o(1469),r=o(4144),n=o(6719),t="[object Arguments]",i="[object Array]",u="[object Object]",f=Object.prototype.hasOwnProperty;_.exports=function(p,y,g,b,E,x){var M=a(p),S=a(y),O=M?i:s(p),C=S?i:s(y),T=(O=O==t?u:O)==u,R=(C=C==t?u:C)==u,B=O==C;if(B&&r(p)){if(!r(y))return!1;M=!0,T=!1}if(B&&!T)return x||(x=new c),M||n(p)?d(p,y,g,b,E,x):m(p,y,O,g,b,E,x);if(!(1&g)){var z=T&&f.call(p,"__wrapped__"),L=R&&f.call(y,"__wrapped__");if(z||L){var Y=z?p.value():p,ie=L?y.value():y;return x||(x=new c),E(Y,ie,g,b,x)}}return!!B&&(x||(x=new c),h(p,y,g,b,E,x))}},8458:(_,l,o)=>{var c=o(3560),d=o(5346),m=o(3218),h=o(346),s=/^\[object .+?Constructor\]$/,a=Function.prototype,r=Object.prototype,n=a.toString,t=r.hasOwnProperty,i=RegExp("^"+n.call(t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");_.exports=function(u){return!(!m(u)||d(u))&&(c(u)?i:s).test(h(u))}},8749:(_,l,o)=>{var c=o(4239),d=o(1780),m=o(7005),h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h["[object Arguments]"]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h["[object Function]"]=h["[object Map]"]=h["[object Number]"]=h["[object Object]"]=h["[object RegExp]"]=h["[object Set]"]=h["[object String]"]=h["[object WeakMap]"]=!1,_.exports=function(s){return m(s)&&d(s.length)&&!!h[c(s)]}},280:(_,l,o)=>{var c=o(5726),d=o(6916),m=Object.prototype.hasOwnProperty;_.exports=function(h){if(!c(h))return d(h);var s=[];for(var a in Object(h))m.call(h,a)&&a!="constructor"&&s.push(a);return s}},4949:(_,l,o)=>{var c=o(7226),d=o(6557),m=o(3448);_.exports=function(h,s,a){var r=0,n=h==null?r:h.length;if(typeof s=="number"&&s==s&&n<=2147483647){for(;r<n;){var t=r+n>>>1,i=h[t];i!==null&&!m(i)&&(a?i<=s:i<s)?r=t+1:n=t}return n}return c(h,s,d,a)}},7226:(_,l,o)=>{var c=o(3448),d=Math.floor,m=Math.min;_.exports=function(h,s,a,r){var n=0,t=h==null?0:h.length;if(t===0)return 0;for(var i=(s=a(s))!=s,u=s===null,f=c(s),p=s===void 0;n<t;){var y=d((n+t)/2),g=a(h[y]),b=g!==void 0,E=g===null,x=g==g,M=c(g);if(i)var S=r||x;else S=p?x&&(r||b):u?x&&b&&(r||!E):f?x&&b&&!E&&(r||!M):!E&&!M&&(r?g<=s:g<s);S?n=y+1:t=y}return m(t,4294967294)}},2545:_=>{_.exports=function(l,o){for(var c=-1,d=Array(l);++c<l;)d[c]=o(c);return d}},1717:_=>{_.exports=function(l){return function(o){return l(o)}}},7415:(_,l,o)=>{var c=o(9932);_.exports=function(d,m){return c(m,(function(h){return d[h]}))}},4757:_=>{_.exports=function(l,o){return l.has(o)}},4429:(_,l,o)=>{var c=o(5639)["__core-js_shared__"];_.exports=c},7114:(_,l,o)=>{var c=o(8668),d=o(2908),m=o(4757);_.exports=function(h,s,a,r,n,t){var i=1&a,u=h.length,f=s.length;if(u!=f&&!(i&&f>u))return!1;var p=t.get(h),y=t.get(s);if(p&&y)return p==s&&y==h;var g=-1,b=!0,E=2&a?new c:void 0;for(t.set(h,s),t.set(s,h);++g<u;){var x=h[g],M=s[g];if(r)var S=i?r(M,x,g,s,h,t):r(x,M,g,h,s,t);if(S!==void 0){if(S)continue;b=!1;break}if(E){if(!d(s,(function(O,C){if(!m(E,C)&&(x===O||n(x,O,a,r,t)))return E.push(C)}))){b=!1;break}}else if(x!==M&&!n(x,M,a,r,t)){b=!1;break}}return t.delete(h),t.delete(s),b}},8351:(_,l,o)=>{var c=o(2705),d=o(1149),m=o(7813),h=o(7114),s=o(8776),a=o(1814),r=c?c.prototype:void 0,n=r?r.valueOf:void 0;_.exports=function(t,i,u,f,p,y,g){switch(u){case"[object DataView]":if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=i.byteLength||!y(new d(t),new d(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return m(+t,+i);case"[object Error]":return t.name==i.name&&t.message==i.message;case"[object RegExp]":case"[object String]":return t==i+"";case"[object Map]":var b=s;case"[object Set]":var E=1&f;if(b||(b=a),t.size!=i.size&&!E)return!1;var x=g.get(t);if(x)return x==i;f|=2,g.set(t,i);var M=h(b(t),b(i),f,p,y,g);return g.delete(t),M;case"[object Symbol]":if(n)return n.call(t)==n.call(i)}return!1}},6096:(_,l,o)=>{var c=o(8234),d=Object.prototype.hasOwnProperty;_.exports=function(m,h,s,a,r,n){var t=1&s,i=c(m),u=i.length;if(u!=c(h).length&&!t)return!1;for(var f=u;f--;){var p=i[f];if(!(t?p in h:d.call(h,p)))return!1}var y=n.get(m),g=n.get(h);if(y&&g)return y==h&&g==m;var b=!0;n.set(m,h),n.set(h,m);for(var E=t;++f<u;){var x=m[p=i[f]],M=h[p];if(a)var S=t?a(M,x,p,h,m,n):a(x,M,p,m,h,n);if(!(S===void 0?x===M||r(x,M,s,a,n):S)){b=!1;break}E||(E=p=="constructor")}if(b&&!E){var O=m.constructor,C=h.constructor;O==C||!("constructor"in m)||!("constructor"in h)||typeof O=="function"&&O instanceof O&&typeof C=="function"&&C instanceof C||(b=!1)}return n.delete(m),n.delete(h),b}},1957:(_,l,o)=>{var c=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g;_.exports=c},8234:(_,l,o)=>{var c=o(8866),d=o(9551),m=o(3674);_.exports=function(h){return c(h,m,d)}},5050:(_,l,o)=>{var c=o(7019);_.exports=function(d,m){var h=d.__data__;return c(m)?h[typeof m=="string"?"string":"hash"]:h.map}},852:(_,l,o)=>{var c=o(8458),d=o(7801);_.exports=function(m,h){var s=d(m,h);return c(s)?s:void 0}},9607:(_,l,o)=>{var c=o(2705),d=Object.prototype,m=d.hasOwnProperty,h=d.toString,s=c?c.toStringTag:void 0;_.exports=function(a){var r=m.call(a,s),n=a[s];try{a[s]=void 0;var t=!0}catch{}var i=h.call(a);return t&&(r?a[s]=n:delete a[s]),i}},9551:(_,l,o)=>{var c=o(4963),d=o(479),m=Object.prototype.propertyIsEnumerable,h=Object.getOwnPropertySymbols,s=h?function(a){return a==null?[]:(a=Object(a),c(h(a),(function(r){return m.call(a,r)})))}:d;_.exports=s},4160:(_,l,o)=>{var c=o(8552),d=o(7071),m=o(3818),h=o(8525),s=o(577),a=o(4239),r=o(346),n="[object Map]",t="[object Promise]",i="[object Set]",u="[object WeakMap]",f="[object DataView]",p=r(c),y=r(d),g=r(m),b=r(h),E=r(s),x=a;(c&&x(new c(new ArrayBuffer(1)))!=f||d&&x(new d)!=n||m&&x(m.resolve())!=t||h&&x(new h)!=i||s&&x(new s)!=u)&&(x=function(M){var S=a(M),O=S=="[object Object]"?M.constructor:void 0,C=O?r(O):"";if(C)switch(C){case p:return f;case y:return n;case g:return t;case b:return i;case E:return u}return S}),_.exports=x},7801:_=>{_.exports=function(l,o){return l?.[o]}},1789:(_,l,o)=>{var c=o(4536);_.exports=function(){this.__data__=c?c(null):{},this.size=0}},401:_=>{_.exports=function(l){var o=this.has(l)&&delete this.__data__[l];return this.size-=o?1:0,o}},7667:(_,l,o)=>{var c=o(4536),d=Object.prototype.hasOwnProperty;_.exports=function(m){var h=this.__data__;if(c){var s=h[m];return s==="__lodash_hash_undefined__"?void 0:s}return d.call(h,m)?h[m]:void 0}},1327:(_,l,o)=>{var c=o(4536),d=Object.prototype.hasOwnProperty;_.exports=function(m){var h=this.__data__;return c?h[m]!==void 0:d.call(h,m)}},1866:(_,l,o)=>{var c=o(4536);_.exports=function(d,m){var h=this.__data__;return this.size+=this.has(d)?0:1,h[d]=c&&m===void 0?"__lodash_hash_undefined__":m,this}},5776:_=>{var l=/^(?:0|[1-9]\d*)$/;_.exports=function(o,c){var d=typeof o;return!!(c=c??9007199254740991)&&(d=="number"||d!="symbol"&&l.test(o))&&o>-1&&o%1==0&&o<c}},7019:_=>{_.exports=function(l){var o=typeof l;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?l!=="__proto__":l===null}},5346:(_,l,o)=>{var c,d=o(4429),m=(c=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";_.exports=function(h){return!!m&&m in h}},5726:_=>{var l=Object.prototype;_.exports=function(o){var c=o&&o.constructor;return o===(typeof c=="function"&&c.prototype||l)}},7040:_=>{_.exports=function(){this.__data__=[],this.size=0}},4125:(_,l,o)=>{var c=o(8470),d=Array.prototype.splice;_.exports=function(m){var h=this.__data__,s=c(h,m);return!(s<0||(s==h.length-1?h.pop():d.call(h,s,1),--this.size,0))}},2117:(_,l,o)=>{var c=o(8470);_.exports=function(d){var m=this.__data__,h=c(m,d);return h<0?void 0:m[h][1]}},7518:(_,l,o)=>{var c=o(8470);_.exports=function(d){return c(this.__data__,d)>-1}},4705:(_,l,o)=>{var c=o(8470);_.exports=function(d,m){var h=this.__data__,s=c(h,d);return s<0?(++this.size,h.push([d,m])):h[s][1]=m,this}},4785:(_,l,o)=>{var c=o(1989),d=o(8407),m=o(7071);_.exports=function(){this.size=0,this.__data__={hash:new c,map:new(m||d),string:new c}}},1285:(_,l,o)=>{var c=o(5050);_.exports=function(d){var m=c(this,d).delete(d);return this.size-=m?1:0,m}},6e3:(_,l,o)=>{var c=o(5050);_.exports=function(d){return c(this,d).get(d)}},9916:(_,l,o)=>{var c=o(5050);_.exports=function(d){return c(this,d).has(d)}},5265:(_,l,o)=>{var c=o(5050);_.exports=function(d,m){var h=c(this,d),s=h.size;return h.set(d,m),this.size+=h.size==s?0:1,this}},8776:_=>{_.exports=function(l){var o=-1,c=Array(l.size);return l.forEach((function(d,m){c[++o]=[m,d]})),c}},4536:(_,l,o)=>{var c=o(852)(Object,"create");_.exports=c},6916:(_,l,o)=>{var c=o(5569)(Object.keys,Object);_.exports=c},1167:(_,l,o)=>{_=o.nmd(_);var c=o(1957),d=l&&!l.nodeType&&l,m=d&&_&&!_.nodeType&&_,h=m&&m.exports===d&&c.process,s=(function(){try{return m&&m.require&&m.require("util").types||h&&h.binding&&h.binding("util")}catch{}})();_.exports=s},2333:_=>{var l=Object.prototype.toString;_.exports=function(o){return l.call(o)}},5569:_=>{_.exports=function(l,o){return function(c){return l(o(c))}}},5639:(_,l,o)=>{var c=o(1957),d=typeof self=="object"&&self&&self.Object===Object&&self,m=c||d||Function("return this")();_.exports=m},619:_=>{_.exports=function(l){return this.__data__.set(l,"__lodash_hash_undefined__"),this}},2385:_=>{_.exports=function(l){return this.__data__.has(l)}},1814:_=>{_.exports=function(l){var o=-1,c=Array(l.size);return l.forEach((function(d){c[++o]=d})),c}},7465:(_,l,o)=>{var c=o(8407);_.exports=function(){this.__data__=new c,this.size=0}},3779:_=>{_.exports=function(l){var o=this.__data__,c=o.delete(l);return this.size=o.size,c}},7599:_=>{_.exports=function(l){return this.__data__.get(l)}},4758:_=>{_.exports=function(l){return this.__data__.has(l)}},4309:(_,l,o)=>{var c=o(8407),d=o(7071),m=o(3369);_.exports=function(h,s){var a=this.__data__;if(a instanceof c){var r=a.__data__;if(!d||r.length<199)return r.push([h,s]),this.size=++a.size,this;a=this.__data__=new m(r)}return a.set(h,s),this.size=a.size,this}},346:_=>{var l=Function.prototype.toString;_.exports=function(o){if(o!=null){try{return l.call(o)}catch{}try{return o+""}catch{}}return""}},7813:_=>{_.exports=function(l,o){return l===o||l!=l&&o!=o}},6557:_=>{_.exports=function(l){return l}},5694:(_,l,o)=>{var c=o(9454),d=o(7005),m=Object.prototype,h=m.hasOwnProperty,s=m.propertyIsEnumerable,a=c((function(){return arguments})())?c:function(r){return d(r)&&h.call(r,"callee")&&!s.call(r,"callee")};_.exports=a},1469:_=>{var l=Array.isArray;_.exports=l},8612:(_,l,o)=>{var c=o(3560),d=o(1780);_.exports=function(m){return m!=null&&d(m.length)&&!c(m)}},4144:(_,l,o)=>{_=o.nmd(_);var c=o(5639),d=o(5062),m=l&&!l.nodeType&&l,h=m&&_&&!_.nodeType&&_,s=h&&h.exports===m?c.Buffer:void 0,a=(s?s.isBuffer:void 0)||d;_.exports=a},8446:(_,l,o)=>{var c=o(939);_.exports=function(d,m){return c(d,m)}},3560:(_,l,o)=>{var c=o(4239),d=o(3218);_.exports=function(m){if(!d(m))return!1;var h=c(m);return h=="[object Function]"||h=="[object GeneratorFunction]"||h=="[object AsyncFunction]"||h=="[object Proxy]"}},1780:_=>{_.exports=function(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=9007199254740991}},4293:_=>{_.exports=function(l){return l==null}},3218:_=>{_.exports=function(l){var o=typeof l;return l!=null&&(o=="object"||o=="function")}},7005:_=>{_.exports=function(l){return l!=null&&typeof l=="object"}},3448:(_,l,o)=>{var c=o(4239),d=o(7005);_.exports=function(m){return typeof m=="symbol"||d(m)&&c(m)=="[object Symbol]"}},6719:(_,l,o)=>{var c=o(8749),d=o(1717),m=o(1167),h=m&&m.isTypedArray,s=h?d(h):c;_.exports=s},3674:(_,l,o)=>{var c=o(4636),d=o(280),m=o(8612);_.exports=function(h){return m(h)?c(h):d(h)}},1159:(_,l,o)=>{var c=o(4949);_.exports=function(d,m){return c(d,m)}},5871:(_,l,o)=>{var c=o(4949),d=o(7813);_.exports=function(m,h){var s=m==null?0:m.length;if(s){var a=c(m,h);if(a<s&&d(m[a],h))return a}return-1}},479:_=>{_.exports=function(){return[]}},5062:_=>{_.exports=function(){return!1}},2628:(_,l,o)=>{var c=o(7415),d=o(3674);_.exports=function(m){return m==null?[]:c(m,d(m))}},3085:(_,l,o)=>{var c=o(5108);const d=o(9742),m=o(645),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;l.lW=r,l.h2=50;const s=2147483647;function a(F){if(F>s)throw new RangeError('The value "'+F+'" is invalid for option "size"');const V=new Uint8Array(F);return Object.setPrototypeOf(V,r.prototype),V}function r(F,V,ne){if(typeof F=="number"){if(typeof V=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return i(F)}return n(F,V,ne)}function n(F,V,ne){if(typeof F=="string")return(function(ke,$e){if(typeof $e=="string"&&$e!==""||($e="utf8"),!r.isEncoding($e))throw new TypeError("Unknown encoding: "+$e);const xt=0|y(ke,$e);let At=a(xt);const Bt=At.write(ke,$e);return Bt!==xt&&(At=At.slice(0,Bt)),At})(F,V);if(ArrayBuffer.isView(F))return(function(ke){if(le(ke,Uint8Array)){const $e=new Uint8Array(ke);return f($e.buffer,$e.byteOffset,$e.byteLength)}return u(ke)})(F);if(F==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F);if(le(F,ArrayBuffer)||F&&le(F.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(le(F,SharedArrayBuffer)||F&&le(F.buffer,SharedArrayBuffer)))return f(F,V,ne);if(typeof F=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Se=F.valueOf&&F.valueOf();if(Se!=null&&Se!==F)return r.from(Se,V,ne);const Ie=(function(ke){if(r.isBuffer(ke)){const $e=0|p(ke.length),xt=a($e);return xt.length===0||ke.copy(xt,0,0,$e),xt}return ke.length!==void 0?typeof ke.length!="number"||Ne(ke.length)?a(0):u(ke):ke.type==="Buffer"&&Array.isArray(ke.data)?u(ke.data):void 0})(F);if(Ie)return Ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof F[Symbol.toPrimitive]=="function")return r.from(F[Symbol.toPrimitive]("string"),V,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof F)}function t(F){if(typeof F!="number")throw new TypeError('"size" argument must be of type number');if(F<0)throw new RangeError('The value "'+F+'" is invalid for option "size"')}function i(F){return t(F),a(F<0?0:0|p(F))}function u(F){const V=F.length<0?0:0|p(F.length),ne=a(V);for(let Se=0;Se<V;Se+=1)ne[Se]=255&F[Se];return ne}function f(F,V,ne){if(V<0||F.byteLength<V)throw new RangeError('"offset" is outside of buffer bounds');if(F.byteLength<V+(ne||0))throw new RangeError('"length" is outside of buffer bounds');let Se;return Se=V===void 0&&ne===void 0?new Uint8Array(F):ne===void 0?new Uint8Array(F,V):new Uint8Array(F,V,ne),Object.setPrototypeOf(Se,r.prototype),Se}function p(F){if(F>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|F}function y(F,V){if(r.isBuffer(F))return F.length;if(ArrayBuffer.isView(F)||le(F,ArrayBuffer))return F.byteLength;if(typeof F!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof F);const ne=F.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&ne===0)return 0;let Ie=!1;for(;;)switch(V){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return D(F).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return W(F).length;default:if(Ie)return Se?-1:D(F).length;V=(""+V).toLowerCase(),Ie=!0}}function g(F,V,ne){let Se=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((ne===void 0||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(V>>>=0))return"";for(F||(F="utf8");;)switch(F){case"hex":return ie(this,V,ne);case"utf8":case"utf-8":return B(this,V,ne);case"ascii":return L(this,V,ne);case"latin1":case"binary":return Y(this,V,ne);case"base64":return R(this,V,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,V,ne);default:if(Se)throw new TypeError("Unknown encoding: "+F);F=(F+"").toLowerCase(),Se=!0}}function b(F,V,ne){const Se=F[V];F[V]=F[ne],F[ne]=Se}function E(F,V,ne,Se,Ie){if(F.length===0)return-1;if(typeof ne=="string"?(Se=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),Ne(ne=+ne)&&(ne=Ie?0:F.length-1),ne<0&&(ne=F.length+ne),ne>=F.length){if(Ie)return-1;ne=F.length-1}else if(ne<0){if(!Ie)return-1;ne=0}if(typeof V=="string"&&(V=r.from(V,Se)),r.isBuffer(V))return V.length===0?-1:x(F,V,ne,Se,Ie);if(typeof V=="number")return V&=255,typeof Uint8Array.prototype.indexOf=="function"?Ie?Uint8Array.prototype.indexOf.call(F,V,ne):Uint8Array.prototype.lastIndexOf.call(F,V,ne):x(F,[V],ne,Se,Ie);throw new TypeError("val must be string, number or Buffer")}function x(F,V,ne,Se,Ie){let ke,$e=1,xt=F.length,At=V.length;if(Se!==void 0&&((Se=String(Se).toLowerCase())==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(F.length<2||V.length<2)return-1;$e=2,xt/=2,At/=2,ne/=2}function Bt(Rt,Gt){return $e===1?Rt[Gt]:Rt.readUInt16BE(Gt*$e)}if(Ie){let Rt=-1;for(ke=ne;ke<xt;ke++)if(Bt(F,ke)===Bt(V,Rt===-1?0:ke-Rt)){if(Rt===-1&&(Rt=ke),ke-Rt+1===At)return Rt*$e}else Rt!==-1&&(ke-=ke-Rt),Rt=-1}else for(ne+At>xt&&(ne=xt-At),ke=ne;ke>=0;ke--){let Rt=!0;for(let Gt=0;Gt<At;Gt++)if(Bt(F,ke+Gt)!==Bt(V,Gt)){Rt=!1;break}if(Rt)return ke}return-1}function M(F,V,ne,Se){ne=Number(ne)||0;const Ie=F.length-ne;Se?(Se=Number(Se))>Ie&&(Se=Ie):Se=Ie;const ke=V.length;let $e;for(Se>ke/2&&(Se=ke/2),$e=0;$e<Se;++$e){const xt=parseInt(V.substr(2*$e,2),16);if(Ne(xt))return $e;F[ne+$e]=xt}return $e}function S(F,V,ne,Se){return ae(D(V,F.length-ne),F,ne,Se)}function O(F,V,ne,Se){return ae((function(Ie){const ke=[];for(let $e=0;$e<Ie.length;++$e)ke.push(255&Ie.charCodeAt($e));return ke})(V),F,ne,Se)}function C(F,V,ne,Se){return ae(W(V),F,ne,Se)}function T(F,V,ne,Se){return ae((function(Ie,ke){let $e,xt,At;const Bt=[];for(let Rt=0;Rt<Ie.length&&!((ke-=2)<0);++Rt)$e=Ie.charCodeAt(Rt),xt=$e>>8,At=$e%256,Bt.push(At),Bt.push(xt);return Bt})(V,F.length-ne),F,ne,Se)}function R(F,V,ne){return V===0&&ne===F.length?d.fromByteArray(F):d.fromByteArray(F.slice(V,ne))}function B(F,V,ne){ne=Math.min(F.length,ne);const Se=[];let Ie=V;for(;Ie<ne;){const ke=F[Ie];let $e=null,xt=ke>239?4:ke>223?3:ke>191?2:1;if(Ie+xt<=ne){let At,Bt,Rt,Gt;switch(xt){case 1:ke<128&&($e=ke);break;case 2:At=F[Ie+1],(192&At)==128&&(Gt=(31&ke)<<6|63&At,Gt>127&&($e=Gt));break;case 3:At=F[Ie+1],Bt=F[Ie+2],(192&At)==128&&(192&Bt)==128&&(Gt=(15&ke)<<12|(63&At)<<6|63&Bt,Gt>2047&&(Gt<55296||Gt>57343)&&($e=Gt));break;case 4:At=F[Ie+1],Bt=F[Ie+2],Rt=F[Ie+3],(192&At)==128&&(192&Bt)==128&&(192&Rt)==128&&(Gt=(15&ke)<<18|(63&At)<<12|(63&Bt)<<6|63&Rt,Gt>65535&&Gt<1114112&&($e=Gt))}}$e===null?($e=65533,xt=1):$e>65535&&($e-=65536,Se.push($e>>>10&1023|55296),$e=56320|1023&$e),Se.push($e),Ie+=xt}return(function(ke){const $e=ke.length;if($e<=z)return String.fromCharCode.apply(String,ke);let xt="",At=0;for(;At<$e;)xt+=String.fromCharCode.apply(String,ke.slice(At,At+=z));return xt})(Se)}r.TYPED_ARRAY_SUPPORT=(function(){try{const F=new Uint8Array(1),V={foo:function(){return 42}};return Object.setPrototypeOf(V,Uint8Array.prototype),Object.setPrototypeOf(F,V),F.foo()===42}catch{return!1}})(),r.TYPED_ARRAY_SUPPORT||c===void 0||typeof c.error!="function"||c.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),r.poolSize=8192,r.from=function(F,V,ne){return n(F,V,ne)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array),r.alloc=function(F,V,ne){return(function(Se,Ie,ke){return t(Se),Se<=0?a(Se):Ie!==void 0?typeof ke=="string"?a(Se).fill(Ie,ke):a(Se).fill(Ie):a(Se)})(F,V,ne)},r.allocUnsafe=function(F){return i(F)},r.allocUnsafeSlow=function(F){return i(F)},r.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==r.prototype},r.compare=function(F,V){if(le(F,Uint8Array)&&(F=r.from(F,F.offset,F.byteLength)),le(V,Uint8Array)&&(V=r.from(V,V.offset,V.byteLength)),!r.isBuffer(F)||!r.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===V)return 0;let ne=F.length,Se=V.length;for(let Ie=0,ke=Math.min(ne,Se);Ie<ke;++Ie)if(F[Ie]!==V[Ie]){ne=F[Ie],Se=V[Ie];break}return ne<Se?-1:Se<ne?1:0},r.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(F,V){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return r.alloc(0);let ne;if(V===void 0)for(V=0,ne=0;ne<F.length;++ne)V+=F[ne].length;const Se=r.allocUnsafe(V);let Ie=0;for(ne=0;ne<F.length;++ne){let ke=F[ne];if(le(ke,Uint8Array))Ie+ke.length>Se.length?(r.isBuffer(ke)||(ke=r.from(ke)),ke.copy(Se,Ie)):Uint8Array.prototype.set.call(Se,ke,Ie);else{if(!r.isBuffer(ke))throw new TypeError('"list" argument must be an Array of Buffers');ke.copy(Se,Ie)}Ie+=ke.length}return Se},r.byteLength=y,r.prototype._isBuffer=!0,r.prototype.swap16=function(){const F=this.length;if(F%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let V=0;V<F;V+=2)b(this,V,V+1);return this},r.prototype.swap32=function(){const F=this.length;if(F%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let V=0;V<F;V+=4)b(this,V,V+3),b(this,V+1,V+2);return this},r.prototype.swap64=function(){const F=this.length;if(F%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let V=0;V<F;V+=8)b(this,V,V+7),b(this,V+1,V+6),b(this,V+2,V+5),b(this,V+3,V+4);return this},r.prototype.toString=function(){const F=this.length;return F===0?"":arguments.length===0?B(this,0,F):g.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(F){if(!r.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F||r.compare(this,F)===0},r.prototype.inspect=function(){let F="";const V=l.h2;return F=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(F+=" ... "),"<Buffer "+F+">"},h&&(r.prototype[h]=r.prototype.inspect),r.prototype.compare=function(F,V,ne,Se,Ie){if(le(F,Uint8Array)&&(F=r.from(F,F.offset,F.byteLength)),!r.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(V===void 0&&(V=0),ne===void 0&&(ne=F?F.length:0),Se===void 0&&(Se=0),Ie===void 0&&(Ie=this.length),V<0||ne>F.length||Se<0||Ie>this.length)throw new RangeError("out of range index");if(Se>=Ie&&V>=ne)return 0;if(Se>=Ie)return-1;if(V>=ne)return 1;if(this===F)return 0;let ke=(Ie>>>=0)-(Se>>>=0),$e=(ne>>>=0)-(V>>>=0);const xt=Math.min(ke,$e),At=this.slice(Se,Ie),Bt=F.slice(V,ne);for(let Rt=0;Rt<xt;++Rt)if(At[Rt]!==Bt[Rt]){ke=At[Rt],$e=Bt[Rt];break}return ke<$e?-1:$e<ke?1:0},r.prototype.includes=function(F,V,ne){return this.indexOf(F,V,ne)!==-1},r.prototype.indexOf=function(F,V,ne){return E(this,F,V,ne,!0)},r.prototype.lastIndexOf=function(F,V,ne){return E(this,F,V,ne,!1)},r.prototype.write=function(F,V,ne,Se){if(V===void 0)Se="utf8",ne=this.length,V=0;else if(ne===void 0&&typeof V=="string")Se=V,ne=this.length,V=0;else{if(!isFinite(V))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");V>>>=0,isFinite(ne)?(ne>>>=0,Se===void 0&&(Se="utf8")):(Se=ne,ne=void 0)}const Ie=this.length-V;if((ne===void 0||ne>Ie)&&(ne=Ie),F.length>0&&(ne<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");let ke=!1;for(;;)switch(Se){case"hex":return M(this,F,V,ne);case"utf8":case"utf-8":return S(this,F,V,ne);case"ascii":case"latin1":case"binary":return O(this,F,V,ne);case"base64":return C(this,F,V,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,F,V,ne);default:if(ke)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),ke=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const z=4096;function L(F,V,ne){let Se="";ne=Math.min(F.length,ne);for(let Ie=V;Ie<ne;++Ie)Se+=String.fromCharCode(127&F[Ie]);return Se}function Y(F,V,ne){let Se="";ne=Math.min(F.length,ne);for(let Ie=V;Ie<ne;++Ie)Se+=String.fromCharCode(F[Ie]);return Se}function ie(F,V,ne){const Se=F.length;(!V||V<0)&&(V=0),(!ne||ne<0||ne>Se)&&(ne=Se);let Ie="";for(let ke=V;ke<ne;++ke)Ie+=De[F[ke]];return Ie}function $(F,V,ne){const Se=F.slice(V,ne);let Ie="";for(let ke=0;ke<Se.length-1;ke+=2)Ie+=String.fromCharCode(Se[ke]+256*Se[ke+1]);return Ie}function Q(F,V,ne){if(F%1!=0||F<0)throw new RangeError("offset is not uint");if(F+V>ne)throw new RangeError("Trying to access beyond buffer length")}function ce(F,V,ne,Se,Ie,ke){if(!r.isBuffer(F))throw new TypeError('"buffer" argument must be a Buffer instance');if(V>Ie||V<ke)throw new RangeError('"value" argument is out of bounds');if(ne+Se>F.length)throw new RangeError("Index out of range")}function be(F,V,ne,Se,Ie){de(V,Se,Ie,F,ne,7);let ke=Number(V&BigInt(4294967295));F[ne++]=ke,ke>>=8,F[ne++]=ke,ke>>=8,F[ne++]=ke,ke>>=8,F[ne++]=ke;let $e=Number(V>>BigInt(32)&BigInt(4294967295));return F[ne++]=$e,$e>>=8,F[ne++]=$e,$e>>=8,F[ne++]=$e,$e>>=8,F[ne++]=$e,ne}function Ae(F,V,ne,Se,Ie){de(V,Se,Ie,F,ne,7);let ke=Number(V&BigInt(4294967295));F[ne+7]=ke,ke>>=8,F[ne+6]=ke,ke>>=8,F[ne+5]=ke,ke>>=8,F[ne+4]=ke;let $e=Number(V>>BigInt(32)&BigInt(4294967295));return F[ne+3]=$e,$e>>=8,F[ne+2]=$e,$e>>=8,F[ne+1]=$e,$e>>=8,F[ne]=$e,ne+8}function we(F,V,ne,Se,Ie,ke){if(ne+Se>F.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function Xe(F,V,ne,Se,Ie){return V=+V,ne>>>=0,Ie||we(F,0,ne,4),m.write(F,V,ne,Se,23,4),ne+4}function Ve(F,V,ne,Se,Ie){return V=+V,ne>>>=0,Ie||we(F,0,ne,8),m.write(F,V,ne,Se,52,8),ne+8}r.prototype.slice=function(F,V){const ne=this.length;(F=~~F)<0?(F+=ne)<0&&(F=0):F>ne&&(F=ne),(V=V===void 0?ne:~~V)<0?(V+=ne)<0&&(V=0):V>ne&&(V=ne),V<F&&(V=F);const Se=this.subarray(F,V);return Object.setPrototypeOf(Se,r.prototype),Se},r.prototype.readUintLE=r.prototype.readUIntLE=function(F,V,ne){F>>>=0,V>>>=0,ne||Q(F,V,this.length);let Se=this[F],Ie=1,ke=0;for(;++ke<V&&(Ie*=256);)Se+=this[F+ke]*Ie;return Se},r.prototype.readUintBE=r.prototype.readUIntBE=function(F,V,ne){F>>>=0,V>>>=0,ne||Q(F,V,this.length);let Se=this[F+--V],Ie=1;for(;V>0&&(Ie*=256);)Se+=this[F+--V]*Ie;return Se},r.prototype.readUint8=r.prototype.readUInt8=function(F,V){return F>>>=0,V||Q(F,1,this.length),this[F]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(F,V){return F>>>=0,V||Q(F,2,this.length),this[F]|this[F+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(F,V){return F>>>=0,V||Q(F,2,this.length),this[F]<<8|this[F+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(F,V){return F>>>=0,V||Q(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+16777216*this[F+3]},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(F,V){return F>>>=0,V||Q(F,4,this.length),16777216*this[F]+(this[F+1]<<16|this[F+2]<<8|this[F+3])},r.prototype.readBigUInt64LE=Ye((function(F){ze(F>>>=0,"offset");const V=this[F],ne=this[F+7];V!==void 0&&ne!==void 0||P(F,this.length-8);const Se=V+256*this[++F]+65536*this[++F]+this[++F]*2**24,Ie=this[++F]+256*this[++F]+65536*this[++F]+ne*2**24;return BigInt(Se)+(BigInt(Ie)<<BigInt(32))})),r.prototype.readBigUInt64BE=Ye((function(F){ze(F>>>=0,"offset");const V=this[F],ne=this[F+7];V!==void 0&&ne!==void 0||P(F,this.length-8);const Se=V*2**24+65536*this[++F]+256*this[++F]+this[++F],Ie=this[++F]*2**24+65536*this[++F]+256*this[++F]+ne;return(BigInt(Se)<<BigInt(32))+BigInt(Ie)})),r.prototype.readIntLE=function(F,V,ne){F>>>=0,V>>>=0,ne||Q(F,V,this.length);let Se=this[F],Ie=1,ke=0;for(;++ke<V&&(Ie*=256);)Se+=this[F+ke]*Ie;return Ie*=128,Se>=Ie&&(Se-=Math.pow(2,8*V)),Se},r.prototype.readIntBE=function(F,V,ne){F>>>=0,V>>>=0,ne||Q(F,V,this.length);let Se=V,Ie=1,ke=this[F+--Se];for(;Se>0&&(Ie*=256);)ke+=this[F+--Se]*Ie;return Ie*=128,ke>=Ie&&(ke-=Math.pow(2,8*V)),ke},r.prototype.readInt8=function(F,V){return F>>>=0,V||Q(F,1,this.length),128&this[F]?-1*(255-this[F]+1):this[F]},r.prototype.readInt16LE=function(F,V){F>>>=0,V||Q(F,2,this.length);const ne=this[F]|this[F+1]<<8;return 32768&ne?4294901760|ne:ne},r.prototype.readInt16BE=function(F,V){F>>>=0,V||Q(F,2,this.length);const ne=this[F+1]|this[F]<<8;return 32768&ne?4294901760|ne:ne},r.prototype.readInt32LE=function(F,V){return F>>>=0,V||Q(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},r.prototype.readInt32BE=function(F,V){return F>>>=0,V||Q(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},r.prototype.readBigInt64LE=Ye((function(F){ze(F>>>=0,"offset");const V=this[F],ne=this[F+7];V!==void 0&&ne!==void 0||P(F,this.length-8);const Se=this[F+4]+256*this[F+5]+65536*this[F+6]+(ne<<24);return(BigInt(Se)<<BigInt(32))+BigInt(V+256*this[++F]+65536*this[++F]+this[++F]*16777216)})),r.prototype.readBigInt64BE=Ye((function(F){ze(F>>>=0,"offset");const V=this[F],ne=this[F+7];V!==void 0&&ne!==void 0||P(F,this.length-8);const Se=(V<<24)+65536*this[++F]+256*this[++F]+this[++F];return(BigInt(Se)<<BigInt(32))+BigInt(this[++F]*16777216+65536*this[++F]+256*this[++F]+ne)})),r.prototype.readFloatLE=function(F,V){return F>>>=0,V||Q(F,4,this.length),m.read(this,F,!0,23,4)},r.prototype.readFloatBE=function(F,V){return F>>>=0,V||Q(F,4,this.length),m.read(this,F,!1,23,4)},r.prototype.readDoubleLE=function(F,V){return F>>>=0,V||Q(F,8,this.length),m.read(this,F,!0,52,8)},r.prototype.readDoubleBE=function(F,V){return F>>>=0,V||Q(F,8,this.length),m.read(this,F,!1,52,8)},r.prototype.writeUintLE=r.prototype.writeUIntLE=function(F,V,ne,Se){F=+F,V>>>=0,ne>>>=0,Se||ce(this,F,V,ne,Math.pow(2,8*ne)-1,0);let Ie=1,ke=0;for(this[V]=255&F;++ke<ne&&(Ie*=256);)this[V+ke]=F/Ie&255;return V+ne},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(F,V,ne,Se){F=+F,V>>>=0,ne>>>=0,Se||ce(this,F,V,ne,Math.pow(2,8*ne)-1,0);let Ie=ne-1,ke=1;for(this[V+Ie]=255&F;--Ie>=0&&(ke*=256);)this[V+Ie]=F/ke&255;return V+ne},r.prototype.writeUint8=r.prototype.writeUInt8=function(F,V,ne){return F=+F,V>>>=0,ne||ce(this,F,V,1,255,0),this[V]=255&F,V+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(F,V,ne){return F=+F,V>>>=0,ne||ce(this,F,V,2,65535,0),this[V]=255&F,this[V+1]=F>>>8,V+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(F,V,ne){return F=+F,V>>>=0,ne||ce(this,F,V,2,65535,0),this[V]=F>>>8,this[V+1]=255&F,V+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(F,V,ne){return F=+F,V>>>=0,ne||ce(this,F,V,4,4294967295,0),this[V+3]=F>>>24,this[V+2]=F>>>16,this[V+1]=F>>>8,this[V]=255&F,V+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(F,V,ne){return F=+F,V>>>=0,ne||ce(this,F,V,4,4294967295,0),this[V]=F>>>24,this[V+1]=F>>>16,this[V+2]=F>>>8,this[V+3]=255&F,V+4},r.prototype.writeBigUInt64LE=Ye((function(F,V=0){return be(this,F,V,BigInt(0),BigInt("0xffffffffffffffff"))})),r.prototype.writeBigUInt64BE=Ye((function(F,V=0){return Ae(this,F,V,BigInt(0),BigInt("0xffffffffffffffff"))})),r.prototype.writeIntLE=function(F,V,ne,Se){if(F=+F,V>>>=0,!Se){const xt=Math.pow(2,8*ne-1);ce(this,F,V,ne,xt-1,-xt)}let Ie=0,ke=1,$e=0;for(this[V]=255&F;++Ie<ne&&(ke*=256);)F<0&&$e===0&&this[V+Ie-1]!==0&&($e=1),this[V+Ie]=(F/ke>>0)-$e&255;return V+ne},r.prototype.writeIntBE=function(F,V,ne,Se){if(F=+F,V>>>=0,!Se){const xt=Math.pow(2,8*ne-1);ce(this,F,V,ne,xt-1,-xt)}let Ie=ne-1,ke=1,$e=0;for(this[V+Ie]=255&F;--Ie>=0&&(ke*=256);)F<0&&$e===0&&this[V+Ie+1]!==0&&($e=1),this[V+Ie]=(F/ke>>0)-$e&255;return V+ne},r.prototype.writeInt8=function(F,V,ne){return F=+F,V>>>=0,ne||ce(this,F,V,1,127,-128),F<0&&(F=255+F+1),this[V]=255&F,V+1},r.prototype.writeInt16LE=function(F,V,ne){return F=+F,V>>>=0,ne||ce(this,F,V,2,32767,-32768),this[V]=255&F,this[V+1]=F>>>8,V+2},r.prototype.writeInt16BE=function(F,V,ne){return F=+F,V>>>=0,ne||ce(this,F,V,2,32767,-32768),this[V]=F>>>8,this[V+1]=255&F,V+2},r.prototype.writeInt32LE=function(F,V,ne){return F=+F,V>>>=0,ne||ce(this,F,V,4,2147483647,-2147483648),this[V]=255&F,this[V+1]=F>>>8,this[V+2]=F>>>16,this[V+3]=F>>>24,V+4},r.prototype.writeInt32BE=function(F,V,ne){return F=+F,V>>>=0,ne||ce(this,F,V,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[V]=F>>>24,this[V+1]=F>>>16,this[V+2]=F>>>8,this[V+3]=255&F,V+4},r.prototype.writeBigInt64LE=Ye((function(F,V=0){return be(this,F,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),r.prototype.writeBigInt64BE=Ye((function(F,V=0){return Ae(this,F,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),r.prototype.writeFloatLE=function(F,V,ne){return Xe(this,F,V,!0,ne)},r.prototype.writeFloatBE=function(F,V,ne){return Xe(this,F,V,!1,ne)},r.prototype.writeDoubleLE=function(F,V,ne){return Ve(this,F,V,!0,ne)},r.prototype.writeDoubleBE=function(F,V,ne){return Ve(this,F,V,!1,ne)},r.prototype.copy=function(F,V,ne,Se){if(!r.isBuffer(F))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),Se||Se===0||(Se=this.length),V>=F.length&&(V=F.length),V||(V=0),Se>0&&Se<ne&&(Se=ne),Se===ne||F.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),F.length-V<Se-ne&&(Se=F.length-V+ne);const Ie=Se-ne;return this===F&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(V,ne,Se):Uint8Array.prototype.set.call(F,this.subarray(ne,Se),V),Ie},r.prototype.fill=function(F,V,ne,Se){if(typeof F=="string"){if(typeof V=="string"?(Se=V,V=0,ne=this.length):typeof ne=="string"&&(Se=ne,ne=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!r.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(F.length===1){const ke=F.charCodeAt(0);(Se==="utf8"&&ke<128||Se==="latin1")&&(F=ke)}}else typeof F=="number"?F&=255:typeof F=="boolean"&&(F=Number(F));if(V<0||this.length<V||this.length<ne)throw new RangeError("Out of range index");if(ne<=V)return this;let Ie;if(V>>>=0,ne=ne===void 0?this.length:ne>>>0,F||(F=0),typeof F=="number")for(Ie=V;Ie<ne;++Ie)this[Ie]=F;else{const ke=r.isBuffer(F)?F:r.from(F,Se),$e=ke.length;if($e===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(Ie=0;Ie<ne-V;++Ie)this[Ie+V]=ke[Ie%$e]}return this};const st={};function tt(F,V,ne){st[F]=class extends ne{constructor(){super(),Object.defineProperty(this,"message",{value:V.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${F}]`,this.stack,delete this.name}get code(){return F}set code(Se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Se,writable:!0})}toString(){return`${this.name} [${F}]: ${this.message}`}}}function he(F){let V="",ne=F.length;const Se=F[0]==="-"?1:0;for(;ne>=Se+4;ne-=3)V=`_${F.slice(ne-3,ne)}${V}`;return`${F.slice(0,ne)}${V}`}function de(F,V,ne,Se,Ie,ke){if(F>ne||F<V){const $e=typeof V=="bigint"?"n":"";let xt;throw xt=V===0||V===BigInt(0)?`>= 0${$e} and < 2${$e} ** ${8*(ke+1)}${$e}`:`>= -(2${$e} ** ${8*(ke+1)-1}${$e}) and < 2 ** ${8*(ke+1)-1}${$e}`,new st.ERR_OUT_OF_RANGE("value",xt,F)}(function($e,xt,At){ze(xt,"offset"),$e[xt]!==void 0&&$e[xt+At]!==void 0||P(xt,$e.length-(At+1))})(Se,Ie,ke)}function ze(F,V){if(typeof F!="number")throw new st.ERR_INVALID_ARG_TYPE(V,"number",F)}function P(F,V,ne){throw Math.floor(F)!==F?(ze(F,ne),new st.ERR_OUT_OF_RANGE("offset","an integer",F)):V<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${V}`,F)}tt("ERR_BUFFER_OUT_OF_BOUNDS",(function(F){return F?`${F} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),tt("ERR_INVALID_ARG_TYPE",(function(F,V){return`The "${F}" argument must be of type number. Received type ${typeof V}`}),TypeError),tt("ERR_OUT_OF_RANGE",(function(F,V,ne){let Se=`The value of "${F}" is out of range.`,Ie=ne;return Number.isInteger(ne)&&Math.abs(ne)>4294967296?Ie=he(String(ne)):typeof ne=="bigint"&&(Ie=String(ne),(ne>BigInt(2)**BigInt(32)||ne<-(BigInt(2)**BigInt(32)))&&(Ie=he(Ie)),Ie+="n"),Se+=` It must be ${V}. Received ${Ie}`,Se}),RangeError);const A=/[^+/0-9A-Za-z-_]/g;function D(F,V){let ne;V=V||1/0;const Se=F.length;let Ie=null;const ke=[];for(let $e=0;$e<Se;++$e){if(ne=F.charCodeAt($e),ne>55295&&ne<57344){if(!Ie){if(ne>56319){(V-=3)>-1&&ke.push(239,191,189);continue}if($e+1===Se){(V-=3)>-1&&ke.push(239,191,189);continue}Ie=ne;continue}if(ne<56320){(V-=3)>-1&&ke.push(239,191,189),Ie=ne;continue}ne=65536+(Ie-55296<<10|ne-56320)}else Ie&&(V-=3)>-1&&ke.push(239,191,189);if(Ie=null,ne<128){if((V-=1)<0)break;ke.push(ne)}else if(ne<2048){if((V-=2)<0)break;ke.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((V-=3)<0)break;ke.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((V-=4)<0)break;ke.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return ke}function W(F){return d.toByteArray((function(V){if((V=(V=V.split("=")[0]).trim().replace(A,"")).length<2)return"";for(;V.length%4!=0;)V+="=";return V})(F))}function ae(F,V,ne,Se){let Ie;for(Ie=0;Ie<Se&&!(Ie+ne>=V.length||Ie>=F.length);++Ie)V[Ie+ne]=F[Ie];return Ie}function le(F,V){return F instanceof V||F!=null&&F.constructor!=null&&F.constructor.name!=null&&F.constructor.name===V.name}function Ne(F){return F!=F}const De=(function(){const F="0123456789abcdef",V=new Array(256);for(let ne=0;ne<16;++ne){const Se=16*ne;for(let Ie=0;Ie<16;++Ie)V[Se+Ie]=F[ne]+F[Ie]}return V})();function Ye(F){return typeof BigInt>"u"?ht:F}function ht(){throw new Error("BigInt not supported")}},3935:(_,l,o)=>{var c=o(4155);function d(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function m(s,a){for(var r,n="",t=0,i=-1,u=0,f=0;f<=s.length;++f){if(f<s.length)r=s.charCodeAt(f);else{if(r===47)break;r=47}if(r===47){if(!(i===f-1||u===1))if(i!==f-1&&u===2){if(n.length<2||t!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var p=n.lastIndexOf("/");if(p!==n.length-1){p===-1?(n="",t=0):t=(n=n.slice(0,p)).length-1-n.lastIndexOf("/"),i=f,u=0;continue}}else if(n.length===2||n.length===1){n="",t=0,i=f,u=0;continue}}a&&(n.length>0?n+="/..":n="..",t=2)}else n.length>0?n+="/"+s.slice(i+1,f):n=s.slice(i+1,f),t=f-i-1;i=f,u=0}else r===46&&u!==-1?++u:u=-1}return n}var h={resolve:function(){for(var s,a="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var t;n>=0?t=arguments[n]:(s===void 0&&(s=c.cwd()),t=s),d(t),t.length!==0&&(a=t+"/"+a,r=t.charCodeAt(0)===47)}return a=m(a,!r),r?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(s){if(d(s),s.length===0)return".";var a=s.charCodeAt(0)===47,r=s.charCodeAt(s.length-1)===47;return(s=m(s,!a)).length!==0||a||(s="."),s.length>0&&r&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return d(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var r=arguments[a];d(r),r.length>0&&(s===void 0?s=r:s+="/"+r)}return s===void 0?".":h.normalize(s)},relative:function(s,a){if(d(s),d(a),s===a||(s=h.resolve(s))===(a=h.resolve(a)))return"";for(var r=1;r<s.length&&s.charCodeAt(r)===47;++r);for(var n=s.length,t=n-r,i=1;i<a.length&&a.charCodeAt(i)===47;++i);for(var u=a.length-i,f=t<u?t:u,p=-1,y=0;y<=f;++y){if(y===f){if(u>f){if(a.charCodeAt(i+y)===47)return a.slice(i+y+1);if(y===0)return a.slice(i+y)}else t>f&&(s.charCodeAt(r+y)===47?p=y:y===0&&(p=0));break}var g=s.charCodeAt(r+y);if(g!==a.charCodeAt(i+y))break;g===47&&(p=y)}var b="";for(y=r+p+1;y<=n;++y)y!==n&&s.charCodeAt(y)!==47||(b.length===0?b+="..":b+="/..");return b.length>0?b+a.slice(i+p):(i+=p,a.charCodeAt(i)===47&&++i,a.slice(i))},_makeLong:function(s){return s},dirname:function(s){if(d(s),s.length===0)return".";for(var a=s.charCodeAt(0),r=a===47,n=-1,t=!0,i=s.length-1;i>=1;--i)if((a=s.charCodeAt(i))===47){if(!t){n=i;break}}else t=!1;return n===-1?r?"/":".":r&&n===1?"//":s.slice(0,n)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');d(s);var r,n=0,t=-1,i=!0;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var u=a.length-1,f=-1;for(r=s.length-1;r>=0;--r){var p=s.charCodeAt(r);if(p===47){if(!i){n=r+1;break}}else f===-1&&(i=!1,f=r+1),u>=0&&(p===a.charCodeAt(u)?--u==-1&&(t=r):(u=-1,t=f))}return n===t?t=f:t===-1&&(t=s.length),s.slice(n,t)}for(r=s.length-1;r>=0;--r)if(s.charCodeAt(r)===47){if(!i){n=r+1;break}}else t===-1&&(i=!1,t=r+1);return t===-1?"":s.slice(n,t)},extname:function(s){d(s);for(var a=-1,r=0,n=-1,t=!0,i=0,u=s.length-1;u>=0;--u){var f=s.charCodeAt(u);if(f!==47)n===-1&&(t=!1,n=u+1),f===46?a===-1?a=u:i!==1&&(i=1):a!==-1&&(i=-1);else if(!t){r=u+1;break}}return a===-1||n===-1||i===0||i===1&&a===n-1&&a===r+1?"":s.slice(a,n)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return(function(a,r){var n=r.dir||r.root,t=r.base||(r.name||"")+(r.ext||"");return n?n===r.root?n+t:n+"/"+t:t})(0,s)},parse:function(s){d(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var r,n=s.charCodeAt(0),t=n===47;t?(a.root="/",r=1):r=0;for(var i=-1,u=0,f=-1,p=!0,y=s.length-1,g=0;y>=r;--y)if((n=s.charCodeAt(y))!==47)f===-1&&(p=!1,f=y+1),n===46?i===-1?i=y:g!==1&&(g=1):i!==-1&&(g=-1);else if(!p){u=y+1;break}return i===-1||f===-1||g===0||g===1&&i===f-1&&i===u+1?f!==-1&&(a.base=a.name=u===0&&t?s.slice(1,f):s.slice(u,f)):(u===0&&t?(a.name=s.slice(1,i),a.base=s.slice(1,f)):(a.name=s.slice(u,i),a.base=s.slice(u,f)),a.ext=s.slice(i,f)),u>0?a.dir=s.slice(0,u-1):t&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};h.posix=h,_.exports=h},7418:_=>{var l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;_.exports=(function(){try{if(!Object.assign)return!1;var d=new String("abc");if(d[5]="de",Object.getOwnPropertyNames(d)[0]==="5")return!1;for(var m={},h=0;h<10;h++)m["_"+String.fromCharCode(h)]=h;if(Object.getOwnPropertyNames(m).map((function(a){return m[a]})).join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach((function(a){s[a]=a})),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}})()?Object.assign:function(d,m){for(var h,s,a=(function(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)})(d),r=1;r<arguments.length;r++){for(var n in h=Object(arguments[r]))o.call(h,n)&&(a[n]=h[n]);if(l){s=l(h);for(var t=0;t<s.length;t++)c.call(h,s[t])&&(a[s[t]]=h[s[t]])}}return a}},7435:(_,l)=>{l.endianness=function(){return"LE"},l.hostname=function(){return typeof location<"u"?location.hostname:""},l.loadavg=function(){return[]},l.uptime=function(){return 0},l.freemem=function(){return Number.MAX_VALUE},l.totalmem=function(){return Number.MAX_VALUE},l.cpus=function(){return[]},l.type=function(){return"Browser"},l.release=function(){return typeof navigator<"u"?navigator.appVersion:""},l.networkInterfaces=l.getNetworkInterfaces=function(){return{}},l.arch=function(){return"javascript"},l.platform=function(){return"browser"},l.tmpdir=l.tmpDir=function(){return"/tmp"},l.EOL=`
`,l.homedir=function(){return"/"}},8985:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Deferred=void 0,l.Deferred=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise(((o,c)=>{this.reject=c,this.resolve=o}))}}},7279:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EndOfStreamError=l.defaultMessages=void 0,l.defaultMessages="End-Of-Stream";class o extends Error{constructor(){super(l.defaultMessages)}}l.EndOfStreamError=o},6654:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.StreamReader=l.EndOfStreamError=void 0;const c=o(7279),d=o(8985);var m=o(7279);Object.defineProperty(l,"EndOfStreamError",{enumerable:!0,get:function(){return m.EndOfStreamError}}),l.StreamReader=class{constructor(h){if(this.s=h,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!h.read||!h.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",(()=>this.reject(new c.EndOfStreamError))),this.s.once("error",(s=>this.reject(s))),this.s.once("close",(()=>this.reject(new Error("Stream closed"))))}async peek(h,s,a){const r=await this.read(h,s,a);return this.peekQueue.push(h.subarray(s,s+r)),r}async read(h,s,a){if(a===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new c.EndOfStreamError;let r=a,n=0;for(;this.peekQueue.length>0&&r>0;){const t=this.peekQueue.pop();if(!t)throw new Error("peekData should be defined");const i=Math.min(t.length,r);h.set(t.subarray(0,i),s+n),n+=i,r-=i,i<t.length&&this.peekQueue.push(t.subarray(i))}for(;r>0&&!this.endOfStream;){const t=Math.min(r,1048576),i=await this.readFromStream(h,s+n,t);if(n+=i,i<t)break;r-=i}return n}async readFromStream(h,s,a){const r=this.s.read(a);if(r)return h.set(r,s),r.length;{const n={buffer:h,offset:s,length:a,deferred:new d.Deferred};return this.deferred=n.deferred,this.s.once("readable",(()=>{this.readDeferred(n)})),n.deferred.promise}}readDeferred(h){const s=this.s.read(h.length);s?(h.buffer.set(s,h.offset),h.deferred.resolve(s.length),this.deferred=null):this.s.once("readable",(()=>{this.readDeferred(h)}))}reject(h){this.endOfStream=!0,this.deferred&&(this.deferred.reject(h),this.deferred=null)}}},5167:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.StreamReader=l.EndOfStreamError=void 0;var c=o(7279);Object.defineProperty(l,"EndOfStreamError",{enumerable:!0,get:function(){return c.EndOfStreamError}});var d=o(6654);Object.defineProperty(l,"StreamReader",{enumerable:!0,get:function(){return d.StreamReader}})},2676:function(_,l,o){var c=o(4155);_.exports=(function(){function d(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function m(P,A){for(var D=0;D<A.length;D++){var W=A[D];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(P,W.key,W)}}function h(P,A,D){return A&&m(P.prototype,A),D&&m(P,D),P}var s=function(P,A){this.next=null,this.key=P,this.data=A,this.left=null,this.right=null};function a(P,A){return P>A?1:P<A?-1:0}function r(P,A,D){for(var W=new s(null,null),ae=W,le=W;;){var Ne=D(P,A.key);if(Ne<0){if(A.left===null)break;if(D(P,A.left.key)<0){var De=A.left;if(A.left=De.right,De.right=A,(A=De).left===null)break}le.left=A,le=A,A=A.left}else{if(!(Ne>0)||A.right===null||D(P,A.right.key)>0&&(De=A.right,A.right=De.left,De.left=A,(A=De).right===null))break;ae.right=A,ae=A,A=A.right}}return ae.right=A.left,le.left=A.right,A.left=W.right,A.right=W.left,A}function n(P,A,D,W){var ae=new s(P,A);if(D===null)return ae.left=ae.right=null,ae;var le=W(P,(D=r(P,D,W)).key);return le<0?(ae.left=D.left,ae.right=D,D.left=null):le>=0&&(ae.right=D.right,ae.left=D,D.right=null),ae}function t(P,A,D){var W=null,ae=null;if(A){var le=D((A=r(P,A,D)).key,P);le===0?(W=A.left,ae=A.right):le<0?(ae=A.right,A.right=null,W=A):(W=A.left,A.left=null,ae=A)}return{left:W,right:ae}}function i(P,A,D,W,ae){if(P){W(A+(D?"└── ":"├── ")+ae(P)+`
`);var le=A+(D?"    ":"│   ");P.left&&i(P.left,le,!1,W,ae),P.right&&i(P.right,le,!0,W,ae)}}var u=(function(){function P(A){A===void 0&&(A=a),this._root=null,this._size=0,this._comparator=A}return P.prototype.insert=function(A,D){return this._size++,this._root=n(A,D,this._root,this._comparator)},P.prototype.add=function(A,D){var W=new s(A,D);this._root===null&&(W.left=W.right=null,this._size++,this._root=W);var ae=this._comparator,le=r(A,this._root,ae),Ne=ae(A,le.key);return Ne===0?this._root=le:(Ne<0?(W.left=le.left,W.right=le,le.left=null):Ne>0&&(W.right=le.right,W.left=le,le.right=null),this._size++,this._root=W),this._root},P.prototype.remove=function(A){this._root=this._remove(A,this._root,this._comparator)},P.prototype._remove=function(A,D,W){var ae;return D===null?null:W(A,(D=r(A,D,W)).key)===0?(D.left===null?ae=D.right:(ae=r(A,D.left,W)).right=D.right,this._size--,ae):D},P.prototype.pop=function(){var A=this._root;if(A){for(;A.left;)A=A.left;return this._root=r(A.key,this._root,this._comparator),this._root=this._remove(A.key,this._root,this._comparator),{key:A.key,data:A.data}}return null},P.prototype.findStatic=function(A){for(var D=this._root,W=this._comparator;D;){var ae=W(A,D.key);if(ae===0)return D;D=ae<0?D.left:D.right}return null},P.prototype.find=function(A){return this._root&&(this._root=r(A,this._root,this._comparator),this._comparator(A,this._root.key)!==0)?null:this._root},P.prototype.contains=function(A){for(var D=this._root,W=this._comparator;D;){var ae=W(A,D.key);if(ae===0)return!0;D=ae<0?D.left:D.right}return!1},P.prototype.forEach=function(A,D){for(var W=this._root,ae=[],le=!1;!le;)W!==null?(ae.push(W),W=W.left):ae.length!==0?(W=ae.pop(),A.call(D,W),W=W.right):le=!0;return this},P.prototype.range=function(A,D,W,ae){for(var le=[],Ne=this._comparator,De=this._root;le.length!==0||De;)if(De)le.push(De),De=De.left;else{if(Ne((De=le.pop()).key,D)>0)break;if(Ne(De.key,A)>=0&&W.call(ae,De))return this;De=De.right}return this},P.prototype.keys=function(){var A=[];return this.forEach((function(D){var W=D.key;return A.push(W)})),A},P.prototype.values=function(){var A=[];return this.forEach((function(D){var W=D.data;return A.push(W)})),A},P.prototype.min=function(){return this._root?this.minNode(this._root).key:null},P.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},P.prototype.minNode=function(A){if(A===void 0&&(A=this._root),A)for(;A.left;)A=A.left;return A},P.prototype.maxNode=function(A){if(A===void 0&&(A=this._root),A)for(;A.right;)A=A.right;return A},P.prototype.at=function(A){for(var D=this._root,W=!1,ae=0,le=[];!W;)if(D)le.push(D),D=D.left;else if(le.length>0){if(D=le.pop(),ae===A)return D;ae++,D=D.right}else W=!0;return null},P.prototype.next=function(A){var D=this._root,W=null;if(A.right){for(W=A.right;W.left;)W=W.left;return W}for(var ae=this._comparator;D;){var le=ae(A.key,D.key);if(le===0)break;le<0?(W=D,D=D.left):D=D.right}return W},P.prototype.prev=function(A){var D=this._root,W=null;if(A.left!==null){for(W=A.left;W.right;)W=W.right;return W}for(var ae=this._comparator;D;){var le=ae(A.key,D.key);if(le===0)break;le<0?D=D.left:(W=D,D=D.right)}return W},P.prototype.clear=function(){return this._root=null,this._size=0,this},P.prototype.toList=function(){return(function(A){for(var D=A,W=[],ae=!1,le=new s(null,null),Ne=le;!ae;)D?(W.push(D),D=D.left):W.length>0?D=(D=Ne=Ne.next=W.pop()).right:ae=!0;return Ne.next=null,le.next})(this._root)},P.prototype.load=function(A,D,W){D===void 0&&(D=[]),W===void 0&&(W=!1);var ae=A.length,le=this._comparator;if(W&&y(A,D,0,ae-1,le),this._root===null)this._root=f(A,D,0,ae),this._size=ae;else{var Ne=(function(De,Ye,ht){for(var F=new s(null,null),V=F,ne=De,Se=Ye;ne!==null&&Se!==null;)ht(ne.key,Se.key)<0?(V.next=ne,ne=ne.next):(V.next=Se,Se=Se.next),V=V.next;return ne!==null?V.next=ne:Se!==null&&(V.next=Se),F.next})(this.toList(),(function(De,Ye){for(var ht=new s(null,null),F=ht,V=0;V<De.length;V++)F=F.next=new s(De[V],Ye[V]);return F.next=null,ht.next})(A,D),le);ae=this._size+ae,this._root=p({head:Ne},0,ae)}return this},P.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(P.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),P.prototype.toString=function(A){A===void 0&&(A=function(W){return String(W.key)});var D=[];return i(this._root,"",!0,(function(W){return D.push(W)}),A),D.join("")},P.prototype.update=function(A,D,W){var ae=this._comparator,le=t(A,this._root,ae),Ne=le.left,De=le.right;ae(A,D)<0?De=n(D,W,De,ae):Ne=n(D,W,Ne,ae),this._root=(function(Ye,ht,F){return ht===null?Ye:(Ye===null||((ht=r(Ye.key,ht,F)).left=Ye),ht)})(Ne,De,ae)},P.prototype.split=function(A){return t(A,this._root,this._comparator)},P})();function f(P,A,D,W){var ae=W-D;if(ae>0){var le=D+Math.floor(ae/2),Ne=P[le],De=A[le],Ye=new s(Ne,De);return Ye.left=f(P,A,D,le),Ye.right=f(P,A,le+1,W),Ye}return null}function p(P,A,D){var W=D-A;if(W>0){var ae=A+Math.floor(W/2),le=p(P,A,ae),Ne=P.head;return Ne.left=le,P.head=P.head.next,Ne.right=p(P,ae+1,D),Ne}return null}function y(P,A,D,W,ae){if(!(D>=W)){for(var le=P[D+W>>1],Ne=D-1,De=W+1;;){do Ne++;while(ae(P[Ne],le)<0);do De--;while(ae(P[De],le)>0);if(Ne>=De)break;var Ye=P[Ne];P[Ne]=P[De],P[De]=Ye,Ye=A[Ne],A[Ne]=A[De],A[De]=Ye}y(P,A,D,De,ae),y(P,A,De+1,W,ae)}}var g=function(P,A){return P.ll.x<=A.x&&A.x<=P.ur.x&&P.ll.y<=A.y&&A.y<=P.ur.y},b=function(P,A){if(A.ur.x<P.ll.x||P.ur.x<A.ll.x||A.ur.y<P.ll.y||P.ur.y<A.ll.y)return null;var D=P.ll.x<A.ll.x?A.ll.x:P.ll.x,W=P.ur.x<A.ur.x?P.ur.x:A.ur.x;return{ll:{x:D,y:P.ll.y<A.ll.y?A.ll.y:P.ll.y},ur:{x:W,y:P.ur.y<A.ur.y?P.ur.y:A.ur.y}}},E=Number.EPSILON;E===void 0&&(E=Math.pow(2,-52));var x=E*E,M=function(P,A){if(-E<P&&P<E&&-E<A&&A<E)return 0;var D=P-A;return D*D<x*P*A?0:P<A?-1:1},S=(function(){function P(){d(this,P),this.reset()}return h(P,[{key:"reset",value:function(){this.xRounder=new O,this.yRounder=new O}},{key:"round",value:function(A,D){return{x:this.xRounder.round(A),y:this.yRounder.round(D)}}}]),P})(),O=(function(){function P(){d(this,P),this.tree=new u,this.round(0)}return h(P,[{key:"round",value:function(A){var D=this.tree.add(A),W=this.tree.prev(D);if(W!==null&&M(D.key,W.key)===0)return this.tree.remove(A),W.key;var ae=this.tree.next(D);return ae!==null&&M(D.key,ae.key)===0?(this.tree.remove(A),ae.key):A}}]),P})(),C=new S,T=function(P,A){return P.x*A.y-P.y*A.x},R=function(P,A){return P.x*A.x+P.y*A.y},B=function(P,A,D){var W={x:A.x-P.x,y:A.y-P.y},ae={x:D.x-P.x,y:D.y-P.y},le=T(W,ae);return M(le,0)},z=function(P){return Math.sqrt(R(P,P))},L=function(P,A,D){var W={x:A.x-P.x,y:A.y-P.y},ae={x:D.x-P.x,y:D.y-P.y};return R(ae,W)/z(ae)/z(W)},Y=function(P,A,D){return A.y===0?null:{x:P.x+A.x/A.y*(D-P.y),y:D}},ie=function(P,A,D){return A.x===0?null:{x:D,y:P.y+A.y/A.x*(D-P.x)}},$=(function(){function P(A,D){d(this,P),A.events===void 0?A.events=[this]:A.events.push(this),this.point=A,this.isLeft=D}return h(P,null,[{key:"compare",value:function(A,D){var W=P.comparePoints(A.point,D.point);return W!==0?W:(A.point!==D.point&&A.link(D),A.isLeft!==D.isLeft?A.isLeft?1:-1:ce.compare(A.segment,D.segment))}},{key:"comparePoints",value:function(A,D){return A.x<D.x?-1:A.x>D.x?1:A.y<D.y?-1:A.y>D.y?1:0}}]),h(P,[{key:"link",value:function(A){if(A.point===this.point)throw new Error("Tried to link already linked events");for(var D=A.point.events,W=0,ae=D.length;W<ae;W++){var le=D[W];this.point.events.push(le),le.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var A=this.point.events.length,D=0;D<A;D++){var W=this.point.events[D];if(W.segment.consumedBy===void 0)for(var ae=D+1;ae<A;ae++){var le=this.point.events[ae];le.consumedBy===void 0&&W.otherSE.point.events===le.otherSE.point.events&&W.segment.consume(le.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var A=[],D=0,W=this.point.events.length;D<W;D++){var ae=this.point.events[D];ae!==this&&!ae.segment.ringOut&&ae.segment.isInResult()&&A.push(ae)}return A}},{key:"getLeftmostComparator",value:function(A){var D=this,W=new Map,ae=function(le){var Ne,De,Ye,ht,F,V=le.otherSE;W.set(le,{sine:(Ne=D.point,De=A.point,Ye=V.point,ht={x:De.x-Ne.x,y:De.y-Ne.y},F={x:Ye.x-Ne.x,y:Ye.y-Ne.y},T(F,ht)/z(F)/z(ht)),cosine:L(D.point,A.point,V.point)})};return function(le,Ne){W.has(le)||ae(le),W.has(Ne)||ae(Ne);var De=W.get(le),Ye=De.sine,ht=De.cosine,F=W.get(Ne),V=F.sine,ne=F.cosine;return Ye>=0&&V>=0?ht<ne?1:ht>ne?-1:0:Ye<0&&V<0?ht<ne?-1:ht>ne?1:0:V<Ye?-1:V>Ye?1:0}}}]),P})(),Q=0,ce=(function(){function P(A,D,W,ae){d(this,P),this.id=++Q,this.leftSE=A,A.segment=this,A.otherSE=D,this.rightSE=D,D.segment=this,D.otherSE=A,this.rings=W,this.windings=ae}return h(P,null,[{key:"compare",value:function(A,D){var W=A.leftSE.point.x,ae=D.leftSE.point.x,le=A.rightSE.point.x,Ne=D.rightSE.point.x;if(Ne<W)return 1;if(le<ae)return-1;var De=A.leftSE.point.y,Ye=D.leftSE.point.y,ht=A.rightSE.point.y,F=D.rightSE.point.y;if(W<ae){if(Ye<De&&Ye<ht)return 1;if(Ye>De&&Ye>ht)return-1;var V=A.comparePoint(D.leftSE.point);if(V<0)return 1;if(V>0)return-1;var ne=D.comparePoint(A.rightSE.point);return ne!==0?ne:-1}if(W>ae){if(De<Ye&&De<F)return-1;if(De>Ye&&De>F)return 1;var Se=D.comparePoint(A.leftSE.point);if(Se!==0)return Se;var Ie=A.comparePoint(D.rightSE.point);return Ie<0?1:Ie>0?-1:1}if(De<Ye)return-1;if(De>Ye)return 1;if(le<Ne){var ke=D.comparePoint(A.rightSE.point);if(ke!==0)return ke}if(le>Ne){var $e=A.comparePoint(D.rightSE.point);if($e<0)return 1;if($e>0)return-1}if(le!==Ne){var xt=ht-De,At=le-W,Bt=F-Ye,Rt=Ne-ae;if(xt>At&&Bt<Rt)return 1;if(xt<At&&Bt>Rt)return-1}return le>Ne?1:le<Ne||ht<F?-1:ht>F?1:A.id<D.id?-1:A.id>D.id?1:0}}]),h(P,[{key:"replaceRightSE",value:function(A){this.rightSE=A,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var A=this.leftSE.point.y,D=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:A<D?A:D},ur:{x:this.rightSE.point.x,y:A>D?A:D}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(A){return A.x===this.leftSE.point.x&&A.y===this.leftSE.point.y||A.x===this.rightSE.point.x&&A.y===this.rightSE.point.y}},{key:"comparePoint",value:function(A){if(this.isAnEndpoint(A))return 0;var D=this.leftSE.point,W=this.rightSE.point,ae=this.vector();if(D.x===W.x)return A.x===D.x?0:A.x<D.x?1:-1;var le=(A.y-D.y)/ae.y,Ne=D.x+le*ae.x;if(A.x===Ne)return 0;var De=(A.x-D.x)/ae.x,Ye=D.y+De*ae.y;return A.y===Ye?0:A.y<Ye?-1:1}},{key:"getIntersection",value:function(A){var D=this.bbox(),W=A.bbox(),ae=b(D,W);if(ae===null)return null;var le=this.leftSE.point,Ne=this.rightSE.point,De=A.leftSE.point,Ye=A.rightSE.point,ht=g(D,De)&&this.comparePoint(De)===0,F=g(W,le)&&A.comparePoint(le)===0,V=g(D,Ye)&&this.comparePoint(Ye)===0,ne=g(W,Ne)&&A.comparePoint(Ne)===0;if(F&&ht)return ne&&!V?Ne:!ne&&V?Ye:null;if(F)return V&&le.x===Ye.x&&le.y===Ye.y?null:le;if(ht)return ne&&Ne.x===De.x&&Ne.y===De.y?null:De;if(ne&&V)return null;if(ne)return Ne;if(V)return Ye;var Se=(function(Ie,ke,$e,xt){if(ke.x===0)return ie($e,xt,Ie.x);if(xt.x===0)return ie(Ie,ke,$e.x);if(ke.y===0)return Y($e,xt,Ie.y);if(xt.y===0)return Y(Ie,ke,$e.y);var At=T(ke,xt);if(At==0)return null;var Bt={x:$e.x-Ie.x,y:$e.y-Ie.y},Rt=T(Bt,ke)/At,Gt=T(Bt,xt)/At;return{x:(Ie.x+Gt*ke.x+($e.x+Rt*xt.x))/2,y:(Ie.y+Gt*ke.y+($e.y+Rt*xt.y))/2}})(le,this.vector(),De,A.vector());return Se===null?null:g(ae,Se)?C.round(Se.x,Se.y):null}},{key:"split",value:function(A){var D=[],W=A.events!==void 0,ae=new $(A,!0),le=new $(A,!1),Ne=this.rightSE;this.replaceRightSE(le),D.push(le),D.push(ae);var De=new P(ae,Ne,this.rings.slice(),this.windings.slice());return $.comparePoints(De.leftSE.point,De.rightSE.point)>0&&De.swapEvents(),$.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),W&&(ae.checkForConsuming(),le.checkForConsuming()),D}},{key:"swapEvents",value:function(){var A=this.rightSE;this.rightSE=this.leftSE,this.leftSE=A,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var D=0,W=this.windings.length;D<W;D++)this.windings[D]*=-1}},{key:"consume",value:function(A){for(var D=this,W=A;D.consumedBy;)D=D.consumedBy;for(;W.consumedBy;)W=W.consumedBy;var ae=P.compare(D,W);if(ae!==0){if(ae>0){var le=D;D=W,W=le}if(D.prev===W){var Ne=D;D=W,W=Ne}for(var De=0,Ye=W.rings.length;De<Ye;De++){var ht=W.rings[De],F=W.windings[De],V=D.rings.indexOf(ht);V===-1?(D.rings.push(ht),D.windings.push(F)):D.windings[V]+=F}W.rings=null,W.windings=null,W.consumedBy=D,W.leftSE.consumedBy=D.leftSE,W.rightSE.consumedBy=D.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var A=this.prev.consumedBy||this.prev;this._beforeState=A.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var A=this.beforeState();this._afterState={rings:A.rings.slice(0),windings:A.windings.slice(0),multiPolys:[]};for(var D=this._afterState.rings,W=this._afterState.windings,ae=this._afterState.multiPolys,le=0,Ne=this.rings.length;le<Ne;le++){var De=this.rings[le],Ye=this.windings[le],ht=D.indexOf(De);ht===-1?(D.push(De),W.push(Ye)):W[ht]+=Ye}for(var F=[],V=[],ne=0,Se=D.length;ne<Se;ne++)if(W[ne]!==0){var Ie=D[ne],ke=Ie.poly;if(V.indexOf(ke)===-1)if(Ie.isExterior)F.push(ke);else{V.indexOf(ke)===-1&&V.push(ke);var $e=F.indexOf(Ie.poly);$e!==-1&&F.splice($e,1)}}for(var xt=0,At=F.length;xt<At;xt++){var Bt=F[xt].multiPoly;ae.indexOf(Bt)===-1&&ae.push(Bt)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var A=this.beforeState().multiPolys,D=this.afterState().multiPolys;switch(ze.type){case"union":var W=A.length===0,ae=D.length===0;this._isInResult=W!==ae;break;case"intersection":var le,Ne;A.length<D.length?(le=A.length,Ne=D.length):(le=D.length,Ne=A.length),this._isInResult=Ne===ze.numMultiPolys&&le<Ne;break;case"xor":var De=Math.abs(A.length-D.length);this._isInResult=De%2==1;break;case"difference":var Ye=function(ht){return ht.length===1&&ht[0].isSubject};this._isInResult=Ye(A)!==Ye(D);break;default:throw new Error("Unrecognized operation type found ".concat(ze.type))}return this._isInResult}}],[{key:"fromRing",value:function(A,D,W){var ae,le,Ne,De=$.comparePoints(A,D);if(De<0)ae=A,le=D,Ne=1;else{if(!(De>0))throw new Error("Tried to create degenerate segment at [".concat(A.x,", ").concat(A.y,"]"));ae=D,le=A,Ne=-1}return new P(new $(ae,!0),new $(le,!1),[W],[Ne])}}]),P})(),be=(function(){function P(A,D,W){if(d(this,P),!Array.isArray(A)||A.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=D,this.isExterior=W,this.segments=[],typeof A[0][0]!="number"||typeof A[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var ae=C.round(A[0][0],A[0][1]);this.bbox={ll:{x:ae.x,y:ae.y},ur:{x:ae.x,y:ae.y}};for(var le=ae,Ne=1,De=A.length;Ne<De;Ne++){if(typeof A[Ne][0]!="number"||typeof A[Ne][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Ye=C.round(A[Ne][0],A[Ne][1]);Ye.x===le.x&&Ye.y===le.y||(this.segments.push(ce.fromRing(le,Ye,this)),Ye.x<this.bbox.ll.x&&(this.bbox.ll.x=Ye.x),Ye.y<this.bbox.ll.y&&(this.bbox.ll.y=Ye.y),Ye.x>this.bbox.ur.x&&(this.bbox.ur.x=Ye.x),Ye.y>this.bbox.ur.y&&(this.bbox.ur.y=Ye.y),le=Ye)}ae.x===le.x&&ae.y===le.y||this.segments.push(ce.fromRing(le,ae,this))}return h(P,[{key:"getSweepEvents",value:function(){for(var A=[],D=0,W=this.segments.length;D<W;D++){var ae=this.segments[D];A.push(ae.leftSE),A.push(ae.rightSE)}return A}}]),P})(),Ae=(function(){function P(A,D){if(d(this,P),!Array.isArray(A))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new be(A[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var W=1,ae=A.length;W<ae;W++){var le=new be(A[W],this,!1);le.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=le.bbox.ll.x),le.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=le.bbox.ll.y),le.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=le.bbox.ur.x),le.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=le.bbox.ur.y),this.interiorRings.push(le)}this.multiPoly=D}return h(P,[{key:"getSweepEvents",value:function(){for(var A=this.exteriorRing.getSweepEvents(),D=0,W=this.interiorRings.length;D<W;D++)for(var ae=this.interiorRings[D].getSweepEvents(),le=0,Ne=ae.length;le<Ne;le++)A.push(ae[le]);return A}}]),P})(),we=(function(){function P(A,D){if(d(this,P),!Array.isArray(A))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof A[0][0][0]=="number"&&(A=[A])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var W=0,ae=A.length;W<ae;W++){var le=new Ae(A[W],this);le.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=le.bbox.ll.x),le.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=le.bbox.ll.y),le.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=le.bbox.ur.x),le.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=le.bbox.ur.y),this.polys.push(le)}this.isSubject=D}return h(P,[{key:"getSweepEvents",value:function(){for(var A=[],D=0,W=this.polys.length;D<W;D++)for(var ae=this.polys[D].getSweepEvents(),le=0,Ne=ae.length;le<Ne;le++)A.push(ae[le]);return A}}]),P})(),Xe=(function(){function P(A){d(this,P),this.events=A;for(var D=0,W=A.length;D<W;D++)A[D].segment.ringOut=this;this.poly=null}return h(P,null,[{key:"factory",value:function(A){for(var D=[],W=0,ae=A.length;W<ae;W++){var le=A[W];if(le.isInResult()&&!le.ringOut){for(var Ne=null,De=le.leftSE,Ye=le.rightSE,ht=[De],F=De.point,V=[];Ne=De,De=Ye,ht.push(De),De.point!==F;)for(;;){var ne=De.getAvailableLinkedEvents();if(ne.length===0){var Se=ht[0].point,Ie=ht[ht.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Se.x,",")+" ".concat(Se.y,"]. Last matching segment found ends at")+" [".concat(Ie.x,", ").concat(Ie.y,"]."))}if(ne.length===1){Ye=ne[0].otherSE;break}for(var ke=null,$e=0,xt=V.length;$e<xt;$e++)if(V[$e].point===De.point){ke=$e;break}if(ke===null){V.push({index:ht.length,point:De.point});var At=De.getLeftmostComparator(Ne);Ye=ne.sort(At)[0].otherSE;break}var Bt=V.splice(ke)[0],Rt=ht.splice(Bt.index);Rt.unshift(Rt[0].otherSE),D.push(new P(Rt.reverse()))}D.push(new P(ht))}}return D}}]),h(P,[{key:"getGeom",value:function(){for(var A=this.events[0].point,D=[A],W=1,ae=this.events.length-1;W<ae;W++){var le=this.events[W].point,Ne=this.events[W+1].point;B(le,A,Ne)!==0&&(D.push(le),A=le)}if(D.length===1)return null;var De=D[0],Ye=D[1];B(De,A,Ye)===0&&D.shift(),D.push(D[0]);for(var ht=this.isExteriorRing()?1:-1,F=this.isExteriorRing()?0:D.length-1,V=this.isExteriorRing()?D.length:-1,ne=[],Se=F;Se!=V;Se+=ht)ne.push([D[Se].x,D[Se].y]);return ne}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var A=this.enclosingRing();this._isExteriorRing=!A||!A.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var A=this.events[0],D=1,W=this.events.length;D<W;D++){var ae=this.events[D];$.compare(A,ae)>0&&(A=ae)}for(var le=A.segment.prevInResult(),Ne=le?le.prevInResult():null;;){if(!le)return null;if(!Ne)return le.ringOut;if(Ne.ringOut!==le.ringOut)return Ne.ringOut.enclosingRing()!==le.ringOut?le.ringOut:le.ringOut.enclosingRing();le=Ne.prevInResult(),Ne=le?le.prevInResult():null}}}]),P})(),Ve=(function(){function P(A){d(this,P),this.exteriorRing=A,A.poly=this,this.interiorRings=[]}return h(P,[{key:"addInterior",value:function(A){this.interiorRings.push(A),A.poly=this}},{key:"getGeom",value:function(){var A=[this.exteriorRing.getGeom()];if(A[0]===null)return null;for(var D=0,W=this.interiorRings.length;D<W;D++){var ae=this.interiorRings[D].getGeom();ae!==null&&A.push(ae)}return A}}]),P})(),st=(function(){function P(A){d(this,P),this.rings=A,this.polys=this._composePolys(A)}return h(P,[{key:"getGeom",value:function(){for(var A=[],D=0,W=this.polys.length;D<W;D++){var ae=this.polys[D].getGeom();ae!==null&&A.push(ae)}return A}},{key:"_composePolys",value:function(A){for(var D=[],W=0,ae=A.length;W<ae;W++){var le=A[W];if(!le.poly)if(le.isExteriorRing())D.push(new Ve(le));else{var Ne=le.enclosingRing();Ne.poly||D.push(new Ve(Ne)),Ne.poly.addInterior(le)}}return D}}]),P})(),tt=(function(){function P(A){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ce.compare;d(this,P),this.queue=A,this.tree=new u(D),this.segments=[]}return h(P,[{key:"process",value:function(A){var D=A.segment,W=[];if(A.consumedBy)return A.isLeft?this.queue.remove(A.otherSE):this.tree.remove(D),W;var ae=A.isLeft?this.tree.insert(D):this.tree.find(D);if(!ae)throw new Error("Unable to find segment #".concat(D.id," ")+"[".concat(D.leftSE.point.x,", ").concat(D.leftSE.point.y,"] -> ")+"[".concat(D.rightSE.point.x,", ").concat(D.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var le=ae,Ne=ae,De=void 0,Ye=void 0;De===void 0;)(le=this.tree.prev(le))===null?De=null:le.key.consumedBy===void 0&&(De=le.key);for(;Ye===void 0;)(Ne=this.tree.next(Ne))===null?Ye=null:Ne.key.consumedBy===void 0&&(Ye=Ne.key);if(A.isLeft){var ht=null;if(De){var F=De.getIntersection(D);if(F!==null&&(D.isAnEndpoint(F)||(ht=F),!De.isAnEndpoint(F)))for(var V=this._splitSafely(De,F),ne=0,Se=V.length;ne<Se;ne++)W.push(V[ne])}var Ie=null;if(Ye){var ke=Ye.getIntersection(D);if(ke!==null&&(D.isAnEndpoint(ke)||(Ie=ke),!Ye.isAnEndpoint(ke)))for(var $e=this._splitSafely(Ye,ke),xt=0,At=$e.length;xt<At;xt++)W.push($e[xt])}if(ht!==null||Ie!==null){var Bt;Bt=ht===null?Ie:Ie===null||$.comparePoints(ht,Ie)<=0?ht:Ie,this.queue.remove(D.rightSE),W.push(D.rightSE);for(var Rt=D.split(Bt),Gt=0,_n=Rt.length;Gt<_n;Gt++)W.push(Rt[Gt])}W.length>0?(this.tree.remove(D),W.push(A)):(this.segments.push(D),D.prev=De)}else{if(De&&Ye){var fn=De.getIntersection(Ye);if(fn!==null){if(!De.isAnEndpoint(fn))for(var ln=this._splitSafely(De,fn),rt=0,dt=ln.length;rt<dt;rt++)W.push(ln[rt]);if(!Ye.isAnEndpoint(fn))for(var Qe=this._splitSafely(Ye,fn),pt=0,mt=Qe.length;pt<mt;pt++)W.push(Qe[pt])}}this.tree.remove(D)}return W}},{key:"_splitSafely",value:function(A,D){this.tree.remove(A);var W=A.rightSE;this.queue.remove(W);var ae=A.split(D);return ae.push(W),A.consumedBy===void 0&&this.tree.insert(A),ae}}]),P})(),he=c!==void 0&&c.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,de=c!==void 0&&c.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,ze=new((function(){function P(){d(this,P)}return h(P,[{key:"run",value:function(A,D,W){ze.type=A,C.reset();for(var ae=[new we(D,!0)],le=0,Ne=W.length;le<Ne;le++)ae.push(new we(W[le],!1));if(ze.numMultiPolys=ae.length,ze.type==="difference")for(var De=ae[0],Ye=1;Ye<ae.length;)b(ae[Ye].bbox,De.bbox)!==null?Ye++:ae.splice(Ye,1);if(ze.type==="intersection"){for(var ht=0,F=ae.length;ht<F;ht++)for(var V=ae[ht],ne=ht+1,Se=ae.length;ne<Se;ne++)if(b(V.bbox,ae[ne].bbox)===null)return[]}for(var Ie=new u($.compare),ke=0,$e=ae.length;ke<$e;ke++)for(var xt=ae[ke].getSweepEvents(),At=0,Bt=xt.length;At<Bt;At++)if(Ie.insert(xt[At]),Ie.size>he)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Rt=new tt(Ie),Gt=Ie.size,_n=Ie.pop();_n;){var fn=_n.key;if(Ie.size===Gt){var ln=fn.segment;throw new Error("Unable to pop() ".concat(fn.isLeft?"left":"right"," SweepEvent ")+"[".concat(fn.point.x,", ").concat(fn.point.y,"] from segment #").concat(ln.id," ")+"[".concat(ln.leftSE.point.x,", ").concat(ln.leftSE.point.y,"] -> ")+"[".concat(ln.rightSE.point.x,", ").concat(ln.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Ie.size>he)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Rt.segments.length>de)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var rt=Rt.process(fn),dt=0,Qe=rt.length;dt<Qe;dt++){var pt=rt[dt];pt.consumedBy===void 0&&Ie.insert(pt)}Gt=Ie.size,_n=Ie.pop()}C.reset();var mt=Xe.factory(Rt.segments);return new st(mt).getGeom()}}]),P})());return{union:function(P){for(var A=arguments.length,D=new Array(A>1?A-1:0),W=1;W<A;W++)D[W-1]=arguments[W];return ze.run("union",P,D)},intersection:function(P){for(var A=arguments.length,D=new Array(A>1?A-1:0),W=1;W<A;W++)D[W-1]=arguments[W];return ze.run("intersection",P,D)},xor:function(P){for(var A=arguments.length,D=new Array(A>1?A-1:0),W=1;W<A;W++)D[W-1]=arguments[W];return ze.run("xor",P,D)},difference:function(P){for(var A=arguments.length,D=new Array(A>1?A-1:0),W=1;W<A;W++)D[W-1]=arguments[W];return ze.run("difference",P,D)}}})()},4155:_=>{var l,o,c=_.exports={};function d(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}function h(p){if(l===setTimeout)return setTimeout(p,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(p,0);try{return l(p,0)}catch{try{return l.call(null,p,0)}catch{return l.call(this,p,0)}}}(function(){try{l=typeof setTimeout=="function"?setTimeout:d}catch{l=d}try{o=typeof clearTimeout=="function"?clearTimeout:m}catch{o=m}})();var s,a=[],r=!1,n=-1;function t(){r&&s&&(r=!1,s.length?a=s.concat(a):n=-1,a.length&&i())}function i(){if(!r){var p=h(t);r=!0;for(var y=a.length;y;){for(s=a,a=[];++n<y;)s&&s[n].run();n=-1,y=a.length}s=null,r=!1,(function(g){if(o===clearTimeout)return clearTimeout(g);if((o===m||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(g);try{return o(g)}catch{try{return o.call(null,g)}catch{return o.call(this,g)}}})(p)}}function u(p,y){this.fun=p,this.array=y}function f(){}c.nextTick=function(p){var y=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)y[g-1]=arguments[g];a.push(new u(p,y)),a.length!==1||r||h(i)},u.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=f,c.addListener=f,c.once=f,c.off=f,c.removeListener=f,c.removeAllListeners=f,c.emit=f,c.prependListener=f,c.prependOnceListener=f,c.listeners=function(p){return[]},c.binding=function(p){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(p){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},4472:(_,l,o)=>{o.r(l),o.d(l,{default:()=>Ht});var c=1,d=2,m=3,h=5,s=6378137,a=6356752314e-3,r=.0066943799901413165,n=484813681109536e-20,t=Math.PI/2,i=.16666666666666666,u=.04722222222222222,f=.022156084656084655,p=1e-10,y=.017453292519943295,g=57.29577951308232,b=Math.PI/4,E=2*Math.PI,x=3.14159265359,M={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const S={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var O=/[\s_\-\/\(\)]/g;function C(w,N){if(w[N])return w[N];for(var U,K=Object.keys(w),Z=N.toLowerCase().replace(O,""),J=-1;++J<K.length;)if((U=K[J]).toLowerCase().replace(O,"")===Z)return w[U]}function T(w){var N,U,K,Z={},J=w.split("+").map((function(ee){return ee.trim()})).filter((function(ee){return ee})).reduce((function(ee,ve){var Ce=ve.split("=");return Ce.push(!0),ee[Ce[0].toLowerCase()]=Ce[1],ee}),{}),se={proj:"projName",datum:"datumCode",rf:function(ee){Z.rf=parseFloat(ee)},lat_0:function(ee){Z.lat0=ee*y},lat_1:function(ee){Z.lat1=ee*y},lat_2:function(ee){Z.lat2=ee*y},lat_ts:function(ee){Z.lat_ts=ee*y},lon_0:function(ee){Z.long0=ee*y},lon_1:function(ee){Z.long1=ee*y},lon_2:function(ee){Z.long2=ee*y},alpha:function(ee){Z.alpha=parseFloat(ee)*y},gamma:function(ee){Z.rectified_grid_angle=parseFloat(ee)},lonc:function(ee){Z.longc=ee*y},x_0:function(ee){Z.x0=parseFloat(ee)},y_0:function(ee){Z.y0=parseFloat(ee)},k_0:function(ee){Z.k0=parseFloat(ee)},k:function(ee){Z.k0=parseFloat(ee)},a:function(ee){Z.a=parseFloat(ee)},b:function(ee){Z.b=parseFloat(ee)},r_a:function(){Z.R_A=!0},zone:function(ee){Z.zone=parseInt(ee,10)},south:function(){Z.utmSouth=!0},towgs84:function(ee){Z.datum_params=ee.split(",").map((function(ve){return parseFloat(ve)}))},to_meter:function(ee){Z.to_meter=parseFloat(ee)},units:function(ee){Z.units=ee;var ve=C(S,ee);ve&&(Z.to_meter=ve.to_meter)},from_greenwich:function(ee){Z.from_greenwich=ee*y},pm:function(ee){var ve=C(M,ee);Z.from_greenwich=(ve||parseFloat(ee))*y},nadgrids:function(ee){ee==="@null"?Z.datumCode="none":Z.nadgrids=ee},axis:function(ee){var ve="ewnsud";ee.length===3&&ve.indexOf(ee.substr(0,1))!==-1&&ve.indexOf(ee.substr(1,1))!==-1&&ve.indexOf(ee.substr(2,1))!==-1&&(Z.axis=ee)},approx:function(){Z.approx=!0}};for(N in J)U=J[N],N in se?typeof(K=se[N])=="function"?K(U):Z[K]=U:Z[N]=U;return typeof Z.datumCode=="string"&&Z.datumCode!=="WGS84"&&(Z.datumCode=Z.datumCode.toLowerCase()),Z}const R=function(w){return new Q(w).output()};var B=1,z=/\s/,L=/[A-Za-z]/,Y=/[A-Za-z84_]/,ie=/[,\]]/,$=/[\d\.E\-\+]/;function Q(w){if(typeof w!="string")throw new Error("not a string");this.text=w.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=B}function ce(w,N,U){Array.isArray(N)&&(U.unshift(N),N=null);var K=N?{}:w,Z=U.reduce((function(J,se){return be(se,J),J}),K);N&&(w[N]=Z)}function be(w,N){if(Array.isArray(w)){var U=w.shift();if(U==="PARAMETER"&&(U=w.shift()),w.length===1)return Array.isArray(w[0])?(N[U]={},void be(w[0],N[U])):void(N[U]=w[0]);if(w.length)if(U!=="TOWGS84"){if(U==="AXIS")return U in N||(N[U]=[]),void N[U].push(w);var K;switch(Array.isArray(U)||(N[U]={}),U){case"UNIT":case"PRIMEM":case"VERT_DATUM":return N[U]={name:w[0].toLowerCase(),convert:w[1]},void(w.length===3&&be(w[2],N[U]));case"SPHEROID":case"ELLIPSOID":return N[U]={name:w[0],a:w[1],rf:w[2]},void(w.length===4&&be(w[3],N[U]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return w[0]=["name",w[0]],void ce(N,U,w);default:for(K=-1;++K<w.length;)if(!Array.isArray(w[K]))return be(w,N[U]);return ce(N,U,w)}}else N[U]=w;else N[U]=!0}else N[w]=!0}Q.prototype.readCharicter=function(){var w=this.text[this.place++];if(this.state!==4)for(;z.test(w);){if(this.place>=this.text.length)return;w=this.text[this.place++]}switch(this.state){case B:return this.neutral(w);case 2:return this.keyword(w);case 4:return this.quoted(w);case 5:return this.afterquote(w);case 3:return this.number(w);case-1:return}},Q.prototype.afterquote=function(w){if(w==='"')return this.word+='"',void(this.state=4);if(ie.test(w))return this.word=this.word.trim(),void this.afterItem(w);throw new Error(`havn't handled "`+w+'" in afterquote yet, index '+this.place)},Q.prototype.afterItem=function(w){return w===","?(this.word!==null&&this.currentObject.push(this.word),this.word=null,void(this.state=B)):w==="]"?(this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=B,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Q.prototype.number=function(w){if(!$.test(w)){if(ie.test(w))return this.word=parseFloat(this.word),void this.afterItem(w);throw new Error(`havn't handled "`+w+'" in number yet, index '+this.place)}this.word+=w},Q.prototype.quoted=function(w){w!=='"'?this.word+=w:this.state=5},Q.prototype.keyword=function(w){if(Y.test(w))this.word+=w;else{if(w==="["){var N=[];return N.push(this.word),this.level++,this.root===null?this.root=N:this.currentObject.push(N),this.stack.push(this.currentObject),this.currentObject=N,void(this.state=B)}if(!ie.test(w))throw new Error(`havn't handled "`+w+'" in keyword yet, index '+this.place);this.afterItem(w)}},Q.prototype.neutral=function(w){if(L.test(w))return this.word=w,void(this.state=2);if(w==='"')return this.word="",void(this.state=4);if($.test(w))return this.word=w,void(this.state=3);if(!ie.test(w))throw new Error(`havn't handled "`+w+'" in neutral yet, index '+this.place);this.afterItem(w)},Q.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===-1)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Ae=.017453292519943295;function we(w){return w*Ae}function Xe(w){var N=R(w),U=N.shift(),K=N.shift();N.unshift(["name",K]),N.unshift(["type",U]);var Z={};return be(N,Z),(function(J){if(J.type==="GEOGCS"?J.projName="longlat":J.type==="LOCAL_CS"?(J.projName="identity",J.local=!0):typeof J.PROJECTION=="object"?J.projName=Object.keys(J.PROJECTION)[0]:J.projName=J.PROJECTION,J.AXIS){for(var se="",ee=0,ve=J.AXIS.length;ee<ve;++ee){var Ce=[J.AXIS[ee][0].toLowerCase(),J.AXIS[ee][1].toLowerCase()];Ce[0].indexOf("north")!==-1||(Ce[0]==="y"||Ce[0]==="lat")&&Ce[1]==="north"?se+="n":Ce[0].indexOf("south")!==-1||(Ce[0]==="y"||Ce[0]==="lat")&&Ce[1]==="south"?se+="s":Ce[0].indexOf("east")!==-1||(Ce[0]==="x"||Ce[0]==="lon")&&Ce[1]==="east"?se+="e":Ce[0].indexOf("west")===-1&&(Ce[0]!=="x"&&Ce[0]!=="lon"||Ce[1]!=="west")||(se+="w")}se.length===2&&(se+="u"),se.length===3&&(J.axis=se)}J.UNIT&&(J.units=J.UNIT.name.toLowerCase(),J.units==="metre"&&(J.units="meter"),J.UNIT.convert&&(J.type==="GEOGCS"?J.DATUM&&J.DATUM.SPHEROID&&(J.to_meter=J.UNIT.convert*J.DATUM.SPHEROID.a):J.to_meter=J.UNIT.convert));var Pe=J.GEOGCS;function We(Je){return Je*(J.to_meter||1)}J.type==="GEOGCS"&&(Pe=J),Pe&&(Pe.DATUM?J.datumCode=Pe.DATUM.name.toLowerCase():J.datumCode=Pe.name.toLowerCase(),J.datumCode.slice(0,2)==="d_"&&(J.datumCode=J.datumCode.slice(2)),J.datumCode!=="new_zealand_geodetic_datum_1949"&&J.datumCode!=="new_zealand_1949"||(J.datumCode="nzgd49"),J.datumCode!=="wgs_1984"&&J.datumCode!=="world_geodetic_system_1984"||(J.PROJECTION==="Mercator_Auxiliary_Sphere"&&(J.sphere=!0),J.datumCode="wgs84"),J.datumCode.slice(-6)==="_ferro"&&(J.datumCode=J.datumCode.slice(0,-6)),J.datumCode.slice(-8)==="_jakarta"&&(J.datumCode=J.datumCode.slice(0,-8)),~J.datumCode.indexOf("belge")&&(J.datumCode="rnb72"),Pe.DATUM&&Pe.DATUM.SPHEROID&&(J.ellps=Pe.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),J.ellps.toLowerCase().slice(0,13)==="international"&&(J.ellps="intl"),J.a=Pe.DATUM.SPHEROID.a,J.rf=parseFloat(Pe.DATUM.SPHEROID.rf,10)),Pe.DATUM&&Pe.DATUM.TOWGS84&&(J.datum_params=Pe.DATUM.TOWGS84),~J.datumCode.indexOf("osgb_1936")&&(J.datumCode="osgb36"),~J.datumCode.indexOf("osni_1952")&&(J.datumCode="osni52"),(~J.datumCode.indexOf("tm65")||~J.datumCode.indexOf("geodetic_datum_of_1965"))&&(J.datumCode="ire65"),J.datumCode==="ch1903+"&&(J.datumCode="ch1903"),~J.datumCode.indexOf("israel")&&(J.datumCode="isr93")),J.b&&!isFinite(J.b)&&(J.b=J.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",we],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",we],["x0","false_easting",We],["y0","false_northing",We],["long0","central_meridian",we],["lat0","latitude_of_origin",we],["lat0","standard_parallel_1",we],["lat1","standard_parallel_1",we],["lat2","standard_parallel_2",we],["azimuth","Azimuth"],["alpha","azimuth",we],["srsCode","name"]].forEach((function(Je){return(function(Ze,it){var Ke=it[0],wt=it[1];!(Ke in Ze)&&wt in Ze&&(Ze[Ke]=Ze[wt],it.length===3&&(Ze[Ke]=it[2](Ze[Ke])))})(J,Je)})),J.long0||!J.longc||J.projName!=="Albers_Conic_Equal_Area"&&J.projName!=="Lambert_Azimuthal_Equal_Area"||(J.long0=J.longc),J.lat_ts||!J.lat1||J.projName!=="Stereographic_South_Pole"&&J.projName!=="Polar Stereographic (variant B)"||(J.lat0=we(J.lat1>0?90:-90),J.lat_ts=J.lat1)})(Z),Z}var Ve=o(5108);function st(w){var N=this;if(arguments.length===2){var U=arguments[1];typeof U=="string"?U.charAt(0)==="+"?st[w]=T(arguments[1]):st[w]=Xe(arguments[1]):st[w]=U}else if(arguments.length===1){if(Array.isArray(w))return w.map((function(K){Array.isArray(K)?st.apply(N,K):st(K)}));if(typeof w=="string"){if(w in st)return st[w]}else"EPSG"in w?st["EPSG:"+w.EPSG]=w:"ESRI"in w?st["ESRI:"+w.ESRI]=w:"IAU2000"in w?st["IAU2000:"+w.IAU2000]=w:Ve.log(w);return}}(function(w){w("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),w("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),w("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),w.WGS84=w["EPSG:4326"],w["EPSG:3785"]=w["EPSG:3857"],w.GOOGLE=w["EPSG:3857"],w["EPSG:900913"]=w["EPSG:3857"],w["EPSG:102113"]=w["EPSG:3857"]})(st);const tt=st;var he=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],de=["3857","900913","3785","102113"];const ze=function(w){if(!(function(K){return typeof K=="string"})(w))return w;if((function(K){return K in tt})(w))return tt[w];if((function(K){return he.some((function(Z){return K.indexOf(Z)>-1}))})(w)){var N=Xe(w);if((function(K){var Z=C(K,"authority");if(Z){var J=C(Z,"epsg");return J&&de.indexOf(J)>-1}})(N))return tt["EPSG:3857"];var U=(function(K){var Z=C(K,"extension");if(Z)return C(Z,"proj4")})(N);return U?T(U):N}return(function(K){return K[0]==="+"})(w)?T(w):void 0};function P(w,N){var U,K;if(w=w||{},!N)return w;for(K in N)(U=N[K])!==void 0&&(w[K]=U);return w}function A(w,N,U){var K=w*N;return U/Math.sqrt(1-K*K)}function D(w){return w<0?-1:1}function W(w){return Math.abs(w)<=x?w:w-D(w)*E}function ae(w,N,U){var K=w*U,Z=.5*w;return K=Math.pow((1-K)/(1+K),Z),Math.tan(.5*(t-N))/K}function le(w,N){for(var U,K,Z=.5*w,J=t-2*Math.atan(N),se=0;se<=15;se++)if(U=w*Math.sin(J),J+=K=t-2*Math.atan(N*Math.pow((1-U)/(1+U),Z))-J,Math.abs(K)<=1e-10)return J;return-9999}const Ne={init:function(){var w=this.b/this.a;this.es=1-w*w,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=A(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(w){var N,U,K=w.x,Z=w.y;if(Z*g>90&&Z*g<-90&&K*g>180&&K*g<-180||Math.abs(Math.abs(Z)-t)<=p)return null;if(this.sphere)N=this.x0+this.a*this.k0*W(K-this.long0),U=this.y0+this.a*this.k0*Math.log(Math.tan(b+.5*Z));else{var J=Math.sin(Z),se=ae(this.e,Z,J);N=this.x0+this.a*this.k0*W(K-this.long0),U=this.y0-this.a*this.k0*Math.log(se)}return w.x=N,w.y=U,w},inverse:function(w){var N,U,K=w.x-this.x0,Z=w.y-this.y0;if(this.sphere)U=t-2*Math.atan(Math.exp(-Z/(this.a*this.k0)));else{var J=Math.exp(-Z/(this.a*this.k0));if((U=le(this.e,J))===-9999)return null}return N=W(this.long0+K/(this.a*this.k0)),w.x=N,w.y=U,w},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function De(w){return w}const Ye={init:function(){},forward:De,inverse:De,names:["longlat","identity"]};var ht=o(5108),F=[Ne,Ye],V={},ne=[];function Se(w,N){var U=ne.length;return w.names?(ne[U]=w,w.names.forEach((function(K){V[K.toLowerCase()]=U})),this):(ht.log(N),!0)}const Ie={start:function(){F.forEach(Se)},add:Se,get:function(w){if(!w)return!1;var N=w.toLowerCase();return V[N]!==void 0&&ne[V[N]]?ne[V[N]]:void 0}};var ke={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},$e=ke.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ke.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var xt={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};const At=function(w,N,U,K,Z,J,se){var ee={};return ee.datum_type=w===void 0||w==="none"?h:4,N&&(ee.datum_params=N.map(parseFloat),ee.datum_params[0]===0&&ee.datum_params[1]===0&&ee.datum_params[2]===0||(ee.datum_type=c),ee.datum_params.length>3&&(ee.datum_params[3]===0&&ee.datum_params[4]===0&&ee.datum_params[5]===0&&ee.datum_params[6]===0||(ee.datum_type=d,ee.datum_params[3]*=n,ee.datum_params[4]*=n,ee.datum_params[5]*=n,ee.datum_params[6]=ee.datum_params[6]/1e6+1))),se&&(ee.datum_type=m,ee.grids=se),ee.a=U,ee.b=K,ee.es=Z,ee.ep2=J,ee};var Bt=o(5108),Rt={};function Gt(w){if(w.length===0)return null;var N=w[0]==="@";return N&&(w=w.slice(1)),w==="null"?{name:"null",mandatory:!N,grid:null,isNull:!0}:{name:w,mandatory:!N,grid:Rt[w]||null,isNull:!1}}function _n(w){return w/3600*Math.PI/180}function fn(w,N,U){return String.fromCharCode.apply(null,new Uint8Array(w.buffer.slice(N,U)))}function ln(w){return w.map((function(N){return[_n(N.longitudeShift),_n(N.latitudeShift)]}))}function rt(w,N,U){return{name:fn(w,N+8,N+16).trim(),parent:fn(w,N+24,N+24+8).trim(),lowerLatitude:w.getFloat64(N+72,U),upperLatitude:w.getFloat64(N+88,U),lowerLongitude:w.getFloat64(N+104,U),upperLongitude:w.getFloat64(N+120,U),latitudeInterval:w.getFloat64(N+136,U),longitudeInterval:w.getFloat64(N+152,U),gridNodeCount:w.getInt32(N+168,U)}}function dt(w,N,U,K){for(var Z=N+176,J=[],se=0;se<U.gridNodeCount;se++){var ee={latitudeShift:w.getFloat32(Z+16*se,K),longitudeShift:w.getFloat32(Z+16*se+4,K),latitudeAccuracy:w.getFloat32(Z+16*se+8,K),longitudeAccuracy:w.getFloat32(Z+16*se+12,K)};J.push(ee)}return J}function Qe(w,N){if(!(this instanceof Qe))return new Qe(w);N=N||function(Ke){if(Ke)throw Ke};var U=ze(w);if(typeof U=="object"){var K=Qe.projections.get(U.projName);if(K){if(U.datumCode&&U.datumCode!=="none"){var Z=C(xt,U.datumCode);Z&&(U.datum_params=U.datum_params||(Z.towgs84?Z.towgs84.split(","):null),U.ellps=Z.ellipse,U.datumName=Z.datumName?Z.datumName:U.datumCode)}U.k0=U.k0||1,U.axis=U.axis||"enu",U.ellps=U.ellps||"wgs84",U.lat1=U.lat1||U.lat0;var J,se,ee,ve,Ce,Pe,We=(function(Ke,wt,ct,St,Dt){if(!Ke){var Lt=C(ke,St);Lt||(Lt=$e),Ke=Lt.a,wt=Lt.b,ct=Lt.rf}return ct&&!wt&&(wt=(1-1/ct)*Ke),(ct===0||Math.abs(Ke-wt)<p)&&(Dt=!0,wt=Ke),{a:Ke,b:wt,rf:ct,sphere:Dt}})(U.a,U.b,U.rf,U.ellps,U.sphere),Je=(J=We.a,se=We.b,We.rf,Ce=((ee=J*J)-(ve=se*se))/ee,Pe=0,U.R_A?(ee=(J*=1-Ce*(i+Ce*(u+Ce*f)))*J,Ce=0):Pe=Math.sqrt(Ce),{es:Ce,e:Pe,ep2:(ee-ve)/ve}),Ze=(function(Ke){return Ke===void 0?null:Ke.split(",").map(Gt)})(U.nadgrids),it=U.datum||At(U.datumCode,U.datum_params,We.a,We.b,Je.es,Je.ep2,Ze);P(this,U),P(this,K),this.a=We.a,this.b=We.b,this.rf=We.rf,this.sphere=We.sphere,this.es=Je.es,this.e=Je.e,this.ep2=Je.ep2,this.datum=it,this.init(),N(null,this)}else N(w)}else N(w)}Qe.projections=Ie,Qe.projections.start();const pt=Qe;function mt(w,N,U){var K,Z,J,se,ee=w.x,ve=w.y,Ce=w.z?w.z:0;if(ve<-t&&ve>-1.001*t)ve=-t;else if(ve>t&&ve<1.001*t)ve=t;else{if(ve<-t)return{x:-1/0,y:-1/0,z:w.z};if(ve>t)return{x:1/0,y:1/0,z:w.z}}return ee>Math.PI&&(ee-=2*Math.PI),Z=Math.sin(ve),se=Math.cos(ve),J=Z*Z,{x:((K=U/Math.sqrt(1-N*J))+Ce)*se*Math.cos(ee),y:(K+Ce)*se*Math.sin(ee),z:(K*(1-N)+Ce)*Z}}function Nt(w,N,U,K){var Z,J,se,ee,ve,Ce,Pe,We,Je,Ze,it,Ke,wt,ct,St,Dt=w.x,Lt=w.y,Yt=w.z?w.z:0;if(Z=Math.sqrt(Dt*Dt+Lt*Lt),J=Math.sqrt(Dt*Dt+Lt*Lt+Yt*Yt),Z/U<1e-12){if(ct=0,J/U<1e-12)return St=-K,{x:w.x,y:w.y,z:w.z}}else ct=Math.atan2(Lt,Dt);se=Yt/J,We=(ee=Z/J)*(1-N)*(ve=1/Math.sqrt(1-N*(2-N)*ee*ee)),Je=se*ve,wt=0;do wt++,Ce=N*(Pe=U/Math.sqrt(1-N*Je*Je))/(Pe+(St=Z*We+Yt*Je-Pe*(1-N*Je*Je))),Ke=(it=se*(ve=1/Math.sqrt(1-Ce*(2-Ce)*ee*ee)))*We-(Ze=ee*(1-Ce)*ve)*Je,We=Ze,Je=it;while(Ke*Ke>1e-24&&wt<30);return{x:ct,y:Math.atan(it/Math.abs(Ze)),z:St}}var lt=o(5108);function on(w){return w===c||w===d}function bn(w,N,U){if(w.grids===null||w.grids.length===0)return lt.log("Grid shift grids not found"),-1;for(var K={x:-U.x,y:U.y},Z={x:Number.NaN,y:Number.NaN},J=[],se=0;se<w.grids.length;se++){var ee=w.grids[se];if(J.push(ee.name),ee.isNull){Z=K;break}if(ee.mandatory,ee.grid!==null){var ve=ee.grid.subgrids[0],Ce=(Math.abs(ve.del[1])+Math.abs(ve.del[0]))/1e4,Pe=ve.ll[0]-Ce,We=ve.ll[1]-Ce,Je=ve.ll[0]+(ve.lim[0]-1)*ve.del[0]+Ce,Ze=ve.ll[1]+(ve.lim[1]-1)*ve.del[1]+Ce;if(!(We>K.y||Pe>K.x||Ze<K.y||Je<K.x||(Z=Ge(K,N,ve),isNaN(Z.x))))break}else if(ee.mandatory)return lt.log("Unable to find mandatory grid '"+ee.name+"'"),-1}return isNaN(Z.x)?(lt.log("Failed to find a grid shift table for location '"+-K.x*g+" "+K.y*g+" tried: '"+J+"'"),-1):(U.x=-Z.x,U.y=Z.y,0)}function Ge(w,N,U){var K={x:Number.NaN,y:Number.NaN};if(isNaN(w.x))return K;var Z={x:w.x,y:w.y};Z.x-=U.ll[0],Z.y-=U.ll[1],Z.x=W(Z.x-Math.PI)+Math.PI;var J=pe(Z,U);if(N){if(isNaN(J.x))return K;J.x=Z.x-J.x,J.y=Z.y-J.y;var se,ee,ve=9;do{if(ee=pe(J,U),isNaN(ee.x)){lt.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}se={x:Z.x-(ee.x+J.x),y:Z.y-(ee.y+J.y)},J.x+=se.x,J.y+=se.y}while(ve--&&Math.abs(se.x)>1e-12&&Math.abs(se.y)>1e-12);if(ve<0)return lt.log("Inverse grid shift iterator failed to converge."),K;K.x=W(J.x+U.ll[0]),K.y=J.y+U.ll[1]}else isNaN(J.x)||(K.x=w.x+J.x,K.y=w.y+J.y);return K}function pe(w,N){var U,K={x:w.x/N.del[0],y:w.y/N.del[1]},Z=Math.floor(K.x),J=Math.floor(K.y),se=K.x-1*Z,ee=K.y-1*J,ve={x:Number.NaN,y:Number.NaN};if(Z<0||Z>=N.lim[0]||J<0||J>=N.lim[1])return ve;U=J*N.lim[0]+Z;var Ce=N.cvs[U][0],Pe=N.cvs[U][1];U++;var We=N.cvs[U][0],Je=N.cvs[U][1];U+=N.lim[0];var Ze=N.cvs[U][0],it=N.cvs[U][1];U--;var Ke=N.cvs[U][0],wt=N.cvs[U][1],ct=se*ee,St=se*(1-ee),Dt=(1-se)*(1-ee),Lt=(1-se)*ee;return ve.x=Dt*Ce+St*We+Lt*Ke+ct*Ze,ve.y=Dt*Pe+St*Je+Lt*wt+ct*it,ve}function Te(w,N,U){var K,Z,J,se=U.x,ee=U.y,ve=U.z||0,Ce={};for(J=0;J<3;J++)if(!N||J!==2||U.z!==void 0)switch(J===0?(K=se,Z="ew".indexOf(w.axis[J])!==-1?"x":"y"):J===1?(K=ee,Z="ns".indexOf(w.axis[J])!==-1?"y":"x"):(K=ve,Z="z"),w.axis[J]){case"e":case"n":Ce[Z]=K;break;case"w":case"s":Ce[Z]=-K;break;case"u":U[Z]!==void 0&&(Ce.z=K);break;case"d":U[Z]!==void 0&&(Ce.z=-K);break;default:return null}return Ce}function Me(w){var N={x:w[0],y:w[1]};return w.length>2&&(N.z=w[2]),w.length>3&&(N.m=w[3]),N}function ye(w){if(typeof Number.isFinite=="function"){if(Number.isFinite(w))return;throw new TypeError("coordinates must be finite numbers")}if(typeof w!="number"||w!=w||!isFinite(w))throw new TypeError("coordinates must be finite numbers")}function Fe(w,N,U,K){var Z;if(Array.isArray(U)&&(U=Me(U)),(function(J){ye(J.x),ye(J.y)})(U),w.datum&&N.datum&&(function(J,se){return(J.datum.datum_type===c||J.datum.datum_type===d)&&se.datumCode!=="WGS84"||(se.datum.datum_type===c||se.datum.datum_type===d)&&J.datumCode!=="WGS84"})(w,N)&&(U=Fe(w,Z=new pt("WGS84"),U,K),w=Z),K&&w.axis!=="enu"&&(U=Te(w,!1,U)),w.projName==="longlat")U={x:U.x*y,y:U.y*y,z:U.z||0};else if(w.to_meter&&(U={x:U.x*w.to_meter,y:U.y*w.to_meter,z:U.z||0}),!(U=w.inverse(U)))return;if(w.from_greenwich&&(U.x+=w.from_greenwich),U=(function(J,se,ee){if((function(Ze,it){return Ze.datum_type===it.datum_type&&!(Ze.a!==it.a||Math.abs(Ze.es-it.es)>5e-11)&&(Ze.datum_type===c?Ze.datum_params[0]===it.datum_params[0]&&Ze.datum_params[1]===it.datum_params[1]&&Ze.datum_params[2]===it.datum_params[2]:Ze.datum_type!==d||Ze.datum_params[0]===it.datum_params[0]&&Ze.datum_params[1]===it.datum_params[1]&&Ze.datum_params[2]===it.datum_params[2]&&Ze.datum_params[3]===it.datum_params[3]&&Ze.datum_params[4]===it.datum_params[4]&&Ze.datum_params[5]===it.datum_params[5]&&Ze.datum_params[6]===it.datum_params[6])})(J,se)||J.datum_type===h||se.datum_type===h)return ee;var ve=J.a,Ce=J.es;if(J.datum_type===m){if(bn(J,!1,ee)!==0)return;ve=s,Ce=r}var Pe=se.a,We=se.b,Je=se.es;return se.datum_type===m&&(Pe=s,We=a,Je=r),Ce!==Je||ve!==Pe||on(J.datum_type)||on(se.datum_type)?(ee=mt(ee,Ce,ve),on(J.datum_type)&&(ee=(function(Ze,it,Ke){if(it===c)return{x:Ze.x+Ke[0],y:Ze.y+Ke[1],z:Ze.z+Ke[2]};if(it===d){var wt=Ke[0],ct=Ke[1],St=Ke[2],Dt=Ke[3],Lt=Ke[4],Yt=Ke[5],sn=Ke[6];return{x:sn*(Ze.x-Yt*Ze.y+Lt*Ze.z)+wt,y:sn*(Yt*Ze.x+Ze.y-Dt*Ze.z)+ct,z:sn*(-Lt*Ze.x+Dt*Ze.y+Ze.z)+St}}})(ee,J.datum_type,J.datum_params)),on(se.datum_type)&&(ee=(function(Ze,it,Ke){if(it===c)return{x:Ze.x-Ke[0],y:Ze.y-Ke[1],z:Ze.z-Ke[2]};if(it===d){var wt=Ke[0],ct=Ke[1],St=Ke[2],Dt=Ke[3],Lt=Ke[4],Yt=Ke[5],sn=Ke[6],In=(Ze.x-wt)/sn,jn=(Ze.y-ct)/sn,$n=(Ze.z-St)/sn;return{x:In+Yt*jn-Lt*$n,y:-Yt*In+jn+Dt*$n,z:Lt*In-Dt*jn+$n}}})(ee,se.datum_type,se.datum_params)),ee=Nt(ee,Je,Pe,We),se.datum_type!==m||bn(se,!0,ee)===0?ee:void 0):ee})(w.datum,N.datum,U))return N.from_greenwich&&(U={x:U.x-N.from_greenwich,y:U.y,z:U.z||0}),N.projName==="longlat"?U={x:U.x*g,y:U.y*g,z:U.z||0}:(U=N.forward(U),N.to_meter&&(U={x:U.x/N.to_meter,y:U.y/N.to_meter,z:U.z||0})),K&&N.axis!=="enu"?Te(N,!0,U):U}var qe=pt("WGS84");function je(w,N,U,K){var Z,J,se;return Array.isArray(U)?(Z=Fe(w,N,U,K)||{x:NaN,y:NaN},U.length>2?w.name!==void 0&&w.name==="geocent"||N.name!==void 0&&N.name==="geocent"?typeof Z.z=="number"?[Z.x,Z.y,Z.z].concat(U.splice(3)):[Z.x,Z.y,U[2]].concat(U.splice(3)):[Z.x,Z.y].concat(U.splice(2)):[Z.x,Z.y]):(J=Fe(w,N,U,K),(se=Object.keys(U)).length===2||se.forEach((function(ee){if(w.name!==void 0&&w.name==="geocent"||N.name!==void 0&&N.name==="geocent"){if(ee==="x"||ee==="y"||ee==="z")return}else if(ee==="x"||ee==="y")return;J[ee]=U[ee]})),J)}function ft(w){return w instanceof pt?w:w.oProj?w.oProj:pt(w)}const nt=function(w,N,U){w=ft(w);var K,Z=!1;return N===void 0?(N=w,w=qe,Z=!0):(N.x!==void 0||Array.isArray(N))&&(U=N,N=w,w=qe,Z=!0),N=ft(N),U?je(w,N,U):(K={forward:function(J,se){return je(w,N,J,se)},inverse:function(J,se){return je(N,w,J,se)}},Z&&(K.oProj=N),K)};var ot=6,_t="AJSAJS",Ft="AFAFAF",Ut=65,Vt=73,$t=79,an=86,hn=90;const xn={forward:Qt,inverse:function(w){var N=Zt(En(w.toUpperCase()));return N.lat&&N.lon?[N.lon,N.lat,N.lon,N.lat]:[N.left,N.bottom,N.right,N.top]},toPoint:Jt};function Qt(w,N){return N=N||5,(function(U,K){var Z,J,se,ee,ve,Ce,Pe,We,Je,Ze,it,Ke="00000"+U.easting,wt="00000"+U.northing;return U.zoneNumber+U.zoneLetter+(Je=U.easting,Ze=U.northing,it=yn(U.zoneNumber),Z=Math.floor(Je/1e5),J=Math.floor(Ze/1e5)%20,se=it-1,ee=_t.charCodeAt(se),ve=Ft.charCodeAt(se),We=!1,(Ce=ee+Z-1)>hn&&(Ce=Ce-hn+Ut-1,We=!0),(Ce===Vt||ee<Vt&&Ce>Vt||(Ce>Vt||ee<Vt)&&We)&&Ce++,(Ce===$t||ee<$t&&Ce>$t||(Ce>$t||ee<$t)&&We)&&++Ce===Vt&&Ce++,Ce>hn&&(Ce=Ce-hn+Ut-1),(Pe=ve+J)>an?(Pe=Pe-an+Ut-1,We=!0):We=!1,(Pe===Vt||ve<Vt&&Pe>Vt||(Pe>Vt||ve<Vt)&&We)&&Pe++,(Pe===$t||ve<$t&&Pe>$t||(Pe>$t||ve<$t)&&We)&&++Pe===Vt&&Pe++,Pe>an&&(Pe=Pe-an+Ut-1),String.fromCharCode(Ce)+String.fromCharCode(Pe))+Ke.substr(Ke.length-5,K)+wt.substr(wt.length-5,K)})((function(U){var K,Z,J,se,ee,ve,Ce,Pe=U.lat,We=U.lon,Je=6378137,Ze=.00669438,it=.9996,Ke=nn(Pe),wt=nn(We);Ce=Math.floor((We+180)/6)+1,We===180&&(Ce=60),Pe>=56&&Pe<64&&We>=3&&We<12&&(Ce=32),Pe>=72&&Pe<84&&(We>=0&&We<9?Ce=31:We>=9&&We<21?Ce=33:We>=21&&We<33?Ce=35:We>=33&&We<42&&(Ce=37)),ve=nn(6*(Ce-1)-180+3),K=.006739496752268451,Z=Je/Math.sqrt(1-Ze*Math.sin(Ke)*Math.sin(Ke)),J=Math.tan(Ke)*Math.tan(Ke),se=K*Math.cos(Ke)*Math.cos(Ke);var ct,St,Dt=it*Z*((ee=Math.cos(Ke)*(wt-ve))+(1-J+se)*ee*ee*ee/6+(5-18*J+J*J+72*se-58*K)*ee*ee*ee*ee*ee/120)+5e5,Lt=it*(Je*(.9983242984503243*Ke-.002514607064228144*Math.sin(2*Ke)+2639046602129982e-21*Math.sin(4*Ke)-3418046101696858e-24*Math.sin(6*Ke))+Z*Math.tan(Ke)*(ee*ee/2+(5-J+9*se+4*se*se)*ee*ee*ee*ee/24+(61-58*J+J*J+600*se-2.2240339282485886)*ee*ee*ee*ee*ee*ee/720));return Pe<0&&(Lt+=1e7),{northing:Math.round(Lt),easting:Math.round(Dt),zoneNumber:Ce,zoneLetter:(ct=Pe,St="Z",84>=ct&&ct>=72?St="X":72>ct&&ct>=64?St="W":64>ct&&ct>=56?St="V":56>ct&&ct>=48?St="U":48>ct&&ct>=40?St="T":40>ct&&ct>=32?St="S":32>ct&&ct>=24?St="R":24>ct&&ct>=16?St="Q":16>ct&&ct>=8?St="P":8>ct&&ct>=0?St="N":0>ct&&ct>=-8?St="M":-8>ct&&ct>=-16?St="L":-16>ct&&ct>=-24?St="K":-24>ct&&ct>=-32?St="J":-32>ct&&ct>=-40?St="H":-40>ct&&ct>=-48?St="G":-48>ct&&ct>=-56?St="F":-56>ct&&ct>=-64?St="E":-64>ct&&ct>=-72?St="D":-72>ct&&ct>=-80&&(St="C"),St)}})({lat:w[1],lon:w[0]}),N)}function Jt(w){var N=Zt(En(w.toUpperCase()));return N.lat&&N.lon?[N.lon,N.lat]:[(N.left+N.right)/2,(N.top+N.bottom)/2]}function nn(w){return w*(Math.PI/180)}function en(w){return w/Math.PI*180}function Zt(w){var N=w.northing,U=w.easting,K=w.zoneLetter,Z=w.zoneNumber;if(Z<0||Z>60)return null;var J,se,ee,ve,Ce,Pe,We,Je,Ze,it=.9996,Ke=6378137,wt=.00669438,ct=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),St=U-5e5,Dt=N;K<"N"&&(Dt-=1e7),We=6*(Z-1)-180+3,J=.006739496752268451,Ze=(Je=Dt/it/6367449145945056e-9)+(3*ct/2-27*ct*ct*ct/32)*Math.sin(2*Je)+(21*ct*ct/16-55*ct*ct*ct*ct/32)*Math.sin(4*Je)+151*ct*ct*ct/96*Math.sin(6*Je),se=Ke/Math.sqrt(1-wt*Math.sin(Ze)*Math.sin(Ze)),ee=Math.tan(Ze)*Math.tan(Ze),ve=J*Math.cos(Ze)*Math.cos(Ze),Ce=.99330562*Ke/Math.pow(1-wt*Math.sin(Ze)*Math.sin(Ze),1.5),Pe=St/(se*it);var Lt=Ze-se*Math.tan(Ze)/Ce*(Pe*Pe/2-(5+3*ee+10*ve-4*ve*ve-9*J)*Pe*Pe*Pe*Pe/24+(61+90*ee+298*ve+45*ee*ee-1.6983531815716497-3*ve*ve)*Pe*Pe*Pe*Pe*Pe*Pe/720);Lt=en(Lt);var Yt,sn=(Pe-(1+2*ee+ve)*Pe*Pe*Pe/6+(5-2*ve+28*ee-3*ve*ve+8*J+24*ee*ee)*Pe*Pe*Pe*Pe*Pe/120)/Math.cos(Ze);if(sn=We+en(sn),w.accuracy){var In=Zt({northing:w.northing+w.accuracy,easting:w.easting+w.accuracy,zoneLetter:w.zoneLetter,zoneNumber:w.zoneNumber});Yt={top:In.lat,right:In.lon,bottom:Lt,left:sn}}else Yt={lat:Lt,lon:sn};return Yt}function yn(w){var N=w%ot;return N===0&&(N=ot),N}function En(w){if(w&&w.length===0)throw"MGRSPoint coverting from nothing";for(var N,U=w.length,K=null,Z="",J=0;!/[A-Z]/.test(N=w.charAt(J));){if(J>=2)throw"MGRSPoint bad conversion from: "+w;Z+=N,J++}var se=parseInt(Z,10);if(J===0||J+3>U)throw"MGRSPoint bad conversion from: "+w;var ee=w.charAt(J++);if(ee<="A"||ee==="B"||ee==="Y"||ee>="Z"||ee==="I"||ee==="O")throw"MGRSPoint zone letter "+ee+" not handled: "+w;K=w.substring(J,J+=2);for(var ve=yn(se),Ce=(function(St,Dt){for(var Lt=_t.charCodeAt(Dt-1),Yt=1e5,sn=!1;Lt!==St.charCodeAt(0);){if(++Lt===Vt&&Lt++,Lt===$t&&Lt++,Lt>hn){if(sn)throw"Bad character: "+St;Lt=Ut,sn=!0}Yt+=1e5}return Yt})(K.charAt(0),ve),Pe=(function(St,Dt){if(St>"V")throw"MGRSPoint given invalid Northing "+St;for(var Lt=Ft.charCodeAt(Dt-1),Yt=0,sn=!1;Lt!==St.charCodeAt(0);){if(++Lt===Vt&&Lt++,Lt===$t&&Lt++,Lt>an){if(sn)throw"Bad character: "+St;Lt=Ut,sn=!0}Yt+=1e5}return Yt})(K.charAt(1),ve);Pe<Sn(ee);)Pe+=2e6;var We=U-J;if(We%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+w;var Je,Ze,it,Ke=We/2,wt=0,ct=0;return Ke>0&&(Je=1e5/Math.pow(10,Ke),Ze=w.substring(J,J+Ke),wt=parseFloat(Ze)*Je,it=w.substring(J+Ke),ct=parseFloat(it)*Je),{easting:wt+Ce,northing:ct+Pe,zoneLetter:ee,zoneNumber:se,accuracy:Je}}function Sn(w){var N;switch(w){case"C":N=11e5;break;case"D":N=2e6;break;case"E":N=28e5;break;case"F":N=37e5;break;case"G":N=46e5;break;case"H":N=55e5;break;case"J":N=64e5;break;case"K":N=73e5;break;case"L":N=82e5;break;case"M":N=91e5;break;case"N":N=0;break;case"P":N=8e5;break;case"Q":N=17e5;break;case"R":N=26e5;break;case"S":N=35e5;break;case"T":N=44e5;break;case"U":N=53e5;break;case"V":N=62e5;break;case"W":N=7e6;break;case"X":N=79e5;break;default:N=-1}if(N>=0)return N;throw"Invalid zone letter: "+w}var zn=o(5108);function gn(w,N,U){if(!(this instanceof gn))return new gn(w,N,U);if(Array.isArray(w))this.x=w[0],this.y=w[1],this.z=w[2]||0;else if(typeof w=="object")this.x=w.x,this.y=w.y,this.z=w.z||0;else if(typeof w=="string"&&N===void 0){var K=w.split(",");this.x=parseFloat(K[0],10),this.y=parseFloat(K[1],10),this.z=parseFloat(K[2],10)||0}else this.x=w,this.y=N,this.z=U||0;zn.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}gn.fromMGRS=function(w){return new gn(Jt(w))},gn.prototype.toMGRS=function(w){return Qt([this.x,this.y],w)};const Kn=gn;var Qn=1,kn=.25,Tr=.046875,lr=.01953125,cr=.01068115234375,Lr=.75,Ur=.46875,Sr=.013020833333333334,Dr=.007120768229166667,fr=.3645833333333333,pn=.005696614583333333,ar=.3076171875;function hr(w){var N=[];N[0]=Qn-w*(kn+w*(Tr+w*(lr+w*cr))),N[1]=w*(Lr-w*(Tr+w*(lr+w*cr)));var U=w*w;return N[2]=U*(Ur-w*(Sr+w*Dr)),U*=w,N[3]=U*(fr-w*pn),N[4]=U*w*ar,N}function pr(w,N,U,K){return U*=N,N*=N,K[0]*w-U*(K[1]+N*(K[2]+N*(K[3]+N*K[4])))}var Mr=20;function tr(w,N,U){for(var K=1/(1-N),Z=w,J=Mr;J;--J){var se=Math.sin(Z),ee=1-N*se*se;if(Z-=ee=(pr(Z,se,Math.cos(Z),U)-w)*(ee*Math.sqrt(ee))*K,Math.abs(ee)<p)return Z}return Z}const Un={init:function(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=hr(this.es),this.ml0=pr(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(w){var N,U,K,Z=w.x,J=w.y,se=W(Z-this.long0),ee=Math.sin(J),ve=Math.cos(J);if(this.es){var Ce=ve*se,Pe=Math.pow(Ce,2),We=this.ep2*Math.pow(ve,2),Je=Math.pow(We,2),Ze=Math.abs(ve)>p?Math.tan(J):0,it=Math.pow(Ze,2),Ke=Math.pow(it,2);N=1-this.es*Math.pow(ee,2),Ce/=Math.sqrt(N);var wt=pr(J,ee,ve,this.en);U=this.a*(this.k0*Ce*(1+Pe/6*(1-it+We+Pe/20*(5-18*it+Ke+14*We-58*it*We+Pe/42*(61+179*Ke-Ke*it-479*it)))))+this.x0,K=this.a*(this.k0*(wt-this.ml0+ee*se*Ce/2*(1+Pe/12*(5-it+9*We+4*Je+Pe/30*(61+Ke-58*it+270*We-330*it*We+Pe/56*(1385+543*Ke-Ke*it-3111*it))))))+this.y0}else{var ct=ve*Math.sin(se);if(Math.abs(Math.abs(ct)-1)<p)return 93;if(U=.5*this.a*this.k0*Math.log((1+ct)/(1-ct))+this.x0,K=ve*Math.cos(se)/Math.sqrt(1-Math.pow(ct,2)),(ct=Math.abs(K))>=1){if(ct-1>p)return 93;K=0}else K=Math.acos(K);J<0&&(K=-K),K=this.a*this.k0*(K-this.lat0)+this.y0}return w.x=U,w.y=K,w},inverse:function(w){var N,U,K,Z,J=(w.x-this.x0)*(1/this.a),se=(w.y-this.y0)*(1/this.a);if(this.es)if(U=tr(N=this.ml0+se/this.k0,this.es,this.en),Math.abs(U)<t){var ee=Math.sin(U),ve=Math.cos(U),Ce=Math.abs(ve)>p?Math.tan(U):0,Pe=this.ep2*Math.pow(ve,2),We=Math.pow(Pe,2),Je=Math.pow(Ce,2),Ze=Math.pow(Je,2);N=1-this.es*Math.pow(ee,2);var it=J*Math.sqrt(N)/this.k0,Ke=Math.pow(it,2);K=U-(N*=Ce)*Ke/(1-this.es)*.5*(1-Ke/12*(5+3*Je-9*Pe*Je+Pe-4*We-Ke/30*(61+90*Je-252*Pe*Je+45*Ze+46*Pe-Ke/56*(1385+3633*Je+4095*Ze+1574*Ze*Je)))),Z=W(this.long0+it*(1-Ke/6*(1+2*Je+Pe-Ke/20*(5+28*Je+24*Ze+8*Pe*Je+6*Pe-Ke/42*(61+662*Je+1320*Ze+720*Ze*Je))))/ve)}else K=t*D(se),Z=0;else{var wt=Math.exp(J/this.k0),ct=.5*(wt-1/wt),St=this.lat0+se/this.k0,Dt=Math.cos(St);N=Math.sqrt((1-Math.pow(Dt,2))/(1+Math.pow(ct,2))),K=Math.asin(N),se<0&&(K=-K),Z=ct===0&&Dt===0?0:W(Math.atan2(ct,Dt)+this.long0)}return w.x=Z,w.y=K,w},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function nr(w){var N=Math.exp(w);return(N-1/N)/2}function Rn(w,N){w=Math.abs(w),N=Math.abs(N);var U=Math.max(w,N),K=Math.min(w,N)/(U||1);return U*Math.sqrt(1+Math.pow(K,2))}function dr(w,N){for(var U,K=2*Math.cos(2*N),Z=w.length-1,J=w[Z],se=0;--Z>=0;)U=K*J-se+w[Z],se=J,J=U;return N+U*Math.sin(2*N)}function sr(w,N,U){for(var K,Z,J=Math.sin(N),se=Math.cos(N),ee=nr(U),ve=(function(wt){var ct=Math.exp(wt);return(ct+1/ct)/2})(U),Ce=2*se*ve,Pe=-2*J*ee,We=w.length-1,Je=w[We],Ze=0,it=0,Ke=0;--We>=0;)K=it,Z=Ze,Je=Ce*(it=Je)-K-Pe*(Ze=Ke)+w[We],Ke=Pe*it-Z+Ce*Ze;return[(Ce=J*ve)*Je-(Pe=se*ee)*Ke,Ce*Ke+Pe*Je]}const On={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Un.init.apply(this),this.forward=Un.forward,this.inverse=Un.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var w=this.es/(1+Math.sqrt(1-this.es)),N=w/(2-w),U=N;this.cgb[0]=N*(2+N*(-2/3+N*(N*(116/45+N*(26/45+N*(-2854/675)))-2))),this.cbg[0]=N*(N*(2/3+N*(4/3+N*(-82/45+N*(32/45+N*(4642/4725)))))-2),U*=N,this.cgb[1]=U*(7/3+N*(N*(-227/45+N*(2704/315+N*(2323/945)))-1.6)),this.cbg[1]=U*(5/3+N*(-16/15+N*(-13/9+N*(904/315+N*(-1522/945))))),U*=N,this.cgb[2]=U*(56/15+N*(-136/35+N*(-1262/105+N*(73814/2835)))),this.cbg[2]=U*(-26/15+N*(34/21+N*(1.6+N*(-12686/2835)))),U*=N,this.cgb[3]=U*(4279/630+N*(-332/35+N*(-399572/14175))),this.cbg[3]=U*(1237/630+N*(N*(-24832/14175)-2.4)),U*=N,this.cgb[4]=U*(4174/315+N*(-144838/6237)),this.cbg[4]=U*(-734/315+N*(109598/31185)),U*=N,this.cgb[5]=U*(601676/22275),this.cbg[5]=U*(444337/155925),U=Math.pow(N,2),this.Qn=this.k0/(1+N)*(1+U*(1/4+U*(1/64+U/256))),this.utg[0]=N*(N*(2/3+N*(-37/96+N*(1/360+N*(81/512+N*(-96199/604800)))))-.5),this.gtu[0]=N*(.5+N*(-2/3+N*(5/16+N*(41/180+N*(-127/288+N*(7891/37800)))))),this.utg[1]=U*(-1/48+N*(-1/15+N*(437/1440+N*(-46/105+N*(1118711/3870720))))),this.gtu[1]=U*(13/48+N*(N*(557/1440+N*(281/630+N*(-1983433/1935360)))-.6)),U*=N,this.utg[2]=U*(-17/480+N*(37/840+N*(209/4480+N*(-5569/90720)))),this.gtu[2]=U*(61/240+N*(-103/140+N*(15061/26880+N*(167603/181440)))),U*=N,this.utg[3]=U*(-4397/161280+N*(11/504+N*(830251/7257600))),this.gtu[3]=U*(49561/161280+N*(-179/168+N*(6601661/7257600))),U*=N,this.utg[4]=U*(-4583/161280+N*(108847/3991680)),this.gtu[4]=U*(34729/80640+N*(-3418889/1995840)),U*=N,this.utg[5]=U*(-20648693/638668800),this.gtu[5]=.6650675310896665*U;var K=dr(this.cbg,this.lat0);this.Zb=-this.Qn*(K+(function(Z,J){for(var se,ee=2*Math.cos(J),ve=Z.length-1,Ce=Z[ve],Pe=0;--ve>=0;)se=ee*Ce-Pe+Z[ve],Pe=Ce,Ce=se;return Math.sin(J)*se})(this.gtu,2*K))},forward:function(w){var N=W(w.x-this.long0),U=w.y;U=dr(this.cbg,U);var K=Math.sin(U),Z=Math.cos(U),J=Math.sin(N),se=Math.cos(N);U=Math.atan2(K,se*Z),N=Math.atan2(J*Z,Rn(K,Z*se)),N=(function(Pe){var We=Math.abs(Pe);return We=(function(Je){var Ze=1+Je,it=Ze-1;return it===0?Je:Je*Math.log(Ze)/it})(We*(1+We/(Rn(1,We)+1))),Pe<0?-We:We})(Math.tan(N));var ee,ve,Ce=sr(this.gtu,2*U,2*N);return U+=Ce[0],N+=Ce[1],Math.abs(N)<=2.623395162778?(ee=this.a*(this.Qn*N)+this.x0,ve=this.a*(this.Qn*U+this.Zb)+this.y0):(ee=1/0,ve=1/0),w.x=ee,w.y=ve,w},inverse:function(w){var N,U,K=(w.x-this.x0)*(1/this.a),Z=(w.y-this.y0)*(1/this.a);if(Z=(Z-this.Zb)/this.Qn,K/=this.Qn,Math.abs(K)<=2.623395162778){var J=sr(this.utg,2*Z,2*K);Z+=J[0],K+=J[1],K=Math.atan(nr(K));var se=Math.sin(Z),ee=Math.cos(Z),ve=Math.sin(K),Ce=Math.cos(K);Z=Math.atan2(se*Ce,Rn(ve,Ce*ee)),N=W((K=Math.atan2(ve,Ce*ee))+this.long0),U=dr(this.cgb,Z)}else N=1/0,U=1/0;return w.x=N,w.y=U,w},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},mr={init:function(){var w=(function(N,U){if(N===void 0){if((N=Math.floor(30*(W(U)+Math.PI)/Math.PI)+1)<0)return 0;if(N>60)return 60}return N})(this.zone,this.long0);if(w===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(w)-183)*y,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,On.init.apply(this),this.forward=On.forward,this.inverse=On.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Jn(w,N){return Math.pow((1-w)/(1+w),N)}const Gn={init:function(){var w=Math.sin(this.lat0),N=Math.cos(this.lat0);N*=N,this.rc=Math.sqrt(1-this.es)/(1-this.es*w*w),this.C=Math.sqrt(1+this.es*N*N/(1-this.es)),this.phic0=Math.asin(w/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+b)/(Math.pow(Math.tan(.5*this.lat0+b),this.C)*Jn(this.e*w,this.ratexp))},forward:function(w){var N=w.x,U=w.y;return w.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*U+b),this.C)*Jn(this.e*Math.sin(U),this.ratexp))-t,w.x=this.C*N,w},inverse:function(w){for(var N=w.x/this.C,U=w.y,K=Math.pow(Math.tan(.5*U+b)/this.K,1/this.C),Z=20;Z>0&&(U=2*Math.atan(K*Jn(this.e*Math.sin(w.y),-.5*this.e))-t,!(Math.abs(U-w.y)<1e-14));--Z)w.y=U;return Z?(w.x=N,w.y=U,w):null}},Pn={init:function(){Gn.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(w){var N,U,K,Z;return w.x=W(w.x-this.long0),Gn.forward.apply(this,[w]),N=Math.sin(w.y),U=Math.cos(w.y),K=Math.cos(w.x),Z=this.k0*this.R2/(1+this.sinc0*N+this.cosc0*U*K),w.x=Z*U*Math.sin(w.x),w.y=Z*(this.cosc0*N-this.sinc0*U*K),w.x=this.a*w.x+this.x0,w.y=this.a*w.y+this.y0,w},inverse:function(w){var N,U,K,Z,J;if(w.x=(w.x-this.x0)/this.a,w.y=(w.y-this.y0)/this.a,w.x/=this.k0,w.y/=this.k0,J=Math.sqrt(w.x*w.x+w.y*w.y)){var se=2*Math.atan2(J,this.R2);N=Math.sin(se),U=Math.cos(se),Z=Math.asin(U*this.sinc0+w.y*N*this.cosc0/J),K=Math.atan2(w.x*N,J*this.cosc0*U-w.y*this.sinc0*N)}else Z=this.phic0,K=0;return w.x=K,w.y=Z,Gn.inverse.apply(this,[w]),w.x=W(w.x+this.long0),w},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Wn={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=p&&(this.k0=.5*(1+D(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=p&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=p&&(this.k0=.5*this.cons*A(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ae(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=A(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-t,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(w){var N,U,K,Z,J,se,ee=w.x,ve=w.y,Ce=Math.sin(ve),Pe=Math.cos(ve),We=W(ee-this.long0);return Math.abs(Math.abs(ee-this.long0)-Math.PI)<=p&&Math.abs(ve+this.lat0)<=p?(w.x=NaN,w.y=NaN,w):this.sphere?(N=2*this.k0/(1+this.sinlat0*Ce+this.coslat0*Pe*Math.cos(We)),w.x=this.a*N*Pe*Math.sin(We)+this.x0,w.y=this.a*N*(this.coslat0*Ce-this.sinlat0*Pe*Math.cos(We))+this.y0,w):(U=2*Math.atan(this.ssfn_(ve,Ce,this.e))-t,Z=Math.cos(U),K=Math.sin(U),Math.abs(this.coslat0)<=p?(J=ae(this.e,ve*this.con,this.con*Ce),se=2*this.a*this.k0*J/this.cons,w.x=this.x0+se*Math.sin(ee-this.long0),w.y=this.y0-this.con*se*Math.cos(ee-this.long0),w):(Math.abs(this.sinlat0)<p?(N=2*this.a*this.k0/(1+Z*Math.cos(We)),w.y=N*K):(N=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*K+this.cosX0*Z*Math.cos(We))),w.y=N*(this.cosX0*K-this.sinX0*Z*Math.cos(We))+this.y0),w.x=N*Z*Math.sin(We)+this.x0,w))},inverse:function(w){var N,U,K,Z,J;w.x-=this.x0,w.y-=this.y0;var se=Math.sqrt(w.x*w.x+w.y*w.y);if(this.sphere){var ee=2*Math.atan(se/(2*this.a*this.k0));return N=this.long0,U=this.lat0,se<=p?(w.x=N,w.y=U,w):(U=Math.asin(Math.cos(ee)*this.sinlat0+w.y*Math.sin(ee)*this.coslat0/se),N=Math.abs(this.coslat0)<p?this.lat0>0?W(this.long0+Math.atan2(w.x,-1*w.y)):W(this.long0+Math.atan2(w.x,w.y)):W(this.long0+Math.atan2(w.x*Math.sin(ee),se*this.coslat0*Math.cos(ee)-w.y*this.sinlat0*Math.sin(ee))),w.x=N,w.y=U,w)}if(Math.abs(this.coslat0)<=p){if(se<=p)return U=this.lat0,N=this.long0,w.x=N,w.y=U,w;w.x*=this.con,w.y*=this.con,K=se*this.cons/(2*this.a*this.k0),U=this.con*le(this.e,K),N=this.con*W(this.con*this.long0+Math.atan2(w.x,-1*w.y))}else Z=2*Math.atan(se*this.cosX0/(2*this.a*this.k0*this.ms1)),N=this.long0,se<=p?J=this.X0:(J=Math.asin(Math.cos(Z)*this.sinX0+w.y*Math.sin(Z)*this.cosX0/se),N=W(this.long0+Math.atan2(w.x*Math.sin(Z),se*this.cosX0*Math.cos(Z)-w.y*this.sinX0*Math.sin(Z)))),U=-1*le(this.e,Math.tan(.5*(t+J)));return w.x=N,w.y=U,w},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(w,N,U){return N*=U,Math.tan(.5*(t+w))*Math.pow((1-N)/(1+N),.5*U)}},Vn={init:function(){var w=this.lat0;this.lambda0=this.long0;var N=Math.sin(w),U=this.a,K=1/this.rf,Z=2*K-Math.pow(K,2),J=this.e=Math.sqrt(Z);this.R=this.k0*U*Math.sqrt(1-Z)/(1-Z*Math.pow(N,2)),this.alpha=Math.sqrt(1+Z/(1-Z)*Math.pow(Math.cos(w),4)),this.b0=Math.asin(N/this.alpha);var se=Math.log(Math.tan(Math.PI/4+this.b0/2)),ee=Math.log(Math.tan(Math.PI/4+w/2)),ve=Math.log((1+J*N)/(1-J*N));this.K=se-this.alpha*ee+this.alpha*J/2*ve},forward:function(w){var N=Math.log(Math.tan(Math.PI/4-w.y/2)),U=this.e/2*Math.log((1+this.e*Math.sin(w.y))/(1-this.e*Math.sin(w.y))),K=-this.alpha*(N+U)+this.K,Z=2*(Math.atan(Math.exp(K))-Math.PI/4),J=this.alpha*(w.x-this.lambda0),se=Math.atan(Math.sin(J)/(Math.sin(this.b0)*Math.tan(Z)+Math.cos(this.b0)*Math.cos(J))),ee=Math.asin(Math.cos(this.b0)*Math.sin(Z)-Math.sin(this.b0)*Math.cos(Z)*Math.cos(J));return w.y=this.R/2*Math.log((1+Math.sin(ee))/(1-Math.sin(ee)))+this.y0,w.x=this.R*se+this.x0,w},inverse:function(w){for(var N=w.x-this.x0,U=w.y-this.y0,K=N/this.R,Z=2*(Math.atan(Math.exp(U/this.R))-Math.PI/4),J=Math.asin(Math.cos(this.b0)*Math.sin(Z)+Math.sin(this.b0)*Math.cos(Z)*Math.cos(K)),se=Math.atan(Math.sin(K)/(Math.cos(this.b0)*Math.cos(K)-Math.sin(this.b0)*Math.tan(Z))),ee=this.lambda0+se/this.alpha,ve=0,Ce=J,Pe=-1e3,We=0;Math.abs(Ce-Pe)>1e-7;){if(++We>20)return;ve=1/this.alpha*(Math.log(Math.tan(Math.PI/4+J/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(Ce))/2)),Pe=Ce,Ce=2*Math.atan(Math.exp(ve))-Math.PI/2}return w.x=ee,w.y=Ce,w},names:["somerc"]};var Nn=1e-7;const qn={init:function(){var w,N,U,K,Z,J,se,ee,ve,Ce,Pe,We,Je,Ze=0,it=0,Ke=0,wt=0,ct=0,St=0,Dt=0;this.no_off=(Je=typeof(We=this).PROJECTION=="object"?Object.keys(We.PROJECTION)[0]:We.PROJECTION,"no_uoff"in We||"no_off"in We||["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(Je)!==-1),this.no_rot="no_rot"in this;var Lt=!1;"alpha"in this&&(Lt=!0);var Yt=!1;if("rectified_grid_angle"in this&&(Yt=!0),Lt&&(Dt=this.alpha),Yt&&(Ze=this.rectified_grid_angle*y),Lt||Yt)it=this.longc;else if(Ke=this.long1,ct=this.lat1,wt=this.long2,St=this.lat2,Math.abs(ct-St)<=Nn||(w=Math.abs(ct))<=Nn||Math.abs(w-t)<=Nn||Math.abs(Math.abs(this.lat0)-t)<=Nn||Math.abs(Math.abs(St)-t)<=Nn)throw new Error;var sn=1-this.es;N=Math.sqrt(sn),Math.abs(this.lat0)>p?(ee=Math.sin(this.lat0),U=Math.cos(this.lat0),w=1-this.es*ee*ee,this.B=U*U,this.B=Math.sqrt(1+this.es*this.B*this.B/sn),this.A=this.B*this.k0*N/w,(Z=(K=this.B*N/(U*Math.sqrt(w)))*K-1)<=0?Z=0:(Z=Math.sqrt(Z),this.lat0<0&&(Z=-Z)),this.E=Z+=K,this.E*=Math.pow(ae(this.e,this.lat0,ee),this.B)):(this.B=1/N,this.A=this.k0,this.E=K=Z=1),Lt||Yt?(Lt?(Pe=Math.asin(Math.sin(Dt)/K),Yt||(Ze=Dt)):(Pe=Ze,Dt=Math.asin(K*Math.sin(Pe))),this.lam0=it-Math.asin(.5*(Z-1/Z)*Math.tan(Pe))/this.B):(J=Math.pow(ae(this.e,ct,Math.sin(ct)),this.B),se=Math.pow(ae(this.e,St,Math.sin(St)),this.B),Z=this.E/J,ve=(se-J)/(se+J),Ce=((Ce=this.E*this.E)-se*J)/(Ce+se*J),(w=Ke-wt)<-Math.pi?wt-=E:w>Math.pi&&(wt+=E),this.lam0=W(.5*(Ke+wt)-Math.atan(Ce*Math.tan(.5*this.B*(Ke-wt))/ve)/this.B),Pe=Math.atan(2*Math.sin(this.B*W(Ke-this.lam0))/(Z-1/Z)),Ze=Dt=Math.asin(K*Math.sin(Pe))),this.singam=Math.sin(Pe),this.cosgam=Math.cos(Pe),this.sinrot=Math.sin(Ze),this.cosrot=Math.cos(Ze),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(K*K-1)/Math.cos(Dt))),this.lat0<0&&(this.u_0=-this.u_0)),Z=.5*Pe,this.v_pole_n=this.ArB*Math.log(Math.tan(b-Z)),this.v_pole_s=this.ArB*Math.log(Math.tan(b+Z))},forward:function(w){var N,U,K,Z,J,se,ee,ve,Ce={};if(w.x=w.x-this.lam0,Math.abs(Math.abs(w.y)-t)>p){if(N=.5*((J=this.E/Math.pow(ae(this.e,w.y,Math.sin(w.y)),this.B))-(se=1/J)),U=.5*(J+se),Z=Math.sin(this.B*w.x),K=(N*this.singam-Z*this.cosgam)/U,Math.abs(Math.abs(K)-1)<p)throw new Error;ve=.5*this.ArB*Math.log((1-K)/(1+K)),se=Math.cos(this.B*w.x),ee=Math.abs(se)<Nn?this.A*w.x:this.ArB*Math.atan2(N*this.cosgam+Z*this.singam,se)}else ve=w.y>0?this.v_pole_n:this.v_pole_s,ee=this.ArB*w.y;return this.no_rot?(Ce.x=ee,Ce.y=ve):(ee-=this.u_0,Ce.x=ve*this.cosrot+ee*this.sinrot,Ce.y=ee*this.cosrot-ve*this.sinrot),Ce.x=this.a*Ce.x+this.x0,Ce.y=this.a*Ce.y+this.y0,Ce},inverse:function(w){var N,U,K,Z,J,se,ee,ve={};if(w.x=(w.x-this.x0)*(1/this.a),w.y=(w.y-this.y0)*(1/this.a),this.no_rot?(U=w.y,N=w.x):(U=w.x*this.cosrot-w.y*this.sinrot,N=w.y*this.cosrot+w.x*this.sinrot+this.u_0),Z=.5*((K=Math.exp(-this.BrA*U))-1/K),J=.5*(K+1/K),ee=((se=Math.sin(this.BrA*N))*this.cosgam+Z*this.singam)/J,Math.abs(Math.abs(ee)-1)<p)ve.x=0,ve.y=ee<0?-t:t;else{if(ve.y=this.E/Math.sqrt((1+ee)/(1-ee)),ve.y=le(this.e,Math.pow(ve.y,1/this.B)),ve.y===1/0)throw new Error;ve.x=-this.rB*Math.atan2(Z*this.cosgam-se*this.singam,Math.cos(this.BrA*N))}return ve.x+=this.lam0,ve},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Xn={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<p)){var w=this.b/this.a;this.e=Math.sqrt(1-w*w);var N=Math.sin(this.lat1),U=Math.cos(this.lat1),K=A(this.e,N,U),Z=ae(this.e,this.lat1,N),J=Math.sin(this.lat2),se=Math.cos(this.lat2),ee=A(this.e,J,se),ve=ae(this.e,this.lat2,J),Ce=ae(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>p?this.ns=Math.log(K/ee)/Math.log(Z/ve):this.ns=N,isNaN(this.ns)&&(this.ns=N),this.f0=K/(this.ns*Math.pow(Z,this.ns)),this.rh=this.a*this.f0*Math.pow(Ce,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(w){var N=w.x,U=w.y;Math.abs(2*Math.abs(U)-Math.PI)<=p&&(U=D(U)*(t-2*p));var K,Z,J=Math.abs(Math.abs(U)-t);if(J>p)K=ae(this.e,U,Math.sin(U)),Z=this.a*this.f0*Math.pow(K,this.ns);else{if((J=U*this.ns)<=0)return null;Z=0}var se=this.ns*W(N-this.long0);return w.x=this.k0*(Z*Math.sin(se))+this.x0,w.y=this.k0*(this.rh-Z*Math.cos(se))+this.y0,w},inverse:function(w){var N,U,K,Z,J,se=(w.x-this.x0)/this.k0,ee=this.rh-(w.y-this.y0)/this.k0;this.ns>0?(N=Math.sqrt(se*se+ee*ee),U=1):(N=-Math.sqrt(se*se+ee*ee),U=-1);var ve=0;if(N!==0&&(ve=Math.atan2(U*se,U*ee)),N!==0||this.ns>0){if(U=1/this.ns,K=Math.pow(N/(this.a*this.f0),U),(Z=le(this.e,K))===-9999)return null}else Z=-t;return J=W(ve/this.ns+this.long0),w.x=J,w.y=Z,w},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},wr={init:function(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(w){var N,U,K,Z,J,se,ee,ve=w.x,Ce=w.y,Pe=W(ve-this.long0);return N=Math.pow((1+this.e*Math.sin(Ce))/(1-this.e*Math.sin(Ce)),this.alfa*this.e/2),U=2*(Math.atan(this.k*Math.pow(Math.tan(Ce/2+this.s45),this.alfa)/N)-this.s45),K=-Pe*this.alfa,Z=Math.asin(Math.cos(this.ad)*Math.sin(U)+Math.sin(this.ad)*Math.cos(U)*Math.cos(K)),J=Math.asin(Math.cos(U)*Math.sin(K)/Math.cos(Z)),se=this.n*J,ee=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(Z/2+this.s45),this.n),w.y=ee*Math.cos(se)/1,w.x=ee*Math.sin(se)/1,this.czech||(w.y*=-1,w.x*=-1),w},inverse:function(w){var N,U,K,Z,J,se,ee,ve=w.x;w.x=w.y,w.y=ve,this.czech||(w.y*=-1,w.x*=-1),J=Math.sqrt(w.x*w.x+w.y*w.y),Z=Math.atan2(w.y,w.x)/Math.sin(this.s0),K=2*(Math.atan(Math.pow(this.ro0/J,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),N=Math.asin(Math.cos(this.ad)*Math.sin(K)-Math.sin(this.ad)*Math.cos(K)*Math.cos(Z)),U=Math.asin(Math.cos(K)*Math.sin(Z)/Math.cos(N)),w.x=this.long0-U/this.alfa,se=N,ee=0;var Ce=0;do w.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(N/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(se))/(1-this.e*Math.sin(se)),this.e/2))-this.s45),Math.abs(se-w.y)<1e-10&&(ee=1),se=w.y,Ce+=1;while(ee===0&&Ce<15);return Ce>=15?null:w},names:["Krovak","krovak"]};function k(w,N,U,K,Z){return w*Z-N*Math.sin(2*Z)+U*Math.sin(4*Z)-K*Math.sin(6*Z)}function X(w){return 1-.25*w*(1+w/16*(3+1.25*w))}function oe(w){return .375*w*(1+.25*w*(1+.46875*w))}function Ee(w){return .05859375*w*w*(1+.75*w)}function Re(w){return w*w*w*.011393229166666666}function He(w,N,U){var K=N*U;return w/Math.sqrt(1-K*K)}function Ct(w){return Math.abs(w)<t?w:w-D(w)*Math.PI}function jt(w,N,U,K,Z){var J,se;J=w/N;for(var ee=0;ee<15;ee++)if(J+=se=(w-(N*J-U*Math.sin(2*J)+K*Math.sin(4*J)-Z*Math.sin(6*J)))/(N-2*U*Math.cos(2*J)+4*K*Math.cos(4*J)-6*Z*Math.cos(6*J)),Math.abs(se)<=1e-10)return J;return NaN}const Wt={init:function(){this.sphere||(this.e0=X(this.es),this.e1=oe(this.es),this.e2=Ee(this.es),this.e3=Re(this.es),this.ml0=this.a*k(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(w){var N,U,K=w.x,Z=w.y;if(K=W(K-this.long0),this.sphere)N=this.a*Math.asin(Math.cos(Z)*Math.sin(K)),U=this.a*(Math.atan2(Math.tan(Z),Math.cos(K))-this.lat0);else{var J=Math.sin(Z),se=Math.cos(Z),ee=He(this.a,this.e,J),ve=Math.tan(Z)*Math.tan(Z),Ce=K*Math.cos(Z),Pe=Ce*Ce,We=this.es*se*se/(1-this.es);N=ee*Ce*(1-Pe*ve*(1/6-(8-ve+8*We)*Pe/120)),U=this.a*k(this.e0,this.e1,this.e2,this.e3,Z)-this.ml0+ee*J/se*Pe*(.5+(5-ve+6*We)*Pe/24)}return w.x=N+this.x0,w.y=U+this.y0,w},inverse:function(w){w.x-=this.x0,w.y-=this.y0;var N,U,K=w.x/this.a,Z=w.y/this.a;if(this.sphere){var J=Z+this.lat0;N=Math.asin(Math.sin(J)*Math.cos(K)),U=Math.atan2(Math.tan(K),Math.cos(J))}else{var se=jt(this.ml0/this.a+Z,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(se)-t)<=p)return w.x=this.long0,w.y=t,Z<0&&(w.y*=-1),w;var ee=He(this.a,this.e,Math.sin(se)),ve=ee*ee*ee/this.a/this.a*(1-this.es),Ce=Math.pow(Math.tan(se),2),Pe=K*this.a/ee,We=Pe*Pe;N=se-ee*Math.tan(se)/ve*Pe*Pe*(.5-(1+3*Ce)*Pe*Pe/24),U=Pe*(1-We*(Ce/3+(1+3*Ce)*Ce*We/15))/Math.cos(se)}return w.x=W(U+this.long0),w.y=Ct(N),w},names:["Cassini","Cassini_Soldner","cass"]};function tn(w,N){var U;return w>1e-7?(1-w*w)*(N/(1-(U=w*N)*U)-.5/w*Math.log((1-U)/(1+U))):2*N}const Tn={init:function(){var w,N=Math.abs(this.lat0);if(Math.abs(N-t)<p?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(N)<p?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=tn(this.e,1),this.mmf=.5/(1-this.es),this.apa=(function(U){var K,Z=[];return Z[0]=.3333333333333333*U,K=U*U,Z[0]+=.17222222222222222*K,Z[1]=.06388888888888888*K,K*=U,Z[0]+=.10257936507936508*K,Z[1]+=.0664021164021164*K,Z[2]=.016415012942191543*K,Z})(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),w=Math.sin(this.lat0),this.sinb1=tn(this.e,w)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*w*w)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(w){var N,U,K,Z,J,se,ee,ve,Ce,Pe,We=w.x,Je=w.y;if(We=W(We-this.long0),this.sphere){if(J=Math.sin(Je),Pe=Math.cos(Je),K=Math.cos(We),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((U=this.mode===this.EQUIT?1+Pe*K:1+this.sinph0*J+this.cosph0*Pe*K)<=p)return null;N=(U=Math.sqrt(2/U))*Pe*Math.sin(We),U*=this.mode===this.EQUIT?J:this.cosph0*J-this.sinph0*Pe*K}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(K=-K),Math.abs(Je+this.lat0)<p)return null;U=b-.5*Je,N=(U=2*(this.mode===this.S_POLE?Math.cos(U):Math.sin(U)))*Math.sin(We),U*=K}}else{switch(ee=0,ve=0,Ce=0,K=Math.cos(We),Z=Math.sin(We),J=Math.sin(Je),se=tn(this.e,J),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(ee=se/this.qp,ve=Math.sqrt(1-ee*ee)),this.mode){case this.OBLIQ:Ce=1+this.sinb1*ee+this.cosb1*ve*K;break;case this.EQUIT:Ce=1+ve*K;break;case this.N_POLE:Ce=t+Je,se=this.qp-se;break;case this.S_POLE:Ce=Je-t,se=this.qp+se}if(Math.abs(Ce)<p)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:Ce=Math.sqrt(2/Ce),U=this.mode===this.OBLIQ?this.ymf*Ce*(this.cosb1*ee-this.sinb1*ve*K):(Ce=Math.sqrt(2/(1+ve*K)))*ee*this.ymf,N=this.xmf*Ce*ve*Z;break;case this.N_POLE:case this.S_POLE:se>=0?(N=(Ce=Math.sqrt(se))*Z,U=K*(this.mode===this.S_POLE?Ce:-Ce)):N=U=0}}return w.x=this.a*N+this.x0,w.y=this.a*U+this.y0,w},inverse:function(w){w.x-=this.x0,w.y-=this.y0;var N,U,K,Z,J,se,ee,ve,Ce,Pe,We=w.x/this.a,Je=w.y/this.a;if(this.sphere){var Ze,it=0,Ke=0;if((U=.5*(Ze=Math.sqrt(We*We+Je*Je)))>1)return null;switch(U=2*Math.asin(U),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(Ke=Math.sin(U),it=Math.cos(U)),this.mode){case this.EQUIT:U=Math.abs(Ze)<=p?0:Math.asin(Je*Ke/Ze),We*=Ke,Je=it*Ze;break;case this.OBLIQ:U=Math.abs(Ze)<=p?this.lat0:Math.asin(it*this.sinph0+Je*Ke*this.cosph0/Ze),We*=Ke*this.cosph0,Je=(it-Math.sin(U)*this.sinph0)*Ze;break;case this.N_POLE:Je=-Je,U=t-U;break;case this.S_POLE:U-=t}N=Je!==0||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(We,Je):0}else{if(ee=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(We/=this.dd,Je*=this.dd,(se=Math.sqrt(We*We+Je*Je))<p)return w.x=this.long0,w.y=this.lat0,w;Z=2*Math.asin(.5*se/this.rq),K=Math.cos(Z),We*=Z=Math.sin(Z),this.mode===this.OBLIQ?(ee=K*this.sinb1+Je*Z*this.cosb1/se,J=this.qp*ee,Je=se*this.cosb1*K-Je*this.sinb1*Z):(ee=Je*Z/se,J=this.qp*ee,Je=se*K)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(Je=-Je),!(J=We*We+Je*Je))return w.x=this.long0,w.y=this.lat0,w;ee=1-J/this.qp,this.mode===this.S_POLE&&(ee=-ee)}N=Math.atan2(We,Je),Pe=(ve=Math.asin(ee))+ve,U=ve+(Ce=this.apa)[0]*Math.sin(Pe)+Ce[1]*Math.sin(Pe+Pe)+Ce[2]*Math.sin(Pe+Pe+Pe)}return w.x=W(this.long0+N),w.y=U,w},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function mn(w){return Math.abs(w)>1&&(w=w>1?1:-1),Math.asin(w)}const Ln={init:function(){Math.abs(this.lat1+this.lat2)<p||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=A(this.e3,this.sin_po,this.cos_po),this.qs1=tn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=A(this.e3,this.sin_po,this.cos_po),this.qs2=tn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=tn(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>p?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(w){var N=w.x,U=w.y;this.sin_phi=Math.sin(U),this.cos_phi=Math.cos(U);var K=tn(this.e3,this.sin_phi,this.cos_phi),Z=this.a*Math.sqrt(this.c-this.ns0*K)/this.ns0,J=this.ns0*W(N-this.long0),se=Z*Math.sin(J)+this.x0,ee=this.rh-Z*Math.cos(J)+this.y0;return w.x=se,w.y=ee,w},inverse:function(w){var N,U,K,Z,J,se;return w.x-=this.x0,w.y=this.rh-w.y+this.y0,this.ns0>=0?(N=Math.sqrt(w.x*w.x+w.y*w.y),K=1):(N=-Math.sqrt(w.x*w.x+w.y*w.y),K=-1),Z=0,N!==0&&(Z=Math.atan2(K*w.x,K*w.y)),K=N*this.ns0/this.a,this.sphere?se=Math.asin((this.c-K*K)/(2*this.ns0)):(U=(this.c-K*K)/this.ns0,se=this.phi1z(this.e3,U)),J=W(Z/this.ns0+this.long0),w.x=J,w.y=se,w},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(w,N){var U,K,Z,J,se=mn(.5*N);if(w<p)return se;for(var ee=w*w,ve=1;ve<=25;ve++)if(se+=J=.5*(Z=1-(K=w*(U=Math.sin(se)))*K)*Z/Math.cos(se)*(N/(1-ee)-U/Z+.5/w*Math.log((1-K)/(1+K))),Math.abs(J)<=1e-7)return se;return null}},Xt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(w){var N,U,K,Z,J,se,ee,ve=w.x,Ce=w.y;return K=W(ve-this.long0),N=Math.sin(Ce),U=Math.cos(Ce),Z=Math.cos(K),(J=this.sin_p14*N+this.cos_p14*U*Z)>0||Math.abs(J)<=p?(se=this.x0+1*this.a*U*Math.sin(K)/J,ee=this.y0+1*this.a*(this.cos_p14*N-this.sin_p14*U*Z)/J):(se=this.x0+this.infinity_dist*U*Math.sin(K),ee=this.y0+this.infinity_dist*(this.cos_p14*N-this.sin_p14*U*Z)),w.x=se,w.y=ee,w},inverse:function(w){var N,U,K,Z,J,se;return w.x=(w.x-this.x0)/this.a,w.y=(w.y-this.y0)/this.a,w.x/=this.k0,w.y/=this.k0,(N=Math.sqrt(w.x*w.x+w.y*w.y))?(Z=Math.atan2(N,this.rc),U=Math.sin(Z),se=mn((K=Math.cos(Z))*this.sin_p14+w.y*U*this.cos_p14/N),J=Math.atan2(w.x*U,N*this.cos_p14*K-w.y*this.sin_p14*U),J=W(this.long0+J)):(se=this.phic0,J=0),w.x=J,w.y=se,w},names:["gnom"]},Bn={init:function(){this.sphere||(this.k0=A(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(w){var N,U,K=w.x,Z=w.y,J=W(K-this.long0);if(this.sphere)N=this.x0+this.a*J*Math.cos(this.lat_ts),U=this.y0+this.a*Math.sin(Z)/Math.cos(this.lat_ts);else{var se=tn(this.e,Math.sin(Z));N=this.x0+this.a*this.k0*J,U=this.y0+this.a*se*.5/this.k0}return w.x=N,w.y=U,w},inverse:function(w){var N,U;return w.x-=this.x0,w.y-=this.y0,this.sphere?(N=W(this.long0+w.x/this.a/Math.cos(this.lat_ts)),U=Math.asin(w.y/this.a*Math.cos(this.lat_ts))):(U=(function(K,Z){var J=1-(1-K*K)/(2*K)*Math.log((1-K)/(1+K));if(Math.abs(Math.abs(Z)-J)<1e-6)return Z<0?-1*t:t;for(var se,ee,ve,Ce,Pe=Math.asin(.5*Z),We=0;We<30;We++)if(ee=Math.sin(Pe),ve=Math.cos(Pe),Ce=K*ee,Pe+=se=Math.pow(1-Ce*Ce,2)/(2*ve)*(Z/(1-K*K)-ee/(1-Ce*Ce)+.5/K*Math.log((1-Ce)/(1+Ce))),Math.abs(se)<=1e-10)return Pe;return NaN})(this.e,2*w.y*this.k0/this.a),N=W(this.long0+w.x/(this.a*this.k0))),w.x=N,w.y=U,w},names:["cea"]},Fn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(w){var N=w.x,U=w.y,K=W(N-this.long0),Z=Ct(U-this.lat0);return w.x=this.x0+this.a*K*this.rc,w.y=this.y0+this.a*Z,w},inverse:function(w){var N=w.x,U=w.y;return w.x=W(this.long0+(N-this.x0)/(this.a*this.rc)),w.y=Ct(this.lat0+(U-this.y0)/this.a),w},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Yn={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=X(this.es),this.e1=oe(this.es),this.e2=Ee(this.es),this.e3=Re(this.es),this.ml0=this.a*k(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(w){var N,U,K,Z=w.x,J=w.y,se=W(Z-this.long0);if(K=se*Math.sin(J),this.sphere)Math.abs(J)<=p?(N=this.a*se,U=-1*this.a*this.lat0):(N=this.a*Math.sin(K)/Math.tan(J),U=this.a*(Ct(J-this.lat0)+(1-Math.cos(K))/Math.tan(J)));else if(Math.abs(J)<=p)N=this.a*se,U=-1*this.ml0;else{var ee=He(this.a,this.e,Math.sin(J))/Math.tan(J);N=ee*Math.sin(K),U=this.a*k(this.e0,this.e1,this.e2,this.e3,J)-this.ml0+ee*(1-Math.cos(K))}return w.x=N+this.x0,w.y=U+this.y0,w},inverse:function(w){var N,U,K,Z,J,se,ee,ve,Ce;if(K=w.x-this.x0,Z=w.y-this.y0,this.sphere)if(Math.abs(Z+this.a*this.lat0)<=p)N=W(K/this.a+this.long0),U=0;else{var Pe;for(se=this.lat0+Z/this.a,ee=K*K/this.a/this.a+se*se,ve=se,J=20;J;--J)if(ve+=Ce=-1*(se*(ve*(Pe=Math.tan(ve))+1)-ve-.5*(ve*ve+ee)*Pe)/((ve-se)/Pe-1),Math.abs(Ce)<=p){U=ve;break}N=W(this.long0+Math.asin(K*Math.tan(ve)/this.a)/Math.sin(U))}else if(Math.abs(Z+this.ml0)<=p)U=0,N=W(this.long0+K/this.a);else{var We,Je,Ze,it,Ke;for(se=(this.ml0+Z)/this.a,ee=K*K/this.a/this.a+se*se,ve=se,J=20;J;--J)if(Ke=this.e*Math.sin(ve),We=Math.sqrt(1-Ke*Ke)*Math.tan(ve),Je=this.a*k(this.e0,this.e1,this.e2,this.e3,ve),Ze=this.e0-2*this.e1*Math.cos(2*ve)+4*this.e2*Math.cos(4*ve)-6*this.e3*Math.cos(6*ve),ve-=Ce=(se*(We*(it=Je/this.a)+1)-it-.5*We*(it*it+ee))/(this.es*Math.sin(2*ve)*(it*it+ee-2*se*it)/(4*We)+(se-it)*(We*Ze-2/Math.sin(2*ve))-Ze),Math.abs(Ce)<=p){U=ve;break}We=Math.sqrt(1-this.es*Math.pow(Math.sin(U),2))*Math.tan(U),N=W(this.long0+Math.asin(K*We/this.a)/Math.sin(U))}return w.x=N,w.y=U,w},names:["Polyconic","poly"]},yr={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(w){var N,U=w.x,K=w.y-this.lat0,Z=U-this.long0,J=K/n*1e-5,se=Z,ee=1,ve=0;for(N=1;N<=10;N++)ee*=J,ve+=this.A[N]*ee;var Ce,Pe=ve,We=se,Je=1,Ze=0,it=0,Ke=0;for(N=1;N<=6;N++)Ce=Ze*Pe+Je*We,Je=Je*Pe-Ze*We,Ze=Ce,it=it+this.B_re[N]*Je-this.B_im[N]*Ze,Ke=Ke+this.B_im[N]*Je+this.B_re[N]*Ze;return w.x=Ke*this.a+this.x0,w.y=it*this.a+this.y0,w},inverse:function(w){var N,U,K=w.x,Z=w.y,J=K-this.x0,se=(Z-this.y0)/this.a,ee=J/this.a,ve=1,Ce=0,Pe=0,We=0;for(N=1;N<=6;N++)U=Ce*se+ve*ee,ve=ve*se-Ce*ee,Ce=U,Pe=Pe+this.C_re[N]*ve-this.C_im[N]*Ce,We=We+this.C_im[N]*ve+this.C_re[N]*Ce;for(var Je=0;Je<this.iterations;Je++){var Ze,it=Pe,Ke=We,wt=se,ct=ee;for(N=2;N<=6;N++)Ze=Ke*Pe+it*We,it=it*Pe-Ke*We,Ke=Ze,wt+=(N-1)*(this.B_re[N]*it-this.B_im[N]*Ke),ct+=(N-1)*(this.B_im[N]*it+this.B_re[N]*Ke);it=1,Ke=0;var St=this.B_re[1],Dt=this.B_im[1];for(N=2;N<=6;N++)Ze=Ke*Pe+it*We,it=it*Pe-Ke*We,Ke=Ze,St+=N*(this.B_re[N]*it-this.B_im[N]*Ke),Dt+=N*(this.B_im[N]*it+this.B_re[N]*Ke);var Lt=St*St+Dt*Dt;Pe=(wt*St+ct*Dt)/Lt,We=(ct*St-wt*Dt)/Lt}var Yt=Pe,sn=We,In=1,jn=0;for(N=1;N<=9;N++)In*=Yt,jn+=this.D[N]*In;var $n=this.lat0+jn*n*1e5,or=this.long0+sn;return w.x=or,w.y=$n,w},names:["New_Zealand_Map_Grid","nzmg"]},Ar={init:function(){},forward:function(w){var N=w.x,U=w.y,K=W(N-this.long0),Z=this.x0+this.a*K,J=this.y0+this.a*Math.log(Math.tan(Math.PI/4+U/2.5))*1.25;return w.x=Z,w.y=J,w},inverse:function(w){w.x-=this.x0,w.y-=this.y0;var N=W(this.long0+w.x/this.a),U=2.5*(Math.atan(Math.exp(.8*w.y/this.a))-Math.PI/4);return w.x=N,w.y=U,w},names:["Miller_Cylindrical","mill"]},Br={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=hr(this.es)},forward:function(w){var N,U,K=w.x,Z=w.y;if(K=W(K-this.long0),this.sphere){if(this.m)for(var J=this.n*Math.sin(Z),se=20;se;--se){var ee=(this.m*Z+Math.sin(Z)-J)/(this.m+Math.cos(Z));if(Z-=ee,Math.abs(ee)<p)break}else Z=this.n!==1?Math.asin(this.n*Math.sin(Z)):Z;N=this.a*this.C_x*K*(this.m+Math.cos(Z)),U=this.a*this.C_y*Z}else{var ve=Math.sin(Z),Ce=Math.cos(Z);U=this.a*pr(Z,ve,Ce,this.en),N=this.a*K*Ce/Math.sqrt(1-this.es*ve*ve)}return w.x=N,w.y=U,w},inverse:function(w){var N,U,K;return w.x-=this.x0,U=w.x/this.a,w.y-=this.y0,N=w.y/this.a,this.sphere?(N/=this.C_y,U/=this.C_x*(this.m+Math.cos(N)),this.m?N=mn((this.m*N+Math.sin(N))/this.n):this.n!==1&&(N=mn(Math.sin(N)/this.n)),U=W(U+this.long0),N=Ct(N)):(N=tr(w.y/this.a,this.es,this.en),(K=Math.abs(N))<t?(K=Math.sin(N),U=W(this.long0+w.x*Math.sqrt(1-this.es*K*K)/(this.a*Math.cos(N)))):K-p<t&&(U=this.long0)),w.x=U,w.y=N,w},names:["Sinusoidal","sinu"]},xr={init:function(){},forward:function(w){for(var N=w.x,U=w.y,K=W(N-this.long0),Z=U,J=Math.PI*Math.sin(U);;){var se=-(Z+Math.sin(Z)-J)/(1+Math.cos(Z));if(Z+=se,Math.abs(se)<p)break}Z/=2,Math.PI/2-Math.abs(U)<p&&(K=0);var ee=.900316316158*this.a*K*Math.cos(Z)+this.x0,ve=1.4142135623731*this.a*Math.sin(Z)+this.y0;return w.x=ee,w.y=ve,w},inverse:function(w){var N,U;w.x-=this.x0,w.y-=this.y0,U=w.y/(1.4142135623731*this.a),Math.abs(U)>.999999999999&&(U=.999999999999),N=Math.asin(U);var K=W(this.long0+w.x/(.900316316158*this.a*Math.cos(N)));K<-Math.PI&&(K=-Math.PI),K>Math.PI&&(K=Math.PI),U=(2*N+Math.sin(2*N))/Math.PI,Math.abs(U)>1&&(U=1);var Z=Math.asin(U);return w.x=K,w.y=Z,w},names:["Mollweide","moll"]},kr={init:function(){Math.abs(this.lat1+this.lat2)<p||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=X(this.es),this.e1=oe(this.es),this.e2=Ee(this.es),this.e3=Re(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=A(this.e,this.sinphi,this.cosphi),this.ml1=k(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<p?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=A(this.e,this.sinphi,this.cosphi),this.ml2=k(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=k(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(w){var N,U=w.x,K=w.y;if(this.sphere)N=this.a*(this.g-K);else{var Z=k(this.e0,this.e1,this.e2,this.e3,K);N=this.a*(this.g-Z)}var J=this.ns*W(U-this.long0),se=this.x0+N*Math.sin(J),ee=this.y0+this.rh-N*Math.cos(J);return w.x=se,w.y=ee,w},inverse:function(w){var N,U,K,Z;w.x-=this.x0,w.y=this.rh-w.y+this.y0,this.ns>=0?(U=Math.sqrt(w.x*w.x+w.y*w.y),N=1):(U=-Math.sqrt(w.x*w.x+w.y*w.y),N=-1);var J=0;return U!==0&&(J=Math.atan2(N*w.x,N*w.y)),this.sphere?(Z=W(this.long0+J/this.ns),K=Ct(this.g-U/this.a),w.x=Z,w.y=K,w):(K=jt(this.g-U/this.a,this.e0,this.e1,this.e2,this.e3),Z=W(this.long0+J/this.ns),w.x=Z,w.y=K,w)},names:["Equidistant_Conic","eqdc"]},Fr={init:function(){this.R=this.a},forward:function(w){var N,U,K=w.x,Z=w.y,J=W(K-this.long0);Math.abs(Z)<=p&&(N=this.x0+this.R*J,U=this.y0);var se=mn(2*Math.abs(Z/Math.PI));(Math.abs(J)<=p||Math.abs(Math.abs(Z)-t)<=p)&&(N=this.x0,U=Z>=0?this.y0+Math.PI*this.R*Math.tan(.5*se):this.y0+Math.PI*this.R*-Math.tan(.5*se));var ee=.5*Math.abs(Math.PI/J-J/Math.PI),ve=ee*ee,Ce=Math.sin(se),Pe=Math.cos(se),We=Pe/(Ce+Pe-1),Je=We*We,Ze=We*(2/Ce-1),it=Ze*Ze,Ke=Math.PI*this.R*(ee*(We-it)+Math.sqrt(ve*(We-it)*(We-it)-(it+ve)*(Je-it)))/(it+ve);J<0&&(Ke=-Ke),N=this.x0+Ke;var wt=ve+We;return Ke=Math.PI*this.R*(Ze*wt-ee*Math.sqrt((it+ve)*(ve+1)-wt*wt))/(it+ve),U=Z>=0?this.y0+Ke:this.y0-Ke,w.x=N,w.y=U,w},inverse:function(w){var N,U,K,Z,J,se,ee,ve,Ce,Pe,We,Je;return w.x-=this.x0,w.y-=this.y0,We=Math.PI*this.R,J=(K=w.x/We)*K+(Z=w.y/We)*Z,We=3*(Z*Z/(ve=-2*(se=-Math.abs(Z)*(1+J))+1+2*Z*Z+J*J)+(2*(ee=se-2*Z*Z+K*K)*ee*ee/ve/ve/ve-9*se*ee/ve/ve)/27)/(Ce=(se-ee*ee/3/ve)/ve)/(Pe=2*Math.sqrt(-Ce/3)),Math.abs(We)>1&&(We=We>=0?1:-1),Je=Math.acos(We)/3,U=w.y>=0?(-Pe*Math.cos(Je+Math.PI/3)-ee/3/ve)*Math.PI:-(-Pe*Math.cos(Je+Math.PI/3)-ee/3/ve)*Math.PI,N=Math.abs(K)<p?this.long0:W(this.long0+Math.PI*(J-1+Math.sqrt(1+2*(K*K-Z*Z)+J*J))/2/K),w.x=N,w.y=U,w},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Or={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(w){var N,U,K,Z,J,se,ee,ve,Ce,Pe,We,Je,Ze,it,Ke,wt,ct,St,Dt,Lt,Yt,sn,In=w.x,jn=w.y,$n=Math.sin(w.y),or=Math.cos(w.y),rn=W(In-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=p?(w.x=this.x0+this.a*(t-jn)*Math.sin(rn),w.y=this.y0-this.a*(t-jn)*Math.cos(rn),w):Math.abs(this.sin_p12+1)<=p?(w.x=this.x0+this.a*(t+jn)*Math.sin(rn),w.y=this.y0+this.a*(t+jn)*Math.cos(rn),w):(St=this.sin_p12*$n+this.cos_p12*or*Math.cos(rn),ct=(wt=Math.acos(St))?wt/Math.sin(wt):1,w.x=this.x0+this.a*ct*or*Math.sin(rn),w.y=this.y0+this.a*ct*(this.cos_p12*$n-this.sin_p12*or*Math.cos(rn)),w):(N=X(this.es),U=oe(this.es),K=Ee(this.es),Z=Re(this.es),Math.abs(this.sin_p12-1)<=p?(J=this.a*k(N,U,K,Z,t),se=this.a*k(N,U,K,Z,jn),w.x=this.x0+(J-se)*Math.sin(rn),w.y=this.y0-(J-se)*Math.cos(rn),w):Math.abs(this.sin_p12+1)<=p?(J=this.a*k(N,U,K,Z,t),se=this.a*k(N,U,K,Z,jn),w.x=this.x0+(J+se)*Math.sin(rn),w.y=this.y0+(J+se)*Math.cos(rn),w):(ee=$n/or,ve=He(this.a,this.e,this.sin_p12),Ce=He(this.a,this.e,$n),Pe=Math.atan((1-this.es)*ee+this.es*ve*this.sin_p12/(Ce*or)),Dt=(We=Math.atan2(Math.sin(rn),this.cos_p12*Math.tan(Pe)-this.sin_p12*Math.cos(rn)))===0?Math.asin(this.cos_p12*Math.sin(Pe)-this.sin_p12*Math.cos(Pe)):Math.abs(Math.abs(We)-Math.PI)<=p?-Math.asin(this.cos_p12*Math.sin(Pe)-this.sin_p12*Math.cos(Pe)):Math.asin(Math.sin(rn)*Math.cos(Pe)/Math.sin(We)),Je=this.e*this.sin_p12/Math.sqrt(1-this.es),wt=ve*Dt*(1-(Lt=Dt*Dt)*(Ke=(Ze=this.e*this.cos_p12*Math.cos(We)/Math.sqrt(1-this.es))*Ze)*(1-Ke)/6+(Yt=Lt*Dt)/8*(it=Je*Ze)*(1-2*Ke)+(sn=Yt*Dt)/120*(Ke*(4-7*Ke)-3*Je*Je*(1-7*Ke))-sn*Dt/48*it),w.x=this.x0+wt*Math.sin(We),w.y=this.y0+wt*Math.cos(We),w))},inverse:function(w){var N,U,K,Z,J,se,ee,ve,Ce,Pe,We,Je,Ze,it,Ke,wt,ct,St,Dt,Lt,Yt,sn,In;return w.x-=this.x0,w.y-=this.y0,this.sphere?(N=Math.sqrt(w.x*w.x+w.y*w.y))>2*t*this.a?void 0:(U=N/this.a,K=Math.sin(U),Z=Math.cos(U),J=this.long0,Math.abs(N)<=p?se=this.lat0:(se=mn(Z*this.sin_p12+w.y*K*this.cos_p12/N),ee=Math.abs(this.lat0)-t,J=Math.abs(ee)<=p?this.lat0>=0?W(this.long0+Math.atan2(w.x,-w.y)):W(this.long0-Math.atan2(-w.x,w.y)):W(this.long0+Math.atan2(w.x*K,N*this.cos_p12*Z-w.y*this.sin_p12*K))),w.x=J,w.y=se,w):(ve=X(this.es),Ce=oe(this.es),Pe=Ee(this.es),We=Re(this.es),Math.abs(this.sin_p12-1)<=p?(se=jt(((Je=this.a*k(ve,Ce,Pe,We,t))-(N=Math.sqrt(w.x*w.x+w.y*w.y)))/this.a,ve,Ce,Pe,We),J=W(this.long0+Math.atan2(w.x,-1*w.y)),w.x=J,w.y=se,w):Math.abs(this.sin_p12+1)<=p?(Je=this.a*k(ve,Ce,Pe,We,t),se=jt(((N=Math.sqrt(w.x*w.x+w.y*w.y))-Je)/this.a,ve,Ce,Pe,We),J=W(this.long0+Math.atan2(w.x,w.y)),w.x=J,w.y=se,w):(N=Math.sqrt(w.x*w.x+w.y*w.y),Ke=Math.atan2(w.x,w.y),Ze=He(this.a,this.e,this.sin_p12),wt=Math.cos(Ke),St=-(ct=this.e*this.cos_p12*wt)*ct/(1-this.es),Dt=3*this.es*(1-St)*this.sin_p12*this.cos_p12*wt/(1-this.es),sn=1-St*(Yt=(Lt=N/Ze)-St*(1+St)*Math.pow(Lt,3)/6-Dt*(1+3*St)*Math.pow(Lt,4)/24)*Yt/2-Lt*Yt*Yt*Yt/6,it=Math.asin(this.sin_p12*Math.cos(Yt)+this.cos_p12*Math.sin(Yt)*wt),J=W(this.long0+Math.asin(Math.sin(Ke)*Math.sin(Yt)/Math.cos(it))),In=Math.sin(it),se=Math.atan2((In-this.es*sn*this.sin_p12)*Math.tan(it),In*(1-this.es)),w.x=J,w.y=se,w))},names:["Azimuthal_Equidistant","aeqd"]},Cr={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(w){var N,U,K,Z,J,se,ee,ve=w.x,Ce=w.y;return K=W(ve-this.long0),N=Math.sin(Ce),U=Math.cos(Ce),Z=Math.cos(K),((J=this.sin_p14*N+this.cos_p14*U*Z)>0||Math.abs(J)<=p)&&(se=1*this.a*U*Math.sin(K),ee=this.y0+1*this.a*(this.cos_p14*N-this.sin_p14*U*Z)),w.x=se,w.y=ee,w},inverse:function(w){var N,U,K,Z,J,se,ee;return w.x-=this.x0,w.y-=this.y0,U=mn((N=Math.sqrt(w.x*w.x+w.y*w.y))/this.a),K=Math.sin(U),Z=Math.cos(U),se=this.long0,Math.abs(N)<=p?(ee=this.lat0,w.x=se,w.y=ee,w):(ee=mn(Z*this.sin_p14+w.y*K*this.cos_p14/N),J=Math.abs(this.lat0)-t,Math.abs(J)<=p?(se=this.lat0>=0?W(this.long0+Math.atan2(w.x,-w.y)):W(this.long0-Math.atan2(-w.x,w.y)),w.x=se,w.y=ee,w):(se=W(this.long0+Math.atan2(w.x*K,N*this.cos_p14*Z-w.y*this.sin_p14*K)),w.x=se,w.y=ee,w))},names:["ortho"]};var Ue=1,Cn=2,gr=3,_r=4,Nr=5,ur=6,Kt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function rr(w,N,U,K){var Z;return w<p?(K.value=Kt.AREA_0,Z=0):(Z=Math.atan2(N,U),Math.abs(Z)<=b?K.value=Kt.AREA_0:Z>b&&Z<=t+b?(K.value=Kt.AREA_1,Z-=t):Z>t+b||Z<=-(t+b)?(K.value=Kt.AREA_2,Z=Z>=0?Z-x:Z+x):(K.value=Kt.AREA_3,Z+=t)),Z}function ir(w,N){var U=w+N;return U<-x?U+=E:U>+x&&(U-=E),U}const Mn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=t-b/2?this.face=Nr:this.lat0<=-(t-b/2)?this.face=ur:Math.abs(this.long0)<=b?this.face=Ue:Math.abs(this.long0)<=t+b?this.face=this.long0>0?Cn:_r:this.face=gr,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(w){var N,U,K,Z,J,se,ee={x:0,y:0},ve={value:0};if(w.x-=this.long0,N=this.es!==0?Math.atan(this.one_minus_f_squared*Math.tan(w.y)):w.y,U=w.x,this.face===Nr)Z=t-N,U>=b&&U<=t+b?(ve.value=Kt.AREA_0,K=U-t):U>t+b||U<=-(t+b)?(ve.value=Kt.AREA_1,K=U>0?U-x:U+x):U>-(t+b)&&U<=-b?(ve.value=Kt.AREA_2,K=U+t):(ve.value=Kt.AREA_3,K=U);else if(this.face===ur)Z=t+N,U>=b&&U<=t+b?(ve.value=Kt.AREA_0,K=-U+t):U<b&&U>=-b?(ve.value=Kt.AREA_1,K=-U):U<-b&&U>=-(t+b)?(ve.value=Kt.AREA_2,K=-U-t):(ve.value=Kt.AREA_3,K=U>0?-U+x:-U-x);else{var Ce,Pe,We,Je,Ze,it;this.face===Cn?U=ir(U,+t):this.face===gr?U=ir(U,+x):this.face===_r&&(U=ir(U,-t)),Je=Math.sin(N),Ze=Math.cos(N),it=Math.sin(U),Ce=Ze*Math.cos(U),Pe=Ze*it,We=Je,this.face===Ue?K=rr(Z=Math.acos(Ce),We,Pe,ve):this.face===Cn?K=rr(Z=Math.acos(Pe),We,-Ce,ve):this.face===gr?K=rr(Z=Math.acos(-Ce),We,-Pe,ve):this.face===_r?K=rr(Z=Math.acos(-Pe),We,Ce,ve):(Z=K=0,ve.value=Kt.AREA_0)}return se=Math.atan(12/x*(K+Math.acos(Math.sin(K)*Math.cos(b))-t)),J=Math.sqrt((1-Math.cos(Z))/(Math.cos(se)*Math.cos(se))/(1-Math.cos(Math.atan(1/Math.cos(K))))),ve.value===Kt.AREA_1?se+=t:ve.value===Kt.AREA_2?se+=x:ve.value===Kt.AREA_3&&(se+=1.5*x),ee.x=J*Math.cos(se),ee.y=J*Math.sin(se),ee.x=ee.x*this.a+this.x0,ee.y=ee.y*this.a+this.y0,w.x=ee.x,w.y=ee.y,w},inverse:function(w){var N,U,K,Z,J,se,ee,ve,Ce,Pe,We,Je,Ze={lam:0,phi:0},it={value:0};if(w.x=(w.x-this.x0)/this.a,w.y=(w.y-this.y0)/this.a,U=Math.atan(Math.sqrt(w.x*w.x+w.y*w.y)),N=Math.atan2(w.y,w.x),w.x>=0&&w.x>=Math.abs(w.y)?it.value=Kt.AREA_0:w.y>=0&&w.y>=Math.abs(w.x)?(it.value=Kt.AREA_1,N-=t):w.x<0&&-w.x>=Math.abs(w.y)?(it.value=Kt.AREA_2,N=N<0?N+x:N-x):(it.value=Kt.AREA_3,N+=t),Ce=x/12*Math.tan(N),J=Math.sin(Ce)/(Math.cos(Ce)-1/Math.sqrt(2)),se=Math.atan(J),(ee=1-(K=Math.cos(N))*K*(Z=Math.tan(U))*Z*(1-Math.cos(Math.atan(1/Math.cos(se)))))<-1?ee=-1:ee>1&&(ee=1),this.face===Nr)ve=Math.acos(ee),Ze.phi=t-ve,it.value===Kt.AREA_0?Ze.lam=se+t:it.value===Kt.AREA_1?Ze.lam=se<0?se+x:se-x:it.value===Kt.AREA_2?Ze.lam=se-t:Ze.lam=se;else if(this.face===ur)ve=Math.acos(ee),Ze.phi=ve-t,it.value===Kt.AREA_0?Ze.lam=-se+t:it.value===Kt.AREA_1?Ze.lam=-se:it.value===Kt.AREA_2?Ze.lam=-se-t:Ze.lam=se<0?-se-x:-se+x;else{var Ke,wt,ct;Ce=(Ke=ee)*Ke,wt=(Ce+=(ct=Ce>=1?0:Math.sqrt(1-Ce)*Math.sin(se))*ct)>=1?0:Math.sqrt(1-Ce),it.value===Kt.AREA_1?(Ce=wt,wt=-ct,ct=Ce):it.value===Kt.AREA_2?(wt=-wt,ct=-ct):it.value===Kt.AREA_3&&(Ce=wt,wt=ct,ct=-Ce),this.face===Cn?(Ce=Ke,Ke=-wt,wt=Ce):this.face===gr?(Ke=-Ke,wt=-wt):this.face===_r&&(Ce=Ke,Ke=wt,wt=-Ce),Ze.phi=Math.acos(-ct)-t,Ze.lam=Math.atan2(wt,Ke),this.face===Cn?Ze.lam=ir(Ze.lam,-t):this.face===gr?Ze.lam=ir(Ze.lam,-x):this.face===_r&&(Ze.lam=ir(Ze.lam,+t))}return this.es!==0&&(Pe=Ze.phi<0?1:0,We=Math.tan(Ze.phi),Je=this.b/Math.sqrt(We*We+this.one_minus_f_squared),Ze.phi=Math.atan(Math.sqrt(this.a*this.a-Je*Je)/(this.one_minus_f*Je)),Pe&&(Ze.phi=-Ze.phi)),Ze.lam+=this.long0,w.x=Ze.lam,w.y=Ze.phi,w},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var wn=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],vn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ir=.8487,v=1.3523,I=g/5,j=1/I,H=18,re=function(w,N){return w[0]+N*(w[1]+N*(w[2]+N*w[3]))};const _e={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(w){var N=W(w.x-this.long0),U=Math.abs(w.y),K=Math.floor(U*I);K<0?K=0:K>=H&&(K=17);var Z={x:re(wn[K],U=g*(U-j*K))*N,y:re(vn[K],U)};return w.y<0&&(Z.y=-Z.y),Z.x=Z.x*this.a*Ir+this.x0,Z.y=Z.y*this.a*v+this.y0,Z},inverse:function(w){var N={x:(w.x-this.x0)/(this.a*Ir),y:Math.abs(w.y-this.y0)/(this.a*v)};if(N.y>=1)N.x/=wn[18][0],N.y=w.y<0?-t:t;else{var U=Math.floor(N.y*H);for(U<0?U=0:U>=H&&(U=17);;)if(vn[U][0]>N.y)--U;else{if(!(vn[U+1][0]<=N.y))break;++U}var K=vn[U],Z=5*(N.y-K[0])/(vn[U+1][0]-K[0]);Z=(function(J,se,ee,ve){for(var Ce=se;ve;--ve){var Pe=J(Ce);if(Ce-=Pe,Math.abs(Pe)<ee)break}return Ce})((function(J){return(re(K,J)-N.y)/(function(se,ee){return se[1]+ee*(2*se[2]+3*ee*se[3])})(K,J)}),Z,p,100),N.x/=re(wn[U],Z),N.y=(5*U+Z)*y,w.y<0&&(N.y=-N.y)}return N.x=W(N.x+this.long0),N},names:["Robinson","robin"]},fe={init:function(){this.name="geocent"},forward:function(w){return mt(w,this.es,this.a)},inverse:function(w){return Nt(w,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var ge=0,Le=1,Oe=2,gt=3,Tt={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const Ot={init:function(){if(Object.keys(Tt).forEach(function(U){if(this[U]===void 0)this[U]=Tt[U].def;else{if(Tt[U].num&&isNaN(this[U]))throw new Error("Invalid parameter value, must be numeric "+U+" = "+this[U]);Tt[U].num&&(this[U]=parseFloat(this[U]))}Tt[U].degrees&&(this[U]=this[U]*y)}.bind(this)),Math.abs(Math.abs(this.lat0)-t)<p?this.mode=this.lat0<0?Le:ge:Math.abs(this.lat0)<p?this.mode=Oe:(this.mode=gt,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var w=this.tilt,N=this.azi;this.cg=Math.cos(N),this.sg=Math.sin(N),this.cw=Math.cos(w),this.sw=Math.sin(w)},forward:function(w){w.x-=this.long0;var N,U,K,Z,J=Math.sin(w.y),se=Math.cos(w.y),ee=Math.cos(w.x);switch(this.mode){case gt:U=this.sinph0*J+this.cosph0*se*ee;break;case Oe:U=se*ee;break;case Le:U=-J;break;case ge:U=J}switch(N=(U=this.pn1/(this.p-U))*se*Math.sin(w.x),this.mode){case gt:U*=this.cosph0*J-this.sinph0*se*ee;break;case Oe:U*=J;break;case ge:U*=-se*ee;break;case Le:U*=se*ee}return Z=1/((K=U*this.cg+N*this.sg)*this.sw*this.h1+this.cw),N=(N*this.cg-U*this.sg)*this.cw*Z,U=K*Z,w.x=N*this.a,w.y=U*this.a,w},inverse:function(w){w.x/=this.a,w.y/=this.a;var N,U,K,Z={x:w.x,y:w.y};K=1/(this.pn1-w.y*this.sw),N=this.pn1*w.x*K,U=this.pn1*w.y*this.cw*K,w.x=N*this.cg+U*this.sg,w.y=U*this.cg-N*this.sg;var J=Rn(w.x,w.y);if(Math.abs(J)<p)Z.x=0,Z.y=w.y;else{var se,ee;switch(ee=1-J*J*this.pfact,ee=(this.p-Math.sqrt(ee))/(this.pn1/J+J/this.pn1),se=Math.sqrt(1-ee*ee),this.mode){case gt:Z.y=Math.asin(se*this.sinph0+w.y*ee*this.cosph0/J),w.y=(se-this.sinph0*Math.sin(Z.y))*J,w.x*=ee*this.cosph0;break;case Oe:Z.y=Math.asin(w.y*ee/J),w.y=se*J,w.x*=ee;break;case ge:Z.y=Math.asin(se),w.y=-w.y;break;case Le:Z.y=-Math.asin(se)}Z.x=Math.atan2(w.x,w.y)}return w.x=Z.x+this.long0,w.y=Z.y,w},names:["Tilted_Perspective","tpers"]},Pt={init:function(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var w=1-this.es,N=1/w;this.radius_p=Math.sqrt(w),this.radius_p2=w,this.radius_p_inv2=N,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(w){var N,U,K,Z,J=w.x,se=w.y;if(J-=this.long0,this.shape==="ellipse"){se=Math.atan(this.radius_p2*Math.tan(se));var ee=this.radius_p/Rn(this.radius_p*Math.cos(se),Math.sin(se));if(U=ee*Math.cos(J)*Math.cos(se),K=ee*Math.sin(J)*Math.cos(se),Z=ee*Math.sin(se),(this.radius_g-U)*U-K*K-Z*Z*this.radius_p_inv2<0)return w.x=Number.NaN,w.y=Number.NaN,w;N=this.radius_g-U,this.flip_axis?(w.x=this.radius_g_1*Math.atan(K/Rn(Z,N)),w.y=this.radius_g_1*Math.atan(Z/N)):(w.x=this.radius_g_1*Math.atan(K/N),w.y=this.radius_g_1*Math.atan(Z/Rn(K,N)))}else this.shape==="sphere"&&(N=Math.cos(se),U=Math.cos(J)*N,K=Math.sin(J)*N,Z=Math.sin(se),N=this.radius_g-U,this.flip_axis?(w.x=this.radius_g_1*Math.atan(K/Rn(Z,N)),w.y=this.radius_g_1*Math.atan(Z/N)):(w.x=this.radius_g_1*Math.atan(K/N),w.y=this.radius_g_1*Math.atan(Z/Rn(K,N))));return w.x=w.x*this.a,w.y=w.y*this.a,w},inverse:function(w){var N,U,K,Z,J=-1,se=0,ee=0;if(w.x=w.x/this.a,w.y=w.y/this.a,this.shape==="ellipse"){this.flip_axis?(ee=Math.tan(w.y/this.radius_g_1),se=Math.tan(w.x/this.radius_g_1)*Rn(1,ee)):(se=Math.tan(w.x/this.radius_g_1),ee=Math.tan(w.y/this.radius_g_1)*Rn(1,se));var ve=ee/this.radius_p;if(N=se*se+ve*ve+J*J,(K=(U=2*this.radius_g*J)*U-4*N*this.C)<0)return w.x=Number.NaN,w.y=Number.NaN,w;Z=(-U-Math.sqrt(K))/(2*N),J=this.radius_g+Z*J,se*=Z,ee*=Z,w.x=Math.atan2(se,J),w.y=Math.atan(ee*Math.cos(w.x)/J),w.y=Math.atan(this.radius_p_inv2*Math.tan(w.y))}else if(this.shape==="sphere"){if(this.flip_axis?(ee=Math.tan(w.y/this.radius_g_1),se=Math.tan(w.x/this.radius_g_1)*Math.sqrt(1+ee*ee)):(se=Math.tan(w.x/this.radius_g_1),ee=Math.tan(w.y/this.radius_g_1)*Math.sqrt(1+se*se)),N=se*se+ee*ee+J*J,(K=(U=2*this.radius_g*J)*U-4*N*this.C)<0)return w.x=Number.NaN,w.y=Number.NaN,w;Z=(-U-Math.sqrt(K))/(2*N),J=this.radius_g+Z*J,se*=Z,ee*=Z,w.x=Math.atan2(se,J),w.y=Math.atan(ee*Math.cos(w.x)/J)}return w.x=w.x+this.long0,w},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var Et;nt.defaultDatum="WGS84",nt.Proj=pt,nt.WGS84=new nt.Proj("WGS84"),nt.Point=Kn,nt.toPoint=Me,nt.defs=tt,nt.nadgrid=function(w,N){var U=new DataView(N),K=(function(ee){var ve=ee.getInt32(8,!1);return ve!==11&&((ve=ee.getInt32(8,!0))!==11&&Bt.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)})(U),Z=(function(ee,ve){return{nFields:ee.getInt32(8,ve),nSubgridFields:ee.getInt32(24,ve),nSubgrids:ee.getInt32(40,ve),shiftType:fn(ee,56,64).trim(),fromSemiMajorAxis:ee.getFloat64(120,ve),fromSemiMinorAxis:ee.getFloat64(136,ve),toSemiMajorAxis:ee.getFloat64(152,ve),toSemiMinorAxis:ee.getFloat64(168,ve)}})(U,K);Z.nSubgrids>1&&Bt.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var J=(function(ee,ve,Ce){for(var Pe=[],We=0;We<ve.nSubgrids;We++){var Je=rt(ee,176,Ce),Ze=dt(ee,176,Je,Ce),it=Math.round(1+(Je.upperLongitude-Je.lowerLongitude)/Je.longitudeInterval),Ke=Math.round(1+(Je.upperLatitude-Je.lowerLatitude)/Je.latitudeInterval);Pe.push({ll:[_n(Je.lowerLongitude),_n(Je.lowerLatitude)],del:[_n(Je.longitudeInterval),_n(Je.latitudeInterval)],lim:[it,Ke],count:Je.gridNodeCount,cvs:ln(Ze)})}return Pe})(U,Z,K),se={header:Z,subgrids:J};return Rt[w]=se,se},nt.transform=Fe,nt.mgrs=xn,nt.version="__VERSION__",(Et=nt).Proj.projections.add(Un),Et.Proj.projections.add(On),Et.Proj.projections.add(mr),Et.Proj.projections.add(Pn),Et.Proj.projections.add(Wn),Et.Proj.projections.add(Vn),Et.Proj.projections.add(qn),Et.Proj.projections.add(Xn),Et.Proj.projections.add(wr),Et.Proj.projections.add(Wt),Et.Proj.projections.add(Tn),Et.Proj.projections.add(Ln),Et.Proj.projections.add(Xt),Et.Proj.projections.add(Bn),Et.Proj.projections.add(Fn),Et.Proj.projections.add(Yn),Et.Proj.projections.add(yr),Et.Proj.projections.add(Ar),Et.Proj.projections.add(Br),Et.Proj.projections.add(xr),Et.Proj.projections.add(kr),Et.Proj.projections.add(Fr),Et.Proj.projections.add(Or),Et.Proj.projections.add(Cr),Et.Proj.projections.add(Mn),Et.Proj.projections.add(_e),Et.Proj.projections.add(fe),Et.Proj.projections.add(Ot),Et.Proj.projections.add(Pt);const Ht=nt},2587:_=>{function l(o,c){return Object.prototype.hasOwnProperty.call(o,c)}_.exports=function(o,c,d,m){c=c||"&",d=d||"=";var h={};if(typeof o!="string"||o.length===0)return h;var s=/\+/g;o=o.split(c);var a=1e3;m&&typeof m.maxKeys=="number"&&(a=m.maxKeys);var r=o.length;a>0&&r>a&&(r=a);for(var n=0;n<r;++n){var t,i,u,f,p=o[n].replace(s,"%20"),y=p.indexOf(d);y>=0?(t=p.substr(0,y),i=p.substr(y+1)):(t=p,i=""),u=decodeURIComponent(t),f=decodeURIComponent(i),l(h,u)?Array.isArray(h[u])?h[u].push(f):h[u]=[h[u],f]:h[u]=f}return h}},2361:_=>{var l=function(o){switch(typeof o){case"string":return o;case"boolean":return o?"true":"false";case"number":return isFinite(o)?o:"";default:return""}};_.exports=function(o,c,d,m){return c=c||"&",d=d||"=",o===null&&(o=void 0),typeof o=="object"?Object.keys(o).map((function(h){var s=encodeURIComponent(l(h))+d;return Array.isArray(o[h])?o[h].map((function(a){return s+encodeURIComponent(l(a))})).join(c):s+encodeURIComponent(l(o[h]))})).join(c):m?encodeURIComponent(l(m))+d+encodeURIComponent(l(o)):""}},7673:(_,l,o)=>{l.decode=l.parse=o(2587),l.encode=l.stringify=o(2361)},9189:(_,l,o)=>{var c=o(5717),d=o(7187).EventEmitter;function m(r){if(!(this instanceof m))return new m(r);d.call(this),r=r||{},this.concurrency=r.concurrency||1/0,this.timeout=r.timeout||0,this.autostart=r.autostart||!1,this.results=r.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}function h(){for(var r in this.timers){var n=this.timers[r];delete this.timers[r],clearTimeout(n)}}function s(r){var n=this;function t(i){n.end(i)}this.on("error",t),this.on("end",(function i(u){n.removeListener("error",t),n.removeListener("end",i),r(u,this.results)}))}function a(r){this.session++,this.running=!1,this.emit("end",r)}_.exports=m,_.exports.default=m,c(m,d),["pop","shift","indexOf","lastIndexOf"].forEach((function(r){m.prototype[r]=function(){return Array.prototype[r].apply(this.jobs,arguments)}})),m.prototype.slice=function(r,n){return this.jobs=this.jobs.slice(r,n),this},m.prototype.reverse=function(){return this.jobs.reverse(),this},["push","unshift","splice"].forEach((function(r){m.prototype[r]=function(){var n=Array.prototype[r].apply(this.jobs,arguments);return this.autostart&&this.start(),n}})),Object.defineProperty(m.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),m.prototype.start=function(r){if(r&&s.call(this,r),this.running=!0,!(this.pending>=this.concurrency))if(this.jobs.length!==0){var n=this,t=this.jobs.shift(),i=!0,u=this.session,f=null,p=!1,y=null,g=t.timeout||this.timeout;g&&(f=setTimeout((function(){p=!0,n.listeners("timeout").length>0?n.emit("timeout",E,t):E()}),g),this.timers[f]=f),this.results&&(y=this.results.length,this.results[y]=null),this.pending++,n.emit("start",t);var b=t(E);b&&b.then&&typeof b.then=="function"&&b.then((function(x){return E(null,x)})).catch((function(x){return E(x||!0)})),this.running&&this.jobs.length>0&&this.start()}else this.pending===0&&a.call(this);function E(x,M){i&&n.session===u&&(i=!1,n.pending--,f!==null&&(delete n.timers[f],clearTimeout(f)),x?n.emit("error",x,t):p===!1&&(y!==null&&(n.results[y]=Array.prototype.slice.call(arguments,1)),n.emit("success",M,t)),n.session===u&&(n.pending===0&&n.jobs.length===0?a.call(n):n.running&&n.start()))}},m.prototype.stop=function(){this.running=!1},m.prototype.end=function(r){h.call(this),this.jobs.length=0,this.pending=0,a.call(this,r)}},2582:function(_){_.exports=(function(){function l(g,b,E,x,M){(function S(O,C,T,R,B){for(;R>T;){if(R-T>600){var z=R-T+1,L=C-T+1,Y=Math.log(z),ie=.5*Math.exp(2*Y/3),$=.5*Math.sqrt(Y*ie*(z-ie)/z)*(L-z/2<0?-1:1);S(O,C,Math.max(T,Math.floor(C-L*ie/z+$)),Math.min(R,Math.floor(C+(z-L)*ie/z+$)),B)}var Q=O[C],ce=T,be=R;for(o(O,T,C),B(O[R],Q)>0&&o(O,T,R);ce<be;){for(o(O,ce,be),ce++,be--;B(O[ce],Q)<0;)ce++;for(;B(O[be],Q)>0;)be--}B(O[T],Q)===0?o(O,T,be):o(O,++be,R),be<=C&&(T=be+1),C<=be&&(R=be-1)}})(g,b,E||0,x||g.length-1,M||c)}function o(g,b,E){var x=g[b];g[b]=g[E],g[E]=x}function c(g,b){return g<b?-1:g>b?1:0}var d=function(g){g===void 0&&(g=9),this._maxEntries=Math.max(4,g),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function m(g,b,E){if(!E)return b.indexOf(g);for(var x=0;x<b.length;x++)if(E(g,b[x]))return x;return-1}function h(g,b){s(g,0,g.children.length,b,g)}function s(g,b,E,x,M){M||(M=p(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var S=b;S<E;S++){var O=g.children[S];a(M,g.leaf?x(O):O)}return M}function a(g,b){return g.minX=Math.min(g.minX,b.minX),g.minY=Math.min(g.minY,b.minY),g.maxX=Math.max(g.maxX,b.maxX),g.maxY=Math.max(g.maxY,b.maxY),g}function r(g,b){return g.minX-b.minX}function n(g,b){return g.minY-b.minY}function t(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}function i(g){return g.maxX-g.minX+(g.maxY-g.minY)}function u(g,b){return g.minX<=b.minX&&g.minY<=b.minY&&b.maxX<=g.maxX&&b.maxY<=g.maxY}function f(g,b){return b.minX<=g.maxX&&b.minY<=g.maxY&&b.maxX>=g.minX&&b.maxY>=g.minY}function p(g){return{children:g,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(g,b,E,x,M){for(var S=[b,E];S.length;)if(!((E=S.pop())-(b=S.pop())<=x)){var O=b+Math.ceil((E-b)/x/2)*x;l(g,O,b,E,M),S.push(b,O,O,E)}}return d.prototype.all=function(){return this._all(this.data,[])},d.prototype.search=function(g){var b=this.data,E=[];if(!f(g,b))return E;for(var x=this.toBBox,M=[];b;){for(var S=0;S<b.children.length;S++){var O=b.children[S],C=b.leaf?x(O):O;f(g,C)&&(b.leaf?E.push(O):u(g,C)?this._all(O,E):M.push(O))}b=M.pop()}return E},d.prototype.collides=function(g){var b=this.data;if(!f(g,b))return!1;for(var E=[];b;){for(var x=0;x<b.children.length;x++){var M=b.children[x],S=b.leaf?this.toBBox(M):M;if(f(g,S)){if(b.leaf||u(g,S))return!0;E.push(M)}}b=E.pop()}return!1},d.prototype.load=function(g){if(!g||!g.length)return this;if(g.length<this._minEntries){for(var b=0;b<g.length;b++)this.insert(g[b]);return this}var E=this._build(g.slice(),0,g.length-1,0);if(this.data.children.length)if(this.data.height===E.height)this._splitRoot(this.data,E);else{if(this.data.height<E.height){var x=this.data;this.data=E,E=x}this._insert(E,this.data.height-E.height-1,!0)}else this.data=E;return this},d.prototype.insert=function(g){return g&&this._insert(g,this.data.height-1),this},d.prototype.clear=function(){return this.data=p([]),this},d.prototype.remove=function(g,b){if(!g)return this;for(var E,x,M,S=this.data,O=this.toBBox(g),C=[],T=[];S||C.length;){if(S||(S=C.pop(),x=C[C.length-1],E=T.pop(),M=!0),S.leaf){var R=m(g,S.children,b);if(R!==-1)return S.children.splice(R,1),C.push(S),this._condense(C),this}M||S.leaf||!u(S,O)?x?(E++,S=x.children[E],M=!1):S=null:(C.push(S),T.push(E),E=0,x=S,S=S.children[0])}return this},d.prototype.toBBox=function(g){return g},d.prototype.compareMinX=function(g,b){return g.minX-b.minX},d.prototype.compareMinY=function(g,b){return g.minY-b.minY},d.prototype.toJSON=function(){return this.data},d.prototype.fromJSON=function(g){return this.data=g,this},d.prototype._all=function(g,b){for(var E=[];g;)g.leaf?b.push.apply(b,g.children):E.push.apply(E,g.children),g=E.pop();return b},d.prototype._build=function(g,b,E,x){var M,S=E-b+1,O=this._maxEntries;if(S<=O)return h(M=p(g.slice(b,E+1)),this.toBBox),M;x||(x=Math.ceil(Math.log(S)/Math.log(O)),O=Math.ceil(S/Math.pow(O,x-1))),(M=p([])).leaf=!1,M.height=x;var C=Math.ceil(S/O),T=C*Math.ceil(Math.sqrt(O));y(g,b,E,T,this.compareMinX);for(var R=b;R<=E;R+=T){var B=Math.min(R+T-1,E);y(g,R,B,C,this.compareMinY);for(var z=R;z<=B;z+=C){var L=Math.min(z+C-1,B);M.children.push(this._build(g,z,L,x-1))}}return h(M,this.toBBox),M},d.prototype._chooseSubtree=function(g,b,E,x){for(;x.push(b),!b.leaf&&x.length-1!==E;){for(var M=1/0,S=1/0,O=void 0,C=0;C<b.children.length;C++){var T=b.children[C],R=t(T),B=(z=g,L=T,(Math.max(L.maxX,z.maxX)-Math.min(L.minX,z.minX))*(Math.max(L.maxY,z.maxY)-Math.min(L.minY,z.minY))-R);B<S?(S=B,M=R<M?R:M,O=T):B===S&&R<M&&(M=R,O=T)}b=O||b.children[0]}var z,L;return b},d.prototype._insert=function(g,b,E){var x=E?g:this.toBBox(g),M=[],S=this._chooseSubtree(x,this.data,b,M);for(S.children.push(g),a(S,x);b>=0&&M[b].children.length>this._maxEntries;)this._split(M,b),b--;this._adjustParentBBoxes(x,M,b)},d.prototype._split=function(g,b){var E=g[b],x=E.children.length,M=this._minEntries;this._chooseSplitAxis(E,M,x);var S=this._chooseSplitIndex(E,M,x),O=p(E.children.splice(S,E.children.length-S));O.height=E.height,O.leaf=E.leaf,h(E,this.toBBox),h(O,this.toBBox),b?g[b-1].children.push(O):this._splitRoot(E,O)},d.prototype._splitRoot=function(g,b){this.data=p([g,b]),this.data.height=g.height+1,this.data.leaf=!1,h(this.data,this.toBBox)},d.prototype._chooseSplitIndex=function(g,b,E){for(var x,M,S,O,C,T,R,B=1/0,z=1/0,L=b;L<=E-b;L++){var Y=s(g,0,L,this.toBBox),ie=s(g,L,E,this.toBBox),$=(M=Y,S=ie,O=Math.max(M.minX,S.minX),C=Math.max(M.minY,S.minY),T=Math.min(M.maxX,S.maxX),R=Math.min(M.maxY,S.maxY),Math.max(0,T-O)*Math.max(0,R-C)),Q=t(Y)+t(ie);$<B?(B=$,x=L,z=Q<z?Q:z):$===B&&Q<z&&(z=Q,x=L)}return x||E-b},d.prototype._chooseSplitAxis=function(g,b,E){var x=g.leaf?this.compareMinX:r,M=g.leaf?this.compareMinY:n;this._allDistMargin(g,b,E,x)<this._allDistMargin(g,b,E,M)&&g.children.sort(x)},d.prototype._allDistMargin=function(g,b,E,x){g.children.sort(x);for(var M=this.toBBox,S=s(g,0,b,M),O=s(g,E-b,E,M),C=i(S)+i(O),T=b;T<E-b;T++){var R=g.children[T];a(S,g.leaf?M(R):R),C+=i(S)}for(var B=E-b-1;B>=b;B--){var z=g.children[B];a(O,g.leaf?M(z):z),C+=i(O)}return C},d.prototype._adjustParentBBoxes=function(g,b,E){for(var x=E;x>=0;x--)a(b[x],g)},d.prototype._condense=function(g){for(var b=g.length-1,E=void 0;b>=0;b--)g[b].children.length===0?b>0?(E=g[b-1].children).splice(E.indexOf(g[b]),1):this.clear():h(g[b],this.toBBox)},d})()},6102:(_,l,o)=>{var c=o(4472).hasOwnProperty("default")?o(4472).default:o(4472);function d(r,n){return(t=r).length>=2&&typeof t[0]=="number"&&typeof t[1]=="number"?n(r):r.map((function(i){return d(i,n)}));var t}function m(r,n,t){if(t==null)return t;var i=(function(f){if(f==null||typeof f!="object")return f;var p=f.constructor();for(var y in f)f.hasOwnProperty(y)&&(p[y]=f[y]);return p})(t),u=m.bind(this,r,n);switch(t.type){case"Feature":i.geometry=u(t.geometry);break;case"FeatureCollection":i.features=i.features.map(u);break;case"GeometryCollection":i.geometries=i.geometries.map(u);break;default:r(i)}return n&&n(i),i}function h(r,n){var t,i=r.crs;if(i===void 0)throw new Error('Unable to detect CRS, GeoJSON has no "crs" property.');if(i.type==="name"?t=n[i.properties.name]:i.type==="EPSG"&&(t=n["EPSG:"+i.properties.code]),!t)throw new Error("CRS defined in crs section could not be identified: "+JSON.stringify(i));return t}function s(r,n){return typeof r=="string"||r instanceof String?n[r]||c.Proj(r):r}function a(r,n,t,i){i=i||{},n=n?s(n,i):h(r,i),t=s(t,i);var u=c(n,t).forward.bind(u);function f(p){var y=u(p);return p.length===3&&p[2]!==void 0&&y[2]===void 0&&(y[2]=p[2]),y}return m((function(p){p.crs&&delete p.crs,p.coordinates=d(p.coordinates,f)}),(function(p){p.bbox&&(p.bbox=(function(y){var g=[Number.MAX_VALUE,Number.MAX_VALUE],b=[-Number.MAX_VALUE,-Number.MAX_VALUE];return m((function(E){d(E.coordinates,(function(x){g[0]=Math.min(g[0],x[0]),g[1]=Math.min(g[1],x[1]),b[0]=Math.max(b[0],x[0]),b[1]=Math.max(b[1],x[1])}))}),null,y),[g[0],g[1],b[0],b[1]]})(p))}),r)}_.exports={detectCrs:h,reproject:a,reverse:function(r){return m((function(n){n.coordinates=d(n.coordinates,(function(t){return[t[1],t[0]]}))}),null,r)},toWgs84:function(r,n,t){return a(r,n,c.WGS84,t)}}},3686:function(_,l){var o=void 0,c=function(d){return o||(o=new Promise((function(m,h){var s,a=d!==void 0?d:{},r=a.onAbort;a.onAbort=function(k){h(new Error(k)),r&&r(k)},a.postRun=a.postRun||[],a.postRun.push((function(){m(a)})),_=void 0,s||(s=a!==void 0?a:{}),s.onRuntimeInitialized=function(){function k(fe,ge){this.Ka=fe,this.db=ge,this.Ia=1,this.cb=[]}function X(fe,ge){if(this.db=ge,ge=ze(fe)+1,this.Xa=Gn(ge),this.Xa===null)throw Error("Unable to allocate memory for the SQL string");de(fe,be,this.Xa,ge),this.bb=this.Xa,this.Ta=this.hb=null}function oe(fe){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),fe!=null){var ge=this.filename,Le="/",Oe=ge;if(Le&&(Le=typeof Le=="string"?Le:je(Le),Oe=ge?At(Le+"/"+ge):Le),ge=Dr(!0,!0),Oe=Jt(Oe,4095&(ge!==void 0?ge:438)|32768,0),fe){if(typeof fe=="string"){Le=Array(fe.length);for(var gt=0,Tt=fe.length;gt<Tt;++gt)Le[gt]=fe.charCodeAt(gt);fe=Le}Kn(Oe,146|ge),Le=kn(Oe,577),Lr(Le,fe,0,fe.length,0,void 0),Tr(Le),Kn(Oe,ge)}}this.handleError(He(this.filename,Ee)),this.db=L(Ee,"i32"),_e(this.db),this.Ya={},this.Qa={}}var Ee=Xn(4),Re=s.cwrap,He=Re("sqlite3_open","number",["string","number"]),Ct=Re("sqlite3_close_v2","number",["number"]),jt=Re("sqlite3_exec","number",["number","string","number","number","number"]),Wt=Re("sqlite3_changes","number",["number"]),tn=Re("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Tn=Re("sqlite3_sql","string",["number"]),mn=Re("sqlite3_normalized_sql","string",["number"]),Ln=Re("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Xt=Re("sqlite3_bind_text","number",["number","number","number","number","number"]),Bn=Re("sqlite3_bind_blob","number",["number","number","number","number","number"]),Fn=Re("sqlite3_bind_double","number",["number","number","number"]),Yn=Re("sqlite3_bind_int","number",["number","number","number"]),yr=Re("sqlite3_bind_parameter_index","number",["number","string"]),Ar=Re("sqlite3_step","number",["number"]),Br=Re("sqlite3_errmsg","string",["number"]),xr=Re("sqlite3_column_count","number",["number"]),kr=Re("sqlite3_data_count","number",["number"]),Fr=Re("sqlite3_column_double","number",["number","number"]),Or=Re("sqlite3_column_text","string",["number","number"]),Cr=Re("sqlite3_column_blob","number",["number","number"]),Ue=Re("sqlite3_column_bytes","number",["number","number"]),Cn=Re("sqlite3_column_type","number",["number","number"]),gr=Re("sqlite3_column_name","string",["number","number"]),_r=Re("sqlite3_reset","number",["number"]),Nr=Re("sqlite3_clear_bindings","number",["number"]),ur=Re("sqlite3_finalize","number",["number"]),Kt=Re("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),rr=Re("sqlite3_value_type","number",["number"]),ir=Re("sqlite3_value_bytes","number",["number"]),Mn=Re("sqlite3_value_text","string",["number"]),wn=Re("sqlite3_value_blob","number",["number"]),vn=Re("sqlite3_value_double","number",["number"]),Ir=Re("sqlite3_result_double","",["number","number"]),v=Re("sqlite3_result_null","",["number"]),I=Re("sqlite3_result_text","",["number","string","number","number"]),j=Re("sqlite3_result_blob","",["number","number","number","number"]),H=Re("sqlite3_result_int","",["number","number"]),re=Re("sqlite3_result_error","",["number","string","number"]),_e=Re("RegisterExtensionFunctions","number",["number"]);k.prototype.bind=function(fe){if(!this.Ka)throw"Statement closed";return this.reset(),Array.isArray(fe)?this.wb(fe):fe==null||typeof fe!="object"||this.xb(fe)},k.prototype.step=function(){if(!this.Ka)throw"Statement closed";this.Ia=1;var fe=Ar(this.Ka);switch(fe){case 100:return!0;case 101:return!1;default:throw this.db.handleError(fe)}},k.prototype.rb=function(fe){return fe==null&&(fe=this.Ia,this.Ia+=1),Fr(this.Ka,fe)},k.prototype.Bb=function(fe){if(fe==null&&(fe=this.Ia,this.Ia+=1),fe=Or(this.Ka,fe),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(fe)},k.prototype.Cb=function(fe){return fe==null&&(fe=this.Ia,this.Ia+=1),Or(this.Ka,fe)},k.prototype.getBlob=function(fe){fe==null&&(fe=this.Ia,this.Ia+=1);var ge=Ue(this.Ka,fe);fe=Cr(this.Ka,fe);for(var Le=new Uint8Array(ge),Oe=0;Oe<ge;Oe+=1)Le[Oe]=ce[fe+Oe];return Le},k.prototype.get=function(fe,ge){ge=ge||{},fe!=null&&this.bind(fe)&&this.step(),fe=[];for(var Le=kr(this.Ka),Oe=0;Oe<Le;Oe+=1)switch(Cn(this.Ka,Oe)){case 1:var gt=ge.useBigInt?this.Bb(Oe):this.rb(Oe);fe.push(gt);break;case 2:fe.push(this.rb(Oe));break;case 3:fe.push(this.Cb(Oe));break;case 4:fe.push(this.getBlob(Oe));break;default:fe.push(null)}return fe},k.prototype.getColumnNames=function(){for(var fe=[],ge=xr(this.Ka),Le=0;Le<ge;Le+=1)fe.push(gr(this.Ka,Le));return fe},k.prototype.getAsObject=function(fe,ge){fe=this.get(fe,ge),ge=this.getColumnNames();for(var Le={},Oe=0;Oe<ge.length;Oe+=1)Le[ge[Oe]]=fe[Oe];return Le},k.prototype.getSQL=function(){return Tn(this.Ka)},k.prototype.getNormalizedSQL=function(){return mn(this.Ka)},k.prototype.run=function(fe){return fe!=null&&this.bind(fe),this.step(),this.reset()},k.prototype.mb=function(fe,ge){ge==null&&(ge=this.Ia,this.Ia+=1);var Le=$(fe=On(fe));this.cb.push(Le),this.db.handleError(Xt(this.Ka,ge,Le,fe.length-1,0))},k.prototype.vb=function(fe,ge){ge==null&&(ge=this.Ia,this.Ia+=1);var Le=$(fe);this.cb.push(Le),this.db.handleError(Bn(this.Ka,ge,Le,fe.length,0))},k.prototype.lb=function(fe,ge){ge==null&&(ge=this.Ia,this.Ia+=1),this.db.handleError((fe===(0|fe)?Yn:Fn)(this.Ka,ge,fe))},k.prototype.yb=function(fe){fe==null&&(fe=this.Ia,this.Ia+=1),Bn(this.Ka,fe,0,0,0)},k.prototype.nb=function(fe,ge){switch(ge==null&&(ge=this.Ia,this.Ia+=1),typeof fe){case"string":return void this.mb(fe,ge);case"number":return void this.lb(fe,ge);case"bigint":return void this.mb(fe.toString(),ge);case"boolean":return void this.lb(fe+0,ge);case"object":if(fe===null)return void this.yb(ge);if(fe.length!=null)return void this.vb(fe,ge)}throw"Wrong API use : tried to bind a value of an unknown type ("+fe+")."},k.prototype.xb=function(fe){var ge=this;return Object.keys(fe).forEach((function(Le){var Oe=yr(ge.Ka,Le);Oe!==0&&ge.nb(fe[Le],Oe)})),!0},k.prototype.wb=function(fe){for(var ge=0;ge<fe.length;ge+=1)this.nb(fe[ge],ge+1);return!0},k.prototype.reset=function(){return this.freemem(),Nr(this.Ka)===0&&_r(this.Ka)===0},k.prototype.freemem=function(){for(var fe;(fe=this.cb.pop())!==void 0;)Pn(fe)},k.prototype.free=function(){this.freemem();var fe=ur(this.Ka)===0;return delete this.db.Ya[this.Ka],this.Ka=0,fe},X.prototype.next=function(){if(this.Xa===null)return{done:!0};if(this.Ta!==null&&(this.Ta.free(),this.Ta=null),!this.db.db)throw this.fb(),Error("Database closed");var fe=Nn(),ge=Xn(4);z(Ee),z(ge);try{this.db.handleError(Ln(this.db.db,this.bb,-1,Ee,ge)),this.bb=L(ge,"i32");var Le=L(Ee,"i32");return Le===0?(this.fb(),{done:!0}):(this.Ta=new k(Le,this.db),this.db.Ya[Le]=this.Ta,{value:this.Ta,done:!1})}catch(Oe){throw this.hb=he(this.bb),this.fb(),Oe}finally{qn(fe)}},X.prototype.fb=function(){Pn(this.Xa),this.Xa=null},X.prototype.getRemainingSQL=function(){return this.hb!==null?this.hb:he(this.bb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(X.prototype[Symbol.iterator]=function(){return this}),oe.prototype.run=function(fe,ge){if(!this.db)throw"Database closed";if(ge){fe=this.prepare(fe,ge);try{fe.step()}finally{fe.free()}}else this.handleError(jt(this.db,fe,0,0,Ee));return this},oe.prototype.exec=function(fe,ge,Le){if(!this.db)throw"Database closed";var Oe=Nn(),gt=null;try{var Tt=ze(fe)+1,Ot=Xn(Tt);de(fe,ce,Ot,Tt);var Pt=Ot,Et=Xn(4);for(fe=[];L(Pt,"i8")!==0;){z(Ee),z(Et),this.handleError(Ln(this.db,Pt,-1,Ee,Et));var Ht=L(Ee,"i32");if(Pt=L(Et,"i32"),Ht!==0){for(Tt=null,gt=new k(Ht,this),ge!=null&&gt.bind(ge);gt.step();)Tt===null&&(Tt={columns:gt.getColumnNames(),values:[]},fe.push(Tt)),Tt.values.push(gt.get(null,Le));gt.free()}}return fe}catch(w){throw gt&&gt.free(),w}finally{qn(Oe)}},oe.prototype.each=function(fe,ge,Le,Oe,gt){typeof ge=="function"&&(Oe=Le,Le=ge,ge=void 0),fe=this.prepare(fe,ge);try{for(;fe.step();)Le(fe.getAsObject(null,gt))}finally{fe.free()}if(typeof Oe=="function")return Oe()},oe.prototype.prepare=function(fe,ge){if(z(Ee),this.handleError(tn(this.db,fe,-1,Ee,0)),(fe=L(Ee,"i32"))===0)throw"Nothing to prepare";var Le=new k(fe,this);return ge!=null&&Le.bind(ge),this.Ya[fe]=Le},oe.prototype.iterateStatements=function(fe){return new X(fe,this)},oe.prototype.export=function(){Object.values(this.Ya).forEach((function(ge){ge.free()})),Object.values(this.Qa).forEach(B),this.Qa={},this.handleError(Ct(this.db));var fe=Ur(this.filename);return this.handleError(He(this.filename,Ee)),this.db=L(Ee,"i32"),fe},oe.prototype.close=function(){this.db!==null&&(Object.values(this.Ya).forEach((function(fe){fe.free()})),Object.values(this.Qa).forEach(B),this.Qa={},this.handleError(Ct(this.db)),En("/"+this.filename),this.db=null)},oe.prototype.handleError=function(fe){if(fe===0)return null;throw fe=Br(this.db),Error(fe)},oe.prototype.getRowsModified=function(){return Wt(this.db)},oe.prototype.create_function=function(fe,ge){Object.prototype.hasOwnProperty.call(this.Qa,fe)&&(B(this.Qa[fe]),delete this.Qa[fe]);var Le=(function(Oe){if(!C){C=new WeakMap;for(var gt=D.length,Tt=0;Tt<0+gt;Tt++){var Ot=D.get(Tt);Ot&&C.set(Ot,Tt)}}if(C.has(Oe))return C.get(Oe);if(R.length)gt=R.pop();else{try{D.grow(1)}catch(Et){throw Et instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Et}gt=D.length-1}try{D.set(gt,Oe)}catch(Et){if(!(Et instanceof TypeError))throw Et;if(typeof WebAssembly.Function=="function"){Ot={i:"i32",j:"i64",f:"f32",d:"f64"};var Pt={parameters:[],results:[]};for(Tt=1;4>Tt;++Tt)Pt.parameters.push(Ot["viii"[Tt]]);Tt=new WebAssembly.Function(Pt,Oe)}else{for(Pt={i:127,j:126,f:125,d:124},(Ot=[1,0,1,96]).push(3),Tt=0;3>Tt;++Tt)Ot.push(Pt["iii"[Tt]]);Ot.push(0),Ot[1]=Ot.length-2,Tt=new Uint8Array([0,97,115,109,1,0,0,0].concat(Ot,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),Tt=new WebAssembly.Module(Tt),Tt=new WebAssembly.Instance(Tt,{e:{f:Oe}}).exports.f}D.set(gt,Tt)}return C.set(Oe,gt),gt})((function(Oe,gt,Tt){for(var Ot,Pt=[],Et=0;Et<gt;Et+=1){var Ht=L(Tt+4*Et,"i32"),w=rr(Ht);if(w===1||w===2)Ht=vn(Ht);else if(w===3)Ht=Mn(Ht);else if(w===4){Ht=ir(w=Ht),w=wn(w);for(var N=new Uint8Array(Ht),U=0;U<Ht;U+=1)N[U]=ce[w+U];Ht=N}else Ht=null;Pt.push(Ht)}try{Ot=ge.apply(null,Pt)}catch(K){return void re(Oe,K,-1)}switch(typeof Ot){case"boolean":H(Oe,Ot?1:0);break;case"number":Ir(Oe,Ot);break;case"string":I(Oe,Ot,-1,-1);break;case"object":Ot===null?v(Oe):Ot.length!=null?(gt=$(Ot),j(Oe,gt,Ot.length,-1),Pn(gt)):re(Oe,"Wrong API use : tried to return a value of an unknown type ("+Ot+").",-1);break;default:v(Oe)}}));return this.Qa[fe]=Le,this.handleError(Kt(this.db,fe,ge.length,1,0,Le,0,0,0)),this},s.Database=oe};var n,t,i,u,f,p,y=Object.assign({},s),g="./this.program",b=typeof window=="object",E=typeof importScripts=="function",x=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",M="";x?(M=E?requirePathBrowserify().dirname(M)+"/":__dirname+"/",p=()=>{f||(u=require$$5,f=requirePathBrowserify())},n=function(k,X){return p(),k=f.normalize(k),u.readFileSync(k,X?void 0:"utf8")},i=k=>((k=n(k,!0)).buffer||(k=new Uint8Array(k)),k),t=(k,X,oe)=>{p(),k=f.normalize(k),u.readFile(k,(function(Ee,Re){Ee?oe(Ee):X(Re.buffer)}))},1<process.argv.length&&(g=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),_!==void 0&&(_.exports=s),s.inspect=function(){return"[Emscripten Module object]"}):(b||E)&&(E?M=self.location.href:typeof document<"u"&&document.currentScript&&(M=document.currentScript.src),M=M.indexOf("blob:")!==0?M.substr(0,M.replace(/[?#].*/,"").lastIndexOf("/")+1):"",n=k=>{var X=new XMLHttpRequest;return X.open("GET",k,!1),X.send(null),X.responseText},E&&(i=k=>{var X=new XMLHttpRequest;return X.open("GET",k,!1),X.responseType="arraybuffer",X.send(null),new Uint8Array(X.response)}),t=(k,X,oe)=>{var Ee=new XMLHttpRequest;Ee.open("GET",k,!0),Ee.responseType="arraybuffer",Ee.onload=()=>{Ee.status==200||Ee.status==0&&Ee.response?X(Ee.response):oe()},Ee.onerror=oe,Ee.send(null)});var S=s.print||console.log.bind(console),O=s.printErr||console.warn.bind(console);Object.assign(s,y),y=null,s.thisProgram&&(g=s.thisProgram);var C,T,R=[];function B(k){C.delete(D.get(k)),R.push(k)}function z(k){var X="i32";switch(X.charAt(X.length-1)==="*"&&(X="i32"),X){case"i1":case"i8":ce[k>>0]=0;break;case"i16":Ae[k>>1]=0;break;case"i32":we[k>>2]=0;break;case"i64":ht=[0,(Ye=0,1<=+Math.abs(Ye)?0<Ye?(0|Math.min(+Math.floor(Ye/4294967296),4294967295))>>>0:~~+Math.ceil((Ye-+(~~Ye>>>0))/4294967296)>>>0:0)],we[k>>2]=ht[0],we[k+4>>2]=ht[1];break;case"float":Xe[k>>2]=0;break;case"double":Ve[k>>3]=0;break;default:ne("invalid type for setValue: "+X)}}function L(k,X="i8"){switch(X.charAt(X.length-1)==="*"&&(X="i32"),X){case"i1":case"i8":return ce[k>>0];case"i16":return Ae[k>>1];case"i32":case"i64":return we[k>>2];case"float":return Xe[k>>2];case"double":return Number(Ve[k>>3]);default:ne("invalid type for getValue: "+X)}return null}s.wasmBinary&&(T=s.wasmBinary),s.noExitRuntime,typeof WebAssembly!="object"&&ne("no native wasm support detected");var Y,ie=!1;function $(k){var X=Gn(k.length);return k.subarray||k.slice||(k=new Uint8Array(k)),be.set(k,X),X}var Q,ce,be,Ae,we,Xe,Ve,st=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function tt(k,X,oe){var Ee=X+oe;for(oe=X;k[oe]&&!(oe>=Ee);)++oe;if(16<oe-X&&k.buffer&&st)return st.decode(k.subarray(X,oe));for(Ee="";X<oe;){var Re=k[X++];if(128&Re){var He=63&k[X++];if((224&Re)==192)Ee+=String.fromCharCode((31&Re)<<6|He);else{var Ct=63&k[X++];65536>(Re=(240&Re)==224?(15&Re)<<12|He<<6|Ct:(7&Re)<<18|He<<12|Ct<<6|63&k[X++])?Ee+=String.fromCharCode(Re):(Re-=65536,Ee+=String.fromCharCode(55296|Re>>10,56320|1023&Re))}}else Ee+=String.fromCharCode(Re)}return Ee}function he(k,X){return k?tt(be,k,X):""}function de(k,X,oe,Ee){if(!(0<Ee))return 0;var Re=oe;Ee=oe+Ee-1;for(var He=0;He<k.length;++He){var Ct=k.charCodeAt(He);if(55296<=Ct&&57343>=Ct&&(Ct=65536+((1023&Ct)<<10)|1023&k.charCodeAt(++He)),127>=Ct){if(oe>=Ee)break;X[oe++]=Ct}else{if(2047>=Ct){if(oe+1>=Ee)break;X[oe++]=192|Ct>>6}else{if(65535>=Ct){if(oe+2>=Ee)break;X[oe++]=224|Ct>>12}else{if(oe+3>=Ee)break;X[oe++]=240|Ct>>18,X[oe++]=128|Ct>>12&63}X[oe++]=128|Ct>>6&63}X[oe++]=128|63&Ct}}return X[oe]=0,oe-Re}function ze(k){for(var X=0,oe=0;oe<k.length;++oe){var Ee=k.charCodeAt(oe);55296<=Ee&&57343>=Ee&&(Ee=65536+((1023&Ee)<<10)|1023&k.charCodeAt(++oe)),127>=Ee?++X:X=2047>=Ee?X+2:65535>=Ee?X+3:X+4}return X}function P(k){var X=ze(k)+1,oe=Gn(X);return oe&&de(k,ce,oe,X),oe}function A(){var k=Y.buffer;Q=k,s.HEAP8=ce=new Int8Array(k),s.HEAP16=Ae=new Int16Array(k),s.HEAP32=we=new Int32Array(k),s.HEAPU8=be=new Uint8Array(k),s.HEAPU16=new Uint16Array(k),s.HEAPU32=new Uint32Array(k),s.HEAPF32=Xe=new Float32Array(k),s.HEAPF64=Ve=new Float64Array(k)}var D,W=[],ae=[],le=[];function Ne(){var k=s.preRun.shift();W.unshift(k)}var De,Ye,ht,F=0,V=null;function ne(k){throw s.onAbort&&s.onAbort(k),O(k="Aborted("+k+")"),ie=!0,new WebAssembly.RuntimeError(k+". Build with -s ASSERTIONS=1 for more info.")}function Se(){return De.startsWith("data:application/octet-stream;base64,")}if(s.preloadedImages={},s.preloadedAudios={},De="sql-wasm.wasm",!Se()){var Ie=De;De=s.locateFile?s.locateFile(Ie,M):M+Ie}function ke(){var k=De;try{if(k==De&&T)return new Uint8Array(T);if(i)return i(k);throw"both async and sync fetching of the wasm failed"}catch(X){ne(X)}}function $e(k){for(;0<k.length;){var X=k.shift();if(typeof X=="function")X(s);else{var oe=X.Ib;typeof oe=="number"?X.eb===void 0?D.get(oe)():D.get(oe)(X.eb):oe(X.eb===void 0?null:X.eb)}}}function xt(k,X){for(var oe=0,Ee=k.length-1;0<=Ee;Ee--){var Re=k[Ee];Re==="."?k.splice(Ee,1):Re===".."?(k.splice(Ee,1),oe++):oe&&(k.splice(Ee,1),oe--)}if(X)for(;oe;oe--)k.unshift("..");return k}function At(k){var X=k.charAt(0)==="/",oe=k.substr(-1)==="/";return(k=xt(k.split("/").filter((function(Ee){return!!Ee})),!X).join("/"))||X||(k="."),k&&oe&&(k+="/"),(X?"/":"")+k}function Bt(k){var X=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(k).slice(1);return k=X[0],X=X[1],k||X?(X&&(X=X.substr(0,X.length-1)),k+X):"."}function Rt(k){if(k==="/")return"/";var X=(k=(k=At(k)).replace(/\/$/,"")).lastIndexOf("/");return X===-1?k:k.substr(X+1)}function Gt(){for(var k="",X=!1,oe=arguments.length-1;-1<=oe&&!X;oe--){if(typeof(X=0<=oe?arguments[oe]:"/")!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!X)return"";k=X+"/"+k,X=X.charAt(0)==="/"}return(X?"/":"")+(k=xt(k.split("/").filter((function(Ee){return!!Ee})),!X).join("/"))||"."}var _n=[];function fn(k,X){_n[k]={input:[],output:[],Wa:X},xn(k,pt)}var ln,rt,dt,Qe,pt={open:function(k){var X=_n[k.node.rdev];if(!X)throw new ye(43);k.tty=X,k.seekable=!1},close:function(k){k.tty.Wa.flush(k.tty)},flush:function(k){k.tty.Wa.flush(k.tty)},read:function(k,X,oe,Ee){if(!k.tty||!k.tty.Wa.sb)throw new ye(60);for(var Re=0,He=0;He<Ee;He++){try{var Ct=k.tty.Wa.sb(k.tty)}catch{throw new ye(29)}if(Ct===void 0&&Re===0)throw new ye(6);if(Ct==null)break;Re++,X[oe+He]=Ct}return Re&&(k.node.timestamp=Date.now()),Re},write:function(k,X,oe,Ee){if(!k.tty||!k.tty.Wa.ib)throw new ye(60);try{for(var Re=0;Re<Ee;Re++)k.tty.Wa.ib(k.tty,X[oe+Re])}catch{throw new ye(29)}return Ee&&(k.node.timestamp=Date.now()),Re}},mt={sb:function(k){if(!k.input.length){var X=null;if(x){var oe=Buffer.alloc(256),Ee=0;try{Ee=u.readSync(process.stdin.fd,oe,0,256,-1)}catch(Re){if(!Re.toString().includes("EOF"))throw Re;Ee=0}X=0<Ee?oe.slice(0,Ee).toString("utf-8"):null}else typeof window<"u"&&typeof window.prompt=="function"?(X=window.prompt("Input: "))!==null&&(X+=`
`):typeof readline=="function"&&(X=readline())!==null&&(X+=`
`);if(!X)return null;k.input=On(X,!0)}return k.input.shift()},ib:function(k,X){X===null||X===10?(S(tt(k.output,0)),k.output=[]):X!=0&&k.output.push(X)},flush:function(k){k.output&&0<k.output.length&&(S(tt(k.output,0)),k.output=[])}},Nt={ib:function(k,X){X===null||X===10?(O(tt(k.output,0)),k.output=[]):X!=0&&k.output.push(X)},flush:function(k){k.output&&0<k.output.length&&(O(tt(k.output,0)),k.output=[])}},lt={Oa:null,Pa:function(){return lt.createNode(null,"/",16895,0)},createNode:function(k,X,oe,Ee){if((61440&oe)==24576||(61440&oe)==4096)throw new ye(63);return lt.Oa||(lt.Oa={dir:{node:{Na:lt.Fa.Na,Ma:lt.Fa.Ma,lookup:lt.Fa.lookup,Za:lt.Fa.Za,rename:lt.Fa.rename,unlink:lt.Fa.unlink,rmdir:lt.Fa.rmdir,readdir:lt.Fa.readdir,symlink:lt.Fa.symlink},stream:{Sa:lt.Ga.Sa}},file:{node:{Na:lt.Fa.Na,Ma:lt.Fa.Ma},stream:{Sa:lt.Ga.Sa,read:lt.Ga.read,write:lt.Ga.write,kb:lt.Ga.kb,$a:lt.Ga.$a,ab:lt.Ga.ab}},link:{node:{Na:lt.Fa.Na,Ma:lt.Fa.Ma,readlink:lt.Fa.readlink},stream:{}},ob:{node:{Na:lt.Fa.Na,Ma:lt.Fa.Ma},stream:hn}}),(61440&(oe=_t(k,X,oe,Ee)).mode)==16384?(oe.Fa=lt.Oa.dir.node,oe.Ga=lt.Oa.dir.stream,oe.Ha={}):(61440&oe.mode)==32768?(oe.Fa=lt.Oa.file.node,oe.Ga=lt.Oa.file.stream,oe.La=0,oe.Ha=null):(61440&oe.mode)==40960?(oe.Fa=lt.Oa.link.node,oe.Ga=lt.Oa.link.stream):(61440&oe.mode)==8192&&(oe.Fa=lt.Oa.ob.node,oe.Ga=lt.Oa.ob.stream),oe.timestamp=Date.now(),k&&(k.Ha[X]=oe,k.timestamp=oe.timestamp),oe},Jb:function(k){return k.Ha?k.Ha.subarray?k.Ha.subarray(0,k.La):new Uint8Array(k.Ha):new Uint8Array(0)},pb:function(k,X){var oe=k.Ha?k.Ha.length:0;oe>=X||(X=Math.max(X,oe*(1048576>oe?2:1.125)>>>0),oe!=0&&(X=Math.max(X,256)),oe=k.Ha,k.Ha=new Uint8Array(X),0<k.La&&k.Ha.set(oe.subarray(0,k.La),0))},Fb:function(k,X){if(k.La!=X)if(X==0)k.Ha=null,k.La=0;else{var oe=k.Ha;k.Ha=new Uint8Array(X),oe&&k.Ha.set(oe.subarray(0,Math.min(X,k.La))),k.La=X}},Fa:{Na:function(k){var X={};return X.dev=(61440&k.mode)==8192?k.id:1,X.ino=k.id,X.mode=k.mode,X.nlink=1,X.uid=0,X.gid=0,X.rdev=k.rdev,(61440&k.mode)==16384?X.size=4096:(61440&k.mode)==32768?X.size=k.La:(61440&k.mode)==40960?X.size=k.link.length:X.size=0,X.atime=new Date(k.timestamp),X.mtime=new Date(k.timestamp),X.ctime=new Date(k.timestamp),X.zb=4096,X.blocks=Math.ceil(X.size/X.zb),X},Ma:function(k,X){X.mode!==void 0&&(k.mode=X.mode),X.timestamp!==void 0&&(k.timestamp=X.timestamp),X.size!==void 0&&lt.Fb(k,X.size)},lookup:function(){throw Fe[44]},Za:function(k,X,oe,Ee){return lt.createNode(k,X,oe,Ee)},rename:function(k,X,oe){if((61440&k.mode)==16384){try{var Ee=ot(X,oe)}catch{}if(Ee)for(var Re in Ee.Ha)throw new ye(55)}delete k.parent.Ha[k.name],k.parent.timestamp=Date.now(),k.name=oe,X.Ha[oe]=k,X.timestamp=k.parent.timestamp,k.parent=X},unlink:function(k,X){delete k.Ha[X],k.timestamp=Date.now()},rmdir:function(k,X){var oe,Ee=ot(k,X);for(oe in Ee.Ha)throw new ye(55);delete k.Ha[X],k.timestamp=Date.now()},readdir:function(k){var X,oe=[".",".."];for(X in k.Ha)k.Ha.hasOwnProperty(X)&&oe.push(X);return oe},symlink:function(k,X,oe){return(k=lt.createNode(k,X,41471,0)).link=oe,k},readlink:function(k){if((61440&k.mode)!=40960)throw new ye(28);return k.link}},Ga:{read:function(k,X,oe,Ee,Re){var He=k.node.Ha;if(Re>=k.node.La)return 0;if(8<(k=Math.min(k.node.La-Re,Ee))&&He.subarray)X.set(He.subarray(Re,Re+k),oe);else for(Ee=0;Ee<k;Ee++)X[oe+Ee]=He[Re+Ee];return k},write:function(k,X,oe,Ee,Re,He){if(X.buffer===ce.buffer&&(He=!1),!Ee)return 0;if((k=k.node).timestamp=Date.now(),X.subarray&&(!k.Ha||k.Ha.subarray)){if(He)return k.Ha=X.subarray(oe,oe+Ee),k.La=Ee;if(k.La===0&&Re===0)return k.Ha=X.slice(oe,oe+Ee),k.La=Ee;if(Re+Ee<=k.La)return k.Ha.set(X.subarray(oe,oe+Ee),Re),Ee}if(lt.pb(k,Re+Ee),k.Ha.subarray&&X.subarray)k.Ha.set(X.subarray(oe,oe+Ee),Re);else for(He=0;He<Ee;He++)k.Ha[Re+He]=X[oe+He];return k.La=Math.max(k.La,Re+Ee),Ee},Sa:function(k,X,oe){if(oe===1?X+=k.position:oe===2&&(61440&k.node.mode)==32768&&(X+=k.node.La),0>X)throw new ye(28);return X},kb:function(k,X,oe){lt.pb(k.node,X+oe),k.node.La=Math.max(k.node.La,X+oe)},$a:function(k,X,oe,Ee,Re,He){if(X!==0)throw new ye(28);if((61440&k.node.mode)!=32768)throw new ye(43);if(k=k.node.Ha,2&He||k.buffer!==Q){if((0<Ee||Ee+oe<k.length)&&(k=k.subarray?k.subarray(Ee,Ee+oe):Array.prototype.slice.call(k,Ee,Ee+oe)),Ee=!0,oe=65536*Math.ceil(oe/65536),(He=Vn(65536,oe))?(be.fill(0,He,He+oe),oe=He):oe=0,!oe)throw new ye(48);ce.set(k,oe)}else Ee=!1,oe=k.byteOffset;return{Eb:oe,ub:Ee}},ab:function(k,X,oe,Ee,Re){if((61440&k.node.mode)!=32768)throw new ye(43);return 2&Re||lt.Ga.write(k,X,0,Ee,oe,!1),0}}},on=null,bn={},Ge=[],pe=1,Te=null,Me=!0,ye=null,Fe={},qe=(k,X={})=>{if(!(k=Gt("/",k)))return{path:"",node:null};if(8<(X=Object.assign({qb:!0,jb:0},X)).jb)throw new ye(32);k=xt(k.split("/").filter((Ct=>!!Ct)),!1);for(var oe=on,Ee="/",Re=0;Re<k.length;Re++){var He=Re===k.length-1;if(He&&X.parent)break;if(oe=ot(oe,k[Re]),Ee=At(Ee+"/"+k[Re]),oe.Ua&&(!He||He&&X.qb)&&(oe=oe.Ua.root),!He||X.Ra){for(He=0;(61440&oe.mode)==40960;)if(oe=Sn(Ee),Ee=Gt(Bt(Ee),oe),oe=qe(Ee,{jb:X.jb+1}).node,40<He++)throw new ye(32)}}return{path:Ee,node:oe}},je=k=>{for(var X;;){if(k===k.parent)return k=k.Pa.tb,X?k[k.length-1]!=="/"?k+"/"+X:k+X:k;X=X?k.name+"/"+X:k.name,k=k.parent}},ft=(k,X)=>{for(var oe=0,Ee=0;Ee<X.length;Ee++)oe=(oe<<5)-oe+X.charCodeAt(Ee)|0;return(k+oe>>>0)%Te.length},nt=k=>{var X=ft(k.parent.id,k.name);if(Te[X]===k)Te[X]=k.Va;else for(X=Te[X];X;){if(X.Va===k){X.Va=k.Va;break}X=X.Va}},ot=(k,X)=>{var oe;if(oe=(oe=Vt(k,"x"))?oe:k.Fa.lookup?0:2)throw new ye(oe,k);for(oe=Te[ft(k.id,X)];oe;oe=oe.Va){var Ee=oe.name;if(oe.parent.id===k.id&&Ee===X)return oe}return k.Fa.lookup(k,X)},_t=(k,X,oe,Ee)=>(k=new sr(k,X,oe,Ee),X=ft(k.parent.id,k.name),k.Va=Te[X],Te[X]=k),Ft={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Ut=k=>{var X=["r","w","rw"][3&k];return 512&k&&(X+="w"),X},Vt=(k,X)=>Me?0:!X.includes("r")||292&k.mode?X.includes("w")&&!(146&k.mode)||X.includes("x")&&!(73&k.mode)?2:0:2,$t=(k,X)=>{try{return ot(k,X),20}catch{}return Vt(k,"wx")},an=(k,X,oe)=>{try{var Ee=ot(k,X)}catch(Re){return Re.Ja}if(k=Vt(k,"wx"))return k;if(oe){if((61440&Ee.mode)!=16384)return 54;if(Ee===Ee.parent||je(Ee)==="/")return 10}else if((61440&Ee.mode)==16384)return 31;return 0},hn={open:k=>{k.Ga=bn[k.node.rdev].Ga,k.Ga.open&&k.Ga.open(k)},Sa:()=>{throw new ye(70)}},xn=(k,X)=>{bn[k]={Ga:X}},Qt=(k,X)=>{var oe=X==="/",Ee=!X;if(oe&&on)throw new ye(10);if(!oe&&!Ee){var Re=qe(X,{qb:!1});if(X=Re.path,(Re=Re.node).Ua)throw new ye(10);if((61440&Re.mode)!=16384)throw new ye(54)}X={type:k,Kb:{},tb:X,Db:[]},(k=k.Pa(X)).Pa=X,X.root=k,oe?on=k:Re&&(Re.Ua=X,Re.Pa&&Re.Pa.Db.push(X))},Jt=(k,X,oe)=>{var Ee=qe(k,{parent:!0}).node;if(!(k=Rt(k))||k==="."||k==="..")throw new ye(28);var Re=$t(Ee,k);if(Re)throw new ye(Re);if(!Ee.Fa.Za)throw new ye(63);return Ee.Fa.Za(Ee,k,X,oe)},nn=(k,X)=>Jt(k,1023&(X!==void 0?X:511)|16384,0),en=(k,X,oe)=>{oe===void 0&&(oe=X,X=438),Jt(k,8192|X,oe)},Zt=(k,X)=>{if(!Gt(k))throw new ye(44);var oe=qe(X,{parent:!0}).node;if(!oe)throw new ye(44);X=Rt(X);var Ee=$t(oe,X);if(Ee)throw new ye(Ee);if(!oe.Fa.symlink)throw new ye(63);oe.Fa.symlink(oe,X,k)},yn=k=>{var X=qe(k,{parent:!0}).node;k=Rt(k);var oe=ot(X,k),Ee=an(X,k,!0);if(Ee)throw new ye(Ee);if(!X.Fa.rmdir)throw new ye(63);if(oe.Ua)throw new ye(10);X.Fa.rmdir(X,k),nt(oe)},En=k=>{var X=qe(k,{parent:!0}).node;if(!X)throw new ye(44);k=Rt(k);var oe=ot(X,k),Ee=an(X,k,!1);if(Ee)throw new ye(Ee);if(!X.Fa.unlink)throw new ye(63);if(oe.Ua)throw new ye(10);X.Fa.unlink(X,k),nt(oe)},Sn=k=>{if(!(k=qe(k).node))throw new ye(44);if(!k.Fa.readlink)throw new ye(28);return Gt(je(k.parent),k.Fa.readlink(k))},zn=(k,X)=>{if(!(k=qe(k,{Ra:!X}).node))throw new ye(44);if(!k.Fa.Na)throw new ye(63);return k.Fa.Na(k)},gn=k=>zn(k,!0),Kn=(k,X)=>{if(!(k=typeof k=="string"?qe(k,{Ra:!0}).node:k).Fa.Ma)throw new ye(63);k.Fa.Ma(k,{mode:4095&X|-4096&k.mode,timestamp:Date.now()})},Qn=(k,X)=>{if(0>X)throw new ye(28);if(!(k=typeof k=="string"?qe(k,{Ra:!0}).node:k).Fa.Ma)throw new ye(63);if((61440&k.mode)==16384)throw new ye(31);if((61440&k.mode)!=32768)throw new ye(28);var oe=Vt(k,"w");if(oe)throw new ye(oe);k.Fa.Ma(k,{size:X,timestamp:Date.now()})},kn=(k,X,oe,Ee)=>{if(k==="")throw new ye(44);if(typeof X=="string"){var Re=Ft[X];if(Re===void 0)throw Error("Unknown file open mode: "+X);X=Re}if(oe=64&X?4095&(oe===void 0?438:oe)|32768:0,typeof k=="object")var He=k;else{k=At(k);try{He=qe(k,{Ra:!(131072&X)}).node}catch{}}if(Re=!1,64&X)if(He){if(128&X)throw new ye(20)}else He=Jt(k,oe,0),Re=!0;if(!He)throw new ye(44);if((61440&He.mode)==8192&&(X&=-513),65536&X&&(61440&He.mode)!=16384)throw new ye(54);if(!Re&&(oe=He?(61440&He.mode)==40960?32:(61440&He.mode)==16384&&(Ut(X)!=="r"||512&X)?31:Vt(He,Ut(X)):44))throw new ye(oe);return 512&X&&Qn(He,0),X&=-131713,(Ee=((Ct,jt)=>(dt||((dt=function(){}).prototype={}),Ct=Object.assign(new dt,Ct),jt=((Wt=0,tn=4096)=>{for(;Wt<=tn;Wt++)if(!Ge[Wt])return Wt;throw new ye(33)})(jt,void 0),Ct.fd=jt,Ge[jt]=Ct))({node:He,path:je(He),flags:X,seekable:!0,position:0,Ga:He.Ga,Hb:[],error:!1},Ee)).Ga.open&&Ee.Ga.open(Ee),!s.logReadFiles||1&X||(Qe||(Qe={}),k in Qe||(Qe[k]=1)),Ee},Tr=k=>{if(k.fd===null)throw new ye(8);k.gb&&(k.gb=null);try{k.Ga.close&&k.Ga.close(k)}catch(X){throw X}finally{Ge[k.fd]=null}k.fd=null},lr=(k,X,oe)=>{if(k.fd===null)throw new ye(8);if(!k.seekable||!k.Ga.Sa)throw new ye(70);if(oe!=0&&oe!=1&&oe!=2)throw new ye(28);k.position=k.Ga.Sa(k,X,oe),k.Hb=[]},cr=(k,X,oe,Ee,Re)=>{if(0>Ee||0>Re)throw new ye(28);if(k.fd===null)throw new ye(8);if((2097155&k.flags)==1)throw new ye(8);if((61440&k.node.mode)==16384)throw new ye(31);if(!k.Ga.read)throw new ye(28);var He=Re!==void 0;if(He){if(!k.seekable)throw new ye(70)}else Re=k.position;return X=k.Ga.read(k,X,oe,Ee,Re),He||(k.position+=X),X},Lr=(k,X,oe,Ee,Re,He)=>{if(0>Ee||0>Re)throw new ye(28);if(k.fd===null)throw new ye(8);if((2097155&k.flags)==0)throw new ye(8);if((61440&k.node.mode)==16384)throw new ye(31);if(!k.Ga.write)throw new ye(28);k.seekable&&1024&k.flags&&lr(k,0,2);var Ct=Re!==void 0;if(Ct){if(!k.seekable)throw new ye(70)}else Re=k.position;return X=k.Ga.write(k,X,oe,Ee,Re,He),Ct||(k.position+=X),X},Ur=k=>{var X,oe=kn(k,oe||0);k=zn(k).size;var Ee=new Uint8Array(k);return cr(oe,Ee,0,k,0),X=Ee,Tr(oe),X},Sr=()=>{ye||((ye=function(k,X){this.node=X,this.Gb=function(oe){this.Ja=oe},this.Gb(k),this.message="FS error"}).prototype=Error(),ye.prototype.constructor=ye,[44].forEach((k=>{Fe[k]=new ye(k),Fe[k].stack="<generic error, no stack>"})))},Dr=(k,X)=>{var oe=0;return k&&(oe|=365),X&&(oe|=146),oe},fr=(k,X,oe)=>{k=At("/dev/"+k);var Ee=Dr(!!X,!!oe);rt||(rt=64);var Re=rt++<<8|0;xn(Re,{open:He=>{He.seekable=!1},close:()=>{oe&&oe.buffer&&oe.buffer.length&&oe(10)},read:(He,Ct,jt,Wt)=>{for(var tn=0,Tn=0;Tn<Wt;Tn++){try{var mn=X()}catch{throw new ye(29)}if(mn===void 0&&tn===0)throw new ye(6);if(mn==null)break;tn++,Ct[jt+Tn]=mn}return tn&&(He.node.timestamp=Date.now()),tn},write:(He,Ct,jt,Wt)=>{for(var tn=0;tn<Wt;tn++)try{oe(Ct[jt+tn])}catch{throw new ye(29)}return Wt&&(He.node.timestamp=Date.now()),tn}}),en(k,Ee,Re)},pn={};function ar(k,X,oe){if(X[0]==="/")return X;if(k===-100)k="/";else{if(!(k=Ge[k]))throw new ye(8);k=k.path}if(X.length==0){if(!oe)throw new ye(44);return k}return At(k+"/"+X)}function hr(k,X,oe){try{var Ee=k(X)}catch(Re){if(Re&&Re.node&&At(X)!==At(je(Re.node)))return-54;throw Re}return we[oe>>2]=Ee.dev,we[oe+4>>2]=0,we[oe+8>>2]=Ee.ino,we[oe+12>>2]=Ee.mode,we[oe+16>>2]=Ee.nlink,we[oe+20>>2]=Ee.uid,we[oe+24>>2]=Ee.gid,we[oe+28>>2]=Ee.rdev,we[oe+32>>2]=0,ht=[Ee.size>>>0,(Ye=Ee.size,1<=+Math.abs(Ye)?0<Ye?(0|Math.min(+Math.floor(Ye/4294967296),4294967295))>>>0:~~+Math.ceil((Ye-+(~~Ye>>>0))/4294967296)>>>0:0)],we[oe+40>>2]=ht[0],we[oe+44>>2]=ht[1],we[oe+48>>2]=4096,we[oe+52>>2]=Ee.blocks,we[oe+56>>2]=Ee.atime.getTime()/1e3|0,we[oe+60>>2]=0,we[oe+64>>2]=Ee.mtime.getTime()/1e3|0,we[oe+68>>2]=0,we[oe+72>>2]=Ee.ctime.getTime()/1e3|0,we[oe+76>>2]=0,ht=[Ee.ino>>>0,(Ye=Ee.ino,1<=+Math.abs(Ye)?0<Ye?(0|Math.min(+Math.floor(Ye/4294967296),4294967295))>>>0:~~+Math.ceil((Ye-+(~~Ye>>>0))/4294967296)>>>0:0)],we[oe+80>>2]=ht[0],we[oe+84>>2]=ht[1],0}var pr,Mr=void 0;function tr(){return we[(Mr+=4)-4>>2]}function Un(k){if(!(k=Ge[k]))throw new ye(8);return k}pr=x?()=>{var k=process.hrtime();return 1e3*k[0]+k[1]/1e6}:()=>performance.now();var nr,Rn={};function dr(){if(!nr){var k,X={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"};for(k in Rn)Rn[k]===void 0?delete X[k]:X[k]=Rn[k];var oe=[];for(k in X)oe.push(k+"="+X[k]);nr=oe}return nr}function sr(k,X,oe,Ee){k||(k=this),this.parent=k,this.Pa=k.Pa,this.Ua=null,this.id=pe++,this.name=X,this.mode=oe,this.Fa={},this.Ga={},this.rdev=Ee}function On(k,X){var oe=Array(ze(k)+1);return k=de(k,oe,0,oe.length),X&&(oe.length=k),oe}Object.defineProperties(sr.prototype,{read:{get:function(){return(365&this.mode)==365},set:function(k){k?this.mode|=365:this.mode&=-366}},write:{get:function(){return(146&this.mode)==146},set:function(k){k?this.mode|=146:this.mode&=-147}}}),Sr(),Te=Array(4096),Qt(lt,"/"),nn("/tmp"),nn("/home"),nn("/home/web_user"),(()=>{nn("/dev"),xn(259,{read:()=>0,write:(X,oe,Ee,Re)=>Re}),en("/dev/null",259),fn(1280,mt),fn(1536,Nt),en("/dev/tty",1280),en("/dev/tty1",1536);var k=(function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var X=new Uint8Array(1);return function(){return crypto.getRandomValues(X),X[0]}}if(x)try{var oe=require$$5;return function(){return oe.randomBytes(1)[0]}}catch{}return function(){ne("randomDevice")}})();fr("random",k),fr("urandom",k),nn("/dev/shm"),nn("/dev/shm/tmp")})(),(()=>{nn("/proc");var k=nn("/proc/self");nn("/proc/self/fd"),Qt({Pa:()=>{var X=_t(k,"fd",16895,73);return X.Fa={lookup:(oe,Ee)=>{var Re=Ge[+Ee];if(!Re)throw new ye(8);return(oe={parent:null,Pa:{tb:"fake"},Fa:{readlink:()=>Re.path}}).parent=oe}},X}},"/proc/self/fd")})();var mr={a:function(k,X,oe,Ee){ne("Assertion failed: "+he(k)+", at: "+[X?he(X):"unknown filename",oe,Ee?he(Ee):"unknown function"])},h:function(k,X){try{return k=he(k),Kn(k,X),0}catch(oe){if(pn===void 0||!(oe instanceof ye))throw oe;return-oe.Ja}},H:function(k,X,oe){try{if(X=ar(k,X=he(X)),-8&oe)var Ee=-28;else{var Re=qe(X,{Ra:!0}).node;Re?(k="",4&oe&&(k+="r"),2&oe&&(k+="w"),1&oe&&(k+="x"),Ee=k&&Vt(Re,k)?-2:0):Ee=-44}return Ee}catch(He){if(pn===void 0||!(He instanceof ye))throw He;return-He.Ja}},i:function(k,X){try{var oe=Ge[k];if(!oe)throw new ye(8);return Kn(oe.node,X),0}catch(Ee){if(pn===void 0||!(Ee instanceof ye))throw Ee;return-Ee.Ja}},g:function(k){try{var X=Ge[k];if(!X)throw new ye(8);var oe=X.node,Ee=typeof oe=="string"?qe(oe,{Ra:!0}).node:oe;if(!Ee.Fa.Ma)throw new ye(63);return Ee.Fa.Ma(Ee,{timestamp:Date.now()}),0}catch(Re){if(pn===void 0||!(Re instanceof ye))throw Re;return-Re.Ja}},b:function(k,X,oe){Mr=oe;try{var Ee=Un(k);switch(X){case 0:var Re=tr();return 0>Re?-28:kn(Ee.path,Ee.flags,0,Re).fd;case 1:case 2:case 6:case 7:return 0;case 3:return Ee.flags;case 4:return Re=tr(),Ee.flags|=Re,0;case 5:return Re=tr(),Ae[Re+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return we[Jn()>>2]=28,-1}}catch(He){if(pn===void 0||!(He instanceof ye))throw He;return-He.Ja}},G:function(k,X){try{var oe=Un(k);return hr(zn,oe.path,X)}catch(Ee){if(pn===void 0||!(Ee instanceof ye))throw Ee;return-Ee.Ja}},B:function(k,X){try{var oe=Ge[k];if(!oe)throw new ye(8);if((2097155&oe.flags)==0)throw new ye(28);return Qn(oe.node,X),0}catch(Ee){if(pn===void 0||!(Ee instanceof ye))throw Ee;return-Ee.Ja}},A:function(k,X){try{return X===0?-28:X<ze("/")+1?-68:(de("/",be,k,X),k)}catch(oe){if(pn===void 0||!(oe instanceof ye))throw oe;return-oe.Ja}},E:function(k,X){try{return k=he(k),hr(gn,k,X)}catch(oe){if(pn===void 0||!(oe instanceof ye))throw oe;return-oe.Ja}},x:function(k,X){try{return(k=At(k=he(k)))[k.length-1]==="/"&&(k=k.substr(0,k.length-1)),nn(k,X),0}catch(oe){if(pn===void 0||!(oe instanceof ye))throw oe;return-oe.Ja}},D:function(k,X,oe,Ee){try{X=he(X);var Re=256&Ee;return X=ar(k,X,4096&Ee),hr(Re?gn:zn,X,oe)}catch(He){if(pn===void 0||!(He instanceof ye))throw He;return-He.Ja}},u:function(k,X,oe,Ee){Mr=Ee;try{X=ar(k,X=he(X));var Re=Ee?tr():0;return kn(X,oe,Re).fd}catch(He){if(pn===void 0||!(He instanceof ye))throw He;return-He.Ja}},s:function(k,X,oe,Ee){try{if(X=ar(k,X=he(X)),0>=Ee)var Re=-28;else{var He=Sn(X),Ct=Math.min(Ee,ze(He)),jt=ce[oe+Ct];de(He,be,oe,Ee+1),ce[oe+Ct]=jt,Re=Ct}return Re}catch(Wt){if(pn===void 0||!(Wt instanceof ye))throw Wt;return-Wt.Ja}},r:function(k){try{return k=he(k),yn(k),0}catch(X){if(pn===void 0||!(X instanceof ye))throw X;return-X.Ja}},F:function(k,X){try{return k=he(k),hr(zn,k,X)}catch(oe){if(pn===void 0||!(oe instanceof ye))throw oe;return-oe.Ja}},o:function(k,X,oe){try{return X=ar(k,X=he(X)),oe===0?En(X):oe===512?yn(X):ne("Invalid flags passed to unlinkat"),0}catch(Ee){if(pn===void 0||!(Ee instanceof ye))throw Ee;return-Ee.Ja}},m:function(k,X,oe){try{if(X=ar(k,X=he(X),!0),oe){var Ee=we[oe>>2],Re=we[oe+4>>2];He=1e3*Ee+Re/1e6,Ct=1e3*(Ee=we[(oe+=8)>>2])+(Re=we[oe+4>>2])/1e6}else var He=Date.now(),Ct=He;k=He;var jt=qe(X,{Ra:!0}).node;return jt.Fa.Ma(jt,{timestamp:Math.max(k,Ct)}),0}catch(Wt){if(pn===void 0||!(Wt instanceof ye))throw Wt;return-Wt.Ja}},e:function(){return Date.now()},j:function(k,X){k=new Date(1e3*we[k>>2]),we[X>>2]=k.getSeconds(),we[X+4>>2]=k.getMinutes(),we[X+8>>2]=k.getHours(),we[X+12>>2]=k.getDate(),we[X+16>>2]=k.getMonth(),we[X+20>>2]=k.getFullYear()-1900,we[X+24>>2]=k.getDay();var oe=new Date(k.getFullYear(),0,1);we[X+28>>2]=(k.getTime()-oe.getTime())/864e5|0,we[X+36>>2]=-60*k.getTimezoneOffset();var Ee=new Date(k.getFullYear(),6,1).getTimezoneOffset();oe=oe.getTimezoneOffset(),we[X+32>>2]=0|(Ee!=oe&&k.getTimezoneOffset()==Math.min(oe,Ee))},v:function(k,X,oe,Ee,Re,He,Ct){try{var jt=Ge[Re];if(!jt)return-8;if((2&oe)!=0&&(2&Ee)==0&&(2097155&jt.flags)!=2)throw new ye(2);if((2097155&jt.flags)==1)throw new ye(2);if(!jt.Ga.$a)throw new ye(43);var Wt=jt.Ga.$a(jt,k,X,He,oe,Ee),tn=Wt.Eb;return we[Ct>>2]=Wt.ub,tn}catch(Tn){if(pn===void 0||!(Tn instanceof ye))throw Tn;return-Tn.Ja}},w:function(k,X,oe,Ee,Re,He){try{var Ct=Ge[Re];if(Ct&&2&oe){var jt=be.slice(k,k+X);Ct&&Ct.Ga.ab&&Ct.Ga.ab(Ct,jt,He,X,Ee)}}catch(Wt){if(pn===void 0||!(Wt instanceof ye))throw Wt;return-Wt.Ja}},n:function k(X,oe,Ee){k.Ab||(k.Ab=!0,(function(Re,He,Ct){function jt(Ln){return(Ln=Ln.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Ln[1]:"GMT"}var Wt=new Date().getFullYear(),tn=new Date(Wt,0,1),Tn=new Date(Wt,6,1);Wt=tn.getTimezoneOffset();var mn=Tn.getTimezoneOffset();we[Re>>2]=60*Math.max(Wt,mn),we[He>>2]=+(Wt!=mn),Re=jt(tn),He=jt(Tn),Re=P(Re),He=P(He),mn<Wt?(we[Ct>>2]=Re,we[Ct+4>>2]=He):(we[Ct>>2]=He,we[Ct+4>>2]=Re)})(X,oe,Ee))},p:function(){return 2147483648},d:pr,c:function(k){var X=be.length;if(2147483648<(k>>>=0))return!1;for(var oe=1;4>=oe;oe*=2){var Ee=X*(1+.2/oe);Ee=Math.min(Ee,k+100663296);var Re=Math;Ee=Math.max(k,Ee),Re=Re.min.call(Re,2147483648,Ee+(65536-Ee%65536)%65536);e:{try{Y.grow(Re-Q.byteLength+65535>>>16),A();var He=1;break e}catch{}He=void 0}if(He)return!0}return!1},y:function(k,X){var oe=0;return dr().forEach((function(Ee,Re){var He=X+oe;for(Re=we[k+4*Re>>2]=He,He=0;He<Ee.length;++He)ce[Re++>>0]=Ee.charCodeAt(He);ce[Re>>0]=0,oe+=Ee.length+1})),0},z:function(k,X){var oe=dr();we[k>>2]=oe.length;var Ee=0;return oe.forEach((function(Re){Ee+=Re.length+1})),we[X>>2]=Ee,0},f:function(k){try{var X=Un(k);return Tr(X),0}catch(oe){if(pn===void 0||!(oe instanceof ye))throw oe;return oe.Ja}},l:function(k,X){try{var oe=Un(k);return ce[X>>0]=oe.tty?2:(61440&oe.mode)==16384?3:(61440&oe.mode)==40960?7:4,0}catch(Ee){if(pn===void 0||!(Ee instanceof ye))throw Ee;return Ee.Ja}},t:function(k,X,oe,Ee){try{e:{for(var Re=Un(k),He=k=0;He<oe;He++){var Ct=we[X+(8*He+4)>>2],jt=cr(Re,ce,we[X+8*He>>2],Ct,void 0);if(0>jt){var Wt=-1;break e}if(k+=jt,jt<Ct)break}Wt=k}return we[Ee>>2]=Wt,0}catch(tn){if(pn===void 0||!(tn instanceof ye))throw tn;return tn.Ja}},k:function(k,X,oe,Ee,Re){try{var He=Un(k);return-9007199254740992>=(k=4294967296*oe+(X>>>0))||9007199254740992<=k?-61:(lr(He,k,Ee),ht=[He.position>>>0,(Ye=He.position,1<=+Math.abs(Ye)?0<Ye?(0|Math.min(+Math.floor(Ye/4294967296),4294967295))>>>0:~~+Math.ceil((Ye-+(~~Ye>>>0))/4294967296)>>>0:0)],we[Re>>2]=ht[0],we[Re+4>>2]=ht[1],He.gb&&k===0&&Ee===0&&(He.gb=null),0)}catch(Ct){if(pn===void 0||!(Ct instanceof ye))throw Ct;return Ct.Ja}},C:function(k){try{var X=Un(k);return X.Ga&&X.Ga.fsync?-X.Ga.fsync(X):0}catch(oe){if(pn===void 0||!(oe instanceof ye))throw oe;return oe.Ja}},q:function(k,X,oe,Ee){try{e:{for(var Re=Un(k),He=k=0;He<oe;He++){var Ct=Lr(Re,ce,we[X+8*He>>2],we[X+(8*He+4)>>2],void 0);if(0>Ct){var jt=-1;break e}k+=Ct}jt=k}return we[Ee>>2]=jt,0}catch(Wt){if(pn===void 0||!(Wt instanceof ye))throw Wt;return Wt.Ja}}};(function(){function k(Re){s.asm=Re.exports,Y=s.asm.I,A(),D=s.asm.za,ae.unshift(s.asm.J),F--,s.monitorRunDependencies&&s.monitorRunDependencies(F),F==0&&V&&(Re=V,V=null,Re())}function X(Re){k(Re.instance)}function oe(Re){return(function(){if(!T&&(b||E)){if(typeof fetch=="function"&&!De.startsWith("file://"))return fetch(De,{credentials:"same-origin"}).then((function(He){if(!He.ok)throw"failed to load wasm binary file at '"+De+"'";return He.arrayBuffer()})).catch((function(){return ke()}));if(t)return new Promise((function(He,Ct){t(De,(function(jt){He(new Uint8Array(jt))}),Ct)}))}return Promise.resolve().then((function(){return ke()}))})().then((function(He){return WebAssembly.instantiate(He,Ee)})).then((function(He){return He})).then(Re,(function(He){O("failed to asynchronously prepare wasm: "+He),ne(He)}))}var Ee={a:mr};if(F++,s.monitorRunDependencies&&s.monitorRunDependencies(F),s.instantiateWasm)try{return s.instantiateWasm(Ee,k)}catch(Re){return O("Module.instantiateWasm callback failed with error: "+Re),!1}T||typeof WebAssembly.instantiateStreaming!="function"||Se()||De.startsWith("file://")||typeof fetch!="function"?oe(X):fetch(De,{credentials:"same-origin"}).then((function(Re){return WebAssembly.instantiateStreaming(Re,Ee).then(X,(function(He){return O("wasm streaming compile failed: "+He),O("falling back to ArrayBuffer instantiation"),oe(X)}))}))})(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm.J).apply(null,arguments)},s._sqlite3_free=function(){return(s._sqlite3_free=s.asm.K).apply(null,arguments)},s._sqlite3_value_double=function(){return(s._sqlite3_value_double=s.asm.L).apply(null,arguments)},s._sqlite3_value_text=function(){return(s._sqlite3_value_text=s.asm.M).apply(null,arguments)};var Jn=s.___errno_location=function(){return(Jn=s.___errno_location=s.asm.N).apply(null,arguments)};s._sqlite3_prepare_v2=function(){return(s._sqlite3_prepare_v2=s.asm.O).apply(null,arguments)},s._sqlite3_step=function(){return(s._sqlite3_step=s.asm.P).apply(null,arguments)},s._sqlite3_finalize=function(){return(s._sqlite3_finalize=s.asm.Q).apply(null,arguments)},s._sqlite3_reset=function(){return(s._sqlite3_reset=s.asm.R).apply(null,arguments)},s._sqlite3_value_int=function(){return(s._sqlite3_value_int=s.asm.S).apply(null,arguments)},s._sqlite3_clear_bindings=function(){return(s._sqlite3_clear_bindings=s.asm.T).apply(null,arguments)},s._sqlite3_value_blob=function(){return(s._sqlite3_value_blob=s.asm.U).apply(null,arguments)},s._sqlite3_value_bytes=function(){return(s._sqlite3_value_bytes=s.asm.V).apply(null,arguments)},s._sqlite3_value_type=function(){return(s._sqlite3_value_type=s.asm.W).apply(null,arguments)},s._sqlite3_result_blob=function(){return(s._sqlite3_result_blob=s.asm.X).apply(null,arguments)},s._sqlite3_result_double=function(){return(s._sqlite3_result_double=s.asm.Y).apply(null,arguments)},s._sqlite3_result_error=function(){return(s._sqlite3_result_error=s.asm.Z).apply(null,arguments)},s._sqlite3_result_int=function(){return(s._sqlite3_result_int=s.asm._).apply(null,arguments)},s._sqlite3_result_int64=function(){return(s._sqlite3_result_int64=s.asm.$).apply(null,arguments)},s._sqlite3_result_null=function(){return(s._sqlite3_result_null=s.asm.aa).apply(null,arguments)},s._sqlite3_result_text=function(){return(s._sqlite3_result_text=s.asm.ba).apply(null,arguments)},s._sqlite3_sql=function(){return(s._sqlite3_sql=s.asm.ca).apply(null,arguments)},s._sqlite3_column_count=function(){return(s._sqlite3_column_count=s.asm.da).apply(null,arguments)},s._sqlite3_data_count=function(){return(s._sqlite3_data_count=s.asm.ea).apply(null,arguments)},s._sqlite3_column_blob=function(){return(s._sqlite3_column_blob=s.asm.fa).apply(null,arguments)},s._sqlite3_column_bytes=function(){return(s._sqlite3_column_bytes=s.asm.ga).apply(null,arguments)},s._sqlite3_column_double=function(){return(s._sqlite3_column_double=s.asm.ha).apply(null,arguments)},s._sqlite3_column_text=function(){return(s._sqlite3_column_text=s.asm.ia).apply(null,arguments)},s._sqlite3_column_type=function(){return(s._sqlite3_column_type=s.asm.ja).apply(null,arguments)},s._sqlite3_column_name=function(){return(s._sqlite3_column_name=s.asm.ka).apply(null,arguments)},s._sqlite3_bind_blob=function(){return(s._sqlite3_bind_blob=s.asm.la).apply(null,arguments)},s._sqlite3_bind_double=function(){return(s._sqlite3_bind_double=s.asm.ma).apply(null,arguments)},s._sqlite3_bind_int=function(){return(s._sqlite3_bind_int=s.asm.na).apply(null,arguments)},s._sqlite3_bind_text=function(){return(s._sqlite3_bind_text=s.asm.oa).apply(null,arguments)},s._sqlite3_bind_parameter_index=function(){return(s._sqlite3_bind_parameter_index=s.asm.pa).apply(null,arguments)},s._sqlite3_normalized_sql=function(){return(s._sqlite3_normalized_sql=s.asm.qa).apply(null,arguments)},s._sqlite3_errmsg=function(){return(s._sqlite3_errmsg=s.asm.ra).apply(null,arguments)},s._sqlite3_exec=function(){return(s._sqlite3_exec=s.asm.sa).apply(null,arguments)},s._sqlite3_changes=function(){return(s._sqlite3_changes=s.asm.ta).apply(null,arguments)},s._sqlite3_close_v2=function(){return(s._sqlite3_close_v2=s.asm.ua).apply(null,arguments)},s._sqlite3_create_function_v2=function(){return(s._sqlite3_create_function_v2=s.asm.va).apply(null,arguments)},s._sqlite3_open=function(){return(s._sqlite3_open=s.asm.wa).apply(null,arguments)};var Gn=s._malloc=function(){return(Gn=s._malloc=s.asm.xa).apply(null,arguments)},Pn=s._free=function(){return(Pn=s._free=s.asm.ya).apply(null,arguments)};s._RegisterExtensionFunctions=function(){return(s._RegisterExtensionFunctions=s.asm.Aa).apply(null,arguments)};var Wn,Vn=s._emscripten_builtin_memalign=function(){return(Vn=s._emscripten_builtin_memalign=s.asm.Ba).apply(null,arguments)},Nn=s.stackSave=function(){return(Nn=s.stackSave=s.asm.Ca).apply(null,arguments)},qn=s.stackRestore=function(){return(qn=s.stackRestore=s.asm.Da).apply(null,arguments)},Xn=s.stackAlloc=function(){return(Xn=s.stackAlloc=s.asm.Ea).apply(null,arguments)};function wr(){function k(){if(!Wn&&(Wn=!0,s.calledRun=!0,!ie)){if(s.noFSInit||ln||(ln=!0,Sr(),s.stdin=s.stdin,s.stdout=s.stdout,s.stderr=s.stderr,s.stdin?fr("stdin",s.stdin):Zt("/dev/tty","/dev/stdin"),s.stdout?fr("stdout",null,s.stdout):Zt("/dev/tty","/dev/stdout"),s.stderr?fr("stderr",null,s.stderr):Zt("/dev/tty1","/dev/stderr"),kn("/dev/stdin",0),kn("/dev/stdout",1),kn("/dev/stderr",1)),Me=!1,$e(ae),s.onRuntimeInitialized&&s.onRuntimeInitialized(),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var X=s.postRun.shift();le.unshift(X)}$e(le)}}if(!(0<F)){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Ne();$e(W),0<F||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),k()}),1)):k())}}if(s.cwrap=function(k,X,oe,Ee){var Re=(oe=oe||[]).every((function(He){return He==="number"}));return X!=="string"&&Re&&!Ee?s["_"+k]:function(){return(function(He,Ct,jt,Wt){var tn={string:function(Fn){var Yn=0;if(Fn!=null&&Fn!==0){var yr=1+(Fn.length<<2);Yn=Xn(yr),de(Fn,be,Yn,yr)}return Yn},array:function(Fn){var Yn=Xn(Fn.length);return ce.set(Fn,Yn),Yn}};He=s["_"+He];var Tn,mn=[],Ln=0;if(Wt)for(var Xt=0;Xt<Wt.length;Xt++){var Bn=tn[jt[Xt]];Bn?(Ln===0&&(Ln=Nn()),mn[Xt]=Bn(Wt[Xt])):mn[Xt]=Wt[Xt]}return Tn=jt=He.apply(null,mn),Ln!==0&&qn(Ln),Ct==="string"?he(Tn):Ct==="boolean"?!!Tn:Tn})(k,X,oe,arguments)}},s.UTF8ToString=he,s.stackSave=Nn,s.stackRestore=qn,s.stackAlloc=Xn,V=function k(){Wn||wr(),Wn||(V=k)},s.run=wr,s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return wr(),a})),o)};typeof l=="object"&&typeof _=="object"?(_.exports=c,_.exports.default=c):typeof l=="object"&&(l.Module=c)},9509:(_,l,o)=>{var c=o(8764),d=c.Buffer;function m(s,a){for(var r in s)a[r]=s[r]}function h(s,a,r){return d(s,a,r)}d.from&&d.alloc&&d.allocUnsafe&&d.allocUnsafeSlow?_.exports=c:(m(c,l),l.Buffer=h),h.prototype=Object.create(d.prototype),m(d,h),h.from=function(s,a,r){if(typeof s=="number")throw new TypeError("Argument must not be a number");return d(s,a,r)},h.alloc=function(s,a,r){if(typeof s!="number")throw new TypeError("Argument must be a number");var n=d(s);return a!==void 0?typeof r=="string"?n.fill(a,r):n.fill(a):n.fill(0),n},h.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return d(s)},h.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return c.SlowBuffer(s)}},6479:(_,l,o)=>{var c;(function(){function d(a,r,n){var t=r.x,i=r.y,u=n.x-t,f=n.y-i;if(u!==0||f!==0){var p=((a.x-t)*u+(a.y-i)*f)/(u*u+f*f);p>1?(t=n.x,i=n.y):p>0&&(t+=u*p,i+=f*p)}return(u=a.x-t)*u+(f=a.y-i)*f}function m(a,r,n,t,i){for(var u,f=t,p=r+1;p<n;p++){var y=d(a[p],a[r],a[n]);y>f&&(u=p,f=y)}f>t&&(u-r>1&&m(a,r,u,t,i),i.push(a[u]),n-u>1&&m(a,u,n,t,i))}function h(a,r){var n=a.length-1,t=[a[0]];return m(a,0,n,r,t),t.push(a[n]),t}function s(a,r,n){if(a.length<=2)return a;var t=r!==void 0?r*r:1;return a=n?a:(function(i,u){for(var f,p,y,g,b,E=i[0],x=[E],M=1,S=i.length;M<S;M++)y=E,(g=(p=f=i[M]).x-y.x)*g+(b=p.y-y.y)*b>u&&(x.push(f),E=f);return E!==f&&x.push(f),x})(a,t),h(a,t)}(c=function(){return s}.call(l,o,l,_))===void 0||(_.exports=c)})()},8501:(_,l,o)=>{var c=o(3570),d=o(5676),m=o(7529),h=o(584),s=o(8575),a=l;a.request=function(r,n){r=typeof r=="string"?s.parse(r):m(r);var t=o.g.location.protocol.search(/^https?:$/)===-1?"http:":"",i=r.protocol||t,u=r.hostname||r.host,f=r.port,p=r.path||"/";u&&u.indexOf(":")!==-1&&(u="["+u+"]"),r.url=(u?i+"//"+u:"")+(f?":"+f:"")+p,r.method=(r.method||"GET").toUpperCase(),r.headers=r.headers||{};var y=new c(r);return n&&y.on("response",n),y},a.get=function(r,n){var t=a.request(r,n);return t.end(),t},a.ClientRequest=c,a.IncomingMessage=d.IncomingMessage,a.Agent=function(){},a.Agent.defaultMaxSockets=4,a.globalAgent=new a.Agent,a.STATUS_CODES=h,a.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},8725:(_,l,o)=>{var c;function d(){if(c!==void 0)return c;if(o.g.XMLHttpRequest){c=new o.g.XMLHttpRequest;try{c.open("GET",o.g.XDomainRequest?"/":"https://example.com")}catch{c=null}}else c=null;return c}function m(s){var a=d();if(!a)return!1;try{return a.responseType=s,a.responseType===s}catch{}return!1}function h(s){return typeof s=="function"}l.fetch=h(o.g.fetch)&&h(o.g.ReadableStream),l.writableStream=h(o.g.WritableStream),l.abortController=h(o.g.AbortController),l.arraybuffer=l.fetch||m("arraybuffer"),l.msstream=!l.fetch&&m("ms-stream"),l.mozchunkedarraybuffer=!l.fetch&&m("moz-chunked-arraybuffer"),l.overrideMimeType=l.fetch||!!d()&&h(d().overrideMimeType),c=null},3570:(_,l,o)=>{var c=o(3085).lW,d=o(4155),m=o(8725),h=o(5717),s=o(5676),a=o(925),r=s.IncomingMessage,n=s.readyStates,t=_.exports=function(u){var f,p=this;a.Writable.call(p),p._opts=u,p._body=[],p._headers={},u.auth&&p.setHeader("Authorization","Basic "+c.from(u.auth).toString("base64")),Object.keys(u.headers).forEach((function(g){p.setHeader(g,u.headers[g])}));var y=!0;if(u.mode==="disable-fetch"||"requestTimeout"in u&&!m.abortController)y=!1,f=!0;else if(u.mode==="prefer-streaming")f=!1;else if(u.mode==="allow-wrong-content-type")f=!m.overrideMimeType;else{if(u.mode&&u.mode!=="default"&&u.mode!=="prefer-fast")throw new Error("Invalid value for opts.mode");f=!0}p._mode=(function(g,b){return m.fetch&&b?"fetch":m.mozchunkedarraybuffer?"moz-chunked-arraybuffer":m.msstream?"ms-stream":m.arraybuffer&&g?"arraybuffer":"text"})(f,y),p._fetchTimer=null,p._socketTimeout=null,p._socketTimer=null,p.on("finish",(function(){p._onFinish()}))};h(t,a.Writable),t.prototype.setHeader=function(u,f){var p=u.toLowerCase();i.indexOf(p)===-1&&(this._headers[p]={name:u,value:f})},t.prototype.getHeader=function(u){var f=this._headers[u.toLowerCase()];return f?f.value:null},t.prototype.removeHeader=function(u){delete this._headers[u.toLowerCase()]},t.prototype._onFinish=function(){var u=this;if(!u._destroyed){var f=u._opts;"timeout"in f&&f.timeout!==0&&u.setTimeout(f.timeout);var p=u._headers,y=null;f.method!=="GET"&&f.method!=="HEAD"&&(y=new Blob(u._body,{type:(p["content-type"]||{}).value||""}));var g=[];if(Object.keys(p).forEach((function(M){var S=p[M].name,O=p[M].value;Array.isArray(O)?O.forEach((function(C){g.push([S,C])})):g.push([S,O])})),u._mode==="fetch"){var b=null;if(m.abortController){var E=new AbortController;b=E.signal,u._fetchAbortController=E,"requestTimeout"in f&&f.requestTimeout!==0&&(u._fetchTimer=o.g.setTimeout((function(){u.emit("requestTimeout"),u._fetchAbortController&&u._fetchAbortController.abort()}),f.requestTimeout))}o.g.fetch(u._opts.url,{method:u._opts.method,headers:g,body:y||void 0,mode:"cors",credentials:f.withCredentials?"include":"same-origin",signal:b}).then((function(M){u._fetchResponse=M,u._resetTimers(!1),u._connect()}),(function(M){u._resetTimers(!0),u._destroyed||u.emit("error",M)}))}else{var x=u._xhr=new o.g.XMLHttpRequest;try{x.open(u._opts.method,u._opts.url,!0)}catch(M){return void d.nextTick((function(){u.emit("error",M)}))}"responseType"in x&&(x.responseType=u._mode),"withCredentials"in x&&(x.withCredentials=!!f.withCredentials),u._mode==="text"&&"overrideMimeType"in x&&x.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in f&&(x.timeout=f.requestTimeout,x.ontimeout=function(){u.emit("requestTimeout")}),g.forEach((function(M){x.setRequestHeader(M[0],M[1])})),u._response=null,x.onreadystatechange=function(){switch(x.readyState){case n.LOADING:case n.DONE:u._onXHRProgress()}},u._mode==="moz-chunked-arraybuffer"&&(x.onprogress=function(){u._onXHRProgress()}),x.onerror=function(){u._destroyed||(u._resetTimers(!0),u.emit("error",new Error("XHR error")))};try{x.send(y)}catch(M){return void d.nextTick((function(){u.emit("error",M)}))}}}},t.prototype._onXHRProgress=function(){var u=this;u._resetTimers(!1),(function(f){try{var p=f.status;return p!==null&&p!==0}catch{return!1}})(u._xhr)&&!u._destroyed&&(u._response||u._connect(),u._response._onXHRProgress(u._resetTimers.bind(u)))},t.prototype._connect=function(){var u=this;u._destroyed||(u._response=new r(u._xhr,u._fetchResponse,u._mode,u._resetTimers.bind(u)),u._response.on("error",(function(f){u.emit("error",f)})),u.emit("response",u._response))},t.prototype._write=function(u,f,p){this._body.push(u),p()},t.prototype._resetTimers=function(u){var f=this;o.g.clearTimeout(f._socketTimer),f._socketTimer=null,u?(o.g.clearTimeout(f._fetchTimer),f._fetchTimer=null):f._socketTimeout&&(f._socketTimer=o.g.setTimeout((function(){f.emit("timeout")}),f._socketTimeout))},t.prototype.abort=t.prototype.destroy=function(u){var f=this;f._destroyed=!0,f._resetTimers(!0),f._response&&(f._response._destroyed=!0),f._xhr?f._xhr.abort():f._fetchAbortController&&f._fetchAbortController.abort(),u&&f.emit("error",u)},t.prototype.end=function(u,f,p){typeof u=="function"&&(p=u,u=void 0),a.Writable.prototype.end.call(this,u,f,p)},t.prototype.setTimeout=function(u,f){var p=this;f&&p.once("timeout",f),p._socketTimeout=u,p._resetTimers(!1)},t.prototype.flushHeaders=function(){},t.prototype.setNoDelay=function(){},t.prototype.setSocketKeepAlive=function(){};var i=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]},5676:(_,l,o)=>{var c=o(4155),d=o(3085).lW,m=o(8725),h=o(5717),s=o(925),a=l.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},r=l.IncomingMessage=function(n,t,i,u){var f=this;if(s.Readable.call(f),f._mode=i,f.headers={},f.rawHeaders=[],f.trailers={},f.rawTrailers=[],f.on("end",(function(){c.nextTick((function(){f.emit("close")}))})),i==="fetch"){if(f._fetchResponse=t,f.url=t.url,f.statusCode=t.status,f.statusMessage=t.statusText,t.headers.forEach((function(E,x){f.headers[x.toLowerCase()]=E,f.rawHeaders.push(x,E)})),m.writableStream){var p=new WritableStream({write:function(E){return u(!1),new Promise((function(x,M){f._destroyed?M():f.push(d.from(E))?x():f._resumeFetch=x}))},close:function(){u(!0),f._destroyed||f.push(null)},abort:function(E){u(!0),f._destroyed||f.emit("error",E)}});try{return void t.body.pipeTo(p).catch((function(E){u(!0),f._destroyed||f.emit("error",E)}))}catch{}}var y=t.body.getReader();(function E(){y.read().then((function(x){f._destroyed||(u(x.done),x.done?f.push(null):(f.push(d.from(x.value)),E()))})).catch((function(x){u(!0),f._destroyed||f.emit("error",x)}))})()}else if(f._xhr=n,f._pos=0,f.url=n.responseURL,f.statusCode=n.status,f.statusMessage=n.statusText,n.getAllResponseHeaders().split(/\r?\n/).forEach((function(E){var x=E.match(/^([^:]+):\s*(.*)/);if(x){var M=x[1].toLowerCase();M==="set-cookie"?(f.headers[M]===void 0&&(f.headers[M]=[]),f.headers[M].push(x[2])):f.headers[M]!==void 0?f.headers[M]+=", "+x[2]:f.headers[M]=x[2],f.rawHeaders.push(x[1],x[2])}})),f._charset="x-user-defined",!m.overrideMimeType){var g=f.rawHeaders["mime-type"];if(g){var b=g.match(/;\s*charset=([^;])(;|$)/);b&&(f._charset=b[1].toLowerCase())}f._charset||(f._charset="utf-8")}};h(r,s.Readable),r.prototype._read=function(){var n=this._resumeFetch;n&&(this._resumeFetch=null,n())},r.prototype._onXHRProgress=function(n){var t=this,i=t._xhr,u=null;switch(t._mode){case"text":if((u=i.responseText).length>t._pos){var f=u.substr(t._pos);if(t._charset==="x-user-defined"){for(var p=d.alloc(f.length),y=0;y<f.length;y++)p[y]=255&f.charCodeAt(y);t.push(p)}else t.push(f,t._charset);t._pos=u.length}break;case"arraybuffer":if(i.readyState!==a.DONE||!i.response)break;u=i.response,t.push(d.from(new Uint8Array(u)));break;case"moz-chunked-arraybuffer":if(u=i.response,i.readyState!==a.LOADING||!u)break;t.push(d.from(new Uint8Array(u)));break;case"ms-stream":if(u=i.response,i.readyState!==a.LOADING)break;var g=new o.g.MSStreamReader;g.onprogress=function(){g.result.byteLength>t._pos&&(t.push(d.from(new Uint8Array(g.result.slice(t._pos)))),t._pos=g.result.byteLength)},g.onload=function(){n(!0),t.push(null)},g.readAsArrayBuffer(u)}t._xhr.readyState===a.DONE&&t._mode!=="ms-stream"&&(n(!0),t.push(null))}},7303:_=>{var l={};function o(d,m,h){h||(h=Error);var s=(function(a){var r,n;function t(i,u,f){return a.call(this,(function(p,y,g){return typeof m=="string"?m:m(p,y,g)})(i,u,f))||this}return n=a,(r=t).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,t})(h);s.prototype.name=h.name,s.prototype.code=d,l[d]=s}function c(d,m){if(Array.isArray(d)){var h=d.length;return d=d.map((function(s){return String(s)})),h>2?"one of ".concat(m," ").concat(d.slice(0,h-1).join(", "),", or ")+d[h-1]:h===2?"one of ".concat(m," ").concat(d[0]," or ").concat(d[1]):"of ".concat(m," ").concat(d[0])}return"of ".concat(m," ").concat(String(d))}o("ERR_INVALID_OPT_VALUE",(function(d,m){return'The value "'+m+'" is invalid for option "'+d+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(d,m,h){var s,a,r,n,t;if(typeof m=="string"&&(a="not ",m.substr(0,a.length)===a)?(s="must not be",m=m.replace(/^not /,"")):s="must be",(function(u,f,p){return(p===void 0||p>u.length)&&(p=u.length),u.substring(p-f.length,p)===f})(d," argument"))r="The ".concat(d," ").concat(s," ").concat(c(m,"type"));else{var i=(typeof t!="number"&&(t=0),t+1>(n=d).length||n.indexOf(".",t)===-1?"argument":"property");r='The "'.concat(d,'" ').concat(i," ").concat(s," ").concat(c(m,"type"))}return r+". Received type ".concat(typeof h)}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(d){return"The "+d+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(d){return"Cannot call "+d+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(d){return"Unknown encoding: "+d}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),_.exports.q=l},9560:(_,l,o)=>{var c=o(4155),d=Object.keys||function(t){var i=[];for(var u in t)i.push(u);return i};_.exports=a;const m=o(4002),h=o(3313);o(5717)(a,m);{const t=d(h.prototype);for(var s=0;s<t.length;s++){const i=t[s];a.prototype[i]||(a.prototype[i]=h.prototype[i])}}function a(t){if(!(this instanceof a))return new a(t);m.call(this,t),h.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",r)))}function r(){this._writableState.ended||c.nextTick(n,this)}function n(t){t.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},4842:(_,l,o)=>{_.exports=d;const c=o(1846);function d(m){if(!(this instanceof d))return new d(m);c.call(this,m)}o(5717)(d,c),d.prototype._transform=function(m,h,s){s(null,m)}},4002:(_,l,o)=>{var c,d=o(4155);_.exports=T,T.ReadableState=C,o(7187).EventEmitter;var m=function(he,de){return he.listeners(de).length},h=o(1463);const s=o(8764).Buffer,a=(o.g!==void 0?o.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},r=o(3646);let n;n=r&&r.debuglog?r.debuglog("stream"):function(){};const t=o(6641),i=o(4910),u=o(7855).getHighWaterMark,f=o(7303).q,p=f.ERR_INVALID_ARG_TYPE,y=f.ERR_STREAM_PUSH_AFTER_EOF,g=f.ERR_METHOD_NOT_IMPLEMENTED,b=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;let E,x,M;o(5717)(T,h);const S=i.errorOrDestroy,O=["error","close","destroy","pause","resume"];function C(he,de,ze){c=c||o(9560),he=he||{},typeof ze!="boolean"&&(ze=de instanceof c),this.objectMode=!!he.objectMode,ze&&(this.objectMode=this.objectMode||!!he.readableObjectMode),this.highWaterMark=u(this,he,"readableHighWaterMark",ze),this.buffer=new t,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=he.emitClose!==!1,this.autoDestroy=!!he.autoDestroy,this.destroyed=!1,this.defaultEncoding=he.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,he.encoding&&(E||(E=o(2553).s),this.decoder=new E(he.encoding),this.encoding=he.encoding)}function T(he){if(c=c||o(9560),!(this instanceof T))return new T(he);const de=this instanceof c;this._readableState=new C(he,this,de),this.readable=!0,he&&(typeof he.read=="function"&&(this._read=he.read),typeof he.destroy=="function"&&(this._destroy=he.destroy)),h.call(this)}function R(he,de,ze,P,A){n("readableAddChunk",de);var D,W=he._readableState;if(de===null)W.reading=!1,(function(ae,le){if(n("onEofChunk"),!le.ended){if(le.decoder){var Ne=le.decoder.end();Ne&&Ne.length&&(le.buffer.push(Ne),le.length+=le.objectMode?1:Ne.length)}le.ended=!0,le.sync?Y(ae):(le.needReadable=!1,le.emittedReadable||(le.emittedReadable=!0,ie(ae)))}})(he,W);else if(A||(D=(function(ae,le){var Ne,De;return De=le,s.isBuffer(De)||De instanceof a||typeof le=="string"||le===void 0||ae.objectMode||(Ne=new p("chunk",["string","Buffer","Uint8Array"],le)),Ne})(W,de)),D)S(he,D);else if(W.objectMode||de&&de.length>0)if(typeof de=="string"||W.objectMode||Object.getPrototypeOf(de)===s.prototype||(de=(function(ae){return s.from(ae)})(de)),P)W.endEmitted?S(he,new b):B(he,W,de,!0);else if(W.ended)S(he,new y);else{if(W.destroyed)return!1;W.reading=!1,W.decoder&&!ze?(de=W.decoder.write(de),W.objectMode||de.length!==0?B(he,W,de,!1):$(he,W)):B(he,W,de,!1)}else P||(W.reading=!1,$(he,W));return!W.ended&&(W.length<W.highWaterMark||W.length===0)}function B(he,de,ze,P){de.flowing&&de.length===0&&!de.sync?(de.awaitDrain=0,he.emit("data",ze)):(de.length+=de.objectMode?1:ze.length,P?de.buffer.unshift(ze):de.buffer.push(ze),de.needReadable&&Y(he)),$(he,de)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get(){return this._readableState!==void 0&&this._readableState.destroyed},set(he){this._readableState&&(this._readableState.destroyed=he)}}),T.prototype.destroy=i.destroy,T.prototype._undestroy=i.undestroy,T.prototype._destroy=function(he,de){de(he)},T.prototype.push=function(he,de){var ze,P=this._readableState;return P.objectMode?ze=!0:typeof he=="string"&&((de=de||P.defaultEncoding)!==P.encoding&&(he=s.from(he,de),de=""),ze=!0),R(this,he,de,!1,ze)},T.prototype.unshift=function(he){return R(this,he,null,!0,!1)},T.prototype.isPaused=function(){return this._readableState.flowing===!1},T.prototype.setEncoding=function(he){E||(E=o(2553).s);const de=new E(he);this._readableState.decoder=de,this._readableState.encoding=this._readableState.decoder.encoding;let ze=this._readableState.buffer.head,P="";for(;ze!==null;)P+=de.write(ze.data),ze=ze.next;return this._readableState.buffer.clear(),P!==""&&this._readableState.buffer.push(P),this._readableState.length=P.length,this};const z=1073741824;function L(he,de){return he<=0||de.length===0&&de.ended?0:de.objectMode?1:he!=he?de.flowing&&de.length?de.buffer.head.data.length:de.length:(he>de.highWaterMark&&(de.highWaterMark=(function(ze){return ze>=z?ze=z:(ze--,ze|=ze>>>1,ze|=ze>>>2,ze|=ze>>>4,ze|=ze>>>8,ze|=ze>>>16,ze++),ze})(he)),he<=de.length?he:de.ended?de.length:(de.needReadable=!0,0))}function Y(he){var de=he._readableState;n("emitReadable",de.needReadable,de.emittedReadable),de.needReadable=!1,de.emittedReadable||(n("emitReadable",de.flowing),de.emittedReadable=!0,d.nextTick(ie,he))}function ie(he){var de=he._readableState;n("emitReadable_",de.destroyed,de.length,de.ended),de.destroyed||!de.length&&!de.ended||(he.emit("readable"),de.emittedReadable=!1),de.needReadable=!de.flowing&&!de.ended&&de.length<=de.highWaterMark,we(he)}function $(he,de){de.readingMore||(de.readingMore=!0,d.nextTick(Q,he,de))}function Q(he,de){for(;!de.reading&&!de.ended&&(de.length<de.highWaterMark||de.flowing&&de.length===0);){const ze=de.length;if(n("maybeReadMore read 0"),he.read(0),ze===de.length)break}de.readingMore=!1}function ce(he){const de=he._readableState;de.readableListening=he.listenerCount("readable")>0,de.resumeScheduled&&!de.paused?de.flowing=!0:he.listenerCount("data")>0&&he.resume()}function be(he){n("readable nexttick read 0"),he.read(0)}function Ae(he,de){n("resume",de.reading),de.reading||he.read(0),de.resumeScheduled=!1,he.emit("resume"),we(he),de.flowing&&!de.reading&&he.read(0)}function we(he){const de=he._readableState;for(n("flow",de.flowing);de.flowing&&he.read()!==null;);}function Xe(he,de){return de.length===0?null:(de.objectMode?ze=de.buffer.shift():!he||he>=de.length?(ze=de.decoder?de.buffer.join(""):de.buffer.length===1?de.buffer.first():de.buffer.concat(de.length),de.buffer.clear()):ze=de.buffer.consume(he,de.decoder),ze);var ze}function Ve(he){var de=he._readableState;n("endReadable",de.endEmitted),de.endEmitted||(de.ended=!0,d.nextTick(st,de,he))}function st(he,de){if(n("endReadableNT",he.endEmitted,he.length),!he.endEmitted&&he.length===0&&(he.endEmitted=!0,de.readable=!1,de.emit("end"),he.autoDestroy)){const ze=de._writableState;(!ze||ze.autoDestroy&&ze.finished)&&de.destroy()}}function tt(he,de){for(var ze=0,P=he.length;ze<P;ze++)if(he[ze]===de)return ze;return-1}T.prototype.read=function(he){n("read",he),he=parseInt(he,10);var de=this._readableState,ze=he;if(he!==0&&(de.emittedReadable=!1),he===0&&de.needReadable&&((de.highWaterMark!==0?de.length>=de.highWaterMark:de.length>0)||de.ended))return n("read: emitReadable",de.length,de.ended),de.length===0&&de.ended?Ve(this):Y(this),null;if((he=L(he,de))===0&&de.ended)return de.length===0&&Ve(this),null;var P,A=de.needReadable;return n("need readable",A),(de.length===0||de.length-he<de.highWaterMark)&&n("length less than watermark",A=!0),de.ended||de.reading?n("reading or ended",A=!1):A&&(n("do read"),de.reading=!0,de.sync=!0,de.length===0&&(de.needReadable=!0),this._read(de.highWaterMark),de.sync=!1,de.reading||(he=L(ze,de))),(P=he>0?Xe(he,de):null)===null?(de.needReadable=de.length<=de.highWaterMark,he=0):(de.length-=he,de.awaitDrain=0),de.length===0&&(de.ended||(de.needReadable=!0),ze!==he&&de.ended&&Ve(this)),P!==null&&this.emit("data",P),P},T.prototype._read=function(he){S(this,new g("_read()"))},T.prototype.pipe=function(he,de){var ze=this,P=this._readableState;switch(P.pipesCount){case 0:P.pipes=he;break;case 1:P.pipes=[P.pipes,he];break;default:P.pipes.push(he)}P.pipesCount+=1,n("pipe count=%d opts=%j",P.pipesCount,de);var A=de&&de.end===!1||he===d.stdout||he===d.stderr?ht:D;function D(){n("onend"),he.end()}P.endEmitted?d.nextTick(A):ze.once("end",A),he.on("unpipe",(function F(V,ne){n("onunpipe"),V===ze&&ne&&ne.hasUnpiped===!1&&(ne.hasUnpiped=!0,n("cleanup"),he.removeListener("close",De),he.removeListener("finish",Ye),he.removeListener("drain",W),he.removeListener("error",Ne),he.removeListener("unpipe",F),ze.removeListener("end",D),ze.removeListener("end",ht),ze.removeListener("data",le),ae=!0,!P.awaitDrain||he._writableState&&!he._writableState.needDrain||W())}));var W=(function(F){return function(){var V=F._readableState;n("pipeOnDrain",V.awaitDrain),V.awaitDrain&&V.awaitDrain--,V.awaitDrain===0&&m(F,"data")&&(V.flowing=!0,we(F))}})(ze);he.on("drain",W);var ae=!1;function le(F){n("ondata");var V=he.write(F);n("dest.write",V),V===!1&&((P.pipesCount===1&&P.pipes===he||P.pipesCount>1&&tt(P.pipes,he)!==-1)&&!ae&&(n("false write response, pause",P.awaitDrain),P.awaitDrain++),ze.pause())}function Ne(F){n("onerror",F),ht(),he.removeListener("error",Ne),m(he,"error")===0&&S(he,F)}function De(){he.removeListener("finish",Ye),ht()}function Ye(){n("onfinish"),he.removeListener("close",De),ht()}function ht(){n("unpipe"),ze.unpipe(he)}return ze.on("data",le),(function(F,V,ne){if(typeof F.prependListener=="function")return F.prependListener(V,ne);F._events&&F._events[V]?Array.isArray(F._events[V])?F._events[V].unshift(ne):F._events[V]=[ne,F._events[V]]:F.on(V,ne)})(he,"error",Ne),he.once("close",De),he.once("finish",Ye),he.emit("pipe",ze),P.flowing||(n("pipe resume"),ze.resume()),he},T.prototype.unpipe=function(he){var de=this._readableState,ze={hasUnpiped:!1};if(de.pipesCount===0)return this;if(de.pipesCount===1)return he&&he!==de.pipes||(he||(he=de.pipes),de.pipes=null,de.pipesCount=0,de.flowing=!1,he&&he.emit("unpipe",this,ze)),this;if(!he){var P=de.pipes,A=de.pipesCount;de.pipes=null,de.pipesCount=0,de.flowing=!1;for(var D=0;D<A;D++)P[D].emit("unpipe",this,{hasUnpiped:!1});return this}var W=tt(de.pipes,he);return W===-1||(de.pipes.splice(W,1),de.pipesCount-=1,de.pipesCount===1&&(de.pipes=de.pipes[0]),he.emit("unpipe",this,ze)),this},T.prototype.on=function(he,de){const ze=h.prototype.on.call(this,he,de),P=this._readableState;return he==="data"?(P.readableListening=this.listenerCount("readable")>0,P.flowing!==!1&&this.resume()):he==="readable"&&(P.endEmitted||P.readableListening||(P.readableListening=P.needReadable=!0,P.flowing=!1,P.emittedReadable=!1,n("on readable",P.length,P.reading),P.length?Y(this):P.reading||d.nextTick(be,this))),ze},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(he,de){const ze=h.prototype.removeListener.call(this,he,de);return he==="readable"&&d.nextTick(ce,this),ze},T.prototype.removeAllListeners=function(he){const de=h.prototype.removeAllListeners.apply(this,arguments);return he!=="readable"&&he!==void 0||d.nextTick(ce,this),de},T.prototype.resume=function(){var he=this._readableState;return he.flowing||(n("resume"),he.flowing=!he.readableListening,(function(de,ze){ze.resumeScheduled||(ze.resumeScheduled=!0,d.nextTick(Ae,de,ze))})(this,he)),he.paused=!1,this},T.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(he){var de=this._readableState,ze=!1;for(var P in he.on("end",(()=>{if(n("wrapped end"),de.decoder&&!de.ended){var D=de.decoder.end();D&&D.length&&this.push(D)}this.push(null)})),he.on("data",(D=>{n("wrapped data"),de.decoder&&(D=de.decoder.write(D)),de.objectMode&&D==null||(de.objectMode||D&&D.length)&&(this.push(D)||(ze=!0,he.pause()))})),he)this[P]===void 0&&typeof he[P]=="function"&&(this[P]=(function(D){return function(){return he[D].apply(he,arguments)}})(P));for(var A=0;A<O.length;A++)he.on(O[A],this.emit.bind(this,O[A]));return this._read=D=>{n("wrapped _read",D),ze&&(ze=!1,he.resume())},this},typeof Symbol=="function"&&(T.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=o(6819)),x(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(he){this._readableState&&(this._readableState.flowing=he)}}),T._fromList=Xe,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get(){return this._readableState.length}}),typeof Symbol=="function"&&(T.from=function(he,de){return M===void 0&&(M=o(8869)),M(T,he,de)})},1846:(_,l,o)=>{_.exports=n;const c=o(7303).q,d=c.ERR_METHOD_NOT_IMPLEMENTED,m=c.ERR_MULTIPLE_CALLBACK,h=c.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=c.ERR_TRANSFORM_WITH_LENGTH_0,a=o(9560);function r(u,f){var p=this._transformState;p.transforming=!1;var y=p.writecb;if(y===null)return this.emit("error",new m);p.writechunk=null,p.writecb=null,f!=null&&this.push(f),y(u);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function n(u){if(!(this instanceof n))return new n(u);a.call(this,u),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",t)}function t(){typeof this._flush!="function"||this._readableState.destroyed?i(this,null,null):this._flush(((u,f)=>{i(this,u,f)}))}function i(u,f,p){if(f)return u.emit("error",f);if(p!=null&&u.push(p),u._writableState.length)throw new s;if(u._transformState.transforming)throw new h;return u.push(null)}o(5717)(n,a),n.prototype.push=function(u,f){return this._transformState.needTransform=!1,a.prototype.push.call(this,u,f)},n.prototype._transform=function(u,f,p){p(new d("_transform()"))},n.prototype._write=function(u,f,p){var y=this._transformState;if(y.writecb=p,y.writechunk=u,y.writeencoding=f,!y.transforming){var g=this._readableState;(y.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},n.prototype._read=function(u){var f=this._transformState;f.writechunk===null||f.transforming?f.needTransform=!0:(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform))},n.prototype._destroy=function(u,f){a.prototype._destroy.call(this,u,(p=>{f(p)}))}},3313:(_,l,o)=>{var c,d=o(4155);function m($){this.next=null,this.entry=null,this.finish=()=>{(function(Q,ce,be){var Ae=Q.entry;for(Q.entry=null;Ae;){var we=Ae.callback;ce.pendingcb--,we(void 0),Ae=Ae.next}ce.corkedRequestsFree.next=Q})(this,$)}}_.exports=T,T.WritableState=O;const h={deprecate:o(4927)};var s=o(1463);const a=o(8764).Buffer,r=(o.g!==void 0?o.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},n=o(4910),t=o(7855).getHighWaterMark,i=o(7303).q,u=i.ERR_INVALID_ARG_TYPE,f=i.ERR_METHOD_NOT_IMPLEMENTED,p=i.ERR_MULTIPLE_CALLBACK,y=i.ERR_STREAM_CANNOT_PIPE,g=i.ERR_STREAM_DESTROYED,b=i.ERR_STREAM_NULL_VALUES,E=i.ERR_STREAM_WRITE_AFTER_END,x=i.ERR_UNKNOWN_ENCODING,M=n.errorOrDestroy;function S(){}function O($,Q,ce){c=c||o(9560),$=$||{},typeof ce!="boolean"&&(ce=Q instanceof c),this.objectMode=!!$.objectMode,ce&&(this.objectMode=this.objectMode||!!$.writableObjectMode),this.highWaterMark=t(this,$,"writableHighWaterMark",ce),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var be=$.decodeStrings===!1;this.decodeStrings=!be,this.defaultEncoding=$.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ae){(function(we,Xe){var Ve=we._writableState,st=Ve.sync,tt=Ve.writecb;if(typeof tt!="function")throw new p;if((function(de){de.writing=!1,de.writecb=null,de.length-=de.writelen,de.writelen=0})(Ve),Xe)(function(de,ze,P,A,D){--ze.pendingcb,P?(d.nextTick(D,A),d.nextTick(ie,de,ze),de._writableState.errorEmitted=!0,M(de,A)):(D(A),de._writableState.errorEmitted=!0,M(de,A),ie(de,ze))})(we,Ve,st,Xe,tt);else{var he=L(Ve)||we.destroyed;he||Ve.corked||Ve.bufferProcessing||!Ve.bufferedRequest||z(we,Ve),st?d.nextTick(B,we,Ve,he,tt):B(we,Ve,he,tt)}})(Q,Ae)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new m(this)}var C;function T($){const Q=this instanceof(c=c||o(9560));if(!Q&&!C.call(T,this))return new T($);this._writableState=new O($,this,Q),this.writable=!0,$&&(typeof $.write=="function"&&(this._write=$.write),typeof $.writev=="function"&&(this._writev=$.writev),typeof $.destroy=="function"&&(this._destroy=$.destroy),typeof $.final=="function"&&(this._final=$.final)),s.call(this)}function R($,Q,ce,be,Ae,we,Xe){Q.writelen=be,Q.writecb=Xe,Q.writing=!0,Q.sync=!0,Q.destroyed?Q.onwrite(new g("write")):ce?$._writev(Ae,Q.onwrite):$._write(Ae,we,Q.onwrite),Q.sync=!1}function B($,Q,ce,be){ce||(function(Ae,we){we.length===0&&we.needDrain&&(we.needDrain=!1,Ae.emit("drain"))})($,Q),Q.pendingcb--,be(),ie($,Q)}function z($,Q){Q.bufferProcessing=!0;var ce=Q.bufferedRequest;if($._writev&&ce&&ce.next){var be=Q.bufferedRequestCount,Ae=new Array(be),we=Q.corkedRequestsFree;we.entry=ce;for(var Xe=0,Ve=!0;ce;)Ae[Xe]=ce,ce.isBuf||(Ve=!1),ce=ce.next,Xe+=1;Ae.allBuffers=Ve,R($,Q,!0,Q.length,Ae,"",we.finish),Q.pendingcb++,Q.lastBufferedRequest=null,we.next?(Q.corkedRequestsFree=we.next,we.next=null):Q.corkedRequestsFree=new m(Q),Q.bufferedRequestCount=0}else{for(;ce;){var st=ce.chunk,tt=ce.encoding,he=ce.callback;if(R($,Q,!1,Q.objectMode?1:st.length,st,tt,he),ce=ce.next,Q.bufferedRequestCount--,Q.writing)break}ce===null&&(Q.lastBufferedRequest=null)}Q.bufferedRequest=ce,Q.bufferProcessing=!1}function L($){return $.ending&&$.length===0&&$.bufferedRequest===null&&!$.finished&&!$.writing}function Y($,Q){$._final((ce=>{Q.pendingcb--,ce&&M($,ce),Q.prefinished=!0,$.emit("prefinish"),ie($,Q)}))}function ie($,Q){var ce=L(Q);if(ce&&((function(be,Ae){Ae.prefinished||Ae.finalCalled||(typeof be._final!="function"||Ae.destroyed?(Ae.prefinished=!0,be.emit("prefinish")):(Ae.pendingcb++,Ae.finalCalled=!0,d.nextTick(Y,be,Ae)))})($,Q),Q.pendingcb===0&&(Q.finished=!0,$.emit("finish"),Q.autoDestroy))){const be=$._readableState;(!be||be.autoDestroy&&be.endEmitted)&&$.destroy()}return ce}o(5717)(T,s),O.prototype.getBuffer=function(){for(var $=this.bufferedRequest,Q=[];$;)Q.push($),$=$.next;return Q},(function(){try{Object.defineProperty(O.prototype,"buffer",{get:h.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function($){return!!C.call(this,$)||this===T&&$&&$._writableState instanceof O}})):C=function($){return $ instanceof this},T.prototype.pipe=function(){M(this,new y)},T.prototype.write=function($,Q,ce){var be,Ae=this._writableState,we=!1,Xe=!Ae.objectMode&&(be=$,a.isBuffer(be)||be instanceof r);return Xe&&!a.isBuffer($)&&($=(function(Ve){return a.from(Ve)})($)),typeof Q=="function"&&(ce=Q,Q=null),Xe?Q="buffer":Q||(Q=Ae.defaultEncoding),typeof ce!="function"&&(ce=S),Ae.ending?(function(Ve,st){var tt=new E;M(Ve,tt),d.nextTick(st,tt)})(this,ce):(Xe||(function(Ve,st,tt,he){var de;return tt===null?de=new b:typeof tt=="string"||st.objectMode||(de=new u("chunk",["string","Buffer"],tt)),!de||(M(Ve,de),d.nextTick(he,de),!1)})(this,Ae,$,ce))&&(Ae.pendingcb++,we=(function(Ve,st,tt,he,de,ze){if(!tt){var P=(function(ae,le,Ne){return ae.objectMode||ae.decodeStrings===!1||typeof le!="string"||(le=a.from(le,Ne)),le})(st,he,de);he!==P&&(tt=!0,de="buffer",he=P)}var A=st.objectMode?1:he.length;st.length+=A;var D=st.length<st.highWaterMark;if(D||(st.needDrain=!0),st.writing||st.corked){var W=st.lastBufferedRequest;st.lastBufferedRequest={chunk:he,encoding:de,isBuf:tt,callback:ze,next:null},W?W.next=st.lastBufferedRequest:st.bufferedRequest=st.lastBufferedRequest,st.bufferedRequestCount+=1}else R(Ve,st,!1,A,he,de,ze);return D})(this,Ae,Xe,$,Q,ce)),we},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var $=this._writableState;$.corked&&($.corked--,$.writing||$.corked||$.bufferProcessing||!$.bufferedRequest||z(this,$))},T.prototype.setDefaultEncoding=function($){if(typeof $=="string"&&($=$.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf(($+"").toLowerCase())>-1))throw new x($);return this._writableState.defaultEncoding=$,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function($,Q,ce){ce(new f("_write()"))},T.prototype._writev=null,T.prototype.end=function($,Q,ce){var be=this._writableState;return typeof $=="function"?(ce=$,$=null,Q=null):typeof Q=="function"&&(ce=Q,Q=null),$!=null&&this.write($,Q),be.corked&&(be.corked=1,this.uncork()),be.ending||(function(Ae,we,Xe){we.ending=!0,ie(Ae,we),Xe&&(we.finished?d.nextTick(Xe):Ae.once("finish",Xe)),we.ended=!0,Ae.writable=!1})(this,be,ce),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get(){return this._writableState!==void 0&&this._writableState.destroyed},set($){this._writableState&&(this._writableState.destroyed=$)}}),T.prototype.destroy=n.destroy,T.prototype._undestroy=n.undestroy,T.prototype._destroy=function($,Q){Q($)}},6819:(_,l,o)=>{var c=o(4155);const d=o(5467),m=Symbol("lastResolve"),h=Symbol("lastReject"),s=Symbol("error"),a=Symbol("ended"),r=Symbol("lastPromise"),n=Symbol("handlePromise"),t=Symbol("stream");function i(g,b){return{value:g,done:b}}function u(g){const b=g[m];if(b!==null){const E=g[t].read();E!==null&&(g[r]=null,g[m]=null,g[h]=null,b(i(E,!1)))}}function f(g){c.nextTick(u,g)}const p=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf({get stream(){return this[t]},next(){const g=this[s];if(g!==null)return Promise.reject(g);if(this[a])return Promise.resolve(i(void 0,!0));if(this[t].destroyed)return new Promise(((x,M)=>{c.nextTick((()=>{this[s]?M(this[s]):x(i(void 0,!0))}))}));const b=this[r];let E;if(b)E=new Promise((function(x,M){return(S,O)=>{x.then((()=>{M[a]?S(i(void 0,!0)):M[n](S,O)}),O)}})(b,this));else{const x=this[t].read();if(x!==null)return Promise.resolve(i(x,!1));E=new Promise(this[n])}return this[r]=E,E},[Symbol.asyncIterator](){return this},return(){return new Promise(((g,b)=>{this[t].destroy(null,(E=>{E?b(E):g(i(void 0,!0))}))}))}},p);_.exports=g=>{const b=Object.create(y,{[t]:{value:g,writable:!0},[m]:{value:null,writable:!0},[h]:{value:null,writable:!0},[s]:{value:null,writable:!0},[a]:{value:g._readableState.endEmitted,writable:!0},[n]:{value:(E,x)=>{const M=b[t].read();M?(b[r]=null,b[m]=null,b[h]=null,E(i(M,!1))):(b[m]=E,b[h]=x)},writable:!0}});return b[r]=null,d(g,(E=>{if(E&&E.code!=="ERR_STREAM_PREMATURE_CLOSE"){const M=b[h];return M!==null&&(b[r]=null,b[m]=null,b[h]=null,M(E)),void(b[s]=E)}const x=b[m];x!==null&&(b[r]=null,b[m]=null,b[h]=null,x(i(void 0,!0))),b[a]=!0})),g.on("readable",f.bind(null,b)),b}},6641:(_,l,o)=>{function c(r,n){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);n&&(i=i.filter((function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),t.push.apply(t,i)}return t}function d(r){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(i){m(r,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))}))}return r}function m(r,n,t){return(n=(function(i){var u=(function(f,p){if(typeof f!="object"||f===null)return f;var y=f[Symbol.toPrimitive];if(y!==void 0){var g=y.call(f,"string");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)})(i);return typeof u=="symbol"?u:String(u)})(n))in r?Object.defineProperty(r,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[n]=t,r}const h=o(8764).Buffer,s=o(1408).inspect,a=s&&s.custom||"inspect";_.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(r){const n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(r){const n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;const r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}clear(){this.head=this.tail=null,this.length=0}join(r){if(this.length===0)return"";for(var n=this.head,t=""+n.data;n=n.next;)t+=r+n.data;return t}concat(r){if(this.length===0)return h.alloc(0);const n=h.allocUnsafe(r>>>0);for(var t,i,u,f=this.head,p=0;f;)t=f.data,i=n,u=p,h.prototype.copy.call(t,i,u),p+=f.data.length,f=f.next;return n}consume(r,n){var t;return r<this.head.data.length?(t=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):t=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),t}first(){return this.head.data}_getString(r){var n=this.head,t=1,i=n.data;for(r-=i.length;n=n.next;){const u=n.data,f=r>u.length?u.length:r;if(f===u.length?i+=u:i+=u.slice(0,r),(r-=f)==0){f===u.length?(++t,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=u.slice(f));break}++t}return this.length-=t,i}_getBuffer(r){const n=h.allocUnsafe(r);var t=this.head,i=1;for(t.data.copy(n),r-=t.data.length;t=t.next;){const u=t.data,f=r>u.length?u.length:r;if(u.copy(n,n.length-r,0,f),(r-=f)==0){f===u.length?(++i,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=u.slice(f));break}++i}return this.length-=i,n}[a](r,n){return s(this,d(d({},n),{},{depth:0,customInspect:!1}))}}},4910:(_,l,o)=>{var c=o(4155);function d(s,a){h(s,a),m(s)}function m(s){s._writableState&&!s._writableState.emitClose||s._readableState&&!s._readableState.emitClose||s.emit("close")}function h(s,a){s.emit("error",a)}_.exports={destroy:function(s,a){const r=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return r||n?(a?a(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c.nextTick(h,this,s)):c.nextTick(h,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,(t=>{!a&&t?this._writableState?this._writableState.errorEmitted?c.nextTick(m,this):(this._writableState.errorEmitted=!0,c.nextTick(d,this,t)):c.nextTick(d,this,t):a?(c.nextTick(m,this),a(t)):c.nextTick(m,this)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(s,a){const r=s._readableState,n=s._writableState;r&&r.autoDestroy||n&&n.autoDestroy?s.destroy(a):s.emit("error",a)}}},5467:(_,l,o)=>{const c=o(7303).q.ERR_STREAM_PREMATURE_CLOSE;function d(){}_.exports=function m(h,s,a){if(typeof s=="function")return m(h,null,s);s||(s={}),a=(function(E){let x=!1;return function(){if(!x){x=!0;for(var M=arguments.length,S=new Array(M),O=0;O<M;O++)S[O]=arguments[O];E.apply(this,S)}}})(a||d);let r=s.readable||s.readable!==!1&&h.readable,n=s.writable||s.writable!==!1&&h.writable;const t=()=>{h.writable||u()};var i=h._writableState&&h._writableState.finished;const u=()=>{n=!1,i=!0,r||a.call(h)};var f=h._readableState&&h._readableState.endEmitted;const p=()=>{r=!1,f=!0,n||a.call(h)},y=E=>{a.call(h,E)},g=()=>{let E;return r&&!f?(h._readableState&&h._readableState.ended||(E=new c),a.call(h,E)):n&&!i?(h._writableState&&h._writableState.ended||(E=new c),a.call(h,E)):void 0},b=()=>{h.req.on("finish",u)};return(function(E){return E.setHeader&&typeof E.abort=="function"})(h)?(h.on("complete",u),h.on("abort",g),h.req?b():h.on("request",b)):n&&!h._writableState&&(h.on("end",t),h.on("close",t)),h.on("end",p),h.on("finish",u),s.error!==!1&&h.on("error",y),h.on("close",g),function(){h.removeListener("complete",u),h.removeListener("abort",g),h.removeListener("request",b),h.req&&h.req.removeListener("finish",u),h.removeListener("end",t),h.removeListener("close",t),h.removeListener("finish",u),h.removeListener("end",p),h.removeListener("error",y),h.removeListener("close",g)}}},8869:_=>{_.exports=function(){throw new Error("Readable.from is not available in the browser")}},9689:(_,l,o)=>{let c;const d=o(7303).q,m=d.ERR_MISSING_ARGS,h=d.ERR_STREAM_DESTROYED;function s(n){if(n)throw n}function a(n){n()}function r(n,t){return n.pipe(t)}_.exports=function(){for(var n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];const u=(function(y){return y.length?typeof y[y.length-1]!="function"?s:y.pop():s})(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new m("streams");let f;const p=t.map((function(y,g){const b=g<t.length-1;return(function(E,x,M,S){S=(function(T){let R=!1;return function(){R||(R=!0,T(...arguments))}})(S);let O=!1;E.on("close",(()=>{O=!0})),c===void 0&&(c=o(5467)),c(E,{readable:x,writable:M},(T=>{if(T)return S(T);O=!0,S()}));let C=!1;return T=>{if(!O&&!C)return C=!0,(function(R){return R.setHeader&&typeof R.abort=="function"})(E)?E.abort():typeof E.destroy=="function"?E.destroy():void S(T||new h("pipe"))}})(y,b,g>0,(function(E){f||(f=E),E&&p.forEach(a),b||(p.forEach(a),u(f))}))}));return t.reduce(r)}},7855:(_,l,o)=>{const c=o(7303).q.ERR_INVALID_OPT_VALUE;_.exports={getHighWaterMark:function(d,m,h,s){const a=(function(r,n,t){return r.highWaterMark!=null?r.highWaterMark:n?r[t]:null})(m,s,h);if(a!=null){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new c(s?h:"highWaterMark",a);return Math.floor(a)}return d.objectMode?16:16384}}},1463:(_,l,o)=>{_.exports=o(7187).EventEmitter},925:(_,l,o)=>{(l=_.exports=o(4002)).Stream=l,l.Readable=l,l.Writable=o(3313),l.Duplex=o(9560),l.Transform=o(1846),l.PassThrough=o(4842),l.finished=o(5467),l.pipeline=o(9689)},2553:(_,l,o)=>{var c=o(9509).Buffer,d=c.isEncoding||function(f){switch((f=""+f)&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function m(f){var p;switch(this.encoding=(function(y){var g=(function(b){if(!b)return"utf8";for(var E;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(E)return;b=(""+b).toLowerCase(),E=!0}})(y);if(typeof g!="string"&&(c.isEncoding===d||!d(y)))throw new Error("Unknown encoding: "+y);return g||y})(f),this.encoding){case"utf16le":this.text=a,this.end=r,p=4;break;case"utf8":this.fillLast=s,p=4;break;case"base64":this.text=n,this.end=t,p=3;break;default:return this.write=i,void(this.end=u)}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(p)}function h(f){return f<=127?0:f>>5==6?2:f>>4==14?3:f>>3==30?4:f>>6==2?-1:-2}function s(f){var p=this.lastTotal-this.lastNeed,y=(function(g,b,E){if((192&b[0])!=128)return g.lastNeed=0,"�";if(g.lastNeed>1&&b.length>1){if((192&b[1])!=128)return g.lastNeed=1,"�";if(g.lastNeed>2&&b.length>2&&(192&b[2])!=128)return g.lastNeed=2,"�"}})(this,f);return y!==void 0?y:this.lastNeed<=f.length?(f.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(f.copy(this.lastChar,p,0,f.length),void(this.lastNeed-=f.length))}function a(f,p){if((f.length-p)%2==0){var y=f.toString("utf16le",p);if(y){var g=y.charCodeAt(y.length-1);if(g>=55296&&g<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",p,f.length-1)}function r(f){var p=f&&f.length?this.write(f):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return p+this.lastChar.toString("utf16le",0,y)}return p}function n(f,p){var y=(f.length-p)%3;return y===0?f.toString("base64",p):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",p,f.length-y))}function t(f){var p=f&&f.length?this.write(f):"";return this.lastNeed?p+this.lastChar.toString("base64",0,3-this.lastNeed):p}function i(f){return f.toString(this.encoding)}function u(f){return f&&f.length?this.write(f):""}l.s=m,m.prototype.write=function(f){if(f.length===0)return"";var p,y;if(this.lastNeed){if((p=this.fillLast(f))===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<f.length?p?p+this.text(f,y):this.text(f,y):p||""},m.prototype.end=function(f){var p=f&&f.length?this.write(f):"";return this.lastNeed?p+"�":p},m.prototype.text=function(f,p){var y=(function(b,E,x){var M=E.length-1;if(M<x)return 0;var S=h(E[M]);return S>=0?(S>0&&(b.lastNeed=S-1),S):--M<x||S===-2?0:(S=h(E[M]))>=0?(S>0&&(b.lastNeed=S-2),S):--M<x||S===-2?0:(S=h(E[M]))>=0?(S>0&&(S===2?S=0:b.lastNeed=S-3),S):0})(this,f,p);if(!this.lastNeed)return f.toString("utf8",p);this.lastTotal=y;var g=f.length-(y-this.lastNeed);return f.copy(this.lastChar,0,g),f.toString("utf8",p,g)},m.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),this.lastNeed-=f.length}},842:(_,l,o)=>{var c=o(3085).lW;Object.defineProperty(l,"__esModule",{value:!0}),l.AbstractTokenizer=void 0;const d=o(5167);l.AbstractTokenizer=class{constructor(m){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=m||{}}async readToken(m,h=this.position){const s=c.alloc(m.len);if(await this.readBuffer(s,{position:h})<m.len)throw new d.EndOfStreamError;return m.get(s,0)}async peekToken(m,h=this.position){const s=c.alloc(m.len);if(await this.peekBuffer(s,{position:h})<m.len)throw new d.EndOfStreamError;return m.get(s,0)}async readNumber(m){if(await this.readBuffer(this.numBuffer,{length:m.len})<m.len)throw new d.EndOfStreamError;return m.get(this.numBuffer,0)}async peekNumber(m){if(await this.peekBuffer(this.numBuffer,{length:m.len})<m.len)throw new d.EndOfStreamError;return m.get(this.numBuffer,0)}async ignore(m){if(this.fileInfo.size!==void 0){const h=this.fileInfo.size-this.position;if(m>h)return this.position+=h,h}return this.position+=m,m}async close(){}normalizeOptions(m,h){if(h&&h.position!==void 0&&h.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return h?{mayBeLess:h.mayBeLess===!0,offset:h.offset?h.offset:0,length:h.length?h.length:m.length-(h.offset?h.offset:0),position:h.position?h.position:this.position}:{mayBeLess:!1,offset:0,length:m.length,position:this.position}}}},778:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferTokenizer=void 0;const c=o(5167),d=o(842);class m extends d.AbstractTokenizer{constructor(s,a){super(a),this.uint8Array=s,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:s.length}async readBuffer(s,a){if(a&&a.position){if(a.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=a.position}const r=await this.peekBuffer(s,a);return this.position+=r,r}async peekBuffer(s,a){const r=this.normalizeOptions(s,a),n=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&n<r.length)throw new c.EndOfStreamError;return s.set(this.uint8Array.subarray(r.position,r.position+n),r.offset),n}async close(){}}l.BufferTokenizer=m},7859:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.fromFile=l.FileTokenizer=void 0;const c=o(842),d=o(5167),m=o(7209);class h extends c.AbstractTokenizer{constructor(a,r){super(r),this.fd=a}async readBuffer(a,r){const n=this.normalizeOptions(a,r);this.position=n.position;const t=await m.read(this.fd,a,n.offset,n.length,n.position);if(this.position+=t.bytesRead,t.bytesRead<n.length&&(!r||!r.mayBeLess))throw new d.EndOfStreamError;return t.bytesRead}async peekBuffer(a,r){const n=this.normalizeOptions(a,r),t=await m.read(this.fd,a,n.offset,n.length,n.position);if(!n.mayBeLess&&t.bytesRead<n.length)throw new d.EndOfStreamError;return t.bytesRead}async close(){return m.close(this.fd)}}l.FileTokenizer=h,l.fromFile=async function(s){const a=await m.stat(s);if(!a.isFile)throw new Error(`File not a file: ${s}`);const r=await m.open(s,"r");return new h(r,{path:s,size:a.size})}},7209:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.readFile=l.writeFileSync=l.writeFile=l.read=l.open=l.close=l.stat=l.createReadStream=l.pathExists=void 0;const c=o(4059);l.pathExists=c.existsSync,l.createReadStream=c.createReadStream,l.stat=async function(d){return new Promise(((m,h)=>{c.stat(d,((s,a)=>{s?h(s):m(a)}))}))},l.close=async function(d){return new Promise(((m,h)=>{c.close(d,(s=>{s?h(s):m()}))}))},l.open=async function(d,m){return new Promise(((h,s)=>{c.open(d,m,((a,r)=>{a?s(a):h(r)}))}))},l.read=async function(d,m,h,s,a){return new Promise(((r,n)=>{c.read(d,m,h,s,a,((t,i,u)=>{t?n(t):r({bytesRead:i,buffer:u})}))}))},l.writeFile=async function(d,m){return new Promise(((h,s)=>{c.writeFile(d,m,(a=>{a?s(a):h()}))}))},l.writeFileSync=function(d,m){c.writeFileSync(d,m)},l.readFile=async function(d){return new Promise(((m,h)=>{c.readFile(d,((s,a)=>{s?h(s):m(a)}))}))}},599:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ReadStreamTokenizer=void 0;const c=o(842),d=o(5167);class m extends c.AbstractTokenizer{constructor(s,a){super(a),this.streamReader=new d.StreamReader(s)}async getFileInfo(){return this.fileInfo}async readBuffer(s,a){const r=this.normalizeOptions(s,a),n=r.position-this.position;if(n>0)return await this.ignore(n),this.readBuffer(s,a);if(n<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;const t=await this.streamReader.read(s,r.offset,r.length);if(this.position+=t,(!a||!a.mayBeLess)&&t<r.length)throw new d.EndOfStreamError;return t}async peekBuffer(s,a){const r=this.normalizeOptions(s,a);let n=0;if(r.position){const t=r.position-this.position;if(t>0){const i=new Uint8Array(r.length+t);return n=await this.peekBuffer(i,{mayBeLess:r.mayBeLess}),s.set(i.subarray(t),r.offset),n-t}if(t<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{n=await this.streamReader.peek(s,r.offset,r.length)}catch(t){if(a&&a.mayBeLess&&t instanceof d.EndOfStreamError)return 0;throw t}if(!r.mayBeLess&&n<r.length)throw new d.EndOfStreamError}return n}async ignore(s){const a=Math.min(256e3,s),r=new Uint8Array(a);let n=0;for(;n<s;){const t=s-n,i=await this.readBuffer(r,{length:Math.min(a,t)});if(i<0)return i;n+=i}return n}}l.ReadStreamTokenizer=m},5849:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.fromBuffer=l.fromStream=l.EndOfStreamError=void 0;const c=o(599),d=o(778);var m=o(5167);Object.defineProperty(l,"EndOfStreamError",{enumerable:!0,get:function(){return m.EndOfStreamError}}),l.fromStream=function(h,s){return s=s||{},new c.ReadStreamTokenizer(h,s)},l.fromBuffer=function(h,s){return new d.BufferTokenizer(h,s)}},6597:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.fromStream=l.fromBuffer=l.EndOfStreamError=l.fromFile=void 0;const c=o(7209),d=o(5849);var m=o(7859);Object.defineProperty(l,"fromFile",{enumerable:!0,get:function(){return m.fromFile}});var h=o(5849);Object.defineProperty(l,"EndOfStreamError",{enumerable:!0,get:function(){return h.EndOfStreamError}}),Object.defineProperty(l,"fromBuffer",{enumerable:!0,get:function(){return h.fromBuffer}}),l.fromStream=async function(s,a){if(a=a||{},s.path){const r=await c.stat(s.path);a.path=s.path,a.size=r.size}return d.fromStream(s,a)}},3416:(_,l,o)=>{var c=o(3085).lW;Object.defineProperty(l,"__esModule",{value:!0}),l.AnsiStringType=l.StringType=l.BufferType=l.Uint8ArrayType=l.IgnoreType=l.Float80_LE=l.Float80_BE=l.Float64_LE=l.Float64_BE=l.Float32_LE=l.Float32_BE=l.Float16_LE=l.Float16_BE=l.INT64_BE=l.UINT64_BE=l.INT64_LE=l.UINT64_LE=l.INT32_LE=l.INT32_BE=l.INT24_BE=l.INT24_LE=l.INT16_LE=l.INT16_BE=l.INT8=l.UINT32_BE=l.UINT32_LE=l.UINT24_BE=l.UINT24_LE=l.UINT16_BE=l.UINT16_LE=l.UINT8=void 0;const d=o(645);function m(s){return new DataView(s.buffer,s.byteOffset)}l.UINT8={len:1,get:(s,a)=>m(s).getUint8(a),put:(s,a,r)=>(m(s).setUint8(a,r),a+1)},l.UINT16_LE={len:2,get:(s,a)=>m(s).getUint16(a,!0),put:(s,a,r)=>(m(s).setUint16(a,r,!0),a+2)},l.UINT16_BE={len:2,get:(s,a)=>m(s).getUint16(a),put:(s,a,r)=>(m(s).setUint16(a,r),a+2)},l.UINT24_LE={len:3,get(s,a){const r=m(s);return r.getUint8(a)+(r.getUint16(a+1,!0)<<8)},put(s,a,r){const n=m(s);return n.setUint8(a,255&r),n.setUint16(a+1,r>>8,!0),a+3}},l.UINT24_BE={len:3,get(s,a){const r=m(s);return(r.getUint16(a)<<8)+r.getUint8(a+2)},put(s,a,r){const n=m(s);return n.setUint16(a,r>>8),n.setUint8(a+2,255&r),a+3}},l.UINT32_LE={len:4,get:(s,a)=>m(s).getUint32(a,!0),put:(s,a,r)=>(m(s).setUint32(a,r,!0),a+4)},l.UINT32_BE={len:4,get:(s,a)=>m(s).getUint32(a),put:(s,a,r)=>(m(s).setUint32(a,r),a+4)},l.INT8={len:1,get:(s,a)=>m(s).getInt8(a),put:(s,a,r)=>(m(s).setInt8(a,r),a+1)},l.INT16_BE={len:2,get:(s,a)=>m(s).getInt16(a),put:(s,a,r)=>(m(s).setInt16(a,r),a+2)},l.INT16_LE={len:2,get:(s,a)=>m(s).getInt16(a,!0),put:(s,a,r)=>(m(s).setInt16(a,r,!0),a+2)},l.INT24_LE={len:3,get(s,a){const r=l.UINT24_LE.get(s,a);return r>8388607?r-16777216:r},put(s,a,r){const n=m(s);return n.setUint8(a,255&r),n.setUint16(a+1,r>>8,!0),a+3}},l.INT24_BE={len:3,get(s,a){const r=l.UINT24_BE.get(s,a);return r>8388607?r-16777216:r},put(s,a,r){const n=m(s);return n.setUint16(a,r>>8),n.setUint8(a+2,255&r),a+3}},l.INT32_BE={len:4,get:(s,a)=>m(s).getInt32(a),put:(s,a,r)=>(m(s).setInt32(a,r),a+4)},l.INT32_LE={len:4,get:(s,a)=>m(s).getInt32(a,!0),put:(s,a,r)=>(m(s).setInt32(a,r,!0),a+4)},l.UINT64_LE={len:8,get:(s,a)=>m(s).getBigUint64(a,!0),put:(s,a,r)=>(m(s).setBigUint64(a,r,!0),a+8)},l.INT64_LE={len:8,get:(s,a)=>m(s).getBigInt64(a,!0),put:(s,a,r)=>(m(s).setBigInt64(a,r,!0),a+8)},l.UINT64_BE={len:8,get:(s,a)=>m(s).getBigUint64(a),put:(s,a,r)=>(m(s).setBigUint64(a,r),a+8)},l.INT64_BE={len:8,get:(s,a)=>m(s).getBigInt64(a),put:(s,a,r)=>(m(s).setBigInt64(a,r),a+8)},l.Float16_BE={len:2,get(s,a){return d.read(s,a,!1,10,this.len)},put(s,a,r){return d.write(s,r,a,!1,10,this.len),a+this.len}},l.Float16_LE={len:2,get(s,a){return d.read(s,a,!0,10,this.len)},put(s,a,r){return d.write(s,r,a,!0,10,this.len),a+this.len}},l.Float32_BE={len:4,get:(s,a)=>m(s).getFloat32(a),put:(s,a,r)=>(m(s).setFloat32(a,r),a+4)},l.Float32_LE={len:4,get:(s,a)=>m(s).getFloat32(a,!0),put:(s,a,r)=>(m(s).setFloat32(a,r,!0),a+4)},l.Float64_BE={len:8,get:(s,a)=>m(s).getFloat64(a),put:(s,a,r)=>(m(s).setFloat64(a,r),a+8)},l.Float64_LE={len:8,get:(s,a)=>m(s).getFloat64(a,!0),put:(s,a,r)=>(m(s).setFloat64(a,r,!0),a+8)},l.Float80_BE={len:10,get(s,a){return d.read(s,a,!1,63,this.len)},put(s,a,r){return d.write(s,r,a,!1,63,this.len),a+this.len}},l.Float80_LE={len:10,get(s,a){return d.read(s,a,!0,63,this.len)},put(s,a,r){return d.write(s,r,a,!0,63,this.len),a+this.len}},l.IgnoreType=class{constructor(s){this.len=s}get(s,a){}},l.Uint8ArrayType=class{constructor(s){this.len=s}get(s,a){return s.subarray(a,a+this.len)}},l.BufferType=class{constructor(s){this.len=s}get(s,a){return c.from(s.subarray(a,a+this.len))}},l.StringType=class{constructor(s,a){this.len=s,this.encoding=a}get(s,a){return c.from(s).toString(this.encoding,a,a+this.len)}};class h{constructor(a){this.len=a}static decode(a,r,n){let t="";for(let i=r;i<n;++i)t+=h.codePointToString(h.singleByteDecoder(a[i]));return t}static inRange(a,r,n){return r<=a&&a<=n}static codePointToString(a){return a<=65535?String.fromCharCode(a):(a-=65536,String.fromCharCode(55296+(a>>10),56320+(1023&a)))}static singleByteDecoder(a){if(h.inRange(a,0,127))return a;const r=h.windows1252[a-128];if(r===null)throw Error("invaliding encoding");return r}get(a,r=0){return h.decode(a,r,r+this.len)}}l.AnsiStringType=h,h.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},1191:function(_,l,o){var c=o(4155),d=this&&this.__awaiter||function(f,p,y,g){return new(y||(y=Promise))((function(b,E){function x(O){try{S(g.next(O))}catch(C){E(C)}}function M(O){try{S(g.throw(O))}catch(C){E(C)}}function S(O){var C;O.done?b(O.value):(C=O.value,C instanceof y?C:new y((function(T){T(C)}))).then(x,M)}S((g=g.apply(f,p||[])).next())}))},m=this&&this.__generator||function(f,p){var y,g,b,E,x={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return E={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function M(S){return function(O){return(function(C){if(y)throw new TypeError("Generator is already executing.");for(;E&&(E=0,C[0]&&(x=0)),x;)try{if(y=1,g&&(b=2&C[0]?g.return:C[0]?g.throw||((b=g.return)&&b.call(g),0):g.next)&&!(b=b.call(g,C[1])).done)return b;switch(g=0,b&&(C=[2&C[0],b.value]),C[0]){case 0:case 1:b=C;break;case 4:return x.label++,{value:C[1],done:!1};case 5:x.label++,g=C[1],C=[0];continue;case 7:C=x.ops.pop(),x.trys.pop();continue;default:if(!((b=(b=x.trys).length>0&&b[b.length-1])||C[0]!==6&&C[0]!==2)){x=0;continue}if(C[0]===3&&(!b||C[1]>b[0]&&C[1]<b[3])){x.label=C[1];break}if(C[0]===6&&x.label<b[1]){x.label=b[1],b=C;break}if(b&&x.label<b[2]){x.label=b[2],x.ops.push(C);break}b[2]&&x.ops.pop(),x.trys.pop();continue}C=p.call(f,x)}catch(T){C=[6,T],g=0}finally{y=b=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}})([S,O])}}},h=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0}),l.GeoPackageAPI=void 0;var s=o(4325),a=o(5116),r=o(4275),n=o(3437),t=h(o(3935)),i=h(o(2203)),u=(function(){function f(){}return f.open=function(p){return d(this,void 0,void 0,(function(){var y,g;return m(this,(function(b){switch(b.label){case 0:if(typeof p=="string"&&(typeof p!="string"||p.indexOf("http")!==0&&r.GeoPackageValidate.validateGeoPackageExtension(p)))throw new Error("Invalid GeoPackage - Invalid GeoPackage Extension");b.label=1;case 1:return b.trys.push([1,3,,4]),[4,n.Canvas.initializeAdapter()];case 2:return b.sent(),[3,4];case 3:throw b.sent(),new Error("Unable to initialize canvas.");case 4:return b.trys.push([4,6,,7]),[4,a.GeoPackageConnection.connect(p)];case 5:return g=b.sent(),y=p&&typeof p=="string"?new s.GeoPackage(t.default.basename(p),p,g):new s.GeoPackage("geopackage",void 0,g),[3,7];case 6:throw b.sent(),new Error("Unable to open GeoPackage.");case 7:return[2,y]}}))}))},f.create=function(p){return d(this,void 0,void 0,(function(){var y,g;return m(this,(function(b){switch(b.label){case 0:if(typeof p=="string"&&(typeof p!="string"||r.GeoPackageValidate.validateGeoPackageExtension(p)))throw new Error("Invalid GeoPackage");if(c!==void 0&&c.version&&p)try{i.default.mkdirSync(t.default.dirname(p))}catch{}b.label=1;case 1:return b.trys.push([1,3,,4]),[4,n.Canvas.initializeAdapter()];case 2:return b.sent(),[3,4];case 3:throw b.sent(),new Error("Unable to initialize canvas.");case 4:return b.trys.push([4,7,,8]),[4,a.GeoPackageConnection.connect(p)];case 5:return(g=b.sent()).setApplicationId(),[4,(y=p?new s.GeoPackage(t.default.basename(p),p,g):new s.GeoPackage("geopackage",void 0,g)).createRequiredTables()];case 6:return b.sent(),y.createSupportedExtensions(),[3,8];case 7:throw b.sent(),new Error("Unable to create GeoPackage.");case 8:return[2,y]}}))}))},f.version="3.0.0",f})();l.GeoPackageAPI=u},8375:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.AttributesColumn=void 0;var m=o(5865),h=o(7319),s=o(5071),a=(function(r){function n(t,i,u,f,p,y,g,b){var E=r.call(this,t,i,u,f,p,y,g,b)||this;if(u===null)throw new Error("Data type is required to create column: "+i);return E}return d(n,r),n.createColumn=function(t,i,u,f,p,y,g){return f===void 0&&(f=!1),new n(t,i,u,y,f,p,!1,g)},n.createPrimaryKeyColumn=function(t,i,u){return u===void 0&&(u=s.UserTableDefaults.DEFAULT_AUTOINCREMENT),new n(t,i,h.GeoPackageDataType.INTEGER,void 0,void 0,void 0,!0,u)},n.prototype.copy=function(){return new n(this.index,this.name,this.dataType,this.max,this.notNull,this.defaultValue,this.primaryKey,this.autoincrement)},n})(m.UserColumn);l.AttributesColumn=a},6863:function(_,l,o){var c,d=this&&this.__extends||(c=function(h,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])},c(h,s)},function(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=h}c(h,s),h.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(l,"__esModule",{value:!0}),l.AttributesColumns=void 0;var m=(function(h){function s(a,r,n){var t=h.call(this,a,r,n)||this;return t.updateColumns(),t}return d(s,h),s.prototype.copy=function(){return new s(this.getTableName(),this.getColumns(),this.isCustom())},s})(o(2114).UserColumns);l.AttributesColumns=m},8008:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.AttributesDao=void 0;var m=o(4668),h=o(6861),s=(function(a){function r(n,t){var i=a.call(this,n,t)||this;if(!t.contents)throw new Error("Attributes table has null Contents");return i.contents=t.contents,i}return d(r,a),Object.defineProperty(r.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),r.prototype.newRow=function(n,t){return new h.AttributesRow(this.table,n,t)},r.readTable=function(n,t){return n.getAttributeDao(t)},r})(m.UserDao);l.AttributesDao=s},6861:function(_,l,o){var c,d=this&&this.__extends||(c=function(h,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])},c(h,s)},function(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=h}c(h,s),h.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(l,"__esModule",{value:!0}),l.AttributesRow=void 0;var m=(function(h){function s(a,r,n){return h.call(this,a,r,n)||this}return d(s,h),s})(o(2224).UserRow);l.AttributesRow=m},3931:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.AttributesTable=void 0;var m=o(8018),h=o(6863),s=o(9971),a=(function(r){function n(t,i){return r.call(this,new h.AttributesColumns(t,i,!1))||this}return d(n,r),n.prototype.setContents=function(t){if(this.contents=t,t.data_type!==s.ContentsDataType.ATTRIBUTES)throw new Error("The Contents of an Attributes Table must have a data type of ".concat(s.ContentsDataType.ATTRIBUTES));return!0},n})(m.UserTable);l.AttributesTable=a},464:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.AttributesTableReader=void 0;var m=o(4880),h=o(3931),s=o(8375),a=(function(r){function n(t){return r.call(this,t)||this}return d(n,r),n.prototype.readAttributeTable=function(t){return this.readTable(t.database)},n.prototype.createTable=function(t,i){return new h.AttributesTable(t,i)},n.prototype.createColumn=function(t){return new s.AttributesColumn(t.index,t.name,t.dataType,t.max,t.notNull,t.defaultValue,t.primaryKey,t.autoincrement)},n})(m.UserTableReader);l.AttributesTableReader=a},2527:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BoundingBox=void 0;var c=o(5604),d=o(1375),m=(function(){function h(s,a,r,n){s instanceof h?(this.minLongitude=s.minLongitude,this.maxLongitude=s.maxLongitude,this.minLatitude=s.minLatitude,this.maxLatitude=s.maxLatitude):(this.minLongitude=s,this.maxLongitude=a,this.minLatitude=r,this.maxLatitude=n)}return Object.defineProperty(h.prototype,"minLongitude",{get:function(){return this._minLongitude},set:function(s){this._minLongitude=s,this.width=this.maxLongitude-this.minLongitude},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"maxLongitude",{get:function(){return this._maxLongitude},set:function(s){this._maxLongitude=s,this.width=this.maxLongitude-this.minLongitude},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"minLatitude",{get:function(){return this._minLatitude},set:function(s){this._minLatitude=s,this.height=this.maxLatitude-this.minLatitude},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"maxLatitude",{get:function(){return this._maxLatitude},set:function(s){this._maxLatitude=s,this.height=this.maxLatitude-this.minLatitude},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"width",{get:function(){return this._width},set:function(s){this._width=s},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"height",{get:function(){return this._height},set:function(s){this._height=s},enumerable:!1,configurable:!0}),h.prototype.buildEnvelope=function(){return{minY:this.minLatitude,minX:this.minLongitude,maxY:this.maxLatitude,maxX:this.maxLongitude}},h.prototype.toGeoJSON=function(){return{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[this.minLongitude,this.minLatitude],[this.maxLongitude,this.minLatitude],[this.maxLongitude,this.maxLatitude],[this.minLongitude,this.maxLatitude],[this.minLongitude,this.minLatitude]]]}}},h.prototype.equals=function(s){return!!s&&(this===s||this.maxLatitude===s.maxLatitude&&this.minLatitude===s.minLatitude&&this.maxLongitude===s.maxLongitude&&this.maxLatitude===s.maxLatitude)},h.prototype.projectBoundingBox=function(s,a){var r=this.minLatitude,n=this.maxLatitude,t=this.minLongitude,i=this.maxLongitude;if(s&&s!=="undefined"&&a&&a!=="undefined"){c.Projection.isWebMercator(a)&&c.Projection.isWGS84(s)&&(n=Math.min(n,d.ProjectionConstants.WEB_MERCATOR_MAX_LAT_RANGE),r=Math.max(r,d.ProjectionConstants.WEB_MERCATOR_MIN_LAT_RANGE),i=Math.min(i,d.ProjectionConstants.WEB_MERCATOR_MAX_LON_RANGE),t=Math.max(t,d.ProjectionConstants.WEB_MERCATOR_MIN_LON_RANGE));var u=void 0;u=c.Projection.isConverter(a)?a:c.Projection.getConverter(a);var f=void 0;if(f=c.Projection.isConverter(s)?s:c.Projection.getConverter(s),c.Projection.convertersMatch(u,f))return new h(t,i,r,n);var p=u.forward(f.inverse([t,r])),y=u.forward(f.inverse([i,n])),g=u.forward(f.inverse([i,r])),b=u.forward(f.inverse([t,n]));return new h(Math.min(p[0],b[0]),Math.max(y[0],g[0]),Math.min(p[1],g[1]),Math.max(y[1],g[1]))}return this},h})();l.BoundingBox=m},3437:function(_,l){var o=this&&this.__awaiter||function(m,h,s,a){return new(s||(s=Promise))((function(r,n){function t(f){try{u(a.next(f))}catch(p){n(p)}}function i(f){try{u(a.throw(f))}catch(p){n(p)}}function u(f){var p;f.done?r(f.value):(p=f.value,p instanceof s?p:new s((function(y){y(p)}))).then(t,i)}u((a=a.apply(m,h||[])).next())}))},c=this&&this.__generator||function(m,h){var s,a,r,n,t={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function i(u){return function(f){return(function(p){if(s)throw new TypeError("Generator is already executing.");for(;n&&(n=0,p[0]&&(t=0)),t;)try{if(s=1,a&&(r=2&p[0]?a.return:p[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,p[1])).done)return r;switch(a=0,r&&(p=[2&p[0],r.value]),p[0]){case 0:case 1:r=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,a=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(!((r=(r=t.trys).length>0&&r[r.length-1])||p[0]!==6&&p[0]!==2)){t=0;continue}if(p[0]===3&&(!r||p[1]>r[0]&&p[1]<r[3])){t.label=p[1];break}if(p[0]===6&&t.label<r[1]){t.label=r[1],r=p;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(p);break}r[2]&&t.ops.pop(),t.trys.pop();continue}p=h.call(m,t)}catch(y){p=[6,y],a=0}finally{s=r=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}})([u,f])}}};Object.defineProperty(l,"__esModule",{value:!0}),l.Canvas=void 0;var d=(function(){function m(){}return m.registerCanvasAdapter=function(h){m.adapter=new h},m.adapterInitialized=function(){return m.adapter!=null&&m.adapter.isInitialized()},m.initializeAdapter=function(){return o(this,void 0,void 0,(function(){var h;return c(this,(function(s){switch(s.label){case 0:if(m.adapter.isInitialized())return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,m.adapter.initialize()];case 2:return s.sent(),[3,4];case 3:throw(h=s.sent())instanceof Error?h:new Error("error intializing canvas adapter: "+String(h));case 4:return[2]}}))}))},m.checkCanvasAdapter=function(){if(!m.adapter)throw new Error("Canvas adapter not registered.");if(!m.adapter.isInitialized())throw new Error("Canvas adapter not initialized.")},m.create=function(h,s){return m.checkCanvasAdapter(),m.adapter.create(h,s)},m.createImage=function(h,s){return s===void 0&&(s="image/png"),o(this,void 0,void 0,(function(){return c(this,(function(a){return m.checkCanvasAdapter(),[2,m.adapter.createImage(h,s)]}))}))},m.createImageData=function(h,s){return m.checkCanvasAdapter(),m.adapter.createImageData(h,s)},m.disposeCanvas=function(h){m.checkCanvasAdapter(),m.adapter.disposeCanvas(h)},m.measureText=function(h,s,a,r){return m.checkCanvasAdapter(),m.adapter.measureText(h,s,a,r)},m.drawText=function(h,s,a,r,n,t){return m.checkCanvasAdapter(),m.adapter.drawText(h,s,a,r,n,t)},m.scaleImage=function(h,s){return m.checkCanvasAdapter(),m.adapter.scaleImage(h,s)},m.scaleImageToDimensions=function(h,s,a){return m.checkCanvasAdapter(),m.adapter.scaleImageToDimensions(h,s,a)},m.toDataURL=function(h,s){return s===void 0&&(s="image/png"),o(this,void 0,void 0,(function(){return c(this,(function(a){return m.checkCanvasAdapter(),[2,m.adapter.toDataURL(h,s)]}))}))},m.disposeImage=function(h){m.checkCanvasAdapter(),m.adapter.disposeImage(h)},m.adapter=void 0,m})();l.Canvas=d},8038:function(_,l,o){var c=o(5108),d=o(3085).lW,m=this&&this.__awaiter||function(f,p,y,g){return new(y||(y=Promise))((function(b,E){function x(O){try{S(g.next(O))}catch(C){E(C)}}function M(O){try{S(g.throw(O))}catch(C){E(C)}}function S(O){var C;O.done?b(O.value):(C=O.value,C instanceof y?C:new y((function(T){T(C)}))).then(x,M)}S((g=g.apply(f,p||[])).next())}))},h=this&&this.__generator||function(f,p){var y,g,b,E,x={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return E={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function M(S){return function(O){return(function(C){if(y)throw new TypeError("Generator is already executing.");for(;E&&(E=0,C[0]&&(x=0)),x;)try{if(y=1,g&&(b=2&C[0]?g.return:C[0]?g.throw||((b=g.return)&&b.call(g),0):g.next)&&!(b=b.call(g,C[1])).done)return b;switch(g=0,b&&(C=[2&C[0],b.value]),C[0]){case 0:case 1:b=C;break;case 4:return x.label++,{value:C[1],done:!1};case 5:x.label++,g=C[1],C=[0];continue;case 7:C=x.ops.pop(),x.trys.pop();continue;default:if(!((b=(b=x.trys).length>0&&b[b.length-1])||C[0]!==6&&C[0]!==2)){x=0;continue}if(C[0]===3&&(!b||C[1]>b[0]&&C[1]<b[3])){x.label=C[1];break}if(C[0]===6&&x.label<b[1]){x.label=b[1],b=C;break}if(b&&x.label<b[2]){x.label=b[2],x.ops.push(C);break}b[2]&&x.ops.pop(),x.trys.pop();continue}C=p.call(f,x)}catch(T){C=[6,T],g=0}finally{y=b=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}})([S,O])}}},s=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(l,"__esModule",{value:!0}),l.CanvasKitCanvasAdapter=void 0;var a=s(o(3935)),r=s(o(4919)),n=s(o(8501)),t=s(o(8927)),i=o(1048),u=(function(){function f(){}return f.setCanvasKitWasmLocateFile=function(p){f.canvasKitWasmLocateFile=p},f.setCanvasKit=function(p){f.CanvasKit=p,f.initialized=!0},f.prototype.initialize=function(){return new Promise((function(p,y){try{(0,t.default)({locateFile:f.canvasKitWasmLocateFile}).then((function(g){f.CanvasKit=g,f.initialized=!0,p()})).catch((function(g){if(c.error("error initializing CanvasKit:",g),g instanceof Error)return y(g);y("Failed to load the CanvasKit WebAssembly file at "+f.canvasKitWasmLocateFile("canvaskit.wasm")+`.
Update file locator function using NodeCanvasAdapter.setCanvasKitWasmLocateFile.`)}))}catch{y("Failed to load the CanvasKit WebAssembly file at "+f.canvasKitWasmLocateFile("canvaskit.wasm")+`.
Update file locator function using NodeCanvasAdapter.setCanvasKitWasmLocateFile.`)}}))},f.prototype.isInitialized=function(){return f.initialized},f.prototype.create=function(p,y){return f.CanvasKit.MakeCanvas(p,y)},f.prototype.createImage=function(p,y){return m(this,void 0,void 0,(function(){var g,b,E,x;return h(this,(function(M){switch(M.label){case 0:g=p,M.label=1;case 1:return M.trys.push([1,7,,8]),typeof p!="string"?[3,6]:/^\s*data:/.test(p)?(g=i.CanvasUtils.base64toUInt8Array(p.split(",")[1]),[3,6]):[3,2];case 2:return/^\s*https?:\/\//.test(p)?[4,new Promise((function(S,O){n.default.get(p,(function(C){var T=[];C.statusCode===200?C.on("data",(function(R){T.push(R)})).on("end",(function(){S(d.concat(T).buffer)})).on("error",(function(R){O(R)})):O("Code: "+C.statusCode)}))}))]:[3,4];case 3:return g=M.sent(),[3,6];case 4:return[4,new Promise((function(S,O){r.default.readFile(p,(function(C,T){C?O(C):S(T)}))}))];case 5:g=M.sent(),M.label=6;case 6:return(b=f.CanvasKit.MakeImageFromEncoded(g))!=null&&(E=b.width(),x=b.height()),[3,8];case 7:throw M.sent(),new Error("Failed to create image.");case 8:if(b==null)throw new Error("Failed to create image.");return[2,{image:b,width:E,height:x}]}}))}))},f.prototype.createImageData=function(p,y){return new f.CanvasKit.ImageData(p,y)},f.prototype.disposeCanvas=function(p){p!=null&&(p.dispose(),p=null)},f.prototype.measureText=function(p,y,g,b){var E=new f.CanvasKit.Font(null,g),x=E.getGlyphIDs(b),M=new f.CanvasKit.Paint;M.setStyle(f.CanvasKit.PaintStyle.Fill);var S=E.getGlyphWidths(x,M).reduce((function(O,C){return O+C}),0);return M.delete(),S},f.prototype.drawText=function(p,y,g,b,E,x){p.save(),p.fillStyle=x,p.font=E+"px '"+b+"'",p.textBaseline="middle";var M=this.measureText(p,b,E,y);p.fillText(y,g[0]-M/2,g[1]+E/4),p.restore()},f.prototype.toDataURL=function(p,y){return y===void 0&&(y="image/png"),Promise.resolve(p.toDataURL(y))},f.prototype.scaleImage=function(p,y){return m(this,void 0,void 0,(function(){var g,b;return h(this,(function(E){return g=Math.round(y*p.width),b=Math.round(y*p.height),[2,this.scaleImageToDimensions(p,g,b)]}))}))},f.prototype.scaleImageToDimensions=function(p,y,g){return m(this,void 0,void 0,(function(){var b,E,x;return h(this,(function(M){switch(M.label){case 0:return(b=this.create(y,g)).getContext("2d").drawImage(p.image,0,0,y,g),x=this.createImage,[4,this.toDataURL(b,"image/png")];case 1:return[4,x.apply(this,[M.sent(),"image/png"])];case 2:return E=M.sent(),this.disposeCanvas(b),[2,E]}}))}))},f.prototype.disposeImage=function(p){p!=null&&p.image&&p.image.delete&&(p.image.delete(),p.image=null)},f.initialized=!1,f.canvasKitWasmLocateFile=function(p){return a.default.join("/","..","..","canvaskit",p)},f})();l.CanvasKitCanvasAdapter=u},1048:(_,l,o)=>{var c=o(3085).lW;Object.defineProperty(l,"__esModule",{value:!0}),l.CanvasUtils=void 0;var d=(function(){function m(){}return m.base64toUInt8Array=function(h){for(var s=c.from(h,"base64").toString("binary"),a=s.length,r=new Uint8Array(a);a--;)r[a]=s.charCodeAt(a);return r},m})();l.CanvasUtils=d},2807:function(_,l,o){var c=o(3085).lW,d=this&&this.__awaiter||function(s,a,r,n){return new(r||(r=Promise))((function(t,i){function u(y){try{p(n.next(y))}catch(g){i(g)}}function f(y){try{p(n.throw(y))}catch(g){i(g)}}function p(y){var g;y.done?t(y.value):(g=y.value,g instanceof r?g:new r((function(b){b(g)}))).then(u,f)}p((n=n.apply(s,a||[])).next())}))},m=this&&this.__generator||function(s,a){var r,n,t,i,u={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(p){return function(y){return(function(g){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(u=0)),u;)try{if(r=1,n&&(t=2&g[0]?n.return:g[0]?n.throw||((t=n.return)&&t.call(n),0):n.next)&&!(t=t.call(n,g[1])).done)return t;switch(n=0,t&&(g=[2&g[0],t.value]),g[0]){case 0:case 1:t=g;break;case 4:return u.label++,{value:g[1],done:!1};case 5:u.label++,n=g[1],g=[0];continue;case 7:g=u.ops.pop(),u.trys.pop();continue;default:if(!((t=(t=u.trys).length>0&&t[t.length-1])||g[0]!==6&&g[0]!==2)){u=0;continue}if(g[0]===3&&(!t||g[1]>t[0]&&g[1]<t[3])){u.label=g[1];break}if(g[0]===6&&u.label<t[1]){u.label=t[1],t=g;break}if(t&&u.label<t[2]){u.label=t[2],u.ops.push(g);break}t[2]&&u.ops.pop(),u.trys.pop();continue}g=a.call(s,u)}catch(b){g=[6,b],n=0}finally{r=t=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}})([p,y])}}};Object.defineProperty(l,"__esModule",{value:!0}),l.HtmlCanvasAdapter=void 0;var h=(function(){function s(){}return s.prototype.initialize=function(){return new Promise((function(a){s.initialized=!0,a()}))},s.prototype.isInitialized=function(){return s.initialized},s.prototype.create=function(a,r){var n=document.createElement("canvas");return n.width=a,n.height=r,n},s.prototype.createImage=function(a,r){return new Promise((function(n,t){var i=a;(a instanceof c||Object.prototype.toString.call(a)==="[object Uint8Array]")&&(i=URL.createObjectURL(new Blob([a],{type:r})));var u=new Image;u.onload=function(){var f={image:u,width:u.width,height:u.height};n(f)},u.onerror=function(f){t(f)},u.crossOrigin="Anonymous",u.src=i}))},s.prototype.createImageData=function(a,r){return new ImageData(a,r)},s.prototype.disposeCanvas=function(a){},s.prototype.measureText=function(a,r,n,t){a.save(),a.font=n+"px"+(r!=null?" '"+r+"'":""),a.textBaseline="middle",a.textAlign="center";var i=a.measureText(t).width;return a.restore(),i},s.prototype.drawText=function(a,r,n,t,i,u){a.save(),a.font=i+"px"+(t!=null?" '"+t+"'":""),a.fillStyle=u,a.textBaseline="middle",a.textAlign="center",a.fillText(r,n[0],n[1]),a.restore()},s.prototype.scaleImage=function(a,r){return d(this,void 0,void 0,(function(){var n,t;return m(this,(function(i){return r===1?[2,a]:(n=Math.round(r*a.width),t=Math.round(r*a.height),[2,this.scaleImageToDimensions(a,n,t)])}))}))},s.prototype.scaleImageToDimensions=function(a,r,n){return d(this,void 0,void 0,(function(){var t,i,u;return m(this,(function(f){switch(f.label){case 0:return(t=this.create(r,n)).getContext("2d").drawImage(a.image,0,0,r,n),u=this.createImage,[4,this.toDataURL(t,"image/png")];case 1:return[4,u.apply(this,[f.sent(),"image/png"])];case 2:return i=f.sent(),this.disposeCanvas(t),[2,i]}}))}))},s.prototype.toDataURL=function(a,r){return r===void 0&&(r="image/png"),Promise.resolve(a.toDataURL(r))},s.prototype.disposeImage=function(a){},s.initialized=!1,s})();l.HtmlCanvasAdapter=h},342:function(_,l,o){var c=o(3085).lW,d=this&&this.__awaiter||function(a,r,n,t){return new(n||(n=Promise))((function(i,u){function f(g){try{y(t.next(g))}catch(b){u(b)}}function p(g){try{y(t.throw(g))}catch(b){u(b)}}function y(g){var b;g.done?i(g.value):(b=g.value,b instanceof n?b:new n((function(E){E(b)}))).then(f,p)}y((t=t.apply(a,r||[])).next())}))},m=this&&this.__generator||function(a,r){var n,t,i,u,f={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function p(y){return function(g){return(function(b){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,b[0]&&(f=0)),f;)try{if(n=1,t&&(i=2&b[0]?t.return:b[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,b[1])).done)return i;switch(t=0,i&&(b=[2&b[0],i.value]),b[0]){case 0:case 1:i=b;break;case 4:return f.label++,{value:b[1],done:!1};case 5:f.label++,t=b[1],b=[0];continue;case 7:b=f.ops.pop(),f.trys.pop();continue;default:if(!((i=(i=f.trys).length>0&&i[i.length-1])||b[0]!==6&&b[0]!==2)){f=0;continue}if(b[0]===3&&(!i||b[1]>i[0]&&b[1]<i[3])){f.label=b[1];break}if(b[0]===6&&f.label<i[1]){f.label=i[1],i=b;break}if(i&&f.label<i[2]){f.label=i[2],f.ops.push(b);break}i[2]&&f.ops.pop(),f.trys.pop();continue}b=r.call(a,f)}catch(E){b=[6,E],t=0}finally{n=i=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}})([y,g])}}};Object.defineProperty(l,"__esModule",{value:!0}),l.OffscreenCanvasAdapter=void 0;var h=o(1048),s=(function(){function a(){}return a.prototype.initialize=function(){return new Promise((function(r){a.initialized=!0,r()}))},a.prototype.isInitialized=function(){return a.initialized},a.prototype.create=function(r,n){return new OffscreenCanvas(r,n)},a.prototype.createImage=function(r,n){return n===void 0&&(n="image/png"),new Promise((function(t,i){var u=r;r instanceof c||Object.prototype.toString.call(r)==="[object Uint8Array]"?u=new Blob([r],{type:n}):typeof r=="string"&&(u=new Blob([h.CanvasUtils.base64toUInt8Array(r.split(",")[1])],{type:n})),createImageBitmap(u).then((function(f){t({image:f,width:f.width,height:f.height})})).catch((function(f){i(f)}))}))},a.prototype.createImageData=function(r,n){return new ImageData(r,n)},a.prototype.disposeCanvas=function(r){},a.prototype.measureText=function(r,n,t,i){r.save(),r.font=t+"px"+(n!=null?" '"+n+"'":""),r.textBaseline="middle",r.textAlign="center";var u=r.measureText(i).width;return r.restore(),u},a.prototype.drawText=function(r,n,t,i,u,f){r.save(),r.font=u+"px"+(i!=null?" '"+i+"'":""),r.fillStyle=f,r.textBaseline="middle",r.textAlign="center",r.fillText(n,t[0],t[1]),r.restore()},a.prototype.scaleImage=function(r,n){return d(this,void 0,void 0,(function(){var t,i;return m(this,(function(u){return n===1?[2,r]:(t=Math.round(n*r.width),i=Math.round(n*r.height),[2,this.scaleImageToDimensions(r,t,i)])}))}))},a.prototype.scaleImageToDimensions=function(r,n,t){return d(this,void 0,void 0,(function(){var i,u;return m(this,(function(f){return(i=this.create(n,t)).getContext("2d").drawImage(r.image,0,0,n,t),u={image:i.transferToImageBitmap(),width:n,height:t},this.disposeCanvas(i),[2,u]}))}))},a.prototype.toDataURL=function(r,n){return n===void 0&&(n="image/png"),new Promise((function(t){r.convertToBlob({type:n}).then((function(i){var u=new FileReader;u.addEventListener("load",(function(){var f=u.result;t(f)})),u.readAsDataURL(i)}))}))},a.prototype.disposeImage=function(r){},a.initialized=!1,a})();l.OffscreenCanvasAdapter=s},1150:function(_,l,o){var c=o(5108),d=o(4155),m=this&&this.__awaiter||function(p,y,g,b){return new(g||(g=Promise))((function(E,x){function M(C){try{O(b.next(C))}catch(T){x(T)}}function S(C){try{O(b.throw(C))}catch(T){x(T)}}function O(C){var T;C.done?E(C.value):(T=C.value,T instanceof g?T:new g((function(R){R(T)}))).then(M,S)}O((b=b.apply(p,y||[])).next())}))},h=this&&this.__generator||function(p,y){var g,b,E,x,M={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return x={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function S(O){return function(C){return(function(T){if(g)throw new TypeError("Generator is already executing.");for(;x&&(x=0,T[0]&&(M=0)),M;)try{if(g=1,b&&(E=2&T[0]?b.return:T[0]?b.throw||((E=b.return)&&E.call(b),0):b.next)&&!(E=E.call(b,T[1])).done)return E;switch(b=0,E&&(T=[2&T[0],E.value]),T[0]){case 0:case 1:E=T;break;case 4:return M.label++,{value:T[1],done:!1};case 5:M.label++,b=T[1],T=[0];continue;case 7:T=M.ops.pop(),M.trys.pop();continue;default:if(!((E=(E=M.trys).length>0&&E[E.length-1])||T[0]!==6&&T[0]!==2)){M=0;continue}if(T[0]===3&&(!E||T[1]>E[0]&&T[1]<E[3])){M.label=T[1];break}if(T[0]===6&&M.label<E[1]){M.label=E[1],E=T;break}if(E&&M.label<E[2]){M.label=E[2],M.ops.push(T);break}E[2]&&M.ops.pop(),M.trys.pop();continue}T=y.call(p,M)}catch(R){T=[6,R],b=0}finally{g=E=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}})([O,C])}}};Object.defineProperty(l,"__esModule",{value:!0}),l.Context=void 0;var s=o(4777),a=o(922),r=o(6328),n=o(3437),t=o(8038),i=o(2807),u=o(342),f=(function(){function p(){}return p.initializeContext=function(){return m(this,void 0,void 0,(function(){return h(this,(function(y){switch(y.label){case 0:return[4,n.Canvas.initializeAdapter()];case 1:return y.sent(),[2]}}))}))},p.registerSqliteAdapter=function(){try{o(1498),s.Db.registerDbAdapter(a.SqliteAdapter)}catch(y){c.error("Unable to register SqliteAdapter. The better-sqlite3 module was not found. Falling back to SqljsAdapter.",y),s.Db.registerDbAdapter(r.SqljsAdapter)}},p.setupNodeContext=function(){p.registerSqliteAdapter(),n.Canvas.registerCanvasAdapter(t.CanvasKitCanvasAdapter)},p.setupBrowserContext=function(){s.Db.registerDbAdapter(r.SqljsAdapter),n.Canvas.registerCanvasAdapter(i.HtmlCanvasAdapter)},p.setupWebWorkerContext=function(){s.Db.registerDbAdapter(r.SqljsAdapter),n.Canvas.registerCanvasAdapter(u.OffscreenCanvasAdapter)},p.setupCustomContext=function(y,g){s.Db.registerDbAdapter(y),n.Canvas.registerCanvasAdapter(g)},p.setupDefaultContext=function(){p.isNode?p.setupNodeContext():p.isBrowser?p.setupBrowserContext():p.isWebWorker&&p.setupWebWorkerContext()},p.isNode=d!==void 0&&d.versions!=null&&d.versions.node!=null,p.isBrowser=typeof window<"u"&&window.document!==void 0,p.isWebWorker=typeof importScripts<"u",p})();l.Context=f},5897:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Contents=void 0;var o=(function(){function c(){}return c.prototype.copy=function(){var d=new c;return d.table_name=this.table_name,d.data_type=this.data_type,d.identifier=this.identifier,d.description=this.description,d.min_x=this.min_x,d.max_x=this.max_x,d.min_y=this.min_y,d.max_y=this.max_y,d.srs_id=this.srs_id,d},c.prototype.getTableName=function(){return this.table_name},c})();l.Contents=o},6638:function(_,l,o){var c,d=this&&this.__extends||(c=function(y,g){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,E){b.__proto__=E}||function(b,E){for(var x in E)Object.prototype.hasOwnProperty.call(E,x)&&(b[x]=E[x])},c(y,g)},function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function b(){this.constructor=y}c(y,g),y.prototype=g===null?Object.create(g):(b.prototype=g.prototype,new b)}),m=this&&this.__values||function(y){var g=typeof Symbol=="function"&&Symbol.iterator,b=g&&y[g],E=0;if(b)return b.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&E>=y.length&&(y=void 0),{value:y&&y[E++],done:!y}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(l,"__esModule",{value:!0}),l.ContentsDao=void 0;var h=o(4115),s=o(3506),a=o(5925),r=o(1968),n=o(5897),t=o(8572),i=o(2527),u=o(9971),f=o(1375),p=(function(y){function g(){var b=y!==null&&y.apply(this,arguments)||this;return b.gpkgTableName=g.TABLE_NAME,b.idColumns=[g.COLUMN_PK],b}return d(g,y),g.prototype.createObject=function(b){var E=new n.Contents;return b&&(E.table_name=b.table_name,E.data_type=b.data_type,E.identifier=b.identifier,E.description=b.description,E.last_change=b.last_change,E.min_y=b.min_y,E.max_y=b.max_y,E.min_x=b.min_x,E.max_x=b.max_x,E.srs_id=b.srs_id),E},g.prototype.getTables=function(b){var E;if(b){var x=new t.ColumnValues;x.addColumn(g.COLUMN_DATA_TYPE,b),E=this.queryForColumns("table_name",x)}else E=this.queryForColumns("table_name");for(var M=[],S=0;S<E.length;S++)M.push(E[S].table_name);return M},g.prototype.getContentsForTableType=function(b,E){var x,M;E===void 0&&(E=!1);var S=[];if(b){var O=new t.ColumnValues;O.addColumn(g.COLUMN_DATA_TYPE,b);try{for(var C=m(this.queryForFieldValues(O)),T=C.next();!T.done;T=C.next()){var R=T.value;if(E){var B=new i.BoundingBox(R.min_x,R.max_x,R.min_y,R.max_y).projectBoundingBox(this.getProjection(R),f.ProjectionConstants.EPSG_4326);R.min_x=B.minLongitude,R.max_x=B.maxLongitude,R.min_y=B.minLatitude,R.max_y=B.maxLatitude}S.push(R)}}catch(z){x={error:z}}finally{try{T&&!T.done&&(M=C.return)&&M.call(C)}finally{if(x)throw x.error}}}return S},g.prototype.getProjection=function(b){var E=this.getSrs(b);return this.geoPackage.spatialReferenceSystemDao.getProjection(E)},g.prototype.getSrs=function(b){return this.geoPackage.spatialReferenceSystemDao.queryForId(b.srs_id)},g.prototype.getGeometryColumns=function(b){var E=this.geoPackage.geometryColumnsDao,x=E.queryForAllEq(r.GeometryColumnsDao.COLUMN_TABLE_NAME,b.table_name);if(x?.length)return E.createObject(x[0])},g.prototype.getTileMatrixSet=function(b){var E=this.geoPackage.tileMatrixSetDao,x=E.queryForAllEq(a.TileMatrixSetDao.COLUMN_TABLE_NAME,b.table_name);if(x?.length)return E.createObject(x[0])},g.prototype.getTileMatrix=function(b){var E=this.geoPackage.tileMatrixDao,x=E.queryForAllEq(s.TileMatrixDao.COLUMN_TABLE_NAME,b.table_name);if(x&&x.length){for(var M=[],S=0;S<x.length;S++){var O=E.createObject(x[S]);M.push(O)}return M}},g.prototype.deleteCascadeContents=function(b){var E=0;if(b!=null){var x=u.ContentsDataType.fromName(b.data_type);if(x!=null)switch(x){case u.ContentsDataType.FEATURES:var M=this.geoPackage.geometryColumnsDao;if(M.isTableExists()){var S=this.getGeometryColumns(b);S!=null&&M.deleteByMultiId([S.table_name,S.column_name])}break;case u.ContentsDataType.TILES:var O=this.geoPackage.tileMatrixDao;if(O.isTableExists()){var C=this.getTileMatrix(b);C!=null&&C.length>0&&C.forEach((function(B){O.deleteByMultiId([B.table_name,B.zoom_level])}))}var T=this.geoPackage.tileMatrixSetDao;if(T.isTableExists()){var R=this.getTileMatrixSet(b);R!=null&&T.deleteById(R.table_name)}break;case u.ContentsDataType.ATTRIBUTES:this.dropTableWithTableName(b.table_name)}else this.dropTableWithTableName(b.table_name);E=this.delete(b)}return E},g.prototype.deleteCascade=function(b,E){var x=this.deleteCascadeContents(b);return E&&this.dropTableWithTableName(b.table_name),x},g.prototype.deleteByIdCascade=function(b,E){var x=0;if(b!=null){var M=this.queryForId(b);M!=null?x=this.deleteCascade(M,E):E&&this.dropTableWithTableName(b)}return x},g.prototype.deleteTable=function(b){try{this.deleteByIdCascade(b,!0)}catch{throw new Error("Failed to delete table: "+b)}},g.TABLE_NAME="gpkg_contents",g.COLUMN_PK="table_name",g.COLUMN_TABLE_NAME="table_name",g.COLUMN_DATA_TYPE="data_type",g.COLUMN_IDENTIFIER="identifier",g.COLUMN_DESCRIPTION="description",g.COLUMN_LAST_CHANGE="last_change",g.COLUMN_MIN_X="min_x",g.COLUMN_MIN_Y="min_y",g.COLUMN_MAX_X="max_x",g.COLUMN_MAX_Y="max_y",g.COLUMN_SRS_ID="srs_id",g})(h.Dao);l.ContentsDao=p},9971:(_,l)=>{var o;Object.defineProperty(l,"__esModule",{value:!0}),l.ContentsDataType=void 0,(o=l.ContentsDataType||(l.ContentsDataType={})).FEATURES="features",o.TILES="tiles",o.ATTRIBUTES="attributes",(function(c){c.nameFromType=function(d){return c[d]},c.fromName=function(d){var m=null;if(d!=null)switch(d.toLowerCase()){case c.FEATURES:m=c.FEATURES;break;case c.TILES:m=c.TILES;break;case c.ATTRIBUTES:m=c.ATTRIBUTES}return m}})(l.ContentsDataType||(l.ContentsDataType={}))},341:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SpatialReferenceSystem=void 0;var c=o(5604),d=o(1375),m=(function(){function h(){}return Object.defineProperty(h.prototype,"projection",{get:function(){return this.organization==="NONE"?null:!this.organization||this.organization.toUpperCase()!==d.ProjectionConstants.EPSG||this.organization_coordsys_id!==d.ProjectionConstants.EPSG_CODE_4326&&this.organization_coordsys_id!==d.ProjectionConstants.EPSG_CODE_3857?this.definition_12_063&&this.definition_12_063!==""&&this.definition_12_063!=="undefined"?c.Projection.getConverter(this.definition_12_063):this.definition&&this.definition!==""&&this.definition!=="undefined"?c.Projection.getConverter(this.definition):null:c.Projection.getEPSGConverter(this.organization_coordsys_id)},enumerable:!1,configurable:!0}),h.TABLE_NAME="gpkg_spatial_ref_sys",h})();l.SpatialReferenceSystem=m},5965:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.SpatialReferenceSystemDao=void 0;var m=o(4115),h=o(341),s=o(8572),a=o(1375),r=(function(n){function t(){var i=n!==null&&n.apply(this,arguments)||this;return i.idColumns=[t.COLUMN_SRS_ID],i.gpkgTableName=t.TABLE_NAME,i}return d(t,n),t.prototype.createObject=function(i){var u=new h.SpatialReferenceSystem;return i&&(u.srs_name=i.srs_name,u.srs_id=i.srs_id,u.organization=i.organization,u.organization_coordsys_id=i.organization_coordsys_id,u.definition=i.definition,u.definition_12_063=i.definition,u.description=i.description),u},t.prototype.getAllSpatialReferenceSystems=function(){var i=[];if(this.connection!=null&&this.isTableExists()){var u=this.queryForAll();if(u&&u.length)for(var f=0;f<u.length;f++)i.push(this.createObject(u[f]))}return i},t.prototype.getByOrganizationAndCoordSysId=function(i,u){var f=new s.ColumnValues;f.addColumn("organization",i),f.addColumn("organization_coordsys_id",u);var p=this.queryForAll(this.buildWhere(f),this.buildWhereArgs(f));if(p&&p.length)return this.createObject(p[0])},t.prototype.getBySrsId=function(i){return this.queryForId(i)},t.prototype.getProjection=function(i){return i.projection},t.prototype.createWgs84=function(){var i=this.getBySrsId(a.ProjectionConstants.EPSG_CODE_4326);return i?i.srs_id:((i=new h.SpatialReferenceSystem).srs_name="WGS 84 geodetic",i.srs_id=a.ProjectionConstants.EPSG_CODE_4326,i.organization="EPSG",i.organization_coordsys_id=a.ProjectionConstants.EPSG_CODE_4326,i.definition='GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]]',i.description="longitude/latitude coordinates in decimal degrees on the WGS 84 spheroid",this.connection.columnAndTableExists("gpkg_spatial_ref_sys","definition_12_063")&&(i.definition_12_063='GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]]'),this.create(i))},t.prototype.createUndefinedCartesian=function(){var i=this.getBySrsId(-1);return i?i.srs_id:((i=new h.SpatialReferenceSystem).srs_name="Undefined cartesian SRS",i.srs_id=-1,i.organization="NONE",i.organization_coordsys_id=-1,i.definition="undefined",i.description="undefined cartesian coordinate reference system",this.connection.columnAndTableExists("gpkg_spatial_ref_sys","definition_12_063")&&(i.definition_12_063="undefined"),this.create(i))},t.prototype.createUndefinedGeographic=function(){var i=this.getBySrsId(0);return i?i.srs_id:((i=new h.SpatialReferenceSystem).srs_name="Undefined geographic SRS",i.srs_id=0,i.organization="NONE",i.organization_coordsys_id=0,i.definition="undefined",i.description="undefined geographic coordinate reference system",this.connection.columnAndTableExists("gpkg_spatial_ref_sys","definition_12_063")&&(i.definition_12_063="undefined"),this.create(i))},t.prototype.createWebMercator=function(){var i=this.getByOrganizationAndCoordSysId(a.ProjectionConstants.EPSG,a.ProjectionConstants.EPSG_CODE_3857);return i?i.srs_id:((i=new h.SpatialReferenceSystem).srs_name="WGS 84 / Pseudo-Mercator",i.srs_id=a.ProjectionConstants.EPSG_CODE_3857,i.organization="EPSG",i.organization_coordsys_id=a.ProjectionConstants.EPSG_CODE_3857,i.definition='PROJCS["WGS 84 / Pseudo-Mercator",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_1SP"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["X",EAST],AXIS["Y",NORTH],EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],AUTHORITY["EPSG","3857"]]',i.description="Spherical Mercator projection coordinate system",this.connection.columnAndTableExists("gpkg_spatial_ref_sys","definition_12_063")&&(i.definition_12_063='PROJCS["WGS 84 / Pseudo-Mercator",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_1SP"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["X",EAST],AXIS["Y",NORTH],EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],AUTHORITY["EPSG","3857"]]'),this.create(i))},t.TABLE_NAME="gpkg_spatial_ref_sys",t.COLUMN_SRS_NAME="srs_name",t.COLUMN_SRS_ID="srs_id",t.COLUMN_ID=t.COLUMN_SRS_ID,t.COLUMN_ORGANIZATION="organization",t.COLUMN_ORGANIZATION_COORDSYS_ID="organization_coordsys_id",t.COLUMN_DEFINITION="definition",t.COLUMN_DESCRIPTION="description",t})(m.Dao);l.SpatialReferenceSystemDao=r},8572:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColumnValues=void 0;var o=(function(){function c(){this.values={},this.columns=[]}return c.prototype.addColumn=function(d,m){this.columns.push(d),this.values[d]=m},c.prototype.getValue=function(d){return this.values[d]},c})();l.ColumnValues=o},4115:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Dao=void 0;var c=o(8572),d=o(8877),m=o(5042),h=(function(){function s(a){this.geoPackage=a,this.connection=a.database}return s.prototype.isTableExists=function(){return this.connection.isTableExists(this.gpkgTableName)},s.prototype.refresh=function(a){return this.queryForSameId(a)},s.prototype.queryForId=function(a){var r=this.buildPkWhere(a),n=this.buildPkWhereArgs(a),t=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",void 0,r),i=this.connection.get(t,n);if(i)return this.createObject(i)},s.prototype.queryForSameId=function(a){var r=this.getMultiId(a);return this.queryForMultiId(r)},s.prototype.getMultiId=function(a){for(var r=[],n=0;n<this.idColumns.length;n++){var t=a.values?a.values[this.idColumns[n]]:a[this.idColumns[n]];t!==void 0&&r.push(t)}return r},s.prototype.queryForMultiId=function(a){var r=this.buildPkWhere(a),n=this.buildPkWhereArgs(a),t=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",void 0,r),i=this.connection.get(t,n);if(i)return this.createObject(i)},s.prototype.queryForAll=function(a,r){var n=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",void 0,a);return this.connection.all(n,r)},s.prototype.queryForLike=function(a,r){var n=new c.ColumnValues;n.addColumn(a,r);var t=this.buildWhereLike(n),i=this.buildWhereArgs(r),u=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",void 0,t);return this.connection.all(u,i)},s.prototype.queryForColumns=function(a,r){var n=void 0,t=null;r&&(n=this.buildWhere(r),t=this.buildWhereArgs(r));var i=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",[a],n);return this.connection.all(i,t)},s.prototype.queryForChunk=function(a,r){var n=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",void 0,void 0,void 0,void 0,void 0,this.idColumns[0],a,r*a);return this.connection.all(n)},s.prototype.queryForEach=function(a,r,n,t,i,u){if(a){var f=this.buildWhereWithFieldAndValue(a,r),p=this.buildWhereArgs(r);return y=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",void 0,f,void 0,n,t,i),this.connection.each(y,p)}var y=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",u,void 0,void 0,n,t,i);return this.connection.each(y)},s.prototype.queryForFieldValues=function(a){var r=this.buildWhere(a),n=this.buildWhereArgs(a),t=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",void 0,r);return this.connection.each(t,n)},s.prototype.queryJoinWhereWithArgs=function(a,r,n,t){var i=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",t,r,a);return this.connection.each(i,n)},s.prototype.countJoinWhereWithArgs=function(a,r,n){var t="select COUNT(*) as count from '"+this.gpkgTableName+"' "+a+" where "+r,i=this.connection.get(t,n);return i?.count},s.prototype.queryWhereWithArgsDistinct=function(a,r){var n=d.SqliteQueryBuilder.buildQuery(!0,"'"+this.gpkgTableName+"'",void 0,a);return this.connection.each(n,r)},s.prototype.queryWhere=function(a,r,n,t,i,u){var f=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",void 0,a,void 0,n,t,i,u);return this.connection.each(f,r)},s.prototype.buildPkWhere=function(a){if(Array.isArray(a)){for(var r=a,n=new c.ColumnValues,t=0;t<r.length;t++)n.addColumn(this.idColumns[t],r[t]);return this.buildWhere(n)}return this.buildWhereWithFieldAndValue(this.idColumns[0],a)},s.prototype.buildPkWhereArgs=function(a){if(Array.isArray(a)){for(var r=a,n=[],t=0;t<r.length;t++)n=n.concat(this.buildWhereArgs(r[t]));return n}return this.buildWhereArgs(a)},s.prototype.buildWhereLike=function(a,r){for(var n="",t=0;t<a.columns.length;t++){var i=a.columns[t];t&&(n+=" "+r+" "),n+=this.buildWhereWithFieldAndValue(i,a.getValue(i),"like")}return n},s.prototype.buildWhere=function(a,r){r===void 0&&(r="and");for(var n="",t=0;t<a.columns.length;t++){var i=a.columns[t];t&&(n+=" "+r+" "),n+=this.buildWhereWithFieldAndValue(i,a.getValue(i))}return n},s.prototype.buildWhereArgs=function(a){var r=[];return Array.isArray(a)?r=this._buildWhereArgsWithArray(a):a instanceof c.ColumnValues?r=this._buildWhereArgsWithColumnValues(a):a!=null&&r.push(a),r.length?r:null},s.prototype._buildWhereArgsWithArray=function(a){for(var r=[],n=0;n<a.length;n++){var t=a[n];t!=null&&r.push(t)}return r},s.prototype._buildWhereArgsWithColumnValues=function(a){for(var r=[],n=0;n<a.columns.length;n++){var t=a.columns[n],i=a.getValue(t);i!=null&&r.push(i)}return r},s.prototype.buildWhereWithFieldAndValue=function(a,r,n){return n===void 0&&(n="="),a+" "+(r==null?"is null":n+" ?")},s.prototype.queryForAllEq=function(a,r,n,t,i){var u=this.buildWhereWithFieldAndValue(a,r),f=this.buildWhereArgs(r),p=d.SqliteQueryBuilder.buildQuery(!1,"'"+this.gpkgTableName+"'",void 0,u,void 0,n,t,i);return this.connection.all(p,f)},s.prototype.count=function(a,r){if(!a)return this.connection.count(this.gpkgTableName);var n,t,i;if(a instanceof c.ColumnValues)n=this.buildWhere(a,"and"),t=this.buildWhereArgs(a),i=d.SqliteQueryBuilder.buildCount("'"+this.gpkgTableName+"'",n);else{var u=this.buildWhereWithFieldAndValue(a,r);t=this.buildWhereArgs(r),i=d.SqliteQueryBuilder.buildCount("'"+this.gpkgTableName+"'",u)}var f=this.connection.get(i,t);return f?.count},s.prototype.countWhere=function(a,r){var n=d.SqliteQueryBuilder.buildCount("'"+this.gpkgTableName+"'",a),t=this.connection.get(n,r);return t?.count},s.prototype.minOfColumn=function(a,r,n){return this.connection.minOfColumn("'"+this.gpkgTableName+"'",a,r,n)},s.prototype.maxOfColumn=function(a,r,n){return this.connection.maxOfColumn("'"+this.gpkgTableName+"'",a,r,n)},s.prototype.delete=function(a){return typeof a.getId=="function"?this.deleteById(a.getId()):this.deleteByMultiId(this.getMultiId(a))},s.prototype.deleteById=function(a){var r=this.buildPkWhere(a),n=this.buildPkWhereArgs(a);return this.connection.delete("'"+this.gpkgTableName+"'",r,n)},s.prototype.deleteByMultiId=function(a){var r=this.buildPkWhere(a),n=this.buildPkWhereArgs(a);return this.connection.delete("'"+this.gpkgTableName+"'",r,n)},s.prototype.deleteWhere=function(a,r){return this.connection.delete("'"+this.gpkgTableName+"'",a,r)},s.prototype.deleteAll=function(){return this.connection.delete("'"+this.gpkgTableName+"'","",[])},s.prototype.create=function(a){var r=d.SqliteQueryBuilder.buildInsert("'"+this.gpkgTableName+"'",a),n=d.SqliteQueryBuilder.buildUpdateOrInsertObject(a);return this.connection.insert(r,n)},s.prototype.updateWithValues=function(a,r,n){var t=d.SqliteQueryBuilder.buildUpdate("'"+this.gpkgTableName+"'",a,r,n);return this.connection.run(t.sql,t.args)},s.prototype.update=function(a){var r=d.SqliteQueryBuilder.buildUpdateOrInsertObject(a),n=d.SqliteQueryBuilder.buildObjectUpdate("'"+this.gpkgTableName+"'",a),t=this.getMultiId(a);if(t.length){for(var i=" where ",u=0;u<t.length;u++)i+='"'+this.idColumns[u]+'" = $'+d.SqliteQueryBuilder.fixColumnName(this.idColumns[u]),r[d.SqliteQueryBuilder.fixColumnName(this.idColumns[u])]=t[u];n+=i}return this.connection.run(n,r)},s.prototype.createOrUpdate=function(a){return this.queryForSameId(a)?this.update(a).changes:this.create(a)},s.prototype.dropTable=function(){return this.connection.dropTable(this.gpkgTableName)},s.prototype.dropTableWithTableName=function(a){m.CoreSQLUtils.dropTable(this.geoPackage.connection,a)},s.prototype.rename=function(a){this.connection.run("ALTER TABLE '"+this.gpkgTableName+"' RENAME TO '"+a+"'"),this.gpkgTableName=a},s})();l.Dao=h},8590:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DataColumnConstraints=void 0,l.DataColumnConstraints=function(){}},7175:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.DataColumnConstraintsDao=void 0;var m=o(4115),h=o(8590),s=(function(a){function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.gpkgTableName=r.TABLE_NAME,n.idColumns=[r.COLUMN_CONSTRAINT_NAME,r.COLUMN_CONSTRAINT_TYPE,r.COLUMN_VALUE],n}return d(r,a),r.prototype.createObject=function(n){var t=new h.DataColumnConstraints;return n&&(t.constraint_name=n.constraint_name,t.constraint_type=n.constraint_type,t.value=n.value,t.min=n.min,t.max=n.max,t.min_is_inclusive=n.min_is_inclusive,t.max_is_inclusive=n.max_is_inclusive,t.description=n.description),t},r.prototype.queryByConstraintName=function(n){return this.queryForEach(r.COLUMN_CONSTRAINT_NAME,n)},r.prototype.queryUnique=function(n,t,i){var u=new h.DataColumnConstraints;return u.constraint_name=n,u.constraint_type=t,u.value=i,this.queryForSameId(u)},r.TABLE_NAME="gpkg_data_column_constraints",r.COLUMN_CONSTRAINT_NAME="constraint_name",r.COLUMN_CONSTRAINT_TYPE="constraint_type",r.COLUMN_VALUE="value",r.COLUMN_MIN="min",r.COLUMN_MIN_IS_INCLUSIVE="min_is_inclusive",r.COLUMN_MAX="max",r.COLUMN_MAX_IS_INCLUSIVE="max_is_inclusive",r.COLUMN_DESCRIPTION="description",r.ENUM_TYPE="enum",r.GLOB_TYPE="glob",r.RANGE_TYPE="range",r})(m.Dao);l.DataColumnConstraintsDao=s},8133:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DataColumns=void 0,l.DataColumns=function(o){o=o||{},this.table_name=o.table_name,this.column_name=o.column_name,this.name=o.name,this.title=o.title,this.description=o.description,this.mime_type=o.mime_type,this.constraint_name=o.constraint_name}},4941:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}),m=this&&this.__values||function(n){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&n[t],u=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&u>=n.length&&(n=void 0),{value:n&&n[u++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(l,"__esModule",{value:!0}),l.DataColumnsDao=void 0;var h=o(4115),s=o(6638),a=o(8133),r=(function(n){function t(){var i=n!==null&&n.apply(this,arguments)||this;return i.gpkgTableName=t.TABLE_NAME,i.idColumns=[t.COLUMN_PK1,t.COLUMN_PK2],i}return d(t,n),t.prototype.createObject=function(i){var u=new a.DataColumns;return i&&(u.table_name=i.table_name,u.column_name=i.column_name,u.name=i.name,u.title=i.title,u.description=i.description,u.mime_type=i.mime_type,u.constraint_name=i.constraint_name),u},t.prototype.getContents=function(i){return new s.ContentsDao(this.geoPackage).queryForId(i.table_name)},t.prototype.queryByConstraintName=function(i){return this.queryForEach(t.COLUMN_CONSTRAINT_NAME,i)},t.prototype.getDataColumns=function(i,u){var f,p;if(this.isTableExists()){var y,g=this.buildWhereWithFieldAndValue(t.COLUMN_TABLE_NAME,i)+" and "+this.buildWhereWithFieldAndValue(t.COLUMN_COLUMN_NAME,u),b=[i,u];try{for(var E=m(this.queryWhere(g,b)),x=E.next();!x.done;x=E.next()){var M=x.value;y=this.createObject(M)}}catch(S){f={error:S}}finally{try{x&&!x.done&&(p=E.return)&&p.call(E)}finally{if(f)throw f.error}}return y}},t.prototype.deleteByTableName=function(i){var u="";u+=this.buildWhereWithFieldAndValue(t.COLUMN_TABLE_NAME,i);var f=this.buildWhereArgs(i);return this.deleteWhere(u,f)},t.TABLE_NAME="gpkg_data_columns",t.COLUMN_PK1="table_name",t.COLUMN_PK2="column_name",t.COLUMN_TABLE_NAME="table_name",t.COLUMN_COLUMN_NAME="column_name",t.COLUMN_NAME="name",t.COLUMN_TITLE="title",t.COLUMN_DESCRIPTION="description",t.COLUMN_MIME_TYPE="mime_type",t.COLUMN_CONSTRAINT_NAME="constraint_name",t})(h.Dao);l.DataColumnsDao=r},8314:(_,l,o)=>{var c=o(5108);Object.defineProperty(l,"__esModule",{value:!0}),l.AlterTable=void 0;var d=o(362),m=o(5042),h=o(5329),s=o(2431),a=o(2841),r=o(1133),n=o(7043),t=o(175),i=o(8934),u=o(1078),f=o(735),p=(function(){function y(){}return y.alterTableSQL=function(g){return"ALTER TABLE "+h.StringUtils.quoteWrap(g)},y.renameTable=function(g,b,E){var x=y.renameTableSQL(b,E);g.run(x)},y.renameTableSQL=function(g,b){return y.alterTableSQL(g)+" RENAME TO "+h.StringUtils.quoteWrap(b)},y.renameColumn=function(g,b,E,x){var M=y.renameColumnSQL(b,E,x);g.run(M)},y.renameColumnSQL=function(g,b,E){return y.alterTableSQL(g)+" RENAME COLUMN "+h.StringUtils.quoteWrap(b)+" TO "+h.StringUtils.quoteWrap(E)},y.addColumn=function(g,b,E,x){var M=y.addColumnSQL(b,E,x);g.run(M)},y.addColumnSQL=function(g,b,E){return y.alterTableSQL(g)+" ADD COLUMN "+h.StringUtils.quoteWrap(b)+" "+E},y.dropColumnForUserTable=function(g,b,E){y.dropColumnsForUserTable(g,b,[E])},y.dropColumnsForUserTable=function(g,b,E){var x=b.copy();E.forEach((function(S){x.dropColumnWithName(S)}));var M=new s.TableMapping(x.getTableName(),x.getTableName(),x.getUserColumns().getColumns());E.forEach((function(S){M.addDroppedColumn(S)})),y.alterTableWithTableMapping(g,x,M),E.forEach((function(S){b.dropColumnWithName(S)}))},y.dropColumn=function(g,b,E){y.dropColumns(g,b,[E])},y.dropColumns=function(g,b,E){var x=new d.UserCustomTableReader(b).readTable(g);y.dropColumnsForUserTable(g,x,E)},y.alterColumnForTable=function(g,b,E){y.alterColumnsForTable(g,b,[E])},y.alterColumnsForTable=function(g,b,E){var x=b.copy();E.forEach((function(M){x.alterColumn(M)})),y.alterTable(g,x),E.forEach((function(M){b.alterColumn(M)}))},y.alterColumn=function(g,b,E){y.alterColumns(g,b,[E])},y.alterColumns=function(g,b,E){var x=new d.UserCustomTableReader(b).readTable(g);y.alterColumnsForTable(g,x,E)},y.copyTable=function(g,b,E,x){x===void 0&&(x=!0);var M=new s.TableMapping(b.getTableName(),E,b.getUserColumns().getColumns());M.transferContent=x,y.alterTableWithTableMapping(g,b,M)},y.copyTableWithName=function(g,b,E,x){x===void 0&&(x=!0);var M=new d.UserCustomTableReader(b).readTable(g);y.copyTable(g,M,E,x)},y.alterTable=function(g,b){var E=new s.TableMapping(b.getTableName(),b.getTableName(),b.getUserColumns().getColumns());y.alterTableWithTableMapping(g,b,E)},y.alterTableWithTableMapping=function(g,b,E){b.getUserColumns().getColumns().forEach((function(M){M.clearConstraints().forEach((function(S){var O=m.CoreSQLUtils.modifySQL(null,S.name,S.buildSql(),E);O!=null&&M.addConstraint(new a.RawConstraint(S.type,r.ConstraintParser.getName(O),O))}))})),b.clearConstraints().forEach((function(M){var S=m.CoreSQLUtils.modifySQL(null,M.name,M.buildSql(),E);S!=null&&b.addConstraint(new a.RawConstraint(M.type,M.name,S))}));var x=m.CoreSQLUtils.createTableSQL(b);y.alterTableWithSQLAndTableMapping(g,x,E)},y.alterTableWithSQLAndTableMapping=function(g,b,E){var x=E.fromTable,M=E.isNewTable(),S=m.CoreSQLUtils.setForeignKeys(g,!1);g.transaction((function(){try{var O=n.SQLiteMaster.queryViewsOnTable(g,[t.SQLiteMasterColumn.NAME,t.SQLiteMasterColumn.SQL],x);if(!M)for(var C=0;C<O.count();C++){var T=O.getName(C);try{m.CoreSQLUtils.dropView(g,T)}catch(ie){c.warn("Failed to drop view: "+T+", table: "+x,ie)}}var R=n.SQLiteMaster.query(g,[t.SQLiteMasterColumn.NAME,t.SQLiteMasterColumn.TYPE,t.SQLiteMasterColumn.SQL],[i.SQLiteMasterType.INDEX,i.SQLiteMasterType.TRIGGER],u.SQLiteMasterQuery.createForColumnValue(t.SQLiteMasterColumn.TBL_NAME,x)),B=void 0;for(M?B=E.toTable:(B=m.CoreSQLUtils.tempTableName(g,"new",x),E.toTable=B),b=b.replace('"'+x+'"','"'+B+'"'),g.run(b),E.isTransferContent()&&m.CoreSQLUtils.transferTableContentForTableMapping(g,E),M||(m.CoreSQLUtils.dropTable(g,x),y.renameTable(g,B,x),E.toTable=x),C=0;C<R.count();C++){var z=!M;if(z||(z=R.getType(C)!=i.SQLiteMasterType.TRIGGER||!R.getName(C).startsWith(f.RTreeIndexDao.PREFIX)),z){var L=R.getSql(C);if(L!=null&&(L=m.CoreSQLUtils.modifySQL(g,R.getName(C),L,E))!=null)try{g.run(L)}catch(ie){c.warn("Failed to recreate "+R.getType(C)+" after table alteration. table: "+E.toTable+", sql: "+L,ie)}}}for(C=0;C<O.count();C++){var Y=O.getSql(C);if(Y!=null&&(Y=m.CoreSQLUtils.modifySQL(g,O.getName(C),Y,E))!=null)try{g.run(Y)}catch(ie){c.warn("Failed to recreate view: "+O.getName(C)+", table: "+E.toTable+", sql: "+Y,ie)}}S&&y.foreignKeyCheck(g)}catch{}})),S&&m.CoreSQLUtils.setForeignKeys(g,!0)},y.foreignKeyCheck=function(g){var b=m.CoreSQLUtils.foreignKeyCheck(g);if(b.length>0){for(var E=[],x=0;x<b.length;x++){x>0&&(E=E.concat(" ")),E=E.concat(x+1).concat(": ");for(var M=b[x],S=0;S<M.length;S++)S>0&&(E=E.concat(", ")),E=E.concat(M.get(S))}throw new Error("Foreign Key Check Violations: "+E)}},y})();l.AlterTable=p},5042:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreSQLUtils=void 0;var c=o(5329),d=o(2431),m=o(5045),h=o(7043),s=o(1078),a=o(175),r=(function(){function n(){}return n.createTableSQL=function(t){var i="";i=i.concat("CREATE TABLE ").concat(c.StringUtils.quoteWrap(t.getTableName())).concat(" (");for(var u=t.getUserColumns().getColumns(),f=0;f<u.length;f++){var p=u[f];f>0&&(i=i.concat(",")),i=(i=i.concat(`
  `)).concat(n.columnSQL(p))}return t.getConstraints().all().forEach((function(y){i=(i=i.concat(`,
  `)).concat(y.buildSql())})),i=i.concat(`
);`)},n.columnSQL=function(t){return c.StringUtils.quoteWrap(t.getName())+" "+n.columnDefinition(t)},n.columnDefinition=function(t){var i="";return i=i.concat(t.getType()),t.hasMax()&&(i=i.concat("(").concat(t.getMax().toString()).concat(")")),t.getConstraints().all().forEach((function(u){i=(i=i.concat(" ")).concat(t.buildConstraintSql(u))})),i.toString()},n.foreignKeys=function(t){var i=t.get("PRAGMA foreign_keys",null)[0];return i!=null&&i},n.setForeignKeys=function(t,i){var u=n.foreignKeys(t);if(u!==i){var f=n.foreignKeysSQL(i);t.run(f)}return u},n.foreignKeysSQL=function(t){return"PRAGMA foreign_keys = "+t},n.foreignKeyCheck=function(t){var i=n.foreignKeyCheckSQL(null);return t.all(i,null)},n.foreignKeyCheckForTable=function(t,i){var u=n.foreignKeyCheckSQL(i);return t.all(u,null)},n.foreignKeyCheckSQL=function(t){return"PRAGMA foreign_key_check"+(t!=null?"("+c.StringUtils.quoteWrap(t)+")":"")},n.integrityCheckSQL=function(){return"PRAGMA integrity_check"},n.quickCheckSQL=function(){return"PRAGMA quick_check"},n.dropTable=function(t,i){var u=n.dropTableSQL(i);t.run(u)},n.dropTableSQL=function(t){return"DROP TABLE IF EXISTS "+c.StringUtils.quoteWrap(t)},n.dropView=function(t,i){var u=n.dropViewSQL(i);t.run(u)},n.dropViewSQL=function(t){return"DROP VIEW IF EXISTS "+c.StringUtils.quoteWrap(t)},n.transferTableContentForTableMapping=function(t,i){var u=n.transferTableContentSQL(i);t.run(u)},n.transferTableContentSQL=function(t){var i="INSERT INTO ";i=(i=i.concat(c.StringUtils.quoteWrap(t.toTable))).concat(" (");var u="",f="";t.hasWhere()&&(f=f.concat(t.where));var p=t.getColumns();return t.getColumnNames().forEach((function(y){var g=y,b=p[y];u.length>0&&(i=i.concat(", "),u=u.concat(", ")),i=i.concat(c.StringUtils.quoteWrap(g)),b.hasConstantValue()?u=u.concat(b.getConstantValueAsString()):(b.hasDefaultValue()&&(u=u.concat("ifnull(")),u=u.concat(c.StringUtils.quoteWrap(b.fromColumn)),b.hasDefaultValue()&&(u=(u=(u=u.concat(",")).concat(b.getDefaultValueAsString())).concat(")"))),b.hasWhereValue()&&(f.length>0&&(f=f.concat(" AND ")),f=(f=(f=(f=(f=f.concat(c.StringUtils.quoteWrap(b.fromColumn))).concat(" ")).concat(b.whereOperator)).concat(" ")).concat(b.getWhereValueAsString()))})),i=(i=(i=(i=i.concat(") SELECT ")).concat(u)).concat(" FROM ")).concat(c.StringUtils.quoteWrap(t.fromTable)),f.length>0&&(i=(i=i.concat(" WHERE ")).concat(f)),i.toString()},n.transferTableContent=function(t,i,u,f,p,y){var g=m.TableInfo.info(t,i),b=d.TableMapping.fromTableInfo(g);y!=null&&b.removeColumn(y);var E=b.getColumn(u);E.constantValue=f,E.whereValue=p,n.transferTableContentForTableMapping(t,b)},n.tempTableName=function(t,i,u){for(var f=i+"_"+u,p=0;t.tableExists(f);)f=i+ ++p+"_"+u;return f},n.modifySQL=function(t,i,u,f){var p=u;if(i!=null&&f.isNewTable()){var y=n.createName(t,i,f.fromTable,f.toTable),g=n.replaceName(p,i,y);g!=null&&(p=g);var b=n.replaceName(p,f.fromTable,f.toTable);b!=null&&(p=b)}return n.modifySQLWithTableMapping(p,f)},n.modifySQLWithTableMapping=function(t,i){for(var u=t,f=Array.from(i.droppedColumns),p=0;p<f.length;p++){var y=f[p];if(n.replaceName(u,y," ")!=null){u=null;break}}return u!=null&&i.getMappedColumns().forEach((function(g){if(g.hasNewName()){var b=n.replaceName(u,g.fromColumn,g.toColumn);b!=null&&(u=b)}})),u},n.replaceName=function(t,i,u){var f=null;if(t.indexOf(i)>=0){for(var p=!1,y="",g=t.split(i),b=0;b<=g.length;b++){if(b>0){var E="_",x=g[b-1];x.length===0?b==1&&(E=" "):E=x.substring(x.length-1);var M="_";if(b<g.length){var S=g[b];S.length!==0&&(M=S.substring(0,1))}else{if(!t.endsWith(i))break;M=" "}E.match("\\W").length>0&&M.match("\\W").length>0?(y=y.concat(u),p=!0):y=y.concat(i)}b<g.length&&(y=y.concat(g[b]))}p&&(f=y.toString())}return f},n.createName=function(t,i,u,f){var p=i.replace(new RegExp(u),f);if(p===i){var y=p,g=1,b=y.lastIndexOf("_");if(b>=0&&b+1<y.length){var E=y.substring(b+1);E.match(n.NUMBER_PATTERN).length>0&&(y=y.substring(0,b),g=parseInt(E))}if(p=y+"_"+ ++g,t!=null)for(;h.SQLiteMaster.count(t,null,s.SQLiteMasterQuery.createForColumnValue(a.SQLiteMasterColumn.NAME,p))>0;)p=y+"_"+ ++g}return p},n.vacuum=function(t){t.run("VACUUM")},n.NUMBER_PATTERN="\\d+",n})();l.CoreSQLUtils=r},4777:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Db=void 0;var o=(function(){function c(){}return c.registerDbAdapter=function(d){c.adapterCreator=d},c.create=function(d){return new c.adapterCreator(d)},c.adapterCreator=void 0,c})();l.Db=o},5116:function(_,l,o){var c=o(5108),d=o(3085).lW,m=this&&this.__awaiter||function(n,t,i,u){return new(i||(i=Promise))((function(f,p){function y(E){try{b(u.next(E))}catch(x){p(x)}}function g(E){try{b(u.throw(E))}catch(x){p(x)}}function b(E){var x;E.done?f(E.value):(x=E.value,x instanceof i?x:new i((function(M){M(x)}))).then(y,g)}b((u=u.apply(n,t||[])).next())}))},h=this&&this.__generator||function(n,t){var i,u,f,p,y={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(b){return function(E){return(function(x){if(i)throw new TypeError("Generator is already executing.");for(;p&&(p=0,x[0]&&(y=0)),y;)try{if(i=1,u&&(f=2&x[0]?u.return:x[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,x[1])).done)return f;switch(u=0,f&&(x=[2&x[0],f.value]),x[0]){case 0:case 1:f=x;break;case 4:return y.label++,{value:x[1],done:!1};case 5:y.label++,u=x[1],x=[0];continue;case 7:x=y.ops.pop(),y.trys.pop();continue;default:if(!((f=(f=y.trys).length>0&&f[f.length-1])||x[0]!==6&&x[0]!==2)){y=0;continue}if(x[0]===3&&(!f||x[1]>f[0]&&x[1]<f[3])){y.label=x[1];break}if(x[0]===6&&y.label<f[1]){y.label=f[1],f=x;break}if(f&&y.label<f[2]){y.label=f[2],y.ops.push(x);break}f[2]&&y.ops.pop(),y.trys.pop();continue}x=t.call(n,y)}catch(M){x=[6,M],u=0}finally{i=f=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:void 0,done:!0}})([b,E])}}};Object.defineProperty(l,"__esModule",{value:!0}),l.GeoPackageConnection=void 0;var s=o(4777),a=o(1506),r=(function(){function n(t){this.filePath=t,this.registeredFunctions=[]}return n.prototype.init=function(){return m(this,void 0,void 0,(function(){var t;return h(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.adapter=s.Db.create(this.filePath),[4,this.adapter.initialize()];case 1:return i.sent(),[3,3];case 2:throw t=i.sent(),c.log("Failed to create adapter",t),t;case 3:return[2,this]}}))}))},n.prototype.transaction=function(t){this.adapter.transaction(t)},n.prototype.close=function(){this.adapter.close()},n.prototype.export=function(){return m(this,void 0,void 0,(function(){return h(this,(function(t){return[2,this.adapter.export()]}))}))},n.prototype.getDBConnection=function(){return this.adapter.db},n.prototype.setDBConnection=function(t){this.adapter=s.Db.create(),this.adapter.db=t},n.prototype.registerFunction=function(t,i){return this.registeredFunctions.indexOf(t)===-1&&(this.registeredFunctions.push(t),this.adapter.registerFunction(t,i)),this.adapter},n.prototype.get=function(t,i){return this.adapter.get(t,i)},n.prototype.isTableExists=function(t){return this.adapter.isTableExists(t)},n.prototype.run=function(t,i){return this.adapter.run(t,i)},n.prototype.all=function(t,i){return this.adapter.all(t,i)},n.prototype.each=function(t,i){return this.adapter.each(t,i)},n.prototype.minOfColumn=function(t,i,u,f){var p="select min("+i+") as min from "+t;return u&&(p+=" ",u.indexOf("where")&&(u="where "+u),p+=u),this.adapter.get(p,f).min},n.prototype.maxOfColumn=function(t,i,u,f){var p="select max("+i+") as max from "+t;return u&&(p+=" ",u.indexOf("where")&&(u="where "+u),p+=u),this.adapter.get(p,f).max},n.prototype.count=function(t,i,u){return this.adapter.count(t,i,u)},n.prototype.insert=function(t,i){return this.adapter.insert(t,i)},n.prototype.delete=function(t,i,u){var f="DELETE FROM "+t;return i&&(f+=" WHERE "+i),this.adapter.delete(f,u)},n.prototype.dropTable=function(t){return this.adapter.dropTable(t)},n.prototype.tableExists=function(t){return this.adapter.isTableExists(t)},n.prototype.columnAndTableExists=function(t,i){for(var u=this.adapter.all("PRAGMA table_info('"+t+"')"),f=0;f<u.length;f++)if(u[f].name===i)return!0;return!1},n.prototype.setApplicationId=function(){var t=d.from(a.GeoPackageConstants.APPLICATION_ID).readUInt32BE(0);this.adapter.run("PRAGMA application_id = "+t),this.adapter.run("PRAGMA user_version = "+a.GeoPackageConstants.USER_VERSION)},n.prototype.getApplicationId=function(){return this.adapter.get("PRAGMA application_id").application_id},n.connect=function(t){return new n(t).init()},n.connectWithDatabase=function(t){return m(this,void 0,void 0,(function(){var i;return h(this,(function(u){switch(u.label){case 0:return[4,new n(void 0).init()];case 1:return(i=u.sent()).setDBConnection(t),[2,i]}}))}))},n})();l.GeoPackageConnection=r},7319:(_,l)=>{var o;Object.defineProperty(l,"__esModule",{value:!0}),l.GeoPackageDataType=void 0,(o=l.GeoPackageDataType||(l.GeoPackageDataType={}))[o.BOOLEAN=0]="BOOLEAN",o[o.TINYINT=1]="TINYINT",o[o.SMALLINT=2]="SMALLINT",o[o.MEDIUMINT=3]="MEDIUMINT",o[o.INT=4]="INT",o[o.INTEGER=5]="INTEGER",o[o.FLOAT=6]="FLOAT",o[o.DOUBLE=7]="DOUBLE",o[o.REAL=8]="REAL",o[o.TEXT=9]="TEXT",o[o.BLOB=10]="BLOB",o[o.DATE=11]="DATE",o[o.DATETIME=12]="DATETIME",(function(c){c.nameFromType=function(d){return c[d]},c.fromName=function(d){return c[d]},c.columnDefaultValue=function(d,m){var h=null;if(d!=null){if(m!=null)switch(m){case c.BOOLEAN:var s=null;if(typeof d=="boolean")s=d;else if(typeof d=="string")switch(d){case"0":case"false":s=!1;break;case"1":case"true":s=!0}s!=null&&(h=s?"1":"0");break;case c.TEXT:(h=d.toString()).startsWith("'")&&h.endsWith("'")||(h="'"+h+"'")}h==null&&(h=d.toString())}return h}})(l.GeoPackageDataType||(l.GeoPackageDataType={}))},1790:function(_,l,o){var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0}),l.MappedColumn=void 0;var d=o(7319),m=c(o(4293)),h=c(o(8446)),s=(function(){function a(r,n,t,i){this._toColumn=r,this._fromColumn=n,this._defaultValue=t,this._dataType=i}return Object.defineProperty(a.prototype,"toColumn",{get:function(){return this._toColumn},set:function(r){this._toColumn=r},enumerable:!1,configurable:!0}),a.prototype.hasNewName=function(){return!(0,m.default)(this._fromColumn)&&!(0,h.default)(this._fromColumn,this._toColumn)},Object.defineProperty(a.prototype,"fromColumn",{get:function(){return this._fromColumn},set:function(r){this._fromColumn=r},enumerable:!1,configurable:!0}),a.prototype.hasDefaultValue=function(){return!(0,m.default)(this._defaultValue)},Object.defineProperty(a.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(r){this._defaultValue=r},enumerable:!1,configurable:!0}),a.prototype.getDefaultValueAsString=function(){return d.GeoPackageDataType.columnDefaultValue(this._defaultValue,this._dataType)},Object.defineProperty(a.prototype,"dataType",{get:function(){return this._dataType},set:function(r){this._dataType=r},enumerable:!1,configurable:!0}),a.prototype.hasConstantValue=function(){return!(0,m.default)(this._constantValue)},Object.defineProperty(a.prototype,"constantValue",{get:function(){return this._constantValue},set:function(r){this._constantValue=r},enumerable:!1,configurable:!0}),a.prototype.getConstantValueAsString=function(){return d.GeoPackageDataType.columnDefaultValue(this._constantValue,this._dataType)},a.prototype.hasWhereValue=function(){return!(0,m.default)(this._whereValue)},Object.defineProperty(a.prototype,"whereValue",{get:function(){return this._whereValue},set:function(r){this._whereValue=r},enumerable:!1,configurable:!0}),a.prototype.getWhereValueAsString=function(){return d.GeoPackageDataType.columnDefaultValue(this._whereValue,this._dataType)},a.prototype.setWhereValueAndOperator=function(r,n){this._whereValue=r,this.whereOperator=n},Object.defineProperty(a.prototype,"whereOperator",{get:function(){return(0,m.default)(this._whereOperator)?"=":this._whereOperator},set:function(r){this._whereOperator=r},enumerable:!1,configurable:!0}),a})();l.MappedColumn=s},7043:function(_,l,o){var c=this&&this.__read||function(t,i){var u=typeof Symbol=="function"&&t[Symbol.iterator];if(!u)return t;var f,p,y=u.call(t),g=[];try{for(;(i===void 0||i-- >0)&&!(f=y.next()).done;)g.push(f.value)}catch(b){p={error:b}}finally{try{f&&!f.done&&(u=y.return)&&u.call(y)}finally{if(p)throw p.error}}return g},d=this&&this.__spreadArray||function(t,i,u){if(u||arguments.length===2)for(var f,p=0,y=i.length;p<y;p++)!f&&p in i||(f||(f=Array.prototype.slice.call(i,0,p)),f[p]=i[p]);return t.concat(f||Array.prototype.slice.call(i))};Object.defineProperty(l,"__esModule",{value:!0}),l.SQLiteMaster=void 0;var m=o(175),h=o(8934),s=o(4980),a=o(1133),r=o(1078),n=(function(){function t(i,u){if(this._columns={},u!=null&&u.length>0){this._results=i,this._count=i.length;for(var f=0;f<u.length;f++)this._columns[m.SQLiteMasterColumn.nameFromType(u[f])]=f}else this._results=[],this._count=i[0].cnt}return t.prototype.count=function(){return this._count},t.prototype.columns=function(){return Object.keys(this._columns).map((function(i){return m.SQLiteMasterColumn.fromName(i)}))},t.prototype.getType=function(i){return h.SQLiteMasterType.fromName(this.getTypeString(i).toUpperCase())},t.prototype.getTypeString=function(i){return this.getValueForRowAndColumn(i,m.SQLiteMasterColumn.TYPE)},t.prototype.getName=function(i){return this.getValueForRowAndColumn(i,m.SQLiteMasterColumn.NAME)},t.prototype.getTableName=function(i){return this.getValueForRowAndColumn(i,m.SQLiteMasterColumn.TBL_NAME)},t.prototype.getRootpage=function(i){return this.getValueForRowAndColumn(i,m.SQLiteMasterColumn.ROOTPAGE)},t.prototype.getSql=function(i){return this.getValueForRowAndColumn(i,m.SQLiteMasterColumn.SQL)},t.prototype.getValueForRowAndColumn=function(i,u){return t.getValue(this.getRow(i),u)},t.prototype.getRow=function(i){if(i<0||i>=this._results.length){var u;throw u=this._results.length===0?"Results are empty":"Row index: "+i+", not within range 0 to "+(this._results.length-1),new Error(u)}return this._results[i]},t.getValue=function(i,u){return i[m.SQLiteMasterColumn.nameFromType(u).toLowerCase()]},t.prototype.getConstraints=function(i){var u=new s.TableConstraints;if(this.getType(i)===h.SQLiteMasterType.TABLE){var f=this.getSql(i);f!=null&&(u=a.ConstraintParser.getConstraints(f))}return u},t.count=function(i,u,f){return t.query(i,null,u,f).count()},t.query=function(i,u,f,p){var y="SELECT ",g=[];if(u!=null&&u.length>0)for(var b=0;b<u.length;b++)b>0&&(y=y.concat(", ")),y=y.concat(m.SQLiteMasterColumn.nameFromType(u[b]).toLowerCase());else y=y.concat("count(*) as cnt");y=(y=y.concat(" FROM ")).concat(t.TABLE_NAME);var E=p!=null&&p.has(),x=f!=null&&f.length>0;if((E||x)&&(y=y.concat(" WHERE "),E&&(y=y.concat(p.buildSQL()),g.push.apply(g,d([],c(p.getArguments()),!1))),x)){for(E&&(y=y.concat(" AND")),y=y.concat(" type IN ("),b=0;b<f.length;b++)b>0&&(y=y.concat(", ")),y=y.concat("?"),g.push(h.SQLiteMasterType.nameFromType(f[b]).toLowerCase());y=y.concat(")")}return new t(i.all(y,g),u)},t.queryViewsOnTable=function(i,u,f){return t.query(i,u,[h.SQLiteMasterType.VIEW],r.SQLiteMasterQuery.createTableViewQuery(f))},t.countViewsOnTable=function(i,u){return t.count(i,[h.SQLiteMasterType.VIEW],r.SQLiteMasterQuery.createTableViewQuery(u))},t.queryForConstraints=function(i,u){for(var f=new s.TableConstraints,p=t.query(i,[m.SQLiteMasterColumn.TYPE,m.SQLiteMasterColumn.NAME,m.SQLiteMasterColumn.TBL_NAME,m.SQLiteMasterColumn.ROOTPAGE,m.SQLiteMasterColumn.SQL],[h.SQLiteMasterType.TABLE],r.SQLiteMasterQuery.createForColumnValue(m.SQLiteMasterColumn.TBL_NAME,u)),y=0;y<p.count();y++)f.addTableConstraints(p.getConstraints(y).constraints);return f},t.TABLE_NAME="sqlite_master",t})();l.SQLiteMaster=n},175:(_,l)=>{var o;Object.defineProperty(l,"__esModule",{value:!0}),l.SQLiteMasterColumn=void 0,(o=l.SQLiteMasterColumn||(l.SQLiteMasterColumn={}))[o.TYPE=0]="TYPE",o[o.NAME=1]="NAME",o[o.TBL_NAME=2]="TBL_NAME",o[o.ROOTPAGE=3]="ROOTPAGE",o[o.SQL=4]="SQL",(function(c){c.nameFromType=function(d){return c[d]},c.fromName=function(d){return c[d]},c.asArray=function(){return[c.TYPE,c.NAME,c.TBL_NAME,c.ROOTPAGE,c.SQL]}})(l.SQLiteMasterColumn||(l.SQLiteMasterColumn={}))},1078:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SQLiteMasterQuery=void 0;var c=o(175),d=o(5329),m=(function(){function h(s){this.queries=[],this.arguments=[],this.combineOperation=s}return h.prototype.add=function(s,a,r){this.validateAdd(),this.queries.push("LOWER("+d.StringUtils.quoteWrap(c.SQLiteMasterColumn.nameFromType(s).toLowerCase())+") "+a+" LOWER(?)"),this.arguments.push(r)},h.prototype.addIsNull=function(s){this.validateAdd(),this.queries.push(d.StringUtils.quoteWrap(c.SQLiteMasterColumn.nameFromType(s).toLowerCase())+" IS NULL")},h.prototype.addIsNotNull=function(s){this.validateAdd(),this.queries.push(d.StringUtils.quoteWrap(c.SQLiteMasterColumn.nameFromType(s).toLowerCase())+" IS NOT NULL")},h.prototype.validateAdd=function(){if((this.combineOperation===null||this.combineOperation===void 0)&&this.queries.length!==0)throw new Error("Query without a combination operation supports only a single query")},h.prototype.has=function(){return this.queries.length!==0},h.prototype.buildSQL=function(){var s="";this.queries.length>1&&(s=s.concat("( "));for(var a=0;a<this.queries.length;a++)a>0&&(s=(s=(s=s.concat(" ")).concat(this.combineOperation)).concat(" ")),s=s.concat(this.queries[a]);return this.queries.length>1&&(s=s.concat(" )")),s},h.prototype.getArguments=function(){return this.arguments},h.create=function(){return new h(null)},h.createOr=function(){return new h("OR")},h.createAnd=function(){return new h("AND")},h.createForColumnValue=function(s,a){var r=this.create();return r.add(s,"=",a),r},h.createForOperationAndColumnValue=function(s,a,r){var n=this.create();return n.add(s,a,r),n},h.createOrForColumnValue=function(s,a){var r=this.createOr();return a.forEach((function(n){r.add(s,"=",n)})),r},h.createOrForOperationAndColumnValue=function(s,a,r){var n=this.createOr();return r.forEach((function(t){n.add(s,a,t)})),n},h.createAndForColumnValue=function(s,a){var r=this.createAnd();return a.forEach((function(n){r.add(s,"=",n)})),r},h.createAndForOperationAndColumnValue=function(s,a,r){var n=this.createAnd();return r.forEach((function(t){n.add(s,a,t)})),n},h.createTableViewQuery=function(s){var a=[];return a.push('%"'+s+'"%'),a.push("% "+s+" %"),a.push("%,"+s+" %"),a.push("% "+s+",%"),a.push("%,"+s+",%"),a.push("% "+s),a.push("%,"+s),h.createOrForOperationAndColumnValue(c.SQLiteMasterColumn.SQL,"LIKE",a)},h})();l.SQLiteMasterQuery=m},8934:(_,l)=>{var o;Object.defineProperty(l,"__esModule",{value:!0}),l.SQLiteMasterType=void 0,(o=l.SQLiteMasterType||(l.SQLiteMasterType={}))[o.TABLE=0]="TABLE",o[o.INDEX=1]="INDEX",o[o.VIEW=2]="VIEW",o[o.TRIGGER=3]="TRIGGER",(function(c){c.nameFromType=function(d){return c[d]},c.fromName=function(d){return c[d]}})(l.SQLiteMasterType||(l.SQLiteMasterType={}))},922:function(_,l,o){var c=o(5108),d=this&&this.__awaiter||function(i,u,f,p){return new(f||(f=Promise))((function(y,g){function b(M){try{x(p.next(M))}catch(S){g(S)}}function E(M){try{x(p.throw(M))}catch(S){g(S)}}function x(M){var S;M.done?y(M.value):(S=M.value,S instanceof f?S:new f((function(O){O(S)}))).then(b,E)}x((p=p.apply(i,u||[])).next())}))},m=this&&this.__generator||function(i,u){var f,p,y,g,b={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return g={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function E(x){return function(M){return(function(S){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,S[0]&&(b=0)),b;)try{if(f=1,p&&(y=2&S[0]?p.return:S[0]?p.throw||((y=p.return)&&y.call(p),0):p.next)&&!(y=y.call(p,S[1])).done)return y;switch(p=0,y&&(S=[2&S[0],y.value]),S[0]){case 0:case 1:y=S;break;case 4:return b.label++,{value:S[1],done:!1};case 5:b.label++,p=S[1],S=[0];continue;case 7:S=b.ops.pop(),b.trys.pop();continue;default:if(!((y=(y=b.trys).length>0&&y[y.length-1])||S[0]!==6&&S[0]!==2)){b=0;continue}if(S[0]===3&&(!y||S[1]>y[0]&&S[1]<y[3])){b.label=S[1];break}if(S[0]===6&&b.label<y[1]){b.label=y[1],y=S;break}if(y&&b.label<y[2]){b.label=y[2],b.ops.push(S);break}y[2]&&b.ops.pop(),b.trys.pop();continue}S=u.call(i,b)}catch(O){S=[6,O],p=0}finally{f=y=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}})([x,M])}}},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.SqliteAdapter=void 0;var s=h(o(1929)),a=h(o(3935)),r=h(o(8501)),n=h(o(7435)),t=(function(){function i(u){this.filePath=u}return i.prototype.initialize=function(){return d(this,void 0,void 0,(function(){var u,f,p,y,g=this;return m(this,(function(b){try{return u=o(1498),this.filePath&&typeof this.filePath=="string"?this.filePath.indexOf("http")===0?(f=this.filePath,[2,new Promise((function(E,x){r.default.get(f,(function(M){M.statusCode!==200&&x(new Error("Unable to reach url: "+g.filePath));var S=a.default.join(n.default.tmpdir(),Date.now()+Math.floor(100*Math.random())+".gpkg"),O=s.default.createWriteStream(S);M.pipe(O),O.on("close",(function(){try{g.db=new u(S),g.db.pragma("journal_mode = WAL"),g.filePath=S,E(g)}catch(C){c.log("error",C),x(C)}}))})).on("error",(function(M){x(M)}))}))]):(this.db=new u(this.filePath),[2,this]):this.filePath?(p=this.filePath,y=a.default.join(n.default.tmpdir(),Date.now()+".gpkg"),[2,new Promise((function(E,x){s.default.writeFile(y,p,(function(){g.db=new u(y);try{g.db.pragma("journal_mode = WAL")}catch(M){c.log("error",M),x(M)}g.filePath=y,E(g)}))}))]):(c.log("create in memory"),this.db=new u(":memory:"),[2,this])}catch(E){throw c.log("Error opening database",E),E}return[2]}))}))},i.prototype.close=function(){this.db.pragma("wal_autocheckpoint=0"),this.db.pragma("wal_checkpoint(RESTART)"),this.db.close()},i.prototype.getDBConnection=function(){return this.db},i.prototype.getFunctionList=function(){return this.db.pragma("function_list")},i.prototype.export=function(){return d(this,void 0,void 0,(function(){var u=this;return m(this,(function(f){return[2,new Promise((function(p){return s.default.readFile(u.filePath,(function(y,g){p(g)}))}))]}))}))},i.prototype.registerFunction=function(u,f){return this.db.function(u,f),this},i.prototype.get=function(u,f){var p=this.db.prepare(u);return f?p.get(f):p.get()},i.prototype.isTableExists=function(u){return!!this.db.prepare("SELECT name FROM sqlite_master WHERE type='table' AND name=:name").get({name:u})},i.prototype.all=function(u,f){var p=this.db.prepare(u);return f?p.all(f):p.all()},i.prototype.each=function(u,f){var p=this.db.prepare(u);return f?p.iterate(f):p.iterate()},i.prototype.run=function(u,f){var p=this.db.prepare(u);return f?p.run(f):p.run()},i.prototype.insert=function(u,f){return this.db.prepare(u).run(f).lastInsertRowid},i.prototype.prepareStatement=function(u){return this.db.prepare(u)},i.prototype.bindAndInsert=function(u,f){return u.run(f).lastInsertRowid},i.prototype.closeStatement=function(u){},i.prototype.delete=function(u,f){return this.db.prepare(u).run(f).changes},i.prototype.dropTable=function(u){try{var f=this.db.prepare('DROP TABLE IF EXISTS "'+u+'"').run();return this.db.prepare("VACUUM").run(),f.changes===0}catch(p){return c.log("Drop Table Error",p),!1}},i.prototype.count=function(u,f,p){var y='SELECT COUNT(*) as count FROM "'+u+'"';f&&(y+=" where "+f);var g=this.db.prepare(y);return p?g.get(p).count:g.get().count},i.prototype.transaction=function(u){this.db.transaction(u)()},i})();l.SqliteAdapter=t},8877:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SqliteQueryBuilder=void 0;var o=(function(){function c(){}return c.fixColumnName=function(d){return d.replace(/\W+/g,"_")},c.buildQuery=function(d,m,h,s,a,r,n,t,i,u){var f="";if(c.isEmpty(r)&&!c.isEmpty(n))throw new Error("Illegal Arguments: having clauses require a groupBy clause");return f+="select ",d&&(f+="distinct "),h&&h.length?f=c.appendColumnsToString(h,f):f+="* ",f+="from "+m,a&&(f+=" "+a),f=c.appendClauseToString(f," where ",s),f=c.appendClauseToString(f," group by ",r),f=c.appendClauseToString(f," having ",n),f=c.appendClauseToString(f," order by ",t),f=c.appendClauseToString(f," limit ",i),c.appendClauseToString(f," offset ",u)},c.buildCount=function(d,m){var h="select count(*) as count from "+d;return c.appendClauseToString(h," where ",m)},c.buildInsert=function(d,m){if(m.columnNames)return c.buildInsertFromColumnNames(d,m);var h="insert into "+d+" (",s="",a="",r=!0;for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&m[n]!==void 0&&(r||(s+=",",a+=","),r=!1,s+=n,a+="$"+c.fixColumnName(n));return h+(s+") values (")+a+")"},c.buildInsertFromColumnNames=function(d,m){for(var h="insert into "+d+" (",s="",a="",r=!0,n=m.columnNames,t=0;t<n.length;t++){var i=n[t];r||(s+=",",a+=","),r=!1,s+='"'+i+'"',a+="$"+c.fixColumnName(i)}return h+(s+") values (")+a+")"},c.buildUpdateOrInsertObject=function(d){var m={};if(d.columnNames)for(var h=d.columnNames,s=0;s<h.length;s++)m[c.fixColumnName(h[s])]=d.toDatabaseValue(h[s]);else for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&d[a]!==void 0&&(d.toDatabaseValue?m[c.fixColumnName(a)]=d.toDatabaseValue(a):typeof d[a]=="boolean"?m[c.fixColumnName(a)]=d[a]?1:0:d[a]instanceof Date?m[c.fixColumnName(a)]=new Date(d[a]).toISOString():m[c.fixColumnName(a)]=d[a]);return m},c.buildUpdate=function(d,m,h,s){var a=[],r="update "+d+" set ",n=!0;for(var t in m)n||(r+=", "),n=!1,r+='"'+t+'"',a.push(m[t]),r+="=?";if(s)if(s instanceof Array)for(var i=0;i<s.length;i++)a.push(s[i]);else a.push(s);return h&&(r+=" where ",r+=h),{sql:r,args:a}},c.buildObjectUpdate=function(d,m){var h="update "+d+" set ",s=!0;if(m.columnNames)for(var a=m.columnNames,r=0;r<a.length;r++){var n=a[r];s||(h+=", "),s=!1,h+='"'+n+'"=',h+="$"+c.fixColumnName(n)}else for(var t in m)Object.prototype.hasOwnProperty.call(m,t)&&(s||(h+=", "),s=!1,h+='"'+t+'"=',h+="$"+c.fixColumnName(t));return h},c.appendClauseToString=function(d,m,h){return h&&(d+=m+h),d},c.appendColumnsToString=function(d,m){if(!d||!d.length)return m;m+=c.columnToAppend(d[0]);for(var h=1;h<d.length;h++)m+=", "+c.columnToAppend(d[h]);return m+" "},c.columnToAppend=function(d){return d.indexOf("*")!==-1?d:'"'+d+'"'},c.isEmpty=function(d){return!d||d.length===0},c})();l.SqliteQueryBuilder=o},6328:function(_,l,o){var c=o(4155),d=o(3085).lW,m=this&&this.__awaiter||function(t,i,u,f){return new(u||(u=Promise))((function(p,y){function g(x){try{E(f.next(x))}catch(M){y(M)}}function b(x){try{E(f.throw(x))}catch(M){y(M)}}function E(x){var M;x.done?p(x.value):(M=x.value,M instanceof u?M:new u((function(S){S(M)}))).then(g,b)}E((f=f.apply(t,i||[])).next())}))},h=this&&this.__generator||function(t,i){var u,f,p,y,g={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(E){return function(x){return(function(M){if(u)throw new TypeError("Generator is already executing.");for(;y&&(y=0,M[0]&&(g=0)),g;)try{if(u=1,f&&(p=2&M[0]?f.return:M[0]?f.throw||((p=f.return)&&p.call(f),0):f.next)&&!(p=p.call(f,M[1])).done)return p;switch(f=0,p&&(M=[2&M[0],p.value]),M[0]){case 0:case 1:p=M;break;case 4:return g.label++,{value:M[1],done:!1};case 5:g.label++,f=M[1],M=[0];continue;case 7:M=g.ops.pop(),g.trys.pop();continue;default:if(!((p=(p=g.trys).length>0&&p[p.length-1])||M[0]!==6&&M[0]!==2)){g=0;continue}if(M[0]===3&&(!p||M[1]>p[0]&&M[1]<p[3])){g.label=M[1];break}if(M[0]===6&&g.label<p[1]){g.label=p[1],p=M;break}if(p&&g.label<p[2]){g.label=p[2],g.ops.push(M);break}p[2]&&g.ops.pop(),g.trys.pop();continue}M=i.call(t,g)}catch(S){M=[6,S],f=0}finally{u=p=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}})([E,x])}}},s=this&&this.__values||function(t){var i=typeof Symbol=="function"&&Symbol.iterator,u=i&&t[i],f=0;if(u)return u.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&f>=t.length&&(t=void 0),{value:t&&t[f++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.SqljsAdapter=void 0;var r=a(o(3686)),n=(function(){function t(i){this.filePath=i}return t.setSqljsWasmLocateFile=function(i){t.sqljsWasmLocateFile=i},t.prototype.initialize=function(){var i=this;return new Promise((function(u,f){new Promise((function(p){t.SQL==null?(0,r.default)({locateFile:t.sqljsWasmLocateFile}).then((function(y){t.SQL=y,p(y)})).catch((function(y){f(y)})):p(t.SQL)})).then((function(p){if(!i.filePath||typeof i.filePath!="string"){if(i.filePath){var y=i.filePath;return i.db=new p.Database(y),u(i)}return i.db=new p.Database,u(i)}if(c!==void 0&&c.version){var g=o(1929);if(i.filePath.indexOf("http")!==0){try{g.statSync(i.filePath)}catch{return i.db=new p.Database,u(i)}var b=g.readFileSync(i.filePath),E=new Uint8Array(b);return i.db=new p.Database(E),u(i)}o(8501).get(i.filePath,(function(M){if(M.statusCode!==200)return f(new Error("Unable to reach url: "+i.filePath));var S=[];M.on("data",(function(O){return S.push(O)})),M.on("end",(function(){var O=new Uint8Array(d.concat(S));i.db=new p.Database(O),u(i)}))})).on("error",(function(M){return f(M)}))}else{var x=new XMLHttpRequest;x.open("GET",i.filePath,!0),x.responseType="arraybuffer",x.onload=function(){if(x.status!==200)return f(new Error("Unable to reach url: "+i.filePath));var M=new Uint8Array(x.response);return i.db=new p.Database(M),u(i)},x.onerror=function(){return f(new Error("Error reaching url: "+i.filePath))},x.send()}})).catch((function(p){f(p)}))}))},t.prototype.close=function(){this.db.close()},t.prototype.getDBConnection=function(){return this.db},t.prototype.export=function(){return m(this,void 0,void 0,(function(){return h(this,(function(i){return[2,this.db.export()]}))}))},t.prototype.registerFunction=function(i,u){return this.db.create_function(i,u),this},t.prototype.get=function(i,u){u=u||[];var f,p=this.db.prepare(i);return p.bind(u),p.step()&&(f=p.getAsObject()),p.free(),f},t.prototype.isTableExists=function(i){var u,f=this.db.prepare("SELECT name FROM sqlite_master WHERE type='table' AND name=:name");return f.bind([i]),f.step()&&(u=f.getAsObject()),f.free(),!!u},t.prototype.all=function(i,u){var f,p,y=[],g=this.each(i,u);try{for(var b=s(g),E=b.next();!E.done;E=b.next()){var x=E.value;y.push(x)}}catch(M){f={error:M}}finally{try{E&&!E.done&&(p=b.return)&&p.call(b)}finally{if(f)throw f.error}}return y},t.prototype.each=function(i,u){var f,p=this.db.prepare(i);return p.bind(u),(f={})[Symbol.iterator]=function(){return this},f.next=function(){return p.step()?{value:p.getAsObject(),done:!1}:(p.free(),{value:void 0,done:!0})},f},t.prototype.run=function(i,u){if(u&&!(u instanceof Array))for(var f in u)u["$"+f]=u[f];this.db.run(i,u);var p,y=this.db.exec("select last_insert_rowid();");return y&&(p=y[0].values[0][0]),{lastInsertRowid:p,changes:this.db.getRowsModified()}},t.prototype.insert=function(i,u){if(u&&!(u instanceof Array))for(var f in u)u["$"+f]=u[f];var p=this.db.prepare(i,u);p.step(),p.free();var y=this.db.exec("select last_insert_rowid();");return y?y[0].values[0][0]:void 0},t.prototype.prepareStatement=function(i){return this.db.prepare(i)},t.prototype.bindAndInsert=function(i,u){if(u&&!(u instanceof Array))for(var f in u)u["$"+f]=u[f]===void 0?null:u[f];return i.run(u).lastInsertRowid},t.prototype.closeStatement=function(i){i.free()},t.prototype.delete=function(i,u){var f,p=this.db.prepare(i,u);return p.step(),f=this.db.getRowsModified(),p.free(),f},t.prototype.dropTable=function(i){var u=this.db.exec('DROP TABLE IF EXISTS "'+i+'"');return this.db.exec("VACUUM"),!!u},t.prototype.count=function(i,u,f){var p='SELECT COUNT(*) as count FROM "'+i+'"';return u&&(p+=" where "+u),this.get(p,f).count},t.prototype.transaction=function(i){this.db.exec("BEGIN TRANSACTION");try{i(),this.db.exec("COMMIT TRANSACTION")}catch(u){throw this.db.exec("ROLLBACK TRANSACTION"),u}},t.sqljsWasmLocateFile=function(i){return i},t})();l.SqljsAdapter=n},5329:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.StringUtils=void 0;var o=(function(){function c(){}return c.quoteWrap=function(d){var m=null;return d!==null&&(m=d.startsWith('"')&&d.endsWith('"')?d:'"'+d+'"'),m},c.quoteUnwrap=function(d){var m=null;return d!=null&&(m=d.startsWith('"')&&d.endsWith('"')?d.substring(1,d.length-1):d),m},c})();l.StringUtils=o},3765:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColumnConstraints=void 0;var c=o(7686),d=(function(){function m(h){this.name=h,this.constraints=new c.Constraints}return m.prototype.addConstraint=function(h){this.constraints.add(h)},m.prototype.addConstraints=function(h){this.constraints.addConstraints(h)},m.prototype.getConstraints=function(){return this.constraints},m.prototype.getConstraint=function(h){return h>=this.constraints.size()?null:this.constraints.get(h)},m.prototype.numConstraints=function(){return this.constraints.size()},m.prototype.addColumnConstraints=function(h){h!=null&&this.addConstraints(h.getConstraints())},m.prototype.hasConstraints=function(){return this.constraints.has()},m})();l.ColumnConstraints=d},8007:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Constraint=void 0;var c=o(5329),d=(function(){function m(h,s,a){a===void 0&&(a=Number.MAX_SAFE_INTEGER),this.type=h,this.name=s,this.order=a}return m.prototype.buildNameSql=function(){var h="";return this.name!==null&&this.name!==void 0&&(h=m.CONSTRAINT+" "+c.StringUtils.quoteWrap(this.name)+" "),h},m.prototype.buildSql=function(){return""},m.prototype.copy=function(){return new m(this.type,this.name)},m.prototype.getName=function(){return this.name},m.prototype.getType=function(){return this.type},m.prototype.compareTo=function(h){return this.getOrder(this.order)-this.getOrder(h.order)<=0?-1:1},m.prototype.getOrder=function(h){return h??Number.MAX_VALUE},m.CONSTRAINT="CONSTRAINT",m})();l.Constraint=d},1133:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ConstraintParser=void 0;var c=o(4980),d=o(3765),m=o(8007),h=o(91),s=o(2841),a=o(5329),r=(function(){function n(){}return n.getConstraints=function(t){var i=new c.TableConstraints,u=-1,f=-1;if(t!=null&&(u=t.indexOf("("),f=t.lastIndexOf(")")),u>=0&&f>=0){for(var p=t.substring(u+1,f).trim(),y=0,g=0,b=0;b<p.length;b++){var E=p.charAt(b);if(E==="(")y++;else if(E===")")y--;else if(E===","&&y===0){var x=p.substring(g,b);n.addConstraints(i,x),g=b+1}}g<p.length&&(x=p.substring(g,p.length),n.addConstraints(i,x))}return i},n.addConstraints=function(t,i){var u=n.getTableConstraint(i);if(u!=null)t.addTableConstraint(u);else{var f=n.getColumnConstraints(i);f.hasConstraints()&&t.addColumnConstraints(f)}},n.getColumnConstraints=function(t){for(var i=t.trim().split(/\s+/),u=a.StringUtils.quoteUnwrap(i[0]),f=new d.ColumnConstraints(u),p=-1,y=null,g=1;g<i.length;g++){var b=i[g];if(m.Constraint.CONSTRAINT===b.toUpperCase())y!=null&&(f.addConstraint(n.createConstraint(i,p,g,y)),y=null),p=g;else{var E=h.ConstraintType.getColumnType(b);E!=null&&(y!=null&&(f.addConstraint(n.createConstraint(i,p,g,y)),p=-1),p<0&&(p=g),y=E)}}return y!=null&&f.addConstraint(n.createConstraint(i,p,i.length,y)),f},n.createConstraint=function(t,i,u,f){for(var p="",y=i;y<u;y++)p.length>0&&(p=p.concat(" ")),p=p.concat(t[y]);var g=n.getName(p);return new s.RawConstraint(f,g,p)},n.getConstraint=function(t,i){var u=null,f=n.getNameAndDefinition(t),p=f[1];if(p!=null){var y,g=p.split(/\s+/)[0];(y=i?h.ConstraintType.getTableType(g):h.ConstraintType.getColumnType(g))!=null&&(u=new s.RawConstraint(y,f[0],t.trim()))}return u},n.getTableConstraint=function(t){return n.getConstraint(t,!0)},n.isTableConstraint=function(t){return n.getTableConstraint(t)!==null},n.getTableType=function(t){var i=null,u=n.getTableConstraint(t);return u!=null&&(i=u.type),i},n.isTableType=function(t,i){var u=!1,f=n.getTableType(i);return f!=null&&(u=t===f),u},n.getColumnConstraint=function(t){return n.getConstraint(t,!1)},n.isColumnConstraint=function(t){return n.getColumnConstraint(t)!=null},n.getColumnType=function(t){var i=null,u=n.getColumnConstraint(t);return u!=null&&(i=u.type),i},n.isColumnType=function(t,i){var u=!1,f=n.getColumnType(i);return f!=null&&(u=t==f),u},n.getTableOrColumnConstraint=function(t){var i=n.getTableConstraint(t);return i==null&&(i=n.getColumnConstraint(t)),i},n.isConstraint=function(t){return n.getTableOrColumnConstraint(t)!==null},n.getType=function(t){var i=null,u=n.getTableOrColumnConstraint(t);return u!=null&&(i=u.getType()),i},n.isType=function(t,i){var u=!1,f=n.getType(i);return f!=null&&(u=t===f),u},n.getName=function(t){var i=null,u=n.NAME_PATTERN(t);return u!==null&&u.length>n.NAME_PATTERN_NAME_GROUP&&(i=a.StringUtils.quoteUnwrap(u[n.NAME_PATTERN_NAME_GROUP])),i},n.getNameAndDefinition=function(t){var i=[null,t],u=n.CONSTRAINT_PATTERN(t.trim());if(u!==null&&u.length>n.CONSTRAINT_PATTERN_DEFINITION_GROUP){var f=a.StringUtils.quoteUnwrap(u[n.CONSTRAINT_PATTERN_NAME_GROUP]);f!=null&&(f=f.trim());var p=u[n.CONSTRAINT_PATTERN_DEFINITION_GROUP];p!=null&&(p=p.trim()),i=[f,p]}return i},n.NAME_PATTERN=function(t){return t.match(/CONSTRAINT\s+("[\s\S]+"|\S+)\s/i)},n.NAME_PATTERN_NAME_GROUP=1,n.CONSTRAINT_PATTERN=function(t){return t.match(/(CONSTRAINT\s+("[\s\S]+"|\S+)\s)?([\s\S]*)/i)},n.CONSTRAINT_PATTERN_NAME_GROUP=2,n.CONSTRAINT_PATTERN_DEFINITION_GROUP=3,n})();l.ConstraintParser=r},91:(_,l)=>{var o;Object.defineProperty(l,"__esModule",{value:!0}),l.ConstraintType=void 0,(o=l.ConstraintType||(l.ConstraintType={}))[o.PRIMARY_KEY=0]="PRIMARY_KEY",o[o.UNIQUE=1]="UNIQUE",o[o.CHECK=2]="CHECK",o[o.FOREIGN_KEY=3]="FOREIGN_KEY",o[o.NOT_NULL=4]="NOT_NULL",o[o.DEFAULT=5]="DEFAULT",o[o.COLLATE=6]="COLLATE",o[o.AUTOINCREMENT=7]="AUTOINCREMENT",(function(c){c.nameFromType=function(r){return c[r]},c.fromName=function(r){return c[r]},c.TABLE_CONSTRAINTS=new Set([c.PRIMARY_KEY,c.UNIQUE,c.CHECK,c.FOREIGN_KEY]),c.COLUMN_CONSTRAINTS=new Set([c.PRIMARY_KEY,c.NOT_NULL,c.UNIQUE,c.CHECK,c.DEFAULT,c.COLLATE,c.FOREIGN_KEY,c.AUTOINCREMENT]);var d=new Map;Array.from(c.TABLE_CONSTRAINTS).forEach((function(r){h(d,r)}));var m=new Map;function h(r,n){var t=c.nameFromType(n),i=t.split("_");r.set(i[0],n),i.length>0&&r.set(t.replace("_"," "),n)}function s(r){return d.get(r.toUpperCase())}function a(r){return m.get(r.toUpperCase())}Array.from(c.COLUMN_CONSTRAINTS).forEach((function(r){h(m,r)})),c.getTableType=s,c.getColumnType=a,c.getType=function(r){var n=s(r);return n==null&&(n=a(r)),n}})(l.ConstraintType||(l.ConstraintType={}))},7686:function(_,l,o){var c=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0}),l.Constraints=void 0;var d=c(o(1159)),m=(function(){function h(){this.constraints=[],this.typedConstraints={}}return h.prototype.add=function(s){var a=this.constraints.map((function(n){return n.order})).lastIndexOf(s.order),r=a+1;a===-1&&(r=(0,d.default)(this.constraints.map((function(n){return n.order})),s.order)),r===this.constraints.length?this.constraints.push(s):this.constraints.splice(r,0,s),this.typedConstraints[s.getType()]!==null&&this.typedConstraints[s.getType()]!==void 0||(this.typedConstraints[s.getType()]=[]),this.typedConstraints[s.getType()].push(s)},h.prototype.addConstraintArray=function(s){for(var a=0;a<s.length;a++)this.add(s[a])},h.prototype.addConstraints=function(s){this.addConstraintArray(s.all())},h.prototype.has=function(){return this.constraints.length>0},h.prototype.hasType=function(s){return this.getConstraintsForType(s).length!==0},h.prototype.all=function(){return this.constraints},h.prototype.get=function(s){return this.constraints[s]},h.prototype.getConstraintsForType=function(s){var a=this.typedConstraints[s];return a==null&&(a=[]),a},h.prototype.clear=function(){var s=this.constraints.slice();return this.constraints=[],this.typedConstraints={},s},h.prototype.clearConstraintsByType=function(s){var a=this.typedConstraints[s];return delete this.typedConstraints[s],a===null?a=[]:a.length===0&&(this.constraints=this.constraints.filter((function(r){return r.getType()!==s}))),a},h.prototype.copy=function(){var s=new h;return s.addConstraints(this),s},h.prototype.size=function(){return this.constraints.length},h})();l.Constraints=m},2841:function(_,l,o){var c,d=this&&this.__extends||(c=function(s,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])},c(s,a)},function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function r(){this.constructor=s}c(s,a),s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)});Object.defineProperty(l,"__esModule",{value:!0}),l.RawConstraint=void 0;var m=o(8007),h=(function(s){function a(r,n,t,i){i===void 0&&(i=null);var u=s.call(this,r,n,i)||this;return u.sql=t,u}return d(a,s),a.prototype.buildSql=function(){var r=this.sql;return r.toUpperCase().startsWith(m.Constraint.CONSTRAINT)||(r=this.buildNameSql()+r),r},a})(m.Constraint);l.RawConstraint=h},4033:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TableColumn=void 0;var o=(function(){function c(d,m,h,s,a,r,n,t,i,u){this.index=d,this.name=m,this.type=h,this.dataType=s,this.max=a,this.notNull=r,this.defaultValueString=n,this.defaultValue=t,this.primaryKey=i,this.autoincrement=u}return c.prototype.getIndex=function(){return this.index},c.prototype.getName=function(){return this.name},c.prototype.getType=function(){return this.type},c.prototype.getDataType=function(){return this.dataType},c.prototype.isDataType=function(d){return this.dataType===d},c.prototype.getMax=function(){return this.max},c.prototype.isNotNull=function(){return this.notNull},c.prototype.getDefaultValueString=function(){return this.defaultValueString},c.prototype.getDefaultValue=function(){return this.defaultValue},c.prototype.isPrimaryKey=function(){return this.primaryKey},c.prototype.isAutoIncrement=function(){return this.autoincrement},c})();l.TableColumn=o},4980:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TableConstraints=void 0;var c=o(3765),d=o(7686),m=(function(){function h(){this.constraints=new d.Constraints,this.columnConstraints={}}return h.prototype.addTableConstraint=function(s){this.constraints.add(s)},h.prototype.addTableConstraints=function(s){this.constraints.addConstraints(s)},h.prototype.getTableConstraints=function(){return this.constraints},h.prototype.getTableConstraint=function(s){return s>=this.constraints.size()?null:this.constraints.get(s)},h.prototype.numTableConstraints=function(){return this.constraints.size()},h.prototype.addColumnConstraint=function(s,a){this.getOrCreateColumnConstraints(s).addConstraint(a)},h.prototype.addConstraints=function(s,a){this.getOrCreateColumnConstraints(s).addConstraints(a)},h.prototype.addColumnConstraints=function(s){this.getOrCreateColumnConstraints(s.name).addColumnConstraints(s)},h.prototype.getOrCreateColumnConstraints=function(s){var a=this.columnConstraints[s];return a==null&&(a=new c.ColumnConstraints(s),this.columnConstraints[s]=a),a},h.prototype.addColumnConstraintsMap=function(s){var a=this;s.forEach((function(r){a.addColumnConstraints(r)}))},h.prototype.getColumnConstraintsMap=function(){return this.columnConstraints},h.prototype.getColumnsWithConstraints=function(){return Array.from(Object.keys(this.columnConstraints))},h.prototype.getColumnConstraints=function(s){return this.columnConstraints[s]},h.prototype.getColumnConstraint=function(s,a){var r=null,n=this.getColumnConstraints(s);return n!=null&&(r=n.getConstraint(a)),r},h.prototype.numColumnConstraints=function(s){var a=0,r=this.getColumnConstraints(s);return r!=null&&(a=r.numConstraints()),a},h.prototype.addAllConstraints=function(s){s!=null&&(this.addTableConstraints(s.getTableConstraints()),this.addColumnConstraintsMap(s.getColumnConstraintsMap()))},h.prototype.hasConstraints=function(){return this.hasTableConstraints()||this.hasColumnConstraints()},h.prototype.hasTableConstraints=function(){return this.constraints.has()},h.prototype.hasColumnConstraints=function(){return Object.keys(this.columnConstraints).length>0},h.prototype.hasColumnConstraintsForColumn=function(s){return this.numColumnConstraints(s)>0},h})();l.TableConstraints=m},5045:(_,l,o)=>{var c=o(5108);Object.defineProperty(l,"__esModule",{value:!0}),l.TableInfo=void 0;var d=o(4033),m=o(7319),h=o(9211),s=o(7043),a=o(175),r=o(5329),n=(function(){function t(i,u){var f=this;this.namesToColumns=new Map,this.primaryKeys=[],this.tableName=i,this.columns=u,u.forEach((function(p){f.namesToColumns.set(p.getName(),p),p.isPrimaryKey()&&f.primaryKeys.push(p)}))}return t.prototype.getTableName=function(){return this.tableName},t.prototype.numColumns=function(){return this.columns.length},t.prototype.getColumns=function(){return this.columns.slice()},t.prototype.getColumnAtIndex=function(i){if(i<0||i>=this.columns.length)throw new Error("Column index: "+i+", not within range 0 to "+(this.columns.length-1));return this.columns[i]},t.prototype.hasColumn=function(i){return this.getColumn(i)!==null&&this.getColumn(i)!==void 0},t.prototype.getColumn=function(i){return this.namesToColumns.get(i)},t.prototype.hasPrimaryKey=function(){return this.primaryKeys.length!==0},t.prototype.getPrimaryKeys=function(){return this.primaryKeys.slice()},t.prototype.getPrimaryKey=function(){var i=null;return this.hasPrimaryKey()&&(i=this.primaryKeys[0]),i},t.info=function(i,u){var f="PRAGMA table_info("+r.StringUtils.quoteWrap(u)+")",p=i.all(f,null),y=[];p.forEach((function(b){var E=b.cid,x=b.name,M=b.type,S=b.notnull===1,O=b.dflt_value,C=b.pk===1,T=!1;C&&(T=i.all("SELECT tbl_name FROM "+s.SQLiteMaster.TABLE_NAME+" WHERE "+a.SQLiteMasterColumn.nameFromType(a.SQLiteMasterColumn.TBL_NAME)+"=? AND "+a.SQLiteMasterColumn.nameFromType(a.SQLiteMasterColumn.SQL)+" LIKE ?",[u,"%AUTOINCREMENT%"]).length===1);var R=null;if(M!=null&&M.endsWith(")")){var B=M.indexOf("(");if(B>-1){var z=M.substring(B+1,M.length-1);if(z.length!==0)try{R=parseInt(z),M=M.substring(0,B)}catch($){c.error($)}}}var L=t.getDataType(M),Y=void 0;b.dflt_value&&(Y=b.dflt_value.replace(/\\'/g,""));var ie=new d.TableColumn(E,x,M,L,R,S,O,Y,C,T);y.push(ie)}));var g=null;return y.length!==0&&(g=new t(u,y)),g},t.getDataType=function(i){var u=m.GeoPackageDataType.fromName(i);return u==null&&h.GeometryType.fromName(i)!=null&&(u=m.GeoPackageDataType.BLOB),u},t.CID="cid",t.NAME="name",t.TYPE="type",t.NOT_NULL="notnull",t.DFLT_VALUE="dflt_value",t.PK="pk",t.DEFAULT_NULL="NULL",t})();l.TableInfo=n},1648:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}),m=this&&this.__read||function(r,n){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i,u,f=t.call(r),p=[];try{for(;(n===void 0||n-- >0)&&!(i=f.next()).done;)p.push(i.value)}catch(y){u={error:y}}finally{try{i&&!i.done&&(t=f.return)&&t.call(f)}finally{if(u)throw u.error}}return p},h=this&&this.__spreadArray||function(r,n,t){if(t||arguments.length===2)for(var i,u=0,f=n.length;u<f;u++)!i&&u in n||(i||(i=Array.prototype.slice.call(n,0,u)),i[u]=n[u]);return r.concat(i||Array.prototype.slice.call(n))};Object.defineProperty(l,"__esModule",{value:!0}),l.UniqueConstraint=void 0;var s=o(91),a=(function(r){function n(t){for(var i=[],u=1;u<arguments.length;u++)i[u-1]=arguments[u];var f=r.call(this,s.ConstraintType.UNIQUE,t)||this;return f.columns=[],f.add.apply(f,h([],m(i),!1)),f}return d(n,r),n.prototype.buildSql=function(){var t="";t=(t=(t=t.concat(this.buildNameSql())).concat(n.UNIQUE)).concat(" (");for(var i=0;i<this.columns.length;i++){var u=this.columns[i];i>0&&(t=t.concat(", ")),t=t.concat(u.getName())}return t.concat(")")},n.prototype.copy=function(){return new(n.bind.apply(n,h([void 0,this.name],m(this.columns),!1)))},n.prototype.add=function(){for(var t=this,i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];i.forEach((function(f){t.columns.push(f)}))},n.prototype.getColumns=function(){return this.columns},n.UNIQUE="UNIQUE",n})(o(8007).Constraint);l.UniqueConstraint=a},1459:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TableCreator=void 0;var c=o(5965),d=o(5042),m=(function(){function h(s){this.geopackage=s,this.connection=s.database}return h.prototype.createRequired=function(){var s=new c.SpatialReferenceSystemDao(this.geopackage);return this.createSpatialReferenceSystem(),this.createContents(),s.createUndefinedGeographic(),s.createWgs84(),s.createUndefinedCartesian(),s.createWebMercator(),!0},h.prototype.createSpatialReferenceSystem=function(){return this.createTable("spatial_reference_system")},h.prototype.createContents=function(){return this.createTable("contents")},h.prototype.createGeometryColumns=function(){return this.createTable("geometry_columns")},h.prototype.createTileMatrixSet=function(){return this.createTable("tile_matrix_set")},h.prototype.createTileMatrix=function(){return this.createTable("tile_matrix")},h.prototype.createDataColumns=function(){return this.createTable("data_columns")},h.prototype.createDataColumnConstraints=function(){return this.createTable("data_column_constraints")},h.prototype.createMetadata=function(){return this.createTable("metadata")},h.prototype.createMetadataReference=function(){return this.createTable("metadata_reference")},h.prototype.createExtensions=function(){return this.createTable("extensions")},h.prototype.createTableIndex=function(){return this.createTable("table_index")},h.prototype.createGeometryIndex=function(){return this.createTable("geometry_index")},h.prototype.createFeatureTileLink=function(){return this.createTable("feature_tile_link")},h.prototype.createExtendedRelations=function(){return this.createTable("extended_relations")},h.prototype.createContentsId=function(){return this.createTable("contents_id")},h.prototype.createTileScaling=function(){return this.createTable("tile_scaling")},h.prototype.createTable=function(s){for(var a=!0,r=h.tableCreationScripts[s],n=0;n<r.length;n++){var t=r[n];try{a=a&&!!this.connection.run(t)}catch(i){if(i.message.indexOf("already exists")===-1)throw i}}return a},h.prototype.createUserTable=function(s){var a=this.connection;if(a.tableExists(s.getTableName()))throw new Error("Table already exists and cannot be created: "+s.getTableName());var r=d.CoreSQLUtils.createTableSQL(s);return a.run(r)},h.prototype.dropTable=function(s){d.CoreSQLUtils.dropTable(this.connection,s)},h.tableCreationScripts={spatial_reference_system:['CREATE TABLE gpkg_spatial_ref_sys (  srs_name TEXT NOT NULL,  srs_id INTEGER NOT NULL PRIMARY KEY,  organization TEXT NOT NULL,  organization_coordsys_id INTEGER NOT NULL,  definition  TEXT NOT NULL,  description TEXT,  definition_12_063 TEXT NOT NULL DEFAULT "undefined")',"CREATE VIEW st_spatial_ref_sys AS SELECT   srs_name,   srs_id,   organization,   organization_coordsys_id,   definition,   description FROM gpkg_spatial_ref_sys","CREATE VIEW spatial_ref_sys AS SELECT   srs_id AS srid,   organization AS auth_name,   organization_coordsys_id AS auth_srid,   definition AS srtext FROM gpkg_spatial_ref_sys"],contents:["CREATE TABLE gpkg_contents ( table_name TEXT NOT NULL PRIMARY KEY, data_type TEXT NOT NULL, identifier TEXT UNIQUE, description TEXT DEFAULT '', last_change DATETIME NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ','now')), min_x DOUBLE, min_y DOUBLE, max_x DOUBLE, max_y DOUBLE, srs_id INTEGER, CONSTRAINT fk_gc_r_srs_id FOREIGN KEY (srs_id) REFERENCES gpkg_spatial_ref_sys(srs_id))"],geometry_columns:["CREATE TABLE gpkg_geometry_columns (  table_name TEXT NOT NULL,  column_name TEXT NOT NULL,  geometry_type_name TEXT NOT NULL,  srs_id INTEGER NOT NULL,  z TINYINT NOT NULL,  m TINYINT NOT NULL,  CONSTRAINT pk_geom_cols PRIMARY KEY (table_name, column_name),  CONSTRAINT uk_gc_table_name UNIQUE (table_name),  CONSTRAINT fk_gc_tn FOREIGN KEY (table_name) REFERENCES gpkg_contents(table_name),  CONSTRAINT fk_gc_srs FOREIGN KEY (srs_id) REFERENCES gpkg_spatial_ref_sys (srs_id))","CREATE VIEW st_geometry_columns AS  SELECT    table_name,    column_name,    'ST_' || geometry_type_name AS geometry_type_name,    g.srs_id,    srs_name  FROM gpkg_geometry_columns as g JOIN gpkg_spatial_ref_sys AS s  WHERE g.srs_id = s.srs_id","CREATE VIEW geometry_columns AS  SELECT    table_name AS f_table_name,    column_name AS f_geometry_column,    (CASE geometry_type_name       WHEN 'GEOMETRY' THEN 0       WHEN 'POINT' THEN 1       WHEN 'LINESTRING' THEN 2       WHEN 'POLYGON' THEN 3       WHEN 'MULTIPOINT' THEN 4       WHEN 'MULTILINESTRING' THEN 5       WHEN 'MULTIPOLYGON' THEN 6       WHEN 'GEOMETRYCOLLECTION' THEN 7       WHEN 'CIRCULARSTRING' THEN 8       WHEN 'COMPOUNDCURVE' THEN 9       WHEN 'CURVEPOLYGON' THEN 10       WHEN 'MULTICURVE' THEN 11       WHEN 'MULTISURFACE' THEN 12       WHEN 'CURVE' THEN 13       WHEN 'SURFACE' THEN 14       WHEN 'POLYHEDRALSURFACE' THEN 15       WHEN 'TIN' THEN 16       WHEN 'TRIANGLE' THEN 17       ELSE 0 END) AS geometry_type,    2 + (CASE z WHEN 1 THEN 1 WHEN 2 THEN 1 ELSE 0 END) + (CASE m WHEN 1 THEN 1 WHEN 2 THEN 1 ELSE 0 END) AS coord_dimension,    srs_id AS srid  FROM gpkg_geometry_columns"],tile_matrix_set:["CREATE TABLE gpkg_tile_matrix_set (  table_name TEXT NOT NULL PRIMARY KEY,  srs_id INTEGER NOT NULL,  min_x DOUBLE NOT NULL,  min_y DOUBLE NOT NULL,  max_x DOUBLE NOT NULL,  max_y DOUBLE NOT NULL,  CONSTRAINT fk_gtms_table_name FOREIGN KEY (table_name) REFERENCES gpkg_contents(table_name),  CONSTRAINT fk_gtms_srs FOREIGN KEY (srs_id) REFERENCES gpkg_spatial_ref_sys (srs_id))"],tile_matrix:["CREATE TABLE gpkg_tile_matrix (  table_name TEXT NOT NULL,  zoom_level INTEGER NOT NULL,  matrix_width INTEGER NOT NULL,  matrix_height INTEGER NOT NULL,  tile_width INTEGER NOT NULL,  tile_height INTEGER NOT NULL,  pixel_x_size DOUBLE NOT NULL,  pixel_y_size DOUBLE NOT NULL,  CONSTRAINT pk_ttm PRIMARY KEY (table_name, zoom_level),  CONSTRAINT fk_tmm_table_name FOREIGN KEY (table_name) REFERENCES gpkg_contents(table_name))","CREATE TRIGGER 'gpkg_tile_matrix_zoom_level_insert'BEFORE INSERT ON 'gpkg_tile_matrix'FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'insert on table ''gpkg_tile_matrix'' violates constraint: zoom_level cannot be less than 0')WHERE (NEW.zoom_level < 0);END","CREATE TRIGGER 'gpkg_tile_matrix_zoom_level_update'BEFORE UPDATE of zoom_level ON 'gpkg_tile_matrix'FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'update on table ''gpkg_tile_matrix'' violates constraint: zoom_level cannot be less than 0')WHERE (NEW.zoom_level < 0);END","CREATE TRIGGER 'gpkg_tile_matrix_matrix_width_insert'BEFORE INSERT ON 'gpkg_tile_matrix'FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'insert on table ''gpkg_tile_matrix'' violates constraint: matrix_width cannot be less than 1')WHERE (NEW.matrix_width < 1);END","CREATE TRIGGER 'gpkg_tile_matrix_matrix_width_update'BEFORE UPDATE OF matrix_width ON 'gpkg_tile_matrix'FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'update on table ''gpkg_tile_matrix'' violates constraint: matrix_width cannot be less than 1')WHERE (NEW.matrix_width < 1);END","CREATE TRIGGER 'gpkg_tile_matrix_matrix_height_insert'BEFORE INSERT ON 'gpkg_tile_matrix'FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'insert on table ''gpkg_tile_matrix'' violates constraint: matrix_height cannot be less than 1')WHERE (NEW.matrix_height < 1);END","CREATE TRIGGER 'gpkg_tile_matrix_matrix_height_update'BEFORE UPDATE OF matrix_height ON 'gpkg_tile_matrix'FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'update on table ''gpkg_tile_matrix'' violates constraint: matrix_height cannot be less than 1')WHERE (NEW.matrix_height < 1);END","CREATE TRIGGER 'gpkg_tile_matrix_pixel_x_size_insert'BEFORE INSERT ON 'gpkg_tile_matrix'FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'insert on table ''gpkg_tile_matrix'' violates constraint: pixel_x_size must be greater than 0')WHERE NOT (NEW.pixel_x_size > 0);END","CREATE TRIGGER 'gpkg_tile_matrix_pixel_x_size_update'BEFORE UPDATE OF pixel_x_size ON 'gpkg_tile_matrix'FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'update on table ''gpkg_tile_matrix'' violates constraint: pixel_x_size must be greater than 0')WHERE NOT (NEW.pixel_x_size > 0);END","CREATE TRIGGER 'gpkg_tile_matrix_pixel_y_size_insert'BEFORE INSERT ON 'gpkg_tile_matrix'FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'insert on table ''gpkg_tile_matrix'' violates constraint: pixel_y_size must be greater than 0')WHERE NOT (NEW.pixel_y_size > 0);END","CREATE TRIGGER 'gpkg_tile_matrix_pixel_y_size_update'BEFORE UPDATE OF pixel_y_size ON 'gpkg_tile_matrix'FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'update on table ''gpkg_tile_matrix'' violates constraint: pixel_y_size must be greater than 0')WHERE NOT (NEW.pixel_y_size > 0);END"],data_columns:["CREATE TABLE gpkg_data_columns (  table_name TEXT NOT NULL,  column_name TEXT NOT NULL,  name TEXT,  title TEXT,  description TEXT,  mime_type TEXT,  constraint_name TEXT,  CONSTRAINT pk_gdc PRIMARY KEY (table_name, column_name),  CONSTRAINT gdc_tn UNIQUE (table_name, name))"],data_column_constraints:['CREATE TABLE gpkg_data_column_constraints (  constraint_name TEXT NOT NULL,  constraint_type TEXT NOT NULL, /* "range" | "enum" | "glob" */  value TEXT,  min NUMERIC,  min_is_inclusive BOOLEAN, /* 0 = false, 1 = true */  max NUMERIC,  max_is_inclusive BOOLEAN, /* 0 = false, 1 = true */  description TEXT,  CONSTRAINT gdcc_ntv UNIQUE (constraint_name, constraint_type, value))'],metadata:['CREATE TABLE gpkg_metadata (  id INTEGER CONSTRAINT m_pk PRIMARY KEY ASC NOT NULL,  md_scope TEXT NOT NULL DEFAULT "dataset",  md_standard_uri TEXT NOT NULL,  mime_type TEXT NOT NULL DEFAULT "text/xml",  metadata TEXT NOT NULL)',"CREATE TRIGGER 'gpkg_metadata_md_scope_insert' BEFORE INSERT ON 'gpkg_metadata' FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'insert on table gpkg_metadata violates constraint: md_scope must be one of undefined | fieldSession | collectionSession | series | dataset | featureType | feature | attributeType | attribute | tile | model | catalogue | schema | taxonomy software | service | collectionHardware | nonGeographicDataset | dimensionGroup') WHERE NOT(NEW.md_scope IN ('undefined','fieldSession','collectionSession','series','dataset', 'featureType','feature','attributeType','attribute','tile','model', 'catalogue','schema','taxonomy','software','service', 'collectionHardware','nonGeographicDataset','dimensionGroup')); END","CREATE TRIGGER 'gpkg_metadata_md_scope_update' BEFORE UPDATE OF 'md_scope' ON 'gpkg_metadata' FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'update on table gpkg_metadata violates constraint: md_scope must be one of undefined | fieldSession | collectionSession | series | dataset | featureType | feature | attributeType | attribute | tile | model | catalogue | schema | taxonomy software | service | collectionHardware | nonGeographicDataset | dimensionGroup') WHERE NOT(NEW.md_scope IN ('undefined','fieldSession','collectionSession','series','dataset', 'featureType','feature','attributeType','attribute','tile','model', 'catalogue','schema','taxonomy','software','service', 'collectionHardware','nonGeographicDataset','dimensionGroup')); END"],metadata_reference:["CREATE TABLE gpkg_metadata_reference (  reference_scope TEXT NOT NULL,  table_name TEXT,  column_name TEXT,  row_id_value INTEGER,  timestamp DATETIME NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ','now')),  md_file_id INTEGER NOT NULL,  md_parent_id INTEGER,  CONSTRAINT crmr_mfi_fk FOREIGN KEY (md_file_id) REFERENCES gpkg_metadata(id),  CONSTRAINT crmr_mpi_fk FOREIGN KEY (md_parent_id) REFERENCES gpkg_metadata(id))",`CREATE TRIGGER 'gpkg_metadata_reference_reference_scope_insert' BEFORE INSERT ON 'gpkg_metadata_reference' FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'insert on table gpkg_metadata_reference violates constraint: reference_scope must be one of "geopackage", table", "column", "row", "row/col"') WHERE NOT NEW.reference_scope IN ('geopackage','table','column','row','row/col'); END`,`CREATE TRIGGER 'gpkg_metadata_reference_reference_scope_update' BEFORE UPDATE OF 'reference_scope' ON 'gpkg_metadata_reference' FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'update on table gpkg_metadata_reference violates constraint: referrence_scope must be one of "geopackage", "table", "column", "row", "row/col"') WHERE NOT NEW.reference_scope IN ('geopackage','table','column','row','row/col'); END`,`CREATE TRIGGER 'gpkg_metadata_reference_column_name_insert' BEFORE INSERT ON 'gpkg_metadata_reference' FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'insert on table gpkg_metadata_reference violates constraint: column name must be NULL when reference_scope is "geopackage", "table" or "row"') WHERE (NEW.reference_scope IN ('geopackage','table','row') AND NEW.column_name IS NOT NULL); SELECT RAISE(ABORT, 'insert on table gpkg_metadata_reference violates constraint: column name must be defined for the specified table when reference_scope is "column" or "row/col"') WHERE (NEW.reference_scope IN ('column','row/col') AND NOT NEW.table_name IN ( SELECT name FROM SQLITE_MASTER WHERE type = 'table' AND name = NEW.table_name AND sql LIKE ('%' || NEW.column_name || '%'))); END`,`CREATE TRIGGER 'gpkg_metadata_reference_column_name_update' BEFORE UPDATE OF column_name ON 'gpkg_metadata_reference' FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'update on table gpkg_metadata_reference violates constraint: column name must be NULL when reference_scope is "geopackage", "table" or "row"') WHERE (NEW.reference_scope IN ('geopackage','table','row') AND NEW.column_nameIS NOT NULL); SELECT RAISE(ABORT, 'update on table gpkg_metadata_reference violates constraint: column name must be defined for the specified table when reference_scope is "column" or "row/col"') WHERE (NEW.reference_scope IN ('column','row/col') AND NOT NEW.table_name IN ( SELECT name FROM SQLITE_MASTER WHERE type = 'table' AND name = NEW.table_name AND sql LIKE ('%' || NEW.column_name || '%'))); END`,`CREATE TRIGGER 'gpkg_metadata_reference_row_id_value_insert' BEFORE INSERT ON 'gpkg_metadata_reference' FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'insert on table gpkg_metadata_reference violates constraint: row_id_value must be NULL when reference_scope is "geopackage", "table" or "column"') WHERE NEW.reference_scope IN ('geopackage','table','column') AND NEW.row_id_value IS NOT NULL; END `,`CREATE TRIGGER 'gpkg_metadata_reference_row_id_value_update' BEFORE UPDATE OF 'row_id_value' ON 'gpkg_metadata_reference' FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'update on table gpkg_metadata_reference violates constraint: row_id_value must be NULL when reference_scope is "geopackage", "table" or "column"') WHERE NEW.reference_scope IN ('geopackage','table','column') AND NEW.row_id_value IS NOT NULL; END`,`CREATE TRIGGER 'gpkg_metadata_reference_timestamp_insert' BEFORE INSERT ON 'gpkg_metadata_reference' FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'insert on table gpkg_metadata_reference violates constraint: timestamp must be a valid time in ISO 8601 "yyyy-mm-ddThh:mm:ss.cccZ" form') WHERE NOT (NEW.timestamp GLOB '[1-2][0-9][0-9][0-9]-[0-1][0-9]-[0-3][0-9]T[0-2][0-9]:[0-5][0-9]:[0-5][0-9].[0-9][0-9][0-9]Z' AND strftime('%s',NEW.timestamp) NOT NULL); END`,`CREATE TRIGGER 'gpkg_metadata_reference_timestamp_update' BEFORE UPDATE OF 'timestamp' ON 'gpkg_metadata_reference' FOR EACH ROW BEGIN SELECT RAISE(ABORT, 'update on table gpkg_metadata_reference violates constraint: timestamp must be a valid time in ISO 8601 "yyyy-mm-ddThh:mm:ss.cccZ" form') WHERE NOT (NEW.timestamp GLOB '[1-2][0-9][0-9][0-9]-[0-1][0-9]-[0-3][0-9]T[0-2][0-9]:[0-5][0-9]:[0-5][0-9].[0-9][0-9][0-9]Z' AND strftime('%s',NEW.timestamp) NOT NULL); END `],extensions:["CREATE TABLE gpkg_extensions (  table_name TEXT,  column_name TEXT,  extension_name TEXT NOT NULL,  definition TEXT NOT NULL,  scope TEXT NOT NULL,  CONSTRAINT ge_tce UNIQUE (table_name, column_name, extension_name))"],table_index:["CREATE TABLE nga_table_index (  table_name TEXT NOT NULL PRIMARY KEY,  last_indexed DATETIME)"],geometry_index:["CREATE TABLE nga_geometry_index (  table_name TEXT NOT NULL,  geom_id INTEGER NOT NULL,  min_x DOUBLE NOT NULL,  max_x DOUBLE NOT NULL,  min_y DOUBLE NOT NULL,  max_y DOUBLE NOT NULL,  min_z DOUBLE,  max_z DOUBLE,  min_m DOUBLE,  max_m DOUBLE,  CONSTRAINT pk_ngi PRIMARY KEY (table_name, geom_id),  CONSTRAINT fk_ngi_nti_tn FOREIGN KEY (table_name) REFERENCES nga_table_index(table_name))"],feature_tile_link:["CREATE TABLE nga_feature_tile_link (  feature_table_name TEXT NOT NULL,  tile_table_name TEXT NOT NULL,  CONSTRAINT pk_nftl PRIMARY KEY (feature_table_name, tile_table_name))"],extended_relations:["CREATE TABLE gpkgext_relations (  id INTEGER PRIMARY KEY AUTOINCREMENT,  base_table_name TEXT NOT NULL,  base_primary_column TEXT NOT NULL DEFAULT 'id',  related_table_name TEXT NOT NULL,  related_primary_column TEXT NOT NULL DEFAULT 'id',  relation_name TEXT NOT NULL,  mapping_table_name TEXT NOT NULL UNIQUE)"],contents_id:["CREATE TABLE nga_contents_id (  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,  table_name TEXT NOT NULL,  CONSTRAINT uk_nci_table_name UNIQUE (table_name),  CONSTRAINT fk_nci_gc_tn FOREIGN KEY (table_name) REFERENCES gpkg_contents(table_name))"],tile_scaling:["CREATE TABLE nga_tile_scaling (  table_name TEXT PRIMARY KEY NOT NULL,  scaling_type TEXT NOT NULL,  zoom_in INTEGER,  zoom_out INTEGER,  CONSTRAINT fk_nts_gtms_tn FOREIGN KEY (table_name)   REFERENCES gpkg_tile_matrix_set (table_name),  CHECK (scaling_type in ('in','out','in_out','out_in','closest_in_out','closest_out_in')))"]},h})();l.TableCreator=m},2431:function(_,l,o){var c=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.TableMapping=void 0;var d=c(o(4293)),m=c(o(8446)),h=c(o(3674)),s=c(o(2628)),a=o(1790),r=(function(){function n(t,i,u){var f=this;this._transferContent=!0,this._columns={},this._droppedColumns=new Set,this._fromTable=t,this._toTable=i,u.forEach((function(p){f.addMappedColumn(new a.MappedColumn(p.name,p.name,p.defaultValue,p.dataType))}))}return n.fromTableInfo=function(t){var i=new n(t.getTableName(),t.getTableName(),[]);return t.getColumns().forEach((function(u){i.addMappedColumn(new a.MappedColumn(u.getName(),u.getName(),u.getDefaultValue(),u.getDataType()))})),i},Object.defineProperty(n.prototype,"fromTable",{get:function(){return this._fromTable},set:function(t){this._fromTable=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toTable",{get:function(){return this._toTable},set:function(t){this._toTable=t},enumerable:!1,configurable:!0}),n.prototype.isNewTable=function(){return!(0,d.default)(this._toTable)&&!(0,m.default)(this._toTable,this._fromTable)},n.prototype.isTransferContent=function(){return this._transferContent},Object.defineProperty(n.prototype,"transferContent",{set:function(t){this._transferContent=t},enumerable:!1,configurable:!0}),n.prototype.addMappedColumn=function(t){this._columns[t.toColumn]=t},n.prototype.addColumnWithName=function(t){this._columns[t]=new a.MappedColumn(t,null,null,null)},n.prototype.removeColumn=function(t){var i=this._columns[t];return delete this._columns[t],i},n.prototype.getColumnNames=function(){return(0,h.default)(this._columns)},n.prototype.getColumns=function(){return this._columns},n.prototype.getMappedColumns=function(){return(0,s.default)(this._columns)},n.prototype.getColumn=function(t){return this._columns[t]},n.prototype.addDroppedColumn=function(t){this._droppedColumns.add(t)},n.prototype.removeDroppedColumn=function(t){return this._droppedColumns.delete(t)},Object.defineProperty(n.prototype,"droppedColumns",{get:function(){return this._droppedColumns},enumerable:!1,configurable:!0}),n.prototype.isDroppedColumn=function(t){return this._droppedColumns.has(t)},n.prototype.hasWhere=function(){return!(0,d.default)(this._where)},Object.defineProperty(n.prototype,"where",{get:function(){return this._where},set:function(t){this._where=t},enumerable:!1,configurable:!0}),n})();l.TableMapping=r},8140:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseExtension=void 0;var c=o(624),d=(function(){function m(h){this.geoPackage=h,this.connection=h.connection,this.extensionsDao=h.extensionDao}return m.prototype.getOrCreate=function(h,s,a,r,n){var t=this.getExtension(h,s,a);return t.length?t[0]:(this.extensionsDao.createTable(),this.createExtension(h,s,a,r,n),this.getExtension(h,s,a)[0])},m.prototype.getExtension=function(h,s,a){return this.extensionsDao.isTableExists()?this.extensionsDao.queryByExtensionAndTableNameAndColumnName(h,s,a):[]},m.prototype.hasExtension=function(h,s,a){return!!this.getExtension(h,s,a).length},m.prototype.hasExtensions=function(h){return this.extensionsDao.queryAllByExtension(h).length!==0},m.prototype.createExtension=function(h,s,a,r,n){var t=new c.Extension;return t.table_name=s,t.column_name=a,t.extension_name=h,t.definition=r,t.scope=n,this.extensionsDao.create(t)},m})();l.BaseExtension=d},4650:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ContentsId=void 0,l.ContentsId=function(){}},7092:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.ContentsIdDao=void 0;var m=o(4115),h=o(4650),s=(function(a){function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.gpkgTableName=r.TABLE_NAME,n.idColumns=["id"],n}return d(r,a),r.prototype.createObject=function(n){var t=new h.ContentsId;return n&&(t.id=n.id,t.table_name=n.table_name),t},r.prototype.createTable=function(){return this.geoPackage.getTableCreator().createContentsId()},r.prototype.getTableNames=function(){for(var n=[],t=this.queryForColumns("table_name"),i=0;i<t.length;i++)n.push(t[i].table_name);return n},r.prototype.queryForTableName=function(n){var t=this.queryForAll(this.buildWhereWithFieldAndValue(r.COLUMN_TABLE_NAME,n),this.buildWhereArgs(n));return t.length>0?t[0]:null},r.prototype.deleteByTableName=function(n){return this.deleteWhere(this.buildWhereWithFieldAndValue(r.COLUMN_TABLE_NAME,n),this.buildWhereArgs(n))},r.TABLE_NAME="nga_contents_id",r.COLUMN_ID="id",r.COLUMN_TABLE_NAME="table_name",r})(m.Dao);l.ContentsIdDao=s},1314:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.ContentsIdExtension=void 0;var m=o(8140),h=o(624),s=o(7092),a=o(6638),r=(function(n){function t(i){var u=n.call(this,i)||this;return u.contentsIdDao=i.contentsIdDao,u}return d(t,n),t.prototype.getOrCreateExtension=function(){var i=this.getOrCreate(t.EXTENSION_NAME,null,null,t.EXTENSION_DEFINITION,h.Extension.READ_WRITE);return this.contentsIdDao.createTable(),i},Object.defineProperty(t.prototype,"dao",{get:function(){return this.contentsIdDao},enumerable:!1,configurable:!0}),t.prototype.has=function(){return this.hasExtension(t.EXTENSION_NAME,null,null)&&this.contentsIdDao.isTableExists()},t.prototype.get=function(i){var u=null;return i&&i.table_name&&(u=this.getByTableName(i.table_name)),u},t.prototype.getByTableName=function(i){var u=null;return this.contentsIdDao.isTableExists()&&(u=this.contentsIdDao.queryForTableName(i)),u},t.prototype.getId=function(i){var u=null;return i&&i.table_name&&(u=this.getIdByTableName(i.table_name)),u},t.prototype.getIdByTableName=function(i){var u=null;if(this.contentsIdDao.isTableExists()){var f=this.contentsIdDao.queryForTableName(i);f&&(u=f.id)}return u},t.prototype.create=function(i){var u=null;return i&&i.table_name&&(u=this.createWithTableName(i.table_name)),u},t.prototype.createWithTableName=function(i){var u=this.contentsIdDao.createObject();return u.table_name=i,u.id=this.contentsIdDao.create(u),u},t.prototype.createId=function(i){var u=null;return i&&i.table_name&&(u=this.createIdWithTableName(i.table_name)),u},t.prototype.createIdWithTableName=function(i){return this.createWithTableName(i)},t.prototype.getOrCreateId=function(i){var u=null;return i&&i.table_name&&(u=this.getOrCreateIdByTableName(i.table_name)),u},t.prototype.getOrCreateIdByTableName=function(i){var u=this.getByTableName(i);return u==null&&(u=this.createWithTableName(i)),u},t.prototype.deleteId=function(i){var u=0;return i&&i.table_name&&(u=this.deleteIdByTableName(i.table_name)),u},t.prototype.deleteIdByTableName=function(i){return this.contentsIdDao.deleteByTableName(i)},t.prototype.count=function(){var i=0;return this.has()&&(i=this.contentsIdDao.count()),i},t.prototype.createIds=function(i){i===void 0&&(i="");for(var u=this.getMissing(i),f=0;f<u.length;f++)this.getOrCreateIdByTableName(u[f].table_name);return u.length},t.prototype.deleteIds=function(i){i===void 0&&(i="");var u=0;if(this.has())if(i.length===0)u=this.contentsIdDao.deleteAll();else for(var f=this.getIdsByType(i),p=0;p<f.length;p++)u+=this.contentsIdDao.deleteById(f[p].id);return u},t.prototype.getIdsByType=function(i){i===void 0&&(i="");var u=[];if(this.has()){var f="SELECT ";f+=s.ContentsIdDao.COLUMN_ID,f+=", ",f+=s.ContentsIdDao.COLUMN_TABLE_NAME,f+=" FROM "+s.ContentsIdDao.TABLE_NAME,f+=" WHERE ",f+=s.ContentsIdDao.COLUMN_TABLE_NAME,f+=" IN (SELECT ",f+=a.ContentsDao.COLUMN_TABLE_NAME,f+=" FROM ",f+=a.ContentsDao.TABLE_NAME;var p="",y=[];i!=null&&i.length>0&&(p+=a.ContentsDao.COLUMN_DATA_TYPE,p+=" = ?",y.push(i)),p.length>0&&(f+=" WHERE "+p),f+=")",u=this.connection.all(f,y)}return u},t.prototype.getMissing=function(i){i===void 0&&(i="");var u="SELECT "+a.ContentsDao.COLUMN_TABLE_NAME+" FROM "+a.ContentsDao.TABLE_NAME,f="",p=[];return i!=null&&i.length>0&&(f+=a.ContentsDao.COLUMN_DATA_TYPE,f+=" = ?",p.push(i)),this.has()&&(f.length>0&&(f+=" AND "),f+=a.ContentsDao.COLUMN_TABLE_NAME,f+=" NOT IN (SELECT ",f+=s.ContentsIdDao.COLUMN_TABLE_NAME,f+=" FROM ",f+=s.ContentsIdDao.TABLE_NAME,f+=")"),f.length>0&&(u+=" WHERE "+f),this.connection.all(u,p)},t.prototype.removeExtension=function(){this.contentsIdDao.isTableExists()&&this.geoPackage.deleteTable(s.ContentsIdDao.TABLE_NAME),this.extensionsDao.isTableExists()&&this.extensionsDao.deleteByExtension(t.EXTENSION_NAME)},t.EXTENSION_NAME="nga_contents_id",t.EXTENSION_AUTHOR="nga",t.EXTENSION_NAME_NO_AUTHOR="contents_id",t.EXTENSION_DEFINITION="http://ngageoint.github.io/GeoPackage/docs/extensions/contents-id.html",t})(m.BaseExtension);l.ContentsIdExtension=r},5306:function(_,l,o){var c,d=this&&this.__extends||(c=function(s,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])},c(s,a)},function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function r(){this.constructor=s}c(s,a),s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)});Object.defineProperty(l,"__esModule",{value:!0}),l.CrsWktExtension=void 0;var m=o(624),h=(function(s){function a(r){var n=s.call(this,r)||this;return n.extensionName=a.EXTENSION_NAME,n.extensionDefinition=a.EXTENSION_CRS_WKT_DEFINITION,n}return d(a,s),a.prototype.getOrCreateExtension=function(){return this.getOrCreate(this.extensionName,null,null,this.extensionDefinition,m.Extension.READ_WRITE)},a.prototype.has=function(){return this.hasExtension(a.EXTENSION_NAME,null,null)},a.prototype.removeExtension=function(){try{this.extensionsDao.isTableExists()&&this.extensionsDao.deleteByExtension(a.EXTENSION_NAME)}catch{throw new Error("Failed to delete CrsWkt extension. GeoPackage: "+this.geoPackage.name)}},a.EXTENSION_NAME="gpkg_crs_wkt",a.EXTENSION_CRS_WKT_AUTHOR="gpkg",a.EXTENSION_CRS_WKT_NAME_NO_AUTHOR="crs_wkt",a.EXTENSION_CRS_WKT_DEFINITION="http://www.geopackage.org/spec/#extension_crs_wkt",a})(o(8140).BaseExtension);l.CrsWktExtension=h},624:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Extension=void 0;var o=(function(){function c(){}return c.prototype.setExtensionName=function(d,m){this.extension_name=c.buildExtensionName(d,m)},Object.defineProperty(c.prototype,"author",{get:function(){return c.getAuthorWithExtensionName(this.extension_name)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"extensionNameNoAuthor",{get:function(){return c.getExtensionNameNoAuthor(this.extension_name)},enumerable:!1,configurable:!0}),c.buildExtensionName=function(d,m){return d+c.EXTENSION_NAME_DIVIDER+m},c.getAuthorWithExtensionName=function(d){return d.split(c.EXTENSION_NAME_DIVIDER)[0]},c.getExtensionNameNoAuthor=function(d){return d.slice(d.indexOf(c.EXTENSION_NAME_DIVIDER)+1)},c.prototype.getTableName=function(){return this.table_name},c.prototype.setTableName=function(d){this.table_name=d,d==null&&(this.column_name=null)},c.EXTENSION_NAME_DIVIDER="_",c.READ_WRITE="read-write",c.WRITE_ONLY="write-only",c})();l.Extension=o},5698:function(_,l,o){var c,d=this&&this.__extends||(c=function(t,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(u[p]=f[p])},c(t,i)},function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function u(){this.constructor=t}c(t,i),t.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}),m=this&&this.__values||function(t){var i=typeof Symbol=="function"&&Symbol.iterator,u=i&&t[i],f=0;if(u)return u.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&f>=t.length&&(t=void 0),{value:t&&t[f++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(l,"__esModule",{value:!0}),l.ExtensionDao=void 0;var h=o(624),s=o(4115),a=o(8572),r=o(1459),n=(function(t){function i(){var u=t!==null&&t.apply(this,arguments)||this;return u.gpkgTableName=i.TABLE_NAME,u.idColumns=[i.COLUMN_TABLE_NAME,i.COLUMN_COLUMN_NAME,i.COLUMN_EXTENSION_NAME],u}return d(i,t),i.prototype.createObject=function(u){var f=new h.Extension;return f.table_name=u.table_name,f.column_name=u.column_name,f.extension_name=u.extension_name,f.definition=u.definition,f.scope=u.scope,f},i.prototype.queryByExtension=function(u){var f=this.queryForAllEq(i.COLUMN_EXTENSION_NAME,u);if(f[0])return this.createObject(f[0])},i.prototype.queryAllByExtension=function(u){var f,p,y=[];try{for(var g=m(this.queryForAllEq(i.COLUMN_EXTENSION_NAME,u)),b=g.next();!b.done;b=g.next()){var E=b.value,x=this.createObject(E);y.push(x)}}catch(M){f={error:M}}finally{try{b&&!b.done&&(p=g.return)&&p.call(g)}finally{if(f)throw f.error}}return y},i.prototype.queryByExtensionAndTableName=function(u,f){var p,y,g=new a.ColumnValues;g.addColumn(i.COLUMN_EXTENSION_NAME,u),g.addColumn(i.COLUMN_TABLE_NAME,f);var b=[];try{for(var E=m(this.queryForFieldValues(g)),x=E.next();!x.done;x=E.next()){var M=x.value;b.push(this.createObject(M))}}catch(S){p={error:S}}finally{try{x&&!x.done&&(y=E.return)&&y.call(E)}finally{if(p)throw p.error}}return b},i.prototype.queryByExtensionAndTableNameAndColumnName=function(u,f,p){var y,g,b=new a.ColumnValues;b.addColumn(i.COLUMN_EXTENSION_NAME,u),f!=null&&b.addColumn(i.COLUMN_TABLE_NAME,f),p!=null&&b.addColumn(i.COLUMN_COLUMN_NAME,p);var E=[];try{for(var x=m(this.queryForFieldValues(b)),M=x.next();!M.done;M=x.next()){var S=M.value,O=this.createObject(S);E.push(O)}}catch(C){y={error:C}}finally{try{M&&!M.done&&(g=x.return)&&g.call(x)}finally{if(y)throw y.error}}return E},i.prototype.createTable=function(){return new r.TableCreator(this.geoPackage).createExtensions()},i.prototype.deleteByExtension=function(u){var f=new a.ColumnValues;return f.addColumn(i.COLUMN_EXTENSION_NAME,u),this.deleteWhere(this.buildWhere(f,"="),this.buildWhereArgs(f))},i.prototype.deleteByExtensionAndTableName=function(u,f){var p=new a.ColumnValues;return p.addColumn(i.COLUMN_EXTENSION_NAME,u),p.addColumn(i.COLUMN_TABLE_NAME,f),this.deleteWhere(this.buildWhere(p,"and"),this.buildWhereArgs(p))},i.prototype.deleteByExtensionAndTableNameAndColumnName=function(u,f,p){var y=new a.ColumnValues;return y.addColumn(i.COLUMN_EXTENSION_NAME,u),y.addColumn(i.COLUMN_TABLE_NAME,f),y.addColumn(i.COLUMN_COLUMN_NAME,p),this.deleteWhere(this.buildWhere(y,"and"),this.buildWhereArgs(y))},i.TABLE_NAME="gpkg_extensions",i.COLUMN_TABLE_NAME="table_name",i.COLUMN_COLUMN_NAME="column_name",i.COLUMN_EXTENSION_NAME="extension_name",i.COLUMN_DEFINITION="definition",i.COLUMN_SCOPE="scope",i})(s.Dao);l.ExtensionDao=n},9406:(_,l,o)=>{var c=o(5108);Object.defineProperty(l,"__esModule",{value:!0}),l.GeoPackageExtensions=void 0;var d=o(6131),m=o(5859),h=o(1832),s=o(5045),a=o(5042),r=o(362),n=o(8314),t=o(2431),i=o(8904),u=o(8116),f=o(4941),p=o(1459),y=o(1133),g=o(3501),b=o(2056),E=o(5306),x=(function(){function M(){}return M.deleteTableExtensions=function(S,O){d.NGAExtensions.deleteTableExtensions(S,O),M.deleteRTreeSpatialIndex(S,O),M.deleteRelatedTables(S,O),M.deleteSchema(S,O),M.deleteMetadata(S,O),M.deleteExtensionForTable(S,O)},M.deleteExtensions=function(S){d.NGAExtensions.deleteExtensions(S),this.deleteRTreeSpatialIndexExtension(S),this.deleteRelatedTablesExtension(S),this.deleteSchemaExtension(S),this.deleteMetadataExtension(S),this.deleteCrsWktExtension(S),this.delete(S)},M.copyTableExtensions=function(S,O,C){try{M.copyRTreeSpatialIndex(S,O,C),M.copyRelatedTables(S,O,C),M.copySchema(S,O,C),M.copyMetadata(S,O,C),d.NGAExtensions.copyTableExtensions(S,O,C)}catch(T){c.warn("Failed to copy extensions for table: "+C+", copied from table: "+O,T)}},M.deleteExtensionForTable=function(S,O){var C=S.extensionDao;try{C.isTableExists()&&C.deleteByExtension(O)}catch{throw new Error("Failed to delete Table extensions. GeoPackage: "+S.name+", Table: "+O)}},M.delete=function(S){var O=S.extensionDao;try{O.isTableExists()&&S.dropTable(O.gpkgTableName)}catch{throw new Error("Failed to delete all extensions. GeoPackage: "+S.name)}},M.deleteRTreeSpatialIndex=function(S,O){var C=M.getRTreeIndexExtension(S);C.has(O)&&C.deleteTable(O)},M.deleteRTreeSpatialIndexExtension=function(S){var O=M.getRTreeIndexExtension(S);O.has()&&O.deleteAll()},M.copyRTreeSpatialIndex=function(S,O,C){try{var T=M.getRTreeIndexExtension(S);if(T.has(O)){var R=S.geometryColumnsDao.queryForTableName(C);if(R!=null){var B=s.TableInfo.info(S.connection,C);if(B!=null){var z=B.getPrimaryKey().getName();T.createWithParameters(C,R.column_name,z)}}}}catch(L){c.warn("Failed to create RTree for table: "+C+", copied from table: "+O,L)}},M.getRTreeIndexExtension=function(S){return new m.RTreeIndex(S,null)},M.deleteRelatedTables=function(S,O){var C=M.getRelatedTableExtension(S);C.has()&&C.removeRelationships(O)},M.deleteRelatedTablesExtension=function(S){var O=M.getRelatedTableExtension(S);O.has()&&O.removeExtension()},M.copyRelatedTables=function(S,O,C){try{var T=M.getRelatedTableExtension(S);if(T.has()){var R=T.extendedRelationDao,B=S.extensionDao;R.getBaseTableRelations(O).forEach((function(z){var L=z.mapping_table_name,Y=B.queryByExtensionAndTableName(h.RelatedTablesExtension.EXTENSION_NAME,L).concat(B.queryByExtensionAndTableName(h.RelatedTablesExtension.EXTENSION_RELATED_TABLES_NAME_NO_AUTHOR,L));if(Y.length>0){var ie=a.CoreSQLUtils.createName(S.connection,L,O,C),$=new r.UserCustomTableReader(L).readTable(S.connection);n.AlterTable.copyTable(S.connection,$,ie);var Q=Y[0];Q.setTableName(ie),B.create(Q);var ce=t.TableMapping.fromTableInfo(s.TableInfo.info(S.connection,i.ExtendedRelationDao.TABLE_NAME));ce.removeColumn(i.ExtendedRelationDao.ID);var be=ce.getColumn(i.ExtendedRelationDao.BASE_TABLE_NAME);be.constantValue=C,be.whereValue=O;var Ae=ce.getColumn(i.ExtendedRelationDao.MAPPING_TABLE_NAME);Ae.constantValue=ie,Ae.whereValue=L,a.CoreSQLUtils.transferTableContentForTableMapping(S.connection,ce)}}))}}catch(z){c.warn("Failed to create Related Tables for table: "+C+", copied from table: "+O,z)}},M.getRelatedTableExtension=function(S){return new h.RelatedTablesExtension(S)},M.deleteSchema=function(S,O){var C=S.dataColumnsDao;try{C.isTableExists()&&C.deleteByTableName(O)}catch{throw new Error("Failed to delete Schema extension. GeoPackage: "+S.name+", Table: "+O)}},M.deleteSchemaExtension=function(S){var O=new u.SchemaExtension(S);O.has()&&O.removeExtension()},M.copySchema=function(S,O,C){try{if(S.isTable(f.DataColumnsDao.TABLE_NAME)){var T=new r.UserCustomTableReader(f.DataColumnsDao.TABLE_NAME).readUserCustomTable(S),R=T.getColumnWithColumnName(f.DataColumnsDao.COLUMN_NAME);if(R.hasConstraints()){if(R.clearConstraints(),T.hasConstraints()){T.clearConstraints();var B=p.TableCreator.tableCreationScripts.data_columns[0],z=y.ConstraintParser.getConstraints(B);T.addConstraints(z.getTableConstraints())}n.AlterTable.alterColumnForTable(S.connection,T,R)}a.CoreSQLUtils.transferTableContent(S.connection,f.DataColumnsDao.TABLE_NAME,f.DataColumnsDao.COLUMN_TABLE_NAME,C,O)}}catch(L){c.warn("Failed to create Schema for table: "+C+", copied from table: "+O,L)}},M.deleteMetadata=function(S,O){var C=S.metadataReferenceDao;try{C.isTableExists()&&C.deleteByTableName(O)}catch{throw new Error("Failed to delete Metadata extension. GeoPackage: "+S.name+", Table: "+O)}},M.deleteMetadataExtension=function(S){var O=new g.MetadataExtension(S);O.has()&&O.removeExtension()},M.copyMetadata=function(S,O,C){try{S.isTable(b.MetadataReferenceDao.TABLE_NAME)&&a.CoreSQLUtils.transferTableContent(S.connection,b.MetadataReferenceDao.TABLE_NAME,b.MetadataReferenceDao.COLUMN_TABLE_NAME,C,O)}catch(T){c.warn("Failed to create Metadata for table: "+C+", copied from table: "+O,T)}},M.deleteCrsWktExtension=function(S){var O=new E.CrsWktExtension(S);O.has()&&O.removeExtension()},M})();l.GeoPackageExtensions=x},5626:function(_,l,o){var c,d=this&&this.__extends||(c=function(p,y){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,b){g.__proto__=b}||function(g,b){for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(g[E]=b[E])},c(p,y)},function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function g(){this.constructor=p}c(p,y),p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}),m=this&&this.__awaiter||function(p,y,g,b){return new(g||(g=Promise))((function(E,x){function M(C){try{O(b.next(C))}catch(T){x(T)}}function S(C){try{O(b.throw(C))}catch(T){x(T)}}function O(C){var T;C.done?E(C.value):(T=C.value,T instanceof g?T:new g((function(R){R(T)}))).then(M,S)}O((b=b.apply(p,y||[])).next())}))},h=this&&this.__generator||function(p,y){var g,b,E,x,M={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return x={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function S(O){return function(C){return(function(T){if(g)throw new TypeError("Generator is already executing.");for(;x&&(x=0,T[0]&&(M=0)),M;)try{if(g=1,b&&(E=2&T[0]?b.return:T[0]?b.throw||((E=b.return)&&E.call(b),0):b.next)&&!(E=E.call(b,T[1])).done)return E;switch(b=0,E&&(T=[2&T[0],E.value]),T[0]){case 0:case 1:E=T;break;case 4:return M.label++,{value:T[1],done:!1};case 5:M.label++,b=T[1],T=[0];continue;case 7:T=M.ops.pop(),M.trys.pop();continue;default:if(!((E=(E=M.trys).length>0&&E[E.length-1])||T[0]!==6&&T[0]!==2)){M=0;continue}if(T[0]===3&&(!E||T[1]>E[0]&&T[1]<E[3])){M.label=T[1];break}if(T[0]===6&&M.label<E[1]){M.label=E[1],E=T;break}if(E&&M.label<E[2]){M.label=E[2],M.ops.push(T);break}E[2]&&M.ops.pop(),M.trys.pop();continue}T=y.call(p,M)}catch(R){T=[6,R],b=0}finally{g=E=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}})([O,C])}}};Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureTableIndex=void 0;var s=o(5859),a=o(8140),r=o(624),n=o(7049),t=o(9095),i=o(735),u=o(1895),f=(function(p){function y(g,b){var E=p.call(this,g)||this;return E.featureDao=b,E.extensionName=y.EXTENSION_NAME,E.extensionDefinition=y.EXTENSION_GEOMETRY_INDEX_DEFINITION,E.tableName=b.table_name,E.columnName=b.getGeometryColumnName(),E.tableIndexDao=g.tableIndexDao,E.geometryIndexDao=g.getGeometryIndexDao(b),E.rtreeIndexDao=new i.RTreeIndexDao(g,b),E.rtreeIndexDao.gpkgTableName="rtree_"+E.tableName+"_"+E.columnName,E.rtreeIndex=new s.RTreeIndex(g,b),E.rtreeIndexed=E.hasExtension("gpkg_rtree_index",E.tableName,E.columnName),E}return d(y,p),y.prototype.index=function(g){return m(this,void 0,void 0,(function(){return h(this,(function(b){return[2,this.indexWithForce(!1,g)]}))}))},y.prototype.indexWithForce=function(g,b){return m(this,void 0,void 0,(function(){var E,x,M;return h(this,(function(S){return b=b||function(){},this.progress=function(O){setTimeout(b,0,O)},(E=this.isIndexed())&&!g||((x=new s.RTreeIndex(this.geoPackage,this.featureDao)).create(),this.rtreeIndexed=x.hasExtension(x.extensionName,x.tableName,x.columnName),E=this.isIndexed()),E?[2,E]:(this.getOrCreateExtension(),M=this.getOrCreateTableIndex(),this.createOrClearGeometryIndicies(),[2,this.indexTable(M)])}))}))},y.prototype.ngaIndexWithForce=function(g,b){return m(this,void 0,void 0,(function(){var E,x;return h(this,(function(M){switch(M.label){case 0:return b=b||function(){},this.progress=function(S){setTimeout(b,0,S)},(E=this.isIndexed(!0))&&!g?[3,2]:[4,new s.RTreeIndex(this.geoPackage,this.featureDao).create()];case 1:M.sent(),M.label=2;case 2:return E&&!g?[3,5]:(this.getOrCreateExtension(),[4,this.getOrCreateTableIndex()]);case 3:return x=M.sent(),[4,this.createOrClearGeometryIndicies()];case 4:return M.sent(),[2,this.indexTable(x)];case 5:return[2,E]}}))}))},y.prototype.isIndexed=function(g){if(g===void 0&&(g=!1),!g){var b=new s.RTreeIndex(this.geoPackage,this.featureDao);if(this.rtreeIndexed=b.hasExtension(b.extensionName,b.tableName,b.columnName),this.rtreeIndexed)return!0}try{if(this.getFeatureTableIndexExtension()){var E=this.geoPackage.contentsDao.queryForId(this.tableName);if(!E)return!1;var x=new Date(E.last_change),M=this.tableIndexDao.queryForId(this.tableName);return!(!M||!M.last_indexed)&&new Date(M.last_indexed)>=x}return!1}catch{return!1}},y.prototype.getFeatureTableIndexExtension=function(){return this.getExtension(this.extensionName,this.tableName,this.columnName)[0]},y.prototype.getOrCreateExtension=function(){return this.getOrCreate(this.extensionName,this.tableName,this.columnName,this.extensionDefinition,r.Extension.READ_WRITE)},y.prototype.getOrCreateTableIndex=function(){return this.tableIndex||(this.tableIndexDao.createTable(),this.createTableIndex(),this.tableIndex)},y.prototype.createTableIndex=function(){var g=new n.TableIndex;return g.table_name=this.tableName,g.last_indexed=new Date,this.tableIndexDao.create(g)},Object.defineProperty(y.prototype,"tableIndex",{get:function(){return this.tableIndexDao.isTableExists()?this.tableIndexDao.queryForId(this.tableName):void 0},enumerable:!1,configurable:!0}),y.prototype.createOrClearGeometryIndicies=function(){return this.geometryIndexDao.createTable(),this.clearGeometryIndicies()},y.prototype.clearGeometryIndicies=function(){var g=this.geometryIndexDao.buildWhereWithFieldAndValue(t.GeometryIndexDao.COLUMN_TABLE_NAME,this.tableName),b=this.geometryIndexDao.buildWhereArgs(this.tableName);return this.geometryIndexDao.deleteWhere(g,b)},y.prototype.indexTable=function(g){return m(this,void 0,void 0,(function(){var b=this;return h(this,(function(E){return[2,new Promise((function(x,M){setTimeout((function(){b.indexChunk(0,g,x,M)}))})).then((function(){return b.updateLastIndexed(g)===1}))]}))}))},y.prototype.indexChunk=function(g,b,E,x){var M=this,S=this.featureDao.queryForChunk(100,g);S.length?(this.progress("Indexing "+100*g+" to "+100*(g+1)),S.forEach((function(O){var C=M.featureDao.getRow(O);M.indexRow(b,C.id,C.geometry)})),setTimeout((function(){M.indexChunk(++g,b,E,x)}))):E()},y.prototype.indexRow=function(g,b,E){if(!E)return!1;var x=E.envelope;if(!x){var M=E.geometry;M&&(x=u.EnvelopeBuilder.buildEnvelopeWithGeometry(M))}if(x){var S=this.geometryIndexDao.populate(g,b,x);return this.geometryIndexDao.createOrUpdate(S)===1}return!1},y.prototype.updateLastIndexed=function(g){return g||((g=new n.TableIndex).table_name=this.tableName),g.last_indexed=new Date().toISOString(),this.tableIndexDao.createOrUpdate(g)},y.prototype.queryWithBoundingBox=function(g,b){var E=g.projectBoundingBox(b,this.featureDao.projection).buildEnvelope();return this.queryWithGeometryEnvelope(E)},y.prototype.queryWithGeometryEnvelope=function(g){return this.rtreeIndexed?this.rtreeIndexDao.queryWithGeometryEnvelope(g):this.geometryIndexDao.queryWithGeometryEnvelope(g)},y.prototype.countWithBoundingBox=function(g,b){var E=g.projectBoundingBox(b,this.featureDao.projection).buildEnvelope();return this.countWithGeometryEnvelope(E)},y.prototype.countWithGeometryEnvelope=function(g){return this.rtreeIndexed?this.rtreeIndexDao.countWithGeometryEnvelope(g):this.geometryIndexDao.countWithGeometryEnvelope(g)},y.EXTENSION_GEOMETRY_INDEX_AUTHOR="nga",y.EXTENSION_GEOMETRY_INDEX_NAME_NO_AUTHOR="geometry_index",y.EXTENSION_NAME=r.Extension.buildExtensionName(y.EXTENSION_GEOMETRY_INDEX_AUTHOR,y.EXTENSION_GEOMETRY_INDEX_NAME_NO_AUTHOR),y.EXTENSION_GEOMETRY_INDEX_DEFINITION="http://ngageoint.github.io/GeoPackage/docs/extensions/geometry-index.html",y})(a.BaseExtension);l.FeatureTableIndex=f},8021:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GeometryIndex=void 0;var o=(function(){function c(){}return Object.defineProperty(c.prototype,"tableIndex",{set:function(d){this.table_name=d.table_name},enumerable:!1,configurable:!0}),c})();l.GeometryIndex=o},9095:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.GeometryIndexDao=void 0;var m=o(4115),h=o(8021),s=o(1459),a=(function(r){function n(t,i){var u=r.call(this,t)||this;return u.gpkgTableName=n.TABLE_NAME,u.idColumns=["table_name","geom_id"],u.featureDao=i,u}return d(n,r),n.prototype.createObject=function(t){var i=new h.GeometryIndex;return t&&(i.table_name=t.table_name,i.geom_id=t.geom_id,i.min_x=t.min_x,i.max_x=t.max_x,i.min_y=t.min_y,i.max_y=t.max_y,i.min_z=t.min_z,i.max_z=t.max_z,i.min_m=t.min_m,i.max_m=t.max_m),i},n.prototype.getTableIndex=function(t){return this.geoPackage.tableIndexDao.queryForId(t.table_name)},n.prototype.queryForTableName=function(t){return this.queryForEach(n.COLUMN_TABLE_NAME,t)},n.prototype.countByTableName=function(t){return this.count(n.COLUMN_TABLE_NAME,t)},n.prototype.populate=function(t,i,u){var f=new h.GeometryIndex;return f.tableIndex=t,f.geom_id=i,f.min_x=u.minX,f.min_y=u.minY,f.max_x=u.maxX,f.max_y=u.maxY,u.hasZ&&(f.min_z=u.minZ,f.max_z=u.maxZ),u.hasM&&(f.min_m=u.minM,f.max_m=u.maxM),f},n.prototype.createTable=function(){return!!this.isTableExists()||new s.TableCreator(this.geoPackage).createGeometryIndex()},n.prototype._generateGeometryEnvelopeQuery=function(t){var i=this.featureDao.gpkgTableName,u="";u+=this.buildWhereWithFieldAndValue(n.COLUMN_TABLE_NAME,i),u+=" and ";var f=t.minX<t.maxX;f?(u+=this.buildWhereWithFieldAndValue(n.COLUMN_MIN_X,t.maxX,"<="),u+=" and ",u+=this.buildWhereWithFieldAndValue(n.COLUMN_MAX_X,t.minX,">=")):(u+="(",u+=this.buildWhereWithFieldAndValue(n.COLUMN_MIN_X,t.maxX,"<="),u+=" or ",u+=this.buildWhereWithFieldAndValue(n.COLUMN_MAX_X,t.minX,">="),u+=" or ",u+=this.buildWhereWithFieldAndValue(n.COLUMN_MIN_X,t.minX,">="),u+=" or ",u+=this.buildWhereWithFieldAndValue(n.COLUMN_MAX_X,t.maxX,"<="),u+=")"),u+=" and ",u+=this.buildWhereWithFieldAndValue(n.COLUMN_MIN_Y,t.maxY,"<="),u+=" and ",u+=this.buildWhereWithFieldAndValue(n.COLUMN_MAX_Y,t.minY,">=");var p=[i,t.maxX,t.minX];return f||p.push(t.minX,t.maxX),p.push(t.maxY,t.minY),t.hasZ&&(u+=" and ",u+=this.buildWhereWithFieldAndValue(n.COLUMN_MIN_Z,t.minZ,"<="),u+=" and ",u+=this.buildWhereWithFieldAndValue(n.COLUMN_MAX_Z,t.maxZ,">="),p.push(t.maxZ,t.minZ)),t.hasM&&(u+=" and ",u+=this.buildWhereWithFieldAndValue(n.COLUMN_MIN_M,t.minM,"<="),u+=" and ",u+=this.buildWhereWithFieldAndValue(n.COLUMN_MAX_M,t.maxM,">="),p.push(t.maxM,t.minM)),{join:'inner join "'+i+'" on "'+i+'".'+this.featureDao.idColumns[0]+" = "+n.COLUMN_GEOM_ID,where:u,whereArgs:p,tableNameArr:['"'+i+'".*']}},n.prototype.queryWithGeometryEnvelope=function(t){var i=this._generateGeometryEnvelopeQuery(t);return this.queryJoinWhereWithArgs(i.join,i.where,i.whereArgs,i.tableNameArr)},n.prototype.countWithGeometryEnvelope=function(t){var i=this._generateGeometryEnvelopeQuery(t);return this.countJoinWhereWithArgs(i.join,i.where,i.whereArgs)},n.TABLE_NAME="nga_geometry_index",n.COLUMN_TABLE_NAME=n.TABLE_NAME+".table_name",n.COLUMN_TABLE_NAME_FIELD="table_name",n.COLUMN_GEOM_ID=n.TABLE_NAME+".geom_id",n.COLUMN_MIN_X=n.TABLE_NAME+".min_x",n.COLUMN_MAX_X=n.TABLE_NAME+".max_x",n.COLUMN_MIN_Y=n.TABLE_NAME+".min_y",n.COLUMN_MAX_Y=n.TABLE_NAME+".max_y",n.COLUMN_MIN_Z=n.TABLE_NAME+".min_z",n.COLUMN_MAX_Z=n.TABLE_NAME+".max_z",n.COLUMN_MIN_M=n.TABLE_NAME+".min_m",n.COLUMN_MAX_M=n.TABLE_NAME+".max_m",n})(m.Dao);l.GeometryIndexDao=a},7049:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TableIndex=void 0,l.TableIndex=function(){}},9581:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.TableIndexDao=void 0;var m=o(4115),h=o(1459),s=o(7049),a=(function(r){function n(){var t=r!==null&&r.apply(this,arguments)||this;return t.gpkgTableName=n.TABLE_NAME,t.idColumns=[n.COLUMN_TABLE_NAME],t}return d(n,r),n.prototype.createObject=function(t){var i=new s.TableIndex;return t&&(i.table_name=t.table_name,i.last_indexed=t.last_indexed),i},n.prototype.createTable=function(){return new h.TableCreator(this.geoPackage).createTableIndex()},n.TABLE_NAME="nga_table_index",n.COLUMN_TABLE_NAME="table_name",n.COLUMN_LAST_INDEXED="last_indexed",n})(m.Dao);l.TableIndexDao=a},3501:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.MetadataExtension=void 0;var m=o(8140),h=o(624),s=o(2056),a=o(663),r=(function(n){function t(i){var u=n.call(this,i)||this;return u.extensionName=t.EXTENSION_NAME,u.extensionDefinition=t.EXTENSION_Metadata_DEFINITION,u}return d(t,n),t.prototype.getOrCreateExtension=function(){return this.getOrCreate(this.extensionName,null,null,this.extensionDefinition,h.Extension.READ_WRITE)},t.prototype.has=function(){return this.hasExtension(t.EXTENSION_NAME,null,null)},t.prototype.removeExtension=function(){this.geoPackage.isTable(s.MetadataReferenceDao.TABLE_NAME)&&this.geoPackage.dropTable(s.MetadataReferenceDao.TABLE_NAME),this.geoPackage.isTable(a.MetadataDao.TABLE_NAME)&&this.geoPackage.dropTable(a.MetadataDao.TABLE_NAME);try{this.extensionsDao.isTableExists()&&this.extensionsDao.deleteByExtension(t.EXTENSION_NAME)}catch{throw new Error("Failed to delete Schema extension. GeoPackage: "+this.geoPackage.name)}},t.EXTENSION_NAME="gpkg_metadata",t.EXTENSION_Metadata_AUTHOR="gpkg",t.EXTENSION_Metadata_NAME_NO_AUTHOR="metadata",t.EXTENSION_Metadata_DEFINITION="http://www.geopackage.org/spec/#extension_metadata",t})(m.BaseExtension);l.MetadataExtension=r},6131:(_,l,o)=>{var c=o(5108);Object.defineProperty(l,"__esModule",{value:!0}),l.NGAExtensions=void 0;var d=o(5626),m=o(9095),h=o(9581),s=o(5042),a=o(7960),r=o(7523),n=o(8479),t=o(1832),i=o(1314),u=o(362),f=o(8314),p=o(2431),y=o(233),g=o(8904),b=o(5045),E=o(7092),x=(function(){function M(){}return M.deleteTableExtensions=function(S,O){M.deleteGeometryIndex(S,O),M.deleteTileScaling(S,O),M.deleteFeatureStyle(S,O),M.deleteContentsId(S,O)},M.deleteExtensions=function(S){M.deleteGeometryIndexExtension(S),M.deleteTileScalingExtension(S),M.deleteFeatureStyleExtension(S),M.deleteContentsIdExtension(S)},M.copyTableExtensions=function(S,O,C){try{M.copyContentsId(S,O,C),M.copyFeatureStyle(S,O,C),M.copyTileScaling(S,O,C),M.copyGeometryIndex(S,O,C)}catch(T){c.warn("Failed to copy extensions for table: "+C+", copied from table: "+O,T)}},M.deleteGeometryIndex=function(S,O){var C=S.getGeometryIndexDao(null),T=S.tableIndexDao,R=S.extensionDao;try{C.isTableExists()&&C.deleteWhere(C.buildWhereWithFieldAndValue(m.GeometryIndexDao.COLUMN_TABLE_NAME_FIELD,O),C.buildWhereArgs(O)),T.isTableExists()&&T.deleteWhere(T.buildWhereWithFieldAndValue(h.TableIndexDao.COLUMN_TABLE_NAME,O),T.buildWhereArgs(O)),R.isTableExists()&&R.deleteByExtensionAndTableName(d.FeatureTableIndex.EXTENSION_NAME,O)}catch{throw new Error("Failed to delete Table Index. GeoPackage: "+S.name+", Table: "+O)}},M.deleteGeometryIndexExtension=function(S){var O=S.getGeometryIndexDao(null),C=S.tableIndexDao,T=S.extensionDao;try{O.isTableExists()&&S.dropTable(m.GeometryIndexDao.TABLE_NAME),C.isTableExists()&&S.dropTable(h.TableIndexDao.TABLE_NAME),T.isTableExists()&&T.deleteByExtension(d.FeatureTableIndex.EXTENSION_NAME)}catch{throw new Error("Failed to delete Table Index extension and tables. GeoPackage: "+S.name)}},M.copyGeometryIndex=function(S,O,C){try{var T=S.extensionDao;if(T.isTableExists()){var R=T.queryByExtensionAndTableName(d.FeatureTableIndex.EXTENSION_NAME,O);if(R.length>0){var B=R[0];B.table_name=C,T.create(B);var z=S.tableIndexDao;if(z.isTableExists()){var L=z.queryForId(O);L!=null&&(L.table_name=C,z.create(L),S.isTable(m.GeometryIndexDao.TABLE_NAME)&&s.CoreSQLUtils.transferTableContent(S.connection,m.GeometryIndexDao.TABLE_NAME,m.GeometryIndexDao.COLUMN_TABLE_NAME_FIELD,C,O))}}}}catch(Y){c.warn("Failed to create Geometry Index for table: "+C+", copied from table: "+O,Y)}},M.deleteTileScaling=function(S,O){var C=S.tileScalingDao,T=S.extensionDao;try{C.isTableExists()&&C.deleteByTableName(O),T.isTableExists()&&T.deleteByExtensionAndTableName(r.TileScalingExtension.EXTENSION_NAME,O)}catch{throw new Error("Failed to delete Tile Scaling. GeoPackage: "+S.name+", Table: "+O)}},M.deleteTileScalingExtension=function(S){var O=S.tileScalingDao,C=S.extensionDao;try{O.isTableExists()&&S.dropTable(O.gpkgTableName),C.isTableExists()&&C.deleteByExtension(r.TileScalingExtension.EXTENSION_NAME)}catch{throw new Error("Failed to delete Tile Scaling extension and table. GeoPackage: "+S.name)}},M.copyTileScaling=function(S,O,C){try{var T=new r.TileScalingExtension(S,O);if(T.has()){var R=T.getOrCreateExtension();R!=null&&(R.setTableName(C),T.extensionsDao.create(R),S.isTable(a.TileScalingDao.TABLE_NAME)&&s.CoreSQLUtils.transferTableContent(S.connection,a.TileScalingDao.TABLE_NAME,a.TileScalingDao.COLUMN_TABLE_NAME,C,O))}}catch(B){c.warn("Failed to create Tile Scaling for table: "+C+", copied from table: "+O,B)}},M.deleteFeatureStyle=function(S,O){var C=M.getFeatureStyleExtension(S);C.has(O)&&C.deleteRelationships(O)},M.deleteFeatureStyleExtension=function(S){var O=M.getFeatureStyleExtension(S);O.has(null)&&O.removeExtension()},M.copyFeatureStyle=function(S,O,C){try{var T=M.getFeatureStyleExtension(S);if(T.hasRelationship(O)){var R=T.getOrCreateExtension(O);if(R!=null){R.setTableName(C),T.extensionsDao.create(R);var B=T.getContentsId(),z=B.getIdByTableName(O),L=B.getIdByTableName(C);z!=null&&L!=null&&(T.hasTableStyleRelationship(O)&&M.copyFeatureTableStyle(T,n.FeatureStyleExtension.TABLE_MAPPING_TABLE_STYLE,O,C,z,L),T.hasTableIconRelationship(O)&&M.copyFeatureTableStyle(T,n.FeatureStyleExtension.TABLE_MAPPING_TABLE_ICON,O,C,z,L))}}}catch(Y){c.warn("Failed to create Feature Style for table: "+C+", copied from table: "+O,Y)}},M.copyFeatureTableStyle=function(S,O,C,T,R,B){var z=S.geoPackage,L=S.getMappingTableName(O,C),Y=z.extensionDao,ie=Y.queryByExtensionAndTableName(t.RelatedTablesExtension.EXTENSION_NAME,L).concat(Y.queryByExtensionAndTableName(t.RelatedTablesExtension.EXTENSION_RELATED_TABLES_NAME_NO_AUTHOR,L));if(ie.length>0){var $=S.getMappingTableName(O,T),Q=new u.UserCustomTableReader(L).readTable(z.connection);f.AlterTable.copyTable(z.connection,Q,$,!1);var ce=new p.TableMapping(Q.getTableName(),$,Q.getUserColumns().getColumns()),be=ce.getColumn(y.UserMappingTable.COLUMN_BASE_ID);be.constantValue=B,be.whereValue=R,s.CoreSQLUtils.transferTableContentForTableMapping(z.connection,ce);var Ae=ie[0];Ae.setTableName($),Y.create(Ae);var we=p.TableMapping.fromTableInfo(b.TableInfo.info(z.connection,g.ExtendedRelationDao.TABLE_NAME));we.removeColumn(g.ExtendedRelationDao.ID),we.getColumn(g.ExtendedRelationDao.BASE_TABLE_NAME).whereValue=E.ContentsIdDao.TABLE_NAME;var Xe=we.getColumn(g.ExtendedRelationDao.MAPPING_TABLE_NAME);Xe.constantValue=$,Xe.whereValue=L,s.CoreSQLUtils.transferTableContentForTableMapping(z.connection,we)}},M.getFeatureStyleExtension=function(S){return new n.FeatureStyleExtension(S)},M.deleteContentsId=function(S,O){var C=new i.ContentsIdExtension(S);C.has()&&C.deleteIdByTableName(O)},M.deleteContentsIdExtension=function(S){var O=new i.ContentsIdExtension(S);O.has()&&O.removeExtension()},M.copyContentsId=function(S,O,C){try{var T=new i.ContentsIdExtension(S);T.has()&&T.getByTableName(O)!=null&&T.createWithTableName(C)}catch(R){c.warn("Failed to create Contents Id for table: "+C+", copied from table: "+O,R)}},M})();l.NGAExtensions=x},3096:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DublinCoreMetadata=void 0;var c=o(2224),d=(function(){function m(){}return m.hasColumn=function(h,s){var a,r=(a=h instanceof c.UserRow?h.table:h).hasColumn(s.name);if(!a.hasColumn(s.name)){var n=s.synonyms;if(n)for(var t=0;t<n.length&&!(r=a.hasColumn(n[t]));t++);}return r},m.getColumn=function(h,s){var a,r,n=(a=h instanceof c.UserRow?h.table:h).hasColumn(s.name);if(n)r=a.getColumnWithColumnName(s.name);else{var t=s.synonyms;if(t){for(var i=0;i<t.length;i++)if(n=a.hasColumn(t[i])){r=a.getColumnWithColumnName(t[i]);break}}}return r},m.getValue=function(h,s){var a=m.getColumn(h,s).name;return h.getValueWithColumnName(a)},m.setValue=function(h,s,a){var r=m.getColumn(h,s);h.setValueWithColumnName(r.name,a)},m})();l.DublinCoreMetadata=d},1485:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DublinCoreType=void 0;var o=(function(){function c(d,m){this.name=d,this.synonyms=m}return c.fromName=function(d){for(var m in c)if((h=c[m]).name===d)return h;for(var m in c){var h;if((h=c[m]).synonyms){for(var s=0;s<h.synonyms.length;s++)if(h.synonyms[s]===d)return h}}},c.DATE=new c("date"),c.DESCRIPTION=new c("description"),c.FORMAT=new c("format",["content_type"]),c.IDENTIFIER=new c("identifier",["id"]),c.SOURCE=new c("source"),c.TITLE=new c("title"),c})();l.DublinCoreType=o},7817:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedRelation=void 0,l.ExtendedRelation=function(){}},8904:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}),m=this&&this.__values||function(n){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&n[t],u=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&u>=n.length&&(n=void 0),{value:n&&n[u++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedRelationDao=void 0;var h=o(4115),s=o(8572),a=o(7817),r=(function(n){function t(){var i=n!==null&&n.apply(this,arguments)||this;return i.gpkgTableName=t.TABLE_NAME,i.idColumns=["id"],i}return d(t,n),t.prototype.createObject=function(i){var u=new a.ExtendedRelation;return i&&(u.base_table_name=i.base_table_name,u.base_primary_column=i.base_primary_column,u.related_table_name=i.base_primary_column,u.related_table_name=i.related_table_name,u.relation_name=i.relation_name,u.mapping_table_name=i.mapping_table_name,u.related_primary_column=i.related_primary_column,u.id=i.id),u},t.prototype.createTable=function(){return this.geoPackage.getTableCreator().createExtendedRelations()},t.prototype.getBaseTables=function(){for(var i=[],u=this.queryForColumns("base_table_name"),f=0;f<u.length;f++)i.push(u[f].base_table_name);return i},t.prototype.getRelatedTables=function(){for(var i=[],u=this.queryForColumns("related_table_name"),f=0;f<u.length;f++)i.push(u[f].related_table_name);return i},t.prototype.getBaseTableRelations=function(i){var u,f,p=[];try{for(var y=m(this.queryForAllEq(t.COLUMN_BASE_TABLE_NAME,i)),g=y.next();!g.done;g=y.next()){var b=g.value;p.push(this.createObject(b))}}catch(E){u={error:E}}finally{try{g&&!g.done&&(f=y.return)&&f.call(y)}finally{if(u)throw u.error}}return p},t.prototype.getRelatedTableRelations=function(i){var u,f,p=[];try{for(var y=m(this.queryForAllEq(t.COLUMN_RELATED_TABLE_NAME,i)),g=y.next();!g.done;g=y.next()){var b=g.value;p.push(this.createObject(b))}}catch(E){u={error:E}}finally{try{g&&!g.done&&(f=y.return)&&f.call(y)}finally{if(u)throw u.error}}return p},t.prototype.getBaseTableRelationsWithName=function(i,u){var f,p,y=new s.ColumnValues;y.addColumn(t.COLUMN_BASE_TABLE_NAME,i),y.addColumn(t.COLUMN_RELATION_NAME,u);var g=this.buildWhere(y,"and"),b=this.buildWhereArgs(y),E=[];try{for(var x=m(this.queryForAll(g,b)),M=x.next();!M.done;M=x.next()){var S=M.value;E.push(this.createObject(S))}}catch(O){f={error:O}}finally{try{M&&!M.done&&(p=x.return)&&p.call(x)}finally{if(f)throw f.error}}return E},t.prototype.getTableRelations=function(i){var u,f,p=new s.ColumnValues;p.addColumn(t.COLUMN_BASE_TABLE_NAME,i),p.addColumn(t.COLUMN_RELATED_TABLE_NAME,i);var y=this.buildWhere(p,"or"),g=this.buildWhereArgs(p),b=[];try{for(var E=m(this.queryForAll(y,g)),x=E.next();!x.done;x=E.next()){var M=x.value;b.push(this.createObject(M))}}catch(S){u={error:S}}finally{try{x&&!x.done&&(f=E.return)&&f.call(E)}finally{if(u)throw u.error}}return b},t.prototype.getRelations=function(i,u,f){var p,y,g=new s.ColumnValues;g.addColumn(t.COLUMN_BASE_TABLE_NAME,i),g.addColumn(t.COLUMN_RELATED_TABLE_NAME,u),g.addColumn(t.COLUMN_MAPPING_TABLE_NAME,f);var b=this.buildWhereLike(g,"and"),E=this.buildWhereArgs(g),x=[];try{for(var M=m(this.queryForAll(b,E)),S=M.next();!S.done;S=M.next()){var O=S.value;x.push(this.createObject(O))}}catch(C){p={error:C}}finally{try{S&&!S.done&&(y=M.return)&&y.call(M)}finally{if(p)throw p.error}}return x},t.prototype.queryByMappingTableName=function(i){var u,f,p=new s.ColumnValues;p.addColumn(t.COLUMN_MAPPING_TABLE_NAME,i);var y=this.buildWhere(p,"and"),g=this.buildWhereArgs(p),b=[];try{for(var E=m(this.queryForAll(y,g)),x=E.next();!x.done;x=E.next()){var M=x.value;b.push(this.createObject(M))}}catch(S){u={error:S}}finally{try{x&&!x.done&&(f=E.return)&&f.call(E)}finally{if(u)throw u.error}}return b},t.TABLE_NAME="gpkgext_relations",t.ID="id",t.COLUMN_ID=t.TABLE_NAME+"."+t.ID,t.BASE_TABLE_NAME="base_table_name",t.COLUMN_BASE_TABLE_NAME=t.TABLE_NAME+"."+t.BASE_TABLE_NAME,t.BASE_PRIMARY_COLUMN="base_primary_column",t.COLUMN_BASE_PRIMARY_COLUMN=t.TABLE_NAME+"."+t.BASE_PRIMARY_COLUMN,t.RELATED_TABLE_NAME="related_table_name",t.COLUMN_RELATED_TABLE_NAME=t.TABLE_NAME+"."+t.RELATED_TABLE_NAME,t.RELATED_PRIMARY_COLUMN="related_primary_column",t.COLUMN_RELATED_PRIMARY_COLUMN=t.TABLE_NAME+"."+t.RELATED_PRIMARY_COLUMN,t.RELATION_NAME="relation_name",t.COLUMN_RELATION_NAME=t.TABLE_NAME+"."+t.RELATION_NAME,t.MAPPING_TABLE_NAME="mapping_table_name",t.COLUMN_MAPPING_TABLE_NAME=t.TABLE_NAME+"."+t.MAPPING_TABLE_NAME,t})(h.Dao);l.ExtendedRelationDao=r},1832:function(_,l,o){var c,d=o(5108),m=this&&this.__extends||(c=function(B,z){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var ie in Y)Object.prototype.hasOwnProperty.call(Y,ie)&&(L[ie]=Y[ie])},c(B,z)},function(B,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function L(){this.constructor=B}c(B,z),B.prototype=z===null?Object.create(z):(L.prototype=z.prototype,new L)}),h=this&&this.__values||function(B){var z=typeof Symbol=="function"&&Symbol.iterator,L=z&&B[z],Y=0;if(L)return L.call(B);if(B&&typeof B.length=="number")return{next:function(){return B&&Y>=B.length&&(B=void 0),{value:B&&B[Y++],done:!B}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(l,"__esModule",{value:!0}),l.RelatedTablesExtension=void 0;var s=o(8140),a=o(624),r=o(7502),n=o(6366),t=o(2702),i=o(4599),u=o(233),f=o(6302),p=o(1447),y=o(8904),g=o(8483),b=o(5897),E=o(8572),x=o(7817),M=o(7403),S=o(362),O=o(8008),C=o(2071),T=o(1394),R=(function(B){function z(L){var Y=B.call(this,L)||this;return Y.extendedRelationDao=L.extendedRelationDao,Y}return m(z,B),z.prototype.getOrCreateExtension=function(){var L=this.getOrCreate(z.EXTENSION_NAME,"gpkgext_relations",void 0,z.EXTENSION_RELATED_TABLES_DEFINITION,a.Extension.READ_WRITE);return this.extendedRelationDao.createTable(),L},z.prototype.getOrCreateMappingTable=function(L){return this.getOrCreateExtension(),this.getOrCreate(z.EXTENSION_NAME,L,void 0,z.EXTENSION_RELATED_TABLES_DEFINITION,a.Extension.READ_WRITE)},z.prototype.setContents=function(L){var Y=this.geoPackage.contentsDao.queryForId(L.getTableName());return L.setContents(Y)},z.prototype.getUserDao=function(L){return p.UserCustomDao.readTable(this.geoPackage,L)},z.prototype.getMappingDao=function(L){var Y;return Y=L instanceof x.ExtendedRelation?L.mapping_table_name:L,new f.UserMappingDao(this.getUserDao(Y),this.geoPackage)},z.prototype.getRelationships=function(L){return this.extendedRelationDao.isTableExists()?L?this.geoPackage.extendedRelationDao.getBaseTableRelations(L):this.extendedRelationDao.queryForAll():[]},z.prototype.hasRelations=function(L,Y,ie){var $=[];return this.extendedRelationDao.isTableExists()&&($=this.extendedRelationDao.getRelations(L,Y,ie)),!!$.length},z.prototype.getRelatedRows=function(L,Y){for(var ie=this.getRelationships(L),$=0;$<ie.length;$++){var Q=ie[$],ce=this.getMappingRowsForBase(Q.mapping_table_name,Y);Q.mappingRows=ce;var be=void 0;switch(Q.relation_name){case g.RelationType.MEDIA.name:be=r.MediaDao.readTable(this.geoPackage,Q.related_table_name);break;case g.RelationType.ATTRIBUTES.name:be=O.AttributesDao.readTable(this.geoPackage,Q.related_table_name);break;case g.RelationType.FEATURES.name:be=C.FeatureDao.readTable(this.geoPackage,Q.related_table_name);break;case g.RelationType.TILES.name:be=T.TileDao.readTable(this.geoPackage,Q.related_table_name);break;case g.RelationType.SIMPLE_ATTRIBUTES.name:be=t.SimpleAttributesDao.readTable(this.geoPackage,Q.related_table_name);break;default:throw new Error("Relationship Unknown")}for(var Ae=0;Ae<ce.length;Ae++){var we=ce[Ae];we.row=be.queryForId(we.relatedId)}}return ie},z.prototype.getRelationshipBuilder=function(){return z.RelationshipBuilder()},z.prototype.addRelationship=function(L){var Y,ie=this.extendedRelationDao.createObject();if(L instanceof x.ExtendedRelation?(ie=L,Y=u.UserMappingTable.create(ie.mapping_table_name)):(Y=L.userMappingTable,L.relationType&&(L.relationName=L.relationType.name),L.relationAuthor&&(L.relationName=this.buildRelationName(L.relationAuthor,L.relationName)),L.mappingTableName&&(Y=u.UserMappingTable.create(L.mappingTableName)),L.relatedTable&&(this.createRelatedTable(L.relatedTable),L.relatedTableName=L.relatedTable.getTableName(),L.relationName=L.relatedTable.relation_name),ie.base_table_name=L.baseTableName,ie.base_primary_column=this.getPrimaryKeyColumnName(L.baseTableName),ie.related_table_name=L.relatedTableName,ie.related_primary_column=this.getPrimaryKeyColumnName(L.relatedTableName),ie.mapping_table_name=Y.getTableName(),ie.relation_name=L.relationName),this.validateRelationship(ie.base_table_name,ie.related_table_name,ie.relation_name)){this.createUserMappingTable(Y);var $=this.extendedRelationDao.queryByMappingTableName(ie.mapping_table_name);return $.length?$[0]:(this.extendedRelationDao.create(ie),ie)}},z.prototype.getPrimaryKeyColumnName=function(L){return new S.UserCustomTableReader(L).readTable(this.geoPackage.database).getPkColumn().getName()},z.prototype.addFeaturesRelationship=function(L){return L instanceof x.ExtendedRelation?L.relation_name=L.relation_name||g.RelationType.FEATURES.name:L.relationType=g.RelationType.FEATURES,this.addRelationship(L)},z.prototype.addTilesRelationship=function(L){return L instanceof x.ExtendedRelation?L.relation_name=L.relation_name||g.RelationType.TILES.name:L.relationType=g.RelationType.TILES,this.addRelationship(L)},z.prototype.addAttributesRelationship=function(L){return L instanceof x.ExtendedRelation?L.relation_name=L.relation_name||g.RelationType.ATTRIBUTES.name:L.relationType=g.RelationType.ATTRIBUTES,this.addRelationship(L)},z.prototype.addSimpleAttributesRelationship=function(L){return L instanceof x.ExtendedRelation?L.relation_name=L.relation_name||g.RelationType.SIMPLE_ATTRIBUTES.name:L.relationType=g.RelationType.SIMPLE_ATTRIBUTES,this.addRelationship(L)},z.prototype.addMediaRelationship=function(L){return L instanceof x.ExtendedRelation?L.relation_name=L.relation_name||g.RelationType.MEDIA.name:L.relationType=g.RelationType.MEDIA,this.addRelationship(L)},z.prototype.removeRelationship=function(L){var Y,ie,$,Q,ce,be,Ae,we,Xe=this;if(L instanceof x.ExtendedRelation?(ce=L.relation_name,be=L.related_table_name,Ae=L.base_table_name,we=L.mapping_table_name):(ce=L.relationName,be=L.relatedTableName,Ae=L.baseTableName,we=L.userMappingTable,L.relationType&&(ce=L.relationType.name),L.relationAuthor&&(ce=this.buildRelationName(L.relationAuthor,ce))),this.extendedRelationDao.isTableExists()){var Ve=new E.ColumnValues;Ve.addColumn(y.ExtendedRelationDao.COLUMN_BASE_TABLE_NAME,Ae),Ve.addColumn(y.ExtendedRelationDao.COLUMN_RELATED_TABLE_NAME,be),Ve.addColumn(y.ExtendedRelationDao.COLUMN_RELATION_NAME,ce),Ve.addColumn(y.ExtendedRelationDao.COLUMN_MAPPING_TABLE_NAME,we);var st=this.extendedRelationDao.queryForFieldValues(Ve),tt=[],he=[];try{for(var de=h(st),ze=de.next();!ze.done;ze=de.next()){var P=ze.value;tt.push(P.mapping_table_name),he.push(P)}}catch(W){Y={error:W}}finally{try{ze&&!ze.done&&(ie=de.return)&&ie.call(de)}finally{if(Y)throw Y.error}}tt.forEach((function(W){Xe.geoPackage.deleteTable(W)})),this.extensionsDao.deleteByExtensionAndTableName(z.EXTENSION_NAME,we);try{for(var A=h(he),D=A.next();!D.done;D=A.next())P=D.value,this.extendedRelationDao.delete(P)}catch(W){$={error:W}}finally{try{D&&!D.done&&(Q=A.return)&&Q.call(A)}finally{if($)throw $.error}}return tt.length}return 0},z.prototype.createUserMappingTable=function(L){var Y;return Y=L instanceof u.UserMappingTable?L:u.UserMappingTable.create(L),this.getOrCreateMappingTable(Y.getTableName()),!!this.geoPackage.isTable(Y.getTableName())||!!this.geoPackage.tableCreator.createUserTable(Y)},z.prototype.createRelatedTable=function(L){if(!this.geoPackage.isTable(L.getTableName())){this.geoPackage.tableCreator.createUserTable(L);var Y=new b.Contents;Y.table_name=L.getTableName(),Y.data_type=L.data_type,Y.identifier=L.getTableName(),this.geoPackage.contentsDao.create(Y);var ie=this.geoPackage.contentsDao.refresh(Y);L.setContents(ie)}return!0},z.prototype.validateRelationship=function(L,Y,ie){if(!this.geoPackage.isTable(L))return d.log("Base relationship table does not exist: "+L+", Relation: "+ie),!1;if(!this.geoPackage.isTable(Y))return d.log("Related relationship table does not exist: "+Y+", Relation: "+ie),!1;var $=g.RelationType.fromName(ie);return!$||!!this.geoPackage.isTableType($.dataType,Y)||(d.log("The related table must be a "+$.dataType+" table.  Related Table: "+Y+", Type: "+this.geoPackage.getTableType(Y)),!1)},z.prototype.getMappingsForBase=function(L,Y){for(var ie=this.getMappingDao(L),$=ie.queryByBaseId(Y),Q=[],ce=0;ce<$.length;ce++){var be=ie.getUserMappingRow($[ce]);Q.push(be.relatedId)}return Q},z.prototype.getMappingRowsForBase=function(L,Y){var ie=this.getMappingDao(L),$=[];return ie.queryByBaseId(Y).forEach((function(Q){$.push(ie.getUserMappingRow(Q))})),$},z.prototype.getMappingsForRelated=function(L,Y){for(var ie=this.getMappingDao(L),$=ie.queryByRelatedId(Y),Q=[],ce=0;ce<$.length;ce++){var be=ie.getUserMappingRow($[ce]);Q.push(be.baseId)}return Q},z.prototype.getMediaDao=function(L){var Y;L instanceof n.MediaTable?Y=L.getTableName():L instanceof x.ExtendedRelation?Y=L.related_table_name:typeof L=="string"&&(Y=L);var ie=new S.UserCustomTableReader(Y).readTable(this.geoPackage.database);return(Y=new n.MediaTable(ie.getTableName(),ie.getUserColumns().getColumns(),n.MediaTable.requiredColumns())).setContents(this.geoPackage.contentsDao.queryForId(ie.getTableName())),new r.MediaDao(this.geoPackage,Y)},z.prototype.getSimpleAttributesDao=function(L){var Y;if(L instanceof i.SimpleAttributesTable&&L.TABLE_TYPE==="simple_attributes")Y=L;else{L instanceof x.ExtendedRelation&&(Y=L.related_table_name);var ie=new S.UserCustomTableReader(Y).readTable(this.geoPackage.database);(Y=new i.SimpleAttributesTable(ie.getTableName(),ie.getUserColumns().getColumns(),i.SimpleAttributesTable.requiredColumns())).setContents(this.geoPackage.contentsDao.queryForId(Y.getTableName()))}return new t.SimpleAttributesDao(this.geoPackage,Y)},z.prototype.buildRelationName=function(L,Y){return"x-"+L+"_"+Y},z.prototype.removeExtension=function(){this.extendedRelationDao.isTableExists()&&(this.extendedRelationDao.queryForAll().forEach(function(L){return this.geoPackage.deleteTable(L.mapping_table_name)}.bind(this)),this.geoPackage.deleteTable(y.ExtendedRelationDao.TABLE_NAME)),this.extensionsDao.isTableExists()&&this.extensionsDao.deleteByExtension(z.EXTENSION_NAME)},z.prototype.has=function(L){return L?this.hasExtension(z.EXTENSION_NAME,y.ExtendedRelationDao.TABLE_NAME,null)&&this.hasExtension(z.EXTENSION_NAME,L,null)||this.hasExtension(z.EXTENSION_RELATED_TABLES_NAME_NO_AUTHOR,y.ExtendedRelationDao.TABLE_NAME,null)&&this.hasExtension(z.EXTENSION_RELATED_TABLES_NAME_NO_AUTHOR,L,null):this.hasExtension(z.EXTENSION_NAME,y.ExtendedRelationDao.TABLE_NAME,null)||this.hasExtension(z.EXTENSION_RELATED_TABLES_NAME_NO_AUTHOR,y.ExtendedRelationDao.TABLE_NAME,null)},z.RelationshipBuilder=function(){return M.OptionBuilder.build(["baseTableName","relatedTableName","userMappingTable","mappingTableName","relationName","relationAuthor","relationType","relatedTable"])},z.prototype.removeRelationships=function(L){var Y=this;try{this.extendedRelationDao.isTableExists()&&this.extendedRelationDao.getTableRelations(L).forEach((function(ie){Y.removeRelationship(ie)}))}catch{throw new Error("Failed to remove relationships for table: "+L)}},z.prototype.removeRelationshipsWithMappingTable=function(L){var Y=this;try{this.extendedRelationDao.isTableExists()&&this.extendedRelationDao.queryByMappingTableName(L).forEach((function(ie){Y.removeRelationship(ie)}))}catch{throw new Error("Failed to remove relationships for mapping table: "+L)}},z.EXTENSION_NAME="gpkg_related_tables",z.EXTENSION_RELATED_TABLES_AUTHOR="gpkg",z.EXTENSION_RELATED_TABLES_NAME_NO_AUTHOR="related_tables",z.EXTENSION_RELATED_TABLES_DEFINITION="TBD",z})(s.BaseExtension);l.RelatedTablesExtension=R},7502:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.MediaDao=void 0;var m=o(4668),h=o(6119),s=o(362),a=(function(r){function n(t,i){return r.call(this,t,i)||this}return d(n,r),n.prototype.newRow=function(t,i){return new h.MediaRow(this.table,t,i)},Object.defineProperty(n.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),n.readTable=function(t,i){return new n(t,new s.UserCustomTableReader(i).readTable(t.database))},n})(m.UserDao);l.MediaDao=a},6119:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.MediaRow=void 0;var m=o(2224),h=o(9325),s=(function(a){function r(n,t,i){var u=a.call(this,n,t,i)||this;return u.mediaTable=n,u}return d(r,a),Object.defineProperty(r.prototype,"dataColumn",{get:function(){return this.mediaTable.dataColumn},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"data",{get:function(){return this.getValueWithColumnName(this.dataColumn.name)},set:function(n){this.setValueWithColumnName(this.dataColumn.name,n)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataImage",{get:function(){return h.ImageUtils.getImage(this.data,this.contentType)},enumerable:!1,configurable:!0}),r.prototype.getScaledDataImage=function(n){return h.ImageUtils.getScaledImage(this.data,n)},Object.defineProperty(r.prototype,"contentTypeColumn",{get:function(){return this.mediaTable.contentTypeColumn},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"contentType",{get:function(){return this.getValueWithColumnName(this.contentTypeColumn.name)},set:function(n){this.setValueWithColumnName(this.contentTypeColumn.name,n)},enumerable:!1,configurable:!0}),r})(m.UserRow);l.MediaRow=s},6366:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.MediaTable=void 0;var m=o(8840),h=o(8483),s=o(5865),a=o(7319),r=(function(n){function t(i,u,f){var p=n.call(this,i,t.RELATION_TYPE.name,t.RELATION_TYPE.dataType,u,f)||this;return p.TABLE_TYPE="media",p}return d(t,n),Object.defineProperty(t.prototype,"tableType",{get:function(){return this.TABLE_TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataColumn",{get:function(){return this.getColumnWithColumnName(t.COLUMN_DATA)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentTypeColumn",{get:function(){return this.getColumnWithColumnName(t.COLUMN_CONTENT_TYPE)},enumerable:!1,configurable:!0}),t.create=function(i,u){var f=t.createRequiredColumns();return u&&(f=f.concat(u)),new t(i,f,t.requiredColumns())},t.requiredColumns=function(i){i===void 0&&(i=t.COLUMN_ID);var u=[];return u.push(i),u.push(t.COLUMN_DATA),u.push(t.COLUMN_CONTENT_TYPE),u},t.numRequiredColumns=function(){return t.requiredColumns().length},t.createRequiredColumns=function(i,u){return i===void 0&&(i=0),u===void 0&&(u=t.COLUMN_ID),[t.createIdColumn(i++,u),t.createDataColumn(i++),t.createContentTypeColumn(i++)]},t.createIdColumn=function(i,u){return s.UserColumn.createPrimaryKeyColumn(i,u)},t.createDataColumn=function(i){return s.UserColumn.createColumn(i,t.COLUMN_DATA,a.GeoPackageDataType.BLOB,!0)},t.createContentTypeColumn=function(i){return s.UserColumn.createColumn(i,t.COLUMN_CONTENT_TYPE,a.GeoPackageDataType.TEXT,!0)},t.RELATION_TYPE=h.RelationType.MEDIA,t.COLUMN_ID="id",t.COLUMN_DATA="data",t.COLUMN_CONTENT_TYPE="content_type",t})(m.UserRelatedTable);l.MediaTable=r},8483:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RelationType=void 0;var c=o(9971),d=(function(){function m(h,s){this.name=h,this.dataType=s}return m.fromName=function(h){return m[h.toUpperCase()]},m.FEATURES=new m("features",c.ContentsDataType.FEATURES),m.SIMPLE_ATTRIBUTES=new m("simple_attributes",c.ContentsDataType.ATTRIBUTES),m.MEDIA=new m("media",c.ContentsDataType.ATTRIBUTES),m.ATTRIBUTES=new m("attributes",c.ContentsDataType.ATTRIBUTES),m.TILES=new m("tiles",c.ContentsDataType.TILES),m})();l.RelationType=d},2702:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.SimpleAttributesDao=void 0;var m=o(4668),h=o(7374),s=(function(a){function r(n,t){return a.call(this,n,t)||this}return d(r,a),r.prototype.newRow=function(n,t){return new h.SimpleAttributesRow(this.table,n,t)},Object.defineProperty(r.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),r.prototype.getRows=function(n){for(var t=[],i=0;i<n.length;i++){var u=this.queryForId(n[i]);u&&t.push(u)}return t},r.readTable=function(n,t){return n.relatedTablesExtension.getSimpleAttributesDao(t)},r})(m.UserDao);l.SimpleAttributesDao=s},7374:function(_,l,o){var c,d=this&&this.__extends||(c=function(h,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])},c(h,s)},function(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=h}c(h,s),h.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(l,"__esModule",{value:!0}),l.SimpleAttributesRow=void 0;var m=(function(h){function s(a,r,n){var t=h.call(this,a,r,n)||this;return t.simpleAttributesTable=a,t}return d(s,h),s})(o(2224).UserRow);l.SimpleAttributesRow=m},4599:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.SimpleAttributesTable=void 0;var m=o(8840),h=o(8483),s=o(5865),a=o(7319),r=(function(n){function t(i,u,f){var p=n.call(this,i,t.RELATION_TYPE.name,t.RELATION_TYPE.dataType,u,f)||this;return p.TABLE_TYPE="simple_attributes",p.validateColumns(),p}return d(t,n),t.prototype.validateColumns=function(){var i=this.columns;if(i.getColumns().length<2)throw new Error("Simple Attributes Tables require at least one non id column");for(var u=0;u<i.getColumns().length;u++){var f=i.getColumns()[u];if(!t.isSimple(f))throw new Error("Simple Attributes Tables only support simple data types. Column: "+f.name+", Non Simple Data Type: "+f.dataType)}return!0},t.create=function(i,u){var f=t.createRequiredColumns(0);return u&&(f=f.concat(u)),new t(i,f,t.requiredColumns())},t.requiredColumns=function(i){i===void 0&&(i=t.COLUMN_ID);var u=[];return u.push(i),u},t.numRequiredColumns=function(){return t.requiredColumns().length},t.createRequiredColumns=function(i,u){return i===void 0&&(i=0),u===void 0&&(u="id"),[t.createIdColumn(i++,u||t.COLUMN_ID)]},t.createIdColumn=function(i,u){return s.UserColumn.createPrimaryKeyColumn(i,u)},t.isSimple=function(i){return i.notNull&&t.isSimpleDataType(i.dataType)},t.isSimpleDataType=function(i){return i!==a.GeoPackageDataType.BLOB},t.RELATION_TYPE=h.RelationType.SIMPLE_ATTRIBUTES,t.COLUMN_ID="id",t})(m.UserRelatedTable);l.SimpleAttributesTable=r},6302:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.UserMappingDao=void 0;var m=o(1447),h=o(233),s=o(8029),a=o(8572),r=(function(n){function t(i,u,f){return n.call(this,u,f||t.createMappingTable(i))||this}return d(t,n),t.createMappingTable=function(i){return new h.UserMappingTable(i.table.getTableName(),i.table.getUserColumns().getColumns(),h.UserMappingTable.requiredColumns())},Object.defineProperty(t.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),t.prototype.newRow=function(i,u){return new s.UserMappingRow(this.table,i,u)},t.prototype.getUserMappingRow=function(i){return this.getRow(i)},t.prototype.queryByBaseId=function(i){return this.queryForAllEq(h.UserMappingTable.COLUMN_BASE_ID,i instanceof s.UserMappingRow?i.baseId:i)},t.prototype.queryByRelatedId=function(i){return this.queryForAllEq(h.UserMappingTable.COLUMN_RELATED_ID,i instanceof s.UserMappingRow?i.relatedId:i)},t.prototype.queryByIds=function(i,u){var f=new a.ColumnValues;return f.addColumn(h.UserMappingTable.COLUMN_BASE_ID,i instanceof s.UserMappingRow?i.baseId:i),u!==void 0&&f.addColumn(h.UserMappingTable.COLUMN_RELATED_ID,u instanceof s.UserMappingRow?u.relatedId:u),this.queryForFieldValues(f)},t.prototype.uniqueRelatedIds=function(){var i="SELECT DISTINCT ";return i+=h.UserMappingTable.COLUMN_RELATED_ID,i+=" FROM ",i+="'"+this.gpkgTableName+"'",this.connection.all(i)},t.prototype.countByIds=function(i,u){var f=new a.ColumnValues;return f.addColumn(h.UserMappingTable.COLUMN_BASE_ID,i instanceof s.UserMappingRow?i.baseId:i),u!==void 0&&f.addColumn(h.UserMappingTable.COLUMN_RELATED_ID,u instanceof s.UserMappingRow?u.relatedId:u),this.count(f)},t.prototype.deleteByBaseId=function(i){var u="";u+=this.buildWhereWithFieldAndValue(h.UserMappingTable.COLUMN_BASE_ID,i instanceof s.UserMappingRow?i.baseId:i);var f=this.buildWhereArgs([i instanceof s.UserMappingRow?i.baseId:i]);return this.deleteWhere(u,f)},t.prototype.deleteByRelatedId=function(i){var u="";u+=this.buildWhereWithFieldAndValue(h.UserMappingTable.COLUMN_RELATED_ID,i instanceof s.UserMappingRow?i.relatedId:i);var f=this.buildWhereArgs([i instanceof s.UserMappingRow?i.relatedId:i]);return this.deleteWhere(u,f)},t.prototype.deleteByIds=function(i,u){var f="",p=[i instanceof s.UserMappingRow?i.baseId:i];f+=this.buildWhereWithFieldAndValue(h.UserMappingTable.COLUMN_BASE_ID,i instanceof s.UserMappingRow?i.baseId:i),u!==void 0&&(f+=" and ",f+=this.buildWhereWithFieldAndValue(h.UserMappingTable.COLUMN_RELATED_ID,u instanceof s.UserMappingRow?u.relatedId:u),p.push(u instanceof s.UserMappingRow?u.relatedId:u));var y=this.buildWhereArgs(p);return this.deleteWhere(f,y)},t})(m.UserCustomDao);l.UserMappingDao=r},8029:function(_,l,o){var c,d=this&&this.__extends||(c=function(h,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])},c(h,s)},function(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=h}c(h,s),h.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(l,"__esModule",{value:!0}),l.UserMappingRow=void 0;var m=(function(h){function s(a,r,n){var t=h.call(this,a,r,n)||this;return t.table=a,t}return d(s,h),Object.defineProperty(s.prototype,"baseIdColumn",{get:function(){return this.table.baseIdColumn},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"baseId",{get:function(){return this.getValueWithColumnName(this.baseIdColumn.name)},set:function(a){this.setValueWithColumnName(this.baseIdColumn.name,a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"relatedIdColumn",{get:function(){return this.table.relatedIdColumn},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"relatedId",{get:function(){return this.getValueWithColumnName(this.relatedIdColumn.name)},set:function(a){this.setValueWithColumnName(this.relatedIdColumn.name,a)},enumerable:!1,configurable:!0}),s})(o(2224).UserRow);l.UserMappingRow=m},233:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.UserMappingTable=void 0;var m=o(5865),h=o(7319),s=(function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return d(r,a),Object.defineProperty(r.prototype,"tableType",{get:function(){return"userMappingTable"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"baseIdColumn",{get:function(){return this.getColumnWithColumnName(r.COLUMN_BASE_ID)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"relatedIdColumn",{get:function(){return this.getColumnWithColumnName(r.COLUMN_RELATED_ID)},enumerable:!1,configurable:!0}),r.create=function(n,t){var i=r.createRequiredColumns(0);return t&&(i=i.concat(t)),new r(n,i,r.requiredColumns())},r.numRequiredColumns=function(){return r.createRequiredColumns(0).length},r.createRequiredColumns=function(n){return n===void 0&&(n=0),[r.createBaseIdColumn(n++),r.createRelatedIdColumn(n)]},r.createBaseIdColumn=function(n){return m.UserColumn.createColumn(n,r.COLUMN_BASE_ID,h.GeoPackageDataType.INTEGER,!0)},r.createRelatedIdColumn=function(n){return m.UserColumn.createColumn(n,r.COLUMN_RELATED_ID,h.GeoPackageDataType.INTEGER,!0)},r.requiredColumns=function(){return[r.COLUMN_BASE_ID,r.COLUMN_RELATED_ID]},r.COLUMN_BASE_ID="base_id",r.COLUMN_RELATED_ID="related_id",r})(o(2378).UserCustomTable);l.UserMappingTable=s},8840:function(_,l,o){var c,d=this&&this.__extends||(c=function(h,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])},c(h,s)},function(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=h}c(h,s),h.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(l,"__esModule",{value:!0}),l.UserRelatedTable=void 0;var m=(function(h){function s(a,r,n,t,i){var u=h.call(this,a,t,i)||this;return u.relation_name=r,u.data_type=n,u}return d(s,h),Object.defineProperty(s.prototype,"tableType",{get:function(){return"userRelatedTable"},enumerable:!1,configurable:!0}),s.prototype.setContents=function(a){if(!a.data_type||a.data_type!==this.data_type)throw new Error("The contents of this related table must have a data type of "+this.data_type);return this.contents=a,!0},s})(o(2378).UserCustomTable);l.UserRelatedTable=m},5859:function(_,l,o){var c,d=o(5108),m=this&&this.__extends||(c=function(i,u){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(f[y]=p[y])},c(i,u)},function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function f(){this.constructor=i}c(i,u),i.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(l,"__esModule",{value:!0}),l.RTreeIndex=void 0;var h=o(8140),s=o(624),a=o(735),r=o(1895),n=o(857),t=(function(i){function u(f,p){var y=i.call(this,f)||this;return y.extensionName=s.Extension.buildExtensionName(a.RTreeIndexDao.EXTENSION_RTREE_INDEX_AUTHOR,a.RTreeIndexDao.EXTENSION_RTREE_INDEX_NAME_NO_AUTHOR),y.extensionDefinition=a.RTreeIndexDao.EXTENSION_RTREE_INDEX_DEFINITION,p!=null&&(y.tableName=p.table_name,y.primaryKeyColumn=p.idColumns[0],y.columnName=p.getGeometryColumnName()),y.rtreeIndexDao=new a.RTreeIndexDao(f,p),y.extensionExists=y.hasExtension(y.extensionName,y.tableName,y.columnName),y.createAllFunctions(),y}return m(u,i),u.prototype.getRTreeIndexExtension=function(){return this.getExtension(this.extensionName,this.tableName,this.columnName)},u.prototype.getOrCreateExtension=function(){return this.getOrCreate(this.extensionName,this.tableName,this.columnName,this.extensionDefinition,s.Extension.WRITE_ONLY)},u.prototype.createWithParameters=function(f,p,y){return this.hasExtension(this.extensionName,f,p)||(this.getOrCreate(this.extensionName,f,p,a.RTreeIndexDao.EXTENSION_RTREE_INDEX_DEFINITION,s.Extension.WRITE_ONLY),this.createRTreeIndex(f,p),this.loadRTreeIndex(f,p,y),this.createAllTriggers(f,p,y)),this.getRTreeIndexExtension()},u.prototype.create=function(f){var p=f||function(){};if(this.extensionExists)return this.getRTreeIndexExtension();this.getOrCreate(this.extensionName,this.tableName,this.columnName,a.RTreeIndexDao.EXTENSION_RTREE_INDEX_DEFINITION,s.Extension.WRITE_ONLY),this.createAllFunctions(),this.createRTreeIndex(this.tableName,this.columnName),p({description:"Creating Feature Index",count:0,totalCount:this.connection.count(this.tableName),layer:this.tableName});try{this.loadRTreeIndex(this.tableName,this.columnName,this.primaryKeyColumn)}catch(y){d.log("ERROR CREATING RTREE INDEX",y)}return this.createAllTriggers(this.tableName,this.columnName,this.primaryKeyColumn),this.getRTreeIndexExtension()},u.prototype.createAllTriggers=function(f,p,y){var g='CREATE TRIGGER "rtree_'+f+"_"+p+'_insert" AFTER INSERT ON "'+f+'" WHEN (new.'+p+" NOT NULL AND NOT ST_IsEmpty(NEW."+p+')) BEGIN   INSERT OR REPLACE INTO "rtree_'+f+"_"+p+'" VALUES (    NEW.'+y+",    ST_MinX(NEW."+p+"), ST_MaxX(NEW."+p+"),     ST_MinY(NEW."+p+"), ST_MaxY(NEW."+p+")   ); END;",b='CREATE TRIGGER "rtree_'+f+"_"+p+'_update1" AFTER UPDATE OF '+p+' ON "'+f+'" WHEN OLD.'+y+" = NEW."+y+" AND      (NEW."+p+" NOTNULL AND NOT ST_IsEmpty(NEW."+p+')) BEGIN   INSERT OR REPLACE INTO "rtree_'+f+"_"+p+'" VALUES (    NEW.'+y+",    ST_MinX(NEW."+p+"), ST_MaxX(NEW."+p+"),     ST_MinY(NEW."+p+"), ST_MaxY(NEW."+p+")   ); END;",E='CREATE TRIGGER "rtree_'+f+"_"+p+'_update2" AFTER UPDATE OF '+p+' ON "'+f+'" WHEN OLD.'+y+" = NEW."+y+" AND        (NEW."+p+" ISNULL OR ST_IsEmpty(NEW."+p+')) BEGIN   DELETE FROM "rtree_'+f+"_"+p+'" WHERE id = OLD.'+y+"; END;",x='CREATE TRIGGER "rtree_'+f+"_"+p+'_update3" AFTER UPDATE OF '+p+' ON "'+f+'" WHEN OLD.'+y+" != NEW."+y+" AND        (NEW."+p+" NOTNULL AND NOT ST_IsEmpty(NEW."+p+')) BEGIN   DELETE FROM "rtree_'+f+"_"+p+'" WHERE id = OLD.'+y+';   INSERT OR REPLACE INTO "rtree_'+f+"_"+p+'" VALUES (    NEW.'+y+",     ST_MinX(NEW."+p+"), ST_MaxX(NEW."+p+"),     ST_MinY(NEW."+p+"), ST_MaxY(NEW."+p+")  ); END;",M='CREATE TRIGGER "rtree_'+f+"_"+p+'_update4" AFTER UPDATE ON "'+f+'"  WHEN OLD.'+y+" != NEW."+y+" AND        (NEW."+p+" ISNULL OR ST_IsEmpty(NEW."+p+')) BEGIN   DELETE FROM "rtree_'+f+"_"+p+'" WHERE id IN (OLD.'+y+", NEW."+y+"); END;",S='CREATE TRIGGER "rtree_'+f+"_"+p+'_delete" AFTER DELETE ON "'+f+'" WHEN old.'+p+' NOT NULL BEGIN  DELETE FROM "rtree_'+f+"_"+p+'" WHERE id = OLD.'+y+"; END;",O=0;return O+=this.connection.run(g).changes,O+=this.connection.run(b).changes,O+=this.connection.run(E).changes,O+=this.connection.run(x).changes,(O+=this.connection.run(M).changes)+this.connection.run(S).changes===6},u.prototype.loadRTreeIndex=function(f,p,y){return this.connection.run('INSERT OR REPLACE INTO "rtree_'+f+"_"+p+'" SELECT '+y+", st_minx("+p+"), st_maxx("+p+"), st_miny("+p+"), st_maxy("+p+') FROM "'+f+'"').changes===1},u.prototype.createRTreeIndex=function(f,p){return this.connection.run('CREATE VIRTUAL TABLE "rtree_'+f+"_"+p+'" USING rtree(id, minx, maxx, miny, maxy)').changes===1},u.prototype.createAllFunctions=function(){this.createMinXFunction(),this.createMaxXFunction(),this.createMinYFunction(),this.createMaxYFunction(),this.createIsEmptyFunction()},u.prototype.createMinXFunction=function(){this.connection.registerFunction("ST_MinX",(function(f){var p=new n.GeometryData(f);if(!p.geometry)return null;var y=p.envelope;return y||(y=r.EnvelopeBuilder.buildEnvelopeWithGeometry(p.geometry)),y.minX===1/0?null:y.minX}))},u.prototype.createMinYFunction=function(){this.connection.registerFunction("ST_MinY",(function(f){var p=new n.GeometryData(f);if(!p.geometry)return null;var y=p.envelope;return y||(y=r.EnvelopeBuilder.buildEnvelopeWithGeometry(p.geometry)),y.minY===1/0?null:y.minY}))},u.prototype.createMaxXFunction=function(){this.connection.registerFunction("ST_MaxX",(function(f){var p=new n.GeometryData(f);if(!p.geometry)return null;var y=p.envelope;return y||(y=r.EnvelopeBuilder.buildEnvelopeWithGeometry(p.geometry)),y.maxX===-1/0?null:y.maxX}))},u.prototype.createMaxYFunction=function(){this.connection.registerFunction("ST_MaxY",(function(f){var p=new n.GeometryData(f);if(!p.geometry)return null;var y=p.envelope;return y||(y=r.EnvelopeBuilder.buildEnvelopeWithGeometry(p.geometry)),y.maxY===-1/0?null:y.maxY}))},u.prototype.createIsEmptyFunction=function(){this.connection.registerFunction("ST_IsEmpty",(function(f){var p=new n.GeometryData(f);return p&&!p.empty&&p.geometry?0:1}))},u.prototype.has=function(f,p){return this.hasExtension(this.extensionName,f,p)},u.prototype.deleteTable=function(f){var p=this;try{this.extensionsDao.isTableExists()&&this.extensionsDao.queryByExtensionAndTableName(this.extensionName,f).forEach((function(y){p.deleteTableAndColumn(y.getTableName(),y.column_name)}))}catch{throw new Error("Failed to delete RTree Index extensions for table. GeoPackage: "+this.geoPackage.name+", Table: "+f)}},u.prototype.deleteTableAndColumn=function(f,p){if(this.has(f,p)){this.dropTableAndColumn(f,p);try{this.extensionsDao.deleteByExtensionAndTableNameAndColumnName(this.extensionName,f,p)}catch{throw new Error("Failed to delete RTree Index extension. GeoPackage: "+this.geoPackage.name+", Table: "+f+", Geometry Column: "+p)}}},u.prototype.deleteAll=function(){var f=this;try{this.extensionsDao.isTableExists()&&this.extensionsDao.queryByExtensionAndTableName(this.extensionName,this.tableName).forEach((function(p){f.deleteTableAndColumn(p.getTableName(),p.column_name)}))}catch{throw new Error("Failed to delete RTree Index extensions for table. GeoPackage: "+this.geoPackage.name+", Table: "+this.tableName)}},u.prototype.dropByFeatureTable=function(f){this.dropTableAndColumn(f.getTableName(),f.getGeometryColumnName())},u.prototype.dropTableAndColumn=function(f,p){this.dropAllTriggers(f,p),this.dropRTreeIndex(f,p)},u.prototype.dropRTreeIndexByFeatureTable=function(f){this.dropRTreeIndex(f.getTableName(),f.getGeometryColumnName())},u.prototype.dropRTreeIndex=function(f,p){try{this.geoPackage.connection.run('DROP TABLE "rtree_'+f+"_"+p+'"')}catch(y){if(!(y.getMessage().indexOf("no such module: rtree")>-1))throw y;this.geoPackage.connection.run('DROP TABLE IF EXISTS "rtree_'+f+"_"+p+'_node"'),this.geoPackage.connection.run('DROP TABLE IF EXISTS "rtree_'+f+"_"+p+'_parent"'),this.geoPackage.connection.run('DROP TABLE IF EXISTS "rtree_'+f+"_"+p+'_rowid"'),this.geoPackage.connection.run("PRAGMA writable_schema = ON"),this.geoPackage.connection.run('DELETE FROM sqlite_master WHERE type = "table" AND name = "rtree_'+f+"_"+p+'"'),this.geoPackage.connection.run("PRAGMA writable_schema = OFF")}},u.prototype.dropTriggersByFeatureTable=function(f){this.dropTriggers(f.getTableName(),f.getGeometryColumnName())},u.prototype.dropTriggers=function(f,p){var y=this.has(f,p);return y&&this.dropAllTriggers(f,p),y},u.prototype.dropAllTriggersByFeatureTable=function(f){this.dropAllTriggers(f.getTableName(),f.getGeometryColumnName())},u.prototype.dropAllTriggers=function(f,p){this.dropInsertTrigger(f,p),this.dropUpdate1Trigger(f,p),this.dropUpdate2Trigger(f,p),this.dropUpdate3Trigger(f,p),this.dropUpdate4Trigger(f,p),this.dropDeleteTrigger(f,p)},u.prototype.dropInsertTrigger=function(f,p){this.dropTrigger(f,p,u.TRIGGER_INSERT_NAME)},u.prototype.dropUpdate1Trigger=function(f,p){this.dropTrigger(f,p,u.TRIGGER_UPDATE1_NAME)},u.prototype.dropUpdate2Trigger=function(f,p){this.dropTrigger(f,p,u.TRIGGER_UPDATE2_NAME)},u.prototype.dropUpdate3Trigger=function(f,p){this.dropTrigger(f,p,u.TRIGGER_UPDATE3_NAME)},u.prototype.dropUpdate4Trigger=function(f,p){this.dropTrigger(f,p,u.TRIGGER_UPDATE4_NAME)},u.prototype.dropDeleteTrigger=function(f,p){this.dropTrigger(f,p,u.TRIGGER_DELETE_NAME)},u.prototype.dropTrigger=function(f,p,y){this.geoPackage.connection.run('DROP TRIGGER IF EXISTS "rtree_'+f+"_"+p+"_"+y+'"')},u.TRIGGER_INSERT_NAME="insert",u.TRIGGER_UPDATE1_NAME="update1",u.TRIGGER_UPDATE2_NAME="update2",u.TRIGGER_UPDATE3_NAME="update3",u.TRIGGER_UPDATE4_NAME="update4",u.TRIGGER_DELETE_NAME="delete",u})(h.BaseExtension);l.RTreeIndex=t},735:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.RTreeIndexDao=void 0;var m=o(4115),h=o(5859),s=o(8877),a=(function(r){function n(t,i){var u=r.call(this,t)||this;return u.gpkgTableName=n.TABLE_NAME,u.featureDao=i,u}return d(n,r),n.prototype.createObject=function(t){return new h.RTreeIndex(this.geoPackage,this.featureDao)},n.prototype._generateGeometryEnvelopeQuery=function(t){var i=this.featureDao.gpkgTableName,u="",f=t.minX<t.maxX;f?(u+=this.buildWhereWithFieldAndValue("minx",t.maxX,"<="),u+=" and ",u+=this.buildWhereWithFieldAndValue("maxx",t.minX,">=")):(u+="(",u+=this.buildWhereWithFieldAndValue("minx",t.maxX,"<="),u+=" or ",u+=this.buildWhereWithFieldAndValue("maxx",t.minX,">="),u+=" or ",u+=this.buildWhereWithFieldAndValue("minx",t.minX,">="),u+=" or ",u+=this.buildWhereWithFieldAndValue("maxx",t.maxX,"<="),u+=")"),u+=" and ",u+=this.buildWhereWithFieldAndValue("miny",t.maxY,"<="),u+=" and ",u+=this.buildWhereWithFieldAndValue("maxy",t.minY,">=");var p=[];return p.push(t.maxX,t.minX),f||p.push(t.minX,t.maxX),p.push(t.maxY,t.minY),{join:'inner join "'+i+'" on "'+i+'".'+this.featureDao.idColumns[0]+' = "'+this.gpkgTableName+'".id',where:u,whereArgs:p,tableNameArr:['"'+i+'".*']}},n.prototype.queryWithGeometryEnvelope=function(t){var i=this._generateGeometryEnvelopeQuery(t);return this.queryJoinWhereWithArgs(i.join,i.where,i.whereArgs,i.tableNameArr)},n.prototype.countWithGeometryEnvelope=function(t){var i=this._generateGeometryEnvelopeQuery(t);return this.connection.get(s.SqliteQueryBuilder.buildCount("'"+this.gpkgTableName+"'",i.where),i.whereArgs).count},n.TABLE_NAME="rtree",n.PREFIX="rtree_",n.COLUMN_TABLE_NAME=n.TABLE_NAME+".table_name",n.COLUMN_GEOM_ID=n.TABLE_NAME+".geom_id",n.COLUMN_MIN_X=n.TABLE_NAME+".minx",n.COLUMN_MAX_X=n.TABLE_NAME+".maxx",n.COLUMN_MIN_Y=n.TABLE_NAME+".miny",n.COLUMN_MAX_Y=n.TABLE_NAME+".maxy",n.COLUMN_MIN_Z=n.TABLE_NAME+".minz",n.COLUMN_MAX_Z=n.TABLE_NAME+".maxz",n.COLUMN_MIN_M=n.TABLE_NAME+".minm",n.COLUMN_MAX_M=n.TABLE_NAME+".maxm",n.EXTENSION_NAME="gpkg_rtree_index",n.EXTENSION_RTREE_INDEX_AUTHOR="gpkg",n.EXTENSION_RTREE_INDEX_NAME_NO_AUTHOR="rtree_index",n.EXTENSION_RTREE_INDEX_DEFINITION="http://www.geopackage.org/spec/#extension_rtree",n})(m.Dao);l.RTreeIndexDao=a},7523:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.TileScalingExtension=void 0;var m=o(8140),h=o(624),s=o(7960),a=(function(r){function n(t,i){var u=r.call(this,t)||this;return u.tableName=i,u.tileScalingDao=t.tileScalingDao,u}return d(n,r),n.prototype.getOrCreateExtension=function(){var t=this.getOrCreate(n.EXTENSION_NAME,this.tableName,null,n.EXTENSION_DEFINITION,h.Extension.READ_WRITE);return this.tileScalingDao.createTable(),t},n.prototype.createOrUpdate=function(t){return t.table_name=this.tableName,this.tileScalingDao.createOrUpdate(t)},Object.defineProperty(n.prototype,"dao",{get:function(){return this.tileScalingDao},enumerable:!1,configurable:!0}),n.prototype.has=function(){return this.hasExtension(n.EXTENSION_NAME,this.tableName,null)&&this.tileScalingDao.isTableExists()},n.prototype.removeExtension=function(){this.tileScalingDao.isTableExists()&&this.geoPackage.deleteTable(s.TileScalingDao.TABLE_NAME),this.extensionsDao.isTableExists()&&this.extensionsDao.deleteByExtension(n.EXTENSION_NAME)},n.EXTENSION_NAME="nga_tile_scaling",n.EXTENSION_AUTHOR="nga",n.EXTENSION_NAME_NO_AUTHOR="tile_scaling",n.EXTENSION_DEFINITION="http://ngageoint.github.io/GeoPackage/docs/extensions/tile-scaling.html",n})(m.BaseExtension);l.TileScalingExtension=a},4301:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TileScaling=void 0;var c=o(2777),d=(function(){function m(){}return m.prototype.isZoomIn=function(){return(this.zoom_in==null||this.zoom_in>0)&&this.scaling_type!=null&&this.scaling_type!=c.TileScalingType.OUT},m.prototype.isZoomOut=function(){return(this.zoom_out==null||this.zoom_out>0)&&this.scaling_type!=null&&this.scaling_type!=c.TileScalingType.IN},m})();l.TileScaling=d},7960:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.TileScalingDao=void 0;var m=o(4115),h=o(4301),s=(function(a){function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.gpkgTableName=r.TABLE_NAME,n.idColumns=[r.COLUMN_TABLE_NAME],n}return d(r,a),r.prototype.createObject=function(n){var t=new h.TileScaling;return n&&(t.table_name=n.table_name,t.scaling_type=n.scaling_type,t.zoom_in=n.zoom_in,t.zoom_out=n.zoom_out),t},r.prototype.createTable=function(){return this.geoPackage.getTableCreator().createTileScaling()},r.prototype.queryForTableName=function(n){var t=this.queryForAll(this.buildWhereWithFieldAndValue(r.COLUMN_TABLE_NAME,n),this.buildWhereArgs(n));return t.length>0?this.createObject(t[0]):null},r.prototype.deleteByTableName=function(n){return this.deleteWhere(this.buildWhereWithFieldAndValue(r.COLUMN_TABLE_NAME,n),this.buildWhereArgs(n))},r.TABLE_NAME="nga_tile_scaling",r.COLUMN_TABLE_NAME="table_name",r.COLUMN_SCALING_TYPE="scaling_type",r.COLUMN_ZOOM_IN="zoom_in",r.COLUMN_ZOOM_OUT="zoom_out",r})(m.Dao);l.TileScalingDao=s},2777:(_,l)=>{var o;Object.defineProperty(l,"__esModule",{value:!0}),l.TileScalingType=void 0,(o=l.TileScalingType||(l.TileScalingType={})).IN="in",o.OUT="out",o.IN_OUT="in_out",o.OUT_IN="out_in",o.CLOSEST_IN_OUT="closest_in_out",o.CLOSEST_OUT_IN="closest_out_in"},8116:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.SchemaExtension=void 0;var m=o(8140),h=o(624),s=o(4941),a=o(7175),r=(function(n){function t(i){return n.call(this,i)||this}return d(t,n),t.prototype.getOrCreateExtension=function(){var i=[];return i.push(this.getOrCreate(t.EXTENSION_NAME,s.DataColumnsDao.TABLE_NAME,null,t.EXTENSION_SCHEMA_DEFINITION,h.Extension.READ_WRITE)),i.push(this.getOrCreate(t.EXTENSION_NAME,a.DataColumnConstraintsDao.TABLE_NAME,null,t.EXTENSION_SCHEMA_DEFINITION,h.Extension.READ_WRITE)),i},t.prototype.has=function(){return this.hasExtensions(t.EXTENSION_NAME)},t.prototype.removeExtension=function(){this.geoPackage.isTable(s.DataColumnsDao.TABLE_NAME)&&this.geoPackage.dropTable(s.DataColumnsDao.TABLE_NAME),this.geoPackage.isTable(a.DataColumnConstraintsDao.TABLE_NAME)&&this.geoPackage.dropTable(a.DataColumnConstraintsDao.TABLE_NAME),this.extensionsDao.isTableExists()&&this.extensionsDao.deleteByExtension(t.EXTENSION_NAME)},t.EXTENSION_SCHEMA_AUTHOR="gpkg",t.EXTENSION_SCHEMA_NAME_NO_AUTHOR="schema",t.EXTENSION_NAME=t.EXTENSION_SCHEMA_AUTHOR+"_"+t.EXTENSION_SCHEMA_NAME_NO_AUTHOR,t.EXTENSION_SCHEMA_DEFINITION="http://www.geopackage.org/spec/#extension_schema",t})(m.BaseExtension);l.SchemaExtension=r},612:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureStyle=void 0;var o=(function(){function c(d,m){this.styleRow=d,this.iconRow=m}return Object.defineProperty(c.prototype,"style",{get:function(){return this.styleRow},set:function(d){this.styleRow=d},enumerable:!1,configurable:!0}),c.prototype.hasStyle=function(){return!!this.styleRow},Object.defineProperty(c.prototype,"icon",{get:function(){return this.iconRow},set:function(d){this.iconRow=d},enumerable:!1,configurable:!0}),c.prototype.hasIcon=function(){return!!this.iconRow},c.prototype.useIcon=function(){return this.hasIcon()&&(!this.iconRow.isTableIcon()||!this.hasStyle()||this.styleRow.isTableStyle())},c})();l.FeatureStyle=o},2752:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureStyles=void 0,l.FeatureStyles=function(o,c){o===void 0&&(o=null),c===void 0&&(c=null),this.styles=o,this.icons=c}},6536:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureTableStyles=void 0;var c=o(2752),d=o(612),m=o(7924),h=o(4725),s=o(8412),a=o(9211),r=(function(){function n(t,i){this.geoPackage=t,i instanceof s.FeatureTable?this.tableName=i.getTableName():this.tableName=i,this.featureStyleExtension=t.featureStyleExtension,this.cachedTableFeatureStyles=new c.FeatureStyles}return n.prototype.getFeatureStyleExtension=function(){return this.featureStyleExtension},n.prototype.getTableName=function(){return this.tableName},n.prototype.has=function(){return this.featureStyleExtension.has(this.tableName)},n.prototype.createRelationships=function(){return this.featureStyleExtension.createRelationships(this.tableName)},n.prototype.hasRelationship=function(){return this.featureStyleExtension.hasRelationship(this.tableName)},n.prototype.createStyleRelationship=function(){return this.featureStyleExtension.createStyleRelationship(this.tableName)},n.prototype.hasStyleRelationship=function(){return this.featureStyleExtension.hasStyleRelationship(this.tableName)},n.prototype.createTableStyleRelationship=function(){return this.featureStyleExtension.createTableStyleRelationship(this.tableName)},n.prototype.hasTableStyleRelationship=function(){return this.featureStyleExtension.hasTableStyleRelationship(this.tableName)},n.prototype.createIconRelationship=function(){return this.featureStyleExtension.createIconRelationship(this.tableName)},n.prototype.hasIconRelationship=function(){return this.featureStyleExtension.hasIconRelationship(this.tableName)},n.prototype.createTableIconRelationship=function(){return this.featureStyleExtension.createTableIconRelationship(this.tableName)},n.prototype.hasTableIconRelationship=function(){return this.featureStyleExtension.hasTableIconRelationship(this.tableName)},n.prototype.deleteRelationships=function(){return this.featureStyleExtension.deleteRelationships(this.tableName)},n.prototype.deleteStyleRelationship=function(){return this.featureStyleExtension.deleteStyleRelationship(this.tableName)},n.prototype.deleteTableStyleRelationship=function(){return this.featureStyleExtension.deleteTableStyleRelationship(this.tableName)},n.prototype.deleteIconRelationship=function(){return this.featureStyleExtension.deleteIconRelationship(this.tableName)},n.prototype.deleteTableIconRelationship=function(){return this.featureStyleExtension.deleteTableIconRelationship(this.tableName)},n.prototype.getStyleMappingDao=function(){return this.featureStyleExtension.getStyleMappingDao(this.tableName)},n.prototype.getTableStyleMappingDao=function(){return this.featureStyleExtension.getTableStyleMappingDao(this.tableName)},n.prototype.getIconMappingDao=function(){return this.featureStyleExtension.getIconMappingDao(this.tableName)},n.prototype.getTableIconMappingDao=function(){return this.featureStyleExtension.getTableIconMappingDao(this.tableName)},n.prototype.getStyleDao=function(){return this.featureStyleExtension.getStyleDao()},n.prototype.getIconDao=function(){return this.featureStyleExtension.getIconDao()},n.prototype.getTableFeatureStyles=function(){return this.featureStyleExtension.getTableFeatureStyles(this.tableName)},n.prototype.getTableStyles=function(){return this.featureStyleExtension.getTableStyles(this.tableName)},n.prototype.getCachedTableStyles=function(){var t=this.cachedTableFeatureStyles.styles;return t===null&&((t=this.getTableStyles())===null&&(t=new m.Styles(!0)),this.cachedTableFeatureStyles.styles=t),t.isEmpty()&&(t=null),t},n.prototype.getTableStyle=function(t){return this.featureStyleExtension.getTableStyle(this.tableName,t)},n.prototype.getTableStyleDefault=function(){return this.featureStyleExtension.getTableStyleDefault(this.tableName)},n.prototype.getTableIcons=function(){return this.featureStyleExtension.getTableIcons(this.tableName)},n.prototype.getCachedTableIcons=function(){var t=this.cachedTableFeatureStyles.icons;return t===null&&((t=this.getTableIcons())===null&&(t=new h.Icons(!0)),this.cachedTableFeatureStyles.icons=t),t.isEmpty()&&(t=null),t},n.prototype.getTableIcon=function(t){return this.featureStyleExtension.getTableIcon(this.tableName,t)},n.prototype.getTableIconDefault=function(){return this.featureStyleExtension.getTableIconDefault(this.tableName)},n.prototype.getFeatureStylesForFeatureRow=function(t){return this.featureStyleExtension.getFeatureStylesForFeatureRow(t)},n.prototype.getFeatureStyles=function(t){return this.featureStyleExtension.getFeatureStyles(this.tableName,t)},n.prototype.getFeatureStyleForFeatureRow=function(t){return this.getFeatureStyleForFeatureRowAndGeometryType(t,a.GeometryType.fromName(t.geometryType.toUpperCase()))},n.prototype.getFeatureStyleForFeatureRowAndGeometryType=function(t,i){return this.getFeatureStyle(t.id,i)},n.prototype.getFeatureStyleDefaultForFeatureRow=function(t){return this.getFeatureStyle(t.id,null)},n.prototype.getFeatureStyle=function(t,i){var u=null,f=this.getStyle(t,i),p=this.getIcon(t,i);return f==null&&p==null||(u=new d.FeatureStyle(f,p)),u},n.prototype.getFeatureStyleDefault=function(t){return this.getFeatureStyle(t,null)},n.prototype.getStylesForFeatureRow=function(t){return this.featureStyleExtension.getStylesForFeatureRow(t)},n.prototype.getStylesForFeatureId=function(t){return this.featureStyleExtension.getStylesForFeatureId(this.tableName,t)},n.prototype.getStyleForFeatureRow=function(t){return this.getStyleForFeatureRowAndGeometryType(t,a.GeometryType.fromName(t.geometryType.toUpperCase()))},n.prototype.getStyleForFeatureRowAndGeometryType=function(t,i){return this.getStyle(t.id,i)},n.prototype.getStyleDefaultForFeatureRow=function(t){return this.getStyle(t.id,null)},n.prototype.getStyle=function(t,i){var u=this.featureStyleExtension.getStyle(this.tableName,t,i,!1);if(u===null){var f=this.getCachedTableStyles();f!==null&&(u=f.getStyle(i))}return u},n.prototype.getStyleDefault=function(t){return this.getStyle(t,null)},n.prototype.getIconsForFeatureRow=function(t){return this.featureStyleExtension.getIconsForFeatureRow(t)},n.prototype.getIconsForFeatureId=function(t){return this.featureStyleExtension.getIconsForFeatureId(this.tableName,t)},n.prototype.getIconForFeatureRow=function(t){return this.getIconForFeatureRowAndGeometryType(t,a.GeometryType.fromName(t.geometryType.toUpperCase()))},n.prototype.getIconForFeatureRowAndGeometryType=function(t,i){return this.getIcon(t.id,i)},n.prototype.getIconDefaultForFeatureRow=function(t){return this.getIcon(t.id,null)},n.prototype.getIcon=function(t,i){var u=this.featureStyleExtension.getIcon(this.tableName,t,i,!1);if(u===null){var f=this.getCachedTableIcons();f!==null&&(u=f.getIcon(i))}return u},n.prototype.getIconDefault=function(t){return this.getIcon(t,null)},n.prototype.setTableFeatureStyles=function(t){var i=this.featureStyleExtension.setTableFeatureStyles(this.tableName,t);return this.clearCachedTableFeatureStyles(),i},n.prototype.setTableStyles=function(t){var i=this.featureStyleExtension.setTableStyles(this.tableName,t);return this.clearCachedTableStyles(),i},n.prototype.setTableStyleDefault=function(t){var i=this.featureStyleExtension.setTableStyleDefault(this.tableName,t);return this.clearCachedTableStyles(),i},n.prototype.setTableStyle=function(t,i){var u=this.featureStyleExtension.setTableStyle(this.tableName,t,i);return this.clearCachedTableStyles(),u},n.prototype.setTableIcons=function(t){var i=this.featureStyleExtension.setTableIcons(this.tableName,t);return this.clearCachedTableIcons(),i},n.prototype.setTableIconDefault=function(t){var i=this.featureStyleExtension.setTableIconDefault(this.tableName,t);return this.clearCachedTableIcons(),i},n.prototype.setTableIcon=function(t,i){var u=this.featureStyleExtension.setTableIcon(this.tableName,t,i);return this.clearCachedTableIcons(),u},n.prototype.setFeatureStylesForFeatureRow=function(t,i){return this.featureStyleExtension.setFeatureStylesForFeatureRow(t,i)},n.prototype.setFeatureStyles=function(t,i){return this.featureStyleExtension.setFeatureStyles(this.tableName,t,i)},n.prototype.setFeatureStyleForFeatureRow=function(t,i){return this.featureStyleExtension.setFeatureStyleForFeatureRow(t,i)},n.prototype.setFeatureStyleForFeatureRowAndGeometryType=function(t,i,u){return this.featureStyleExtension.setFeatureStyleForFeatureRowAndGeometryType(t,i,u)},n.prototype.setFeatureStyleDefaultForFeatureRow=function(t,i){return this.featureStyleExtension.setFeatureStyleDefaultForFeatureRow(t,i)},n.prototype.setFeatureStyle=function(t,i,u){return this.featureStyleExtension.setFeatureStyle(this.tableName,t,i,u)},n.prototype.setFeatureStyleDefault=function(t,i){return this.featureStyleExtension.setFeatureStyleDefault(this.tableName,t,i)},n.prototype.setStylesForFeatureRow=function(t,i){return this.featureStyleExtension.setStylesForFeatureRow(t,i)},n.prototype.setStyles=function(t,i){return this.featureStyleExtension.setStyles(this.tableName,t,i)},n.prototype.setStyleForFeatureRow=function(t,i){return this.featureStyleExtension.setStyleForFeatureRow(t,i)},n.prototype.setStyleForFeatureRowAndGeometryType=function(t,i,u){return this.featureStyleExtension.setStyleForFeatureRowAndGeometryType(t,i,u)},n.prototype.setStyleDefaultForFeatureRow=function(t,i){return this.featureStyleExtension.setStyleDefaultForFeatureRow(t,i)},n.prototype.setStyle=function(t,i,u){return this.featureStyleExtension.setStyle(this.tableName,t,i,u)},n.prototype.setStyleDefault=function(t,i){return this.featureStyleExtension.setStyleDefault(this.tableName,t,i)},n.prototype.setIconsForFeatureRow=function(t,i){return this.featureStyleExtension.setIconsForFeatureRow(t,i)},n.prototype.setIcons=function(t,i){return this.featureStyleExtension.setIcons(this.tableName,t,i)},n.prototype.setIconForFeatureRow=function(t,i){return this.featureStyleExtension.setIconForFeatureRow(t,i)},n.prototype.setIconForFeatureRowAndGeometryType=function(t,i,u){return this.featureStyleExtension.setIconForFeatureRowAndGeometryType(t,i,u)},n.prototype.setIconDefaultForFeatureRow=function(t,i){return this.featureStyleExtension.setIconDefaultForFeatureRow(t,i)},n.prototype.setIcon=function(t,i,u){return this.featureStyleExtension.setIcon(this.tableName,t,i,u)},n.prototype.setIconDefault=function(t,i){return this.featureStyleExtension.setIconDefault(this.tableName,t,i)},n.prototype.deleteAllFeatureStyles=function(){var t=this.featureStyleExtension.deleteAllFeatureStyles(this.tableName);return this.clearCachedTableFeatureStyles(),t},n.prototype.deleteAllStyles=function(){var t=this.featureStyleExtension.deleteAllStyles(this.tableName);return this.clearCachedTableStyles(),t},n.prototype.deleteAllIcons=function(){var t=this.featureStyleExtension.deleteAllIcons(this.tableName);return this.clearCachedTableIcons(),t},n.prototype.deleteTableFeatureStyles=function(){var t=this.featureStyleExtension.deleteTableFeatureStyles(this.tableName);return this.clearCachedTableFeatureStyles(),t},n.prototype.deleteTableStyles=function(){var t=this.featureStyleExtension.deleteTableStyles(this.tableName);return this.clearCachedTableStyles(),t},n.prototype.deleteTableStyleDefault=function(){var t=this.featureStyleExtension.deleteTableStyleDefault(this.tableName);return this.clearCachedTableStyles(),t},n.prototype.deleteTableStyle=function(t){var i=this.featureStyleExtension.deleteTableStyle(this.tableName,t);return this.clearCachedTableStyles(),i},n.prototype.deleteTableIcons=function(){var t=this.featureStyleExtension.deleteTableIcons(this.tableName);return this.clearCachedTableIcons(),t},n.prototype.deleteTableIconDefault=function(){var t=this.featureStyleExtension.deleteTableIconDefault(this.tableName);return this.clearCachedTableIcons(),t},n.prototype.deleteTableIcon=function(t){var i=this.featureStyleExtension.deleteTableIcon(this.tableName,t);return this.clearCachedTableIcons(),i},n.prototype.clearCachedTableFeatureStyles=function(){this.cachedTableFeatureStyles.styles=null,this.cachedTableFeatureStyles.icons=null},n.prototype.clearCachedTableStyles=function(){this.cachedTableFeatureStyles.styles=null},n.prototype.clearCachedTableIcons=function(){this.cachedTableFeatureStyles.icons=null},n.prototype.deleteFeatureStyles=function(){return this.featureStyleExtension.deleteFeatureStyles(this.tableName)},n.prototype.deleteStyles=function(){return this.featureStyleExtension.deleteStyles(this.tableName)},n.prototype.deleteStylesForFeatureRow=function(t){return this.featureStyleExtension.deleteStylesForFeatureRow(t)},n.prototype.deleteStylesForFeatureId=function(t){return this.featureStyleExtension.deleteStylesForFeatureId(this.tableName,t)},n.prototype.deleteStyleDefaultForFeatureRow=function(t){return this.featureStyleExtension.deleteStyleDefaultForFeatureRow(t)},n.prototype.deleteStyleDefault=function(t){return this.featureStyleExtension.deleteStyleDefault(this.tableName,t)},n.prototype.deleteStyleForFeatureRow=function(t){return this.featureStyleExtension.deleteStyleForFeatureRow(t)},n.prototype.deleteStyleForFeatureRowAndGeometryType=function(t,i){return this.featureStyleExtension.deleteStyleForFeatureRowAndGeometryType(t,i)},n.prototype.deleteStyle=function(t,i){return this.featureStyleExtension.deleteStyle(this.tableName,t,i)},n.prototype.deleteStyleAndMappingsByStyleRow=function(t){return this.featureStyleExtension.deleteStyleAndMappingsByStyleRow(this.tableName,t)},n.prototype.deleteStyleAndMappingsByStyleRowId=function(t){return this.featureStyleExtension.deleteStyleAndMappingsByStyleRowId(this.tableName,t)},n.prototype.deleteIcons=function(){return this.featureStyleExtension.deleteIcons(this.tableName)},n.prototype.deleteIconsForFeatureRow=function(t){return this.featureStyleExtension.deleteIconsForFeatureRow(t)},n.prototype.deleteIconsForFeatureId=function(t){return this.featureStyleExtension.deleteIconsForFeatureId(this.tableName,t)},n.prototype.deleteIconDefaultForFeatureRow=function(t){return this.featureStyleExtension.deleteIconDefaultForFeatureRow(t)},n.prototype.deleteIconDefault=function(t){return this.featureStyleExtension.deleteIconDefault(this.tableName,t)},n.prototype.deleteIconForFeatureRow=function(t){return this.featureStyleExtension.deleteIconForFeatureRow(t)},n.prototype.deleteIconForFeatureRowAndGeometryType=function(t,i){return this.featureStyleExtension.deleteIconForFeatureRowAndGeometryType(t,i)},n.prototype.deleteIcon=function(t,i){return this.featureStyleExtension.deleteIcon(this.tableName,t,i)},n.prototype.deleteIconAndMappingsByIconRow=function(t){return this.featureStyleExtension.deleteIconAndMappingsByIconRow(this.tableName,t)},n.prototype.deleteIconAndMappingsByIconRowId=function(t){return this.featureStyleExtension.deleteIconAndMappingsByIconRowId(this.tableName,t)},n.prototype.getAllTableStyleIds=function(){return this.featureStyleExtension.getAllTableStyleIds(this.tableName)},n.prototype.getAllTableIconIds=function(){return this.featureStyleExtension.getAllTableIconIds(this.tableName)},n.prototype.getAllStyleIds=function(){return this.featureStyleExtension.getAllStyleIds(this.tableName)},n.prototype.getAllIconIds=function(){return this.featureStyleExtension.getAllIconIds(this.tableName)},n})();l.FeatureTableStyles=r},8600:function(_,l,o){var c=this&&this.__awaiter||function(a,r,n,t){return new(n||(n=Promise))((function(i,u){function f(g){try{y(t.next(g))}catch(b){u(b)}}function p(g){try{y(t.throw(g))}catch(b){u(b)}}function y(g){var b;g.done?i(g.value):(b=g.value,b instanceof n?b:new n((function(E){E(b)}))).then(f,p)}y((t=t.apply(a,r||[])).next())}))},d=this&&this.__generator||function(a,r){var n,t,i,u,f={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function p(y){return function(g){return(function(b){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,b[0]&&(f=0)),f;)try{if(n=1,t&&(i=2&b[0]?t.return:b[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,b[1])).done)return i;switch(t=0,i&&(b=[2&b[0],i.value]),b[0]){case 0:case 1:i=b;break;case 4:return f.label++,{value:b[1],done:!1};case 5:f.label++,t=b[1],b=[0];continue;case 7:b=f.ops.pop(),f.trys.pop();continue;default:if(!((i=(i=f.trys).length>0&&i[i.length-1])||b[0]!==6&&b[0]!==2)){f=0;continue}if(b[0]===3&&(!i||b[1]>i[0]&&b[1]<i[3])){f.label=b[1];break}if(b[0]===6&&f.label<i[1]){f.label=i[1],i=b;break}if(i&&f.label<i[2]){f.label=i[2],f.ops.push(b);break}i[2]&&f.ops.pop(),f.trys.pop();continue}b=r.call(a,f)}catch(E){b=[6,E],t=0}finally{n=i=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}})([y,g])}}};Object.defineProperty(l,"__esModule",{value:!0}),l.IconCache=void 0;var m=o(3437),h=o(9325),s=(function(){function a(r){r===void 0&&(r=a.DEFAULT_CACHE_SIZE),this.cacheSize=r,this.iconCache={},this.accessHistory=[]}return a.prototype.getIconForIconRow=function(r){return this.get(r.id)},a.prototype.get=function(r){var n=this.iconCache[r];if(n){var t=this.accessHistory.indexOf(r);t>-1&&this.accessHistory.splice(t,1),this.accessHistory.push(r)}return n},a.prototype.putIconForIconRow=function(r,n){return this.put(r.id,n)},a.prototype.put=function(r,n){var t=this.iconCache[r];if(this.iconCache[r]=n,t){var i=this.accessHistory.indexOf(r);i>-1&&this.accessHistory.splice(i,1)}if(this.accessHistory.push(r),Object.keys(this.iconCache).length>this.cacheSize){var u=this.accessHistory.shift();if(u){var f=this.iconCache[u];f&&m.Canvas.disposeImage(f),delete this.iconCache[u]}}return t},a.prototype.removeIconForIconRow=function(r){return this.remove(r.id)},a.prototype.remove=function(r){var n=this.iconCache[r];if(delete this.iconCache[r],n){var t=this.accessHistory.indexOf(r);t>-1&&this.accessHistory.splice(t,1)}return n},a.prototype.clear=function(){var r=this;Object.keys(this.iconCache).forEach((function(n){var t=r.iconCache[n];m.Canvas.disposeImage(t)})),this.iconCache={},this.accessHistory=[]},a.prototype.resize=function(r){this.cacheSize=r;var n=Object.keys(this.iconCache);if(n.length>r)for(var t=n.length-r,i=0;i<t;i++){var u=this.accessHistory.shift(),f=this.iconCache[u];m.Canvas.disposeImage(f),delete this.iconCache[u]}},a.prototype.createIcon=function(r){return c(this,void 0,void 0,(function(){return d(this,(function(n){return[2,this.createAndCacheIcon(r,this)]}))}))},a.prototype.createScaledIcon=function(r,n){return c(this,void 0,void 0,(function(){return d(this,(function(t){return[2,this.createAndCacheScaledIcon(r,n,this)]}))}))},a.prototype.createIconNoCache=function(r){return c(this,void 0,void 0,(function(){return d(this,(function(n){return[2,this.createScaledIconNoCache(r,1)]}))}))},a.prototype.createScaledIconNoCache=function(r,n){return c(this,void 0,void 0,(function(){return d(this,(function(t){return[2,this.createAndCacheScaledIcon(r,n,null)]}))}))},a.prototype.createAndCacheIcon=function(r,n){return c(this,void 0,void 0,(function(){return d(this,(function(t){return[2,this.createAndCacheScaledIcon(r,1,n)]}))}))},a.prototype.createAndCacheScaledIcon=function(r,n,t){return c(this,void 0,void 0,(function(){var i,u,f,p,y,g,b,E,x;return d(this,(function(M){switch(M.label){case 0:if(i=null,r==null)return[3,7];if(u=r.id,t!=null&&(i=t.get(u)),i!=null)return[3,7];M.label=1;case 1:return M.trys.push([1,3,,4]),[4,h.ImageUtils.getImage(r.data)];case 2:return i=M.sent(),[3,4];case 3:throw M.sent(),new Error("Failed to get the Icon Row image. Id: "+u+", Name: "+r.name);case 4:return f=i.width,p=i.height,y=r.width,g=r.height,(b=y!=null||g!=null)||n==1||(y=f,g=p,b=!0),b?(y==null?y=f*(g/p):g==null&&(g=p*(y/f)),E=Math.round(n*y),x=Math.round(n*g),E==f&&x==p?[3,6]:[4,h.ImageUtils.scaleImage(i,E,x)]):[3,6];case 5:i=M.sent(),M.label=6;case 6:t?.putIconForIconRow(r,i),M.label=7;case 7:return[2,i]}}))}))},a.DEFAULT_CACHE_SIZE=100,a})();l.IconCache=s},9529:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.IconDao=void 0;var m=o(7502),h=o(9087),s=(function(a){function r(n,t){return a.call(this,n,t)||this}return d(r,a),r.prototype.newRow=function(n,t){return new h.IconRow(this.table,n,t)},r})(m.MediaDao);l.IconDao=s},9087:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.IconRow=void 0;var m=o(6119),h=o(9325),s=(function(a){function r(n,t,i){var u=a.call(this,n,t,i)||this;return u.tableIcon=!1,u.iconTable=n,u}return d(r,a),Object.defineProperty(r.prototype,"nameColumn",{get:function(){return this.iconTable.getNameColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this.getValueWithColumnName(this.nameColumn.name)},set:function(n){this.setValueWithColumnName(this.nameColumn.name,n)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"descriptionColumn",{get:function(){return this.iconTable.getDescriptionColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"description",{get:function(){return this.getValueWithColumnName(this.descriptionColumn.name)},set:function(n){this.setValueWithColumnName(this.descriptionColumn.name,n)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"widthColumn",{get:function(){return this.iconTable.getWidthColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.getValueWithColumnName(this.widthColumn.name)},set:function(n){this.setValueWithColumnName(this.widthColumn.name,n)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"derivedWidth",{get:function(){var n=this.width;return n==null&&(n=this.derivedDimensions[0]),n},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"heightColumn",{get:function(){return this.iconTable.getHeightColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.getValueWithColumnName(this.heightColumn.name)},set:function(n){this.setValueWithColumnName(this.heightColumn.name,n)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"derivedHeight",{get:function(){var n=this.height;return n==null&&(n=this.derivedDimensions[1]),n},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"derivedDimensions",{get:function(){var n=this.width,t=this.height;if(n==null||t==null){var i=h.ImageUtils.getImageSize(this.data),u=i.width,f=i.height;n==null&&(n=u,t!=null&&(n*=t/f)),t==null&&(t=f,n!=null&&(t*=n/u))}return[n,t]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchorUColumn",{get:function(){return this.iconTable.getAnchorUColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchorU",{get:function(){return this.getValueWithColumnName(this.anchorUColumn.name)},set:function(n){this.validateAnchor(n),this.setValueWithColumnName(this.anchorUColumn.name,n)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchorUOrDefault",{get:function(){var n=this.anchorU;return n==null&&(n=.5),n},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchorVColumn",{get:function(){return this.iconTable.getAnchorVColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchorV",{get:function(){return this.getValueWithColumnName(this.anchorVColumn.name)},set:function(n){this.validateAnchor(n),this.setValueWithColumnName(this.anchorVColumn.name,n)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchorVOrDefault",{get:function(){var n=this.anchorV;return n==null&&(n=1),n},enumerable:!1,configurable:!0}),r.prototype.validateAnchor=function(n){if(n!=null&&(n<0||n>1))throw new Error("Anchor must be set inclusively between 0.0 and 1.0, invalid value: "+n);return!0},r.prototype.isTableIcon=function(){return this.tableIcon},r.prototype.setTableIcon=function(n){this.tableIcon=n},r})(m.MediaRow);l.IconRow=s},2015:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.IconTable=void 0;var m=o(6366),h=o(7319),s=o(5865),a=(function(r){function n(){var t=r!==null&&r.apply(this,arguments)||this;return t.TABLE_TYPE="media",t}return d(n,r),n.prototype.getNameColumnIndex=function(){return this.getColumnIndex(n.COLUMN_NAME)},n.prototype.getNameColumn=function(){return this.getColumnWithColumnName(n.COLUMN_NAME)},n.prototype.getDescriptionColumnIndex=function(){return this.getColumnIndex(n.COLUMN_DESCRIPTION)},n.prototype.getDescriptionColumn=function(){return this.getColumnWithColumnName(n.COLUMN_DESCRIPTION)},n.prototype.getWidthColumnIndex=function(){return this.getColumnIndex(n.COLUMN_WIDTH)},n.prototype.getWidthColumn=function(){return this.getColumnWithColumnName(n.COLUMN_WIDTH)},n.prototype.getHeightColumnIndex=function(){return this.getColumnIndex(n.COLUMN_HEIGHT)},n.prototype.getHeightColumn=function(){return this.getColumnWithColumnName(n.COLUMN_HEIGHT)},n.prototype.getAnchorUColumnIndex=function(){return this.getColumnIndex(n.COLUMN_ANCHOR_U)},n.prototype.getAnchorUColumn=function(){return this.getColumnWithColumnName(n.COLUMN_ANCHOR_U)},n.prototype.getAnchorVColumnIndex=function(){return this.getColumnIndex(n.COLUMN_ANCHOR_V)},n.prototype.getAnchorVColumn=function(){return this.getColumnWithColumnName(n.COLUMN_ANCHOR_V)},n.create=function(){return new n(n.TABLE_NAME,n.createColumns(),n.requiredColumns())},n.createRequiredColumns=function(){return m.MediaTable.createRequiredColumns()},n.requiredColumns=function(){return m.MediaTable.requiredColumns()},n.createColumns=function(){var t=n.createRequiredColumns(),i=t.length;return t.push(s.UserColumn.createColumn(i++,n.COLUMN_NAME,h.GeoPackageDataType.TEXT,!1)),t.push(s.UserColumn.createColumn(i++,n.COLUMN_DESCRIPTION,h.GeoPackageDataType.TEXT,!1)),t.push(s.UserColumn.createColumn(i++,n.COLUMN_WIDTH,h.GeoPackageDataType.REAL,!1)),t.push(s.UserColumn.createColumn(i++,n.COLUMN_HEIGHT,h.GeoPackageDataType.REAL,!1)),t.push(s.UserColumn.createColumn(i++,n.COLUMN_ANCHOR_U,h.GeoPackageDataType.REAL,!1)),t.push(s.UserColumn.createColumn(i,n.COLUMN_ANCHOR_V,h.GeoPackageDataType.REAL,!1)),t},n.TABLE_NAME="nga_icon",n.COLUMN_NAME="name",n.COLUMN_DESCRIPTION="description",n.COLUMN_WIDTH="width",n.COLUMN_HEIGHT="height",n.COLUMN_ANCHOR_U="anchor_u",n.COLUMN_ANCHOR_V="anchor_v",n})(m.MediaTable);l.IconTable=a},4725:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Icons=void 0;var o=(function(){function c(d){d===void 0&&(d=!1),this.defaultIcon=null,this.icons=new Map,this.tableIcons=d}return c.prototype.setDefault=function(d){d?.setTableIcon(this.tableIcons),this.defaultIcon=d},c.prototype.getDefault=function(){return this.defaultIcon},c.prototype.setIcon=function(d,m){m===void 0&&(m=null),m!==null?d!=null?(d.setTableIcon(this.tableIcons),this.icons.set(m,d)):this.icons.delete(m):this.setDefault(d)},c.prototype.getIcon=function(d){d===void 0&&(d=null);var m=null;return d!==null&&this.icons.has(d)&&(m=this.icons.get(d)),m!=null&&d!==null||(m=this.getDefault()),m},c.prototype.isEmpty=function(){return this.icons.size===0&&this.defaultIcon===null},c.prototype.getGeometryTypes=function(){return Array.from(this.icons.keys())},c})();l.Icons=o},8479:function(_,l,o){var c,d=this&&this.__extends||(c=function(O,C){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,R){T.__proto__=R}||function(T,R){for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&(T[B]=R[B])},c(O,C)},function(O,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function T(){this.constructor=O}c(O,C),O.prototype=C===null?Object.create(C):(T.prototype=C.prototype,new T)});Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureStyleExtension=void 0;var m=o(8140),h=o(624),s=o(7092),a=o(2015),r=o(9529),n=o(3934),t=o(3237),i=o(8138),u=o(3410),f=o(1553),p=o(8412),y=o(2752),g=o(612),b=o(7924),E=o(4725),x=o(362),M=o(9211),S=(function(O){function C(T){var R=O.call(this,T)||this;return R.relatedTablesExtension=T.relatedTablesExtension,R.contentsIdExtension=T.contentsIdExtension,R}return d(C,O),C.prototype.getOrCreateExtension=function(T){return this.getOrCreate(C.EXTENSION_NAME,this.getFeatureTableName(T),null,C.EXTENSION_DEFINITION,h.Extension.READ_WRITE)},C.prototype.has=function(T){return this.hasExtension(C.EXTENSION_NAME,this.getFeatureTableName(T),null)},C.prototype.getTables=function(){var T=[];if(this.extensionsDao.isTableExists())for(var R=this.extensionsDao.queryAllByExtension(C.EXTENSION_NAME),B=0;B<R.length;B++)T.push(R[B].table_name);return T},C.prototype.getRelatedTables=function(){return this.relatedTablesExtension},C.prototype.getContentsId=function(){return this.contentsIdExtension},C.prototype.createRelationships=function(T){return{styleRelationship:this.createStyleRelationship(T),tableStyleRelationship:this.createTableStyleRelationship(T),iconRelationship:this.createIconRelationship(T),tableIconRelationship:this.createTableIconRelationship(T)}},C.prototype.hasRelationship=function(T){return this.hasStyleRelationship(T)||this.hasTableStyleRelationship(T)||this.hasIconRelationship(T)||this.hasTableIconRelationship(T)},C.prototype.createStyleRelationship=function(T){return this._createStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_STYLE,T),this.getFeatureTableName(T),this.getFeatureTableName(T),n.StyleTable.TABLE_NAME)},C.prototype.hasStyleRelationship=function(T){return this._hasStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_STYLE,T),this.getFeatureTableName(T),n.StyleTable.TABLE_NAME)},C.prototype.createTableStyleRelationship=function(T){return this._createStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_TABLE_STYLE,T),this.getFeatureTableName(T),s.ContentsIdDao.TABLE_NAME,n.StyleTable.TABLE_NAME)},C.prototype.hasTableStyleRelationship=function(T){return this._hasStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_TABLE_STYLE,T),s.ContentsIdDao.TABLE_NAME,n.StyleTable.TABLE_NAME)},C.prototype.createIconRelationship=function(T){return this._createStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_ICON,T),this.getFeatureTableName(T),this.getFeatureTableName(T),a.IconTable.TABLE_NAME)},C.prototype.hasIconRelationship=function(T){return this._hasStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_ICON,T),this.getFeatureTableName(T),a.IconTable.TABLE_NAME)},C.prototype.createTableIconRelationship=function(T){return this._createStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_TABLE_ICON,T),this.getFeatureTableName(T),s.ContentsIdDao.TABLE_NAME,a.IconTable.TABLE_NAME)},C.prototype.hasTableIconRelationship=function(T){return this._hasStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_TABLE_ICON,T),s.ContentsIdDao.TABLE_NAME,a.IconTable.TABLE_NAME)},C.prototype.getMappingTableName=function(T,R){return T+this.getFeatureTableName(R)},C.prototype._hasStyleRelationship=function(T,R,B){return this.relatedTablesExtension.hasRelations(R,B,T)},C.prototype._createStyleRelationship=function(T,R,B,z){return this._hasStyleRelationship(T,B,z)?this.geoPackage.extendedRelationDao.getRelations(B,z,T)[0]:(this.getOrCreateExtension(R),B!==s.ContentsIdDao.TABLE_NAME||this.contentsIdExtension.has()||this.contentsIdExtension.getOrCreateExtension(),this._handleCreateStyleRelationship(T,B,z))},C.prototype._handleCreateStyleRelationship=function(T,R,B){return B===n.StyleTable.TABLE_NAME?this.relatedTablesExtension.addAttributesRelationship(this.geoPackage.relatedTablesExtension.getRelationshipBuilder().setBaseTableName(R).setUserMappingTable(i.StyleMappingTable.create(T)).setRelatedTable(n.StyleTable.create())):this.relatedTablesExtension.addMediaRelationship(this.geoPackage.relatedTablesExtension.getRelationshipBuilder().setBaseTableName(R).setUserMappingTable(i.StyleMappingTable.create(T)).setRelatedTable(a.IconTable.create()))},C.prototype.deleteAllRelationships=function(){for(var T={styleRelationships:0,tableStyleRelationships:0,iconRelationship:0,tableIconRelationship:0},R=this.getTables(),B=0;B<R.length;B++){var z=this.deleteRelationships(R[B]),L=z.styleRelationships,Y=z.tableStyleRelationships,ie=z.iconRelationship,$=z.tableIconRelationship;T.styleRelationships+=L,T.tableStyleRelationships+=Y,T.iconRelationship+=ie,T.tableIconRelationship+=$}return T},C.prototype.deleteRelationships=function(T){return{styleRelationships:this.deleteStyleRelationship(T),tableStyleRelationships:this.deleteTableStyleRelationship(T),iconRelationship:this.deleteIconRelationship(T),tableIconRelationship:this.deleteTableIconRelationship(T)}},C.prototype.deleteStyleRelationship=function(T){return this._deleteStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_STYLE,T),T)},C.prototype.deleteTableStyleRelationship=function(T){return this._deleteStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_TABLE_STYLE,T),T)},C.prototype.deleteIconRelationship=function(T){return this._deleteStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_ICON,T),T)},C.prototype.deleteTableIconRelationship=function(T){return this._deleteStyleRelationship(this.getMappingTableName(C.TABLE_MAPPING_TABLE_ICON,T),T)},C.prototype._deleteStyleRelationship=function(T,R){return this.relatedTablesExtension.removeRelationshipsWithMappingTable(T),this.hasRelationship(R)||this.extensionsDao.isTableExists()&&this.extensionsDao.deleteByExtensionAndTableName(C.EXTENSION_NAME,this.getFeatureTableName(R)),0},C.prototype.getStyleMappingDao=function(T){return this._getMappingDao(C.TABLE_MAPPING_STYLE,T)},C.prototype.getTableStyleMappingDao=function(T){return this._getMappingDao(C.TABLE_MAPPING_TABLE_STYLE,T)},C.prototype.getIconMappingDao=function(T){return this._getMappingDao(C.TABLE_MAPPING_ICON,T)},C.prototype.getTableIconMappingDao=function(T){return this._getMappingDao(C.TABLE_MAPPING_TABLE_ICON,T)},C.prototype._getMappingDao=function(T,R){var B=T+this.getFeatureTableName(R),z=null;return this.geoPackage.isTable(B)&&(z=new u.StyleMappingDao(this.relatedTablesExtension.getUserDao(B),this.geoPackage)),z},C.prototype.getStyleDao=function(){var T=null;if(this.geoPackage.isTable(n.StyleTable.TABLE_NAME)){var R=this.geoPackage.contentsDao.queryForId(n.StyleTable.TABLE_NAME);if(R){var B=new f.StyleTableReader(R.table_name).readTable(this.geoPackage.connection);B.setContents(R),T=new t.StyleDao(this.geoPackage,B)}}return T},C.prototype.getIconDao=function(){var T=null;if(this.geoPackage.isTable(a.IconTable.TABLE_NAME)){var R=new x.UserCustomTableReader(a.IconTable.TABLE_NAME).readTable(this.geoPackage.database),B=new a.IconTable(R.getTableName(),R.getUserColumns().getColumns(),a.IconTable.requiredColumns());B.setContents(this.geoPackage.contentsDao.queryForId(a.IconTable.TABLE_NAME)),T=new r.IconDao(this.geoPackage,B)}return T},C.prototype.getTableFeatureStyles=function(T){var R=null;if(this.contentsIdExtension.getIdByTableName(this.getFeatureTableName(T))!==null){var B=this.getTableStyles(T),z=this.getTableIcons(T);B===null&&z===null||(R=new y.FeatureStyles(B,z))}return R},C.prototype.getTableStyleDefault=function(T){return this.getTableStyle(T,null)},C.prototype.getTableStyle=function(T,R){var B=null,z=this.getTableStyles(T);return z!==null&&(B=R===null?z.getDefault():z.getStyle(R)),B},C.prototype.getTableStyles=function(T){var R=null,B=this.contentsIdExtension.getIdByTableName(this.getFeatureTableName(T));return B!==null&&(R=this.getStyles(B,this.getTableStyleMappingDao(T),!0)),R},C.prototype.getTableIconDefault=function(T){return this.getTableIcon(T,null)},C.prototype.getTableIcon=function(T,R){var B=null,z=this.getTableIcons(T);return z!==null&&(B=R===null?z.getDefault():z.getIcon(R)),B},C.prototype.getTableIcons=function(T){var R=null,B=this.contentsIdExtension.getIdByTableName(this.getFeatureTableName(T));return B!==null&&(R=this.getIcons(B,this.getTableIconMappingDao(T),!0)),R},C.prototype.getIcons=function(T,R,B){B===void 0&&(B=!1);var z=new E.Icons(B);if(R!==null)for(var L=this.getIconDao(),Y=R.queryByBaseId(T),ie=0;ie<Y.length;ie++){var $=R.createObject(Y[ie]),Q=L.queryForId($.relatedId);$.getGeometryTypeName()===null?z.setDefault(Q):z.setIcon(Q,M.GeometryType.fromName($.getGeometryTypeName().toUpperCase()))}return z.isEmpty()&&(z=null),z},C.prototype.getStyles=function(T,R,B){B===void 0&&(B=!1);var z=new b.Styles(B);if(R!==null)for(var L=this.getStyleDao(),Y=R.queryByBaseId(T),ie=0;ie<Y.length;ie++){var $=R.createObject(Y[ie]),Q=L.queryForId($.relatedId);$.getGeometryTypeName()===null?z.setDefault(Q):z.setStyle(Q,M.GeometryType.fromName($.getGeometryTypeName().toUpperCase()))}return z.isEmpty()&&(z=null),z},C.prototype.getFeatureStylesForFeatureRow=function(T){return this.getFeatureStyles(T.featureTable,T.id)},C.prototype.getFeatureStyles=function(T,R){var B=this.getStyles(R,this.getStyleMappingDao(T)),z=this.getIcons(R,this.getIconMappingDao(T)),L=null;return B===null&&z===null||(L=new y.FeatureStyles(B,z)),L},C.prototype.getStylesForFeatureRow=function(T){return this.getStyles(T.id,this.getStyleMappingDao(T.featureTable.getTableName()))},C.prototype.getStylesForFeatureId=function(T,R){return this.getStyles(R,this.getStyleMappingDao(T))},C.prototype.getIconsForFeatureRow=function(T){return this.getIcons(T.id,this.getIconMappingDao(T.featureTable.getTableName()))},C.prototype.getIconsForFeatureId=function(T,R){return this.getIcons(R,this.getIconMappingDao(T))},C.prototype.getFeatureStyleForFeatureRow=function(T){return new g.FeatureStyle(this.getStyle(T.featureTable.getTableName(),T.id,M.GeometryType.fromName(T.geometryType.toUpperCase()),!0),this.getIcon(T.featureTable.getTableName(),T.id,M.GeometryType.fromName(T.geometryType.toUpperCase()),!0))},C.prototype.getFeatureStyleDefault=function(T){return new g.FeatureStyle(this.getStyle(T.featureTable.getTableName(),T.id,null,!0),this.getIcon(T.featureTable.getTableName(),T.id,null,!0))},C.prototype.getIcon=function(T,R,B,z){var L=null,Y=this.getIcons(R,this.getIconMappingDao(T));return Y!==null&&(L=Y.getIcon(B)),L===null&&z&&(L=this.getTableIcon(T,B)),L},C.prototype.getStyle=function(T,R,B,z){var L=null,Y=this.getStyles(R,this.getStyleMappingDao(T));return Y!==null&&(L=Y.getStyle(B)),L===null&&z&&(L=this.getTableStyle(T,B)),L},C.prototype.setTableFeatureStyles=function(T,R){return R!==null?{tableStyles:this.setTableStyles(T,R.styles),tableIcons:this.setTableIcons(T,R.icons)}:{deleted:this.deleteTableFeatureStyles(T),tableStyles:void 0,tableIcons:void 0}},C.prototype.setTableStyles=function(T,R){var B=this.deleteTableStyles(T);if(R!==null){var z=[],L=void 0;R.getDefault()!==null&&(L=this.setTableStyleDefault(T,R.getDefault()));for(var Y=R.getGeometryTypes(),ie=0;ie<Y.length;ie++){var $=Y[ie],Q=R.getStyle($);z.push(this.setTableStyle(T,$,Q))}return{styleDefault:L,styles:z,deleted:B}}},C.prototype.setTableStyleDefault=function(T,R){return this.setTableStyle(T,null,R)},C.prototype.setTableStyle=function(T,R,B){if(this.deleteTableStyle(T,R),B!==null){this.createTableStyleRelationship(T);var z=this.contentsIdExtension.getOrCreateIdByTableName(this.getFeatureTableName(T)),L=this.getOrInsertStyle(B),Y=this.getTableStyleMappingDao(T);return this.insertStyleMapping(Y,z.id,L,R)}},C.prototype.setTableIcons=function(T,R){var B=this.deleteTableIcons(T);if(R!==null){var z=void 0,L=[];R.getDefault()!==null&&(z=this.setTableIconDefault(T,R.getDefault()));for(var Y=R.getGeometryTypes(),ie=0;ie<Y.length;ie++){var $=Y[ie],Q=R.getIcon($);L.push(this.setTableIcon(T,$,Q))}return{iconDefault:z,icons:L,deleted:B}}},C.prototype.setTableIconDefault=function(T,R){return this.setTableIcon(T,null,R)},C.prototype.setTableIcon=function(T,R,B){if(this.deleteTableIcon(T,R),B!==null){this.createTableIconRelationship(T);var z=this.contentsIdExtension.getOrCreateIdByTableName(this.getFeatureTableName(T)),L=this.getOrInsertIcon(B),Y=this.getTableIconMappingDao(T);return this.insertStyleMapping(Y,z.id,L,R)}},C.prototype.setFeatureStylesForFeatureRow=function(T,R){return this.setFeatureStyles(T.featureTable.getTableName(),T.id,R)},C.prototype.setFeatureStyles=function(T,R,B){return B!==null?{styles:this.setStyles(T,R,B.styles),icons:this.setIcons(T,R,B.icons)}:{styles:void 0,icons:void 0,deleted:{deletedStyles:this.deleteStyles(T),deletedIcons:this.deleteIcons(T)}}},C.prototype.setFeatureStyleForFeatureRow=function(T,R){return this.setFeatureStyleForFeatureRowAndGeometryType(T,M.GeometryType.fromName(T.geometryType.toUpperCase()),R)},C.prototype.setFeatureStyleForFeatureRowAndGeometryType=function(T,R,B){return this.setFeatureStyle(T.featureTable.getTableName(),T.id,R,B)},C.prototype.setFeatureStyleDefaultForFeatureRow=function(T,R){return this.setFeatureStyle(T.featureTable.getTableName(),T.id,null,R)},C.prototype.setFeatureStyle=function(T,R,B,z){return z!==null?{style:this.setStyle(T,R,B,z.style),icon:this.setIcon(T,R,B,z.icon)}:{style:void 0,icon:void 0,deleted:{style:this.deleteStyle(T,R,B),icon:this.deleteIcon(T,R,B)}}},C.prototype.setFeatureStyleDefault=function(T,R,B){return this.setFeatureStyle(T,R,null,B)},C.prototype.setStylesForFeatureRow=function(T,R){return this.setStyles(T.featureTable.getTableName(),T.id,R)},C.prototype.setStyles=function(T,R,B){var z=this.deleteStylesForFeatureId(T,R);if(B!==null){var L=[],Y=void 0;B.getDefault()!==null&&(Y=this.setStyleDefault(T,R,B.getDefault()));for(var ie=B.getGeometryTypes(),$=0;$<ie.length;$++)L.push(this.setStyle(T,R,ie[$],B.getStyle(ie[$])));return{styleDefault:Y,styles:L,deleted:z}}return{styleDefault:void 0,styles:void 0,deleted:z}},C.prototype.setStyleForFeatureRow=function(T,R){return this.setStyleForFeatureRowAndGeometryType(T,M.GeometryType.fromName(T.geometryType.toUpperCase()),R)},C.prototype.setStyleForFeatureRowAndGeometryType=function(T,R,B){return this.setStyle(T.featureTable.getTableName(),T.id,R,B)},C.prototype.setStyleDefaultForFeatureRow=function(T,R){return this.setStyle(T.featureTable.getTableName(),T.id,null,R)},C.prototype.setStyle=function(T,R,B,z){if(this.deleteStyle(T,R,B),z!==null){this.createStyleRelationship(T);var L=this.getOrInsertStyle(z),Y=this.getStyleMappingDao(T);return this.insertStyleMapping(Y,R,L,B)}},C.prototype.setStyleDefault=function(T,R,B){return this.setStyle(T,R,null,B)},C.prototype.setIconsForFeatureRow=function(T,R){return this.setIcons(T.featureTable.getTableName(),T.id,R)},C.prototype.setIcons=function(T,R,B){var z=this.deleteIconsForFeatureId(T,R);if(B!==null){B.getDefault()!==null&&this.setIconDefault(T,R,B.getDefault());for(var L=B.getGeometryTypes(),Y=0;Y<L.length;Y++)this.setIcon(T,R,L[Y],B.getIcon(L[Y]));return{iconDefault:void 0,icons:void 0,deleted:z}}return{iconDefault:void 0,icons:void 0,deleted:z}},C.prototype.setIconForFeatureRow=function(T,R){return this.setIconForFeatureRowAndGeometryType(T,M.GeometryType.fromName(T.geometryType.toUpperCase()),R)},C.prototype.setIconForFeatureRowAndGeometryType=function(T,R,B){return this.setIcon(T.featureTable.getTableName(),T.id,R,B)},C.prototype.setIconDefaultForFeatureRow=function(T,R){return this.setIcon(T.featureTable.getTableName(),T.id,null,R)},C.prototype.setIcon=function(T,R,B,z){if(this.deleteIcon(T,R,B),z!==null){this.createIconRelationship(T);var L=this.getOrInsertIcon(z),Y=this.getIconMappingDao(T);return this.insertStyleMapping(Y,R,L,B)}},C.prototype.setIconDefault=function(T,R,B){return this.setIcon(T,R,null,B)},C.prototype.getOrInsertStyle=function(T){var R;if(T.hasId())R=T.id;else{var B=this.getStyleDao();B!==null&&(R=B.create(T),T.id=R)}return R},C.prototype.getOrInsertIcon=function(T){var R;if(T.hasId())R=T.id;else{var B=this.getIconDao();B!=null&&(R=B.create(T),T.id=R)}return R},C.prototype.insertStyleMapping=function(T,R,B,z){z===void 0&&(z=null);var L=T.newRow();return L.baseId=R,L.relatedId=B,L.setGeometryTypeName(M.GeometryType.nameFromType(z)),T.create(L)},C.prototype.deleteAllFeatureStyles=function(T){return{tableStyles:this.deleteTableFeatureStyles(T),styles:this.deleteFeatureStyles(T)}},C.prototype.deleteAllStyles=function(T){return{tableStyles:this.deleteTableStyles(T),styles:this.deleteStyles(T)}},C.prototype.deleteAllIcons=function(T){return{tableIcons:this.deleteTableIcons(T),icons:this.deleteIcons(T)}},C.prototype.deleteTableFeatureStyles=function(T){return{styles:this.deleteTableStyles(T),icons:this.deleteTableIcons(T)}},C.prototype.deleteTableStyles=function(T){return this.deleteTableMappings(this.getTableStyleMappingDao(T),T)},C.prototype.deleteTableStyleDefault=function(T){return this.deleteTableStyle(T,null)},C.prototype.deleteTableStyle=function(T,R){return this.deleteTableMapping(this.getTableStyleMappingDao(T),T,R)},C.prototype.deleteTableIcons=function(T){return this.deleteTableMappings(this.getTableIconMappingDao(T),T)},C.prototype.deleteTableIconDefault=function(T){return this.deleteTableIcon(T,null)},C.prototype.deleteTableIcon=function(T,R){return this.deleteTableMapping(this.getTableIconMappingDao(T),T,R)},C.prototype.deleteTableMappings=function(T,R){if(T!==null){var B=this.contentsIdExtension.getIdByTableName(this.getFeatureTableName(R));if(B!==null)return T.deleteByBaseId(B)}return 0},C.prototype.deleteTableMapping=function(T,R,B){if(T!==null){var z=this.contentsIdExtension.getIdByTableName(this.getFeatureTableName(R));if(z!==null)return T.deleteByBaseIdAndGeometryType(z,B)}return 0},C.prototype.deleteFeatureStyles=function(T){return{styles:this.deleteStyles(T),icons:this.deleteIcons(T)}},C.prototype.deleteStyles=function(T){return this.deleteMappings(this.getStyleMappingDao(T))},C.prototype.deleteStylesForFeatureRow=function(T){return this.deleteStylesForFeatureId(T.featureTable.getTableName(),T.id)},C.prototype.deleteStylesForFeatureId=function(T,R){return this.deleteMappingsForFeatureId(this.getStyleMappingDao(T),R)},C.prototype.deleteStyleDefaultForFeatureRow=function(T){return this.deleteStyleForFeatureRowAndGeometryType(T,null)},C.prototype.deleteStyleDefault=function(T,R){return this.deleteStyle(T,R,null)},C.prototype.deleteStyleForFeatureRow=function(T){return this.deleteStyleForFeatureRowAndGeometryType(T,M.GeometryType.fromName(T.geometryType.toUpperCase()))},C.prototype.deleteStyleForFeatureRowAndGeometryType=function(T,R){return this.deleteStyle(T.featureTable,T.id,R)},C.prototype.deleteStyle=function(T,R,B){return this.deleteMapping(this.getStyleMappingDao(T),R,B)},C.prototype.deleteStyleAndMappingsByStyleRow=function(T,R){return this.deleteStyleAndMappingsByStyleRowId(T,R.id)},C.prototype.deleteStyleAndMappingsByStyleRowId=function(T,R){var B=0,z=this.getStyleDao();z!=null&&(B+=z.deleteById(R));var L=this.getStyleMappingDao(T);L!=null&&(B+=L.deleteByRelatedId(R));var Y=this.getTableStyleMappingDao(T);return Y!=null&&(B+=Y.deleteByRelatedId(R)),B},C.prototype.deleteIcons=function(T){return this.deleteMappings(this.getIconMappingDao(T))},C.prototype.deleteIconsForFeatureRow=function(T){return this.deleteIconsForFeatureId(T.featureTable.getTableName(),T.id)},C.prototype.deleteIconsForFeatureId=function(T,R){return this.deleteMappingsForFeatureId(this.getIconMappingDao(T),R)},C.prototype.deleteIconDefaultForFeatureRow=function(T){return this.deleteIconDefault(T.featureTable.getTableName(),T.id)},C.prototype.deleteIconDefault=function(T,R){return this.deleteIcon(T,R,null)},C.prototype.deleteIconForFeatureRow=function(T){return this.deleteIconForFeatureRowAndGeometryType(T,M.GeometryType.fromName(T.geometryType.toUpperCase()))},C.prototype.deleteIconForFeatureRowAndGeometryType=function(T,R){return this.deleteIcon(T.featureTable,T.id,R)},C.prototype.deleteIcon=function(T,R,B){return this.deleteMapping(this.getIconMappingDao(T),R,B)},C.prototype.deleteIconAndMappingsByIconRow=function(T,R){return this.deleteIconAndMappingsByIconRowId(T,R.id)},C.prototype.deleteIconAndMappingsByIconRowId=function(T,R){var B=0,z=this.getIconDao();z!=null&&(B+=z.deleteById(R));var L=this.getIconMappingDao(T);L!=null&&(B+=L.deleteByRelatedId(R));var Y=this.getTableIconMappingDao(T);return Y!=null&&(B+=Y.deleteByRelatedId(R)),B},C.prototype.deleteMappings=function(T){return T!==null?T.deleteAll():0},C.prototype.deleteMappingsForFeatureId=function(T,R){return T!==null&&R?T.deleteByBaseId(R):0},C.prototype.deleteMapping=function(T,R,B){return T!==null?T.deleteByBaseIdAndGeometryType(R,B):0},C.prototype.getAllTableStyleIds=function(T){var R=null,B=this.getTableStyleMappingDao(T);return B!==null&&(R=B.uniqueRelatedIds().map((function(z){return z.related_id}))),R},C.prototype.getAllTableIconIds=function(T){var R=null,B=this.getTableIconMappingDao(T);return B!==null&&(R=B.uniqueRelatedIds().map((function(z){return z.related_id}))),R},C.prototype.getAllStyleIds=function(T){var R=null,B=this.getStyleMappingDao(T);return B!==null&&(R=B.uniqueRelatedIds().map((function(z){return z.related_id}))),R},C.prototype.getAllIconIds=function(T){var R=null,B=this.getIconMappingDao(T);return B!==null&&(R=B.uniqueRelatedIds().map((function(z){return z.related_id}))),R},C.prototype.getFeatureTableName=function(T){return T instanceof p.FeatureTable?T.getTableName():T},C.prototype.removeExtension=function(){return this.deleteAllRelationships(),this.geoPackage.deleteTable(n.StyleTable.TABLE_NAME),this.geoPackage.deleteTable(a.IconTable.TABLE_NAME),this.extensionsDao.isTableExists()?this.extensionsDao.deleteByExtension(C.EXTENSION_NAME):0},C.EXTENSION_NAME="nga_feature_style",C.EXTENSION_AUTHOR="nga",C.EXTENSION_NAME_NO_AUTHOR="feature_style",C.EXTENSION_DEFINITION="http://ngageoint.github.io/GeoPackage/docs/extensions/feature-style.html",C.TABLE_MAPPING_STYLE=C.EXTENSION_AUTHOR+"_style_",C.TABLE_MAPPING_TABLE_STYLE=C.EXTENSION_AUTHOR+"_style_default_",C.TABLE_MAPPING_ICON=C.EXTENSION_AUTHOR+"_icon_",C.TABLE_MAPPING_TABLE_ICON=C.EXTENSION_AUTHOR+"_icon_default_",C})(m.BaseExtension);l.FeatureStyleExtension=S},3237:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.StyleDao=void 0;var m=o(8008),h=o(7128),s=(function(a){function r(n,t){return a.call(this,n,t)||this}return d(r,a),r.prototype.createObject=function(n){return n===void 0&&(n=void 0),n?this.getRow(n):this.newRow()},Object.defineProperty(r.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),r.prototype.newRow=function(n,t){return new h.StyleRow(this.table,n,t)},r})(m.AttributesDao);l.StyleDao=s},3410:function(_,l,o){var c,d=this&&this.__extends||(c=function(t,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(u[p]=f[p])},c(t,i)},function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function u(){this.constructor=t}c(t,i),t.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)});Object.defineProperty(l,"__esModule",{value:!0}),l.StyleMappingDao=void 0;var m=o(6302),h=o(8138),s=o(233),a=o(9582),r=o(9211),n=(function(t){function i(u,f,p){return t.call(this,u,f,p||new h.StyleMappingTable(u.table.getTableName(),u.table.getUserColumns().getColumns(),null))||this}return d(i,t),Object.defineProperty(i.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),i.prototype.createMappingTable=function(u){return new h.StyleMappingTable(u.table.getTableName(),u.table.getUserColumns().getColumns(),null)},i.prototype.newRow=function(u,f){return new a.StyleMappingRow(this.table,u,f)},i.prototype.deleteByBaseIdAndGeometryType=function(u,f){var p="";p+=this.buildWhereWithFieldAndValue(s.UserMappingTable.COLUMN_BASE_ID,u),p+=" AND ",p+=this.buildWhereWithFieldAndValue(h.StyleMappingTable.COLUMN_GEOMETRY_TYPE_NAME,r.GeometryType.nameFromType(f));var y=this.buildWhereArgs([u,r.GeometryType.nameFromType(f)]);return this.deleteWhere(p,y)},i})(m.UserMappingDao);l.StyleMappingDao=n},9582:function(_,l,o){var c,d=this&&this.__extends||(c=function(h,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])},c(h,s)},function(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=h}c(h,s),h.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(l,"__esModule",{value:!0}),l.StyleMappingRow=void 0;var m=(function(h){function s(a,r,n){var t=h.call(this,a,r,n)||this;return t.styleMappingTable=a,t}return d(s,h),s.prototype.getGeometryTypeNameColumn=function(){return this.styleMappingTable.getGeometryTypeNameColumn()},s.prototype.getGeometryTypeName=function(){return this.getValueWithColumnName(this.getGeometryTypeNameColumn().name)},s.prototype.setGeometryTypeName=function(a){this.setValueWithColumnName(this.getGeometryTypeNameColumn().name,a)},s})(o(8029).UserMappingRow);l.StyleMappingRow=m},8138:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.StyleMappingTable=void 0;var m=o(233),h=o(7319),s=o(5865),a=(function(r){function n(){return r!==null&&r.apply(this,arguments)||this}return d(n,r),n.prototype.getGeometryTypeNameColumnIndex=function(){return this.getColumnIndex(n.COLUMN_GEOMETRY_TYPE_NAME)},n.prototype.getGeometryTypeNameColumn=function(){return this.getColumnWithColumnName(n.COLUMN_GEOMETRY_TYPE_NAME)},n.create=function(t){return new n(t,n.createColumns(),null)},n.createColumns=function(){var t=m.UserMappingTable.createRequiredColumns(),i=t.length;return t.push(s.UserColumn.createColumn(i,n.COLUMN_GEOMETRY_TYPE_NAME,h.GeoPackageDataType.TEXT,!1)),t},n.COLUMN_GEOMETRY_TYPE_NAME="geometry_type_name",n})(m.UserMappingTable);l.StyleMappingTable=a},7128:function(_,l,o){var c,d=this&&this.__extends||(c=function(h,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])},c(h,s)},function(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=h}c(h,s),h.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(l,"__esModule",{value:!0}),l.StyleRow=void 0;var m=(function(h){function s(a,r,n){var t=h.call(this,a,r,n)||this;return t.tableStyle=!1,t.styleTable=a,t}return d(s,h),s.prototype.getNameColumn=function(){return this.styleTable.getNameColumn()},s.prototype.getName=function(){return this.getValueWithColumnName(this.getNameColumn().name)},s.prototype.setName=function(a){this.setValueWithColumnName(this.getNameColumn().name,a)},s.prototype.getDescriptionColumn=function(){return this.styleTable.getDescriptionColumn()},s.prototype.getDescription=function(){return this.getValueWithColumnName(this.getDescriptionColumn().name)},s.prototype.setDescription=function(a){this.setValueWithColumnName(this.getDescriptionColumn().name,a)},s.prototype.getColorColumn=function(){return this.styleTable.getColorColumn()},s.prototype.getColor=function(){return this.createColor(this.getHexColor(),this.getOpacity())},s.prototype.hasColor=function(){return this._hasColor(this.getHexColor(),this.getOpacity())},s.prototype.getHexColor=function(){return this.getValueWithColumnName(this.getColorColumn().name)},s.prototype.setColor=function(a,r){this.setHexColor(a),this.setOpacity(r)},s.prototype.setHexColor=function(a){var r=this.validateColor(a);this.setValueWithColumnName(this.getColorColumn().name,r)},s.prototype.getOpacityColumn=function(){return this.styleTable.getOpacityColumn()},s.prototype.getOpacity=function(){return this.getValueWithColumnName(this.getOpacityColumn().name)},s.prototype.getOpacityOrDefault=function(){var a=this.getOpacity();return a===null&&(a=1),a},s.prototype.setOpacity=function(a){this.validateOpacity(a),this.setValueWithColumnName(this.getOpacityColumn().name,a)},s.prototype.getWidthColumn=function(){return this.styleTable.getWidthColumn()},s.prototype.getWidth=function(){return this.getValueWithColumnName(this.getWidthColumn().name)},s.prototype.setWidth=function(a){if(a!==null&&a<0)throw new Error("Width must be greater than or equal to 0.0, invalid value: "+a);this.setValueWithColumnName(this.getWidthColumn().name,a)},s.prototype.getWidthOrDefault=function(){var a=this.getWidth();return a===null&&(a=1),a},s.prototype.getFillColorColumn=function(){return this.styleTable.getFillColorColumn()},s.prototype.getFillColor=function(){return this.createColor(this.getFillHexColor(),this.getFillOpacity())},s.prototype.hasFillColor=function(){return this._hasColor(this.getFillHexColor(),this.getFillOpacity())},s.prototype.getFillHexColor=function(){return this.getValueWithColumnName(this.getFillColorColumn().name)},s.prototype.setFillColor=function(a,r){this.setFillHexColor(a),this.setFillOpacity(r)},s.prototype.setFillHexColor=function(a){var r=this.validateColor(a);this.setValueWithColumnName(this.getFillColorColumn().name,r)},s.prototype.getFillOpacityColumn=function(){return this.styleTable.getFillOpacityColumn()},s.prototype.getFillOpacity=function(){return this.getValueWithColumnName(this.getFillOpacityColumn().name)},s.prototype.setFillOpacity=function(a){this.validateOpacity(a),this.setValueWithColumnName(this.getFillOpacityColumn().name,a)},s.prototype.getFillOpacityOrDefault=function(){var a=this.getFillOpacity();return a==null&&(a=1),a},s.prototype.validateColor=function(a){var r=a;if(a!=null){if(a.startsWith("#")||(r="#"+a),!s.colorPattern.test(r))throw new Error("Color must be in hex format #RRGGBB or #RGB, invalid value: "+a);r=r.toUpperCase()}return r},s.prototype.validateOpacity=function(a){if(a!=null&&(a<0||a>1))throw new Error("Opacity must be set inclusively between 0.0 and 1.0, invalid value: "+a);return!0},s.prototype.createColor=function(a,r){var n="#000000";if(a!==null&&(n=a),r!==null){var t=Math.round(255*r).toString(16);t.length===1&&(t="0"+t),n+=t}return n.toUpperCase()},s.prototype._hasColor=function(a,r){return a!==null||r!==null},s.prototype.isTableStyle=function(){return this.tableStyle},s.prototype.setTableStyle=function(a){this.tableStyle=a},s.colorPattern=/^#([0-9a-fA-F]{3}){1,2}$/,s})(o(6861).AttributesRow);l.StyleRow=m},3934:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.StyleTable=void 0;var m=o(3931),h=o(8483),s=o(5865),a=o(7319),r=(function(n){function t(){var i=n!==null&&n.apply(this,arguments)||this;return i.TABLE_TYPE="media",i.data_type=h.RelationType.ATTRIBUTES.dataType,i.relation_name=h.RelationType.ATTRIBUTES.name,i}return d(t,n),t.prototype.getNameColumnIndex=function(){return this.getColumnIndex(t.COLUMN_NAME)},t.prototype.getNameColumn=function(){return this.getColumnWithColumnName(t.COLUMN_NAME)},t.prototype.getDescriptionColumnIndex=function(){return this.getColumnIndex(t.COLUMN_DESCRIPTION)},t.prototype.getDescriptionColumn=function(){return this.getColumnWithColumnName(t.COLUMN_DESCRIPTION)},t.prototype.getColorColumnIndex=function(){return this.getColumnIndex(t.COLUMN_COLOR)},t.prototype.getColorColumn=function(){return this.getColumnWithColumnName(t.COLUMN_COLOR)},t.prototype.getOpacityColumnIndex=function(){return this.getColumnIndex(t.COLUMN_OPACITY)},t.prototype.getOpacityColumn=function(){return this.getColumnWithColumnName(t.COLUMN_OPACITY)},t.prototype.getWidthColumnIndex=function(){return this.getColumnIndex(t.COLUMN_WIDTH)},t.prototype.getWidthColumn=function(){return this.getColumnWithColumnName(t.COLUMN_WIDTH)},t.prototype.getFillColorColumnIndex=function(){return this.getColumnIndex(t.COLUMN_FILL_COLOR)},t.prototype.getFillColorColumn=function(){return this.getColumnWithColumnName(t.COLUMN_FILL_COLOR)},t.prototype.getFillOpacityColumnIndex=function(){return this.getColumnIndex(t.COLUMN_FILL_OPACITY)},t.prototype.getFillOpacityColumn=function(){return this.getColumnWithColumnName(t.COLUMN_FILL_OPACITY)},t.create=function(){return new t(t.TABLE_NAME,t.createColumns())},t.createColumns=function(){var i=[],u=0;return i.push(s.UserColumn.createPrimaryKeyColumn(u++,t.COLUMN_ID)),i.push(s.UserColumn.createColumn(u++,t.COLUMN_NAME,a.GeoPackageDataType.TEXT,!1)),i.push(s.UserColumn.createColumn(u++,t.COLUMN_DESCRIPTION,a.GeoPackageDataType.TEXT,!1)),i.push(s.UserColumn.createColumn(u++,t.COLUMN_COLOR,a.GeoPackageDataType.TEXT,!1)),i.push(s.UserColumn.createColumn(u++,t.COLUMN_OPACITY,a.GeoPackageDataType.REAL,!1)),i.push(s.UserColumn.createColumn(u++,t.COLUMN_WIDTH,a.GeoPackageDataType.REAL,!1)),i.push(s.UserColumn.createColumn(u++,t.COLUMN_FILL_COLOR,a.GeoPackageDataType.TEXT,!1)),i.push(s.UserColumn.createColumn(7,t.COLUMN_FILL_OPACITY,a.GeoPackageDataType.REAL,!1)),i},t.TABLE_NAME="nga_style",t.COLUMN_ID="id",t.COLUMN_NAME="name",t.COLUMN_DESCRIPTION="description",t.COLUMN_COLOR="color",t.COLUMN_OPACITY="opacity",t.COLUMN_WIDTH="width",t.COLUMN_FILL_COLOR="fill_color",t.COLUMN_FILL_OPACITY="fill_opacity",t})(m.AttributesTable);l.StyleTable=r},1553:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.StyleTableReader=void 0;var m=o(464),h=o(3934),s=(function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return d(r,a),r.prototype.createTable=function(n,t){return new h.StyleTable(n,t)},r})(m.AttributesTableReader);l.StyleTableReader=s},7924:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Styles=void 0;var o=(function(){function c(d){d===void 0&&(d=!1),this.defaultStyle=null,this.styles=new Map,this.tableStyles=d}return c.prototype.setDefault=function(d){d?.setTableStyle(this.tableStyles),this.defaultStyle=d},c.prototype.getDefault=function(){return this.defaultStyle},c.prototype.setStyle=function(d,m){m===void 0&&(m=null),m!==null?d!=null?(d.setTableStyle(this.tableStyles),this.styles.set(m,d)):this.styles.delete(m):this.setDefault(d)},c.prototype.getStyle=function(d){d===void 0&&(d=null);var m=null;return d!==null&&(m=this.styles.get(d)),m!=null&&d!==null||(m=this.getDefault()),m},c.prototype.isEmpty=function(){return this.styles.size===0&&this.defaultStyle===null},c.prototype.getGeometryTypes=function(){return Array.from(this.styles.keys())},c})();l.Styles=o},7719:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.WebPExtension=void 0;var m=o(8140),h=o(624),s=(function(a){function r(n,t){var i=a.call(this,n)||this;return i.tableName=t,i}return d(r,a),r.prototype.getOrCreateExtension=function(){return this.getOrCreate(r.EXTENSION_NAME,this.tableName,"tile_data",r.EXTENSION_WEBP_DEFINITION,h.Extension.READ_WRITE)},r.EXTENSION_NAME="gpkg_webp",r.EXTENSION_WEBP_AUTHOR="gpkg",r.EXTENSION_WEBP_NAME_NO_AUTHOR="webp",r.EXTENSION_WEBP_DEFINITION="http://www.geopackage.org/spec/#extension_webp",r})(m.BaseExtension);l.WebPExtension=s},812:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GeometryColumns=void 0;var c=o(9971),d=(function(){function m(){}return Object.defineProperty(m.prototype,"geometryType",{get:function(){return this.geometry_type_name},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"id",{get:function(){return"".concat(this.table_name," ").concat(this.column_name)},enumerable:!1,configurable:!0}),m.prototype.setContents=function(h){if(h!=null){var s=h.data_type;if(s==null||s!==c.ContentsDataType.FEATURES)throw new Error("The Contents of a GeometryColumns must have a data type of "+c.ContentsDataType.nameFromType(c.ContentsDataType.FEATURES));this.table_name=h.table_name}else this.table_name=null},m.TABLE_NAME="tableName",m.COLUMN_NAME="columnName",m.GEOMETRY_TYPE_NAME="geometryTypeName",m.SRS_ID="srsId",m.Z="z",m.M="m",m})();l.GeometryColumns=d},1968:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}),m=this&&this.__values||function(r){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&r[n],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(l,"__esModule",{value:!0}),l.GeometryColumnsDao=void 0;var h=o(4115),s=o(812),a=(function(r){function n(){var t=r!==null&&r.apply(this,arguments)||this;return t.gpkgTableName="gpkg_geometry_columns",t.idColumns=[n.COLUMN_ID_1,n.COLUMN_ID_2],t.columns=[n.COLUMN_TABLE_NAME,n.COLUMN_COLUMN_NAME,n.COLUMN_GEOMETRY_TYPE_NAME,n.COLUMN_SRS_ID,n.COLUMN_Z,n.COLUMN_M],t}return d(n,r),n.prototype.createObject=function(t){var i=new s.GeometryColumns;return t&&(i.table_name=t.table_name,i.column_name=t.column_name,i.geometry_type_name=t.geometry_type_name,i.srs_id=t.srs_id,i.z=t.z,i.m=t.m),i},n.prototype.queryForTableName=function(t){var i=this.queryForAllEq(n.COLUMN_TABLE_NAME,t);if(i&&i.length)return this.createObject(i[0])},n.prototype.getFeatureTables=function(){var t,i,u=[];try{for(var f=m(this.connection.each("select "+n.COLUMN_TABLE_NAME+" from "+this.gpkgTableName)),p=f.next();!p.done;p=f.next()){var y=p.value;u.push(y[n.COLUMN_TABLE_NAME])}}catch(g){t={error:g}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(t)throw t.error}}return u},n.prototype.getSrs=function(t){return this.geoPackage.spatialReferenceSystemDao.queryForId(t.srs_id)},n.prototype.getContents=function(t){return this.geoPackage.contentsDao.queryForId(t.table_name)},n.prototype.getProjection=function(t){var i=this.getSrs(t);return this.geoPackage.spatialReferenceSystemDao.getProjection(i)},n.COLUMN_TABLE_NAME="table_name",n.COLUMN_COLUMN_NAME="column_name",n.COLUMN_ID_1=n.COLUMN_TABLE_NAME,n.COLUMN_ID_2=n.COLUMN_COLUMN_NAME,n.COLUMN_GEOMETRY_TYPE_NAME="geometry_type_name",n.COLUMN_SRS_ID="srs_id",n.COLUMN_Z="z",n.COLUMN_M="m",n})(h.Dao);l.GeometryColumnsDao=a},961:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureColumn=void 0;var m=o(5865),h=o(7319),s=o(9211),a=o(5071),r=(function(n){function t(i,u,f,p,y,g,b,E,x){var M=n.call(this,i,u,f,p,y,g,b,x)||this;return M.geometryType=E,M.type=M.getTypeName(u,f,E),M}return d(t,n),t.createPrimaryKeyColumn=function(i,u,f){return f===void 0&&(f=a.UserTableDefaults.DEFAULT_AUTOINCREMENT),new t(i,u,h.GeoPackageDataType.INTEGER,void 0,!0,void 0,!0,void 0,f)},t.createGeometryColumn=function(i,u,f,p,y){if(f==null)throw new Error("Geometry Type is required to create column: "+u);return new t(i,u,h.GeoPackageDataType.BLOB,void 0,p,y,!1,f,!1)},t.createColumn=function(i,u,f,p,y,g,b){return p===void 0&&(p=!1),new t(i,u,f,g,p,y,!1,void 0,b)},t.prototype.getTypeName=function(i,u,f){return f!=null?s.GeometryType.nameFromType(f):n.prototype.getTypeName.call(this,i,u)},t.getGeometryTypeFromTableColumn=function(i){var u=null;return i.isDataType(h.GeoPackageDataType.BLOB)&&(u=s.GeometryType.fromName(i.type)),u},t.prototype.copy=function(){return new t(this.index,this.name,this.dataType,this.max,this.notNull,this.defaultValue,this.primaryKey,this.geometryType,this.autoincrement)},t.prototype.isGeometry=function(){return this.geometryType!==null},t.prototype.getGeometryType=function(){return this.geometryType},t})(m.UserColumn);l.FeatureColumn=r},5053:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureColumns=void 0;var m=o(2114),h=o(7319),s=(function(a){function r(n,t,i,u){var f=a.call(this,n,i,u)||this;return f.geometryIndex=-1,f.geometryColumn=t,f.updateColumns(),f}return d(r,a),r.prototype.copy=function(){return new r(this.getTableName(),this.getGeometryColumnName(),this.getColumns(),this.isCustom())},r.prototype.updateColumns=function(){a.prototype.updateColumns.call(this);var n=null;if(this.geometryColumn!==null&&this.geometryColumn!==void 0)n=this.getColumnIndex(this.geometryColumn,!1);else for(var t=0;t<this.getColumns().length;t++){var i=this.getColumns()[t];if(i.isGeometry()){n=i.getIndex(),this.geometryColumn=i.getName();break}}this.isCustom()||this.missingCheck(n,h.GeoPackageDataType.nameFromType(h.GeoPackageDataType.BLOB)),n!=null&&(this.geometryIndex=n)},r.prototype.getGeometryColumnName=function(){return this.geometryColumn},r.prototype.setGeometryColumnName=function(n){this.geometryColumn=n},r.prototype.getGeometryIndex=function(){return this.geometryIndex},r.prototype.setGeometryIndex=function(n){this.geometryIndex=n},r.prototype.hasGeometryColumn=function(){return this.geometryIndex>=0},r.prototype.getGeometryColumn=function(){var n=null;return this.hasGeometryColumn()&&(n=this.getColumnForIndex(this.geometryIndex)),n},r})(m.UserColumns);l.FeatureColumns=s},2071:function(_,l,o){var c,d=o(5108),m=this&&this.__extends||(c=function(S,O){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,T){C.__proto__=T}||function(C,T){for(var R in T)Object.prototype.hasOwnProperty.call(T,R)&&(C[R]=T[R])},c(S,O)},function(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function C(){this.constructor=S}c(S,O),S.prototype=O===null?Object.create(O):(C.prototype=O.prototype,new C)}),h=this&&this.__awaiter||function(S,O,C,T){return new(C||(C=Promise))((function(R,B){function z(ie){try{Y(T.next(ie))}catch($){B($)}}function L(ie){try{Y(T.throw(ie))}catch($){B($)}}function Y(ie){var $;ie.done?R(ie.value):($=ie.value,$ instanceof C?$:new C((function(Q){Q($)}))).then(z,L)}Y((T=T.apply(S,O||[])).next())}))},s=this&&this.__generator||function(S,O){var C,T,R,B,z={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return B={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B;function L(Y){return function(ie){return(function($){if(C)throw new TypeError("Generator is already executing.");for(;B&&(B=0,$[0]&&(z=0)),z;)try{if(C=1,T&&(R=2&$[0]?T.return:$[0]?T.throw||((R=T.return)&&R.call(T),0):T.next)&&!(R=R.call(T,$[1])).done)return R;switch(T=0,R&&($=[2&$[0],R.value]),$[0]){case 0:case 1:R=$;break;case 4:return z.label++,{value:$[1],done:!1};case 5:z.label++,T=$[1],$=[0];continue;case 7:$=z.ops.pop(),z.trys.pop();continue;default:if(!((R=(R=z.trys).length>0&&R[R.length-1])||$[0]!==6&&$[0]!==2)){z=0;continue}if($[0]===3&&(!R||$[1]>R[0]&&$[1]<R[3])){z.label=$[1];break}if($[0]===6&&z.label<R[1]){z.label=R[1],R=$;break}if(R&&z.label<R[2]){z.label=R[2],z.ops.push($);break}R[2]&&z.ops.pop(),z.trys.pop();continue}$=O.call(S,z)}catch(Q){$=[6,Q],T=0}finally{C=R=0}if(5&$[0])throw $[1];return{value:$[0]?$[1]:void 0,done:!0}})([Y,ie])}}},a=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureDao=void 0;var r=a(o(6102)),n=a(o(3663)),t=a(o(4170)),i=a(o(5184)),u=a(o(8147)),f=o(5626),p=o(4668),y=o(4941),g=o(234),b=o(7319),E=o(2527),x=o(1375),M=(function(S){function O(C,T,R,B){var z=S.call(this,C,T)||this;z.geometryColumns=R,z.metadataDao=B,z.dataColumnsDao=new y.DataColumnsDao(C),z.featureTableIndex=new f.FeatureTableIndex(C,z);var L=C.geometryColumnsDao;if(!L.getContents(R))throw new Error("Geometry Columns "+R.id+" has null Contents");if(!L.getSrs(R))throw new Error("Geometry Columns "+R.id+" has null Spatial Reference System");return z.projection=L.getProjection(R),z}return m(O,S),O.prototype.createObject=function(C){return C?this.getRow(C):this.newRow()},O.prototype.getRow=function(C){return S.prototype.getRow.call(this,C)},O.prototype.getContents=function(){return this.geoPackage.geometryColumnsDao.getContents(this.geometryColumns)},O.prototype.getFeatureTable=function(){return this.table},Object.defineProperty(O.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),O.prototype.newRow=function(C,T){return new g.FeatureRow(this.getFeatureTable(),C,T)},O.prototype.getGeometryColumnName=function(){return this.geometryColumns.column_name},Object.defineProperty(O.prototype,"geometryType",{get:function(){return this.geometryColumns.geometryType},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"srs",{get:function(){return this.geoPackage.geometryColumnsDao.getSrs(this.geometryColumns)},enumerable:!1,configurable:!0}),O.prototype.isIndexed=function(){return this.featureTableIndex.isIndexed()},O.prototype.index=function(C){return h(this,void 0,void 0,(function(){return s(this,(function(T){return[2,this.featureTableIndex.index(C)]}))}))},O.prototype.countWebMercatorBoundingBox=function(C){return this.countInBoundingBox(C,x.ProjectionConstants.EPSG_3857)},O.prototype.countInBoundingBox=function(C,T){return this.featureTableIndex.countWithBoundingBox(C,T)},O.prototype.fastQueryWebMercatorBoundingBox=function(C){var T,R=this,B=this.featureTableIndex.queryWithBoundingBox(C,x.ProjectionConstants.EPSG_3857);return(T={})[Symbol.iterator]=function(){return this},T.next=function(){var z=B.next();return z.done?{value:void 0,done:!0}:{value:R.getRow(z.value),done:!1}},T},O.prototype.queryIndexedFeaturesWithWebMercatorBoundingBox=function(C){var T,R=this.srs,B=this.projection,z=this.featureTableIndex.queryWithBoundingBox(C,x.ProjectionConstants.EPSG_3857),L=this.getRow.bind(this),Y=C.projectBoundingBox(x.ProjectionConstants.EPSG_3857,x.ProjectionConstants.EPSG_4326);return(T={})[Symbol.iterator]=function(){return this},T.next=function(){var ie=z.next();if(!ie.done)for(var $=void 0,Q=void 0;!ie.done&&!Q;){$=L(ie.value);try{var ce=O.reprojectFeature($,R,B);Q=O.verifyFeature(ce,Y)}catch(be){d.log("Error parsing Geometry",be)}if(Q)return Q.properties=$.values,{value:$,done:!1};ie=z.next()}return{done:!0,value:void 0}},T},O.prototype.fastQueryBoundingBox=function(C,T){var R,B=this.featureTableIndex.queryWithBoundingBox(C,T),z=this.getRow.bind(this);return(R={})[Symbol.iterator]=function(){return this},R.next=function(){var L=B.next();return L.done?{done:!0,value:void 0}:{value:z(L.value),done:!1}},R},O.prototype.queryIndexedFeaturesWithBoundingBox=function(C){var T,R=this.srs,B=this.projection,z=this.featureTableIndex.queryWithBoundingBox(C,B),L=this.getRow.bind(this),Y=C.projectBoundingBox(B,this.projection);return(T={})[Symbol.iterator]=function(){return this},T.next=function(){var ie=z.next();if(!ie.done)for(var $=void 0,Q=void 0;!ie.done&&!Q;){$=L(ie.value);try{var ce=O.reprojectFeature($,R,B);Q=O.verifyFeature(ce,Y)}catch(be){d.log("Error parsing Geometry",be)}if(Q)return Q.properties=$.values,{value:$,done:!1};ie=z.next()}return{done:!0,value:void 0}},T},O.prototype.queryForGeoJSONIndexedFeaturesWithBoundingBox=function(C,T){var R,B=this;T===void 0&&(T=!1);var z,L=[],Y={},ie=this.srs,$=this.projection;return this.table.getUserColumns().getColumns().forEach((function(Q){var ce=B.dataColumnsDao.getDataColumns(B.table.getTableName(),Q.name);L.push({index:Q.index,name:Q.name,max:Q.max,min:Q.min,notNull:Q.notNull,primaryKey:Q.primaryKey,dataType:Q.dataType?b.GeoPackageDataType.nameFromType(Q.dataType):"",displayName:ce&&ce.name?ce.name:Q.name,dataColumn:ce}),Y[Q.name]=L[L.length-1]})),z=C?this.featureTableIndex.queryWithBoundingBox(C,x.ProjectionConstants.EPSG_4326)[Symbol.iterator]():this.queryForEach(),(R={srs:ie,featureDao:this})[Symbol.iterator]=function(){return this},R.next=function(){var Q=z.next();if(!Q.done)for(var ce=void 0,be=void 0;!Q.done&&!be;){ce=B.getRow(Q.value);try{be=O.reprojectFeature(ce,ie,$),!T&&C&&(be=O.verifyFeature(be,C))}catch(Xe){d.log("Error parsing Geometry",Xe)}if(be){var Ae={id:void 0,type:"Feature",properties:{},geometry:be};for(var we in ce.values)Object.prototype.hasOwnProperty.call(ce.values,we)&&we!==ce.geometryColumn.name&&(we.toLowerCase()==="_feature_id"?Ae.id=ce.values[we]:we.toLowerCase()==="id"?Ae.properties[we]=ce.values[we]:we.toLowerCase()==="_properties_id"?Ae.properties[we.substring(12)]=ce.values[we]:Ae.properties[Y[we].displayName]=ce.values[we]);return Ae.id=Ae.id||ce.id,{value:Ae,done:!1}}Q=z.next()}return{done:!0,value:void 0}},R},O.prototype.getBoundingBox=function(){var C=this.getContents();return new E.BoundingBox(C.min_x,C.max_x,C.min_y,C.max_y)},O.reprojectFeature=function(C,T,R){var B=C.geometry.toGeoJSON();return T.organization===x.ProjectionConstants.EPSG&&T.organization_coordsys_id===x.ProjectionConstants.EPSG_CODE_4326||(B=r.default.reproject(B,R,x.ProjectionConstants.EPSG_4326)),B},O.verifyFeature=function(C,T){try{return C.type==="Point"?C:C.type==="LineString"?O.verifyLineString(C,T):C.type==="Polygon"?O.verifyPolygon(C,T):C.type==="MultiPoint"?O.verifyMultiPoint(C,T):C.type==="MultiLineString"?O.verifyLineString(C,T):C.type==="MultiPolygon"?O.verifyPolygon(C,T):C.type==="GeometryCollection"?O.verifyGeometryCollection(C,T):void 0}catch{return}},O.verifyMultiPoint=function(C,T){return O.multiPointIntersects(C,T.toGeoJSON().geometry)||(0,i.default)(C,T.toGeoJSON().geometry)?C:void 0},O.verifyLineString=function(C,T){return(0,n.default)(C,T.toGeoJSON().geometry).features.length||(0,i.default)(C,T.toGeoJSON().geometry)?C:void 0},O.verifyPolygon=function(C,T){return(0,t.default)(C,T.toGeoJSON().geometry)||(0,i.default)(C,T.toGeoJSON().geometry)?C:void 0},O.multiPointIntersects=function(C,T){for(var R=!1,B=0;B<C.coordinates.length&&!R;B++){var z=C.coordinates[B];R=(0,u.default)(z,T)}return R},O.geometryCollectionIntersects=function(C,T){for(var R=!1,B=0;B<C.geometries.length&&!R;B++){var z=C.geometries[B];switch(z.type){case"Point":R=(0,u.default)(z,T);break;case"LineString":case"MultiLineString":R=(0,n.default)(z,T).features.length>0;break;case"Polygon":case"MultiPolygon":R=(0,t.default)(z,T)!==null;break;case"MultiPoint":R=O.multiPointIntersects(z,T);break;case"GeometryCollection":R=O.geometryCollectionIntersects(z,T)}}return R},O.verifyGeometryCollection=function(C,T){return O.geometryCollectionIntersects(C,T.toGeoJSON().geometry)||(0,i.default)(C,T.toGeoJSON().geometry)?C:void 0},O.readTable=function(C,T){return C.getFeatureDao(T)},O})(p.UserDao);l.FeatureDao=M},234:function(_,l,o){var c,d=o(3085).lW,m=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureRow=void 0;var h=o(2224),s=o(961),a=o(857),r=(function(n){function t(i,u,f){var p=n.call(this,i,u,f)||this;return p.featureTable=i,p}return m(t,n),Object.defineProperty(t.prototype,"geometryColumnIndex",{get:function(){return this.featureTable.getGeometryColumnIndex()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geometryColumn",{get:function(){return this.featureTable.getGeometryColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geometry",{get:function(){return this.getValueWithIndex(this.featureTable.getGeometryColumnIndex())},set:function(i){this.setValueWithIndex(this.featureTable.getGeometryColumnIndex(),i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geometryType",{get:function(){var i=null,u=this.getValueWithIndex(this.featureTable.getGeometryColumnIndex());return u!==null&&(i=u.toGeoJSON().type),i},enumerable:!1,configurable:!0}),t.prototype.toObjectValue=function(i,u){var f=this.getColumnWithIndex(i);return f instanceof s.FeatureColumn&&f.isGeometry()&&u&&u instanceof d||u instanceof Uint8Array?new a.GeometryData(u):n.prototype.toObjectValue.call(this,i,u)},t.prototype.getValueWithColumnName=function(i){var u=this.values[i],f=this.getColumnWithColumnName(i);return u!=null&&f instanceof s.FeatureColumn&&f.isGeometry()&&u.toData?u.toData():n.prototype.getValueWithColumnName.call(this,i)},t})(h.UserRow);l.FeatureRow=r},8412:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureTable=void 0;var m=o(8018),h=o(5053),s=o(9971),a=(function(r){function n(t,i,u){return r.call(this,new h.FeatureColumns(t,i,u,!1))||this}return d(n,r),n.prototype.copy=function(){return new n(this.getTableName(),this.getGeometryColumnName(),this.getUserColumns().getColumns())},n.prototype.getGeometryColumnIndex=function(){return this.getUserColumns().getGeometryIndex()},n.prototype.getUserColumns=function(){return r.prototype.getUserColumns.call(this)},n.prototype.getGeometryColumn=function(){return this.getUserColumns().getGeometryColumn()},n.prototype.getGeometryColumnName=function(){return this.getUserColumns().getGeometryColumnName()},n.prototype.getIdAndGeometryColumnNames=function(){return[this.getPkColumnName(),this.getGeometryColumnName()]},n.prototype.validateContents=function(t){var i=t.data_type;if(i==null||i!==s.ContentsDataType.FEATURES)throw new Error("The Contents of a FeatureTable must have a data type of "+s.ContentsDataType.FEATURES)},n})(m.UserTable);l.FeatureTable=a},4896:function(_,l,o){var c,d=this&&this.__extends||(c=function(t,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(u[p]=f[p])},c(t,i)},function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function u(){this.constructor=t}c(t,i),t.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)});Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureTableReader=void 0;var m=o(1968),h=o(8412),s=o(4880),a=o(961),r=o(812),n=(function(t){function i(u){var f=t.call(this,u instanceof r.GeometryColumns?u.table_name:u)||this;return u instanceof r.GeometryColumns&&(f.columnName=u.column_name),f}return d(i,t),i.prototype.readFeatureTable=function(u){if(this.columnName===null||this.columnName===void 0){var f=new m.GeometryColumnsDao(u);this.columnName=f.queryForTableName(this.table_name).column_name}return this.readTable(u.database)},i.prototype.createTable=function(u,f){return new h.FeatureTable(u,this.columnName,f)},i.prototype.createColumn=function(u){return new a.FeatureColumn(u.index,u.name,u.dataType,u.max,u.notNull,u.defaultValue,u.primaryKey,a.FeatureColumn.getGeometryTypeFromTableColumn(u),u.autoincrement)},i})(s.UserTableReader);l.FeatureTableReader=n},9211:(_,l)=>{var o;Object.defineProperty(l,"__esModule",{value:!0}),l.GeometryType=void 0,(o=l.GeometryType||(l.GeometryType={}))[o.GEOMETRY=0]="GEOMETRY",o[o.POINT=1]="POINT",o[o.LINESTRING=2]="LINESTRING",o[o.POLYGON=3]="POLYGON",o[o.MULTIPOINT=4]="MULTIPOINT",o[o.MULTILINESTRING=5]="MULTILINESTRING",o[o.MULTIPOLYGON=6]="MULTIPOLYGON",o[o.GEOMETRYCOLLECTION=7]="GEOMETRYCOLLECTION",o[o.CIRCULARSTRING=8]="CIRCULARSTRING",o[o.COMPOUNDCURVE=9]="COMPOUNDCURVE",o[o.CURVEPOLYGON=10]="CURVEPOLYGON",o[o.MULTICURVE=11]="MULTICURVE",o[o.MULTISURFACE=12]="MULTISURFACE",o[o.CURVE=13]="CURVE",o[o.SURFACE=14]="SURFACE",o[o.POLYHEDRALSURFACE=15]="POLYHEDRALSURFACE",o[o.TIN=16]="TIN",o[o.TRIANGLE=17]="TRIANGLE",(function(c){c.nameFromType=function(d){var m=null;return d!=null&&(m=c[d]),m},c.fromName=function(d){return c[d]}})(l.GeometryType||(l.GeometryType={}))},4325:function(_,l,o){var c=this&&this.__createBinding||(Object.create?function(Ge,pe,Te,Me){Me===void 0&&(Me=Te);var ye=Object.getOwnPropertyDescriptor(pe,Te);ye&&!("get"in ye?!pe.__esModule:ye.writable||ye.configurable)||(ye={enumerable:!0,get:function(){return pe[Te]}}),Object.defineProperty(Ge,Me,ye)}:function(Ge,pe,Te,Me){Me===void 0&&(Me=Te),Ge[Me]=pe[Te]}),d=this&&this.__setModuleDefault||(Object.create?function(Ge,pe){Object.defineProperty(Ge,"default",{enumerable:!0,value:pe})}:function(Ge,pe){Ge.default=pe}),m=this&&this.__importStar||function(Ge){if(Ge&&Ge.__esModule)return Ge;var pe={};if(Ge!=null)for(var Te in Ge)Te!=="default"&&Object.prototype.hasOwnProperty.call(Ge,Te)&&c(pe,Ge,Te);return d(pe,Ge),pe},h=this&&this.__awaiter||function(Ge,pe,Te,Me){return new(Te||(Te=Promise))((function(ye,Fe){function qe(nt){try{ft(Me.next(nt))}catch(ot){Fe(ot)}}function je(nt){try{ft(Me.throw(nt))}catch(ot){Fe(ot)}}function ft(nt){var ot;nt.done?ye(nt.value):(ot=nt.value,ot instanceof Te?ot:new Te((function(_t){_t(ot)}))).then(qe,je)}ft((Me=Me.apply(Ge,pe||[])).next())}))},s=this&&this.__generator||function(Ge,pe){var Te,Me,ye,Fe,qe={label:0,sent:function(){if(1&ye[0])throw ye[1];return ye[1]},trys:[],ops:[]};return Fe={next:je(0),throw:je(1),return:je(2)},typeof Symbol=="function"&&(Fe[Symbol.iterator]=function(){return this}),Fe;function je(ft){return function(nt){return(function(ot){if(Te)throw new TypeError("Generator is already executing.");for(;Fe&&(Fe=0,ot[0]&&(qe=0)),qe;)try{if(Te=1,Me&&(ye=2&ot[0]?Me.return:ot[0]?Me.throw||((ye=Me.return)&&ye.call(Me),0):Me.next)&&!(ye=ye.call(Me,ot[1])).done)return ye;switch(Me=0,ye&&(ot=[2&ot[0],ye.value]),ot[0]){case 0:case 1:ye=ot;break;case 4:return qe.label++,{value:ot[1],done:!1};case 5:qe.label++,Me=ot[1],ot=[0];continue;case 7:ot=qe.ops.pop(),qe.trys.pop();continue;default:if(!((ye=(ye=qe.trys).length>0&&ye[ye.length-1])||ot[0]!==6&&ot[0]!==2)){qe=0;continue}if(ot[0]===3&&(!ye||ot[1]>ye[0]&&ot[1]<ye[3])){qe.label=ot[1];break}if(ot[0]===6&&qe.label<ye[1]){qe.label=ye[1],ye=ot;break}if(ye&&qe.label<ye[2]){qe.label=ye[2],qe.ops.push(ot);break}ye[2]&&qe.ops.pop(),qe.trys.pop();continue}ot=pe.call(Ge,qe)}catch(_t){ot=[6,_t],Me=0}finally{Te=ye=0}if(5&ot[0])throw ot[1];return{value:ot[0]?ot[1]:void 0,done:!0}})([ft,nt])}}},a=this&&this.__values||function(Ge){var pe=typeof Symbol=="function"&&Symbol.iterator,Te=pe&&Ge[pe],Me=0;if(Te)return Te.call(Ge);if(Ge&&typeof Ge.length=="number")return{next:function(){return Ge&&Me>=Ge.length&&(Ge=void 0),{value:Ge&&Ge[Me++],done:!Ge}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__importDefault||function(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}};Object.defineProperty(l,"__esModule",{value:!0}),l.GeoPackage=void 0;var n=r(o(1011)),t=r(o(6102)),i=r(o(3892)),u=r(o(7383)),f=r(o(8147)),p=r(o(1013)),y=m(o(4102)),g=r(o(4472)),b=o(857),E=o(5306),x=o(1832),M=o(8479),S=o(1314),O=o(7523),C=o(5965),T=o(1968),R=o(2071),B=o(4896),z=o(6638),L=o(5925),Y=o(3506),ie=o(4941),$=o(7175),Q=o(663),ce=o(2056),be=o(5698),Ae=o(9581),we=o(9095),Xe=o(8904),Ve=o(8008),st=o(1394),tt=o(7092),he=o(7960),de=o(3931),ze=o(9631),P=o(464),A=o(8412),D=o(8138),W=o(8704),ae=o(5897),le=o(7319),Ne=o(8116),De=o(812),Ye=o(1459),ht=o(1938),F=o(3684),V=o(2527),ne=o(5899),Se=o(5865),Ie=o(8133),ke=o(4275),$e=o(961),xt=o(6366),At=o(8483),Bt=o(4599),Rt=o(297),Gt=o(731),_n=o(4301),fn=o(2777),ln=o(8375),rt=o(8314),dt=o(9406),Qe=o(9971),pt=o(9211),mt=o(7686),Nt=o(5604),lt=o(1375),on=o(8877),bn=(function(){function Ge(pe,Te,Me){this.name=pe,this.path=Te,this.connection=Me,this.tableCreator=new Ye.TableCreator(this),this.loadSpatialReferenceSystemsIntoProj4()}return Ge.prototype.close=function(){this.connection.close()},Object.defineProperty(Ge.prototype,"database",{get:function(){return this.connection},enumerable:!1,configurable:!0}),Ge.prototype.export=function(){return h(this,void 0,void 0,(function(){return s(this,(function(pe){return[2,this.connection.export()]}))}))},Ge.prototype.loadSpatialReferenceSystemsIntoProj4=function(){this.spatialReferenceSystemDao.getAllSpatialReferenceSystems().forEach((function(pe){try{pe.srs_id>0&&(pe.organization!==lt.ProjectionConstants.EPSG||pe.organization_coordsys_id!==lt.ProjectionConstants.EPSG_CODE_4326&&pe.organization_coordsys_id!==lt.ProjectionConstants.EPSG_CODE_3857)&&Nt.Projection.loadProjection([pe.organization,pe.organization_coordsys_id].join(":"),pe.definition)}catch{}}))},Ge.prototype.validate=function(){var pe=[];return pe.concat(ke.GeoPackageValidate.validateMinimumTables(this))},Object.defineProperty(Ge.prototype,"spatialReferenceSystemDao",{get:function(){return this._spatialReferenceSystemDao||(this._spatialReferenceSystemDao=new C.SpatialReferenceSystemDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"contentsDao",{get:function(){return this._contentsDao||(this._contentsDao=new z.ContentsDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"tileMatrixSetDao",{get:function(){return this._tileMatrixSetDao||(this._tileMatrixSetDao=new L.TileMatrixSetDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"tileMatrixDao",{get:function(){return this._tileMatrixDao||(this._tileMatrixDao=new Y.TileMatrixDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"dataColumnsDao",{get:function(){return this._dataColumnsDao||(this._dataColumnsDao=new ie.DataColumnsDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"extensionDao",{get:function(){return this._extensionDao||(this._extensionDao=new be.ExtensionDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"tableIndexDao",{get:function(){return this._tableIndexDao||(this._tableIndexDao=new Ae.TableIndexDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"geometryColumnsDao",{get:function(){return this._geometryColumnsDao||(this._geometryColumnsDao=new T.GeometryColumnsDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"dataColumnConstraintsDao",{get:function(){return this._dataColumnConstraintsDao||(this._dataColumnConstraintsDao=new $.DataColumnConstraintsDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"metadataReferenceDao",{get:function(){return this._metadataReferenceDao||(this._metadataReferenceDao=new ce.MetadataReferenceDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"metadataDao",{get:function(){return this._metadataDao||(this._metadataDao=new Q.MetadataDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"extendedRelationDao",{get:function(){return this._extendedRelationDao||(this._extendedRelationDao=new Xe.ExtendedRelationDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"contentsIdDao",{get:function(){return this._contentsIdDao||(this._contentsIdDao=new tt.ContentsIdDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"tileScalingDao",{get:function(){return this._tileScalingDao||(this._tileScalingDao=new he.TileScalingDao(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"contentsIdExtension",{get:function(){return this._contentsIdExtension||(this._contentsIdExtension=new S.ContentsIdExtension(this))},enumerable:!1,configurable:!0}),Object.defineProperty(Ge.prototype,"featureStyleExtension",{get:function(){return this._featureStyleExtension||(this._featureStyleExtension=new M.FeatureStyleExtension(this))},enumerable:!1,configurable:!0}),Ge.prototype.getTileScalingExtension=function(pe){return new O.TileScalingExtension(this,pe)},Ge.prototype.getGeometryIndexDao=function(pe){return new we.GeometryIndexDao(this,pe)},Object.defineProperty(Ge.prototype,"relatedTablesExtension",{get:function(){return this._relatedTablesExtension||(this._relatedTablesExtension=new x.RelatedTablesExtension(this))},enumerable:!1,configurable:!0}),Ge.prototype.getSrs=function(pe){return this.spatialReferenceSystemDao.queryForId(pe)},Ge.prototype.createRequiredTables=function(){return this.tableCreator.createRequired(),this},Ge.prototype.createSupportedExtensions=function(){return new E.CrsWktExtension(this).getOrCreateExtension(),new Ne.SchemaExtension(this).getOrCreateExtension(),this},Ge.prototype.getTileDao=function(pe){if(pe instanceof ae.Contents)pe=this.contentsDao.getTileMatrixSet(pe);else if(!(pe instanceof ne.TileMatrixSet)){var Te=this.tileMatrixSetDao,Me=Te.queryForAllEq(L.TileMatrixSetDao.COLUMN_TABLE_NAME,pe);if(Me.length>1)throw new Error("Unexpected state. More than one Tile Matrix Set matched for table name: "+pe+", count: "+Me.length);if(Me.length===0)throw new Error("No Tile Matrix found for table name: "+pe);pe=Te.createObject(Me[0])}if(!pe)throw new Error("Non null TileMatrixSet is required to create Tile DAO");var ye=[],Fe=this.tileMatrixDao;Fe.queryForAllEq(Y.TileMatrixDao.COLUMN_TABLE_NAME,pe.table_name,null,null,Y.TileMatrixDao.COLUMN_ZOOM_LEVEL+" ASC, "+Y.TileMatrixDao.COLUMN_PIXEL_X_SIZE+" DESC, "+Y.TileMatrixDao.COLUMN_PIXEL_Y_SIZE+" DESC").forEach((function(je){var ft=Fe.createObject(je);Fe.hasTiles(ft)&&ye.push(ft)}));var qe=new ze.TileTableReader(pe).readTileTable(this);return new st.TileDao(this,qe,pe,ye)},Ge.prototype.getTables=function(pe){return pe===void 0&&(pe=!1),pe?{features:this.contentsDao.getContentsForTableType(Qe.ContentsDataType.FEATURES),tiles:this.contentsDao.getContentsForTableType(Qe.ContentsDataType.TILES),attributes:this.contentsDao.getContentsForTableType(Qe.ContentsDataType.ATTRIBUTES)}:{features:this.getFeatureTables(),tiles:this.getTileTables(),attributes:this.getAttributesTables()}},Ge.prototype.getAttributesTables=function(){return this.contentsDao.getTables(Qe.ContentsDataType.ATTRIBUTES)},Ge.prototype.hasAttributeTable=function(pe){var Te=this.getAttributesTables();return Te&&Te.indexOf(pe)!=-1},Ge.prototype.getTileTables=function(){var pe=this.contentsDao;return pe.isTableExists()?pe.getTables(Qe.ContentsDataType.TILES):[]},Ge.prototype.hasTileTable=function(pe){var Te=this.getTileTables();return Te&&Te.indexOf(pe)!==-1},Ge.prototype.hasFeatureTable=function(pe){var Te=this.getFeatureTables();return Te&&Te.indexOf(pe)!=-1},Ge.prototype.getFeatureTables=function(){var pe=this.contentsDao;return pe.isTableExists()?pe.getTables(Qe.ContentsDataType.FEATURES):[]},Ge.prototype.isTable=function(pe){return!!this.connection.tableExists(pe)},Ge.prototype.isTableType=function(pe,Te){return pe===this.getTableType(Te)},Ge.prototype.getTableType=function(pe){var Te=this.getTableContents(pe);if(Te)return Te.data_type},Ge.prototype.getTableContents=function(pe){return this.contentsDao.queryForId(pe)},Ge.prototype.dropTable=function(pe){return this.connection.dropTable(pe)},Ge.prototype.deleteTable=function(pe){dt.GeoPackageExtensions.deleteTableExtensions(this,pe),this.contentsDao.deleteTable(pe)},Ge.prototype.deleteTableQuietly=function(pe){try{this.deleteTable(pe)}catch{}},Ge.prototype.getTableCreator=function(){return this.tableCreator},Ge.prototype.index=function(){return h(this,void 0,void 0,(function(){var pe,Te;return s(this,(function(Me){switch(Me.label){case 0:pe=this.getFeatureTables(),Te=0,Me.label=1;case 1:return Te<pe.length?[4,this.indexFeatureTable(pe[Te])]:[3,4];case 2:if(!Me.sent())throw new Error("Unable to index table "+pe[Te]);Me.label=3;case 3:return Te++,[3,1];case 4:return[2,!0]}}))}))},Ge.prototype.indexFeatureTable=function(pe,Te){return h(this,void 0,void 0,(function(){var Me,ye;return s(this,(function(Fe){switch(Fe.label){case 0:return Me=this.getFeatureDao(pe),(ye=Me.featureTableIndex).isIndexed()?[2,!0]:[4,ye.index(Te)];case 1:return[2,Fe.sent()]}}))}))},Ge.prototype.getFeatureDao=function(pe){if(pe instanceof ae.Contents?pe=this.contentsDao.getGeometryColumns(pe):pe instanceof De.GeometryColumns||(pe=this.geometryColumnsDao.queryForTableName(pe)),!pe)throw new Error("Non null Geometry Columns is required to create Feature DAO");var Te=new B.FeatureTableReader(pe).readFeatureTable(this);return new R.FeatureDao(this,Te,pe,this.metadataDao)},Ge.prototype.queryForGeoJSONFeaturesInTable=function(pe,Te){var Me,ye,Fe=[],qe=this.getFeatureDao(pe).queryForGeoJSONIndexedFeaturesWithBoundingBox(Te);try{for(var je=a(qe),ft=je.next();!ft.done;ft=je.next()){var nt=ft.value;Fe.push(nt)}}catch(ot){Me={error:ot}}finally{try{ft&&!ft.done&&(ye=je.return)&&ye.call(je)}finally{if(Me)throw Me.error}}return Fe},Ge.prototype.createGeometryColumnsTable=function(){return!!this.geometryColumnsDao.isTableExists()||this.tableCreator.createGeometryColumns()},Ge.prototype.getAttributeDao=function(pe){if(pe instanceof ae.Contents||(pe=this.contentsDao.queryForId(pe)),!pe)throw new Error("Non null Contents is required to create an Attributes DAO");var Te=new P.AttributesTableReader(pe.table_name).readTable(this.connection);return Te.setContents(pe),new Ve.AttributesDao(this,Te)},Ge.prototype.createAttributesTableFromProperties=function(pe,Te){var Me=[],ye=0,Fe=[];Me.push(Se.UserColumn.createPrimaryKeyColumn(ye++,"id"));for(var qe=0;qe<Te.length;qe++){var je=Te[qe];if(Me.push(Se.UserColumn.createColumn(ye++,je.name,le.GeoPackageDataType.fromName(je.dataType))),je.dataColumn){var ft=new Ie.DataColumns;ft.table_name=je.dataColumn.table_name,ft.column_name=je.dataColumn.column_name,ft.name=je.dataColumn.name,ft.title=je.dataColumn.title,ft.description=je.dataColumn.description,ft.mime_type=je.dataColumn.mime_type,ft.constraint_name=je.dataColumn.constraint_name,Fe.push(ft)}}return this.createAttributesTable(pe,Me,new mt.Constraints,Fe)},Ge.prototype.createAttributesTable=function(pe,Te,Me,ye){var Fe=[];Te.findIndex((function(nt){return nt.isPrimaryKey()}))===-1&&Fe.push(ln.AttributesColumn.createPrimaryKeyColumn(ln.AttributesColumn.NO_INDEX,"id")),Te.forEach((function(nt){Fe.push(nt.copy())}));var qe=new de.AttributesTable(pe,Fe);Me!=null&&qe.addConstraints(Me),this.tableCreator.createUserTable(qe);try{var je=new ae.Contents;if(je.table_name=pe,je.data_type=Qe.ContentsDataType.ATTRIBUTES,je.identifier=pe,je.last_change=new Date().toISOString(),this.contentsDao.create(je),qe.setContents(je),ye&&ye.length){this.createDataColumns();var ft=this.dataColumnsDao;ye.forEach((function(nt){ft.create(nt)}))}}catch{throw this.deleteTableQuietly(pe),new Error("Failed to create table and metadata: "+pe)}return!0},Ge.prototype.createMediaTable=function(pe,Te){var Me=this.relatedTablesExtension,ye=[],Fe=xt.MediaTable.numRequiredColumns();if(Te)for(var qe=0;qe<Te.length;qe++){var je=Te[qe];ye.push(Se.UserColumn.createColumn(Fe++,je.name,le.GeoPackageDataType.fromName(je.dataType),je.notNull,je.defaultValue,je.max))}var ft=xt.MediaTable.create(pe,ye);return Me.createRelatedTable(ft),Me.getMediaDao(ft)},Ge.prototype.linkMedia=function(pe,Te,Me,ye){return this.linkRelatedRows(pe,Te,Me,ye,At.RelationType.MEDIA)},Ge.prototype.linkRelatedRows=function(pe,Te,Me,ye,Fe,qe,je){var ft,nt=this.relatedTablesExtension,ot=nt.getRelationshipBuilder().setBaseTableName(pe).setRelatedTableName(Me).setRelationType(Fe);qe&&typeof qe!="string"?(ot.setUserMappingTable(qe),ft=qe.getTableName()):(qe=qe||pe+"_"+Me,ot.setMappingTableName(qe),ft=qe),nt.addRelationship(ot);var _t=nt.getMappingDao(ft),Ft=_t.newRow();for(var Ut in Ft.baseId=Te,Ft.relatedId=ye,je)Ft.setValueWithColumnName(Ut,je[Ut]);return _t.create(Ft)},Ge.prototype.getLinkedMedia=function(pe,Te){for(var Me=this.getRelatedRows(pe,Te),ye=[],Fe=0;Fe<Me.length;Fe++){var qe=Me[Fe];if(qe.relation_name===At.RelationType.MEDIA.name)for(var je=0;je<qe.mappingRows.length;je++){var ft=qe.mappingRows[je].row;ye.push(ft)}}return ye},Ge.prototype.addGeoJSONFeaturesToGeoPackage=function(pe,Te,Me,ye,Fe){return Me===void 0&&(Me=!1),ye===void 0&&(ye=1e3),h(this,void 0,void 0,(function(){var qe,je,ft,nt,ot,_t,Ft,Ut,Vt,$t,an=this;return s(this,(function(hn){return qe=0,je=this.getFeatureDao(Te),ft=je.srs,ot=je.newRow(),_t=n.default.Geometry.parse("POINT EMPTY"),Ft=!(ft.organization===lt.ProjectionConstants.EPSG&&ft.organization_coordsys_id===lt.ProjectionConstants.EPSG_CODE_4326),Ut=function(xn){setTimeout(Fe||function(){},0,xn)},Vt=on.SqliteQueryBuilder.buildInsert("'"+je.gpkgTableName+"'",ot),$t=function(xn,Qt,Jt){return h(an,void 0,void 0,(function(){return s(this,(function(nn){return xn<Qt?(je.connection.transaction((function(){var en,Zt,yn=je.connection.adapter.prepareStatement(Vt);Me&&(Zt=(en=je.featureTableIndex).tableIndex);for(var En=xn;En<Qt;En++){var Sn=pe[En];ot=je.newRow(),(nt=new b.GeometryData).setSrsId(ft.srs_id),Ft&&(Sn=t.default.reproject(Sn,lt.ProjectionConstants.EPSG_4326,je.projection));var zn=typeof Sn.geometry=="string"?JSON.parse(Sn.geometry):Sn.geometry;for(var gn in nt.setGeometry(zn?n.default.Geometry.parseGeoJSON(zn):_t),ot.geometry=nt,Sn.properties)Object.prototype.hasOwnProperty.call(Sn.properties,gn)&&ot.setValueWithColumnName(gn,Sn.properties[gn]);var Kn=je.connection.adapter.bindAndInsert(yn,on.SqliteQueryBuilder.buildUpdateOrInsertObject(ot));qe++,Zt!=null&&en.indexRow(Zt,Kn,nt)}Zt!=null&&en.updateLastIndexed(Zt),je.connection.adapter.closeStatement(yn)})),Ut(Qt),setTimeout((function(){$t(Qt,Math.min(Qt+ye,pe.length),Jt)}))):Jt(qe),[2]}))}))},[2,new Promise((function(xn){setTimeout((function(){$t(0,Math.min(ye,pe.length),xn)}))}))]}))}))},Ge.prototype.addGeoJSONFeatureToGeoPackage=function(pe,Te,Me){Me===void 0&&(Me=!1);var ye=this.getFeatureDao(Te);return this.addGeoJSONFeatureToGeoPackageWithFeatureDaoAndSrs(pe,ye,ye.srs,Me)},Ge.prototype.addGeoJSONFeatureToGeoPackageWithFeatureDaoAndSrs=function(pe,Te,Me,ye){ye===void 0&&(ye=!1);var Fe=Te.newRow(),qe=new b.GeometryData;qe.setSrsId(Me.srs_id),Me.organization===lt.ProjectionConstants.EPSG&&Me.organization_coordsys_id===lt.ProjectionConstants.EPSG_CODE_4326||(pe=t.default.reproject(pe,lt.ProjectionConstants.EPSG_4326,Te.projection));var je=typeof pe.geometry=="string"?JSON.parse(pe.geometry):pe.geometry;if(je!==null){var ft=n.default.Geometry.parseGeoJSON(je);qe.setGeometry(ft)}else{var nt=n.default.Geometry.parse("POINT EMPTY");qe.setGeometry(nt)}for(var ot in Fe.geometry=qe,pe.properties)Object.prototype.hasOwnProperty.call(pe.properties,ot)&&Fe.setValueWithColumnName(ot,pe.properties[ot]);var _t=Te.create(Fe);if(ye){var Ft=Te.featureTableIndex,Ut=Ft.tableIndex;if(!Ut)return _t;Ft.indexRow(Ut,_t,qe),Ft.updateLastIndexed(Ut)}return _t},Ge.prototype.addAttributeRow=function(pe,Te){var Me=this.getAttributeDao(pe),ye=Me.getRow(Te);return Me.create(ye)},Ge.prototype.createSimpleAttributesTable=function(pe,Te){var Me=this.relatedTablesExtension,ye=[],Fe=Bt.SimpleAttributesTable.numRequiredColumns();if(Te)for(var qe=0;qe<Te.length;qe++){var je=Te[qe];ye.push(Se.UserColumn.createColumn(Fe++,je.name,le.GeoPackageDataType.fromName(je.dataType),!0))}var ft=Bt.SimpleAttributesTable.create(pe,ye);return Me.createRelatedTable(ft),Me.getSimpleAttributesDao(ft)},Ge.prototype.addMedia=function(pe,Te,Me,ye){var Fe=this.relatedTablesExtension.getMediaDao(pe),qe=Fe.newRow();for(var je in qe.contentType=Me,qe.data=Te,ye)qe.setValueWithColumnName(je,ye[je]);return Fe.create(qe)},Ge.prototype.getRelatedRows=function(pe,Te){return this.relatedTablesExtension.getRelatedRows(pe,Te)},Ge.prototype.createUserFeatureTable=function(pe){return this.tableCreator.createUserTable(pe)},Ge.prototype.createFeatureTableFromProperties=function(pe,Te){var Me=new De.GeometryColumns;Me.table_name=pe,Me.column_name="geometry",Me.geometry_type_name="GEOMETRY",Me.z=0,Me.m=0;var ye=[],Fe=0;ye.push($e.FeatureColumn.createPrimaryKeyColumn(Fe++,"id")),ye.push($e.FeatureColumn.createGeometryColumn(Fe++,Me.column_name,pt.GeometryType.GEOMETRY,!1,null));for(var qe=0;Te&&qe<Te.length;qe++){var je=Te[qe];ye.push($e.FeatureColumn.createColumn(Fe++,je.name,le.GeoPackageDataType.fromName(je.dataType)))}return this.createFeatureTable(pe,Me,ye)},Ge.prototype.createFeatureTable=function(pe,Te,Me,ye,Fe,qe){var je;if(ye===void 0&&(ye=new V.BoundingBox(-180,180,-90,90)),Fe===void 0&&(Fe=lt.ProjectionConstants.EPSG_CODE_4326),!this.spatialReferenceSystemDao.getBySrsId(Fe))throw new Error("Spatial reference system ("+Fe+") is not defined.");this.createGeometryColumnsTable(),Te?je=Te:((je=new De.GeometryColumns).table_name=pe,je.column_name="geometry",je.geometry_type_name="GEOMETRY",je.z=0,je.m=0);var ft=[];if(Me&&Me.length>0&&Me[0]instanceof Se.UserColumn)ft=Me;else{var nt=0;ft.push($e.FeatureColumn.createPrimaryKeyColumn(nt++,"id")),ft.push($e.FeatureColumn.createGeometryColumn(nt++,je.column_name,pt.GeometryType.GEOMETRY,!1,null));for(var ot=0;Me&&ot<Me.length;ot++){var _t=Me[ot];ft.push($e.FeatureColumn.createColumn(nt++,_t.name,le.GeoPackageDataType.fromName(_t.dataType)))}}var Ft=new A.FeatureTable(je.table_name,je.column_name,ft);this.createUserFeatureTable(Ft);var Ut=new ae.Contents;if(Ut.table_name=je.table_name,Ut.data_type=Qe.ContentsDataType.FEATURES,Ut.identifier=je.table_name,Ut.last_change=new Date().toISOString(),Ut.min_x=ye.minLongitude,Ut.min_y=ye.minLatitude,Ut.max_x=ye.maxLongitude,Ut.max_y=ye.maxLatitude,Ut.srs_id=Fe,this.contentsDao.create(Ut),je.srs_id=Fe,this.geometryColumnsDao.create(je),qe){this.createDataColumns();var Vt=this.dataColumnsDao;qe.forEach((function($t){Vt.create($t)}))}return!0},Ge.prototype.createTileMatrixSetTable=function(){return!!this.tileMatrixSetDao.isTableExists()||this.tableCreator.createTileMatrixSet()},Ge.prototype.createTileMatrixTable=function(){return!!this.tileMatrixDao.isTableExists()||this.tableCreator.createTileMatrix()},Ge.prototype.createTileTable=function(pe){return this.tableCreator.createUserTable(pe)},Ge.prototype.createSpatialReferenceSystem=function(pe){Nt.Projection.loadProjection([pe.organization.toUpperCase(),pe.organization_coordsys_id].join(":"),pe.definition),this.spatialReferenceSystemDao.create(pe)},Ge.prototype.createTileTableWithTableName=function(pe,Te,Me,ye,Fe){var qe=this.spatialReferenceSystemDao.getBySrsId(Me);if(!qe)throw new Error("Spatial reference system ("+Me+") is not defined.");if(!(qe=this.spatialReferenceSystemDao.getBySrsId(Fe)))throw new Error("Spatial reference system ("+Fe+") is not defined.");var je=W.TileTable.createRequiredColumns(0),ft=new W.TileTable(pe,je),nt=new ae.Contents;nt.table_name=pe,nt.data_type=Qe.ContentsDataType.TILES,nt.identifier=pe,nt.last_change=new Date().toISOString(),nt.min_x=Te.minLongitude,nt.min_y=Te.minLatitude,nt.max_x=Te.maxLongitude,nt.max_y=Te.maxLatitude,nt.srs_id=Me;var ot=new ne.TileMatrixSet;return ot.contents=nt,ot.srs_id=Fe,ot.min_x=ye.minLongitude,ot.min_y=ye.minLatitude,ot.max_x=ye.maxLongitude,ot.max_y=ye.maxLatitude,this.createTileMatrixSetTable(),this.createTileMatrixTable(),this.createTileTable(ft),this.contentsDao.create(nt),this.tileMatrixSetDao.create(ot),ot},Ge.prototype.createStandardWGS84TileTable=function(pe,Te,Me,ye,Fe,qe,je,ft){ft===void 0&&(ft=256);var nt=this.spatialReferenceSystemDao.getByOrganizationAndCoordSysId(lt.ProjectionConstants.EPSG,lt.ProjectionConstants.EPSG_CODE_4326);nt||(this.spatialReferenceSystemDao.createWebMercator(),nt=this.spatialReferenceSystemDao.getByOrganizationAndCoordSysId(lt.ProjectionConstants.EPSG,lt.ProjectionConstants.EPSG_CODE_4326));var ot=nt.srs_id,_t=this.spatialReferenceSystemDao.getBySrsId(Me);if(!_t)throw new Error("Spatial reference system ("+Me+") is not defined.");if(!(_t=this.spatialReferenceSystemDao.getBySrsId(Fe)))throw new Error("Spatial reference system ("+Fe+") is not defined.");if(Me!==ot){var Ft=new C.SpatialReferenceSystemDao(this).getBySrsId(Me).projection;Te=Te.projectBoundingBox(Ft,lt.ProjectionConstants.EPSG_4326)}Fe!==ot&&(Ft=new C.SpatialReferenceSystemDao(this).getBySrsId(Fe).projection,ye=ye.projectBoundingBox(Ft,lt.ProjectionConstants.EPSG_4326));var Ut=this.createTileTableWithTableName(pe,Te,ot,ye,ot);return this.createStandardWGS84TileMatrix(ye,Ut,qe,je,ft),Ut},Ge.prototype.createStandardWGS84TileMatrix=function(pe,Te,Me,ye,Fe){Fe===void 0&&(Fe=256),Fe=Fe||256;for(var qe=this.tileMatrixDao,je=Me;je<=ye;je++)this.createWGS84TileMatrixRow(pe,Te,qe,je,Fe);return this},Ge.prototype.createStandardWebMercatorTileTable=function(pe,Te,Me,ye,Fe,qe,je,ft){ft===void 0&&(ft=256);var nt=this.spatialReferenceSystemDao.getByOrganizationAndCoordSysId(lt.ProjectionConstants.EPSG,lt.ProjectionConstants.EPSG_CODE_3857);nt||(this.spatialReferenceSystemDao.createWebMercator(),nt=this.spatialReferenceSystemDao.getByOrganizationAndCoordSysId(lt.ProjectionConstants.EPSG,lt.ProjectionConstants.EPSG_CODE_3857));var ot=nt.srs_id,_t=this.spatialReferenceSystemDao.getBySrsId(Me);if(!_t)throw new Error("Spatial reference system ("+Me+") is not defined.");if(!(_t=this.spatialReferenceSystemDao.getBySrsId(Fe)))throw new Error("Spatial reference system ("+Fe+") is not defined.");if(Me!==ot){var Ft=new C.SpatialReferenceSystemDao(this).getBySrsId(Me).projection;Te=Te.projectBoundingBox(Ft,lt.ProjectionConstants.EPSG_3857)}Fe!==ot&&(Ft=new C.SpatialReferenceSystemDao(this).getBySrsId(Fe).projection,ye=ye.projectBoundingBox(Ft,lt.ProjectionConstants.EPSG_3857));var Ut=this.createTileTableWithTableName(pe,Te,ot,ye,ot);return this.createStandardWebMercatorTileMatrix(ye,Ut,qe,je,ft),Ut},Ge.prototype.createStandardWebMercatorTileTableWithZoomLevels=function(pe,Te,Me,ye,Fe){return Fe===void 0&&(Fe=256),h(this,void 0,void 0,(function(){var qe,je,ft;return s(this,(function(nt){switch(nt.label){case 0:return(qe=this.spatialReferenceSystemDao.getByOrganizationAndCoordSysId(lt.ProjectionConstants.EPSG,lt.ProjectionConstants.EPSG_CODE_3857))||(this.spatialReferenceSystemDao.createWebMercator(),qe=this.spatialReferenceSystemDao.getByOrganizationAndCoordSysId(lt.ProjectionConstants.EPSG,lt.ProjectionConstants.EPSG_CODE_3857)),je=qe.srs_id,[4,this.createTileTableWithTableName(pe,Te,je,Me,je)];case 1:return ft=nt.sent(),this.createStandardWebMercatorTileMatrixWithZoomLevels(Me,ft,ye,Fe),[2,ft]}}))}))},Ge.prototype.createStandardWebMercatorTileMatrix=function(pe,Te,Me,ye,Fe){Fe===void 0&&(Fe=256),Fe=Fe||256;for(var qe=this.tileMatrixDao,je=Me;je<=ye;je++)this.createTileMatrixRow(pe,Te,qe,je,Fe);return this},Ge.prototype.createStandardWebMercatorTileMatrixWithZoomLevels=function(pe,Te,Me,ye){var Fe=this;ye===void 0&&(ye=256),ye=ye||256;var qe=this.tileMatrixDao;return Me.forEach((function(je){Fe.createTileMatrixRow(pe,Te,qe,je,ye)})),this},Ge.prototype.createWGS84TileMatrixRow=function(pe,Te,Me,ye,Fe){Fe===void 0&&(Fe=256);var qe=F.TileBoundingBoxUtils.wgs84TileBox(pe,ye),je=qe.maxLongitude-qe.minLongitude+1,ft=qe.maxLatitude-qe.minLatitude+1,nt=(pe.maxLongitude-pe.minLongitude)/je/Fe,ot=(pe.maxLatitude-pe.minLatitude)/ft/Fe,_t=new ht.TileMatrix;return _t.table_name=Te.table_name,_t.zoom_level=ye,_t.matrix_width=je,_t.matrix_height=ft,_t.tile_width=Fe,_t.tile_height=Fe,_t.pixel_x_size=nt,_t.pixel_y_size=ot,Me.create(_t)},Ge.prototype.createTileMatrixRow=function(pe,Te,Me,ye,Fe){Fe===void 0&&(Fe=256);var qe=F.TileBoundingBoxUtils.webMercatorTileBox(pe,ye),je=qe.maxLongitude-qe.minLongitude+1,ft=qe.maxLatitude-qe.minLatitude+1,nt=(pe.maxLongitude-pe.minLongitude)/je/Fe,ot=(pe.maxLatitude-pe.minLatitude)/ft/Fe,_t=new ht.TileMatrix;return _t.table_name=Te.table_name,_t.zoom_level=ye,_t.matrix_width=je,_t.matrix_height=ft,_t.tile_width=Fe,_t.tile_height=Fe,_t.pixel_x_size=nt,_t.pixel_y_size=ot,Me.create(_t)},Ge.prototype.addTile=function(pe,Te,Me,ye,Fe){var qe=this.getTileDao(Te),je=qe.newRow();return je.zoomLevel=Me,je.tileColumn=Fe,je.tileRow=ye,je.tileData=pe,qe.create(je)},Ge.prototype.getTileFromTable=function(pe,Te,Me,ye){return this.getTileDao(pe).queryForTile(ye,Me,Te)},Ge.prototype.getTilesInBoundingBox=function(pe,Te,Me,ye,Fe,qe){var je,ft,nt={columns:[],srs:void 0,tiles:[],west:void 0,east:void 0,south:void 0,north:void 0,zoom:void 0},ot=this.getTileDao(pe);if(!(Te<ot.minZoom||Te>ot.maxZoom)){for(var _t=0;_t<ot.table.getUserColumns().getColumns().length;_t++){var Ft=ot.table.getUserColumns().getColumns()[_t];nt.columns.push({index:Ft.index,name:Ft.name,max:Ft.max,min:Ft.min,notNull:Ft.notNull,primaryKey:Ft.primaryKey})}var Ut=ot.srs;nt.srs=Ut,nt.tiles=[];var Vt=ot.tileMatrixSet,$t=ot.getTileMatrixWithZoomLevel(Te);if(!$t)return nt;var an=new V.BoundingBox(Math.max(-180,Me),Math.min(ye,180),Fe,qe);nt.west=Math.max(-180,Me).toFixed(2),nt.east=Math.min(ye,180).toFixed(2),nt.south=Fe.toFixed(2),nt.north=qe.toFixed(2),nt.zoom=Te,an=an.projectBoundingBox(lt.ProjectionConstants.EPSG_4326,ot.srs.organization.toUpperCase()+":"+ot.srs.organization_coordsys_id);var hn=F.TileBoundingBoxUtils.getTileGridWithTotalBoundingBox(Vt.boundingBox,$t.matrix_width,$t.matrix_height,an),xn=ot.queryByTileGrid(hn,Te);try{for(var Qt=a(xn),Jt=Qt.next();!Jt.done;Jt=Qt.next()){var nn=Jt.value,en={};en.tableName=pe,en.id=nn.id;var Zt=F.TileBoundingBoxUtils.getTileBoundingBox(Vt.boundingBox,$t,nn.tileColumn,nn.row);for(en.minLongitude=Zt.minLongitude,en.maxLongitude=Zt.maxLongitude,en.minLatitude=Zt.minLatitude,en.maxLatitude=Zt.maxLatitude,en.projection=ot.srs.organization.toUpperCase()+":"+ot.srs.organization_coordsys_id,en.values=[],_t=0;_t<nt.columns.length;_t++){var yn=nn.values[nt.columns[_t].name];nt.columns[_t].name==="tile_data"?en.values.push("data"):yn===null||yn==="null"?en.values.push(""):(en.values.push(yn.toString()),en[nt.columns[_t].name]=yn)}nt.tiles.push(en)}}catch(En){je={error:En}}finally{try{Jt&&!Jt.done&&(ft=Qt.return)&&ft.call(Qt)}finally{if(je)throw je.error}}return nt}},Ge.prototype.getTilesInBoundingBoxWebZoom=function(pe,Te,Me,ye,Fe,qe){var je,ft,nt={columns:[],srs:void 0,tiles:[],west:void 0,east:void 0,south:void 0,north:void 0,zoom:void 0},ot=this.getTileDao(pe);if(!(Te<ot.minWebMapZoom||Te>ot.maxWebMapZoom)){nt.columns=[];for(var _t=0;_t<ot.table.getUserColumns().getColumns().length;_t++){var Ft=ot.table.getUserColumns().getColumns()[_t];nt.columns.push({index:Ft.index,name:Ft.name,max:Ft.max,min:Ft.min,notNull:Ft.notNull,primaryKey:Ft.primaryKey})}var Ut=ot.srs;nt.srs=Ut,nt.tiles=[];var Vt=ot.webZoomToGeoPackageZoom(Te),$t=ot.tileMatrixSet,an=ot.getTileMatrixWithZoomLevel(Vt);if(!an)return nt;var hn=new V.BoundingBox(Math.max(-180,Me),Math.min(ye,180),Fe,qe);nt.west=Math.max(-180,Me).toFixed(2),nt.east=Math.min(ye,180).toFixed(2),nt.south=Fe.toFixed(2),nt.north=qe.toFixed(2),nt.zoom=Vt,hn=hn.projectBoundingBox(lt.ProjectionConstants.EPSG_4326,ot.srs.organization.toUpperCase()+":"+ot.srs.organization_coordsys_id);var xn=F.TileBoundingBoxUtils.getTileGridWithTotalBoundingBox($t.boundingBox,an.matrix_width,an.matrix_height,hn),Qt=ot.queryByTileGrid(xn,Vt);try{for(var Jt=a(Qt),nn=Jt.next();!nn.done;nn=Jt.next()){var en=nn.value,Zt={tableName:void 0,id:void 0,minLongitude:void 0,maxLongitude:void 0,minLatitude:void 0,maxLatitude:void 0,projection:void 0,values:[]};Zt.tableName=pe,Zt.id=en.id;var yn=F.TileBoundingBoxUtils.getTileBoundingBox($t.boundingBox,an,en.tileColumn,en.row);for(Zt.minLongitude=yn.minLongitude,Zt.maxLongitude=yn.maxLongitude,Zt.minLatitude=yn.minLatitude,Zt.maxLatitude=yn.maxLatitude,Zt.projection=ot.srs.organization.toUpperCase()+":"+ot.srs.organization_coordsys_id,Zt.values=[],_t=0;_t<nt.columns.length;_t++){var En=en.values[nt.columns[_t].name];nt.columns[_t].name==="tile_data"?Zt.values.push("data"):En===null||En==="null"?Zt.values.push(""):(Zt.values.push(En.toString()),Zt[nt.columns[_t].name]=En)}nt.tiles.push(Zt)}}catch(Sn){je={error:Sn}}finally{try{nn&&!nn.done&&(ft=Jt.return)&&ft.call(Jt)}finally{if(je)throw je.error}}return nt}},Ge.prototype.getFeatureTileFromXYZ=function(pe,Te,Me,ye,Fe,qe){return h(this,void 0,void 0,(function(){var je;return s(this,(function(ft){return Te=Number(Te),Me=Number(Me),ye=Number(ye),Fe=Number(Fe),qe=Number(qe),(je=this.getFeatureDao(pe))?[2,new Rt.FeatureTiles(je,Fe,qe).drawTile(Te,Me,ye)]:[2]}))}))},Ge.prototype.getClosestFeatureInXYZTile=function(pe,Te,Me,ye,Fe,qe){var je,ft;Te=Number(Te),Me=Number(Me),ye=Number(ye);var nt=this.getFeatureDao(pe);if(nt){var ot=new Rt.FeatureTiles(nt,256,256).getFeatureCountXYZ(Te,Me,ye),_t=F.TileBoundingBoxUtils.getWebMercatorBoundingBoxFromXYZ(Te,Me,ye);if(_t=_t.projectBoundingBox(lt.ProjectionConstants.EPSG_3857,lt.ProjectionConstants.EPSG_4326),ot>1e4){var Ft=_t.toGeoJSON();return Ft.feature_count=ot,Ft.coverage=!0,Ft.gp_table=pe,Ft.gp_name=this.name,Ft}var Ut=[_t.maxLongitude,_t.maxLatitude],Vt=[_t.minLongitude,_t.minLatitude],$t=(Ut[0]-Vt[0])/256*10;_t.maxLongitude=qe+$t,_t.minLongitude=qe-$t,_t.maxLatitude=Fe+$t,_t.minLatitude=Fe-$t;var an,hn=nt.queryForGeoJSONIndexedFeaturesWithBoundingBox(_t),xn=[],Qt=1e11,Jt=y.point([qe,Fe]);try{for(var nn=a(hn),en=nn.next();!en.done;en=nn.next()){var Zt=en.value;Zt.type="Feature";var yn=Ge.determineDistance(Jt.geometry,Zt);(yn<Qt||yn===Qt&&an!=null&&an.geometry.type!=="Point")&&(an=Zt,Qt=yn),xn.push(Zt)}}catch(En){je={error:En}}finally{try{en&&!en.done&&(ft=nn.return)&&ft.call(nn)}finally{if(je)throw je.error}}return an&&(an.gp_table=pe,an.gp_name=this.name,an.distance=Qt),an}},Ge.determineDistance=function(pe,Te){if(Te.type!=="FeatureCollection"){var Me=Te.geometry;if(Me.type==="Point")return(0,p.default)(pe,Me);if(Me.type==="LineString")return this.determineDistanceFromLine(pe,Me);if(Me.type==="MultiLineString"){var ye=Number.MAX_SAFE_INTEGER;return Me.coordinates.forEach((function(Fe){var qe=y.lineString(Fe);ye=Math.min(ye,Ge.determineDistance(pe,qe))})),ye}return Me.type==="Polygon"||Me.type==="MultiPolygon"?Ge.determineDistanceFromPolygon(pe,Me):Number.MAX_SAFE_INTEGER}Te.features.forEach((function(Fe){Ge.determineDistance(pe,Fe)}))},Ge.determineDistanceFromLine=function(pe,Te){return(0,i.default)(pe,Te)},Ge.determineDistanceFromPolygon=function(pe,Te){return(0,f.default)(pe,Te)?0:Ge.determineDistance(pe,(0,u.default)(Te))},Ge.prototype.createDataColumns=function(){return!!this.dataColumnsDao.isTableExists()||this.tableCreator.createDataColumns()},Ge.prototype.createDataColumnConstraintsTable=function(){return!!this.dataColumnConstraintsDao.isTableExists()||this.tableCreator.createDataColumnConstraints()},Ge.prototype.createMetadataTable=function(){return!!this.metadataDao.isTableExists()||this.tableCreator.createMetadata()},Ge.prototype.createMetadataReferenceTable=function(){return!!this.metadataReferenceDao.isTableExists()||this.tableCreator.createMetadataReference()},Ge.prototype.createExtensionTable=function(){return!!this.extensionDao.isTableExists()||this.tableCreator.createExtensions()},Ge.prototype.createTableIndexTable=function(){return!!this.tableIndexDao.isTableExists()||this.tableCreator.createTableIndex()},Ge.prototype.createGeometryIndexTable=function(){return!!this.getGeometryIndexDao(null).isTableExists()||this.tableCreator.createGeometryIndex()},Ge.prototype.createStyleMappingTable=function(pe,Te,Me){var ye=new D.StyleMappingTable(pe,Te,null);this.tableCreator.createUserTable(ye);var Fe=new ae.Contents;if(Fe.table_name=pe,Fe.data_type=Qe.ContentsDataType.ATTRIBUTES,Fe.identifier=pe,Fe.last_change=new Date().toISOString(),this.contentsDao.create(Fe),Me){this.createDataColumns();var qe=this.dataColumnsDao;Me.forEach((function(je){qe.create(je)}))}return!0},Ge.prototype.getApplicationId=function(){return this.database.getApplicationId()},Ge.createDataColumnMap=function(pe){var Te={},Me=new ie.DataColumnsDao(pe.geoPackage);return pe.table.getUserColumns().getColumns().forEach(function(ye){var Fe=Me.getDataColumns(pe.table.getTableName(),ye.name);Te[ye.name]={index:ye.index,name:ye.name,max:ye.max,min:ye.min,notNull:ye.notNull,primaryKey:ye.primaryKey,dataType:ye.dataType?le.GeoPackageDataType.nameFromType(ye.dataType):"",displayName:Fe&&Fe.name?Fe.name:ye.name,dataColumn:Fe}}.bind(this)),Te},Ge.prototype.iterateGeoJSONFeatures=function(pe,Te){return this.getFeatureDao(pe).queryForGeoJSONIndexedFeaturesWithBoundingBox(Te)},Ge.prototype.getFeature=function(pe,Te){var Me=this.getFeatureDao(pe),ye=Me.srs,Fe=Me.queryForId(Te);if(!Fe){var qe=Me.queryForAllEq("_feature_id",Te);(qe.length||(qe=Me.queryForAllEq("_properties_id",Te)).length)&&(Fe=Me.getRow(qe[0]))}if(Fe)return Ge.parseFeatureRowIntoGeoJSON(Fe,ye)},Ge.parseFeatureRowIntoGeoJSON=function(pe,Te,Me){var ye={type:"Feature",properties:{},id:void 0,geometry:void 0},Fe=pe.geometry;if(Fe&&Fe.geometry){var qe=Fe.geometry.toGeoJSON();Te.definition&&Te.definition!=="undefined"&&Te.organization.toUpperCase()+":"+Te.organization_coordsys_id!==lt.ProjectionConstants.EPSG_4326&&(qe=t.default.reproject(qe,Te.projection,lt.ProjectionConstants.EPSG_4326)),ye.geometry=qe}for(var je in pe.values)Object.prototype.hasOwnProperty.call(pe.values,je)&&je!==pe.geometryColumn.name&&je!=="id"?je.toLowerCase()==="_feature_id"?ye.id=pe.values[je]:je.toLowerCase()==="_properties_id"?ye.properties[je.substring(12)]=pe.values[je]:Me&&Me[je]?ye.properties[Me[je].displayName]=pe.values[je]:ye.properties[je]=pe.values[je]:pe.geometryColumn.name;return ye.id=ye.id||pe.id,ye},Ge.prototype.getGeoJSONFeaturesInTile=function(pe,Te,Me,ye,Fe){return Fe===void 0&&(Fe=!1),h(this,void 0,void 0,(function(){var qe,je,ft,nt,ot,_t,Ft,Ut,Vt,$t;return s(this,(function(an){switch(an.label){case 0:return qe=F.TileBoundingBoxUtils.getWebMercatorBoundingBoxFromXYZ(Te,Me,ye),je=qe.projectBoundingBox(lt.ProjectionConstants.EPSG_3857,lt.ProjectionConstants.EPSG_4326),[4,this.indexFeatureTable(pe)];case 1:if(an.sent(),!(ft=this.getFeatureDao(pe)))return[2];nt=[],ot=ft.queryForGeoJSONIndexedFeaturesWithBoundingBox(je,Fe);try{for(_t=a(ot),Ft=_t.next();!Ft.done;Ft=_t.next())Ut=Ft.value,nt.push(Ut)}catch(hn){Vt={error:hn}}finally{try{Ft&&!Ft.done&&($t=_t.return)&&$t.call(_t)}finally{if(Vt)throw Vt.error}}return[2,nt]}}))}))},Ge.prototype.getFeaturesInBoundingBox=function(pe,Te,Me,ye,Fe){return h(this,void 0,void 0,(function(){var qe,je;return s(this,(function(ft){switch(ft.label){case 0:return[4,this.indexFeatureTable(pe)];case 1:if(ft.sent(),!(qe=this.getFeatureDao(pe)))throw new Error("Unable to find table "+pe);return je=new V.BoundingBox(Te,Me,ye,Fe),[2,qe.queryIndexedFeaturesWithBoundingBox(je)]}}))}))},Ge.prototype.xyzTile=function(pe,Te,Me,ye,Fe,qe,je){return Fe===void 0&&(Fe=256),qe===void 0&&(qe=256),h(this,void 0,void 0,(function(){var ft,nt,ot;return s(this,(function(_t){return Fe=Number(Fe),qe=Number(qe),ft=this.getTileDao(pe),nt=new Gt.GeoPackageTileRetriever(ft,Fe,qe),this.getTileScalingExtension(pe).has()&&(ot=this.getTileScalingExtension(pe).dao.queryForTableName(pe))&&nt.setScaling(ot),je?[2,nt.drawTileIn(Te,Me,ye,je)]:[2,nt.getTile(Te,Me,ye)]}))}))},Ge.prototype.xyzTileScaled=function(pe,Te,Me,ye,Fe,qe,je,ft,nt){return Fe===void 0&&(Fe=256),qe===void 0&&(qe=256),h(this,void 0,void 0,(function(){var ot,_t,Ft,Ut;return s(this,(function(Vt){switch(Vt.label){case 0:return Fe=Number(Fe),qe=Number(qe),ot=this.getTileDao(pe),_t=new Gt.GeoPackageTileRetriever(ot,Fe,qe),[4,this.getTileScalingExtension(pe).getOrCreateExtension()];case 1:return Vt.sent(),(Ft=this.getTileScalingExtension(pe).dao.queryForTableName(pe))?_t.setScaling(Ft):((Ut=new _n.TileScaling).zoom_in=ft,Ut.zoom_out=nt,Ut.table_name=pe,Ut.scaling_type=fn.TileScalingType.CLOSEST_IN_OUT,this.getTileScalingExtension(pe).createOrUpdate(Ut),_t.setScaling(Ut)),je?[2,_t.drawTileIn(Te,Me,ye,je)]:[2,_t.getTile(Te,Me,ye)]}}))}))},Ge.prototype.projectedTile=function(pe,Te,Me,ye,Fe,qe,je,ft,nt,ot){return je===void 0&&(je=lt.ProjectionConstants.EPSG_4326),ft===void 0&&(ft=256),nt===void 0&&(nt=256),h(this,void 0,void 0,(function(){var _t,Ft,Ut;return s(this,(function(Vt){return _t=this.getTileDao(pe),Ft=new Gt.GeoPackageTileRetriever(_t,ft,nt),Ut=new V.BoundingBox(Me,Fe,Te,ye),[2,Ft.getTileWithWgs84BoundsInProjection(Ut,qe,je,ot)]}))}))},Ge.prototype.getInfoForTable=function(pe){var Te,Me={tableName:pe.table_name,tableType:pe.table.tableType,count:pe.getCount(),geometryColumns:void 0,minZoom:void 0,maxZoom:void 0,minWebMapZoom:void 0,maxWebMapZoom:void 0,zoomLevels:void 0,tileMatrixSet:void 0,contents:void 0,srs:void 0,columns:void 0,columnMap:void 0};pe instanceof R.FeatureDao&&(Me.geometryColumns={tableName:pe.geometryColumns.table_name,geometryColumn:pe.geometryColumns.column_name,geometryTypeName:pe.geometryColumns.geometry_type_name,z:pe.geometryColumns.z,m:pe.geometryColumns.m}),pe instanceof st.TileDao&&(Me.minZoom=pe.minZoom,Me.maxZoom=pe.maxZoom,Me.minWebMapZoom=pe.minWebMapZoom,Me.maxWebMapZoom=pe.maxWebMapZoom,Me.zoomLevels=pe.tileMatrices.length),pe instanceof R.FeatureDao?Te=this.geometryColumnsDao.getContents(pe.geometryColumns):pe instanceof st.TileDao&&(Te=this.tileMatrixSetDao.getContents(pe.tileMatrixSet),Me.tileMatrixSet={srsId:pe.tileMatrixSet.srs_id,minX:pe.tileMatrixSet.min_x,maxX:pe.tileMatrixSet.max_x,minY:pe.tileMatrixSet.min_y,maxY:pe.tileMatrixSet.max_y});var ye=this.contentsDao.getSrs(Te);Me.contents={tableName:Te.table_name,dataType:Te.data_type,identifier:Te.identifier,description:Te.description,lastChange:Te.last_change,minX:Te.min_x,maxX:Te.max_x,minY:Te.min_y,maxY:Te.max_y,srs:{name:ye.srs_name,id:ye.srs_id,organization:ye.organization,organization_coordsys_id:ye.organization_coordsys_id,definition:ye.definition,description:ye.description}},Me.contents.srs={name:ye.srs_name,id:ye.srs_id,organization:ye.organization,organization_coordsys_id:ye.organization_coordsys_id,definition:ye.definition,description:ye.description};var Fe=pe.srs;Me.srs={name:Fe.srs_name,id:Fe.srs_id,organization:Fe.organization,organization_coordsys_id:Fe.organization_coordsys_id,definition:Fe.definition,description:Fe.description},Me.columns=[],Me.columnMap={};var qe=this.dataColumnsDao;return pe.table.getUserColumns().getColumns().forEach(function(je){var ft=qe.getDataColumns(pe.table.getTableName(),je.name);Me.columns.push({index:je.index,name:je.name,max:je.max,min:je.min,notNull:je.notNull,primaryKey:je.primaryKey,dataType:je.dataType,displayName:ft&&ft.name?ft.name:je.name,dataColumn:ft}),Me.columnMap[je.name]=Me.columns[Me.columns.length-1]}.bind(this)),Me},Ge.addProjection=function(pe,Te){if(!pe||!Te)throw new Error("Invalid projection name/definition");g.default.defs(pe,Te)},Ge.hasProjection=function(pe){return g.default.defs(pe)},Ge.prototype.renameTable=function(pe,Te){this.getTableDataType(pe)!=null?(this.copyTableAndExtensions(pe,Te),this.deleteTable(pe)):rt.AlterTable.renameTable(this.connection,pe,Te)},Ge.prototype.copyTableAndExtensions=function(pe,Te){this.copyTable(pe,Te,!0,!0)},Ge.prototype.copyTableNoExtensions=function(pe,Te){this.copyTable(pe,Te,!0,!1)},Ge.prototype.copyTableAsEmpty=function(pe,Te){this.copyTable(pe,Te,!1,!1)},Ge.prototype.getTableDataType=function(pe){var Te=null,Me=this.contentsDao.queryForId(pe);return Me!=null&&(Te=Me.data_type),Te},Ge.prototype.copyTable=function(pe,Te,Me,ye){var Fe=this.getTableDataType(pe);if(Fe!=null)switch(Fe){case Qe.ContentsDataType.ATTRIBUTES:this.copyAttributeTable(pe,Te,Me);break;case Qe.ContentsDataType.FEATURES:this.copyFeatureTable(pe,Te,Me);break;case Qe.ContentsDataType.TILES:this.copyTileTable(pe,Te,Me);break;default:throw new Error("Unsupported data type: "+Fe)}else this.copyUserTable(pe,Te,Me,!1);ye&&dt.GeoPackageExtensions.copyTableExtensions(this,pe,Te)},Ge.prototype.copyAttributeTable=function(pe,Te,Me){this.copyUserTable(pe,Te,Me)},Ge.prototype.copyFeatureTable=function(pe,Te,Me){var ye=this.geometryColumnsDao,Fe=null;try{Fe=ye.queryForTableName(pe)}catch{throw new Error("Failed to retrieve table geometry columns: "+pe)}if(Fe==null)throw new Error("No geometry columns for table: "+pe);var qe=this.copyUserTable(pe,Te,Me);Fe.setContents(qe);try{ye.create(Fe)}catch{throw new Error("Failed to create geometry columns for feature table: "+Te)}},Ge.prototype.copyTileTable=function(pe,Te,Me){var ye=this.tileMatrixSetDao,Fe=null;try{Fe=ye.queryForId(pe)}catch{throw new Error("Failed to retrieve table tile matrix set: "+pe)}if(Fe==null)throw new Error("No tile matrix set for table: "+pe);var qe=this.tileMatrixDao,je=null;try{je=qe.queryForAllEq(Y.TileMatrixDao.COLUMN_TABLE_NAME,pe).map((function(nt){return qe.createObject(nt)}))}catch{throw new Error("Failed to retrieve table tile matrices: "+pe)}var ft=this.copyUserTable(pe,Te,Me);Fe.contents=ft;try{ye.create(Fe)}catch{throw new Error("Failed to create tile matrix set for tile table: "+Te)}je.forEach((function(nt){nt.contents=ft;try{qe.create(nt)}catch{throw new Error("Failed to create tile matrix for tile table: "+Te)}}))},Ge.prototype.copyUserTable=function(pe,Te,Me,ye){ye===void 0&&(ye=!0),rt.AlterTable.copyTableWithName(this.database,pe,Te,Me);var Fe=this.copyContents(pe,Te);if(Fe==null&&ye)throw new Error("No table contents found for table: "+pe);return Fe},Ge.prototype.copyContents=function(pe,Te){var Me=this.getTableContents(pe);if(Me!=null){Me.table_name=Te,Me.identifier=Te;try{this.contentsDao.create(Me)}catch{throw new Error("Failed to create contents for table: "+Te+", copied from table: "+pe)}}return Me},Ge})();l.GeoPackage=bn},1506:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GeoPackageConstants=void 0;var o=(function(){function c(){}return c.GEOPACKAGE_EXTENSION="gpkg",c.GEOPACKAGE_EXTENDED_EXTENSION="gpkx",c.APPLICATION_ID="GPKG",c.USER_VERSION="10200",c.GEOPACKAGE_EXTENSION_AUTHOR=c.GEOPACKAGE_EXTENSION,c.GEOMETRY_EXTENSION_PREFIX="geom",c.GEOPACKAGE_GEOMETRY_MAGIC_NUMBER="GP",c.GEOPACKAGE_GEOMETRY_VERSION_1=0,c.SQLITE_HEADER_PREFIX="SQLite format 3",c})();l.GeoPackageConstants=o},5095:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Envelope=void 0,l.Envelope=function(){}},1895:function(_,l,o){var c=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0}),l.EnvelopeBuilder=void 0;var d=c(o(9705)),m=(function(){function h(){}return h.buildEnvelopeWithGeometry=function(s){var a=s.toGeoJSON(),r=(0,d.default)(a);return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}},h})();l.EnvelopeBuilder=m},857:function(_,l,o){var c=o(3085).lW,d=o(5108),m=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.GeometryData=void 0;var h=m(o(1011)),s=o(1506),a=o(5095),r=(function(){function n(t){this.empty=!0,this.byteOrder=n.BIG_ENDIAN,t&&this.fromData(t)}return n.prototype.setSrsId=function(t){this.srsId=t},n.prototype.setGeometry=function(t){this.empty=!1,this.geometry=t},n.prototype.setEnvelope=function(t){this.envelope=t},n.prototype.toGeoJSON=function(){return this.geometry.toGeoJSON()},n.prototype.fromData=function(t){t instanceof Uint8Array?this.buffer=t=c.from(t):this.buffer=t;var i=this.buffer.toString("ascii",0,2);if(i!==s.GeoPackageConstants.GEOPACKAGE_GEOMETRY_MAGIC_NUMBER)throw new Error("Unexpected GeoPackage Geometry magic number: "+i+", Expected: "+s.GeoPackageConstants.GEOPACKAGE_GEOMETRY_MAGIC_NUMBER);var u=this.buffer.readUInt8(2);if(u!==s.GeoPackageConstants.GEOPACKAGE_GEOMETRY_VERSION_1)throw new Error("Unexpected GeoPackage Geometry version "+u+", Expected: "+s.GeoPackageConstants.GEOPACKAGE_GEOMETRY_VERSION_1);var f=this.buffer.readUInt8(3),p=this.readFlags(f);this.srsId=this.buffer[this.byteOrder?"readUInt32LE":"readUInt32BE"](4);var y=this.readEnvelope(p,this.buffer);this.envelope=y.envelope;var g=y.offset,b=this.buffer.slice(g);try{this.geometry=h.default.Geometry.parse(b),this.geometryError=void 0}catch(E){this.geometryError=E.message,d.log("Error parsing geometry")}},n.prototype.toData=function(){var t=c.alloc(8);t.write(s.GeoPackageConstants.GEOPACKAGE_GEOMETRY_MAGIC_NUMBER),t.writeUInt8(s.GeoPackageConstants.GEOPACKAGE_GEOMETRY_VERSION_1,2);var i=this.buildFlagsByte();t.writeUInt8(i,3),t[this.byteOrder?"writeUInt32LE":"writeUInt32BE"](this.srsId,4);var u=[t,this.writeEnvelope()];try{u.push(this.geometry.toWkb()),this.geometryError=void 0}catch(f){this.geometryError=f.message}return this.buffer=c.concat(u),this.buffer},n.prototype.writeEnvelope=function(){if(!this.envelope)return c.alloc(0);var t=32;this.envelope.hasZ&&(t+=16),this.envelope.hasM&&(t+=16);var i,u=c.alloc(t);(i=this.byteOrder?u.writeDoubleLE.bind(u):u.writeDoubleBE.bind(u))(this.envelope.minX,0),i(this.envelope.maxX,8),i(this.envelope.minY,16),i(this.envelope.maxY,24);var f=32;return this.envelope.hasZ&&(i(this.envelope.minZ,f),i(this.envelope.maxZ,f+8),f=48),this.envelope.hasM&&(i(this.envelope.minM,f),i(this.envelope.maxM,f+8)),u},n.prototype.buildFlagsByte=function(){var t=0;return t+=(this.extended?1:0)<<5,t+=(this.empty?1:0)<<4,(t+=(this.envelope?this.getIndicatorWithEnvelope(this.envelope):0)<<1)+(this.byteOrder===n.BIG_ENDIAN?0:1)},n.prototype.getIndicatorWithEnvelope=function(t){var i=1;return t.hasZ&&i++,t.hasM&&(i+=2),i},n.prototype.readFlags=function(t){var i=t>>7&1,u=t>>6&1;if(i!==0||u!==0)throw new Error("Unexpected GeoPackage Geometry flags. Flag bit 7 and 6 should both be 0, 7="+i+", 6="+u);var f=t>>5&1;this.extended=f===1;var p=t>>4&1;this.empty=p===1;var y=t>>1&7;if(y>4)throw new Error("Unexpected GeoPackage Geometry flags. Envelope contents indicator must be between 0 and 4. Actual: "+y);var g=1&t;return this.byteOrder=g,y},n.prototype.readEnvelope=function(t,i){var u;u=this.byteOrder?i.readDoubleLE.bind(i):i.readDoubleBE.bind(i);var f=0,p={envelope:void 0,offset:8};if(t<=0)return p;var y=new a.Envelope;return y.minX=u(8+8*f++),y.maxX=u(8+8*f++),y.minY=u(8+8*f++),y.maxY=u(8+8*f++),y.hasZ=!1,y.hasM=!1,t!==2&&t!==4||(y.hasZ=!0,y.minZ=u(8+8*f++),y.maxZ=u(8+8*f++)),t!==3&&t!==4||(y.hasM=!0,y.minM=u(8+8*f++),y.maxM=u(8+8*f++)),p.envelope=y,p.offset=8+8*f,p},n.BIG_ENDIAN=0,n.LITTLE_ENDIAN=1,n})();l.GeometryData=r},3026:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Metadata=void 0;var o=(function(){function c(){}return c.prototype.getScopeInformation=function(d){switch(d){case c.UNDEFINED:return{name:c.UNDEFINED,code:"NA",definition:"Metadata information scope is undefined"};case c.FIELD_SESSION:return{name:c.FIELD_SESSION,code:"012",definition:"Information applies to the field session"};case c.COLLECTION_SESSION:return{name:c.COLLECTION_SESSION,code:"004",definition:"Information applies to the collection session"};case c.SERIES:return{name:c.SERIES,code:"006",definition:"Information applies to the (dataset) series"};case c.DATASET:return{name:c.DATASET,code:"005",definition:"Information applies to the (geographic feature) dataset"};case c.FEATURE_TYPE:return{name:c.FEATURE_TYPE,code:"010",definition:"Information applies to a feature type (class)"};case c.FEATURE:return{name:c.FEATURE,code:"009",definition:"Information applies to a feature (instance)"};case c.ATTRIBUTE_TYPE:return{name:c.ATTRIBUTE_TYPE,code:"002",definition:"Information applies to the attribute class"};case c.ATTRIBUTE:return{name:c.ATTRIBUTE,code:"001",definition:"Information applies to the characteristic of a feature (instance)"};case c.TILE:return{name:c.TILE,code:"016",definition:"Information applies to a tile, a spatial subset of geographic data"};case c.MODEL:return{name:c.MODEL,code:"015",definition:"Information applies to a copy or imitation of an existing or hypothetical object"};case c.CATALOG:return{name:c.CATALOG,code:"NA",definition:"Metadata applies to a feature catalog"};case c.SCHEMA:return{name:c.SCHEMA,code:"NA",definition:"Metadata applies to an application schema"};case c.TAXONOMY:return{name:c.TAXONOMY,code:"NA",definition:"Metadata applies to a taxonomy or knowledge system"};case c.SOFTWARE:return{name:c.SOFTWARE,code:"013",definition:"Information applies to a computer program or routine"};case c.SERVICE:return{name:c.SERVICE,code:"014",definition:"Information applies to a capability which a service provider entity makes available to a service user entity through a set of interfaces that define a behaviour, such as a use case"};case c.COLLECTION_HARDWARE:return{name:c.COLLECTION_HARDWARE,code:"003",definition:"Information applies to the collection hardware class"};case c.NON_GEOGRAPHIC_DATASET:return{name:c.NON_GEOGRAPHIC_DATASET,code:"007",definition:"Information applies to non-geographic data"};case c.DIMENSION_GROUP:return{name:c.DIMENSION_GROUP,code:"008",definition:"Information applies to a dimension group"}}},c.UNDEFINED="undefined",c.FIELD_SESSION="fieldSession",c.COLLECTION_SESSION="collectionSession",c.SERIES="series",c.DATASET="dataset",c.FEATURE_TYPE="featureType",c.FEATURE="feature",c.ATTRIBUTE_TYPE="attributeType",c.ATTRIBUTE="attribute",c.TILE="tile",c.MODEL="model",c.CATALOG="catalog",c.SCHEMA="schema",c.TAXONOMY="taxonomy",c.SOFTWARE="software",c.SERVICE="service",c.COLLECTION_HARDWARE="collectionHardware",c.NON_GEOGRAPHIC_DATASET="nonGeographicDataset",c.DIMENSION_GROUP="dimensionGroup",c})();l.Metadata=o},663:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.MetadataDao=void 0;var m=o(4115),h=o(3026),s=(function(a){function r(){var n=a!==null&&a.apply(this,arguments)||this;return n.gpkgTableName=r.TABLE_NAME,n.idColumns=[r.COLUMN_ID],n}return d(r,a),r.prototype.createObject=function(n){var t=new h.Metadata;return n&&(t.id=n.id,t.md_scope=n.md_scope,t.md_standard_uri=n.md_standard_uri,t.mime_type=n.mime_type,t.metadata=n.metadata),t},r.TABLE_NAME="gpkg_metadata",r.COLUMN_ID="id",r.COLUMN_MD_SCOPE="md_scope",r.COLUMN_MD_STANDARD_URI="md_standard_uri",r.COLUMN_MIME_TYPE="mime_type",r.COLUMN_METADATA="metadata",r})(m.Dao);l.MetadataDao=s},9173:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MetadataReference=void 0;var o=(function(){function c(){}return c.prototype.toDatabaseValue=function(d){return d==="timestamp"?this.timestamp.toISOString():this[d]},c.prototype.setMetadata=function(d){this.md_file_id=d?d.id:-1},c.prototype.setParentMetadata=function(d){this.md_parent_id=d?d.id:-1},c.prototype.setReferenceScopeType=function(d){switch(this.reference_scope=d,d){case c.GEOPACKAGE:this.table_name=void 0,this.column_name=void 0,this.row_id_value=void 0;break;case c.TABLE:this.column_name=void 0,this.row_id_value=void 0;break;case c.ROW:this.column_name=void 0;break;case c.COLUMN:this.row_id_value=void 0}},c.GEOPACKAGE="geopackage",c.TABLE="table",c.COLUMN="column",c.ROW="row",c.ROW_COL="row/col",c})();l.MetadataReference=o},2056:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.MetadataReferenceDao=void 0;var m=o(4115),h=o(8572),s=o(9173),a=(function(r){function n(){var t=r!==null&&r.apply(this,arguments)||this;return t.gpkgTableName=n.TABLE_NAME,t.idColumns=[n.COLUMN_MD_FILE_ID,n.COLUMN_MD_PARENT_ID],t}return d(n,r),n.prototype.createObject=function(t){var i=new s.MetadataReference;return t&&(i.reference_scope=t.reference_scope,i.table_name=t.table_name,i.column_name=t.column_name,i.row_id_value=t.row_id_value,i.timestamp=new Date(t.timestamp),i.md_file_id=t.md_file_id,i.md_parent_id=t.md_parent_id),i},n.prototype.removeMetadataParent=function(t){var i={};i[n.COLUMN_MD_PARENT_ID]=null;var u=this.buildWhereWithFieldAndValue(n.COLUMN_MD_PARENT_ID,t),f=this.buildWhereArgs(t);return this.updateWithValues(i,u,f).changes},n.prototype.queryByMetadataAndParent=function(t,i){var u=new h.ColumnValues;return u.addColumn(n.COLUMN_MD_FILE_ID,t),u.addColumn(n.COLUMN_MD_PARENT_ID,i),this.queryForFieldValues(u)},n.prototype.queryByMetadata=function(t){var i=new h.ColumnValues;return i.addColumn(n.COLUMN_MD_FILE_ID,t),this.queryForFieldValues(i)},n.prototype.queryByMetadataParent=function(t){var i=new h.ColumnValues;return i.addColumn(n.COLUMN_MD_PARENT_ID,t),this.queryForFieldValues(i)},n.prototype.deleteByTableName=function(t){var i="";i+=this.buildWhereWithFieldAndValue(n.COLUMN_TABLE_NAME,t);var u=this.buildWhereArgs(t);return this.deleteWhere(i,u)},n.TABLE_NAME="gpkg_metadata_reference",n.COLUMN_REFERENCE_SCOPE="reference_scope",n.COLUMN_TABLE_NAME="table_name",n.COLUMN_COLUMN_NAME="column_name",n.COLUMN_ROW_ID="row_id_value",n.COLUMN_TIMESTAMP="timestamp",n.COLUMN_MD_FILE_ID="md_file_id",n.COLUMN_MD_PARENT_ID="md_parent_id",n})(m.Dao);l.MetadataReferenceDao=a},7403:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionBuilder=void 0;var o=(function(){function c(){}return c.build=function(d){var m={};return d.forEach((function(h){m["set"+h.slice(0,1).toUpperCase()+h.slice(1)]=function(s){return this[h]=s,this},m["get"+h.slice(0,1).toUpperCase()+h.slice(1)]=function(){return this[h]}})),m},c})();l.OptionBuilder=o},5604:function(_,l,o){var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0}),l.Projection=void 0;var d=c(o(4472)),m=c(o(8446)),h=o(1375),s=(function(){function a(){}return a.loadProjection=function(r,n){if(!r||!n)throw new Error("Invalid projection name/definition");d.default.defs(r)==null&&d.default.defs(r,n)},a.loadProjections=function(r){if(!r)throw new Error("Invalid array of projections");for(var n=0;n<r.length;n++){if(!r[n]||!r[n].name||!r[n].definition)throw new Error("Invalid projection in array. Valid projection {name: string, definition: string}.");a.loadProjection(r[n].name,r[n].definition)}},a.isConverter=function(r){return r.forward!==void 0},a.hasProjection=function(r){return d.default.defs(r)},a.getConverter=function(r,n){if(r!=null&&(0,d.default)(r)==null)throw new Error("Projection "+r+" has not been defined.");if(n!=null&&(0,d.default)(n)==null)throw new Error("Projection "+n+" has not been defined.");return(0,d.default)(r,n)},a.convertCoordinates=function(r,n,t){if(r!=null&&(0,d.default)(r)==null)throw new Error("Projection "+r+" has not been defined.");if(n!=null&&(0,d.default)(n)==null)throw new Error("Projection "+n+" has not been defined.");return(0,d.default)(r,n,t)},a.getEPSGConverter=function(r){return(0,d.default)(h.ProjectionConstants.EPSG_PREFIX+r)},a.getWebMercatorToWGS84Converter=function(){return(0,d.default)(h.ProjectionConstants.EPSG_3857)},a.isWebMercator=function(r){return typeof r=="string"?r.toUpperCase()===h.ProjectionConstants.EPSG_3857:this.convertersMatch(this.getEPSGConverter(h.ProjectionConstants.EPSG_CODE_3857),r)},a.isWGS84=function(r){return typeof r=="string"?r.toUpperCase()===h.ProjectionConstants.EPSG_4326:this.convertersMatch(this.getEPSGConverter(h.ProjectionConstants.EPSG_CODE_4326),r)},a.convertersMatch=function(r,n){return(0,m.default)(r.oProj,n.oProj)},a.getConverterFromConverters=function(r,n){return(0,d.default)(r,n)},a})();l.Projection=s},1375:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ProjectionConstants=void 0;var o=(function(){function c(){}return c.EPSG="EPSG",c.EPSG_PREFIX="EPSG:",c.EPSG_CODE_3857=3857,c.EPSG_CODE_4326=4326,c.EPSG_CODE_900913=900913,c.EPSG_CODE_102113=102113,c.EPSG_3857=c.EPSG_PREFIX+c.EPSG_CODE_3857,c.EPSG_4326=c.EPSG_PREFIX+c.EPSG_CODE_4326,c.EPSG_900913=c.EPSG_PREFIX+c.EPSG_CODE_900913,c.EPSG_102113=c.EPSG_PREFIX+c.EPSG_CODE_102113,c.WEB_MERCATOR_MAX_LAT_RANGE=85.0511287798066,c.WEB_MERCATOR_MIN_LAT_RANGE=-85.05112877980659,c.WEB_MERCATOR_MAX_LON_RANGE=180,c.WEB_MERCATOR_MIN_LON_RANGE=-180,c.WEB_MERCATOR_HALF_WORLD_WIDTH=20037508342789244e-9,c.WGS84_HALF_WORLD_LON_WIDTH=180,c.WGS84_HALF_WORLD_LAT_HEIGHT=90,c})();l.ProjectionConstants=o},7977:function(_,l,o){var c=this&&this.__createBinding||(Object.create?function(E,x,M,S){S===void 0&&(S=M);var O=Object.getOwnPropertyDescriptor(x,M);O&&!("get"in O?!x.__esModule:O.writable||O.configurable)||(O={enumerable:!0,get:function(){return x[M]}}),Object.defineProperty(E,S,O)}:function(E,x,M,S){S===void 0&&(S=M),E[S]=x[M]}),d=this&&this.__setModuleDefault||(Object.create?function(E,x){Object.defineProperty(E,"default",{enumerable:!0,value:x})}:function(E,x){E.default=x}),m=this&&this.__importStar||function(E){if(E&&E.__esModule)return E;var x={};if(E!=null)for(var M in E)M!=="default"&&Object.prototype.hasOwnProperty.call(E,M)&&c(x,E,M);return d(x,E),x},h=this&&this.__awaiter||function(E,x,M,S){return new(M||(M=Promise))((function(O,C){function T(z){try{B(S.next(z))}catch(L){C(L)}}function R(z){try{B(S.throw(z))}catch(L){C(L)}}function B(z){var L;z.done?O(z.value):(L=z.value,L instanceof M?L:new M((function(Y){Y(L)}))).then(T,R)}B((S=S.apply(E,x||[])).next())}))},s=this&&this.__generator||function(E,x){var M,S,O,C,T={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return C={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function R(B){return function(z){return(function(L){if(M)throw new TypeError("Generator is already executing.");for(;C&&(C=0,L[0]&&(T=0)),T;)try{if(M=1,S&&(O=2&L[0]?S.return:L[0]?S.throw||((O=S.return)&&O.call(S),0):S.next)&&!(O=O.call(S,L[1])).done)return O;switch(S=0,O&&(L=[2&L[0],O.value]),L[0]){case 0:case 1:O=L;break;case 4:return T.label++,{value:L[1],done:!1};case 5:T.label++,S=L[1],L=[0];continue;case 7:L=T.ops.pop(),T.trys.pop();continue;default:if(!((O=(O=T.trys).length>0&&O[O.length-1])||L[0]!==6&&L[0]!==2)){T=0;continue}if(L[0]===3&&(!O||L[1]>O[0]&&L[1]<O[3])){T.label=L[1];break}if(L[0]===6&&T.label<O[1]){T.label=O[1],O=L;break}if(O&&T.label<O[2]){T.label=O[2],T.ops.push(L);break}O[2]&&T.ops.pop(),T.trys.pop();continue}L=x.call(E,T)}catch(Y){L=[6,Y],S=0}finally{M=O=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}})([B,z])}}},a=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(l,"__esModule",{value:!0}),l.TileCreator=void 0;var r=m(o(7769)),n=a(o(4472)),t=a(o(2331)),i=o(3684),u=o(3437),f=o(9325),p=o(824),y=o(5604),g=o(1375),b=(function(){function E(x,M,S,O,C,T,R,B,z){this.dispose=!1,this.canvas=null,this.pixelsAdded=!1,this.width=x,this.height=M,this.tileMatrix=S,this.projectionFrom=T.organization.toUpperCase()+":"+T.organization_coordsys_id,this.projectionFromDefinition=T.definition,this.projectionTo=R.toUpperCase(),this.projectionToDefinition=B,this.tileBoundingBox=C,this.tileMatrixSet=O,this.chunks=[],this.tileHeightUnitsPerPixel=C.height/M,this.tileWidthUnitsPerPixel=C.width/x,this.sameProjection=this.projectionFrom===this.projectionTo||this.projectionTo===g.ProjectionConstants.EPSG_3857&&(this.projectionFrom===g.ProjectionConstants.EPSG_900913||this.projectionFrom===g.ProjectionConstants.EPSG_102113),this.canvas=z}return E.create=function(x,M,S,O,C,T,R,B,z){return h(this,void 0,void 0,(function(){var L;return s(this,(function(Y){switch(Y.label){case 0:return[4,(L=new E(x,M,S,O,C,T,R,B,z)).initialize()];case 1:return Y.sent(),[2,L]}}))}))},E.prototype.initialize=function(){return h(this,void 0,void 0,(function(){return s(this,(function(x){switch(x.label){case 0:return[4,u.Canvas.initializeAdapter()];case 1:return x.sent(),this.canvas==null&&(this.canvas=u.Canvas.create(this.width,this.height),this.dispose=!0),this.ctx=this.canvas.getContext("2d"),this.tileCanvas=u.Canvas.create(this.tileMatrix.tile_width,this.tileMatrix.tile_height),this.tileContext=this.tileCanvas.getContext("2d"),this.imageData=u.Canvas.createImageData(this.width,this.height),[2,this]}}))}))},E.prototype.addPixel=function(x,M,S,O){var C=this.tileContext.getImageData(S,O,1,1);this.imageData.data.set(C.data,M*this.width*4+4*x),this.pixelsAdded=!0},E.prototype.addTile=function(x,M,S){return h(this,void 0,void 0,(function(){var O,C,T,R;return s(this,(function(B){switch(B.label){case 0:return[4,typeof x=="string"?r.fromFile(x):r.fromBuffer(x)];case 1:return O=B.sent(),[4,f.ImageUtils.getImage(x,O.mime)];case 2:return C=B.sent(),this.tileContext.clearRect(0,0,this.tileMatrix.tile_width,this.tileMatrix.tile_height),this.tileContext.drawImage(C.image,0,0),this.chunks=[],[4,this.projectTile(x,M,S)];case 3:if(B.sent(),this.pixelsAdded&&this.ctx.putImageData(this.imageData,0,0),this.chunks&&this.chunks.length)for(T=0;T<this.chunks.length;T++)R=this.chunks[T].position,this.ctx.drawImage(C.image,R.sx,R.sy,R.sWidth,R.sHeight,R.dx,R.dy,R.dWidth,R.dHeight);return u.Canvas.disposeImage(C),[2]}}))}))},E.prototype.projectTile=function(x,M,S){return h(this,void 0,void 0,(function(){var O;return s(this,(function(C){return O=i.TileBoundingBoxUtils.getTileBoundingBox(this.tileMatrixSet.boundingBox,this.tileMatrix,M,S),this.sameProjection?[2,this.cutAndScale(x,O)]:[2,this.reproject(x,O)]}))}))},E.prototype.cutAndScale=function(x,M){var S=i.TileBoundingBoxUtils.determinePositionAndScale(M,this.tileMatrix.tile_height,this.tileMatrix.tile_width,this.tileBoundingBox,this.height,this.width);S.xPositionInFinalTileStart>=this.width||S.yPositionInFinalTileStart>=this.height||this.addChunk(x,S)},E.prototype.addChunk=function(x,M){this.chunks.push({chunk:x,position:M})},E.prototype.reproject=function(x,M){return h(this,void 0,void 0,(function(){var S,O,C,T,R,B,z,L,Y,ie,$,Q,ce,be=this;return s(this,(function(Ae){if(typeof window<"u"&&window.Worker)return p.TileUtilities.getPiecePosition(M,this.tileBoundingBox,this.height,this.width,this.projectionTo,this.projectionToDefinition,this.projectionFrom,this.projectionFromDefinition,this.tileHeightUnitsPerPixel,this.tileWidthUnitsPerPixel,this.tileMatrix.pixel_x_size,this.tileMatrix.pixel_y_size),S={sourceImageData:this.tileContext.getImageData(0,0,this.tileMatrix.tile_width,this.tileMatrix.tile_height).data.buffer,height:this.height,width:this.width,projectionTo:this.projectionTo,projectionToDefinition:this.projectionToDefinition,projectionFrom:this.projectionFrom,projectionFromDefinition:this.projectionFromDefinition,maxLatitude:this.tileBoundingBox.maxLatitude,minLongitude:this.tileBoundingBox.minLongitude,tileWidthUnitsPerPixel:this.tileWidthUnitsPerPixel,tileHeightUnitsPerPixel:this.tileHeightUnitsPerPixel,tilePieceBoundingBox:JSON.stringify(M),tileBoundingBox:JSON.stringify(this.tileBoundingBox),pixel_y_size:this.tileMatrix.pixel_y_size,pixel_x_size:this.tileMatrix.pixel_x_size,tile_width:this.tileMatrix.tile_width,tile_height:this.tileMatrix.tile_height},[2,new Promise((function(we){try{(Xe=o(8034)(o(7591))).onmessage=function(st){be.canvas.getContext("2d").putImageData(new ImageData(new Uint8ClampedArray(st.data),be.height,be.width),0,0),we()},Xe.postMessage(S,[be.tileContext.getImageData(0,0,be.tileMatrix.tile_width,be.tileMatrix.tile_height).data.buffer])}catch{var Xe,Ve=(Xe=t.default)(S);be.canvas.getContext("2d").putImageData(new ImageData(new Uint8ClampedArray(Ve),be.height,be.width),0,0),we()}}))];O=this.height,C=this.width,T=this.tileMatrix.tile_height,R=this.tileMatrix.tile_width,B=void 0;try{y.Projection.hasProjection(this.projectionTo)==null&&y.Projection.loadProjection(this.projectionTo,this.projectionToDefinition),y.Projection.hasProjection(this.projectionFrom)==null&&y.Projection.loadProjection(this.projectionFrom,this.projectionFromDefinition),B=(0,n.default)(this.projectionTo,this.projectionFrom)}catch{}for(z=void 0,L=0;L<O;L++)for(z=this.tileBoundingBox.maxLatitude-L*this.tileHeightUnitsPerPixel,Y=0;Y<C;Y++)ie=this.tileBoundingBox.minLongitude+Y*this.tileWidthUnitsPerPixel,$=B.forward([ie,z]),Q=R-Math.round((M.maxLongitude-$[0])/this.tileMatrix.pixel_x_size),ce=Math.round((M.maxLatitude-$[1])/this.tileMatrix.pixel_y_size),Q>=0&&Q<R&&ce>=0&&ce<T&&this.addPixel(Y,L,Q,ce);return this.canvas.getContext("2d").putImageData(this.imageData,0,0),[2]}))}))},E.prototype.getCompleteTile=function(x){return h(this,void 0,void 0,(function(){return s(this,(function(M){return[2,u.Canvas.toDataURL(this.canvas,x)]}))}))},E.prototype.cleanup=function(){this.dispose&&u.Canvas.disposeCanvas(this.canvas),u.Canvas.disposeCanvas(this.tileCanvas)},E})();l.TileCreator=b},2544:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CustomFeaturesTile=void 0,l.CustomFeaturesTile=function(){this.compressFormat="png",this.tileBorderStrokeWidth=2,this.tileBorderColor="rgba(0, 0, 0, 1.0)",this.tileFillColor="rgba(0, 0, 0, 0.0625)",this.drawUnindexedTiles=!0}},3060:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}),m=this&&this.__awaiter||function(r,n,t,i){return new(t||(t=Promise))((function(u,f){function p(b){try{g(i.next(b))}catch(E){f(E)}}function y(b){try{g(i.throw(b))}catch(E){f(E)}}function g(b){var E;b.done?u(b.value):(E=b.value,E instanceof t?E:new t((function(x){x(E)}))).then(p,y)}g((i=i.apply(r,n||[])).next())}))},h=this&&this.__generator||function(r,n){var t,i,u,f,p={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(g){return function(b){return(function(E){if(t)throw new TypeError("Generator is already executing.");for(;f&&(f=0,E[0]&&(p=0)),p;)try{if(t=1,i&&(u=2&E[0]?i.return:E[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,E[1])).done)return u;switch(i=0,u&&(E=[2&E[0],u.value]),E[0]){case 0:case 1:u=E;break;case 4:return p.label++,{value:E[1],done:!1};case 5:p.label++,i=E[1],E=[0];continue;case 7:E=p.ops.pop(),p.trys.pop();continue;default:if(!((u=(u=p.trys).length>0&&u[u.length-1])||E[0]!==6&&E[0]!==2)){p=0;continue}if(E[0]===3&&(!u||E[1]>u[0]&&E[1]<u[3])){p.label=E[1];break}if(E[0]===6&&p.label<u[1]){p.label=u[1],u=E;break}if(u&&p.label<u[2]){p.label=u[2],p.ops.push(E);break}u[2]&&p.ops.pop(),p.trys.pop();continue}E=n.call(r,p)}catch(x){E=[6,x],i=0}finally{t=u=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}})([g,b])}}};Object.defineProperty(l,"__esModule",{value:!0}),l.NumberFeaturesTile=void 0;var s=o(3437),a=(function(r){function n(){var t=r.call(this)||this;return t.textSize=18,t.textFont="Noto Mono",t.textColor="rgba(255, 255, 255, 1.0)",t.circleStrokeWidth=3,t.circleBorderColor="rgba(0, 0, 0, 0.25)",t.circleFillColor="rgba(0, 0, 0, 1.0)",t.circlePaddingPercentage=.25,t.defaultFontRegistered=!1,t}return d(n,r),n.prototype.getTextSize=function(){return this.textSize},n.prototype.setTextSize=function(t){this.textSize=t},n.prototype.getTextColor=function(){return this.textColor},n.prototype.setTextColor=function(t){this.textColor=t},n.prototype.getCircleStrokeWidth=function(){return this.circleStrokeWidth},n.prototype.setCircleStrokeWidth=function(t){this.circleStrokeWidth=t},n.prototype.getCircleColor=function(){return this.circleBorderColor},n.prototype.setCircleColor=function(t){this.circleBorderColor=t},n.prototype.getCircleFillColor=function(){return this.circleFillColor},n.prototype.setCircleFillColor=function(t){this.circleFillColor=t},n.prototype.getCirclePaddingPercentage=function(){return this.circlePaddingPercentage},n.prototype.setCirclePaddingPercentage=function(t){if(t<0||t>1)throw new Error("Circle padding percentage must be between 0.0 and 1.0: "+t);this.circlePaddingPercentage=t},n.prototype.getTileBorderStrokeWidth=function(){return this.tileBorderStrokeWidth},n.prototype.setTileBorderStrokeWidth=function(t){this.tileBorderStrokeWidth=t},n.prototype.getTileBorderColor=function(){return this.tileBorderColor},n.prototype.setTileBorderColor=function(t){this.tileBorderColor=t},n.prototype.getTileFillColor=function(){return this.tileFillColor},n.prototype.setTileFillColor=function(t){this.tileFillColor=t},n.prototype.isDrawUnindexedTiles=function(){return this.drawUnindexedTiles},n.prototype.setDrawUnindexedTiles=function(t){this.drawUnindexedTiles=t},n.prototype.getCompressFormat=function(){return this.compressFormat},n.prototype.setCompressFormat=function(t){this.compressFormat=t},n.prototype.drawUnindexedTile=function(t,i,u){return u===void 0&&(u=null),m(this,void 0,void 0,(function(){var f;return h(this,(function(p){return f=null,this.drawUnindexedTiles&&(f=this.drawTile(t,i,"?",u)),[2,f]}))}))},n.prototype.drawTile=function(t,i,u,f){return m(this,void 0,void 0,(function(){var p=this;return h(this,(function(y){switch(y.label){case 0:return[4,s.Canvas.initializeAdapter()];case 1:return y.sent(),[2,new Promise((function(g){var b,E=!1;f!=null?b=f:(b=s.Canvas.create(t,i),E=!0);var x=b.getContext("2d");x.clearRect(0,0,t,i),p.tileFillColor!==null&&(x.fillStyle=p.tileFillColor,x.fillRect(0,0,t,i)),p.tileBorderColor!==null&&(x.strokeStyle=p.tileBorderColor,x.lineWidth=p.tileBorderStrokeWidth,x.strokeRect(0,0,t,i));var M=s.Canvas.measureText(x,p.textFont,p.textSize,u),S=p.textSize,O=Math.round(t/2),C=Math.round(i/2);if(p.circleBorderColor!=null||p.circleFillColor!=null){var T=Math.max(M,S),R=Math.round(T/2);R=Math.round(R+T*p.circlePaddingPercentage),p.circleFillColor!=null&&(x.fillStyle=p.circleFillColor,x.beginPath(),x.arc(O,C,R,0,2*Math.PI,!0),x.closePath(),x.fill()),p.circleBorderColor!=null&&(x.strokeStyle=p.circleBorderColor,x.lineWidth=p.circleStrokeWidth,x.beginPath(),x.arc(O,C,R,0,2*Math.PI,!0),x.closePath(),x.stroke())}s.Canvas.drawText(x,u,[O,C],p.textFont,p.textSize,p.textColor),s.Canvas.toDataURL(b,"image/"+p.compressFormat).then((function(B){E&&s.Canvas.disposeCanvas(b),g(B)}))}))]}}))}))},n})(o(2544).CustomFeaturesTile);l.NumberFeaturesTile=a},6667:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}),m=this&&this.__awaiter||function(r,n,t,i){return new(t||(t=Promise))((function(u,f){function p(b){try{g(i.next(b))}catch(E){f(E)}}function y(b){try{g(i.throw(b))}catch(E){f(E)}}function g(b){var E;b.done?u(b.value):(E=b.value,E instanceof t?E:new t((function(x){x(E)}))).then(p,y)}g((i=i.apply(r,n||[])).next())}))},h=this&&this.__generator||function(r,n){var t,i,u,f,p={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(g){return function(b){return(function(E){if(t)throw new TypeError("Generator is already executing.");for(;f&&(f=0,E[0]&&(p=0)),p;)try{if(t=1,i&&(u=2&E[0]?i.return:E[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,E[1])).done)return u;switch(i=0,u&&(E=[2&E[0],u.value]),E[0]){case 0:case 1:u=E;break;case 4:return p.label++,{value:E[1],done:!1};case 5:p.label++,i=E[1],E=[0];continue;case 7:E=p.ops.pop(),p.trys.pop();continue;default:if(!((u=(u=p.trys).length>0&&u[u.length-1])||E[0]!==6&&E[0]!==2)){p=0;continue}if(E[0]===3&&(!u||E[1]>u[0]&&E[1]<u[3])){p.label=E[1];break}if(E[0]===6&&p.label<u[1]){p.label=u[1],u=E;break}if(u&&p.label<u[2]){p.label=u[2],p.ops.push(E);break}u[2]&&p.ops.pop(),p.trys.pop();continue}E=n.call(r,p)}catch(x){E=[6,x],i=0}finally{t=u=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}})([g,b])}}};Object.defineProperty(l,"__esModule",{value:!0}),l.ShadedFeaturesTile=void 0;var s=o(3437),a=(function(r){function n(){return r.call(this)||this}return d(n,r),n.prototype.getTileBorderStrokeWidth=function(){return this.tileBorderStrokeWidth},n.prototype.setTileBorderStrokeWidth=function(t){this.tileBorderStrokeWidth=t},n.prototype.getTileBorderColor=function(){return this.tileBorderColor},n.prototype.setTileBorderColor=function(t){this.tileBorderColor=t},n.prototype.getTileFillColor=function(){return this.tileFillColor},n.prototype.setTileFillColor=function(t){this.tileFillColor=t},n.prototype.isDrawUnindexedTiles=function(){return this.drawUnindexedTiles},n.prototype.setDrawUnindexedTiles=function(t){this.drawUnindexedTiles=t},n.prototype.getCompressFormat=function(){return this.compressFormat},n.prototype.setCompressFormat=function(t){this.compressFormat=t},n.prototype.drawUnindexedTile=function(t,i,u){return u===void 0&&(u=null),m(this,void 0,void 0,(function(){var f;return h(this,(function(p){return f=null,this.drawUnindexedTiles&&(f=this.drawTile(t,i,"?",u)),[2,f]}))}))},n.prototype.drawTile=function(t,i,u,f){return m(this,void 0,void 0,(function(){var p=this;return h(this,(function(y){switch(y.label){case 0:return[4,s.Canvas.initializeAdapter()];case 1:return y.sent(),[2,new Promise((function(g){var b,E=!1;f!=null?b=f:(b=s.Canvas.create(t,i),E=!0);var x=b.getContext("2d");x.clearRect(0,0,t,i),p.tileFillColor!==null&&(x.fillStyle=p.tileFillColor,x.fillRect(0,0,t,i)),p.tileBorderColor!==null&&(x.strokeStyle=p.tileBorderColor,x.lineWidth=p.tileBorderStrokeWidth,x.strokeRect(0,0,t,i)),s.Canvas.toDataURL(b,"image/"+p.compressFormat).then((function(M){E&&s.Canvas.disposeCanvas(b),g(M)}))}))]}}))}))},n})(o(2544).CustomFeaturesTile);l.ShadedFeaturesTile=a},4538:(_,l)=>{var o;Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureDrawType=void 0,(o=l.FeatureDrawType||(l.FeatureDrawType={})).CIRCLE="CIRCLE",o.STROKE="STROKE",o.FILL="FILL",(function(c){c.nameFromType=function(d){return c[d]},c.fromName=function(d){switch(d){case"CIRCLE":return c.CIRCLE;case"STROKE":return c.STROKE;case"FILL":return c.FILL}}})(l.FeatureDrawType||(l.FeatureDrawType={}))},6063:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FeaturePaint=void 0;var o=(function(){function c(){this.featurePaints={}}return c.prototype.getPaint=function(d){return this.featurePaints[d]},c.prototype.setPaint=function(d,m){this.featurePaints[d]=m},c})();l.FeaturePaint=o},9957:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FeaturePaintCache=void 0;var c=o(6063),d=(function(){function m(h){h===void 0&&(h=m.DEFAULT_STYLE_PAINT_CACHE_SIZE),this.cacheSize=h,this.paintCache={},this.accessHistory=[]}return m.prototype.getFeaturePaintForStyleRow=function(h){return this.getFeaturePaint(h.id)},m.prototype.getFeaturePaint=function(h){var s=this.paintCache[h];if(s){var a=this.accessHistory.indexOf(h);a>-1&&this.accessHistory.splice(a,1),this.accessHistory.push(h)}return s},m.prototype.getPaintForStyleRow=function(h,s){return this.getPaint(h.id,s)},m.prototype.getPaint=function(h,s){var a=null,r=this.getFeaturePaint(h);return r!=null&&(a=r.getPaint(s)),a},m.prototype.setPaintForStyleRow=function(h,s,a){this.setPaint(h.id,s,a)},m.prototype.setPaint=function(h,s,a){var r=this.paintCache[h];if(r){var n=this.accessHistory.indexOf(h);n>-1&&this.accessHistory.splice(n,1)}else r=new c.FeaturePaint;if(r.setPaint(s,a),this.paintCache[h]=r,this.accessHistory.push(h),Object.keys(this.paintCache).length>this.cacheSize){var t=this.accessHistory.shift();t&&delete this.paintCache[t]}},m.prototype.remove=function(h){var s=this.paintCache[h];if(delete this.paintCache[h],s){var a=this.accessHistory.indexOf(h);a>-1&&this.accessHistory.splice(a,1)}return s},m.prototype.clear=function(){this.paintCache={},this.accessHistory=[]},m.prototype.resize=function(h){this.cacheSize=h;var s=Object.keys(this.paintCache);if(s.length>h)for(var a=s.length-h,r=0;r<a;r++){var n=this.accessHistory.shift();n&&delete this.paintCache[n]}},m.DEFAULT_STYLE_PAINT_CACHE_SIZE=100,m})();l.FeaturePaintCache=d},943:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GeometryCache=void 0;var o=(function(){function c(d){d===void 0&&(d=c.DEFAULT_GEOMETRY_CACHE_SIZE),this.cacheSize=d,this.geometryCache={},this.accessHistory=[]}return c.prototype.getGeometryForFeatureRow=function(d){return this.getGeometry(d.id)},c.prototype.getGeometry=function(d){var m=this.geometryCache[d];if(m){var h=this.accessHistory.indexOf(d);h>-1&&this.accessHistory.splice(h,1),this.accessHistory.push(d)}return m},c.prototype.setGeometry=function(d,m){var h=this.accessHistory.indexOf(d);if(h>-1&&this.accessHistory.splice(h,1),this.geometryCache[d]=m,this.accessHistory.push(d),Object.keys(this.geometryCache).length>this.cacheSize){var s=this.accessHistory.shift();s&&delete this.geometryCache[s]}},c.prototype.remove=function(d){var m=this.geometryCache[d];if(delete this.geometryCache[d],m){var h=this.accessHistory.indexOf(d);h>-1&&this.accessHistory.splice(h,1)}return m},c.prototype.clear=function(){this.geometryCache={},this.accessHistory=[]},c.prototype.resize=function(d){this.cacheSize=d;var m=Object.keys(this.geometryCache);if(m.length>d)for(var h=m.length-d,s=0;s<h;s++){var a=this.accessHistory.shift();a&&delete this.geometryCache[a]}},c.DEFAULT_GEOMETRY_CACHE_SIZE=100,c})();l.GeometryCache=o},297:function(_,l,o){var c=o(5108),d=this&&this.__awaiter||function(O,C,T,R){return new(T||(T=Promise))((function(B,z){function L($){try{ie(R.next($))}catch(Q){z(Q)}}function Y($){try{ie(R.throw($))}catch(Q){z(Q)}}function ie($){var Q;$.done?B($.value):(Q=$.value,Q instanceof T?Q:new T((function(ce){ce(Q)}))).then(L,Y)}ie((R=R.apply(O,C||[])).next())}))},m=this&&this.__generator||function(O,C){var T,R,B,z,L={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return z={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function Y(ie){return function($){return(function(Q){if(T)throw new TypeError("Generator is already executing.");for(;z&&(z=0,Q[0]&&(L=0)),L;)try{if(T=1,R&&(B=2&Q[0]?R.return:Q[0]?R.throw||((B=R.return)&&B.call(R),0):R.next)&&!(B=B.call(R,Q[1])).done)return B;switch(R=0,B&&(Q=[2&Q[0],B.value]),Q[0]){case 0:case 1:B=Q;break;case 4:return L.label++,{value:Q[1],done:!1};case 5:L.label++,R=Q[1],Q=[0];continue;case 7:Q=L.ops.pop(),L.trys.pop();continue;default:if(!((B=(B=L.trys).length>0&&B[B.length-1])||Q[0]!==6&&Q[0]!==2)){L=0;continue}if(Q[0]===3&&(!B||Q[1]>B[0]&&Q[1]<B[3])){L.label=Q[1];break}if(Q[0]===6&&L.label<B[1]){L.label=B[1],B=Q;break}if(B&&L.label<B[2]){L.label=B[2],L.ops.push(Q);break}B[2]&&L.ops.pop(),L.trys.pop();continue}Q=C.call(O,L)}catch(ce){Q=[6,ce],R=0}finally{T=B=0}if(5&Q[0])throw Q[1];return{value:Q[0]?Q[1]:void 0,done:!0}})([ie,$])}}},h=this&&this.__values||function(O){var C=typeof Symbol=="function"&&Symbol.iterator,T=C&&O[C],R=0;if(T)return T.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&R>=O.length&&(O=void 0),{value:O&&O[R++],done:!O}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(l,"__esModule",{value:!0}),l.FeatureTiles=void 0;var a=s(o(7383)),r=s(o(3809)),n=s(o(6479)),t=o(3684),i=o(2527),u=o(8600),f=o(943),p=o(4538),y=o(9957),g=o(5211),b=o(6536),E=o(3437),x=o(5604),M=o(1375),S=(function(){function O(C,T,R){T===void 0&&(T=256),R===void 0&&(R=256),this.featureDao=C,this.tileWidth=T,this.tileHeight=R,this.projection=null,this.webMercatorProjection=null,this.simplifyGeometries=!0,this.simplifyToleranceInPixels=1,this.compressFormat="png",this.pointRadius=4,this.pointPaint=new g.Paint,this.pointIcon=null,this.linePaint=new g.Paint,this._lineStrokeWidth=2,this.polygonPaint=new g.Paint,this._polygonStrokeWidth=2,this.fillPolygon=!0,this.polygonFillPaint=new g.Paint,this.featurePaintCache=new y.FeaturePaintCache,this.geometryCache=new f.GeometryCache,this.cacheGeometries=!0,this.iconCache=new u.IconCache,this._scale=1,this.maxFeaturesPerTile=null,this.maxFeaturesTileDraw=null,this.projection=this.featureDao.projection,this.linePaint.strokeWidth=2,this.polygonPaint.strokeWidth=2,this.polygonFillPaint.color="#00000011",this.geoPackage=this.featureDao.geoPackage,this.geoPackage!=null&&(this.featureTableStyles=new b.FeatureTableStyles(this.geoPackage,C.table),this.featureTableStyles.has()||(this.featureTableStyles=null)),this.webMercatorProjection=x.Projection.getWebMercatorToWGS84Converter(),this.calculateDrawOverlap()}return O.prototype.cleanup=function(){this.clearIconCache(),this.pointIcon&&(E.Canvas.disposeImage(this.pointIcon.getIcon()),this.pointIcon=null)},Object.defineProperty(O.prototype,"drawOverlap",{set:function(C){this.widthDrawOverlap=C,this.heightDrawOverlap=C},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"simplifyTolerance",{get:function(){return this.simplifyToleranceInPixels},set:function(C){this.simplifyToleranceInPixels=C},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"widthDrawOverlap",{get:function(){return this.widthOverlap},set:function(C){this.widthOverlap=C},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"heightDrawOverlap",{get:function(){return this.heightOverlap},set:function(C){this.heightOverlap=C},enumerable:!1,configurable:!0}),O.prototype.ignoreFeatureTableStyles=function(){this.featureTableStyles=null,this.calculateDrawOverlap()},O.prototype.clearCache=function(){this.clearStylePaintCache(),this.clearIconCache()},O.prototype.clearStylePaintCache=function(){this.featurePaintCache.clear()},Object.defineProperty(O.prototype,"stylePaintCacheSize",{set:function(C){this.featurePaintCache.resize(C)},enumerable:!1,configurable:!0}),O.prototype.clearIconCache=function(){this.iconCache.clear()},Object.defineProperty(O.prototype,"iconCacheSize",{set:function(C){this.iconCache.resize(C)},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"scale",{get:function(){return this._scale},set:function(C){this._scale=C,this.linePaint.strokeWidth=C*this.lineStrokeWidth,this.polygonPaint.strokeWidth=C*this.polygonStrokeWidth,this.featurePaintCache.clear()},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"geometryCacheMaxSize",{set:function(C){this.geometryCache.resize(C)},enumerable:!1,configurable:!0}),O.prototype.calculateDrawOverlap=function(){this.pointIcon?(this.heightOverlap=this.scale*this.pointIcon.getHeight(),this.widthOverlap=this.scale*this.pointIcon.getWidth()):(this.heightOverlap=this.scale*this.pointRadius,this.widthOverlap=this.scale*this.pointRadius);var C=this.scale*this.lineStrokeWidth/2;this.heightOverlap=Math.max(this.heightOverlap,C),this.widthOverlap=Math.max(this.widthOverlap,C);var T=this.scale*this.polygonStrokeWidth/2;if(this.heightOverlap=Math.max(this.heightOverlap,T),this.widthOverlap=Math.max(this.widthOverlap,T),this.featureTableStyles!=null&&this.featureTableStyles.has()){var R=[],B=this.featureTableStyles.getAllTableStyleIds();B!=null&&(R=R.concat(B));var z=this.featureTableStyles.getAllStyleIds();z!=null&&(R=R.concat(z.filter((function(he){return R.indexOf(he)===-1}))));for(var L=this.featureTableStyles.getStyleDao(),Y=0;Y<R.length;Y++){var ie=R[Y],$=L.queryForId(ie),Q=this.scale*($.getWidthOrDefault()/2);this.widthOverlap=Math.max(this.widthOverlap,Q),this.heightOverlap=Math.max(this.heightOverlap,Q)}var ce=[],be=this.featureTableStyles.getAllTableIconIds();be!=null&&(ce=ce.concat(be));var Ae=this.featureTableStyles.getAllIconIds();Ae!=null&&(ce=ce.concat(Ae.filter((function(he){return ce.indexOf(he)===-1}))));var we=this.featureTableStyles.getIconDao();for(Y=0;Y<ce.length;Y++){var Xe=ce[Y],Ve=we.queryForId(Xe).derivedDimensions,st=this.scale*Math.ceil(Ve[0]),tt=this.scale*Math.ceil(Ve[1]);this.widthOverlap=Math.max(this.widthOverlap,st),this.heightOverlap=Math.max(this.heightOverlap,tt)}}},Object.defineProperty(O.prototype,"drawOverlapsWithPixels",{set:function(C){this.widthOverlap=C,this.heightOverlap=C},enumerable:!1,configurable:!0}),O.prototype.getFeatureStyle=function(C){var T=null;return this.featureTableStyles!=null&&(T=this.featureTableStyles.getFeatureStyleForFeatureRow(C)),T},O.prototype.getPointPaint=function(C){var T=this.getFeatureStylePaint(C,p.FeatureDrawType.CIRCLE);return T==null&&(T=this.pointPaint),T},O.prototype.getLinePaint=function(C){var T=this.getFeatureStylePaint(C,p.FeatureDrawType.STROKE);return T==null&&(T=this.linePaint),T},O.prototype.getPolygonPaint=function(C){var T=this.getFeatureStylePaint(C,p.FeatureDrawType.STROKE);return T==null&&(T=this.polygonPaint),T},O.prototype.getPolygonFillPaint=function(C){var T=null,R=!1;if(C!=null){var B=C.style;B!=null&&(B.hasFillColor()?T=this.getStylePaint(B,p.FeatureDrawType.FILL):R=B.hasColor())}return T===null&&!R&&this.fillPolygon&&(T=this.polygonFillPaint),T},O.prototype.getFeatureStylePaint=function(C,T){var R=null;if(C!=null){var B=C.style;B!=null&&B.hasColor()&&(R=this.getStylePaint(B,T))}return R},O.prototype.getStylePaint=function(C,T){var R=this.featurePaintCache.getPaintForStyleRow(C,T);if(R==null){var B=null,z=null;if(T===p.FeatureDrawType.CIRCLE)B=C.getColor();else if(T===p.FeatureDrawType.STROKE)B=C.getColor(),z=this.scale*C.getWidthOrDefault();else{if(T!==p.FeatureDrawType.FILL)throw new Error("Unsupported Draw Type: "+T);B=C.getFillColor(),z=this.scale*C.getWidthOrDefault()}var L=new g.Paint;L.color=B,z!=null&&(L.strokeWidth=z),(R=this.featurePaintCache.getPaintForStyleRow(C,T))==null&&(this.featurePaintCache.setPaintForStyleRow(C,T,L),R=L)}return R},Object.defineProperty(O.prototype,"pointColor",{get:function(){return this.pointPaint.color},set:function(C){this.pointPaint.color=C},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"lineStrokeWidth",{get:function(){return this._lineStrokeWidth},set:function(C){this._lineStrokeWidth=C,this.linePaint.strokeWidth=this.scale*this.lineStrokeWidth},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"lineColor",{get:function(){return this.linePaint.color},set:function(C){this.linePaint.color=C},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"polygonStrokeWidth",{get:function(){return this._polygonStrokeWidth},set:function(C){this._polygonStrokeWidth=C,this.polygonPaint.strokeWidth=this.scale*C},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"polygonColor",{get:function(){return this.polygonPaint.color},set:function(C){this.polygonPaint.color=C},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"polygonFillColor",{get:function(){return this.polygonFillPaint.color},set:function(C){this.polygonFillPaint.color=C},enumerable:!1,configurable:!0}),O.prototype.getFeatureCountXYZ=function(C,T,R){var B=t.TileBoundingBoxUtils.getWebMercatorBoundingBoxFromXYZ(C,T,R);return B=this.expandBoundingBox(B,M.ProjectionConstants.EPSG_3857),this.featureDao.countWebMercatorBoundingBox(B)},O.prototype.drawTile=function(C,T,R,B){return B===void 0&&(B=null),d(this,void 0,void 0,(function(){return m(this,(function(z){return[2,this.draw3857Tile(C,T,R,B)]}))}))},O.prototype.draw3857Tile=function(C,T,R,B){return B===void 0&&(B=null),d(this,void 0,void 0,(function(){return m(this,(function(z){return this.featureDao.isIndexed()?[2,this.drawTileQueryIndex(C,T,R,M.ProjectionConstants.EPSG_3857,B)]:[2,this.drawTileQueryAll(C,T,R,M.ProjectionConstants.EPSG_3857,B)]}))}))},O.prototype.draw4326Tile=function(C,T,R,B){return B===void 0&&(B=null),d(this,void 0,void 0,(function(){return m(this,(function(z){return this.featureDao.isIndexed()?[2,this.drawTileQueryIndex(C,T,R,M.ProjectionConstants.EPSG_4326,B)]:[2,this.drawTileQueryAll(C,T,R,M.ProjectionConstants.EPSG_4326,B)]}))}))},O.prototype.drawTileQueryAll=function(C,T,R,B,z){return d(this,void 0,void 0,(function(){var L,Y;return m(this,(function(ie){return L=B===M.ProjectionConstants.EPSG_3857?t.TileBoundingBoxUtils.getWebMercatorBoundingBoxFromXYZ(C,T,R):t.TileBoundingBoxUtils.getWGS84BoundingBoxFromXYZ(C,T,R),Y=this.featureDao.getCount(),this.maxFeaturesPerTile===null||Y<=this.maxFeaturesPerTile?[2,this.drawTileWithBoundingBox(L,R,B,z)]:this.maxFeaturesTileDraw!=null?[2,this.maxFeaturesTileDraw.drawUnindexedTile(this.tileWidth,this.tileHeight,z)]:[2]}))}))},O.prototype.getTransformFunction=function(C){var T=this,R=x.Projection.getConverter(C);return x.Projection.convertersMatch(R,this.projection)?function(B){return B}:x.Projection.isWebMercator(R)&&x.Projection.isWGS84(this.projection)?function(B){return x.Projection.getConverterFromConverters(T.projection,C).forward([Math.max(M.ProjectionConstants.WEB_MERCATOR_MIN_LON_RANGE,Math.min(M.ProjectionConstants.WEB_MERCATOR_MAX_LON_RANGE,B[0])),Math.max(M.ProjectionConstants.WEB_MERCATOR_MIN_LAT_RANGE,Math.min(M.ProjectionConstants.WEB_MERCATOR_MAX_LAT_RANGE,B[1]))])}:x.Projection.getConverterFromConverters(this.projection,C).forward},O.prototype.drawTileQueryIndex=function(C,T,R,B,z){return d(this,void 0,void 0,(function(){var L,Y,ie,$,Q,ce,be,Ae,we,Xe,Ve,st,tt,he,de,ze,P,A,D;return m(this,(function(W){switch(W.label){case 0:return ie=!1,Q=B===M.ProjectionConstants.EPSG_3857?t.TileBoundingBoxUtils.getWebMercatorBoundingBoxFromXYZ(C,T,R):t.TileBoundingBoxUtils.getWGS84BoundingBoxFromXYZ(C,T,R),ce=this.expandBoundingBox(Q,B),be=this.tileWidth,Ae=this.tileHeight,[4,E.Canvas.initializeAdapter()];case 1:if(W.sent(),z!=null?(Y=(L=z).getContext("2d")).clearRect(0,0,be,Ae):(L=E.Canvas.create(be,Ae),Y=L.getContext("2d"),ie=!0),!((we=this.featureDao.countInBoundingBox(ce,B))>0))return[3,16];if(!(this.maxFeaturesPerTile==null||we<=this.maxFeaturesPerTile))return[3,13];Xe=this.getTransformFunction(B),Ve=this.featureDao.fastQueryBoundingBox(ce,B),W.label=2;case 2:W.trys.push([2,9,10,11]),st=h(Ve),tt=st.next(),W.label=3;case 3:if(tt.done)return[3,8];if((he=tt.value).geometry==null)return[3,7];de=null,this.cacheGeometries&&(de=this.geometryCache.getGeometry(he.id)),de==null&&(de=he.geometry.geometry.toGeoJSON(),this.geometryCache.setGeometry(he.id,de)),ze=this.getFeatureStyle(he),W.label=4;case 4:return W.trys.push([4,6,,7]),[4,this.drawGeometry(de,Y,Q,ze,Xe)];case 5:return W.sent(),[3,7];case 6:return W.sent(),c.error("Failed to draw feature in tile. Id: "+he.id+", Table: "+this.featureDao.table_name),[3,7];case 7:return tt=st.next(),[3,3];case 8:return[3,11];case 9:return P=W.sent(),A={error:P},[3,11];case 10:try{tt&&!tt.done&&(D=st.return)&&D.call(st)}finally{if(A)throw A.error}return[7];case 11:return[4,E.Canvas.toDataURL(L,"image/"+this.compressFormat)];case 12:return $=W.sent(),[3,15];case 13:return this.maxFeaturesTileDraw==null?[3,15]:[4,this.maxFeaturesTileDraw.drawTile(be,Ae,we.toString(),L)];case 14:$=W.sent(),W.label=15;case 15:return[3,18];case 16:return[4,E.Canvas.toDataURL(L,"image/"+this.compressFormat)];case 17:$=W.sent(),W.label=18;case 18:return ie&&E.Canvas.disposeCanvas(L),[2,$]}}))}))},O.prototype.drawTileWithBoundingBox=function(C,T,R,B){return d(this,void 0,void 0,(function(){var z,L,Y,ie,$,Q,ce,be,Ae,we,Xe,Ve,st,tt,he,de,ze,P;return m(this,(function(A){switch(A.label){case 0:return z=this.tileWidth,L=this.tileHeight,ie=!1,[4,E.Canvas.initializeAdapter()];case 1:A.sent(),B!=null?Y=B:(Y=E.Canvas.create(z,L),ie=!0),($=Y.getContext("2d")).clearRect(0,0,z,L),Q=this.featureDao,ce=Q.queryForEach(void 0,void 0,void 0,void 0,void 0,[Q.table.getIdColumn().getName(),Q.table.getGeometryColumn().getName()]),be=this.getTransformFunction(R),A.label=2;case 2:A.trys.push([2,9,10,11]),Ae=h(ce),we=Ae.next(),A.label=3;case 3:if(we.done)return[3,8];if(Xe=we.value,(Ve=Q.getRow(Xe)).geometry==null)return[3,7];if(st=null,this.cacheGeometries&&(st=this.geometryCache.getGeometryForFeatureRow(Ve)),st==null&&(st=Ve.geometry.geometry.toGeoJSON(),this.geometryCache.setGeometry(Ve.id,st)),st==null)return[3,7];tt=this.getFeatureStyle(Ve),A.label=4;case 4:return A.trys.push([4,6,,7]),[4,this.drawGeometry(st,$,C,tt,be)];case 5:return A.sent(),[3,7];case 6:return A.sent(),c.error("Failed to draw feature in tile. Id: "+Ve.id+", Table: "+this.featureDao.table_name),[3,7];case 7:return we=Ae.next(),[3,3];case 8:return[3,11];case 9:return he=A.sent(),ze={error:he},[3,11];case 10:try{we&&!we.done&&(P=Ae.return)&&P.call(Ae)}finally{if(ze)throw ze.error}return[7];case 11:return[4,E.Canvas.toDataURL(Y,"image/"+this.compressFormat)];case 12:return de=A.sent(),ie&&E.Canvas.disposeCanvas(Y),[2,de]}}))}))},O.prototype.drawPoint=function(C,T,R,B,z){return d(this,void 0,void 0,(function(){var L,Y,ie,$,Q,ce,be,Ae,we,Xe,Ve,st,tt,he;return m(this,(function(de){switch(de.label){case 0:return Q=z(C.coordinates),ce=t.TileBoundingBoxUtils.getXPixel(this.tileWidth,R,Q[0]),be=t.TileBoundingBoxUtils.getYPixel(this.tileHeight,R,Q[1]),B!=null&&B.useIcon()?(Ae=B.icon,[4,this.iconCache.createIcon(Ae)]):[3,2];case 1:return we=de.sent(),L=Math.round(this.scale*we.width),Y=Math.round(this.scale*we.height),ce>=0-L&&ce<=this.tileWidth+L&&be>=0-Y&&be<=this.tileHeight+Y&&(ie=Math.round(ce-Ae.anchorUOrDefault*L),$=Math.round(be-Ae.anchorVOrDefault*Y),T.drawImage(we.image,ie,$,L,Y)),[3,3];case 2:if(this.pointIcon!=null){if(L=Math.round(this.scale*this.pointIcon.getWidth()),Y=Math.round(this.scale*this.pointIcon.getHeight()),ce>=0-L&&ce<=this.tileWidth+L&&be>=0-Y&&be<=this.tileHeight+Y){ie=Math.round(ce-this.scale*this.pointIcon.getXOffset()),$=Math.round(be-this.scale*this.pointIcon.getYOffset());try{T.drawImage(this.pointIcon.getIcon().image,ie,$,L,Y)}catch{}}}else T.save(),Xe=null,B!=null&&(Ve=B.style)!=null&&(Xe=this.scale*(Ve.getWidthOrDefault()/2)),Xe==null&&(Xe=this.scale*this.pointRadius),st=this.getPointPaint(B),ce>=0-Xe&&ce<=this.tileWidth+Xe&&be>=0-Xe&&be<=this.tileHeight+Xe&&(tt=Math.round(ce),he=Math.round(be),T.beginPath(),T.arc(tt,he,Xe,0,2*Math.PI,!0),T.closePath(),T.fillStyle=st.colorRGBA,T.fill()),T.restore();de.label=3;case 3:return[2]}}))}))},O.prototype.simplifyPoints=function(C,T){return(0,n.default)(C.map((function(R){return{x:R[0],y:R[1]}})),this.simplifyToleranceInPixels,!1).map((function(R){return[R.x,R.y]}))},O.prototype.getPath=function(C,T,R,B,z){var L=this;B===void 0&&(B=!1);var Y=C.coordinates.map((function(Q){var ce=z(Q.slice());return[t.TileBoundingBoxUtils.getXPixel(L.tileWidth,R,ce[0]),t.TileBoundingBoxUtils.getYPixel(L.tileHeight,R,ce[1])]})),ie=this.simplifyGeometries?this.simplifyPoints(Y,B):Y;if(ie.length>1){T.moveTo(ie[0][0],ie[0][1]);for(var $=1;$<ie.length;$++)T.lineTo(ie[$][0],ie[$][1])}},O.prototype.drawLine=function(C,T,R,B,z){T.save(),T.beginPath();var L=this.getLinePaint(R);T.strokeStyle=L.colorRGBA,T.lineWidth=L.strokeWidth,this.getPath(C,T,B,!1,z),T.stroke(),T.closePath(),T.restore()},O.prototype.drawPolygon=function(C,T,R,B,z,L,Y){Y===void 0&&(Y=!0),R.save(),R.beginPath(),(0,r.default)(C.coordinates)||(C.coordinates=C.coordinates.reverse()),this.getPath(C,R,z,!0,L),R.closePath();for(var ie=0;ie<T.length;ie++)(0,r.default)(T[ie].coordinates)&&(T[ie].coordinates=T[ie].coordinates.reverse()),this.getPath(T[ie],R,z,!0,L),R.closePath();var $=this.getPolygonFillPaint(B);Y&&$!==void 0&&$!=null&&(R.fillStyle=$.colorRGBA,R.fill());var Q=this.getPolygonPaint(B);R.strokeStyle=Q.colorRGBA,R.lineWidth=Q.strokeWidth,R.stroke(),R.restore()},O.prototype.drawGeometry=function(C,T,R,B,z){return d(this,void 0,void 0,(function(){var L,Y,ie,$,Q=this;return m(this,(function(ce){switch(ce.label){case 0:return C.type!=="Point"?[3,2]:[4,this.drawPoint(C,T,R,B,z)];case 1:return ce.sent(),[3,19];case 2:return C.type!=="LineString"?[3,3]:(this.drawLine(C,T,B,R,z),[3,19]);case 3:return C.type!=="Polygon"?[3,4]:((Y=(0,a.default)(C)).type==="Feature"?Y.geometry.type==="LineString"?this.drawPolygon(Y.geometry,[],T,B,R,z):Y.geometry.type==="MultiLineString"&&(ie={type:"LineString",coordinates:Y.geometry.coordinates[0]},$=Y.geometry.coordinates.slice(1).map((function(be){return{type:"LineString",coordinates:be}})),this.drawPolygon(ie,$,T,B,R,z)):Y.features.forEach((function(be){if(be.geometry.type==="LineString")Q.drawPolygon(be.geometry,[],T,B,R,z);else if(be.geometry.type==="MultiLineString"){var Ae={type:"LineString",coordinates:be.geometry.coordinates[0]},we=be.geometry.coordinates.slice(1).map((function(Xe){return{type:"LineString",coordinates:Xe}}));Q.drawPolygon(Ae,we,T,B,R,z)}})),[3,19]);case 4:if(C.type!=="MultiPoint")return[3,9];L=0,ce.label=5;case 5:return L<C.coordinates.length?[4,this.drawPoint({type:"Point",coordinates:C.coordinates[L]},T,R,B,z)]:[3,8];case 6:ce.sent(),ce.label=7;case 7:return L++,[3,5];case 8:return[3,19];case 9:if(C.type!=="MultiLineString")return[3,10];for(L=0;L<C.coordinates.length;L++)this.drawLine({type:"LineString",coordinates:C.coordinates[L]},T,B,R,z);return[3,19];case 10:if(C.type!=="MultiPolygon")return[3,15];L=0,ce.label=11;case 11:return L<C.coordinates.length?[4,this.drawGeometry({type:"Polygon",coordinates:C.coordinates[L]},T,R,B,z)]:[3,14];case 12:ce.sent(),ce.label=13;case 13:return L++,[3,11];case 14:return[3,19];case 15:if(C.type!=="GeometryCollection")return[3,19];L=0,ce.label=16;case 16:return L<C.geometries.length?[4,this.drawGeometry(C.geometries[L],T,R,B,z)]:[3,19];case 17:ce.sent(),ce.label=18;case 18:return L++,[3,16];case 19:return[2]}}))}))},O.prototype.expandBoundingBox=function(C,T){var R=t.TileBoundingBoxUtils.getLongitudeFromPixel(this.tileWidth,C,C,0-this.widthOverlap),B=t.TileBoundingBoxUtils.getLongitudeFromPixel(this.tileWidth,C,C,this.tileWidth+this.widthOverlap),z=t.TileBoundingBoxUtils.getLatitudeFromPixel(this.tileHeight,C,C,0-this.heightOverlap),L=t.TileBoundingBoxUtils.getLatitudeFromPixel(this.tileHeight,C,C,this.tileHeight+this.heightOverlap);return R=Math.min(R,C.minLongitude),B=Math.max(B,C.maxLongitude),L=Math.min(L,C.minLatitude),z=Math.max(z,C.maxLatitude),T===M.ProjectionConstants.EPSG_3857?(R=Math.max(R,-1*M.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH),B=Math.min(B,M.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH),L=Math.max(L,-1*M.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH),z=Math.min(z,M.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH)):(R=Math.max(R,-1*M.ProjectionConstants.WGS84_HALF_WORLD_LON_WIDTH),B=Math.min(B,M.ProjectionConstants.WGS84_HALF_WORLD_LON_WIDTH),L=Math.max(L,-1*M.ProjectionConstants.WGS84_HALF_WORLD_LAT_HEIGHT),z=Math.min(z,M.ProjectionConstants.WGS84_HALF_WORLD_LAT_HEIGHT)),new i.BoundingBox(R,B,L,z)},O})();l.FeatureTiles=S},5211:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Paint=void 0;var o=(function(){function c(){this._color="#000000FF",this._strokeWidth=1}return Object.defineProperty(c.prototype,"color",{get:function(){return this._color},set:function(d){this._color=d},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"colorRGBA",{get:function(){var d=parseInt(this.color.substr(1,2),16),m=parseInt(this.color.substr(3,2),16),h=parseInt(this.color.substr(5,2),16),s=1;return this.color.length>7&&(s=parseInt(this.color.substr(7,2),16)/255),"rgba("+d+","+m+","+h+","+s+")"},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(d){this._strokeWidth=d},enumerable:!1,configurable:!0}),c})();l.Paint=o},9325:function(_,l,o){var c=o(5108),d=this&&this.__awaiter||function(n,t,i,u){return new(i||(i=Promise))((function(f,p){function y(E){try{b(u.next(E))}catch(x){p(x)}}function g(E){try{b(u.throw(E))}catch(x){p(x)}}function b(E){var x;E.done?f(E.value):(x=E.value,x instanceof i?x:new i((function(M){M(x)}))).then(y,g)}b((u=u.apply(n,t||[])).next())}))},m=this&&this.__generator||function(n,t){var i,u,f,p,y={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(b){return function(E){return(function(x){if(i)throw new TypeError("Generator is already executing.");for(;p&&(p=0,x[0]&&(y=0)),y;)try{if(i=1,u&&(f=2&x[0]?u.return:x[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,x[1])).done)return f;switch(u=0,f&&(x=[2&x[0],f.value]),x[0]){case 0:case 1:f=x;break;case 4:return y.label++,{value:x[1],done:!1};case 5:y.label++,u=x[1],x=[0];continue;case 7:x=y.ops.pop(),y.trys.pop();continue;default:if(!((f=(f=y.trys).length>0&&f[f.length-1])||x[0]!==6&&x[0]!==2)){y=0;continue}if(x[0]===3&&(!f||x[1]>f[0]&&x[1]<f[3])){y.label=x[1];break}if(x[0]===6&&y.label<f[1]){y.label=f[1],f=x;break}if(f&&y.label<f[2]){y.label=f[2],y.ops.push(x);break}f[2]&&y.ops.pop(),y.trys.pop();continue}x=t.call(n,y)}catch(M){x=[6,M],u=0}finally{i=f=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:void 0,done:!0}})([b,E])}}},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.ImageUtils=void 0;var s=h(o(7935)),a=o(3437),r=(function(){function n(){}return n.getImageSize=function(t){return s.default.imageSize(t)},n.getImage=function(t,i){return i===void 0&&(i="image/png"),d(this,void 0,void 0,(function(){return m(this,(function(u){return[2,new Promise((function(f){a.Canvas.initializeAdapter().then((function(){a.Canvas.createImage(t,i).then((function(p){f(p)})).catch((function(p){c.error(p),f(null)}))})).catch((function(p){c.error(p),f(null)}))}))]}))}))},n.getScaledImage=function(t,i){return d(this,void 0,void 0,(function(){return m(this,(function(u){return[2,new Promise((function(f){n.getImage(t).then((function(p){i===1?f(p):a.Canvas.scaleImage(p,i).then((function(y){a.Canvas.disposeImage(p),f(y)})).catch((function(y){a.Canvas.disposeImage(p),c.error(y),f(null)}))})).catch((function(p){c.error(p),f(null)}))}))]}))}))},n.scaleImage=function(t,i,u){return d(this,void 0,void 0,(function(){return m(this,(function(f){return[2,new Promise((function(p){a.Canvas.scaleImageToDimensions(t,i,u).then((function(y){a.Canvas.disposeImage(t),p(y)})).catch((function(y){a.Canvas.disposeImage(t),c.error(y),p(null)}))}))]}))}))},n})();l.ImageUtils=r},1938:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TileMatrix=void 0;var o=(function(){function c(){}return Object.defineProperty(c.prototype,"contents",{set:function(d){d&&d.data_type==="tiles"&&(this.table_name=d.table_name)},enumerable:!1,configurable:!0}),c.TABLE_NAME="tableName",c.ZOOM_LEVEL="zoomLevel",c.MATRIX_WIDTH="matrixWidth",c.MATRIX_HEIGHT="matrixHeight",c.TILE_WIDTH="tileWidth",c.TILE_HEIGHT="tileHeight",c.PIXEL_X_SIZE="pixelXSize",c.PIXEL_Y_SIZE="pixelYSize",c})();l.TileMatrix=o},3506:function(_,l,o){var c,d=this&&this.__extends||(c=function(n,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(i[f]=u[f])},c(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}c(n,t),n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(l,"__esModule",{value:!0}),l.TileMatrixDao=void 0;var m=o(4115),h=o(1938),s=o(8877),a=o(8334),r=(function(n){function t(){var i=n!==null&&n.apply(this,arguments)||this;return i.gpkgTableName="gpkg_tile_matrix",i.idColumns=[t.COLUMN_PK1,t.COLUMN_PK2],i.columns=[t.COLUMN_TABLE_NAME,t.COLUMN_ZOOM_LEVEL,t.COLUMN_MATRIX_WIDTH,t.COLUMN_MATRIX_HEIGHT,t.COLUMN_TILE_WIDTH,t.COLUMN_TILE_HEIGHT,t.COLUMN_PIXEL_X_SIZE,t.COLUMN_PIXEL_Y_SIZE],i}return d(t,n),t.prototype.createObject=function(i){var u=new h.TileMatrix;return i&&(u.table_name=i.table_name,u.zoom_level=i.zoom_level,u.matrix_width=i.matrix_width,u.matrix_height=i.matrix_height,u.tile_width=i.tile_width,u.tile_height=i.tile_height,u.pixel_x_size=i.pixel_x_size,u.pixel_y_size=i.pixel_y_size),u},t.prototype.getContents=function(i){return this.geoPackage.contentsDao.queryForId(i.table_name)},t.prototype.getTileMatrixSet=function(i){return this.geoPackage.tileMatrixSetDao.queryForId(i.table_name)},t.prototype.tileCount=function(i){var u=this.buildWhereWithFieldAndValue(a.TileColumn.COLUMN_ZOOM_LEVEL,i.zoom_level),f=this.buildWhereArgs([i.zoom_level]),p=s.SqliteQueryBuilder.buildCount("'"+i.table_name+"'",u),y=this.connection.get(p,f);return y?.count},t.prototype.hasTiles=function(i){var u=this.buildWhereWithFieldAndValue(a.TileColumn.COLUMN_ZOOM_LEVEL,i.zoom_level),f=this.buildWhereArgs([i.zoom_level]),p=s.SqliteQueryBuilder.buildQuery(!1,"'"+i.table_name+"'",void 0,u);return this.connection.get(p,f)!=null},t.TABLE_NAME="gpkg_tile_matrix",t.COLUMN_PK1="table_name",t.COLUMN_PK2="zoom_level",t.COLUMN_TABLE_NAME="table_name",t.COLUMN_ZOOM_LEVEL="zoom_level",t.COLUMN_MATRIX_WIDTH="matrix_width",t.COLUMN_MATRIX_HEIGHT="matrix_height",t.COLUMN_TILE_WIDTH="tile_width",t.COLUMN_TILE_HEIGHT="tile_height",t.COLUMN_PIXEL_X_SIZE="pixel_x_size",t.COLUMN_PIXEL_Y_SIZE="pixel_y_size",t})(m.Dao);l.TileMatrixDao=r},5899:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TileMatrixSet=void 0;var c=o(2527),d=(function(){function m(){}return Object.defineProperty(m.prototype,"boundingBox",{get:function(){return new c.BoundingBox(this.min_x,this.max_x,this.min_y,this.max_y)},set:function(h){this.min_x=h.minLongitude,this.max_x=h.maxLongitude,this.min_y=h.minLatitude,this.max_y=h.maxLatitude},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"contents",{set:function(h){h&&h.data_type==="tiles"&&(this.table_name=h.table_name)},enumerable:!1,configurable:!0}),m.TABLE_NAME="tableName",m.MIN_X="minX",m.MIN_Y="minY",m.MAX_X="maxX",m.MAX_Y="maxY",m.SRS_ID="srsId",m})();l.TileMatrixSet=d},5925:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}),m=this&&this.__values||function(r){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&r[n],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(l,"__esModule",{value:!0}),l.TileMatrixSetDao=void 0;var h=o(4115),s=o(5899),a=(function(r){function n(t){var i=r.call(this,t)||this;return i.gpkgTableName="gpkg_tile_matrix_set",i.idColumns=[n.COLUMN_PK],i.columns=[n.COLUMN_TABLE_NAME,n.COLUMN_SRS_ID,n.COLUMN_MIN_X,n.COLUMN_MIN_Y,n.COLUMN_MAX_X,n.COLUMN_MAX_Y],i.columnToPropertyMap={},i.columnToPropertyMap[n.COLUMN_TABLE_NAME]=s.TileMatrixSet.TABLE_NAME,i.columnToPropertyMap[n.COLUMN_SRS_ID]=s.TileMatrixSet.SRS_ID,i.columnToPropertyMap[n.COLUMN_MIN_X]=s.TileMatrixSet.MIN_X,i.columnToPropertyMap[n.COLUMN_MIN_Y]=s.TileMatrixSet.MIN_Y,i.columnToPropertyMap[n.COLUMN_MAX_X]=s.TileMatrixSet.MAX_X,i.columnToPropertyMap[n.COLUMN_MAX_Y]=s.TileMatrixSet.MAX_Y,i}return d(n,r),n.prototype.createObject=function(t){var i=new s.TileMatrixSet;return t&&(i.table_name=t.table_name,i.srs_id=t.srs_id,i.min_y=t.min_y,i.min_x=t.min_x,i.max_y=t.max_y,i.max_x=t.max_x),i},n.prototype.getTileTables=function(){var t,i,u=[];try{for(var f=m(this.connection.each("select "+n.COLUMN_TABLE_NAME+" from "+n.TABLE_NAME)),p=f.next();!p.done;p=f.next()){var y=p.value;u.push(y[n.COLUMN_TABLE_NAME])}}catch(g){t={error:g}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(t)throw t.error}}return u},n.prototype.getProjection=function(t){var i=this.getSrs(t);if(i)return this.geoPackage.spatialReferenceSystemDao.getProjection(i)},n.prototype.getSrs=function(t){return this.geoPackage.spatialReferenceSystemDao.queryForId(t.srs_id)},n.prototype.getContents=function(t){return this.geoPackage.contentsDao.queryForId(t.table_name)},n.TABLE_NAME="gpkg_tile_matrix_set",n.COLUMN_PK="table_name",n.COLUMN_TABLE_NAME="table_name",n.COLUMN_SRS_ID="srs_id",n.COLUMN_MIN_X="min_x",n.COLUMN_MIN_Y="min_y",n.COLUMN_MAX_X="max_x",n.COLUMN_MAX_Y="max_y",n})(h.Dao);l.TileMatrixSetDao=a},731:function(_,l,o){var c=this&&this.__awaiter||function(i,u,f,p){return new(f||(f=Promise))((function(y,g){function b(M){try{x(p.next(M))}catch(S){g(S)}}function E(M){try{x(p.throw(M))}catch(S){g(S)}}function x(M){var S;M.done?y(M.value):(S=M.value,S instanceof f?S:new f((function(O){O(S)}))).then(b,E)}x((p=p.apply(i,u||[])).next())}))},d=this&&this.__generator||function(i,u){var f,p,y,g,b={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return g={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function E(x){return function(M){return(function(S){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,S[0]&&(b=0)),b;)try{if(f=1,p&&(y=2&S[0]?p.return:S[0]?p.throw||((y=p.return)&&y.call(p),0):p.next)&&!(y=y.call(p,S[1])).done)return y;switch(p=0,y&&(S=[2&S[0],y.value]),S[0]){case 0:case 1:y=S;break;case 4:return b.label++,{value:S[1],done:!1};case 5:b.label++,p=S[1],S=[0];continue;case 7:S=b.ops.pop(),b.trys.pop();continue;default:if(!((y=(y=b.trys).length>0&&y[y.length-1])||S[0]!==6&&S[0]!==2)){b=0;continue}if(S[0]===3&&(!y||S[1]>y[0]&&S[1]<y[3])){b.label=S[1];break}if(S[0]===6&&b.label<y[1]){b.label=y[1],y=S;break}if(y&&b.label<y[2]){b.label=y[2],b.ops.push(S);break}y[2]&&b.ops.pop(),b.trys.pop();continue}S=u.call(i,b)}catch(O){S=[6,O],p=0}finally{f=y=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}})([x,M])}}},m=this&&this.__values||function(i){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&i[u],p=0;if(f)return f.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&p>=i.length&&(i=void 0),{value:i&&i[p++],done:!i}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(l,"__esModule",{value:!0}),l.GeoPackageTileRetriever=void 0;var h=o(3684),s=o(7977),a=o(2777),r=o(5604),n=o(1375),t=(function(){function i(u,f,p){this.tileDao=u,this.tileDao.adjustTileMatrixLengths(),this.width=f,this.height=p,this.scaling=null}return i.prototype.setScaling=function(u){this.scaling=u},i.prototype.getWebMercatorBoundingBox=function(){return this.setWebMercatorBoundingBox==null&&(this.setWebMercatorBoundingBox=this.tileDao.tileMatrixSet.boundingBox.projectBoundingBox(this.tileDao.projection,n.ProjectionConstants.EPSG_3857)),this.setWebMercatorBoundingBox},i.prototype.hasTile=function(u,f,p){var y=!1;if(u>=0&&f>=0&&p>=0){var g=h.TileBoundingBoxUtils.getWebMercatorBoundingBoxFromXYZ(u,f,p);y=this.hasTileForBoundingBox(g,n.ProjectionConstants.EPSG_3857)}return y},i.prototype.hasTileForBoundingBox=function(u,f){for(var p=u.projectBoundingBox(f,this.tileDao.projection),y=this.getTileMatrices(p),g=!1,b=0;!g&&b<y.length;b++){var E=y[b],x=h.TileBoundingBoxUtils.getTileGridWithTotalBoundingBox(this.tileDao.tileMatrixSet.boundingBox,E.matrix_width,E.matrix_height,p);g=this.tileDao.countByTileGrid(x,E.zoom_level)>0}return g},i.prototype.getTile=function(u,f,p){return c(this,void 0,void 0,(function(){var y;return d(this,(function(g){return y=h.TileBoundingBoxUtils.getWebMercatorBoundingBoxFromXYZ(u,f,p),[2,this.getTileWithBounds(y,n.ProjectionConstants.EPSG_3857)]}))}))},i.prototype.getWebMercatorTile=function(u,f,p){return c(this,void 0,void 0,(function(){var y;return d(this,(function(g){return y=h.TileBoundingBoxUtils.getWebMercatorBoundingBoxFromXYZ(u,f,p),[2,this.getTileWithBounds(y,n.ProjectionConstants.EPSG_3857)]}))}))},i.prototype.drawTileIn=function(u,f,p,y){return c(this,void 0,void 0,(function(){var g;return d(this,(function(b){return g=h.TileBoundingBoxUtils.getWebMercatorBoundingBoxFromXYZ(u,f,p),[2,this.getTileWithBounds(g,n.ProjectionConstants.EPSG_3857,y)]}))}))},i.prototype.getTileWithWgs84Bounds=function(u,f){return c(this,void 0,void 0,(function(){var p;return d(this,(function(y){return p=u.projectBoundingBox(n.ProjectionConstants.EPSG_4326,n.ProjectionConstants.EPSG_3857),[2,this.getTileWithBounds(p,n.ProjectionConstants.EPSG_3857,f)]}))}))},i.prototype.getTileWithWgs84BoundsInProjection=function(u,f,p,y){return c(this,void 0,void 0,(function(){var g;return d(this,(function(b){return g=u.projectBoundingBox(n.ProjectionConstants.EPSG_4326,p),[2,this.getTileWithBounds(g,p,y)]}))}))},i.prototype.getTileWithBounds=function(u,f,p){return c(this,void 0,void 0,(function(){var y,g,b,E,x,M,S,O,C,T,R,B,z,L,Y,ie,$,Q,ce,be,Ae;return d(this,(function(we){switch(we.label){case 0:if((y=r.Projection.hasProjection(f))==null)throw new Error("Projection "+f+" is not loaded.");g=u.projectBoundingBox(f,this.tileDao.projection),b=this.getTileMatrices(g),E=!1,x=null,M=0,we.label=1;case 1:return!E&&M<b.length?(S=b[M],O=S.tile_width,C=S.tile_height,[4,s.TileCreator.create(this.width||O,this.height||C,S,this.tileDao.tileMatrixSet,u,this.tileDao.srs,f,y,p)]):[3,12];case 2:T=we.sent(),R=this.retrieveTileResults(g,S),we.label=3;case 3:we.trys.push([3,8,9,10]),be=void 0,B=m(R),z=B.next(),we.label=4;case 4:return z.done?[3,7]:(L=z.value,Y=h.TileBoundingBoxUtils.getTileBoundingBox(this.tileDao.tileMatrixSet.boundingBox,S,L.tileColumn,L.row),(ie=h.TileBoundingBoxUtils.intersection(g,Y))==null?[3,6]:($=h.TileBoundingBoxUtils.getFloatRoundedRectangle(S.tile_width,S.tile_height,Y,ie),Q=h.TileBoundingBoxUtils.getFloatRoundedRectangle(this.width,this.height,g,ie),$.isValid&&Q.isValid?[4,T.addTile(L.tileData,L.tileColumn,L.row)]:[3,6]));case 5:we.sent(),E=!0,we.label=6;case 6:return z=B.next(),[3,4];case 7:return[3,10];case 8:return ce=we.sent(),be={error:ce},[3,10];case 9:try{z&&!z.done&&(Ae=B.return)&&Ae.call(B)}finally{if(be)throw be.error}return[7];case 10:!p&&E&&(x=T.getCompleteTile()),T.cleanup(),we.label=11;case 11:return M++,[3,1];case 12:return[2,x]}}))}))},i.prototype.retrieveTileResults=function(u,f){if(f){var p=h.TileBoundingBoxUtils.getTileGridWithTotalBoundingBox(this.tileDao.tileMatrixSet.boundingBox,f.matrix_width,f.matrix_height,u);return this.tileDao.queryByTileGrid(p,f.zoom_level)}},i.prototype.getTileMatrices=function(u){var f=this,p=[];if(this.tileDao.tileMatrices.length!==0&&h.TileBoundingBoxUtils.intersects(u,this.tileDao.tileMatrixSet.boundingBox)){var y,g=u.maxLongitude-u.minLongitude,b=u.maxLatitude-u.minLatitude;if((y=this.scaling!=null?this.tileDao.getApproximateZoomLevelForWidthAndHeight(g,b):this.tileDao.getZoomLevelForWidthAndHeight(g,b))!=null){var E=[];if(this.scaling!=null&&this.scaling.scaling_type!=null){var x=[];if(this.scaling.isZoomIn())for(var M=this.scaling.zoom_in!=null?y+this.scaling.zoom_in:this.tileDao.maxZoom,S=y+1;S<=M;S++)x.push(S);var O=[];if(this.scaling.isZoomOut()){var C=this.scaling.zoom_out!=null?y-this.scaling.zoom_out:this.tileDao.minZoom;for(S=y-1;S>=C;S--)O.push(S)}if(x.length==0)E=O;else if(O.length==0)E=x;else{var T=this.scaling.scaling_type;switch(T){case a.TileScalingType.IN:case a.TileScalingType.IN_OUT:E=x.concat(O);break;case a.TileScalingType.OUT:case a.TileScalingType.OUT_IN:E=O.concat(x);break;case a.TileScalingType.CLOSEST_IN_OUT:case a.TileScalingType.CLOSEST_OUT_IN:var R=void 0,B=void 0;T==a.TileScalingType.CLOSEST_IN_OUT?(R=x,B=O):(R=O,B=x),E=[];for(var z=Math.max(R.length,B.length),L=0;L<z;L++)L<R.length&&E.push(R[L]),L<B.length&&E.push(B[L]);break;default:throw new Error("Unsupported TileScalingType: "+T)}}}else E=[];E.unshift(y),E.forEach((function(Y){var ie=f.tileDao.getTileMatrixWithZoomLevel(Y);ie!=null&&p.push(ie)}))}}return p},i})();l.GeoPackageTileRetriever=t},3684:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TileBoundingBoxUtils=void 0;var c=o(1375),d=o(7218),m=o(2527),h=(function(){function s(){}return s.webMercatorTileBox=function(a,r){var n=s.tilesPerSideWithZoom(r),t=s.tileSizeWithTilesPerSide(n),i=Math.max(-c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH,a.minLongitude),u=Math.min(c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH,a.maxLongitude),f=Math.max(-c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH,a.minLatitude),p=Math.min(c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH,a.maxLatitude),y=Math.floor((i+c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH)/t),g=Math.max(0,Math.ceil((u+c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH)/t)-1),b=Math.floor((c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH-p)/t),E=Math.max(0,Math.ceil((c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH-f)/t)-1);return new m.BoundingBox(y,g,b,E)},s.wgs84TileBox=function(a,r){var n=s.tilesPerWGS84LatSide(r),t=s.tilesPerWGS84LonSide(r),i=s.tileSizeLatPerWGS84Side(n),u=s.tileSizeLonPerWGS84Side(t),f=Math.max(-c.ProjectionConstants.WGS84_HALF_WORLD_LON_WIDTH,a.minLongitude),p=Math.min(c.ProjectionConstants.WGS84_HALF_WORLD_LON_WIDTH,a.maxLongitude),y=Math.max(-c.ProjectionConstants.WGS84_HALF_WORLD_LAT_HEIGHT,a.minLatitude),g=Math.min(c.ProjectionConstants.WGS84_HALF_WORLD_LAT_HEIGHT,a.maxLatitude),b=Math.floor((f+c.ProjectionConstants.WGS84_HALF_WORLD_LON_WIDTH)/u),E=Math.max(0,Math.ceil((p+c.ProjectionConstants.WGS84_HALF_WORLD_LON_WIDTH)/u)-1),x=Math.floor((c.ProjectionConstants.WGS84_HALF_WORLD_LAT_HEIGHT-g)/i),M=Math.max(0,Math.ceil((c.ProjectionConstants.WGS84_HALF_WORLD_LAT_HEIGHT-y)/i)-1);return new m.BoundingBox(b,E,x,M)},s.determinePositionAndScale=function(a,r,n,t,i,u){var f={},p=t.maxLongitude-t.minLongitude,y=(a.minLongitude-t.minLongitude)/p,g=t.maxLatitude-t.minLatitude,b=(t.maxLatitude-a.maxLatitude)/g,E=u/p,x=(a.maxLongitude-a.minLongitude)*E,M=i/g,S=(a.maxLatitude-a.minLatitude)*M;return f.yPositionInFinalTileStart=b*i,f.xPositionInFinalTileStart=y*u,f.dx=f.xPositionInFinalTileStart,f.dy=f.yPositionInFinalTileStart,f.sx=0,f.sy=0,f.dWidth=x,f.dHeight=S,f.sWidth=n,f.sHeight=r,f},s.getWebMercatorBoundingBoxFromXYZ=function(a,r,n,t){for(var i=s.tilesPerSideWithZoom(n),u=s.tileSizeWithTilesPerSide(i);a<0;)a+=i;for(;a>=i;)a-=i;var f=0;if(t&&t.buffer&&t.tileSize){var p=t.buffer;f=u/t.tileSize*p}var y=-1*c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH+a*u-f,g=-1*c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH+(a+1)*u+f,b=c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH-(r+1)*u-f,E=c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH-r*u+f;return y=Math.max(-1*c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH,y),g=Math.min(c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH,g),b=Math.max(-1*c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH,b),E=Math.min(c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH,E),new m.BoundingBox(y,g,b,E)},s.getWGS84BoundingBoxFromXYZ=function(a,r,n){var t=s.tilesPerWGS84LatSide(n),i=s.tilesPerWGS84LonSide(n),u=s.tileSizeLatPerWGS84Side(t),f=s.tileSizeLonPerWGS84Side(i),p=-1*c.ProjectionConstants.WGS84_HALF_WORLD_LON_WIDTH+a*f,y=-1*c.ProjectionConstants.WGS84_HALF_WORLD_LON_WIDTH+(a+1)*f,g=c.ProjectionConstants.WGS84_HALF_WORLD_LAT_HEIGHT-(r+1)*u,b=c.ProjectionConstants.WGS84_HALF_WORLD_LAT_HEIGHT-r*u;return new m.BoundingBox(p,y,g,b)},s.tileSizeWithTilesPerSide=function(a){return 2*c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH/a},s.intersects=function(a,r){return s.intersection(a,r)!=null},s.intersection=function(a,r){var n=Math.max(a.minLongitude,r.minLongitude),t=Math.max(a.minLatitude,r.minLatitude),i=Math.min(a.maxLongitude,r.maxLongitude),u=Math.min(a.maxLatitude,r.maxLatitude);return n>i||t>u?null:new m.BoundingBox(n,i,t,u)},s.tilesPerSideWithZoom=function(a){return 1<<a},s.tilesPerWGS84LatSide=function(a){return s.tilesPerSide(a)},s.tilesPerWGS84LonSide=function(a){return 2*s.tilesPerSide(a)},s.tileSizeLatPerWGS84Side=function(a){return 2*c.ProjectionConstants.WGS84_HALF_WORLD_LAT_HEIGHT/a},s.tileSizeLonPerWGS84Side=function(a){return 2*c.ProjectionConstants.WGS84_HALF_WORLD_LON_WIDTH/a},s.getTileGridWithTotalBoundingBox=function(a,r,n,t){var i=s.getTileColumnWithTotalBoundingBox(a,r,t.minLongitude),u=s.getTileColumnWithTotalBoundingBox(a,r,t.maxLongitude);i<r&&u>=0&&(i<0&&(i=0),u>=r&&(u=r-1));var f=s.getRowWithTotalBoundingBox(a,n,t.minLatitude),p=s.getRowWithTotalBoundingBox(a,n,t.maxLatitude);return p<n&&f>=0&&(p<0&&(p=0),f>=n&&(f=n-1)),new d.TileGrid(i,u,p,f)},s.getTileColumnWithTotalBoundingBox=function(a,r,n){var t=a.minLongitude,i=a.maxLongitude;return n<t?-1:n>=i?r:~~((n-t)/((i-t)/r))},s.getRowWithTotalBoundingBox=function(a,r,n){var t=a.minLatitude,i=a.maxLatitude;return n<t?r:n>=i?-1:~~((i-n)/((i-t)/r))},s.getTileBoundingBox=function(a,r,n,t){var i=r.matrix_width,u=r.matrix_height,f=new d.TileGrid(n,n,t,t),p=a.minLongitude,y=(a.maxLongitude-p)/i,g=p+y*f.min_x,b=g+y*(f.max_x+1-f.min_x),E=a.minLatitude,x=a.maxLatitude,M=(x-E)/u,S=x-M*f.min_y,O=S-M*(f.max_y+1-f.min_y);return new m.BoundingBox(g,b,O,S)},s.getTileGridBoundingBox=function(a,r,n,t){var i=a.minLongitude,u=a.width/r,f=i+u*t.min_x,p=f+u*(t.max_x+1-t.min_x),y=a.maxLatitude,g=a.height/n,b=y-g*t.min_y,E=b-g*(t.max_y+1-t.min_y);return new m.BoundingBox(f,p,E,b)},s.getXPixel=function(a,r,n){return(n-r.minLongitude)/r.width*a},s.getLongitudeFromPixel=function(a,r,n,t){return t/a*n.width+r.minLongitude},s.getYPixel=function(a,r,n){return(r.maxLatitude-n)/r.height*a},s.getLatitudeFromPixel=function(a,r,n,t){return r.maxLatitude-t/a*n.height},s.tileSize=function(a){return 2*c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH/a},s.zoomLevelOfTileSize=function(a){var r=2*c.ProjectionConstants.WEB_MERCATOR_HALF_WORLD_WIDTH/a;return Math.log(r)/Math.log(2)},s.tileWidthDegrees=function(a){return 360/a},s.prototype.statictileHeightDegrees=function(a){return 180/a},s.tilesPerSide=function(a){return Math.pow(2,a)},s.tileSizeWithZoom=function(a){var r=this.tilesPerSide(a);return this.tileSize(r)},s.toleranceDistance=function(a,r){return this.tileSizeWithZoom(a)/r},s.toleranceDistanceWidthAndHeight=function(a,r,n){return this.toleranceDistance(a,Math.max(r,n))},s.getFloatRoundedRectangle=function(a,r,n,t){var i=Math.round(s.getXPixel(a,n,t.minLongitude)),u=Math.round(s.getXPixel(a,n,t.maxLongitude)),f=Math.round(s.getYPixel(r,n,t.maxLatitude)),p=Math.round(s.getYPixel(r,n,t.minLatitude));return{left:i,right:u,bottom:p,top:f,isValid:i<u&&f<p}},s})();l.TileBoundingBoxUtils=h},7218:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TileGrid=void 0;var o=(function(){function c(d,m,h,s){this.min_x=d,this.max_x=m,this.min_y=h,this.max_y=s}return c.prototype.count=function(){return(this.max_x+1-this.min_x)*(this.max_y+1-this.min_y)},c.prototype.equals=function(d){return!!d&&this.min_x===d.min_x&&this.max_x===d.max_x&&this.min_y===d.min_y&&this.max_y===d.max_y},c})();l.TileGrid=o},8334:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.TileColumn=void 0;var m=o(5865),h=o(7319),s=o(5071),a=(function(r){function n(t,i,u,f,p,y,g,b){return r.call(this,t,i,u,f,p,y,g,b)||this}return d(n,r),n.createIdColumn=function(t,i){return i===void 0&&(i=s.UserTableDefaults.DEFAULT_AUTOINCREMENT),new n(t,n.COLUMN_ID,h.GeoPackageDataType.INTEGER,null,!1,null,!0,i)},n.createZoomLevelColumn=function(t){return new n(t,n.COLUMN_ZOOM_LEVEL,h.GeoPackageDataType.INTEGER,null,!0,null,!1,!1)},n.createTileColumnColumn=function(t){return new n(t,n.COLUMN_TILE_COLUMN,h.GeoPackageDataType.INTEGER,null,!0,null,!1,!1)},n.createTileRowColumn=function(t){return new n(t,n.COLUMN_TILE_ROW,h.GeoPackageDataType.INTEGER,null,!0,null,!1,!1)},n.createTileDataColumn=function(t){return new n(t,n.COLUMN_TILE_DATA,h.GeoPackageDataType.BLOB,null,!0,null,!1,!1)},n.createColumn=function(t,i,u,f,p,y,g){return f===void 0&&(f=!1),new n(t,i,u,y,f,p,!1,g)},n.COLUMN_ID="id",n.COLUMN_ZOOM_LEVEL="zoom_level",n.COLUMN_TILE_COLUMN="tile_column",n.COLUMN_TILE_ROW="tile_row",n.COLUMN_TILE_DATA="tile_data",n})(m.UserColumn);l.TileColumn=a},6295:function(_,l,o){var c,d=this&&this.__extends||(c=function(s,a){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])},c(s,a)},function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function r(){this.constructor=s}c(s,a),s.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)});Object.defineProperty(l,"__esModule",{value:!0}),l.TileColumns=void 0;var m=o(7319),h=(function(s){function a(r,n,t){var i=s.call(this,r,n,t)||this;return i.zoomLevelIndex=-1,i.tileColumnIndex=-1,i.tileRowIndex=-1,i.tileDataIndex=-1,i.updateColumns(),i}return d(a,s),a.prototype.copy=function(){var r=new a(this._tableName,this._columns,this._custom);return r.zoomLevelIndex=this.zoomLevelIndex,r.tileColumnIndex=this.tileColumnIndex,r.tileRowIndex=this.tileRowIndex,r.tileDataIndex=this.tileDataIndex,r},a.prototype.updateColumns=function(){s.prototype.updateColumns.call(this);var r=this.getColumnIndex(a.ZOOM_LEVEL,!1);this.isCustom()||this.missingCheck(r,a.ZOOM_LEVEL),r!==null&&(this.typeCheck(m.GeoPackageDataType.INTEGER,this.getColumnForIndex(r)),this.zoomLevelIndex=r);var n=this.getColumnIndex(a.TILE_COLUMN,!1);this.isCustom()||this.missingCheck(n,a.TILE_COLUMN),n!=null&&(this.typeCheck(m.GeoPackageDataType.INTEGER,this.getColumnForIndex(n)),this.tileColumnIndex=n);var t=this.getColumnIndex(a.TILE_ROW,!1);this.isCustom()||this.missingCheck(t,a.TILE_ROW),t!=null&&(this.typeCheck(m.GeoPackageDataType.INTEGER,this.getColumnForIndex(t)),this.tileRowIndex=t);var i=this.getColumnIndex(a.TILE_DATA,!1);this.isCustom()||this.missingCheck(i,a.TILE_DATA),i!=null&&(this.typeCheck(m.GeoPackageDataType.BLOB,this.getColumnForIndex(i)),this.tileDataIndex=i)},a.prototype.getZoomLevelIndex=function(){return this.zoomLevelIndex},a.prototype.setZoomLevelIndex=function(r){this.zoomLevelIndex=r},a.prototype.hasZoomLevelColumn=function(){return this.zoomLevelIndex>=0},a.prototype.getZoomLevelColumn=function(){var r=null;return this.hasZoomLevelColumn()&&(r=this.getColumnForIndex(this.zoomLevelIndex)),r},a.prototype.getTileColumnIndex=function(){return this.tileColumnIndex},a.prototype.setTileColumnIndex=function(r){this.tileColumnIndex=r},a.prototype.hasTileColumnColumn=function(){return this.tileColumnIndex>=0},a.prototype.getTileColumnColumn=function(){var r=null;return this.hasTileColumnColumn()&&(r=this.getColumnForIndex(this.tileColumnIndex)),r},a.prototype.getTileRowIndex=function(){return this.tileRowIndex},a.prototype.setTileRowIndex=function(r){this.tileRowIndex=r},a.prototype.hasTileRowColumn=function(){return this.tileRowIndex>=0},a.prototype.getTileRowColumn=function(){var r=null;return this.hasTileRowColumn()&&(r=this.getColumnForIndex(this.tileRowIndex)),r},a.prototype.getTileDataIndex=function(){return this.tileDataIndex},a.prototype.setTileDataIndex=function(r){this.tileDataIndex=r},a.prototype.hasTileDataColumn=function(){return this.tileDataIndex>=0},a.prototype.getTileDataColumn=function(){var r=null;return this.hasTileDataColumn()&&(r=this.getColumnForIndex(this.tileDataIndex)),r},a.ID="id",a.ZOOM_LEVEL="zoom_level",a.TILE_COLUMN="tile_column",a.TILE_ROW="tile_row",a.TILE_DATA="tile_data",a})(o(2114).UserColumns);l.TileColumns=h},1394:function(_,l,o){var c,d=this&&this.__extends||(c=function(E,x){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,S){M.__proto__=S}||function(M,S){for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(M[O]=S[O])},c(E,x)},function(E,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function M(){this.constructor=E}c(E,x),E.prototype=x===null?Object.create(x):(M.prototype=x.prototype,new M)}),m=this&&this.__values||function(E){var x=typeof Symbol=="function"&&Symbol.iterator,M=x&&E[x],S=0;if(M)return M.call(E);if(E&&typeof E.length=="number")return{next:function(){return E&&S>=E.length&&(E=void 0),{value:E&&E[S++],done:!E}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(l,"__esModule",{value:!0}),l.TileDao=void 0;var h=o(4668),s=o(3506),a=o(5925),r=o(1332),n=o(8334),t=o(7218),i=o(8572),u=o(3684),f=o(2527),p=o(1584),y=o(5604),g=o(1375),b=(function(E){function x(M,S,O,C){var T=E.call(this,M,S)||this;T.tileMatrixSet=O,T.tileMatrices=C,T.zoomLevelToTileMatrix=[],T.widths=[],T.heights=[],C.length===0?(T.minZoom=0,T.maxZoom=0):(T.minZoom=T.tileMatrices[0].zoom_level,T.maxZoom=T.tileMatrices[T.tileMatrices.length-1].zoom_level);for(var R=T.tileMatrices.length-1;R>=0;R--){var B=T.tileMatrices[R];T.zoomLevelToTileMatrix[B.zoom_level]=B}return T.initialize(),T}return d(x,E),x.prototype.initialize=function(){var M=this.geoPackage.tileMatrixSetDao;this.srs=M.getSrs(this.tileMatrixSet),this.projection=[this.srs.organization.toUpperCase(),this.srs.organization_coordsys_id].join(":"),y.Projection.loadProjection(this.projection,this.srs.definition);for(var S=this.tileMatrices.length-1;S>=0;S--){var O=this.tileMatrices[S],C=O.pixel_x_size*O.tile_width,T=O.pixel_y_size*O.tile_height,R=y.Projection.getConverter(this.projection);R.to_meter&&(C=R.to_meter*O.pixel_x_size*O.tile_width,T=R.to_meter*O.pixel_y_size*O.tile_height),this.widths.push(C),this.heights.push(T)}this.setWebMapZoomLevels()},x.prototype.webZoomToGeoPackageZoom=function(M){var S=u.TileBoundingBoxUtils.getWebMercatorBoundingBoxFromXYZ(0,0,M);return this.determineGeoPackageZoomLevel(S,M)},x.prototype.setWebMapZoomLevels=function(){this.minWebMapZoom=20,this.maxWebMapZoom=0,this.webZoomToGeoPackageZooms={};for(var M=this.tileMatrixSet.max_x-this.tileMatrixSet.min_x,S=this.tileMatrixSet.max_y-this.tileMatrixSet.min_y,O=0;O<this.tileMatrices.length;O++){var C=this.tileMatrices[O],T=M/C.matrix_width,R=S/C.matrix_height,B=new f.BoundingBox(this.tileMatrixSet.min_x,this.tileMatrixSet.min_x+T,this.tileMatrixSet.min_y,this.tileMatrixSet.min_y+R),z=y.Projection.getConverter(this.projection,g.ProjectionConstants.EPSG_4326),L=z.forward([B.maxLongitude,B.maxLatitude]),Y=z.forward([B.minLongitude,B.minLatitude]),ie=L[0]-Y[0],$=Math.ceil(Math.log2(360/ie));this.minWebMapZoom>$&&(this.minWebMapZoom=$),this.maxWebMapZoom<$&&(this.maxWebMapZoom=$),this.webZoomToGeoPackageZooms[$]=C.zoom_level}},x.prototype.determineGeoPackageZoomLevel=function(M,S){return this.webZoomToGeoPackageZooms[S]},x.prototype.getBoundingBoxWithZoomLevel=function(M){var S,O=this.getTileMatrixWithZoomLevel(M);if(O){var C=this.queryForTileGridWithZoomLevel(M);if(C){var T=this.boundingBox;S=u.TileBoundingBoxUtils.getTileGridBoundingBox(T,O.matrix_width,O.matrix_height,C)}}return S},Object.defineProperty(x.prototype,"boundingBox",{get:function(){return this.tileMatrixSet.boundingBox},enumerable:!1,configurable:!0}),x.prototype.queryForTileGridWithZoomLevel=function(M){var S,O=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_ZOOM_LEVEL,M),C=this.buildWhereArgs(M),T=this.minOfColumn(n.TileColumn.COLUMN_TILE_COLUMN,O,C),R=this.maxOfColumn(n.TileColumn.COLUMN_TILE_COLUMN,O,C),B=this.minOfColumn(n.TileColumn.COLUMN_TILE_ROW,O,C),z=this.maxOfColumn(n.TileColumn.COLUMN_TILE_ROW,O,C);return T!=null&&B!=null&&R!=null&&z!=null&&(S=new t.TileGrid(T,R,B,z)),S},x.prototype.getTileGridWithZoomLevel=function(M){var S,O=this.getTileMatrixWithZoomLevel(M);return O&&(S=new t.TileGrid(0,~~O.matrix_width-1,0,~~O.matrix_height-1)),S},Object.defineProperty(x.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),x.prototype.newRow=function(M,S){return new r.TileRow(this.table,M,S)},x.prototype.adjustTileMatrixLengths=function(){for(var M=this.tileMatrixSet.max_x-this.tileMatrixSet.min_x,S=this.tileMatrixSet.max_y-this.tileMatrixSet.min_y,O=0;O<this.tileMatrices.length;O++){var C=this.tileMatrices[O],T=~~(M/(C.pixel_x_size*~~C.tile_width)),R=~~(S/(C.pixel_y_size*~~C.tile_height));T>~~C.matrix_width&&(C.matrix_width=~~T),R>~~C.matrix_height&&(C.matrix_height=~~R)}},x.prototype.getTileMatrixWithZoomLevel=function(M){return this.zoomLevelToTileMatrix[M]},x.prototype.getZoomLevelForLength=function(M){return p.TileDaoUtils.getZoomLevelForLength(this.widths,this.heights,this.tileMatrices,M)},x.prototype.getZoomLevelForWidthAndHeight=function(M,S){return p.TileDaoUtils.getZoomLevelForWidthAndHeight(this.widths,this.heights,this.tileMatrices,M,S)},x.prototype.getClosestZoomLevelForLength=function(M){return p.TileDaoUtils.getClosestZoomLevelForLength(this.widths,this.heights,this.tileMatrices,M)},x.prototype.getClosestZoomLevelForWidthAndHeight=function(M,S){return p.TileDaoUtils.getClosestZoomLevelForWidthAndHeight(this.widths,this.heights,this.tileMatrices,M,S)},x.prototype.getApproximateZoomLevelForLength=function(M){return p.TileDaoUtils.getApproximateZoomLevelForLength(this.widths,this.heights,this.tileMatrices,M)},x.prototype.getApproximateZoomLevelForWidthAndHeight=function(M,S){return p.TileDaoUtils.getApproximateZoomLevelForWidthAndHeight(this.widths,this.heights,this.tileMatrices,M,S)},x.prototype.getMaxLength=function(){return p.TileDaoUtils.getMaxLengthForTileWidthsAndHeights(this.widths,this.heights)},x.prototype.getMinLength=function(){return p.TileDaoUtils.getMinLengthForTileWidthsAndHeights(this.widths,this.heights)},x.prototype.queryForTile=function(M,S,O){var C,T,R,B=new i.ColumnValues;B.addColumn(n.TileColumn.COLUMN_TILE_COLUMN,M),B.addColumn(n.TileColumn.COLUMN_TILE_ROW,S),B.addColumn(n.TileColumn.COLUMN_ZOOM_LEVEL,O);try{for(var z=m(this.queryForFieldValues(B)),L=z.next();!L.done;L=z.next()){var Y=L.value;R=this.getRow(Y)}}catch(ie){C={error:ie}}finally{try{L&&!L.done&&(T=z.return)&&T.call(z)}finally{if(C)throw C.error}}return R},x.prototype.queryForTilesWithZoomLevel=function(M){var S,O=this,C=this.queryForEach(n.TileColumn.COLUMN_ZOOM_LEVEL,M);return(S={})[Symbol.iterator]=function(){return this},S.next=function(){var T=C.next();return T.done?{value:void 0,done:!0}:{value:O.getRow(T.value),done:!1}},S},x.prototype.queryForTilesDescending=function(M){var S,O=this,C=this.queryForEach(n.TileColumn.COLUMN_ZOOM_LEVEL,M,void 0,void 0,n.TileColumn.COLUMN_TILE_COLUMN+" DESC, "+n.TileColumn.COLUMN_TILE_ROW+" DESC");return(S={})[Symbol.iterator]=function(){return this},S.next=function(){var T=C.next();return T.done?{value:void 0,done:!0}:{value:O.getRow(T.value),done:!1}},S},x.prototype.queryForTilesInColumn=function(M,S){var O,C=this,T=new i.ColumnValues;T.addColumn(n.TileColumn.COLUMN_TILE_COLUMN,M),T.addColumn(n.TileColumn.COLUMN_ZOOM_LEVEL,S);var R=this.queryForFieldValues(T);return(O={})[Symbol.iterator]=function(){return this},O.next=function(){var B=R.next();return B.done?{value:void 0,done:!0}:{value:C.getRow(B.value),done:!1}},O},x.prototype.queryForTilesInRow=function(M,S){var O,C=this,T=new i.ColumnValues;T.addColumn(n.TileColumn.COLUMN_TILE_ROW,M),T.addColumn(n.TileColumn.COLUMN_ZOOM_LEVEL,S);var R=this.queryForFieldValues(T);return(O={})[Symbol.iterator]=function(){return this},O.next=function(){var B=R.next();return B.done?{value:void 0,done:!0}:{value:C.getRow(B.value),done:!1}},O},x.prototype.queryByTileGrid=function(M,S){var O,C=this;if(M){var T="";T+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_ZOOM_LEVEL,S),T+=" and ",T+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_TILE_COLUMN,M.min_x,">="),T+=" and ",T+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_TILE_COLUMN,M.max_x,"<="),T+=" and ",T+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_TILE_ROW,M.min_y,">="),T+=" and ",T+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_TILE_ROW,M.max_y,"<=");var R=this.buildWhereArgs([S,M.min_x,M.max_x,M.min_y,M.max_y]),B=this.queryWhereWithArgsDistinct(T,R);return(O={})[Symbol.iterator]=function(){return this},O.next=function(){var z=B.next();return z.done?{value:void 0,done:!0}:{value:C.getRow(z.value),done:!1}},O}},x.prototype.countByTileGrid=function(M,S){if(M){var O="";O+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_ZOOM_LEVEL,S),O+=" and ",O+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_TILE_COLUMN,M.min_x,">="),O+=" and ",O+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_TILE_COLUMN,M.max_x,"<="),O+=" and ",O+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_TILE_ROW,M.min_y,">="),O+=" and ",O+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_TILE_ROW,M.max_y,"<=");var C=this.buildWhereArgs([S,M.min_x,M.max_x,M.min_y,M.max_y]);return this.countWhere(O,C)}},x.prototype.deleteTile=function(M,S,O){var C="";C+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_ZOOM_LEVEL,O),C+=" and ",C+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_TILE_COLUMN,M),C+=" and ",C+=this.buildWhereWithFieldAndValue(n.TileColumn.COLUMN_TILE_ROW,S);var T=this.buildWhereArgs([O,M,S]);return this.deleteWhere(C,T)},x.prototype.dropTable=function(){var M=this.geoPackage.tileMatrixDao,S=h.UserDao.prototype.dropTable.call(this);this.geoPackage.tileMatrixSetDao.delete(this.tileMatrixSet);for(var O=this.tileMatrices.length-1;O>=0;O--){var C=this.tileMatrices[O];M.delete(C)}return this.geoPackage.contentsDao.deleteById(this.gpkgTableName),S},x.prototype.rename=function(M){E.prototype.rename.call(this,M);var S=this.tileMatrixSet.table_name,O={};O[a.TileMatrixSetDao.COLUMN_TABLE_NAME]=M;var C=this.buildWhereWithFieldAndValue(a.TileMatrixSetDao.COLUMN_TABLE_NAME,S),T=this.buildWhereArgs([S]),R=this.geoPackage.contentsDao,B=R.queryForId(S);B.table_name=M,B.identifier=M,R.create(B),this.geoPackage.tileMatrixSetDao.updateWithValues(O,C,T);var z=this.geoPackage.tileMatrixDao,L={};L[s.TileMatrixDao.COLUMN_TABLE_NAME]=M;var Y=this.buildWhereWithFieldAndValue(s.TileMatrixDao.COLUMN_TABLE_NAME,S);z.updateWithValues(L,Y,T),R.deleteById(S)},x.readTable=function(M,S){return M.getTileDao(S)},x})(h.UserDao);l.TileDao=b},1584:function(_,l,o){var c=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0}),l.TileDaoUtils=void 0;var d=c(o(5871)),m=c(o(1159)),h=(function(){function s(){}return s.adjustTileMatrixLengths=function(a,r){var n=a.max_x-a.min_x,t=a.max_y-a.min_y;r.forEach((function(i){var u=Math.floor(n/(i.pixel_x_size*i.tile_width)),f=Math.floor(t/(i.pixel_y_size*i.tile_height));u>i.matrix_width&&(i.matrix_width=u),f>i.matrix_height&&(i.matrix_height=f)}))},s.getZoomLevelForLength=function(a,r,n,t){return s._getZoomLevelForLength(a,r,n,t,!0)},s.getZoomLevelForWidthAndHeight=function(a,r,n,t,i){return s._getZoomLevelForWidthAndHeight(a,r,n,t,i,!0)},s.getClosestZoomLevelForLength=function(a,r,n,t){return s._getZoomLevelForLength(a,r,n,t,!1)},s.getClosestZoomLevelForWidthAndHeight=function(a,r,n,t,i){return s._getZoomLevelForWidthAndHeight(a,r,n,t,i,!1)},s._getZoomLevelForLength=function(a,r,n,t,i){return s._getZoomLevelForWidthAndHeight(a,r,n,t,t,i)},s._getZoomLevelForWidthAndHeight=function(a,r,n,t,i,u){var f=null,p=(0,d.default)(a,t);p===-1&&(p=(0,m.default)(a,t)),p<0&&(p=-1*(p+1));var y=(0,d.default)(r,i);if(y===-1&&(y=(0,m.default)(r,i)),y<0&&(y=-1*(y+1)),p==0?u&&t<s.getMinLength(a)&&(p=-1):p==a.length?u&&t>=s.getMaxLength(a)?p=-1:--p:s.closerToZoomIn(a,t,p)&&--p,y==0?u&&i<s.getMinLength(r)&&(y=-1):y==r.length?u&&i>=s.getMaxLength(r)?y=-1:--y:s.closerToZoomIn(r,i,y)&&--y,p>=0||y>=0){var g;g=p<0?y:y<0?p:Math.min(p,y),f=s.getTileMatrixAtLengthIndex(n,g).zoom_level}return f},s.closerToZoomIn=function(a,r,n){return Math.log(r/a[n-1])/Math.log(2)<Math.log(r/a[n])/Math.log(.5)},s.getTileMatrixAtLengthIndex=function(a,r){return a[a.length-r-1]},s.getApproximateZoomLevelForLength=function(a,r,n,t){return s.getApproximateZoomLevelForWidthAndHeight(a,r,n,t,t)},s.getApproximateZoomLevelForWidthAndHeight=function(a,r,n,t,i){var u=s.getApproximateZoomLevel(a,n,t),f=s.getApproximateZoomLevel(r,n,i);return u==null?f:f==null?u:Math.max(u,f)},s.getApproximateZoomLevel=function(a,r,n){var t,i=a[0],u=a[a.length-1];if(n<i){var f=Math.log(n/i)/Math.log(.5),p=Math.floor(f),y=Math.ceil(f),g=i*Math.pow(.5,p),b=i*Math.pow(.5,y);t=r[r.length-1].zoom_level,t+=g-n<=n-b?p:y}else if(n>u){var E=Math.log(n/u)/Math.log(2);p=Math.ceil(E),y=Math.floor(E),g=u*Math.pow(2,p),b=u*Math.pow(2,y),t=r[0].zoom_level,t-=n-b<=g-n?y:p}else{var x=(0,d.default)(a,n);x<0&&(x=-1*(x+1));var M=Math.log(n/a[x])/Math.log(.5),S=s.getTileMatrixAtLengthIndex(r,x).zoom_level;t=S+=Math.round(M)}return t},s.getMaxLengthForTileWidthsAndHeights=function(a,r){var n=s.getMaxLength(a),t=s.getMaxLength(r);return Math.min(n,t)},s.getMinLengthForTileWidthsAndHeights=function(a,r){var n=s.getMinLength(a),t=s.getMinLength(r);return Math.max(n,t)},s.getMaxLength=function(a){return a[a.length-1]/.51},s.getMinLength=function(a){return .51*a[0]},s})();l.TileDaoUtils=h},1332:function(_,l,o){var c,d=this&&this.__extends||(c=function(h,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])},c(h,s)},function(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=h}c(h,s),h.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(l,"__esModule",{value:!0}),l.TileRow=void 0;var m=(function(h){function s(a,r,n){var t=h.call(this,a,r,n)||this;return t.tileTable=a,t}return d(s,h),Object.defineProperty(s.prototype,"zoomLevelColumnIndex",{get:function(){return this.tileTable.getZoomLevelColumnIndex()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"zoomLevelColumn",{get:function(){return this.tileTable.getZoomLevelColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"zoomLevel",{get:function(){return this.getValueWithColumnName(this.zoomLevelColumn.name)},set:function(a){this.setValueWithIndex(this.zoomLevelColumnIndex,a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tileColumnColumnIndex",{get:function(){return this.tileTable.getTileColumnColumnIndex()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tileColumnColumn",{get:function(){return this.tileTable.getTileColumnColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tileColumn",{get:function(){return this.getValueWithColumnName(this.tileColumnColumn.name)},set:function(a){this.setValueWithColumnName(this.tileColumnColumn.name,a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"rowColumnIndex",{get:function(){return this.tileTable.getTileRowColumnIndex()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"rowColumn",{get:function(){return this.tileTable.getTileRowColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"row",{get:function(){return this.getValueWithColumnName(this.rowColumn.name)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tileRow",{set:function(a){this.setValueWithColumnName(this.rowColumn.name,a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tileDataColumnIndex",{get:function(){return this.tileTable.getTileDataColumnIndex()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tileDataColumn",{get:function(){return this.tileTable.getTileDataColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tileData",{get:function(){return this.getValueWithColumnName(this.tileDataColumn.name)},set:function(a){this.setValueWithColumnName(this.tileDataColumn.name,a)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tileDataImage",{get:function(){return null},enumerable:!1,configurable:!0}),s})(o(2224).UserRow);l.TileRow=m},8704:function(_,l,o){var c,d=this&&this.__extends||(c=function(t,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(u[p]=f[p])},c(t,i)},function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function u(){this.constructor=t}c(t,i),t.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)});Object.defineProperty(l,"__esModule",{value:!0}),l.TileTable=void 0;var m=o(8018),h=o(8334),s=o(6295),a=o(1648),r=o(9971),n=(function(t){function i(u,f){var p=t.call(this,new s.TileColumns(u,f,!1))||this,y=new a.UniqueConstraint;return y.add(p.getUserColumns().getZoomLevelColumn()),y.add(p.getUserColumns().getTileColumnColumn()),y.add(p.getUserColumns().getTileRowColumn()),p.addConstraint(y),p}return d(i,t),i.prototype.copy=function(){return new i(this.getTableName(),this.columns._columns)},i.prototype.getDataType=function(){return r.ContentsDataType.TILES},i.prototype.getUserColumns=function(){return t.prototype.getUserColumns.call(this)},i.prototype.createUserColumns=function(u){return new s.TileColumns(this.getTableName(),u,!0)},i.prototype.getZoomLevelColumnIndex=function(){return this.getUserColumns().getZoomLevelIndex()},i.prototype.getZoomLevelColumn=function(){return this.getUserColumns().getZoomLevelColumn()},i.prototype.getTileColumnColumnIndex=function(){return this.getUserColumns().getTileColumnIndex()},i.prototype.getTileColumnColumn=function(){return this.getUserColumns().getTileColumnColumn()},i.prototype.getTileRowColumnIndex=function(){return this.getUserColumns().getTileRowIndex()},i.prototype.getTileRowColumn=function(){return this.getUserColumns().getTileRowColumn()},i.prototype.getTileDataColumnIndex=function(){return this.getUserColumns().getTileDataIndex()},i.prototype.getTileDataColumn=function(){return this.getUserColumns().getTileDataColumn()},i.createRequiredColumns=function(u){u===void 0&&(u=0);var f=[];return f.push(h.TileColumn.createIdColumn(u++)),f.push(h.TileColumn.createZoomLevelColumn(u++)),f.push(h.TileColumn.createTileColumnColumn(u++)),f.push(h.TileColumn.createTileRowColumn(u++)),f.push(h.TileColumn.createTileDataColumn(u)),f},i.prototype.validateContents=function(u){var f=u.data_type;if(f==null||f!==r.ContentsDataType.TILES)throw new Error("The Contents of a TileTable must have a data type of tiles")},i.COLUMN_ID=s.TileColumns.ID,i.COLUMN_ZOOM_LEVEL=s.TileColumns.ZOOM_LEVEL,i.COLUMN_TILE_COLUMN=s.TileColumns.TILE_COLUMN,i.COLUMN_TILE_ROW=s.TileColumns.TILE_ROW,i.COLUMN_TILE_DATA=s.TileColumns.TILE_DATA,i})(m.UserTable);l.TileTable=n},9631:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.TileTableReader=void 0;var m=o(4880),h=o(8704),s=o(8334),a=(function(r){function n(t){var i=r.call(this,t.table_name)||this;return i.tileMatrixSet=t,i}return d(n,r),n.prototype.readTileTable=function(t){return this.readTable(t.database)},n.prototype.createTable=function(t,i){return new h.TileTable(t,i)},n.prototype.createColumn=function(t){return new s.TileColumn(t.index,t.name,t.dataType,t.max,t.notNull,t.defaultValue,t.primaryKey,t.autoincrement)},n})(m.UserTableReader);l.TileTableReader=a},5762:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.UserCustomColumn=void 0;var m=o(5865),h=o(7319),s=o(5071),a=(function(r){function n(t,i,u,f,p,y,g,b){var E=r.call(this,t,i,u,f,p,y,g,b)||this;if(u==null)throw new Error("Data type is required to create column: "+i);return E}return d(n,r),n.createColumn=function(t,i,u,f,p,y,g){return f===void 0&&(f=!1),new n(t,i,u,y,f,p,!1,g)},n.createPrimaryKeyColumn=function(t,i,u){return u===void 0&&(u=s.UserTableDefaults.DEFAULT_AUTOINCREMENT),new n(t,i,h.GeoPackageDataType.INTEGER,void 0,void 0,void 0,!0,u)},n})(m.UserColumn);l.UserCustomColumn=a},496:function(_,l,o){var c,d=this&&this.__extends||(c=function(h,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])},c(h,s)},function(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=h}c(h,s),h.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(l,"__esModule",{value:!0}),l.UserCustomColumns=void 0;var m=(function(h){function s(a,r,n,t){var i=h.call(this,a,r,t)||this;return i.requiredColumns=n==null?[]:n.slice(),i.updateColumns(),i}return d(s,h),s.prototype.copy=function(){return new s(this.getTableName(),this.getColumns(),this.getRequiredColumns(),this.isCustom())},s.prototype.getRequiredColumns=function(){return this.requiredColumns},s.prototype.setRequiredColumns=function(a){a===void 0&&(a=[]),this.requiredColumns=a.slice()},s.prototype.updateColumns=function(){var a=this;if(h.prototype.updateColumns.call(this),!this.isCustom()&&this.requiredColumns!==null&&this.requiredColumns.length!==0){var r=new Set(this.requiredColumns),n={};this.getColumns().forEach((function(t){var i=t.getName(),u=t.getIndex();if(r.has(i)){var f=n[i];a.duplicateCheck(u,f,i),n[i]=u}})),r.forEach((function(t){a.missingCheck(n[t],t)}))}},s})(o(2114).UserColumns);l.UserCustomColumns=m},1447:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.UserCustomDao=void 0;var m=o(4668),h=o(362),s=(function(a){function r(n,t){return a.call(this,n,t)||this}return d(r,a),r.prototype.createObject=function(n){return this.getRow(n)},r.readTable=function(n,t){return new r(n,new h.UserCustomTableReader(t).readTable(n.database))},r})(m.UserDao);l.UserCustomDao=s},2378:function(_,l,o){var c,d=this&&this.__extends||(c=function(a,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},c(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=a}c(a,r),a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(l,"__esModule",{value:!0}),l.UserCustomTable=void 0;var m=o(8018),h=o(496),s=(function(a){function r(n,t,i){return i===void 0&&(i=[]),a.call(this,new h.UserCustomColumns(n,t,i,!0))||this}return d(r,a),r.prototype.copy=function(){return new r(this.getTableName(),this.getUserColumns().getColumns(),this.getUserColumns().getRequiredColumns())},r.prototype.getDataType=function(){return null},r.prototype.getUserColumns=function(){return a.prototype.getUserColumns.call(this)},r.prototype.getRequiredColumns=function(){return this.getUserColumns().getRequiredColumns()},r})(m.UserTable);l.UserCustomTable=s},362:function(_,l,o){var c,d=this&&this.__extends||(c=function(r,n){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(t[u]=i[u])},c(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=r}c(r,n),r.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)});Object.defineProperty(l,"__esModule",{value:!0}),l.UserCustomTableReader=void 0;var m=o(2378),h=o(4880),s=o(5762),a=(function(r){function n(t){return r.call(this,t)||this}return d(n,r),n.prototype.readUserCustomTable=function(t){return this.readTable(t.database)},n.prototype.createTable=function(t,i){return new m.UserCustomTable(t,i,null)},n.prototype.createColumn=function(t){return new s.UserCustomColumn(t.index,t.name,t.dataType,t.max,t.notNull,t.defaultValue,t.primaryKey,t.autoincrement)},n})(h.UserTableReader);l.UserCustomTableReader=a},5865:function(_,l,o){var c=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.UserColumn=void 0;var d=c(o(8446)),m=o(7319),h=o(2841),s=o(1133),a=o(91),r=o(5071),n=o(7686),t=(function(){function i(u,f,p,y,g,b,E,x,M){this.index=u,this.name=f,this.dataType=p,this.max=y,this.notNull=g,this.defaultValue=b,this.primaryKey=E,this.autoincrement=x,this.unique=M,this.constraints=new n.Constraints,this.validateMax(),this.type=this.getTypeName(f,p),this.addDefaultConstraints()}return i.validateDataType=function(u,f){if(f==null)throw new Error("Data Type is required to create column: "+u)},i.prototype.copy=function(){var u=new i(this.index,this.name,this.dataType,this.max,this.notNull,this.defaultValue,this.primaryKey,this.unique);return u.min=this.min,u.constraints=this.constraints.copy(),u},i.prototype.clearConstraints=function(){return this.constraints.clear()},i.prototype.getConstraints=function(){return this.constraints},i.prototype.setIndex=function(u){if(this.hasIndex()){if(!(0,d.default)(u,this.index))throw new Error("User Column with a valid index may not be changed. Column Name: "+this.name+", Index: "+this.index+", Attempted Index: "+this.index)}else this.index=u},i.prototype.hasIndex=function(){return this.index>i.NO_INDEX},i.prototype.resetIndex=function(){this.index=i.NO_INDEX},i.prototype.getIndex=function(){return this.index},i.prototype.setName=function(u){this.name=u},i.prototype.getName=function(){return this.name},i.prototype.isNamed=function(u){return this.name===u},i.prototype.hasMax=function(){return this.max!=null},i.prototype.setMax=function(u){this.max=u},i.prototype.getMax=function(){return this.max},i.prototype.setNotNull=function(u){this.notNull!==u&&(u?this.addNotNullConstraint():this.removeConstraintByType(a.ConstraintType.NOT_NULL)),this.notNull=u},i.prototype.isNotNull=function(){return this.notNull},i.prototype.hasDefaultValue=function(){return this.defaultValue!==null&&this.defaultValue!==void 0},i.prototype.setDefaultValue=function(u){this.removeConstraintByType(a.ConstraintType.DEFAULT),u!=null&&this.addDefaultValueConstraint(u),this.defaultValue=u},i.prototype.getDefaultValue=function(){return this.defaultValue},i.prototype.setPrimaryKey=function(u){this.primaryKey!==u&&(u?this.addPrimaryKeyConstraint():(this.autoincrement=!1,this.removeConstraintByType(a.ConstraintType.AUTOINCREMENT),this.removeConstraintByType(a.ConstraintType.PRIMARY_KEY))),this.primaryKey=u},i.prototype.isPrimaryKey=function(){return this.primaryKey},i.prototype.setAutoincrement=function(u){this.autoincrement!==u&&(u?this.addAutoincrementConstraint():this.removeConstraintByType(a.ConstraintType.AUTOINCREMENT)),this.autoincrement=u},i.prototype.isAutoincrement=function(){return this.autoincrement},i.prototype.setUnique=function(u){this.unique!==u&&(u?this.addUniqueConstraint():this.removeConstraintByType(a.ConstraintType.UNIQUE)),this.unique=u},i.prototype.isUnique=function(){return this.unique},i.prototype.setDataType=function(u){this.dataType=u},i.prototype.getDataType=function(){return this.dataType},i.prototype.getTypeName=function(u,f){return i.validateDataType(u,f),m.GeoPackageDataType.nameFromType(f)},i.prototype.validateMax=function(){if(this.max&&this.dataType!==m.GeoPackageDataType.TEXT&&this.dataType!==m.GeoPackageDataType.BLOB)throw new Error("Column max is only supported for TEXT and BLOB columns. column: "+this.name+", max: "+this.max+", type: "+this.dataType);return!0},i.createPrimaryKeyColumn=function(u,f,p){return p===void 0&&(p=r.UserTableDefaults.DEFAULT_AUTOINCREMENT),new i(u,f,m.GeoPackageDataType.INTEGER,void 0,!0,void 0,!0,p)},i.createColumn=function(u,f,p,y,g,b){return y===void 0&&(y=!1),new i(u,f,p,b,y,g,!1)},i.prototype.addDefaultConstraints=function(){this.isNotNull()&&this.addNotNullConstraint(),this.hasDefaultValue()&&this.addDefaultValueConstraint(this.getDefaultValue()),this.isPrimaryKey()&&(this.addPrimaryKeyConstraint(),this.isAutoincrement()&&this.addAutoincrementConstraint()),this.isUnique()&&this.addUniqueConstraint()},i.prototype.addConstraint=function(u){u.order!==null&&u.order!==void 0||this.setConstraintOrder(u),this.constraints.add(u)},i.prototype.setConstraintOrder=function(u){var f=null;switch(u.getType()){case a.ConstraintType.PRIMARY_KEY:f=i.PRIMARY_KEY_CONSTRAINT_ORDER;break;case a.ConstraintType.UNIQUE:f=i.UNIQUE_CONSTRAINT_ORDER;break;case a.ConstraintType.NOT_NULL:f=i.NOT_NULL_CONSTRAINT_ORDER;break;case a.ConstraintType.DEFAULT:f=i.DEFAULT_VALUE_CONSTRAINT_ORDER;break;case a.ConstraintType.AUTOINCREMENT:f=i.AUTOINCREMENT_CONSTRAINT_ORDER}u.order=f},i.prototype.addConstraintSql=function(u){var f=s.ConstraintParser.getType(u),p=s.ConstraintParser.getName(u);this.constraints.add(new h.RawConstraint(f,p,u))},i.prototype.addConstraints=function(u){this.constraints.addConstraints(u)},i.prototype.addColumnConstraints=function(u){this.addConstraints(u.getConstraints())},i.prototype.addNotNullConstraint=function(){this.addConstraint(new h.RawConstraint(a.ConstraintType.NOT_NULL,null,"NOT NULL",i.NOT_NULL_CONSTRAINT_ORDER))},i.prototype.addDefaultValueConstraint=function(u){this.addConstraint(new h.RawConstraint(a.ConstraintType.DEFAULT,null,"DEFAULT "+m.GeoPackageDataType.columnDefaultValue(u,this.getDataType()),i.DEFAULT_VALUE_CONSTRAINT_ORDER))},i.prototype.addPrimaryKeyConstraint=function(){this.addConstraint(new h.RawConstraint(a.ConstraintType.PRIMARY_KEY,null,"PRIMARY KEY",i.PRIMARY_KEY_CONSTRAINT_ORDER))},i.prototype.addAutoincrementConstraint=function(){if(!this.isPrimaryKey())throw new Error("Autoincrement may only be set on a primary key column");this.addConstraint(new h.RawConstraint(a.ConstraintType.AUTOINCREMENT,null,"AUTOINCREMENT",i.AUTOINCREMENT_CONSTRAINT_ORDER))},i.prototype.addUniqueConstraint=function(){this.addConstraint(new h.RawConstraint(a.ConstraintType.UNIQUE,null,"UNIQUE",i.UNIQUE_CONSTRAINT_ORDER))},i.prototype.removeConstraintByType=function(u){this.constraints.clearConstraintsByType(u)},i.prototype.getType=function(){return this.type},i.prototype.hasConstraints=function(){return this.constraints.has()},i.prototype.buildConstraintSql=function(u){var f=null;return!r.UserTableDefaults.DEFAULT_PK_NOT_NULL&&this.isPrimaryKey()&&u.getType()===a.ConstraintType.NOT_NULL||(f=u.buildSql()),f},i.NO_INDEX=-1,i.NOT_NULL_CONSTRAINT_ORDER=1,i.DEFAULT_VALUE_CONSTRAINT_ORDER=2,i.PRIMARY_KEY_CONSTRAINT_ORDER=3,i.AUTOINCREMENT_CONSTRAINT_ORDER=4,i.UNIQUE_CONSTRAINT_ORDER=5,i})();l.UserColumn=t},2114:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UserColumns=void 0;var c=o(7319),d=(function(){function m(h,s,a){a===void 0&&(a=!1),this._pkIndex=-1,this._tableName=h,this._columns=s,this._custom=a,this._nameToIndex=new Map,this._columnNames=[]}return m.prototype.copy=function(){var h=[];this._columns.forEach((function(a){h.push(a.copy())}));var s=new m(this._tableName,h,this._custom);return s._columnNames=Array.from(this._columnNames),s._nameToIndex=new Map(this._nameToIndex),s._pkIndex=this._pkIndex,s},m.prototype.updateColumns=function(){var h=this;if(this._nameToIndex.clear(),!this._custom){var s=new Set,a=[];this._columns.forEach((function(p){if(p.hasIndex()){var y=p.getIndex();if(s.has(y))throw new Error("Duplicate index: "+y+", Table Name: "+h._tableName);s.add(y)}else a.push(p)}));var r=-1;a.forEach((function(p){for(;s.has(++r););p.setIndex(r)})),this._columns.sort((function(p,y){return p.index-y.index}))}this._pkIndex=-1,this._columnNames=[];for(var n=0;n<this._columns.length;n++){var t=this._columns[n],i=t.getName(),u=i.toLowerCase();if(!this._custom){if(t.getIndex()!=n)throw new Error("No column found at index: "+n+", Table Name: "+this._tableName);if(this._nameToIndex.has(u))throw new Error("Duplicate column found at index: "+n+", Table Name: "+this._tableName+", Name: "+i)}if(t.isPrimaryKey()){if(this._pkIndex!=-1){var f="More than one primary key column was found for ";throw f=(f=this._custom?f.concat("custom specified table columns"):f.concat("table")).concat(". table: "+this._tableName+", index1: "+this._pkIndex+", index2: "+n),this._custom&&(f=f.concat(", columns: "+this._columnNames)),new Error(f)}this._pkIndex=n}this._columnNames[n]=i,this._nameToIndex.set(u,n)}},m.prototype.duplicateCheck=function(h,s,a){if(s!=null)throw new Error("More than one "+a+" column was found for table '"+this._tableName+"'. Index "+s+" and "+h)},m.prototype.typeCheck=function(h,s){var a=s.getDataType();if(a==null||a!==h)throw new Error("Unexpected "+s.getName()+" column data type was found for table '"+this._tableName+"', expected: "+c.GeoPackageDataType.nameFromType(h)+", actual: "+(a!=null?c.GeoPackageDataType.nameFromType(a):"null"))},m.prototype.missingCheck=function(h,s){if(h==null)throw new Error("No "+s+" column was found for table '"+this._tableName+"'")},m.prototype.getColumnIndexForColumnName=function(h){return this.getColumnIndex(h,!0)},m.prototype.getColumnIndex=function(h,s){var a=this._nameToIndex.get(h.toLowerCase());if(s&&a==null){var r="Column does not exist in ";throw r=(r=this._custom?r.concat("custom specified table columns"):r.concat("table")).concat(". table: "+this._tableName+", column: "+h),this._custom&&(r=r.concat(", columns: "+this._columnNames)),new Error(r)}return a},m.prototype.getColumnNames=function(){return this._columnNames},m.prototype.getColumnName=function(h){return this._columnNames[h]},m.prototype.getColumns=function(){return this._columns},m.prototype.getColumnForIndex=function(h){return this._columns[h]},m.prototype.getColumn=function(h){return this.getColumnForIndex(this.getColumnIndexForColumnName(h))},m.prototype.hasColumn=function(h){return this._nameToIndex.has(h.toLowerCase())},m.prototype.columnCount=function(){return this._columns.length},m.prototype.getTableName=function(){return this._tableName},m.prototype.setTableName=function(h){this._tableName=h},m.prototype.isCustom=function(){return this._custom},m.prototype.setCustom=function(h){this._custom=h},m.prototype.hasPkColumn=function(){return this._pkIndex>=0},m.prototype.getPkColumnIndex=function(){return this._pkIndex},m.prototype.getPkColumn=function(){var h=null;return this.hasPkColumn()&&(h=this._columns[this._pkIndex]),h},m.prototype.getPkColumnName=function(){return this.getPkColumn().getName()},m.prototype.columnsOfType=function(h){return this._columns.filter((function(s){return s.getDataType()===h}))},m.prototype.addColumn=function(h){this._columns.push(h),this.updateColumns()},m.prototype.renameColumn=function(h,s){this.renameColumnWithName(h.getName(),s),h.setName(s)},m.prototype.renameColumnWithName=function(h,s){this.renameColumnWithIndex(this.getColumnIndexForColumnName(h),s)},m.prototype.renameColumnWithIndex=function(h,s){this._columns[h].setName(s),this.updateColumns()},m.prototype.dropColumn=function(h){this.dropColumnWithIndex(h.getIndex())},m.prototype.dropColumnWithName=function(h){this.dropColumnWithIndex(this.getColumnIndexForColumnName(h))},m.prototype.dropColumnWithIndex=function(h){this._columns.splice(h,1),this._columns.forEach((function(s){return s.resetIndex()})),this.updateColumns()},m.prototype.alterColumn=function(h){var s=this.getColumn(h.getName()).getIndex();h.setIndex(s),this._columns[s]=h},m})();l.UserColumns=d},4668:function(_,l,o){var c,d=this&&this.__extends||(c=function(u,f){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},c(u,f)},function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function p(){this.constructor=u}c(u,f),u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)});Object.defineProperty(l,"__esModule",{value:!0}),l.UserDao=void 0;var m=o(4115),h=o(6366),s=o(4599),a=o(2224),r=o(8483),n=o(8314),t=o(5042),i=(function(u){function f(p,y){var g=u.call(this,p)||this;return g._table=y,g.table_name=y.getTableName(),g.gpkgTableName=y.getTableName(),y.getPkColumn()?g.idColumns=[y.getPkColumn().getName()]:g.idColumns=[],g.columns=y.getUserColumns().getColumnNames(),g}return d(f,u),f.prototype.createObject=function(p){return p?this.getRow(p):this.newRow()},f.prototype.setValueInObject=function(p,y,g){p.setValueNoValidationWithIndex(y,g)},f.prototype.getRow=function(p){if(p instanceof a.UserRow)return p;if(this.table){for(var y=this.table.getColumnCount(),g={},b=0;b<y;b++){var E=this.table.getColumnWithIndex(b);g[E.name]=E.dataType}return this.newRow(g,p)}},Object.defineProperty(f.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),f.prototype.newRow=function(p,y){return new a.UserRow(this.table,p,y)},f.prototype.linkRelatedRow=function(p,y,g,b,E){var x,M=this.geoPackage.relatedTablesExtension,S=p.table.getTableName(),O=y.table.getTableName(),C=M.getRelationshipBuilder().setBaseTableName(S).setRelatedTableName(O).setRelationType(g);b&&typeof b!="string"?(C.setUserMappingTable(b),x=b.getTableName()):(b=b||S+"_"+O,C.setMappingTableName(b),x=b),M.addRelationship(C);var T=M.getMappingDao(x),R=T.newRow();for(var B in R.baseId=p.id,R.relatedId=y.id,E)R.setValueWithColumnName(B,E[B]);return T.create(R)},f.prototype.linkFeatureRow=function(p,y,g,b){return this.linkRelatedRow(p,y,r.RelationType.FEATURES,g,b)},f.prototype.linkMediaRow=function(p,y,g,b){return this.linkRelatedRow(p,y,r.RelationType.MEDIA,g,b)},f.prototype.linkSimpleAttributesRow=function(p,y,g,b){return this.linkRelatedRow(p,y,r.RelationType.SIMPLE_ATTRIBUTES,g,b)},f.prototype.getLinkedMedia=function(p){for(var y=this.mediaRelations,g=this.geoPackage.relatedTablesExtension,b=[],E=0;E<y.length;E++)for(var x=y[E],M=g.getMediaDao(x),S=g.getMappingDao(x.mapping_table_name).queryByBaseId(p.id),O=0;O<S.length;O++){var C=S[O].related_id;b.push(M.queryForId(C))}return b},f.prototype.getLinkedSimpleAttributes=function(p){for(var y=this.simpleAttributesRelations,g=this.geoPackage.relatedTablesExtension,b=[],E=0;E<y.length;E++)for(var x=y[E],M=g.getSimpleAttributesDao(x),S=g.getMappingDao(x.mapping_table_name).queryByBaseId(p.id),O=0;O<S.length;O++){var C=S[O].related_id;b.push(M.queryForId(C))}return b},f.prototype.getLinkedFeatures=function(p){for(var y=this.featureRelations,g=this.geoPackage.relatedTablesExtension,b=[],E=0;E<y.length;E++)for(var x=y[E],M=this.geoPackage.getFeatureDao(x.base_table_name),S=g.getMappingDao(x.mapping_table_name).queryByBaseId(p.id),O=0;O<S.length;O++){var C=S[O].related_id;b.push(M.queryForId(C))}return b},Object.defineProperty(f.prototype,"simpleAttributesRelations",{get:function(){return this.getRelationsWithName(s.SimpleAttributesTable.RELATION_TYPE.name)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"featureRelations",{get:function(){return this.getRelationsWithName(r.RelationType.FEATURES.name)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"mediaRelations",{get:function(){return this.getRelationsWithName(h.MediaTable.RELATION_TYPE.name)},enumerable:!1,configurable:!0}),f.prototype.getRelationsWithName=function(p){return this.geoPackage.extendedRelationDao.getBaseTableRelationsWithName(this.table_name,p)},Object.defineProperty(f.prototype,"relations",{get:function(){return this.geoPackage.extendedRelationDao.getBaseTableRelations(this.table_name)},enumerable:!1,configurable:!0}),f.prototype.getRows=function(p){for(var y=[],g=0;g<p.length;g++){var b=this.queryForId(p[g]);b&&y.push(b)}return y},f.prototype.getCount=function(){return this.connection.count(this.table_name)},f.prototype.getTableName=function(){return this.table_name},f.prototype.renameColumn=function(p,y){n.AlterTable.renameColumn(this.connection,this.table_name,p,y),this._table.renameColumnWithName(p,y)},f.prototype.addColumn=function(p){n.AlterTable.addColumn(this.connection,this.table_name,p.getName(),t.CoreSQLUtils.columnDefinition(p)),this._table.addColumn(p)},f.prototype.dropColumnWithIndex=function(p){this.dropColumn(this._table.getColumnNameWithIndex(p))},f.prototype.dropColumn=function(p){n.AlterTable.dropColumnForUserTable(this.connection,this.table,p)},f.prototype.dropColumns=function(p){var y=[];p.forEach((function(g){y.push(g.getName())})),this.dropColumnNames(y)},f.prototype.dropColumnIndexes=function(p){var y=this,g=[];p.forEach((function(b){g.push(y._table.getColumnNameWithIndex(b))})),this.dropColumnNames(g)},f.prototype.dropColumnNames=function(p){n.AlterTable.dropColumnsForUserTable(this.connection,this.table,p)},f.prototype.alterColumn=function(p){n.AlterTable.alterColumnForTable(this.connection,this.table,p)},f.prototype.alterColumns=function(p){n.AlterTable.alterColumnsForTable(this.connection,this.table,p)},f})(m.Dao);l.UserDao=i},2224:(_,l,o)=>{var c=o(3085).lW;Object.defineProperty(l,"__esModule",{value:!0}),l.UserRow=void 0;var d=o(7319),m=(function(){function h(s,a,r){if(this.table=s,this.columnTypes=a,this.values=r,!this.columnTypes){var n=this.table.getColumnCount();this.columnTypes={},this.values={};for(var t=0;t<n;t++)this.columnTypes[this.table.columns.getColumnName(t)]=this.table.columns.getColumnForIndex(t).dataType,this.values[this.table.columns.getColumnName(t)]=this.table.columns.getColumnForIndex(t).defaultValue}}return Object.defineProperty(h.prototype,"idColumn",{get:function(){return this.table.getIdColumn()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"columnCount",{get:function(){return this.table.getColumnCount()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"columnNames",{get:function(){return this.table.columns._columnNames},enumerable:!1,configurable:!0}),h.prototype.getColumnNameWithIndex=function(s){return this.table.getColumnNameWithIndex(s)},h.prototype.getColumnIndexWithColumnName=function(s){return this.table.getColumnIndex(s)},h.prototype.getValueWithIndex=function(s){var a=this.values[this.getColumnNameWithIndex(s)];return a!==void 0&&(a=this.toObjectValue(s,a)),a},h.prototype.getValueWithColumnName=function(s){var a=this.values[s],r=this.getRowColumnTypeWithColumnName(s);return a==null?a:r===d.GeoPackageDataType.BOOLEAN?a===1:r===d.GeoPackageDataType.BLOB?c.from(a):a},h.prototype.toObjectValue=function(s,a){var r=a;return this.getColumnWithIndex(s).dataType===d.GeoPackageDataType.BOOLEAN&&a?a===1:r},h.prototype.toDatabaseValue=function(s){var a=this.getColumnWithColumnName(s),r=this.getValueWithColumnName(s);return a.dataType===d.GeoPackageDataType.BOOLEAN?r===!0?1:0:r},h.prototype.getRowColumnTypeWithIndex=function(s){return this.columnTypes[this.getColumnNameWithIndex(s)]},h.prototype.getRowColumnTypeWithColumnName=function(s){return this.columnTypes[s]},h.prototype.getColumnWithIndex=function(s){return this.table.getColumnWithIndex(s)},h.prototype.getColumnWithColumnName=function(s){return this.table.getColumnWithColumnName(s)},Object.defineProperty(h.prototype,"id",{get:function(){var s=null;return this.pkColumn&&(s=this.getValueWithIndex(this.pkColumnIndex)),s},set:function(s){this.values[this.table.getPkColumnName()]=s},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"pkColumnIndex",{get:function(){return this.table.getUserColumns().getPkColumnIndex()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"pkColumn",{get:function(){return this.table.getPkColumn()},enumerable:!1,configurable:!0}),h.prototype.setValueWithIndex=function(s,a){if(s===this.table.getUserColumns().getPkColumnIndex())throw new Error("Cannot update the primary key of the row.  Table Name: "+this.table.getTableName()+", Index: "+s+", Name: "+this.table.getPkColumnName());this.setValueWithColumnName(this.getColumnNameWithIndex(s),a)},h.prototype.setValueNoValidationWithIndex=function(s,a){this.values[this.getColumnNameWithIndex(s)]=a},h.prototype.setValueWithColumnName=function(s,a){var r=this.getRowColumnTypeWithColumnName(s);r===d.GeoPackageDataType.BOOLEAN?this.values[s]=a===!0?1:0:r===d.GeoPackageDataType.DATE?this.values[s]=a.toISOString().slice(0,10):r===d.GeoPackageDataType.DATETIME?this.values[s]=a.toISOString():this.values[s]=a},h.prototype.hasIdColumn=function(){return this.table.getUserColumns().getPkColumnIndex()!==void 0},h.prototype.hasId=function(){var s=!1;if(this.hasIdColumn()){var a=this.getValueWithIndex(this.table.getUserColumns().getPkColumnIndex());s=a!=null&&typeof a=="number"}return s},h.prototype.resetId=function(){this.values[this.table.getPkColumnName()]=void 0},h})();l.UserRow=m},8018:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UserTable=void 0;var c=o(7686),d=(function(){function m(h){this.constraints=new c.Constraints,this.columns=h,this.constraints=new c.Constraints}return m.prototype.copy=function(){var h=new m(this.columns.copy());return h.constraints.addConstraints(this.constraints),this.contents!==null&&this.contents!==void 0&&(h.contents=this.contents.copy()),h},m.prototype.getTableName=function(){return this.columns.getTableName()},Object.defineProperty(m.prototype,"tableType",{get:function(){return"userTable"},enumerable:!1,configurable:!0}),m.prototype.getUserColumns=function(){return this.columns},m.prototype.getColumnIndex=function(h){return this.columns.getColumnIndexForColumnName(h)},m.prototype.hasColumn=function(h){try{return this.getColumnIndex(h),!0}catch{return!1}},m.prototype.getColumnNameWithIndex=function(h){return this.columns.getColumnName(h)},m.prototype.getColumnWithIndex=function(h){return this.columns.getColumnForIndex(h)},m.prototype.getColumnWithColumnName=function(h){return this.getColumnWithIndex(this.getColumnIndex(h))},m.prototype.getColumnCount=function(){return this.columns.columnCount()},m.prototype.getPkColumn=function(){return this.columns.getPkColumn()},m.prototype.getPkColumnName=function(){return this.columns.getPkColumnName()},m.prototype.getIdColumnIndex=function(){return this.columns.getPkColumnIndex()},m.prototype.getIdColumn=function(){return this.getPkColumn()},m.prototype.addConstraint=function(h){this.constraints.add(h)},m.prototype.addConstraints=function(h){this.constraints.addConstraints(h)},m.prototype.hasConstraints=function(){return this.constraints.has()},m.prototype.getConstraints=function(){return this.constraints},m.prototype.getConstraintsByType=function(h){return this.constraints.getConstraintsForType(h)},m.prototype.clearConstraints=function(){return this.constraints.clear()},m.prototype.columnsOfType=function(h){return this.columns.columnsOfType(h)},m.prototype.getContents=function(){return this.contents},m.prototype.setContents=function(h){this.contents=h,h!=null&&this.validateContents(h)},m.prototype.validateContents=function(h){},m.prototype.addColumn=function(h){this.columns.addColumn(h)},m.prototype.renameColumn=function(h,s){this.columns.renameColumn(h,s)},m.prototype.renameColumnWithName=function(h,s){this.columns.renameColumnWithName(h,s)},m.prototype.renameColumnAtIndex=function(h,s){this.columns.renameColumnWithIndex(h,s)},m.prototype.dropColumn=function(h){this.columns.dropColumn(h)},m.prototype.dropColumnWithName=function(h){this.columns.dropColumnWithName(h)},m.prototype.dropColumnWithIndex=function(h){this.columns.dropColumnWithIndex(h)},m.prototype.alterColumn=function(h){this.columns.alterColumn(h)},m})();l.UserTable=d},5071:(_,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UserTableDefaults=void 0;var o=(function(){function c(){}return c.DEFAULT_AUTOINCREMENT=!0,c.DEFAULT_PK_NOT_NULL=!0,c})();l.UserTableDefaults=o},4880:(_,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UserTableReader=void 0;var c=o(5865),d=o(5045),m=o(7043),h=(function(){function s(a){this.table_name=a}return s.prototype.readTable=function(a){var r=this,n=[],t=d.TableInfo.info(a,this.table_name);if(t==null)throw new Error("Table does not exist: "+this.table_name);var i=m.SQLiteMaster.queryForConstraints(a,this.table_name);t.getColumns().forEach((function(f){if(f.getDataType()===null||f.getDataType()===void 0)throw new Error("Unsupported column data type "+f.getType());var p=r.createColumn(f),y=i.getColumnConstraints(p.getName());y!=null&&y.hasConstraints()&&(p.clearConstraints(),p.addConstraints(y.constraints)),n.push(p)}));var u=this.createTable(this.table_name,n);return u.addConstraints(i.getTableConstraints()),u},s.prototype.createColumn=function(a){return new c.UserColumn(a.index,a.name,a.dataType,a.max,a.notNull,a.defaultValue,a.primaryKey,a.autoincrement)},s})();l.UserTableReader=h},4275:function(_,l,o){var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0}),l.GeoPackageValidate=l.GeoPackageValidationError=void 0;var d=c(o(3935)),m=o(1506),h=function(a,r){this.error=a,this.fatal=r};l.GeoPackageValidationError=h;var s=(function(){function a(){}return a.hasGeoPackageExtension=function(r){var n=d.default.extname(r);return n&&n!==""&&(n.toLowerCase()==="."+m.GeoPackageConstants.GEOPACKAGE_EXTENSION.toLowerCase()||n.toLowerCase()==="."+m.GeoPackageConstants.GEOPACKAGE_EXTENDED_EXTENSION.toLowerCase())},a.validateGeoPackageExtension=function(r){if(!a.hasGeoPackageExtension(r))return new h("GeoPackage database file '"+r+"' does not have a valid extension of '"+m.GeoPackageConstants.GEOPACKAGE_EXTENSION+"' or '"+m.GeoPackageConstants.GEOPACKAGE_EXTENDED_EXTENSION+"'",!0)},a.validateMinimumTables=function(r){var n=[],t=r.spatialReferenceSystemDao.isTableExists(),i=r.contentsDao.isTableExists();return t||n.push(new h("gpkg_spatial_ref_sys table does not exist",!0)),i||n.push(new h("gpkg_contents table does not exist",!0)),n},a.hasMinimumTables=function(r){return this.validateMinimumTables(r).length==0},a})();l.GeoPackageValidate=s},2038:(_,l)=>{var o;Object.defineProperty(l,"__esModule",{value:!0}),l.WKB=void 0;var c=(function(){function d(){}return d.fromName=function(m){return(m=m.toUpperCase())==="GEOMETRY"?d.typeMap.wkb.GeometryCollection:d.wktToEnum[m]},d.typeMap={wkt:{Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION"},wkb:{Point:1,LineString:2,Polygon:3,MultiPoint:4,MultiLineString:5,MultiPolygon:6,GeometryCollection:7}},d.wktToEnum=((o={})[d.typeMap.wkt.Point]=d.typeMap.wkb.Point,o[d.typeMap.wkt.LineString]=d.typeMap.wkb.LineString,o[d.typeMap.wkt.Polygon]=d.typeMap.wkb.Polygon,o[d.typeMap.wkt.MultiPoint]=d.typeMap.wkb.MultiPoint,o[d.typeMap.wkt.MultiLineString]=d.typeMap.wkb.MultiLineString,o[d.typeMap.wkt.MultiPolygon]=d.typeMap.wkb.MultiPolygon,o[d.typeMap.wkt.GeometryCollection]=d.typeMap.wkb.GeometryCollection,o),d})();l.WKB=c},2511:function(_,l,o){var c;_=o.nmd(_),(function(d){l&&l.nodeType,_&&_.nodeType;var m=typeof o.g=="object"&&o.g;m.global!==m&&m.window!==m&&m.self;var h,s=2147483647,a=36,r=1,n=26,t=38,i=700,u=72,f=128,p="-",y=/^xn--/,g=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=a-r,M=Math.floor,S=String.fromCharCode;function O($){throw RangeError(E[$])}function C($,Q){for(var ce=$.length,be=[];ce--;)be[ce]=Q($[ce]);return be}function T($,Q){var ce=$.split("@"),be="";return ce.length>1&&(be=ce[0]+"@",$=ce[1]),be+C(($=$.replace(b,".")).split("."),Q).join(".")}function R($){for(var Q,ce,be=[],Ae=0,we=$.length;Ae<we;)(Q=$.charCodeAt(Ae++))>=55296&&Q<=56319&&Ae<we?(64512&(ce=$.charCodeAt(Ae++)))==56320?be.push(((1023&Q)<<10)+(1023&ce)+65536):(be.push(Q),Ae--):be.push(Q);return be}function B($){return C($,(function(Q){var ce="";return Q>65535&&(ce+=S((Q-=65536)>>>10&1023|55296),Q=56320|1023&Q),ce+S(Q)})).join("")}function z($,Q){return $+22+75*($<26)-((Q!=0)<<5)}function L($,Q,ce){var be=0;for($=ce?M($/i):$>>1,$+=M($/Q);$>x*n>>1;be+=a)$=M($/x);return M(be+(x+1)*$/($+t))}function Y($){var Q,ce,be,Ae,we,Xe,Ve,st,tt,he,de,ze=[],P=$.length,A=0,D=f,W=u;for((ce=$.lastIndexOf(p))<0&&(ce=0),be=0;be<ce;++be)$.charCodeAt(be)>=128&&O("not-basic"),ze.push($.charCodeAt(be));for(Ae=ce>0?ce+1:0;Ae<P;){for(we=A,Xe=1,Ve=a;Ae>=P&&O("invalid-input"),((st=(de=$.charCodeAt(Ae++))-48<10?de-22:de-65<26?de-65:de-97<26?de-97:a)>=a||st>M((s-A)/Xe))&&O("overflow"),A+=st*Xe,!(st<(tt=Ve<=W?r:Ve>=W+n?n:Ve-W));Ve+=a)Xe>M(s/(he=a-tt))&&O("overflow"),Xe*=he;W=L(A-we,Q=ze.length+1,we==0),M(A/Q)>s-D&&O("overflow"),D+=M(A/Q),A%=Q,ze.splice(A++,0,D)}return B(ze)}function ie($){var Q,ce,be,Ae,we,Xe,Ve,st,tt,he,de,ze,P,A,D,W=[];for(ze=($=R($)).length,Q=f,ce=0,we=u,Xe=0;Xe<ze;++Xe)(de=$[Xe])<128&&W.push(S(de));for(be=Ae=W.length,Ae&&W.push(p);be<ze;){for(Ve=s,Xe=0;Xe<ze;++Xe)(de=$[Xe])>=Q&&de<Ve&&(Ve=de);for(Ve-Q>M((s-ce)/(P=be+1))&&O("overflow"),ce+=(Ve-Q)*P,Q=Ve,Xe=0;Xe<ze;++Xe)if((de=$[Xe])<Q&&++ce>s&&O("overflow"),de==Q){for(st=ce,tt=a;!(st<(he=tt<=we?r:tt>=we+n?n:tt-we));tt+=a)D=st-he,A=a-he,W.push(S(z(he+D%A,0))),st=M(D/A);W.push(S(z(st,0))),we=L(ce,P,be==Ae),ce=0,++be}++ce,++Q}return W.join("")}h={version:"1.3.2",ucs2:{decode:R,encode:B},decode:Y,encode:ie,toASCII:function($){return T($,(function(Q){return g.test(Q)?"xn--"+ie(Q):Q}))},toUnicode:function($){return T($,(function(Q){return y.test(Q)?Y(Q.slice(4).toLowerCase()):Q}))}},(c=function(){return h}.call(l,o,l,_))===void 0||(_.exports=c)})()},8575:(_,l,o)=>{var c=o(2511),d=o(2502);function m(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}l.parse=E,l.resolve=function(x,M){return E(x,!1,!0).resolve(M)},l.resolveObject=function(x,M){return x?E(x,!1,!0).resolveObject(M):M},l.format=function(x){return d.isString(x)&&(x=E(x)),x instanceof m?x.format():m.prototype.format.call(x)},l.Url=m;var h=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),n=["'"].concat(r),t=["%","/","?",";","#"].concat(n),i=["/","?","#"],u=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=o(7673);function E(x,M,S){if(x&&d.isObject(x)&&x instanceof m)return x;var O=new m;return O.parse(x,M,S),O}m.prototype.parse=function(x,M,S){if(!d.isString(x))throw new TypeError("Parameter 'url' must be a string, not "+typeof x);var O=x.indexOf("?"),C=O!==-1&&O<x.indexOf("#")?"?":"#",T=x.split(C);T[0]=T[0].replace(/\\/g,"/");var R=x=T.join(C);if(R=R.trim(),!S&&x.split("#").length===1){var B=a.exec(R);if(B)return this.path=R,this.href=R,this.pathname=B[1],B[2]?(this.search=B[2],this.query=M?b.parse(this.search.substr(1)):this.search.substr(1)):M&&(this.search="",this.query={}),this}var z=h.exec(R);if(z){var L=(z=z[0]).toLowerCase();this.protocol=L,R=R.substr(z.length)}if(S||z||R.match(/^\/\/[^@\/]+@[^@\/]+/)){var Y=R.substr(0,2)==="//";!Y||z&&y[z]||(R=R.substr(2),this.slashes=!0)}if(!y[z]&&(Y||z&&!g[z])){for(var ie,$,Q=-1,ce=0;ce<i.length;ce++)(be=R.indexOf(i[ce]))!==-1&&(Q===-1||be<Q)&&(Q=be);for(($=Q===-1?R.lastIndexOf("@"):R.lastIndexOf("@",Q))!==-1&&(ie=R.slice(0,$),R=R.slice($+1),this.auth=decodeURIComponent(ie)),Q=-1,ce=0;ce<t.length;ce++){var be;(be=R.indexOf(t[ce]))!==-1&&(Q===-1||be<Q)&&(Q=be)}Q===-1&&(Q=R.length),this.host=R.slice(0,Q),R=R.slice(Q),this.parseHost(),this.hostname=this.hostname||"";var Ae=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!Ae)for(var we=this.hostname.split(/\./),Xe=(ce=0,we.length);ce<Xe;ce++){var Ve=we[ce];if(Ve&&!Ve.match(u)){for(var st="",tt=0,he=Ve.length;tt<he;tt++)Ve.charCodeAt(tt)>127?st+="x":st+=Ve[tt];if(!st.match(u)){var de=we.slice(0,ce),ze=we.slice(ce+1),P=Ve.match(f);P&&(de.push(P[1]),ze.unshift(P[2])),ze.length&&(R="/"+ze.join(".")+R),this.hostname=de.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),Ae||(this.hostname=c.toASCII(this.hostname));var A=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+A,this.href+=this.host,Ae&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),R[0]!=="/"&&(R="/"+R))}if(!p[L])for(ce=0,Xe=n.length;ce<Xe;ce++){var W=n[ce];if(R.indexOf(W)!==-1){var ae=encodeURIComponent(W);ae===W&&(ae=escape(W)),R=R.split(W).join(ae)}}var le=R.indexOf("#");le!==-1&&(this.hash=R.substr(le),R=R.slice(0,le));var Ne=R.indexOf("?");if(Ne!==-1?(this.search=R.substr(Ne),this.query=R.substr(Ne+1),M&&(this.query=b.parse(this.query)),R=R.slice(0,Ne)):M&&(this.search="",this.query={}),R&&(this.pathname=R),g[L]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){A=this.pathname||"";var De=this.search||"";this.path=A+De}return this.href=this.format(),this},m.prototype.format=function(){var x=this.auth||"";x&&(x=(x=encodeURIComponent(x)).replace(/%3A/i,":"),x+="@");var M=this.protocol||"",S=this.pathname||"",O=this.hash||"",C=!1,T="";this.host?C=x+this.host:this.hostname&&(C=x+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(C+=":"+this.port)),this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(T=b.stringify(this.query));var R=this.search||T&&"?"+T||"";return M&&M.substr(-1)!==":"&&(M+=":"),this.slashes||(!M||g[M])&&C!==!1?(C="//"+(C||""),S&&S.charAt(0)!=="/"&&(S="/"+S)):C||(C=""),O&&O.charAt(0)!=="#"&&(O="#"+O),R&&R.charAt(0)!=="?"&&(R="?"+R),M+C+(S=S.replace(/[?#]/g,(function(B){return encodeURIComponent(B)})))+(R=R.replace("#","%23"))+O},m.prototype.resolve=function(x){return this.resolveObject(E(x,!1,!0)).format()},m.prototype.resolveObject=function(x){if(d.isString(x)){var M=new m;M.parse(x,!1,!0),x=M}for(var S=new m,O=Object.keys(this),C=0;C<O.length;C++){var T=O[C];S[T]=this[T]}if(S.hash=x.hash,x.href==="")return S.href=S.format(),S;if(x.slashes&&!x.protocol){for(var R=Object.keys(x),B=0;B<R.length;B++){var z=R[B];z!=="protocol"&&(S[z]=x[z])}return g[S.protocol]&&S.hostname&&!S.pathname&&(S.path=S.pathname="/"),S.href=S.format(),S}if(x.protocol&&x.protocol!==S.protocol){if(!g[x.protocol]){for(var L=Object.keys(x),Y=0;Y<L.length;Y++){var ie=L[Y];S[ie]=x[ie]}return S.href=S.format(),S}if(S.protocol=x.protocol,x.host||y[x.protocol])S.pathname=x.pathname;else{for(var $=(x.pathname||"").split("/");$.length&&!(x.host=$.shift()););x.host||(x.host=""),x.hostname||(x.hostname=""),$[0]!==""&&$.unshift(""),$.length<2&&$.unshift(""),S.pathname=$.join("/")}if(S.search=x.search,S.query=x.query,S.host=x.host||"",S.auth=x.auth,S.hostname=x.hostname||x.host,S.port=x.port,S.pathname||S.search){var Q=S.pathname||"",ce=S.search||"";S.path=Q+ce}return S.slashes=S.slashes||x.slashes,S.href=S.format(),S}var be=S.pathname&&S.pathname.charAt(0)==="/",Ae=x.host||x.pathname&&x.pathname.charAt(0)==="/",we=Ae||be||S.host&&x.pathname,Xe=we,Ve=S.pathname&&S.pathname.split("/")||[],st=($=x.pathname&&x.pathname.split("/")||[],S.protocol&&!g[S.protocol]);if(st&&(S.hostname="",S.port=null,S.host&&(Ve[0]===""?Ve[0]=S.host:Ve.unshift(S.host)),S.host="",x.protocol&&(x.hostname=null,x.port=null,x.host&&($[0]===""?$[0]=x.host:$.unshift(x.host)),x.host=null),we=we&&($[0]===""||Ve[0]==="")),Ae)S.host=x.host||x.host===""?x.host:S.host,S.hostname=x.hostname||x.hostname===""?x.hostname:S.hostname,S.search=x.search,S.query=x.query,Ve=$;else if($.length)Ve||(Ve=[]),Ve.pop(),Ve=Ve.concat($),S.search=x.search,S.query=x.query;else if(!d.isNullOrUndefined(x.search))return st&&(S.hostname=S.host=Ve.shift(),(P=!!(S.host&&S.host.indexOf("@")>0)&&S.host.split("@"))&&(S.auth=P.shift(),S.host=S.hostname=P.shift())),S.search=x.search,S.query=x.query,d.isNull(S.pathname)&&d.isNull(S.search)||(S.path=(S.pathname?S.pathname:"")+(S.search?S.search:"")),S.href=S.format(),S;if(!Ve.length)return S.pathname=null,S.search?S.path="/"+S.search:S.path=null,S.href=S.format(),S;for(var tt=Ve.slice(-1)[0],he=(S.host||x.host||Ve.length>1)&&(tt==="."||tt==="..")||tt==="",de=0,ze=Ve.length;ze>=0;ze--)(tt=Ve[ze])==="."?Ve.splice(ze,1):tt===".."?(Ve.splice(ze,1),de++):de&&(Ve.splice(ze,1),de--);if(!we&&!Xe)for(;de--;de)Ve.unshift("..");!we||Ve[0]===""||Ve[0]&&Ve[0].charAt(0)==="/"||Ve.unshift(""),he&&Ve.join("/").substr(-1)!=="/"&&Ve.push("");var P,A=Ve[0]===""||Ve[0]&&Ve[0].charAt(0)==="/";return st&&(S.hostname=S.host=A?"":Ve.length?Ve.shift():"",(P=!!(S.host&&S.host.indexOf("@")>0)&&S.host.split("@"))&&(S.auth=P.shift(),S.host=S.hostname=P.shift())),(we=we||S.host&&Ve.length)&&!A&&Ve.unshift(""),Ve.length?S.pathname=Ve.join("/"):(S.pathname=null,S.path=null),d.isNull(S.pathname)&&d.isNull(S.search)||(S.path=(S.pathname?S.pathname:"")+(S.search?S.search:"")),S.auth=x.auth||S.auth,S.slashes=S.slashes||x.slashes,S.href=S.format(),S},m.prototype.parseHost=function(){var x=this.host,M=s.exec(x);M&&((M=M[0])!==":"&&(this.port=M.substr(1)),x=x.substr(0,x.length-M.length)),x&&(this.hostname=x)}},2502:_=>{_.exports={isString:function(l){return typeof l=="string"},isObject:function(l){return typeof l=="object"&&l!==null},isNull:function(l){return l===null},isNullOrUndefined:function(l){return l==null}}},4927:(_,l,o)=>{var c=o(5108);function d(m){try{if(!o.g.localStorage)return!1}catch{return!1}var h=o.g.localStorage[m];return h!=null&&String(h).toLowerCase()==="true"}_.exports=function(m,h){if(d("noDeprecation"))return m;var s=!1;return function(){if(!s){if(d("throwDeprecation"))throw new Error(h);d("traceDeprecation")?c.trace(h):c.warn(h),s=!0}return m.apply(this,arguments)}}},1496:_=>{typeof Object.create=="function"?_.exports=function(l,o){l.super_=o,l.prototype=Object.create(o.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}})}:_.exports=function(l,o){l.super_=o;var c=function(){};c.prototype=o.prototype,l.prototype=new c,l.prototype.constructor=l}},384:_=>{_.exports=function(l){return l&&typeof l=="object"&&typeof l.copy=="function"&&typeof l.fill=="function"&&typeof l.readUInt8=="function"}},9539:(_,l,o)=>{var c=o(4155),d=o(5108),m=/%[sdj%]/g;l.format=function(L){if(!b(L)){for(var Y=[],ie=0;ie<arguments.length;ie++)Y.push(a(arguments[ie]));return Y.join(" ")}ie=1;for(var $=arguments,Q=$.length,ce=String(L).replace(m,(function(Ae){if(Ae==="%%")return"%";if(ie>=Q)return Ae;switch(Ae){case"%s":return String($[ie++]);case"%d":return Number($[ie++]);case"%j":try{return JSON.stringify($[ie++])}catch{return"[Circular]"}default:return Ae}})),be=$[ie];ie<Q;be=$[++ie])y(be)||!M(be)?ce+=" "+be:ce+=" "+a(be);return ce},l.deprecate=function(L,Y){if(E(o.g.process))return function(){return l.deprecate(L,Y).apply(this,arguments)};if(c.noDeprecation===!0)return L;var ie=!1;return function(){if(!ie){if(c.throwDeprecation)throw new Error(Y);c.traceDeprecation?d.trace(Y):d.error(Y),ie=!0}return L.apply(this,arguments)}};var h,s={};function a(L,Y){var ie={seen:[],stylize:n};return arguments.length>=3&&(ie.depth=arguments[2]),arguments.length>=4&&(ie.colors=arguments[3]),p(Y)?ie.showHidden=Y:Y&&l._extend(ie,Y),E(ie.showHidden)&&(ie.showHidden=!1),E(ie.depth)&&(ie.depth=2),E(ie.colors)&&(ie.colors=!1),E(ie.customInspect)&&(ie.customInspect=!0),ie.colors&&(ie.stylize=r),t(ie,L,ie.depth)}function r(L,Y){var ie=a.styles[Y];return ie?"\x1B["+a.colors[ie][0]+"m"+L+"\x1B["+a.colors[ie][1]+"m":L}function n(L,Y){return L}function t(L,Y,ie){if(L.customInspect&&Y&&C(Y.inspect)&&Y.inspect!==l.inspect&&(!Y.constructor||Y.constructor.prototype!==Y)){var $=Y.inspect(ie,L);return b($)||($=t(L,$,ie)),$}var Q=(function(tt,he){if(E(he))return tt.stylize("undefined","undefined");if(b(he)){var de="'"+JSON.stringify(he).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return tt.stylize(de,"string")}return g(he)?tt.stylize(""+he,"number"):p(he)?tt.stylize(""+he,"boolean"):y(he)?tt.stylize("null","null"):void 0})(L,Y);if(Q)return Q;var ce=Object.keys(Y),be=(function(tt){var he={};return tt.forEach((function(de,ze){he[de]=!0})),he})(ce);if(L.showHidden&&(ce=Object.getOwnPropertyNames(Y)),O(Y)&&(ce.indexOf("message")>=0||ce.indexOf("description")>=0))return i(Y);if(ce.length===0){if(C(Y)){var Ae=Y.name?": "+Y.name:"";return L.stylize("[Function"+Ae+"]","special")}if(x(Y))return L.stylize(RegExp.prototype.toString.call(Y),"regexp");if(S(Y))return L.stylize(Date.prototype.toString.call(Y),"date");if(O(Y))return i(Y)}var we,Xe="",Ve=!1,st=["{","}"];return f(Y)&&(Ve=!0,st=["[","]"]),C(Y)&&(Xe=" [Function"+(Y.name?": "+Y.name:"")+"]"),x(Y)&&(Xe=" "+RegExp.prototype.toString.call(Y)),S(Y)&&(Xe=" "+Date.prototype.toUTCString.call(Y)),O(Y)&&(Xe=" "+i(Y)),ce.length!==0||Ve&&Y.length!=0?ie<0?x(Y)?L.stylize(RegExp.prototype.toString.call(Y),"regexp"):L.stylize("[Object]","special"):(L.seen.push(Y),we=Ve?(function(tt,he,de,ze,P){for(var A=[],D=0,W=he.length;D<W;++D)z(he,String(D))?A.push(u(tt,he,de,ze,String(D),!0)):A.push("");return P.forEach((function(ae){ae.match(/^\d+$/)||A.push(u(tt,he,de,ze,ae,!0))})),A})(L,Y,ie,be,ce):ce.map((function(tt){return u(L,Y,ie,be,tt,Ve)})),L.seen.pop(),(function(tt,he,de){return tt.reduce((function(ze,P){return P.indexOf(`
`),ze+P.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?de[0]+(he===""?"":he+`
 `)+" "+tt.join(`,
  `)+" "+de[1]:de[0]+he+" "+tt.join(", ")+" "+de[1]})(we,Xe,st)):st[0]+Xe+st[1]}function i(L){return"["+Error.prototype.toString.call(L)+"]"}function u(L,Y,ie,$,Q,ce){var be,Ae,we;if((we=Object.getOwnPropertyDescriptor(Y,Q)||{value:Y[Q]}).get?Ae=we.set?L.stylize("[Getter/Setter]","special"):L.stylize("[Getter]","special"):we.set&&(Ae=L.stylize("[Setter]","special")),z($,Q)||(be="["+Q+"]"),Ae||(L.seen.indexOf(we.value)<0?(Ae=y(ie)?t(L,we.value,null):t(L,we.value,ie-1)).indexOf(`
`)>-1&&(Ae=ce?Ae.split(`
`).map((function(Xe){return"  "+Xe})).join(`
`).substr(2):`
`+Ae.split(`
`).map((function(Xe){return"   "+Xe})).join(`
`)):Ae=L.stylize("[Circular]","special")),E(be)){if(ce&&Q.match(/^\d+$/))return Ae;(be=JSON.stringify(""+Q)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(be=be.substr(1,be.length-2),be=L.stylize(be,"name")):(be=be.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),be=L.stylize(be,"string"))}return be+": "+Ae}function f(L){return Array.isArray(L)}function p(L){return typeof L=="boolean"}function y(L){return L===null}function g(L){return typeof L=="number"}function b(L){return typeof L=="string"}function E(L){return L===void 0}function x(L){return M(L)&&T(L)==="[object RegExp]"}function M(L){return typeof L=="object"&&L!==null}function S(L){return M(L)&&T(L)==="[object Date]"}function O(L){return M(L)&&(T(L)==="[object Error]"||L instanceof Error)}function C(L){return typeof L=="function"}function T(L){return Object.prototype.toString.call(L)}function R(L){return L<10?"0"+L.toString(10):L.toString(10)}l.debuglog=function(L){if(E(h)&&(h=c.env.NODE_DEBUG||""),L=L.toUpperCase(),!s[L])if(new RegExp("\\b"+L+"\\b","i").test(h)){var Y=c.pid;s[L]=function(){var ie=l.format.apply(l,arguments);d.error("%s %d: %s",L,Y,ie)}}else s[L]=function(){};return s[L]},l.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},l.isArray=f,l.isBoolean=p,l.isNull=y,l.isNullOrUndefined=function(L){return L==null},l.isNumber=g,l.isString=b,l.isSymbol=function(L){return typeof L=="symbol"},l.isUndefined=E,l.isRegExp=x,l.isObject=M,l.isDate=S,l.isError=O,l.isFunction=C,l.isPrimitive=function(L){return L===null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||typeof L=="symbol"||L===void 0},l.isBuffer=o(384);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function z(L,Y){return Object.prototype.hasOwnProperty.call(L,Y)}l.log=function(){var L,Y;d.log("%s - %s",(Y=[R((L=new Date).getHours()),R(L.getMinutes()),R(L.getSeconds())].join(":"),[L.getDate(),B[L.getMonth()],Y].join(" ")),l.format.apply(l,arguments))},l.inherits=o(1496),l._extend=function(L,Y){if(!Y||!M(Y))return L;for(var ie=Object.keys(Y),$=ie.length;$--;)L[ie[$]]=Y[ie[$]];return L}},8034:_=>{var l=arguments[3],o=arguments[4],c=arguments[5],d=JSON.stringify;_.exports=function(m,h){for(var s,a=Object.keys(c),r=0,n=a.length;r<n;r++){var t=a[r],i=c[t].exports;if(i===m||i&&i.default===m){s=t;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var u={};for(r=0,n=a.length;r<n;r++)u[t=a[r]]=t;o[s]=["function(require,module,exports){"+m+"(self); }",u]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[s]=s,o[f]=["function(require,module,exports){var f = require("+d(s)+");(f.default ? f.default : f)(self);}",p];var y={};(function S(O){for(var C in y[O]=!0,o[O][1]){var T=o[O][1][C];y[T]||S(T)}})(f);var g="("+l+")({"+Object.keys(y).map((function(S){return d(S)+":["+o[S][0]+","+d(o[S][1])+"]"})).join(",")+"},{},["+d(f)+"])",b=window.URL||window.webkitURL||window.mozURL||window.msURL,E=new Blob([g],{type:"text/javascript"});if(h&&h.bare)return E;var x=b.createObjectURL(E),M=new Worker(x);return M.objectURL=x,M}},6382:(_,l,o)=>{var c=o(3085).lW;function d(h,s){this.buffer=h,this.position=0,this.isBigEndian=s||!1}function m(h,s,a){return function(){var r;return r=this.isBigEndian?s.call(this.buffer,this.position):h.call(this.buffer,this.position),this.position+=a,r}}_.exports=d,d.prototype.readUInt8=m(c.prototype.readUInt8,c.prototype.readUInt8,1),d.prototype.readUInt16=m(c.prototype.readUInt16LE,c.prototype.readUInt16BE,2),d.prototype.readUInt32=m(c.prototype.readUInt32LE,c.prototype.readUInt32BE,4),d.prototype.readInt8=m(c.prototype.readInt8,c.prototype.readInt8,1),d.prototype.readInt16=m(c.prototype.readInt16LE,c.prototype.readInt16BE,2),d.prototype.readInt32=m(c.prototype.readInt32LE,c.prototype.readInt32BE,4),d.prototype.readFloat=m(c.prototype.readFloatLE,c.prototype.readFloatBE,4),d.prototype.readDouble=m(c.prototype.readDoubleLE,c.prototype.readDoubleBE,8),d.prototype.readVarInt=function(){var h,s=0,a=0;do s+=(127&(h=this.buffer[this.position+a]))<<7*a,a++;while(h>=128);return this.position+=a,s}},2659:(_,l,o)=>{var c=o(3085).lW;function d(h,s){this.buffer=new c(h),this.position=0,this.allowResize=s}function m(h,s){return function(a,r){this.ensureSize(s),h.call(this.buffer,a,this.position,r),this.position+=s}}_.exports=d,d.prototype.writeUInt8=m(c.prototype.writeUInt8,1),d.prototype.writeUInt16LE=m(c.prototype.writeUInt16LE,2),d.prototype.writeUInt16BE=m(c.prototype.writeUInt16BE,2),d.prototype.writeUInt32LE=m(c.prototype.writeUInt32LE,4),d.prototype.writeUInt32BE=m(c.prototype.writeUInt32BE,4),d.prototype.writeInt8=m(c.prototype.writeInt8,1),d.prototype.writeInt16LE=m(c.prototype.writeInt16LE,2),d.prototype.writeInt16BE=m(c.prototype.writeInt16BE,2),d.prototype.writeInt32LE=m(c.prototype.writeInt32LE,4),d.prototype.writeInt32BE=m(c.prototype.writeInt32BE,4),d.prototype.writeFloatLE=m(c.prototype.writeFloatLE,4),d.prototype.writeFloatBE=m(c.prototype.writeFloatBE,4),d.prototype.writeDoubleLE=m(c.prototype.writeDoubleLE,8),d.prototype.writeDoubleBE=m(c.prototype.writeDoubleBE,8),d.prototype.writeBuffer=function(h){this.ensureSize(h.length),h.copy(this.buffer,this.position,0,h.length),this.position+=h.length},d.prototype.writeVarInt=function(h){for(var s=1;(4294967168&h)!=0;)this.writeUInt8(127&h|128),h>>>=7,s++;return this.writeUInt8(127&h),s},d.prototype.ensureSize=function(h){if(this.buffer.length<this.position+h){if(!this.allowResize)throw new RangeError("index out of range");var s=new c(this.position+h);this.buffer.copy(s,0,0,this.buffer.length),this.buffer=s}}},7056:(_,l,o)=>{var c=o(3085).lW;_.exports=y;var d=o(4905),m=o(9213),h=o(9645),s=o(978),a=o(1665),r=o(9606),n=o(9763),t=o(2292),i=o(6382),u=o(2659),f=o(2620),p=o(3172);function y(){this.srid=void 0,this.hasZ=!1,this.hasM=!1}y.parse=function(g,b){if(typeof g=="string"||g instanceof f)return y._parseWkt(g);if(c.isBuffer(g)||g instanceof i)return y._parseWkb(g,b);throw new Error("first argument must be a string or Buffer")},y._parseWkt=function(g){var b,E,x=(b=g instanceof f?g:new f(g)).matchRegex([/^SRID=(\d+);/]);x&&(E=parseInt(x[1],10));var M=b.matchType(),S=b.matchDimension(),O={srid:E,hasZ:S.hasZ,hasM:S.hasM};switch(M){case d.wkt.Point:return m._parseWkt(b,O);case d.wkt.LineString:return h._parseWkt(b,O);case d.wkt.Polygon:return s._parseWkt(b,O);case d.wkt.MultiPoint:return a._parseWkt(b,O);case d.wkt.MultiLineString:return r._parseWkt(b,O);case d.wkt.MultiPolygon:return n._parseWkt(b,O);case d.wkt.GeometryCollection:return t._parseWkt(b,O)}},y._parseWkb=function(g,b){var E,x,M,S={};switch((E=g instanceof i?g:new i(g)).isBigEndian=!E.readInt8(),x=E.readUInt32(),S.hasSrid=(536870912&x)==536870912,S.isEwkb=536870912&x||1073741824&x||2147483648&x,S.hasSrid&&(S.srid=E.readUInt32()),S.hasZ=!1,S.hasM=!1,S.isEwkb||b&&b.isEwkb?(2147483648&x&&(S.hasZ=!0),1073741824&x&&(S.hasM=!0),M=15&x):x>=1e3&&x<2e3?(S.hasZ=!0,M=x-1e3):x>=2e3&&x<3e3?(S.hasM=!0,M=x-2e3):x>=3e3&&x<4e3?(S.hasZ=!0,S.hasM=!0,M=x-3e3):M=x,M){case d.wkb.Point:return m._parseWkb(E,S);case d.wkb.LineString:return h._parseWkb(E,S);case d.wkb.Polygon:return s._parseWkb(E,S);case d.wkb.MultiPoint:return a._parseWkb(E,S);case d.wkb.MultiLineString:return r._parseWkb(E,S);case d.wkb.MultiPolygon:return n._parseWkb(E,S);case d.wkb.GeometryCollection:return t._parseWkb(E,S);default:throw new Error("GeometryType "+M+" not supported")}},y.parseTwkb=function(g){var b,E={},x=(b=g instanceof i?g:new i(g)).readUInt8(),M=b.readUInt8(),S=15&x;if(E.precision=p.decode(x>>4),E.precisionFactor=Math.pow(10,E.precision),E.hasBoundingBox=M>>0&1,E.hasSizeAttribute=M>>1&1,E.hasIdList=M>>2&1,E.hasExtendedPrecision=M>>3&1,E.isEmpty=M>>4&1,E.hasExtendedPrecision){var O=b.readUInt8();E.hasZ=(1&O)==1,E.hasM=(2&O)==2,E.zPrecision=p.decode((28&O)>>2),E.zPrecisionFactor=Math.pow(10,E.zPrecision),E.mPrecision=p.decode((224&O)>>5),E.mPrecisionFactor=Math.pow(10,E.mPrecision)}else E.hasZ=!1,E.hasM=!1;if(E.hasSizeAttribute&&b.readVarInt(),E.hasBoundingBox){var C=2;E.hasZ&&C++,E.hasM&&C++;for(var T=0;T<C;T++)b.readVarInt(),b.readVarInt()}switch(S){case d.wkb.Point:return m._parseTwkb(b,E);case d.wkb.LineString:return h._parseTwkb(b,E);case d.wkb.Polygon:return s._parseTwkb(b,E);case d.wkb.MultiPoint:return a._parseTwkb(b,E);case d.wkb.MultiLineString:return r._parseTwkb(b,E);case d.wkb.MultiPolygon:return n._parseTwkb(b,E);case d.wkb.GeometryCollection:return t._parseTwkb(b,E);default:throw new Error("GeometryType "+S+" not supported")}},y.parseGeoJSON=function(g){return y._parseGeoJSON(g)},y._parseGeoJSON=function(g,b){var E;switch(g.type){case d.geoJSON.Point:E=m._parseGeoJSON(g);break;case d.geoJSON.LineString:E=h._parseGeoJSON(g);break;case d.geoJSON.Polygon:E=s._parseGeoJSON(g);break;case d.geoJSON.MultiPoint:E=a._parseGeoJSON(g);break;case d.geoJSON.MultiLineString:E=r._parseGeoJSON(g);break;case d.geoJSON.MultiPolygon:E=n._parseGeoJSON(g);break;case d.geoJSON.GeometryCollection:E=t._parseGeoJSON(g);break;default:throw new Error("GeometryType "+g.type+" not supported")}if(g.crs&&g.crs.type&&g.crs.type==="name"&&g.crs.properties&&g.crs.properties.name){var x=g.crs.properties.name;if(x.indexOf("EPSG:")===0)E.srid=parseInt(x.substring(5));else{if(x.indexOf("urn:ogc:def:crs:EPSG::")!==0)throw new Error("Unsupported crs: "+x);E.srid=parseInt(x.substring(22))}}else b||(E.srid=4326);return E},y.prototype.toEwkt=function(){return"SRID="+this.srid+";"+this.toWkt()},y.prototype.toEwkb=function(){var g=new u(this._getWkbSize()+4),b=this.toWkb();return g.writeInt8(1),g.writeUInt32LE((536870912|b.slice(1,5).readUInt32LE(0))>>>0,!0),g.writeUInt32LE(this.srid),g.writeBuffer(b.slice(5)),g.buffer},y.prototype._getWktType=function(g,b){var E=g;return this.hasZ&&this.hasM?E+=" ZM ":this.hasZ?E+=" Z ":this.hasM&&(E+=" M "),!b||this.hasZ||this.hasM||(E+=" "),b&&(E+="EMPTY"),E},y.prototype._getWktCoordinate=function(g){var b=g.x+" "+g.y;return this.hasZ&&(b+=" "+g.z),this.hasM&&(b+=" "+g.m),b},y.prototype._writeWkbType=function(g,b,E){var x=0;this.srid!==void 0||E&&E.srid!==void 0?(this.hasZ&&(x|=2147483648),this.hasM&&(x|=1073741824)):this.hasZ&&this.hasM?x+=3e3:this.hasZ?x+=1e3:this.hasM&&(x+=2e3),g.writeUInt32LE(x+b>>>0,!0)},y.getTwkbPrecision=function(g,b,E){return{xy:g,z:b,m:E,xyFactor:Math.pow(10,g),zFactor:Math.pow(10,b),mFactor:Math.pow(10,E)}},y.prototype._writeTwkbHeader=function(g,b,E,x){var M=(p.encode(E.xy)<<4)+b,S=(this.hasZ||this.hasM)<<3;if(S+=x<<4,g.writeUInt8(M),g.writeUInt8(S),this.hasZ||this.hasM){var O=0;this.hasZ&&(O|=1),this.hasM&&(O|=2),g.writeUInt8(O)}},y.prototype.toGeoJSON=function(g){var b={};return this.srid&&g&&(g.shortCrs?b.crs={type:"name",properties:{name:"EPSG:"+this.srid}}:g.longCrs&&(b.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+this.srid}})),b}},2292:(_,l,o)=>{_.exports=s;var c=o(9539),d=o(4905),m=o(7056),h=o(2659);function s(a,r){m.call(this),this.geometries=a||[],this.srid=r,this.geometries.length>0&&(this.hasZ=this.geometries[0].hasZ,this.hasM=this.geometries[0].hasM)}c.inherits(s,m),s.Z=function(a,r){var n=new s(a,r);return n.hasZ=!0,n},s.M=function(a,r){var n=new s(a,r);return n.hasM=!0,n},s.ZM=function(a,r){var n=new s(a,r);return n.hasZ=!0,n.hasM=!0,n},s._parseWkt=function(a,r){var n=new s;if(n.srid=r.srid,n.hasZ=r.hasZ,n.hasM=r.hasM,a.isMatch(["EMPTY"]))return n;a.expectGroupStart();do n.geometries.push(m.parse(a));while(a.isMatch([","]));return a.expectGroupEnd(),n},s._parseWkb=function(a,r){var n=new s;n.srid=r.srid,n.hasZ=r.hasZ,n.hasM=r.hasM;for(var t=a.readUInt32(),i=0;i<t;i++)n.geometries.push(m.parse(a,r));return n},s._parseTwkb=function(a,r){var n=new s;if(n.hasZ=r.hasZ,n.hasM=r.hasM,r.isEmpty)return n;for(var t=a.readVarInt(),i=0;i<t;i++)n.geometries.push(m.parseTwkb(a));return n},s._parseGeoJSON=function(a){for(var r=new s,n=0;n<a.geometries.length;n++)r.geometries.push(m._parseGeoJSON(a.geometries[n],!0));return r.geometries.length>0&&(r.hasZ=r.geometries[0].hasZ),r},s.prototype.toWkt=function(){if(this.geometries.length===0)return this._getWktType(d.wkt.GeometryCollection,!0);for(var a=this._getWktType(d.wkt.GeometryCollection,!1)+"(",r=0;r<this.geometries.length;r++)a+=this.geometries[r].toWkt()+",";return(a=a.slice(0,-1))+")"},s.prototype.toWkb=function(){var a=new h(this._getWkbSize());a.writeInt8(1),this._writeWkbType(a,d.wkb.GeometryCollection),a.writeUInt32LE(this.geometries.length);for(var r=0;r<this.geometries.length;r++)a.writeBuffer(this.geometries[r].toWkb({srid:this.srid}));return a.buffer},s.prototype.toTwkb=function(){var a=new h(0,!0),r=m.getTwkbPrecision(5,0,0),n=this.geometries.length===0;if(this._writeTwkbHeader(a,d.wkb.GeometryCollection,r,n),this.geometries.length>0){a.writeVarInt(this.geometries.length);for(var t=0;t<this.geometries.length;t++)a.writeBuffer(this.geometries[t].toTwkb())}return a.buffer},s.prototype._getWkbSize=function(){for(var a=9,r=0;r<this.geometries.length;r++)a+=this.geometries[r]._getWkbSize();return a},s.prototype.toGeoJSON=function(a){var r=m.prototype.toGeoJSON.call(this,a);r.type=d.geoJSON.GeometryCollection,r.geometries=[];for(var n=0;n<this.geometries.length;n++)r.geometries.push(this.geometries[n].toGeoJSON());return r}},9645:(_,l,o)=>{_.exports=a;var c=o(9539),d=o(7056),m=o(4905),h=o(9213),s=o(2659);function a(r,n){d.call(this),this.points=r||[],this.srid=n,this.points.length>0&&(this.hasZ=this.points[0].hasZ,this.hasM=this.points[0].hasM)}c.inherits(a,d),a.Z=function(r,n){var t=new a(r,n);return t.hasZ=!0,t},a.M=function(r,n){var t=new a(r,n);return t.hasM=!0,t},a.ZM=function(r,n){var t=new a(r,n);return t.hasZ=!0,t.hasM=!0,t},a._parseWkt=function(r,n){var t=new a;return t.srid=n.srid,t.hasZ=n.hasZ,t.hasM=n.hasM,r.isMatch(["EMPTY"])||(r.expectGroupStart(),t.points.push.apply(t.points,r.matchCoordinates(n)),r.expectGroupEnd()),t},a._parseWkb=function(r,n){var t=new a;t.srid=n.srid,t.hasZ=n.hasZ,t.hasM=n.hasM;for(var i=r.readUInt32(),u=0;u<i;u++)t.points.push(h._readWkbPoint(r,n));return t},a._parseTwkb=function(r,n){var t=new a;if(t.hasZ=n.hasZ,t.hasM=n.hasM,n.isEmpty)return t;for(var i=new h(0,0,n.hasZ?0:void 0,n.hasM?0:void 0),u=r.readVarInt(),f=0;f<u;f++)t.points.push(h._readTwkbPoint(r,n,i));return t},a._parseGeoJSON=function(r){var n=new a;r.coordinates.length>0&&(n.hasZ=r.coordinates[0].length>2);for(var t=0;t<r.coordinates.length;t++)n.points.push(h._readGeoJSONPoint(r.coordinates[t]));return n},a.prototype.toWkt=function(){return this.points.length===0?this._getWktType(m.wkt.LineString,!0):this._getWktType(m.wkt.LineString,!1)+this._toInnerWkt()},a.prototype._toInnerWkt=function(){for(var r="(",n=0;n<this.points.length;n++)r+=this._getWktCoordinate(this.points[n])+",";return(r=r.slice(0,-1))+")"},a.prototype.toWkb=function(r){var n=new s(this._getWkbSize());n.writeInt8(1),this._writeWkbType(n,m.wkb.LineString,r),n.writeUInt32LE(this.points.length);for(var t=0;t<this.points.length;t++)this.points[t]._writeWkbPoint(n);return n.buffer},a.prototype.toTwkb=function(){var r=new s(0,!0),n=d.getTwkbPrecision(5,0,0),t=this.points.length===0;if(this._writeTwkbHeader(r,m.wkb.LineString,n,t),this.points.length>0){r.writeVarInt(this.points.length);for(var i=new h(0,0,0,0),u=0;u<this.points.length;u++)this.points[u]._writeTwkbPoint(r,n,i)}return r.buffer},a.prototype._getWkbSize=function(){var r=16;return this.hasZ&&(r+=8),this.hasM&&(r+=8),9+this.points.length*r},a.prototype.toGeoJSON=function(r){var n=d.prototype.toGeoJSON.call(this,r);n.type=m.geoJSON.LineString,n.coordinates=[];for(var t=0;t<this.points.length;t++)this.hasZ?n.coordinates.push([this.points[t].x,this.points[t].y,this.points[t].z]):n.coordinates.push([this.points[t].x,this.points[t].y]);return n}},9606:(_,l,o)=>{_.exports=r;var c=o(9539),d=o(4905),m=o(7056),h=o(9213),s=o(9645),a=o(2659);function r(n,t){m.call(this),this.lineStrings=n||[],this.srid=t,this.lineStrings.length>0&&(this.hasZ=this.lineStrings[0].hasZ,this.hasM=this.lineStrings[0].hasM)}c.inherits(r,m),r.Z=function(n,t){var i=new r(n,t);return i.hasZ=!0,i},r.M=function(n,t){var i=new r(n,t);return i.hasM=!0,i},r.ZM=function(n,t){var i=new r(n,t);return i.hasZ=!0,i.hasM=!0,i},r._parseWkt=function(n,t){var i=new r;if(i.srid=t.srid,i.hasZ=t.hasZ,i.hasM=t.hasM,n.isMatch(["EMPTY"]))return i;n.expectGroupStart();do n.expectGroupStart(),i.lineStrings.push(new s(n.matchCoordinates(t))),n.expectGroupEnd();while(n.isMatch([","]));return n.expectGroupEnd(),i},r._parseWkb=function(n,t){var i=new r;i.srid=t.srid,i.hasZ=t.hasZ,i.hasM=t.hasM;for(var u=n.readUInt32(),f=0;f<u;f++)i.lineStrings.push(m.parse(n,t));return i},r._parseTwkb=function(n,t){var i=new r;if(i.hasZ=t.hasZ,i.hasM=t.hasM,t.isEmpty)return i;for(var u=new h(0,0,t.hasZ?0:void 0,t.hasM?0:void 0),f=n.readVarInt(),p=0;p<f;p++){var y=new s;y.hasZ=t.hasZ,y.hasM=t.hasM;for(var g=n.readVarInt(),b=0;b<g;b++)y.points.push(h._readTwkbPoint(n,t,u));i.lineStrings.push(y)}return i},r._parseGeoJSON=function(n){var t=new r;n.coordinates.length>0&&n.coordinates[0].length>0&&(t.hasZ=n.coordinates[0][0].length>2);for(var i=0;i<n.coordinates.length;i++)t.lineStrings.push(s._parseGeoJSON({coordinates:n.coordinates[i]}));return t},r.prototype.toWkt=function(){if(this.lineStrings.length===0)return this._getWktType(d.wkt.MultiLineString,!0);for(var n=this._getWktType(d.wkt.MultiLineString,!1)+"(",t=0;t<this.lineStrings.length;t++)n+=this.lineStrings[t]._toInnerWkt()+",";return(n=n.slice(0,-1))+")"},r.prototype.toWkb=function(){var n=new a(this._getWkbSize());n.writeInt8(1),this._writeWkbType(n,d.wkb.MultiLineString),n.writeUInt32LE(this.lineStrings.length);for(var t=0;t<this.lineStrings.length;t++)n.writeBuffer(this.lineStrings[t].toWkb({srid:this.srid}));return n.buffer},r.prototype.toTwkb=function(){var n=new a(0,!0),t=m.getTwkbPrecision(5,0,0),i=this.lineStrings.length===0;if(this._writeTwkbHeader(n,d.wkb.MultiLineString,t,i),this.lineStrings.length>0){n.writeVarInt(this.lineStrings.length);for(var u=new h(0,0,0,0),f=0;f<this.lineStrings.length;f++){n.writeVarInt(this.lineStrings[f].points.length);for(var p=0;p<this.lineStrings[f].points.length;p++)this.lineStrings[f].points[p]._writeTwkbPoint(n,t,u)}}return n.buffer},r.prototype._getWkbSize=function(){for(var n=9,t=0;t<this.lineStrings.length;t++)n+=this.lineStrings[t]._getWkbSize();return n},r.prototype.toGeoJSON=function(n){var t=m.prototype.toGeoJSON.call(this,n);t.type=d.geoJSON.MultiLineString,t.coordinates=[];for(var i=0;i<this.lineStrings.length;i++)t.coordinates.push(this.lineStrings[i].toGeoJSON().coordinates);return t}},1665:(_,l,o)=>{_.exports=a;var c=o(9539),d=o(4905),m=o(7056),h=o(9213),s=o(2659);function a(r,n){m.call(this),this.points=r||[],this.srid=n,this.points.length>0&&(this.hasZ=this.points[0].hasZ,this.hasM=this.points[0].hasM)}c.inherits(a,m),a.Z=function(r,n){var t=new a(r,n);return t.hasZ=!0,t},a.M=function(r,n){var t=new a(r,n);return t.hasM=!0,t},a.ZM=function(r,n){var t=new a(r,n);return t.hasZ=!0,t.hasM=!0,t},a._parseWkt=function(r,n){var t=new a;return t.srid=n.srid,t.hasZ=n.hasZ,t.hasM=n.hasM,r.isMatch(["EMPTY"])||(r.expectGroupStart(),t.points.push.apply(t.points,r.matchCoordinates(n)),r.expectGroupEnd()),t},a._parseWkb=function(r,n){var t=new a;t.srid=n.srid,t.hasZ=n.hasZ,t.hasM=n.hasM;for(var i=r.readUInt32(),u=0;u<i;u++)t.points.push(m.parse(r,n));return t},a._parseTwkb=function(r,n){var t=new a;if(t.hasZ=n.hasZ,t.hasM=n.hasM,n.isEmpty)return t;for(var i=new h(0,0,n.hasZ?0:void 0,n.hasM?0:void 0),u=r.readVarInt(),f=0;f<u;f++)t.points.push(h._readTwkbPoint(r,n,i));return t},a._parseGeoJSON=function(r){var n=new a;r.coordinates.length>0&&(n.hasZ=r.coordinates[0].length>2);for(var t=0;t<r.coordinates.length;t++)n.points.push(h._parseGeoJSON({coordinates:r.coordinates[t]}));return n},a.prototype.toWkt=function(){if(this.points.length===0)return this._getWktType(d.wkt.MultiPoint,!0);for(var r=this._getWktType(d.wkt.MultiPoint,!1)+"(",n=0;n<this.points.length;n++)r+=this._getWktCoordinate(this.points[n])+",";return(r=r.slice(0,-1))+")"},a.prototype.toWkb=function(){var r=new s(this._getWkbSize());r.writeInt8(1),this._writeWkbType(r,d.wkb.MultiPoint),r.writeUInt32LE(this.points.length);for(var n=0;n<this.points.length;n++)r.writeBuffer(this.points[n].toWkb({srid:this.srid}));return r.buffer},a.prototype.toTwkb=function(){var r=new s(0,!0),n=m.getTwkbPrecision(5,0,0),t=this.points.length===0;if(this._writeTwkbHeader(r,d.wkb.MultiPoint,n,t),this.points.length>0){r.writeVarInt(this.points.length);for(var i=new h(0,0,0,0),u=0;u<this.points.length;u++)this.points[u]._writeTwkbPoint(r,n,i)}return r.buffer},a.prototype._getWkbSize=function(){var r=16;return this.hasZ&&(r+=8),this.hasM&&(r+=8),r+=5,9+this.points.length*r},a.prototype.toGeoJSON=function(r){var n=m.prototype.toGeoJSON.call(this,r);n.type=d.geoJSON.MultiPoint,n.coordinates=[];for(var t=0;t<this.points.length;t++)n.coordinates.push(this.points[t].toGeoJSON().coordinates);return n}},9763:(_,l,o)=>{_.exports=r;var c=o(9539),d=o(4905),m=o(7056),h=o(9213),s=o(978),a=o(2659);function r(n,t){m.call(this),this.polygons=n||[],this.srid=t,this.polygons.length>0&&(this.hasZ=this.polygons[0].hasZ,this.hasM=this.polygons[0].hasM)}c.inherits(r,m),r.Z=function(n,t){var i=new r(n,t);return i.hasZ=!0,i},r.M=function(n,t){var i=new r(n,t);return i.hasM=!0,i},r.ZM=function(n,t){var i=new r(n,t);return i.hasZ=!0,i.hasM=!0,i},r._parseWkt=function(n,t){var i=new r;if(i.srid=t.srid,i.hasZ=t.hasZ,i.hasM=t.hasM,n.isMatch(["EMPTY"]))return i;n.expectGroupStart();do{n.expectGroupStart();var u=[],f=[];for(n.expectGroupStart(),u.push.apply(u,n.matchCoordinates(t)),n.expectGroupEnd();n.isMatch([","]);)n.expectGroupStart(),f.push(n.matchCoordinates(t)),n.expectGroupEnd();i.polygons.push(new s(u,f)),n.expectGroupEnd()}while(n.isMatch([","]));return n.expectGroupEnd(),i},r._parseWkb=function(n,t){var i=new r;i.srid=t.srid,i.hasZ=t.hasZ,i.hasM=t.hasM;for(var u=n.readUInt32(),f=0;f<u;f++)i.polygons.push(m.parse(n,t));return i},r._parseTwkb=function(n,t){var i=new r;if(i.hasZ=t.hasZ,i.hasM=t.hasM,t.isEmpty)return i;for(var u=new h(0,0,t.hasZ?0:void 0,t.hasM?0:void 0),f=n.readVarInt(),p=0;p<f;p++){var y=new s;y.hasZ=t.hasZ,y.hasM=t.hasM;for(var g=n.readVarInt(),b=n.readVarInt(),E=0;E<b;E++)y.exteriorRing.push(h._readTwkbPoint(n,t,u));for(E=1;E<g;E++){for(var x=[],M=n.readVarInt(),S=0;S<M;S++)x.push(h._readTwkbPoint(n,t,u));y.interiorRings.push(x)}i.polygons.push(y)}return i},r._parseGeoJSON=function(n){var t=new r;n.coordinates.length>0&&n.coordinates[0].length>0&&n.coordinates[0][0].length>0&&(t.hasZ=n.coordinates[0][0][0].length>2);for(var i=0;i<n.coordinates.length;i++)t.polygons.push(s._parseGeoJSON({coordinates:n.coordinates[i]}));return t},r.prototype.toWkt=function(){if(this.polygons.length===0)return this._getWktType(d.wkt.MultiPolygon,!0);for(var n=this._getWktType(d.wkt.MultiPolygon,!1)+"(",t=0;t<this.polygons.length;t++)n+=this.polygons[t]._toInnerWkt()+",";return(n=n.slice(0,-1))+")"},r.prototype.toWkb=function(){var n=new a(this._getWkbSize());n.writeInt8(1),this._writeWkbType(n,d.wkb.MultiPolygon),n.writeUInt32LE(this.polygons.length);for(var t=0;t<this.polygons.length;t++)n.writeBuffer(this.polygons[t].toWkb({srid:this.srid}));return n.buffer},r.prototype.toTwkb=function(){var n=new a(0,!0),t=m.getTwkbPrecision(5,0,0),i=this.polygons.length===0;if(this._writeTwkbHeader(n,d.wkb.MultiPolygon,t,i),this.polygons.length>0){n.writeVarInt(this.polygons.length);for(var u=new h(0,0,0,0),f=0;f<this.polygons.length;f++){n.writeVarInt(1+this.polygons[f].interiorRings.length),n.writeVarInt(this.polygons[f].exteriorRing.length);for(var p=0;p<this.polygons[f].exteriorRing.length;p++)this.polygons[f].exteriorRing[p]._writeTwkbPoint(n,t,u);for(p=0;p<this.polygons[f].interiorRings.length;p++){n.writeVarInt(this.polygons[f].interiorRings[p].length);for(var y=0;y<this.polygons[f].interiorRings[p].length;y++)this.polygons[f].interiorRings[p][y]._writeTwkbPoint(n,t,u)}}}return n.buffer},r.prototype._getWkbSize=function(){for(var n=9,t=0;t<this.polygons.length;t++)n+=this.polygons[t]._getWkbSize();return n},r.prototype.toGeoJSON=function(n){var t=m.prototype.toGeoJSON.call(this,n);t.type=d.geoJSON.MultiPolygon,t.coordinates=[];for(var i=0;i<this.polygons.length;i++)t.coordinates.push(this.polygons[i].toGeoJSON().coordinates);return t}},9213:(_,l,o)=>{_.exports=a;var c=o(9539),d=o(7056),m=o(4905),h=o(2659),s=o(3172);function a(r,n,t,i,u){d.call(this),this.x=r,this.y=n,this.z=t,this.m=i,this.srid=u,this.hasZ=this.z!==void 0,this.hasM=this.m!==void 0}c.inherits(a,d),a.Z=function(r,n,t,i){var u=new a(r,n,t,void 0,i);return u.hasZ=!0,u},a.M=function(r,n,t,i){var u=new a(r,n,void 0,t,i);return u.hasM=!0,u},a.ZM=function(r,n,t,i,u){var f=new a(r,n,t,i,u);return f.hasZ=!0,f.hasM=!0,f},a._parseWkt=function(r,n){var t=new a;if(t.srid=n.srid,t.hasZ=n.hasZ,t.hasM=n.hasM,r.isMatch(["EMPTY"]))return t;r.expectGroupStart();var i=r.matchCoordinate(n);return t.x=i.x,t.y=i.y,t.z=i.z,t.m=i.m,r.expectGroupEnd(),t},a._parseWkb=function(r,n){var t=a._readWkbPoint(r,n);return t.srid=n.srid,t},a._readWkbPoint=function(r,n){return new a(r.readDouble(),r.readDouble(),n.hasZ?r.readDouble():void 0,n.hasM?r.readDouble():void 0)},a._parseTwkb=function(r,n){var t=new a;return t.hasZ=n.hasZ,t.hasM=n.hasM,n.isEmpty||(t.x=s.decode(r.readVarInt())/n.precisionFactor,t.y=s.decode(r.readVarInt())/n.precisionFactor,t.z=n.hasZ?s.decode(r.readVarInt())/n.zPrecisionFactor:void 0,t.m=n.hasM?s.decode(r.readVarInt())/n.mPrecisionFactor:void 0),t},a._readTwkbPoint=function(r,n,t){return t.x+=s.decode(r.readVarInt())/n.precisionFactor,t.y+=s.decode(r.readVarInt())/n.precisionFactor,n.hasZ&&(t.z+=s.decode(r.readVarInt())/n.zPrecisionFactor),n.hasM&&(t.m+=s.decode(r.readVarInt())/n.mPrecisionFactor),new a(t.x,t.y,t.z,t.m)},a._parseGeoJSON=function(r){return a._readGeoJSONPoint(r.coordinates)},a._readGeoJSONPoint=function(r){return r.length===0?new a:r.length>2?new a(r[0],r[1],r[2]):new a(r[0],r[1])},a.prototype.toWkt=function(){return this.x===void 0&&this.y===void 0&&this.z===void 0&&this.m===void 0?this._getWktType(m.wkt.Point,!0):this._getWktType(m.wkt.Point,!1)+"("+this._getWktCoordinate(this)+")"},a.prototype.toWkb=function(r){var n=new h(this._getWkbSize());return n.writeInt8(1),this._writeWkbType(n,m.wkb.Point,r),this.x===void 0&&this.y===void 0?(n.writeDoubleLE(NaN),n.writeDoubleLE(NaN),this.hasZ&&n.writeDoubleLE(NaN),this.hasM&&n.writeDoubleLE(NaN)):this._writeWkbPoint(n),n.buffer},a.prototype._writeWkbPoint=function(r){r.writeDoubleLE(this.x),r.writeDoubleLE(this.y),this.hasZ&&r.writeDoubleLE(this.z),this.hasM&&r.writeDoubleLE(this.m)},a.prototype.toTwkb=function(){var r=new h(0,!0),n=d.getTwkbPrecision(5,0,0),t=this.x===void 0&&this.y===void 0;return this._writeTwkbHeader(r,m.wkb.Point,n,t),t||this._writeTwkbPoint(r,n,new a(0,0,0,0)),r.buffer},a.prototype._writeTwkbPoint=function(r,n,t){var i=this.x*n.xyFactor,u=this.y*n.xyFactor,f=this.z*n.zFactor,p=this.m*n.mFactor;r.writeVarInt(s.encode(i-t.x)),r.writeVarInt(s.encode(u-t.y)),this.hasZ&&r.writeVarInt(s.encode(f-t.z)),this.hasM&&r.writeVarInt(s.encode(p-t.m)),t.x=i,t.y=u,t.z=f,t.m=p},a.prototype._getWkbSize=function(){var r=21;return this.hasZ&&(r+=8),this.hasM&&(r+=8),r},a.prototype.toGeoJSON=function(r){var n=d.prototype.toGeoJSON.call(this,r);return n.type=m.geoJSON.Point,this.x===void 0&&this.y===void 0?n.coordinates=[]:this.z!==void 0?n.coordinates=[this.x,this.y,this.z]:n.coordinates=[this.x,this.y],n}},978:(_,l,o)=>{_.exports=a;var c=o(9539),d=o(7056),m=o(4905),h=o(9213),s=o(2659);function a(r,n,t){d.call(this),this.exteriorRing=r||[],this.interiorRings=n||[],this.srid=t,this.exteriorRing.length>0&&(this.hasZ=this.exteriorRing[0].hasZ,this.hasM=this.exteriorRing[0].hasM)}c.inherits(a,d),a.Z=function(r,n,t){var i=new a(r,n,t);return i.hasZ=!0,i},a.M=function(r,n,t){var i=new a(r,n,t);return i.hasM=!0,i},a.ZM=function(r,n,t){var i=new a(r,n,t);return i.hasZ=!0,i.hasM=!0,i},a._parseWkt=function(r,n){var t=new a;if(t.srid=n.srid,t.hasZ=n.hasZ,t.hasM=n.hasM,r.isMatch(["EMPTY"]))return t;for(r.expectGroupStart(),r.expectGroupStart(),t.exteriorRing.push.apply(t.exteriorRing,r.matchCoordinates(n)),r.expectGroupEnd();r.isMatch([","]);)r.expectGroupStart(),t.interiorRings.push(r.matchCoordinates(n)),r.expectGroupEnd();return r.expectGroupEnd(),t},a._parseWkb=function(r,n){var t=new a;t.srid=n.srid,t.hasZ=n.hasZ,t.hasM=n.hasM;var i=r.readUInt32();if(i>0){for(var u=r.readUInt32(),f=0;f<u;f++)t.exteriorRing.push(h._readWkbPoint(r,n));for(f=1;f<i;f++){for(var p=[],y=r.readUInt32(),g=0;g<y;g++)p.push(h._readWkbPoint(r,n));t.interiorRings.push(p)}}return t},a._parseTwkb=function(r,n){var t=new a;if(t.hasZ=n.hasZ,t.hasM=n.hasM,n.isEmpty)return t;for(var i=new h(0,0,n.hasZ?0:void 0,n.hasM?0:void 0),u=r.readVarInt(),f=r.readVarInt(),p=0;p<f;p++)t.exteriorRing.push(h._readTwkbPoint(r,n,i));for(p=1;p<u;p++){for(var y=[],g=r.readVarInt(),b=0;b<g;b++)y.push(h._readTwkbPoint(r,n,i));t.interiorRings.push(y)}return t},a._parseGeoJSON=function(r){var n=new a;r.coordinates.length>0&&r.coordinates[0].length>0&&(n.hasZ=r.coordinates[0][0].length>2);for(var t=0;t<r.coordinates.length;t++){t>0&&n.interiorRings.push([]);for(var i=0;i<r.coordinates[t].length;i++)t===0?n.exteriorRing.push(h._readGeoJSONPoint(r.coordinates[t][i])):n.interiorRings[t-1].push(h._readGeoJSONPoint(r.coordinates[t][i]))}return n},a.prototype.toWkt=function(){return this.exteriorRing.length===0?this._getWktType(m.wkt.Polygon,!0):this._getWktType(m.wkt.Polygon,!1)+this._toInnerWkt()},a.prototype._toInnerWkt=function(){for(var r="((",n=0;n<this.exteriorRing.length;n++)r+=this._getWktCoordinate(this.exteriorRing[n])+",";for(r=r.slice(0,-1),r+=")",n=0;n<this.interiorRings.length;n++){r+=",(";for(var t=0;t<this.interiorRings[n].length;t++)r+=this._getWktCoordinate(this.interiorRings[n][t])+",";r=r.slice(0,-1),r+=")"}return r+")"},a.prototype.toWkb=function(r){var n=new s(this._getWkbSize());n.writeInt8(1),this._writeWkbType(n,m.wkb.Polygon,r),this.exteriorRing.length>0?(n.writeUInt32LE(1+this.interiorRings.length),n.writeUInt32LE(this.exteriorRing.length)):n.writeUInt32LE(0);for(var t=0;t<this.exteriorRing.length;t++)this.exteriorRing[t]._writeWkbPoint(n);for(t=0;t<this.interiorRings.length;t++){n.writeUInt32LE(this.interiorRings[t].length);for(var i=0;i<this.interiorRings[t].length;i++)this.interiorRings[t][i]._writeWkbPoint(n)}return n.buffer},a.prototype.toTwkb=function(){var r=new s(0,!0),n=d.getTwkbPrecision(5,0,0),t=this.exteriorRing.length===0;if(this._writeTwkbHeader(r,m.wkb.Polygon,n,t),this.exteriorRing.length>0){r.writeVarInt(1+this.interiorRings.length),r.writeVarInt(this.exteriorRing.length);for(var i=new h(0,0,0,0),u=0;u<this.exteriorRing.length;u++)this.exteriorRing[u]._writeTwkbPoint(r,n,i);for(u=0;u<this.interiorRings.length;u++){r.writeVarInt(this.interiorRings[u].length);for(var f=0;f<this.interiorRings[u].length;f++)this.interiorRings[u][f]._writeTwkbPoint(r,n,i)}}return r.buffer},a.prototype._getWkbSize=function(){var r=16;this.hasZ&&(r+=8),this.hasM&&(r+=8);var n=9;this.exteriorRing.length>0&&(n+=4+this.exteriorRing.length*r);for(var t=0;t<this.interiorRings.length;t++)n+=4+this.interiorRings[t].length*r;return n},a.prototype.toGeoJSON=function(r){var n=d.prototype.toGeoJSON.call(this,r);if(n.type=m.geoJSON.Polygon,n.coordinates=[],this.exteriorRing.length>0){for(var t=[],i=0;i<this.exteriorRing.length;i++)this.hasZ?t.push([this.exteriorRing[i].x,this.exteriorRing[i].y,this.exteriorRing[i].z]):t.push([this.exteriorRing[i].x,this.exteriorRing[i].y]);n.coordinates.push(t)}for(var u=0;u<this.interiorRings.length;u++){for(var f=[],p=0;p<this.interiorRings[u].length;p++)this.hasZ?f.push([this.interiorRings[u][p].x,this.interiorRings[u][p].y,this.interiorRings[u][p].z]):f.push([this.interiorRings[u][p].x,this.interiorRings[u][p].y]);n.coordinates.push(f)}return n}},4905:_=>{_.exports={wkt:{Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION"},wkb:{Point:1,LineString:2,Polygon:3,MultiPoint:4,MultiLineString:5,MultiPolygon:6,GeometryCollection:7},geoJSON:{Point:"Point",LineString:"LineString",Polygon:"Polygon",MultiPoint:"MultiPoint",MultiLineString:"MultiLineString",MultiPolygon:"MultiPolygon",GeometryCollection:"GeometryCollection"}}},2620:(_,l,o)=>{_.exports=m;var c=o(4905),d=o(9213);function m(h){this.value=h,this.position=0}m.prototype.match=function(h){this.skipWhitespaces();for(var s=0;s<h.length;s++)if(this.value.substring(this.position).indexOf(h[s])===0)return this.position+=h[s].length,h[s];return null},m.prototype.matchRegex=function(h){this.skipWhitespaces();for(var s=0;s<h.length;s++){var a=this.value.substring(this.position).match(h[s]);if(a)return this.position+=a[0].length,a}return null},m.prototype.isMatch=function(h){this.skipWhitespaces();for(var s=0;s<h.length;s++)if(this.value.substring(this.position).indexOf(h[s])===0)return this.position+=h[s].length,!0;return!1},m.prototype.matchType=function(){var h=this.match([c.wkt.Point,c.wkt.LineString,c.wkt.Polygon,c.wkt.MultiPoint,c.wkt.MultiLineString,c.wkt.MultiPolygon,c.wkt.GeometryCollection]);if(!h)throw new Error("Expected geometry type");return h},m.prototype.matchDimension=function(){switch(this.match(["ZM","Z","M"])){case"ZM":return{hasZ:!0,hasM:!0};case"Z":return{hasZ:!0,hasM:!1};case"M":return{hasZ:!1,hasM:!0};default:return{hasZ:!1,hasM:!1}}},m.prototype.expectGroupStart=function(){if(!this.isMatch(["("]))throw new Error("Expected group start")},m.prototype.expectGroupEnd=function(){if(!this.isMatch([")"]))throw new Error("Expected group end")},m.prototype.matchCoordinate=function(h){var s;if(!(s=h.hasZ&&h.hasM?this.matchRegex([/^(\S*)\s+(\S*)\s+(\S*)\s+([^\s,)]*)/]):h.hasZ||h.hasM?this.matchRegex([/^(\S*)\s+(\S*)\s+([^\s,)]*)/]):this.matchRegex([/^(\S*)\s+([^\s,)]*)/])))throw new Error("Expected coordinates");return h.hasZ&&h.hasM?new d(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]),parseFloat(s[4])):h.hasZ?new d(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3])):h.hasM?new d(parseFloat(s[1]),parseFloat(s[2]),void 0,parseFloat(s[3])):new d(parseFloat(s[1]),parseFloat(s[2]))},m.prototype.matchCoordinates=function(h){var s=[];do{var a=this.isMatch(["("]);s.push(this.matchCoordinate(h)),a&&this.expectGroupEnd()}while(this.isMatch([","]));return s},m.prototype.skipWhitespaces=function(){for(;this.position<this.value.length&&this.value[this.position]===" ";)this.position++}},1011:(_,l,o)=>{l.Types=o(4905),l.Geometry=o(7056),l.Point=o(9213),l.LineString=o(9645),l.Polygon=o(978),l.MultiPoint=o(1665),l.MultiLineString=o(9606),l.MultiPolygon=o(9763),l.GeometryCollection=o(2292)},3172:_=>{_.exports={encode:function(l){return l<<1^l>>31},decode:function(l){return l>>1^-(1&l)}}},7529:_=>{_.exports=function(){for(var o={},c=0;c<arguments.length;c++){var d=arguments[c];for(var m in d)l.call(d,m)&&(o[m]=d[m])}return o};var l=Object.prototype.hasOwnProperty},1498:_=>{if(__WEBPACK_EXTERNAL_MODULE__1498__===void 0){var l=new Error("Cannot find module 'better-sqlite3'");throw l.code="MODULE_NOT_FOUND",l}_.exports=__WEBPACK_EXTERNAL_MODULE__1498__},5699:()=>{},4919:()=>{},1929:()=>{},2203:()=>{},7990:()=>{},8497:()=>{},1408:()=>{},3646:()=>{},4059:()=>{}},__webpack_module_cache__={};function __webpack_require__(_){var l=__webpack_module_cache__[_];if(l!==void 0)return l.exports;var o=__webpack_module_cache__[_]={id:_,loaded:!1,exports:{}};return __webpack_modules__[_].call(o.exports,o,o.exports,__webpack_require__),o.loaded=!0,o.exports}__webpack_require__.n=_=>{var l=_&&_.__esModule?()=>_.default:()=>_;return __webpack_require__.d(l,{a:l}),l},__webpack_require__.d=(_,l)=>{for(var o in l)__webpack_require__.o(l,o)&&!__webpack_require__.o(_,o)&&Object.defineProperty(_,o,{enumerable:!0,get:l[o]})},__webpack_require__.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),__webpack_require__.o=(_,l)=>Object.prototype.hasOwnProperty.call(_,l),__webpack_require__.r=_=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},__webpack_require__.nmd=_=>(_.paths=[],_.children||(_.children=[]),_);var __webpack_exports__={};return(()=>{var _=__webpack_exports__;Object.defineProperty(_,"__esModule",{value:!0}),_.OffscreenCanvasAdapter=_.NumberFeaturesTile=_.MetadataReference=_.MetadataExtension=_.MetadataDao=_.Metadata=_.MediaTable=_.ImageUtils=_.IconTable=_.Icons=_.IconCache=_.HtmlCanvasAdapter=_.GeoPackageValidate=_.GeoPackageTileRetriever=_.GeoPackageDataType=_.GeoPackageConnection=_.GeoPackageAPI=_.GeoPackage=_.GeometryData=_.GeometryColumnsDao=_.GeometryColumns=_.GeometryType=_.FeatureTiles=_.FeatureTableStyles=_.FeatureTableReader=_.FeatureTableIndex=_.FeatureTable=_.FeatureStyles=_.FeatureStyleExtension=_.FeatureStyle=_.FeaturePaint=_.FeatureDrawType=_.FeatureColumn=_.Extension=_.DublinCoreType=_.DublinCoreMetadata=_.DataColumnsDao=_.DataColumns=_.DataColumnConstraintsDao=_.DataColumnConstraints=_.CrsWktExtension=_.Context=_.ConstraintType=_.Constraints=_.Constraint=_.ContentsIdDao=_.ContentsDao=_.CanvasKitCanvasAdapter=_.Canvas=_.BoundingBox=void 0,_.WKB=_.WebPExtension=_.UserTableReader=_.UserTable=_.UserRow=_.UserMappingTable=_.UserDao=_.UserColumn=_.TileUtilities=_.TileTable=_.TileScalingType=_.TileScaling=_.TileMatrixSet=_.TileMatrix=_.TileColumn=_.TileBoundingBoxUtils=_.TileCreator=_.TableCreator=_.StyleTable=_.Styles=_.SqljsAdapter=_.StyleMappingTable=_.SqliteQueryBuilder=_.SqliteAdapter=_.SpatialReferenceSystem=_.SimpleAttributesTable=_.ShadedFeaturesTile=_.SchemaExtension=_.setSqljsWasmLocateFile=_.setCanvasKitWasmLocateFile=_.RTreeIndexDao=_.RTreeIndex=_.RelatedTablesExtension=_.ProjectionConstants=_.Projection=_.Paint=_.OptionBuilder=void 0;var l=__webpack_require__(2527);Object.defineProperty(_,"BoundingBox",{enumerable:!0,get:function(){return l.BoundingBox}});var o=__webpack_require__(4325);Object.defineProperty(_,"GeoPackage",{enumerable:!0,get:function(){return o.GeoPackage}});var c=__webpack_require__(6638);Object.defineProperty(_,"ContentsDao",{enumerable:!0,get:function(){return c.ContentsDao}});var d=__webpack_require__(7092);Object.defineProperty(_,"ContentsIdDao",{enumerable:!0,get:function(){return d.ContentsIdDao}});var m=__webpack_require__(8007);Object.defineProperty(_,"Constraint",{enumerable:!0,get:function(){return m.Constraint}});var h=__webpack_require__(7686);Object.defineProperty(_,"Constraints",{enumerable:!0,get:function(){return h.Constraints}});var s=__webpack_require__(91);Object.defineProperty(_,"ConstraintType",{enumerable:!0,get:function(){return s.ConstraintType}});var a=__webpack_require__(5306);Object.defineProperty(_,"CrsWktExtension",{enumerable:!0,get:function(){return a.CrsWktExtension}});var r=__webpack_require__(8590);Object.defineProperty(_,"DataColumnConstraints",{enumerable:!0,get:function(){return r.DataColumnConstraints}});var n=__webpack_require__(7175);Object.defineProperty(_,"DataColumnConstraintsDao",{enumerable:!0,get:function(){return n.DataColumnConstraintsDao}});var t=__webpack_require__(8133);Object.defineProperty(_,"DataColumns",{enumerable:!0,get:function(){return t.DataColumns}});var i=__webpack_require__(7319);Object.defineProperty(_,"GeoPackageDataType",{enumerable:!0,get:function(){return i.GeoPackageDataType}});var u=__webpack_require__(4941);Object.defineProperty(_,"DataColumnsDao",{enumerable:!0,get:function(){return u.DataColumnsDao}});var f=__webpack_require__(3096);Object.defineProperty(_,"DublinCoreMetadata",{enumerable:!0,get:function(){return f.DublinCoreMetadata}});var p=__webpack_require__(1485);Object.defineProperty(_,"DublinCoreType",{enumerable:!0,get:function(){return p.DublinCoreType}});var y=__webpack_require__(624);Object.defineProperty(_,"Extension",{enumerable:!0,get:function(){return y.Extension}});var g=__webpack_require__(961);Object.defineProperty(_,"FeatureColumn",{enumerable:!0,get:function(){return g.FeatureColumn}});var b=__webpack_require__(4538);Object.defineProperty(_,"FeatureDrawType",{enumerable:!0,get:function(){return b.FeatureDrawType}});var E=__webpack_require__(6063);Object.defineProperty(_,"FeaturePaint",{enumerable:!0,get:function(){return E.FeaturePaint}});var x=__webpack_require__(612);Object.defineProperty(_,"FeatureStyle",{enumerable:!0,get:function(){return x.FeatureStyle}});var M=__webpack_require__(8479);Object.defineProperty(_,"FeatureStyleExtension",{enumerable:!0,get:function(){return M.FeatureStyleExtension}});var S=__webpack_require__(2752);Object.defineProperty(_,"FeatureStyles",{enumerable:!0,get:function(){return S.FeatureStyles}});var O=__webpack_require__(8412);Object.defineProperty(_,"FeatureTable",{enumerable:!0,get:function(){return O.FeatureTable}});var C=__webpack_require__(5626);Object.defineProperty(_,"FeatureTableIndex",{enumerable:!0,get:function(){return C.FeatureTableIndex}});var T=__webpack_require__(4896);Object.defineProperty(_,"FeatureTableReader",{enumerable:!0,get:function(){return T.FeatureTableReader}});var R=__webpack_require__(6536);Object.defineProperty(_,"FeatureTableStyles",{enumerable:!0,get:function(){return R.FeatureTableStyles}});var B=__webpack_require__(297);Object.defineProperty(_,"FeatureTiles",{enumerable:!0,get:function(){return B.FeatureTiles}});var z=__webpack_require__(812);Object.defineProperty(_,"GeometryColumns",{enumerable:!0,get:function(){return z.GeometryColumns}});var L=__webpack_require__(1968);Object.defineProperty(_,"GeometryColumnsDao",{enumerable:!0,get:function(){return L.GeometryColumnsDao}});var Y=__webpack_require__(857);Object.defineProperty(_,"GeometryData",{enumerable:!0,get:function(){return Y.GeometryData}});var ie=__webpack_require__(9211);Object.defineProperty(_,"GeometryType",{enumerable:!0,get:function(){return ie.GeometryType}});var $=__webpack_require__(1191);Object.defineProperty(_,"GeoPackageAPI",{enumerable:!0,get:function(){return $.GeoPackageAPI}});var Q=__webpack_require__(5116);Object.defineProperty(_,"GeoPackageConnection",{enumerable:!0,get:function(){return Q.GeoPackageConnection}});var ce=__webpack_require__(731);Object.defineProperty(_,"GeoPackageTileRetriever",{enumerable:!0,get:function(){return ce.GeoPackageTileRetriever}});var be=__webpack_require__(4275);Object.defineProperty(_,"GeoPackageValidate",{enumerable:!0,get:function(){return be.GeoPackageValidate}});var Ae=__webpack_require__(8600);Object.defineProperty(_,"IconCache",{enumerable:!0,get:function(){return Ae.IconCache}});var we=__webpack_require__(4725);Object.defineProperty(_,"Icons",{enumerable:!0,get:function(){return we.Icons}});var Xe=__webpack_require__(2015);Object.defineProperty(_,"IconTable",{enumerable:!0,get:function(){return Xe.IconTable}});var Ve=__webpack_require__(9325);Object.defineProperty(_,"ImageUtils",{enumerable:!0,get:function(){return Ve.ImageUtils}});var st=__webpack_require__(6366);Object.defineProperty(_,"MediaTable",{enumerable:!0,get:function(){return st.MediaTable}});var tt=__webpack_require__(3026);Object.defineProperty(_,"Metadata",{enumerable:!0,get:function(){return tt.Metadata}});var he=__webpack_require__(663);Object.defineProperty(_,"MetadataDao",{enumerable:!0,get:function(){return he.MetadataDao}});var de=__webpack_require__(3501);Object.defineProperty(_,"MetadataExtension",{enumerable:!0,get:function(){return de.MetadataExtension}});var ze=__webpack_require__(9173);Object.defineProperty(_,"MetadataReference",{enumerable:!0,get:function(){return ze.MetadataReference}});var P=__webpack_require__(3060);Object.defineProperty(_,"NumberFeaturesTile",{enumerable:!0,get:function(){return P.NumberFeaturesTile}});var A=__webpack_require__(7403);Object.defineProperty(_,"OptionBuilder",{enumerable:!0,get:function(){return A.OptionBuilder}});var D=__webpack_require__(5211);Object.defineProperty(_,"Paint",{enumerable:!0,get:function(){return D.Paint}});var W=__webpack_require__(5604);Object.defineProperty(_,"Projection",{enumerable:!0,get:function(){return W.Projection}});var ae=__webpack_require__(1375);Object.defineProperty(_,"ProjectionConstants",{enumerable:!0,get:function(){return ae.ProjectionConstants}});var le=__webpack_require__(1832);Object.defineProperty(_,"RelatedTablesExtension",{enumerable:!0,get:function(){return le.RelatedTablesExtension}});var Ne=__webpack_require__(5859);Object.defineProperty(_,"RTreeIndex",{enumerable:!0,get:function(){return Ne.RTreeIndex}});var De=__webpack_require__(735);Object.defineProperty(_,"RTreeIndexDao",{enumerable:!0,get:function(){return De.RTreeIndexDao}});var Ye=__webpack_require__(8116);Object.defineProperty(_,"SchemaExtension",{enumerable:!0,get:function(){return Ye.SchemaExtension}});var ht=__webpack_require__(6667);Object.defineProperty(_,"ShadedFeaturesTile",{enumerable:!0,get:function(){return ht.ShadedFeaturesTile}});var F=__webpack_require__(4599);Object.defineProperty(_,"SimpleAttributesTable",{enumerable:!0,get:function(){return F.SimpleAttributesTable}});var V=__webpack_require__(341);Object.defineProperty(_,"SpatialReferenceSystem",{enumerable:!0,get:function(){return V.SpatialReferenceSystem}});var ne=__webpack_require__(8877);Object.defineProperty(_,"SqliteQueryBuilder",{enumerable:!0,get:function(){return ne.SqliteQueryBuilder}});var Se=__webpack_require__(8138);Object.defineProperty(_,"StyleMappingTable",{enumerable:!0,get:function(){return Se.StyleMappingTable}});var Ie=__webpack_require__(7924);Object.defineProperty(_,"Styles",{enumerable:!0,get:function(){return Ie.Styles}});var ke=__webpack_require__(3934);Object.defineProperty(_,"StyleTable",{enumerable:!0,get:function(){return ke.StyleTable}});var $e=__webpack_require__(1459);Object.defineProperty(_,"TableCreator",{enumerable:!0,get:function(){return $e.TableCreator}});var xt=__webpack_require__(3684);Object.defineProperty(_,"TileBoundingBoxUtils",{enumerable:!0,get:function(){return xt.TileBoundingBoxUtils}});var At=__webpack_require__(8334);Object.defineProperty(_,"TileColumn",{enumerable:!0,get:function(){return At.TileColumn}});var Bt=__webpack_require__(1938);Object.defineProperty(_,"TileMatrix",{enumerable:!0,get:function(){return Bt.TileMatrix}});var Rt=__webpack_require__(5899);Object.defineProperty(_,"TileMatrixSet",{enumerable:!0,get:function(){return Rt.TileMatrixSet}});var Gt=__webpack_require__(4301);Object.defineProperty(_,"TileScaling",{enumerable:!0,get:function(){return Gt.TileScaling}});var _n=__webpack_require__(2777);Object.defineProperty(_,"TileScalingType",{enumerable:!0,get:function(){return _n.TileScalingType}});var fn=__webpack_require__(8704);Object.defineProperty(_,"TileTable",{enumerable:!0,get:function(){return fn.TileTable}});var ln=__webpack_require__(824);Object.defineProperty(_,"TileUtilities",{enumerable:!0,get:function(){return ln.TileUtilities}});var rt=__webpack_require__(5865);Object.defineProperty(_,"UserColumn",{enumerable:!0,get:function(){return rt.UserColumn}});var dt=__webpack_require__(4668);Object.defineProperty(_,"UserDao",{enumerable:!0,get:function(){return dt.UserDao}});var Qe=__webpack_require__(233);Object.defineProperty(_,"UserMappingTable",{enumerable:!0,get:function(){return Qe.UserMappingTable}});var pt=__webpack_require__(2224);Object.defineProperty(_,"UserRow",{enumerable:!0,get:function(){return pt.UserRow}});var mt=__webpack_require__(8018);Object.defineProperty(_,"UserTable",{enumerable:!0,get:function(){return mt.UserTable}});var Nt=__webpack_require__(4880);Object.defineProperty(_,"UserTableReader",{enumerable:!0,get:function(){return Nt.UserTableReader}});var lt=__webpack_require__(7719);Object.defineProperty(_,"WebPExtension",{enumerable:!0,get:function(){return lt.WebPExtension}});var on=__webpack_require__(2038);Object.defineProperty(_,"WKB",{enumerable:!0,get:function(){return on.WKB}});var bn=__webpack_require__(922);Object.defineProperty(_,"SqliteAdapter",{enumerable:!0,get:function(){return bn.SqliteAdapter}});var Ge=__webpack_require__(6328);Object.defineProperty(_,"SqljsAdapter",{enumerable:!0,get:function(){return Ge.SqljsAdapter}});var pe=__webpack_require__(7977);Object.defineProperty(_,"TileCreator",{enumerable:!0,get:function(){return pe.TileCreator}});var Te=__webpack_require__(3437);Object.defineProperty(_,"Canvas",{enumerable:!0,get:function(){return Te.Canvas}});var Me=__webpack_require__(8038);Object.defineProperty(_,"CanvasKitCanvasAdapter",{enumerable:!0,get:function(){return Me.CanvasKitCanvasAdapter}});var ye=__webpack_require__(342);Object.defineProperty(_,"OffscreenCanvasAdapter",{enumerable:!0,get:function(){return ye.OffscreenCanvasAdapter}});var Fe=__webpack_require__(2807);Object.defineProperty(_,"HtmlCanvasAdapter",{enumerable:!0,get:function(){return Fe.HtmlCanvasAdapter}});var qe=__webpack_require__(1150);Object.defineProperty(_,"Context",{enumerable:!0,get:function(){return qe.Context}}),qe.Context.setupDefaultContext();var je=Ge.SqljsAdapter.setSqljsWasmLocateFile;_.setSqljsWasmLocateFile=je;var ft=Me.CanvasKitCanvasAdapter.setCanvasKitWasmLocateFile;_.setCanvasKitWasmLocateFile=ft})(),__webpack_exports__})()))})(geopackage_min,geopackage_min.exports)),geopackage_min.exports}var geopackage_minExports=requireGeopackage_min();const require$$0=getAugmentedNamespace(lib$1);var reproject_1,hasRequiredReproject;function requireReproject(){if(hasRequiredReproject)return reproject_1;hasRequiredReproject=1;var _=require$$0.hasOwnProperty("default")?require$$0.default:require$$0;function l(r){return r.length>=2&&typeof r[0]=="number"&&typeof r[1]=="number"}function o(r,n){return l(r)?n(r):r.map(function(t){return o(t,n)})}function c(r){if(r==null||typeof r!="object")return r;var n=r.constructor();for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n}function d(r,n,t){if(t==null)return t;var i=c(t),u=d.bind(this,r,n);switch(t.type){case"Feature":i.geometry=u(t.geometry);break;case"FeatureCollection":i.features=i.features.map(u);break;case"GeometryCollection":i.geometries=i.geometries.map(u);break;default:r(i);break}return n&&n(i),i}function m(r,n){var t=r.crs,i;if(t===void 0)throw new Error('Unable to detect CRS, GeoJSON has no "crs" property.');if(t.type==="name"?i=n[t.properties.name]:t.type==="EPSG"&&(i=n["EPSG:"+t.properties.code]),!i)throw new Error("CRS defined in crs section could not be identified: "+JSON.stringify(t));return i}function h(r,n){return typeof r=="string"||r instanceof String?n[r]||_.Proj(r):r}function s(r){var n=[Number.MAX_VALUE,Number.MAX_VALUE],t=[-Number.MAX_VALUE,-Number.MAX_VALUE];return d(function(i){o(i.coordinates,function(u){n[0]=Math.min(n[0],u[0]),n[1]=Math.min(n[1],u[1]),t[0]=Math.max(t[0],u[0]),t[1]=Math.max(t[1],u[1])})},null,r),[n[0],n[1],t[0],t[1]]}function a(r,n,t,i){i=i||{},n?n=h(n,i):n=m(r,i),t=h(t,i);var u=_(n,t).forward.bind(u);function f(g){var b=u(g);return g.length===3&&g[2]!==void 0&&b[2]===void 0&&(b[2]=g[2]),b}var p=function(g){g.crs&&delete g.crs,g.coordinates=o(g.coordinates,f)},y=function(g){g.bbox&&(g.bbox=s(g))};return d(p,y,r)}return reproject_1={detectCrs:m,reproject:a,reverse:function(r){return d(function(n){n.coordinates=o(n.coordinates,function(t){return[t[1],t[0]]})},null,r)},toWgs84:function(r,n,t){return a(r,n,_.WGS84,t)}},reproject_1}var reprojectExports=requireReproject();const reproject=getDefaultExportFromCjs(reprojectExports),MAX_BITS$1=15,D_CODES=30,BL_CODES=19,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,HEAP_SIZE=2*L_CODES+1,END_BLOCK=256,MAX_BL_BITS=7,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,Buf_size=16,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_DEFAULT_STRATEGY=0,Z_NO_FLUSH$1=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH$1=4,Z_OK$1=0,Z_STREAM_END$1=1,Z_NEED_DICT$1=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_BUF_ERROR$1=-5;function extractArray(_){return flatArray(_.map(([l,o])=>new Array(l).fill(o,0,l)))}function flatArray(_){return _.reduce((l,o)=>l.concat(Array.isArray(o)?flatArray(o):o),[])}const _dist_code=[0,1,2,3].concat(...extractArray([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function Tree(){const _=this;function l(d){const m=_.dyn_tree,h=_.stat_desc.static_tree,s=_.stat_desc.extra_bits,a=_.stat_desc.extra_base,r=_.stat_desc.max_length;let n,t,i,u,f,p,y=0;for(u=0;u<=MAX_BITS$1;u++)d.bl_count[u]=0;for(m[d.heap[d.heap_max]*2+1]=0,n=d.heap_max+1;n<HEAP_SIZE;n++)t=d.heap[n],u=m[m[t*2+1]*2+1]+1,u>r&&(u=r,y++),m[t*2+1]=u,!(t>_.max_code)&&(d.bl_count[u]++,f=0,t>=a&&(f=s[t-a]),p=m[t*2],d.opt_len+=p*(u+f),h&&(d.static_len+=p*(h[t*2+1]+f)));if(y!==0){do{for(u=r-1;d.bl_count[u]===0;)u--;d.bl_count[u]--,d.bl_count[u+1]+=2,d.bl_count[r]--,y-=2}while(y>0);for(u=r;u!==0;u--)for(t=d.bl_count[u];t!==0;)i=d.heap[--n],!(i>_.max_code)&&(m[i*2+1]!=u&&(d.opt_len+=(u-m[i*2+1])*m[i*2],m[i*2+1]=u),t--)}}function o(d,m){let h=0;do h|=d&1,d>>>=1,h<<=1;while(--m>0);return h>>>1}function c(d,m,h){const s=[];let a=0,r,n,t;for(r=1;r<=MAX_BITS$1;r++)s[r]=a=a+h[r-1]<<1;for(n=0;n<=m;n++)t=d[n*2+1],t!==0&&(d[n*2]=o(s[t]++,t))}_.build_tree=function(d){const m=_.dyn_tree,h=_.stat_desc.static_tree,s=_.stat_desc.elems;let a,r,n=-1,t;for(d.heap_len=0,d.heap_max=HEAP_SIZE,a=0;a<s;a++)m[a*2]!==0?(d.heap[++d.heap_len]=n=a,d.depth[a]=0):m[a*2+1]=0;for(;d.heap_len<2;)t=d.heap[++d.heap_len]=n<2?++n:0,m[t*2]=1,d.depth[t]=0,d.opt_len--,h&&(d.static_len-=h[t*2+1]);for(_.max_code=n,a=Math.floor(d.heap_len/2);a>=1;a--)d.pqdownheap(m,a);t=s;do a=d.heap[1],d.heap[1]=d.heap[d.heap_len--],d.pqdownheap(m,1),r=d.heap[1],d.heap[--d.heap_max]=a,d.heap[--d.heap_max]=r,m[t*2]=m[a*2]+m[r*2],d.depth[t]=Math.max(d.depth[a],d.depth[r])+1,m[a*2+1]=m[r*2+1]=t,d.heap[1]=t++,d.pqdownheap(m,1);while(d.heap_len>=2);d.heap[--d.heap_max]=d.heap[1],l(d),c(m,_.max_code,d.bl_count)}}Tree._length_code=[0,1,2,3,4,5,6,7].concat(...extractArray([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]]));Tree.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0];Tree.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576];Tree.d_code=function(_){return _<256?_dist_code[_]:_dist_code[256+(_>>>7)]};Tree.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];Tree.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];Tree.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];Tree.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function StaticTree(_,l,o,c,d){const m=this;m.static_tree=_,m.extra_bits=l,m.extra_base=o,m.elems=c,m.max_length=d}const static_ltree2_first_part=[12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227],static_ltree2_second_part=extractArray([[144,8],[112,9],[24,7],[8,8]]);StaticTree.static_ltree=flatArray(static_ltree2_first_part.map((_,l)=>[_,static_ltree2_second_part[l]]));const static_dtree_first_part=[0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23],static_dtree_second_part=extractArray([[30,5]]);StaticTree.static_dtree=flatArray(static_dtree_first_part.map((_,l)=>[_,static_dtree_second_part[l]]));StaticTree.static_l_desc=new StaticTree(StaticTree.static_ltree,Tree.extra_lbits,LITERALS+1,L_CODES,MAX_BITS$1);StaticTree.static_d_desc=new StaticTree(StaticTree.static_dtree,Tree.extra_dbits,0,D_CODES,MAX_BITS$1);StaticTree.static_bl_desc=new StaticTree(null,Tree.extra_blbits,0,BL_CODES,MAX_BL_BITS);const MAX_MEM_LEVEL=9,DEF_MEM_LEVEL=8;function Config(_,l,o,c,d){const m=this;m.good_length=_,m.max_lazy=l,m.nice_length=o,m.max_chain=c,m.func=d}const STORED$1=0,FAST=1,SLOW=2,config_table=[new Config(0,0,0,0,STORED$1),new Config(4,4,8,4,FAST),new Config(4,5,16,8,FAST),new Config(4,6,32,32,FAST),new Config(4,4,16,16,SLOW),new Config(8,16,32,32,SLOW),new Config(8,16,128,128,SLOW),new Config(8,32,128,256,SLOW),new Config(32,128,258,1024,SLOW),new Config(32,258,258,4096,SLOW)],z_errmsg=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],NeedMore=0,BlockDone=1,FinishStarted=2,FinishDone=3,PRESET_DICT$1=32,INIT_STATE=42,BUSY_STATE=113,FINISH_STATE=666,Z_DEFLATED$1=8,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1;function smaller(_,l,o,c){const d=_[l*2],m=_[o*2];return d<m||d==m&&c[l]<=c[o]}function Deflate(){const _=this;let l,o,c,d,m,h,s,a,r,n,t,i,u,f,p,y,g,b,E,x,M,S,O,C,T,R,B,z,L,Y,ie,$,Q;const ce=new Tree,be=new Tree,Ae=new Tree;_.depth=[];let we,Xe,Ve,st,tt,he;_.bl_count=[],_.heap=[],ie=[],$=[],Q=[];function de(){r=2*m,t[u-1]=0;for(let rt=0;rt<u-1;rt++)t[rt]=0;R=config_table[B].max_lazy,L=config_table[B].good_length,Y=config_table[B].nice_length,T=config_table[B].max_chain,M=0,g=0,O=0,b=C=MIN_MATCH-1,x=0,i=0}function ze(){let rt;for(rt=0;rt<L_CODES;rt++)ie[rt*2]=0;for(rt=0;rt<D_CODES;rt++)$[rt*2]=0;for(rt=0;rt<BL_CODES;rt++)Q[rt*2]=0;ie[END_BLOCK*2]=1,_.opt_len=_.static_len=0,Xe=Ve=0}function P(){ce.dyn_tree=ie,ce.stat_desc=StaticTree.static_l_desc,be.dyn_tree=$,be.stat_desc=StaticTree.static_d_desc,Ae.dyn_tree=Q,Ae.stat_desc=StaticTree.static_bl_desc,tt=0,he=0,st=8,ze()}_.pqdownheap=function(rt,dt){const Qe=_.heap,pt=Qe[dt];let mt=dt<<1;for(;mt<=_.heap_len&&(mt<_.heap_len&&smaller(rt,Qe[mt+1],Qe[mt],_.depth)&&mt++,!smaller(rt,pt,Qe[mt],_.depth));)Qe[dt]=Qe[mt],dt=mt,mt<<=1;Qe[dt]=pt};function A(rt,dt){let Qe=-1,pt,mt=rt[1],Nt=0,lt=7,on=4;mt===0&&(lt=138,on=3),rt[(dt+1)*2+1]=65535;for(let bn=0;bn<=dt;bn++)pt=mt,mt=rt[(bn+1)*2+1],!(++Nt<lt&&pt==mt)&&(Nt<on?Q[pt*2]+=Nt:pt!==0?(pt!=Qe&&Q[pt*2]++,Q[REP_3_6*2]++):Nt<=10?Q[REPZ_3_10*2]++:Q[REPZ_11_138*2]++,Nt=0,Qe=pt,mt===0?(lt=138,on=3):pt==mt?(lt=6,on=3):(lt=7,on=4))}function D(){let rt;for(A(ie,ce.max_code),A($,be.max_code),Ae.build_tree(_),rt=BL_CODES-1;rt>=3&&Q[Tree.bl_order[rt]*2+1]===0;rt--);return _.opt_len+=3*(rt+1)+5+5+4,rt}function W(rt){_.pending_buf[_.pending++]=rt}function ae(rt){W(rt&255),W(rt>>>8&255)}function le(rt){W(rt>>8&255),W(rt&255&255)}function Ne(rt,dt){let Qe;const pt=dt;he>Buf_size-pt?(Qe=rt,tt|=Qe<<he&65535,ae(tt),tt=Qe>>>Buf_size-he,he+=pt-Buf_size):(tt|=rt<<he&65535,he+=pt)}function De(rt,dt){const Qe=rt*2;Ne(dt[Qe]&65535,dt[Qe+1]&65535)}function Ye(rt,dt){let Qe,pt=-1,mt,Nt=rt[1],lt=0,on=7,bn=4;for(Nt===0&&(on=138,bn=3),Qe=0;Qe<=dt;Qe++)if(mt=Nt,Nt=rt[(Qe+1)*2+1],!(++lt<on&&mt==Nt)){if(lt<bn)do De(mt,Q);while(--lt!==0);else mt!==0?(mt!=pt&&(De(mt,Q),lt--),De(REP_3_6,Q),Ne(lt-3,2)):lt<=10?(De(REPZ_3_10,Q),Ne(lt-3,3)):(De(REPZ_11_138,Q),Ne(lt-11,7));lt=0,pt=mt,Nt===0?(on=138,bn=3):mt==Nt?(on=6,bn=3):(on=7,bn=4)}}function ht(rt,dt,Qe){let pt;for(Ne(rt-257,5),Ne(dt-1,5),Ne(Qe-4,4),pt=0;pt<Qe;pt++)Ne(Q[Tree.bl_order[pt]*2+1],3);Ye(ie,rt-1),Ye($,dt-1)}function F(){he==16?(ae(tt),tt=0,he=0):he>=8&&(W(tt&255),tt>>>=8,he-=8)}function V(){Ne(STATIC_TREES<<1,3),De(END_BLOCK,StaticTree.static_ltree),F(),1+st+10-he<9&&(Ne(STATIC_TREES<<1,3),De(END_BLOCK,StaticTree.static_ltree),F()),st=7}function ne(rt,dt){let Qe,pt,mt;if(_.dist_buf[Xe]=rt,_.lc_buf[Xe]=dt&255,Xe++,rt===0?ie[dt*2]++:(Ve++,rt--,ie[(Tree._length_code[dt]+LITERALS+1)*2]++,$[Tree.d_code(rt)*2]++),(Xe&8191)===0&&B>2){for(Qe=Xe*8,pt=M-g,mt=0;mt<D_CODES;mt++)Qe+=$[mt*2]*(5+Tree.extra_dbits[mt]);if(Qe>>>=3,Ve<Math.floor(Xe/2)&&Qe<Math.floor(pt/2))return!0}return Xe==we-1}function Se(rt,dt){let Qe,pt,mt=0,Nt,lt;if(Xe!==0)do Qe=_.dist_buf[mt],pt=_.lc_buf[mt],mt++,Qe===0?De(pt,rt):(Nt=Tree._length_code[pt],De(Nt+LITERALS+1,rt),lt=Tree.extra_lbits[Nt],lt!==0&&(pt-=Tree.base_length[Nt],Ne(pt,lt)),Qe--,Nt=Tree.d_code(Qe),De(Nt,dt),lt=Tree.extra_dbits[Nt],lt!==0&&(Qe-=Tree.base_dist[Nt],Ne(Qe,lt)));while(mt<Xe);De(END_BLOCK,rt),st=rt[END_BLOCK*2+1]}function Ie(){he>8?ae(tt):he>0&&W(tt&255),tt=0,he=0}function ke(rt,dt,Qe){Ie(),st=8,ae(dt),ae(~dt),_.pending_buf.set(a.subarray(rt,rt+dt),_.pending),_.pending+=dt}function $e(rt,dt,Qe){Ne((STORED_BLOCK<<1)+(Qe?1:0),3),ke(rt,dt)}function xt(rt,dt,Qe){let pt,mt,Nt=0;B>0?(ce.build_tree(_),be.build_tree(_),Nt=D(),pt=_.opt_len+3+7>>>3,mt=_.static_len+3+7>>>3,mt<=pt&&(pt=mt)):pt=mt=dt+5,dt+4<=pt&&rt!=-1?$e(rt,dt,Qe):mt==pt?(Ne((STATIC_TREES<<1)+(Qe?1:0),3),Se(StaticTree.static_ltree,StaticTree.static_dtree)):(Ne((DYN_TREES<<1)+(Qe?1:0),3),ht(ce.max_code+1,be.max_code+1,Nt+1),Se(ie,$)),ze(),Qe&&Ie()}function At(rt){xt(g>=0?g:-1,M-g,rt),g=M,l.flush_pending()}function Bt(){let rt,dt,Qe,pt;do{if(pt=r-O-M,pt===0&&M===0&&O===0)pt=m;else if(pt==-1)pt--;else if(M>=m+m-MIN_LOOKAHEAD){a.set(a.subarray(m,m+m),0),S-=m,M-=m,g-=m,rt=u,Qe=rt;do dt=t[--Qe]&65535,t[Qe]=dt>=m?dt-m:0;while(--rt!==0);rt=m,Qe=rt;do dt=n[--Qe]&65535,n[Qe]=dt>=m?dt-m:0;while(--rt!==0);pt+=m}if(l.avail_in===0)return;rt=l.read_buf(a,M+O,pt),O+=rt,O>=MIN_MATCH&&(i=a[M]&255,i=(i<<y^a[M+1]&255)&p)}while(O<MIN_LOOKAHEAD&&l.avail_in!==0)}function Rt(rt){let dt=65535,Qe;for(dt>c-5&&(dt=c-5);;){if(O<=1){if(Bt(),O===0&&rt==Z_NO_FLUSH$1)return NeedMore;if(O===0)break}if(M+=O,O=0,Qe=g+dt,(M===0||M>=Qe)&&(O=M-Qe,M=Qe,At(!1),l.avail_out===0)||M-g>=m-MIN_LOOKAHEAD&&(At(!1),l.avail_out===0))return NeedMore}return At(rt==Z_FINISH$1),l.avail_out===0?rt==Z_FINISH$1?FinishStarted:NeedMore:rt==Z_FINISH$1?FinishDone:BlockDone}function Gt(rt){let dt=T,Qe=M,pt,mt,Nt=C;const lt=M>m-MIN_LOOKAHEAD?M-(m-MIN_LOOKAHEAD):0;let on=Y;const bn=s,Ge=M+MAX_MATCH;let pe=a[Qe+Nt-1],Te=a[Qe+Nt];C>=L&&(dt>>=2),on>O&&(on=O);do if(pt=rt,!(a[pt+Nt]!=Te||a[pt+Nt-1]!=pe||a[pt]!=a[Qe]||a[++pt]!=a[Qe+1])){Qe+=2,pt++;do;while(a[++Qe]==a[++pt]&&a[++Qe]==a[++pt]&&a[++Qe]==a[++pt]&&a[++Qe]==a[++pt]&&a[++Qe]==a[++pt]&&a[++Qe]==a[++pt]&&a[++Qe]==a[++pt]&&a[++Qe]==a[++pt]&&Qe<Ge);if(mt=MAX_MATCH-(Ge-Qe),Qe=Ge-MAX_MATCH,mt>Nt){if(S=rt,Nt=mt,mt>=on)break;pe=a[Qe+Nt-1],Te=a[Qe+Nt]}}while((rt=n[rt&bn]&65535)>lt&&--dt!==0);return Nt<=O?Nt:O}function _n(rt){let dt=0,Qe;for(;;){if(O<MIN_LOOKAHEAD){if(Bt(),O<MIN_LOOKAHEAD&&rt==Z_NO_FLUSH$1)return NeedMore;if(O===0)break}if(O>=MIN_MATCH&&(i=(i<<y^a[M+(MIN_MATCH-1)]&255)&p,dt=t[i]&65535,n[M&s]=t[i],t[i]=M),dt!==0&&(M-dt&65535)<=m-MIN_LOOKAHEAD&&z!=Z_HUFFMAN_ONLY&&(b=Gt(dt)),b>=MIN_MATCH)if(Qe=ne(M-S,b-MIN_MATCH),O-=b,b<=R&&O>=MIN_MATCH){b--;do M++,i=(i<<y^a[M+(MIN_MATCH-1)]&255)&p,dt=t[i]&65535,n[M&s]=t[i],t[i]=M;while(--b!==0);M++}else M+=b,b=0,i=a[M]&255,i=(i<<y^a[M+1]&255)&p;else Qe=ne(0,a[M]&255),O--,M++;if(Qe&&(At(!1),l.avail_out===0))return NeedMore}return At(rt==Z_FINISH$1),l.avail_out===0?rt==Z_FINISH$1?FinishStarted:NeedMore:rt==Z_FINISH$1?FinishDone:BlockDone}function fn(rt){let dt=0,Qe,pt;for(;;){if(O<MIN_LOOKAHEAD){if(Bt(),O<MIN_LOOKAHEAD&&rt==Z_NO_FLUSH$1)return NeedMore;if(O===0)break}if(O>=MIN_MATCH&&(i=(i<<y^a[M+(MIN_MATCH-1)]&255)&p,dt=t[i]&65535,n[M&s]=t[i],t[i]=M),C=b,E=S,b=MIN_MATCH-1,dt!==0&&C<R&&(M-dt&65535)<=m-MIN_LOOKAHEAD&&(z!=Z_HUFFMAN_ONLY&&(b=Gt(dt)),b<=5&&(z==Z_FILTERED||b==MIN_MATCH&&M-S>4096)&&(b=MIN_MATCH-1)),C>=MIN_MATCH&&b<=C){pt=M+O-MIN_MATCH,Qe=ne(M-1-E,C-MIN_MATCH),O-=C-1,C-=2;do++M<=pt&&(i=(i<<y^a[M+(MIN_MATCH-1)]&255)&p,dt=t[i]&65535,n[M&s]=t[i],t[i]=M);while(--C!==0);if(x=0,b=MIN_MATCH-1,M++,Qe&&(At(!1),l.avail_out===0))return NeedMore}else if(x!==0){if(Qe=ne(0,a[M-1]&255),Qe&&At(!1),M++,O--,l.avail_out===0)return NeedMore}else x=1,M++,O--}return x!==0&&(Qe=ne(0,a[M-1]&255),x=0),At(rt==Z_FINISH$1),l.avail_out===0?rt==Z_FINISH$1?FinishStarted:NeedMore:rt==Z_FINISH$1?FinishDone:BlockDone}function ln(rt){return rt.total_in=rt.total_out=0,rt.msg=null,_.pending=0,_.pending_out=0,o=BUSY_STATE,d=Z_NO_FLUSH$1,P(),de(),Z_OK$1}_.deflateInit=function(rt,dt,Qe,pt,mt,Nt){return pt||(pt=Z_DEFLATED$1),mt||(mt=DEF_MEM_LEVEL),Nt||(Nt=Z_DEFAULT_STRATEGY),rt.msg=null,dt==Z_DEFAULT_COMPRESSION&&(dt=6),mt<1||mt>MAX_MEM_LEVEL||pt!=Z_DEFLATED$1||Qe<9||Qe>15||dt<0||dt>9||Nt<0||Nt>Z_HUFFMAN_ONLY?Z_STREAM_ERROR$1:(rt.dstate=_,h=Qe,m=1<<h,s=m-1,f=mt+7,u=1<<f,p=u-1,y=Math.floor((f+MIN_MATCH-1)/MIN_MATCH),a=new Uint8Array(m*2),n=[],t=[],we=1<<mt+6,_.pending_buf=new Uint8Array(we*4),c=we*4,_.dist_buf=new Uint16Array(we),_.lc_buf=new Uint8Array(we),B=dt,z=Nt,ln(rt))},_.deflateEnd=function(){return o!=INIT_STATE&&o!=BUSY_STATE&&o!=FINISH_STATE?Z_STREAM_ERROR$1:(_.lc_buf=null,_.dist_buf=null,_.pending_buf=null,t=null,n=null,a=null,_.dstate=null,o==BUSY_STATE?Z_DATA_ERROR$1:Z_OK$1)},_.deflateParams=function(rt,dt,Qe){let pt=Z_OK$1;return dt==Z_DEFAULT_COMPRESSION&&(dt=6),dt<0||dt>9||Qe<0||Qe>Z_HUFFMAN_ONLY?Z_STREAM_ERROR$1:(config_table[B].func!=config_table[dt].func&&rt.total_in!==0&&(pt=rt.deflate(Z_PARTIAL_FLUSH)),B!=dt&&(B=dt,R=config_table[B].max_lazy,L=config_table[B].good_length,Y=config_table[B].nice_length,T=config_table[B].max_chain),z=Qe,pt)},_.deflateSetDictionary=function(rt,dt,Qe){let pt=Qe,mt,Nt=0;if(!dt||o!=INIT_STATE)return Z_STREAM_ERROR$1;if(pt<MIN_MATCH)return Z_OK$1;for(pt>m-MIN_LOOKAHEAD&&(pt=m-MIN_LOOKAHEAD,Nt=Qe-pt),a.set(dt.subarray(Nt,Nt+pt),0),M=pt,g=pt,i=a[0]&255,i=(i<<y^a[1]&255)&p,mt=0;mt<=pt-MIN_MATCH;mt++)i=(i<<y^a[mt+(MIN_MATCH-1)]&255)&p,n[mt&s]=t[i],t[i]=mt;return Z_OK$1},_.deflate=function(rt,dt){let Qe,pt,mt,Nt,lt;if(dt>Z_FINISH$1||dt<0)return Z_STREAM_ERROR$1;if(!rt.next_out||!rt.next_in&&rt.avail_in!==0||o==FINISH_STATE&&dt!=Z_FINISH$1)return rt.msg=z_errmsg[Z_NEED_DICT$1-Z_STREAM_ERROR$1],Z_STREAM_ERROR$1;if(rt.avail_out===0)return rt.msg=z_errmsg[Z_NEED_DICT$1-Z_BUF_ERROR$1],Z_BUF_ERROR$1;if(l=rt,Nt=d,d=dt,o==INIT_STATE&&(pt=Z_DEFLATED$1+(h-8<<4)<<8,mt=(B-1&255)>>1,mt>3&&(mt=3),pt|=mt<<6,M!==0&&(pt|=PRESET_DICT$1),pt+=31-pt%31,o=BUSY_STATE,le(pt)),_.pending!==0){if(l.flush_pending(),l.avail_out===0)return d=-1,Z_OK$1}else if(l.avail_in===0&&dt<=Nt&&dt!=Z_FINISH$1)return l.msg=z_errmsg[Z_NEED_DICT$1-Z_BUF_ERROR$1],Z_BUF_ERROR$1;if(o==FINISH_STATE&&l.avail_in!==0)return rt.msg=z_errmsg[Z_NEED_DICT$1-Z_BUF_ERROR$1],Z_BUF_ERROR$1;if(l.avail_in!==0||O!==0||dt!=Z_NO_FLUSH$1&&o!=FINISH_STATE){switch(lt=-1,config_table[B].func){case STORED$1:lt=Rt(dt);break;case FAST:lt=_n(dt);break;case SLOW:lt=fn(dt);break}if((lt==FinishStarted||lt==FinishDone)&&(o=FINISH_STATE),lt==NeedMore||lt==FinishStarted)return l.avail_out===0&&(d=-1),Z_OK$1;if(lt==BlockDone){if(dt==Z_PARTIAL_FLUSH)V();else if($e(0,0,!1),dt==Z_FULL_FLUSH)for(Qe=0;Qe<u;Qe++)t[Qe]=0;if(l.flush_pending(),l.avail_out===0)return d=-1,Z_OK$1}}return dt!=Z_FINISH$1?Z_OK$1:Z_STREAM_END$1}}function ZStream$1(){const _=this;_.next_in_index=0,_.next_out_index=0,_.avail_in=0,_.total_in=0,_.avail_out=0,_.total_out=0}ZStream$1.prototype={deflateInit(_,l){const o=this;return o.dstate=new Deflate,l||(l=MAX_BITS$1),o.dstate.deflateInit(o,_,l)},deflate(_){const l=this;return l.dstate?l.dstate.deflate(l,_):Z_STREAM_ERROR$1},deflateEnd(){const _=this;if(!_.dstate)return Z_STREAM_ERROR$1;const l=_.dstate.deflateEnd();return _.dstate=null,l},deflateParams(_,l){const o=this;return o.dstate?o.dstate.deflateParams(o,_,l):Z_STREAM_ERROR$1},deflateSetDictionary(_,l){const o=this;return o.dstate?o.dstate.deflateSetDictionary(o,_,l):Z_STREAM_ERROR$1},read_buf(_,l,o){const c=this;let d=c.avail_in;return d>o&&(d=o),d===0?0:(c.avail_in-=d,_.set(c.next_in.subarray(c.next_in_index,c.next_in_index+d),l),c.next_in_index+=d,c.total_in+=d,d)},flush_pending(){const _=this;let l=_.dstate.pending;l>_.avail_out&&(l=_.avail_out),l!==0&&(_.next_out.set(_.dstate.pending_buf.subarray(_.dstate.pending_out,_.dstate.pending_out+l),_.next_out_index),_.next_out_index+=l,_.dstate.pending_out+=l,_.total_out+=l,_.avail_out-=l,_.dstate.pending-=l,_.dstate.pending===0&&(_.dstate.pending_out=0))}};function ZipDeflate(_){const l=this,o=new ZStream$1,c=getMaximumCompressedSize(_&&_.chunkSize?_.chunkSize:64*1024),d=Z_NO_FLUSH$1,m=new Uint8Array(c);let h=_?_.level:Z_DEFAULT_COMPRESSION;typeof h>"u"&&(h=Z_DEFAULT_COMPRESSION),o.deflateInit(h),o.next_out=m,l.append=function(s,a){let r,n,t=0,i=0,u=0;const f=[];if(s.length){o.next_in_index=0,o.next_in=s,o.avail_in=s.length;do{if(o.next_out_index=0,o.avail_out=c,r=o.deflate(d),r!=Z_OK$1)throw new Error("deflating: "+o.msg);o.next_out_index&&(o.next_out_index==c?f.push(new Uint8Array(m)):f.push(m.subarray(0,o.next_out_index))),u+=o.next_out_index,a&&o.next_in_index>0&&o.next_in_index!=t&&(a(o.next_in_index),t=o.next_in_index)}while(o.avail_in>0||o.avail_out===0);return f.length>1?(n=new Uint8Array(u),f.forEach(function(p){n.set(p,i),i+=p.length})):n=f[0]?new Uint8Array(f[0]):new Uint8Array,n}},l.flush=function(){let s,a,r=0,n=0;const t=[];do{if(o.next_out_index=0,o.avail_out=c,s=o.deflate(Z_FINISH$1),s!=Z_STREAM_END$1&&s!=Z_OK$1)throw new Error("deflating: "+o.msg);c-o.avail_out>0&&t.push(m.slice(0,o.next_out_index)),n+=o.next_out_index}while(o.avail_in>0||o.avail_out===0);return o.deflateEnd(),a=new Uint8Array(n),t.forEach(function(i){a.set(i,r),r+=i.length}),a}}function getMaximumCompressedSize(_){return _+5*(Math.floor(_/16383)+1)}const MAX_BITS=15,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,inflate_mask=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],MANY=1440,Z_NO_FLUSH=0,Z_FINISH=4,fixed_bl=9,fixed_bd=5,fixed_tl=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],fixed_td=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],BMAX=15;function InfTree(){const _=this;let l,o,c,d,m,h;function s(r,n,t,i,u,f,p,y,g,b,E){let x,M,S,O,C,T,R,B,z,L,Y,ie,$,Q,ce;L=0,C=t;do c[r[n+L]]++,L++,C--;while(C!==0);if(c[0]==t)return p[0]=-1,y[0]=0,Z_OK;for(B=y[0],T=1;T<=BMAX&&c[T]===0;T++);for(R=T,B<T&&(B=T),C=BMAX;C!==0&&c[C]===0;C--);for(S=C,B>C&&(B=C),y[0]=B,Q=1<<T;T<C;T++,Q<<=1)if((Q-=c[T])<0)return Z_DATA_ERROR;if((Q-=c[C])<0)return Z_DATA_ERROR;for(c[C]+=Q,h[1]=T=0,L=1,$=2;--C!==0;)h[$]=T+=c[L],$++,L++;C=0,L=0;do(T=r[n+L])!==0&&(E[h[T]++]=C),L++;while(++C<t);for(t=h[S],h[0]=C=0,L=0,O=-1,ie=-B,m[0]=0,Y=0,ce=0;R<=S;R++)for(x=c[R];x--!==0;){for(;R>ie+B;){if(O++,ie+=B,ce=S-ie,ce=ce>B?B:ce,(M=1<<(T=R-ie))>x+1&&(M-=x+1,$=R,T<ce))for(;++T<ce&&!((M<<=1)<=c[++$]);)M-=c[$];if(ce=1<<T,b[0]+ce>MANY)return Z_DATA_ERROR;m[O]=Y=b[0],b[0]+=ce,O!==0?(h[O]=C,d[0]=T,d[1]=B,T=C>>>ie-B,d[2]=Y-m[O-1]-T,g.set(d,(m[O-1]+T)*3)):p[0]=Y}for(d[1]=R-ie,L>=t?d[0]=192:E[L]<i?(d[0]=E[L]<256?0:96,d[2]=E[L++]):(d[0]=f[E[L]-i]+16+64,d[2]=u[E[L++]-i]),M=1<<R-ie,T=C>>>ie;T<ce;T+=M)g.set(d,(Y+T)*3);for(T=1<<R-1;(C&T)!==0;T>>>=1)C^=T;for(C^=T,z=(1<<ie)-1;(C&z)!=h[O];)O--,ie-=B,z=(1<<ie)-1}return Q!==0&&S!=1?Z_BUF_ERROR:Z_OK}function a(r){let n;for(l||(l=[],o=[],c=new Int32Array(BMAX+1),d=[],m=new Int32Array(BMAX),h=new Int32Array(BMAX+1)),o.length<r&&(o=[]),n=0;n<r;n++)o[n]=0;for(n=0;n<BMAX+1;n++)c[n]=0;for(n=0;n<3;n++)d[n]=0;m.set(c.subarray(0,BMAX),0),h.set(c.subarray(0,BMAX+1),0)}_.inflate_trees_bits=function(r,n,t,i,u){let f;return a(19),l[0]=0,f=s(r,0,19,19,null,null,t,n,i,l,o),f==Z_DATA_ERROR?u.msg="oversubscribed dynamic bit lengths tree":(f==Z_BUF_ERROR||n[0]===0)&&(u.msg="incomplete dynamic bit lengths tree",f=Z_DATA_ERROR),f},_.inflate_trees_dynamic=function(r,n,t,i,u,f,p,y,g){let b;return a(288),l[0]=0,b=s(t,0,r,257,cplens,cplext,f,i,y,l,o),b!=Z_OK||i[0]===0?(b==Z_DATA_ERROR?g.msg="oversubscribed literal/length tree":b!=Z_MEM_ERROR&&(g.msg="incomplete literal/length tree",b=Z_DATA_ERROR),b):(a(288),b=s(t,r,n,0,cpdist,cpdext,p,u,y,l,o),b!=Z_OK||u[0]===0&&r>257?(b==Z_DATA_ERROR?g.msg="oversubscribed distance tree":b==Z_BUF_ERROR?(g.msg="incomplete distance tree",b=Z_DATA_ERROR):b!=Z_MEM_ERROR&&(g.msg="empty distance tree with lengths",b=Z_DATA_ERROR),b):Z_OK)}}InfTree.inflate_trees_fixed=function(_,l,o,c){return _[0]=fixed_bl,l[0]=fixed_bd,o[0]=fixed_tl,c[0]=fixed_td,Z_OK};const START=0,LEN=1,LENEXT=2,DIST=3,DISTEXT=4,COPY=5,LIT=6,WASH=7,END=8,BADCODE=9;function InfCodes(){const _=this;let l,o=0,c,d=0,m=0,h=0,s=0,a=0,r=0,n=0,t,i=0,u,f=0;function p(y,g,b,E,x,M,S,O){let C,T,R,B,z,L,Y,ie,$,Q,ce,be,Ae,we,Xe,Ve;Y=O.next_in_index,ie=O.avail_in,z=S.bitb,L=S.bitk,$=S.write,Q=$<S.read?S.read-$-1:S.end-$,ce=inflate_mask[y],be=inflate_mask[g];do{for(;L<20;)ie--,z|=(O.read_byte(Y++)&255)<<L,L+=8;if(C=z&ce,T=b,R=E,Ve=(R+C)*3,(B=T[Ve])===0){z>>=T[Ve+1],L-=T[Ve+1],S.win[$++]=T[Ve+2],Q--;continue}do{if(z>>=T[Ve+1],L-=T[Ve+1],(B&16)!==0){for(B&=15,Ae=T[Ve+2]+(z&inflate_mask[B]),z>>=B,L-=B;L<15;)ie--,z|=(O.read_byte(Y++)&255)<<L,L+=8;C=z&be,T=x,R=M,Ve=(R+C)*3,B=T[Ve];do if(z>>=T[Ve+1],L-=T[Ve+1],(B&16)!==0){for(B&=15;L<B;)ie--,z|=(O.read_byte(Y++)&255)<<L,L+=8;if(we=T[Ve+2]+(z&inflate_mask[B]),z>>=B,L-=B,Q-=Ae,$>=we)Xe=$-we,$-Xe>0&&2>$-Xe?(S.win[$++]=S.win[Xe++],S.win[$++]=S.win[Xe++],Ae-=2):(S.win.set(S.win.subarray(Xe,Xe+2),$),$+=2,Xe+=2,Ae-=2);else{Xe=$-we;do Xe+=S.end;while(Xe<0);if(B=S.end-Xe,Ae>B){if(Ae-=B,$-Xe>0&&B>$-Xe)do S.win[$++]=S.win[Xe++];while(--B!==0);else S.win.set(S.win.subarray(Xe,Xe+B),$),$+=B,Xe+=B,B=0;Xe=0}}if($-Xe>0&&Ae>$-Xe)do S.win[$++]=S.win[Xe++];while(--Ae!==0);else S.win.set(S.win.subarray(Xe,Xe+Ae),$),$+=Ae,Xe+=Ae,Ae=0;break}else if((B&64)===0)C+=T[Ve+2],C+=z&inflate_mask[B],Ve=(R+C)*3,B=T[Ve];else return O.msg="invalid distance code",Ae=O.avail_in-ie,Ae=L>>3<Ae?L>>3:Ae,ie+=Ae,Y-=Ae,L-=Ae<<3,S.bitb=z,S.bitk=L,O.avail_in=ie,O.total_in+=Y-O.next_in_index,O.next_in_index=Y,S.write=$,Z_DATA_ERROR;while(!0);break}if((B&64)===0){if(C+=T[Ve+2],C+=z&inflate_mask[B],Ve=(R+C)*3,(B=T[Ve])===0){z>>=T[Ve+1],L-=T[Ve+1],S.win[$++]=T[Ve+2],Q--;break}}else return(B&32)!==0?(Ae=O.avail_in-ie,Ae=L>>3<Ae?L>>3:Ae,ie+=Ae,Y-=Ae,L-=Ae<<3,S.bitb=z,S.bitk=L,O.avail_in=ie,O.total_in+=Y-O.next_in_index,O.next_in_index=Y,S.write=$,Z_STREAM_END):(O.msg="invalid literal/length code",Ae=O.avail_in-ie,Ae=L>>3<Ae?L>>3:Ae,ie+=Ae,Y-=Ae,L-=Ae<<3,S.bitb=z,S.bitk=L,O.avail_in=ie,O.total_in+=Y-O.next_in_index,O.next_in_index=Y,S.write=$,Z_DATA_ERROR)}while(!0)}while(Q>=258&&ie>=10);return Ae=O.avail_in-ie,Ae=L>>3<Ae?L>>3:Ae,ie+=Ae,Y-=Ae,L-=Ae<<3,S.bitb=z,S.bitk=L,O.avail_in=ie,O.total_in+=Y-O.next_in_index,O.next_in_index=Y,S.write=$,Z_OK}_.init=function(y,g,b,E,x,M){l=START,r=y,n=g,t=b,i=E,u=x,f=M,c=null},_.proc=function(y,g,b){let E,x,M,S=0,O=0,C=0,T,R,B,z;for(C=g.next_in_index,T=g.avail_in,S=y.bitb,O=y.bitk,R=y.write,B=R<y.read?y.read-R-1:y.end-R;;)switch(l){case START:if(B>=258&&T>=10&&(y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,b=p(r,n,t,i,u,f,y,g),C=g.next_in_index,T=g.avail_in,S=y.bitb,O=y.bitk,R=y.write,B=R<y.read?y.read-R-1:y.end-R,b!=Z_OK)){l=b==Z_STREAM_END?WASH:BADCODE;break}m=r,c=t,d=i,l=LEN;case LEN:for(E=m;O<E;){if(T!==0)b=Z_OK;else return y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b);T--,S|=(g.read_byte(C++)&255)<<O,O+=8}if(x=(d+(S&inflate_mask[E]))*3,S>>>=c[x+1],O-=c[x+1],M=c[x],M===0){h=c[x+2],l=LIT;break}if((M&16)!==0){s=M&15,o=c[x+2],l=LENEXT;break}if((M&64)===0){m=M,d=x/3+c[x+2];break}if((M&32)!==0){l=WASH;break}return l=BADCODE,g.msg="invalid literal/length code",b=Z_DATA_ERROR,y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b);case LENEXT:for(E=s;O<E;){if(T!==0)b=Z_OK;else return y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b);T--,S|=(g.read_byte(C++)&255)<<O,O+=8}o+=S&inflate_mask[E],S>>=E,O-=E,m=n,c=u,d=f,l=DIST;case DIST:for(E=m;O<E;){if(T!==0)b=Z_OK;else return y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b);T--,S|=(g.read_byte(C++)&255)<<O,O+=8}if(x=(d+(S&inflate_mask[E]))*3,S>>=c[x+1],O-=c[x+1],M=c[x],(M&16)!==0){s=M&15,a=c[x+2],l=DISTEXT;break}if((M&64)===0){m=M,d=x/3+c[x+2];break}return l=BADCODE,g.msg="invalid distance code",b=Z_DATA_ERROR,y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b);case DISTEXT:for(E=s;O<E;){if(T!==0)b=Z_OK;else return y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b);T--,S|=(g.read_byte(C++)&255)<<O,O+=8}a+=S&inflate_mask[E],S>>=E,O-=E,l=COPY;case COPY:for(z=R-a;z<0;)z+=y.end;for(;o!==0;){if(B===0&&(R==y.end&&y.read!==0&&(R=0,B=R<y.read?y.read-R-1:y.end-R),B===0&&(y.write=R,b=y.inflate_flush(g,b),R=y.write,B=R<y.read?y.read-R-1:y.end-R,R==y.end&&y.read!==0&&(R=0,B=R<y.read?y.read-R-1:y.end-R),B===0)))return y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b);y.win[R++]=y.win[z++],B--,z==y.end&&(z=0),o--}l=START;break;case LIT:if(B===0&&(R==y.end&&y.read!==0&&(R=0,B=R<y.read?y.read-R-1:y.end-R),B===0&&(y.write=R,b=y.inflate_flush(g,b),R=y.write,B=R<y.read?y.read-R-1:y.end-R,R==y.end&&y.read!==0&&(R=0,B=R<y.read?y.read-R-1:y.end-R),B===0)))return y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b);b=Z_OK,y.win[R++]=h,B--,l=START;break;case WASH:if(O>7&&(O-=8,T++,C--),y.write=R,b=y.inflate_flush(g,b),R=y.write,B=R<y.read?y.read-R-1:y.end-R,y.read!=y.write)return y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b);l=END;case END:return b=Z_STREAM_END,y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b);case BADCODE:return b=Z_DATA_ERROR,y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b);default:return b=Z_STREAM_ERROR,y.bitb=S,y.bitk=O,g.avail_in=T,g.total_in+=C-g.next_in_index,g.next_in_index=C,y.write=R,y.inflate_flush(g,b)}},_.free=function(){}}const border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],TYPE=0,LENS=1,STORED=2,TABLE=3,BTREE=4,DTREE=5,CODES=6,DRY=7,DONELOCKS=8,BADBLOCKS=9;function InfBlocks(_,l){const o=this;let c=TYPE,d=0,m=0,h=0,s;const a=[0],r=[0],n=new InfCodes;let t=0,i=new Int32Array(MANY*3);const u=0,f=new InfTree;o.bitk=0,o.bitb=0,o.win=new Uint8Array(l),o.end=l,o.read=0,o.write=0,o.reset=function(p,y){y&&(y[0]=u),c==CODES&&n.free(p),c=TYPE,o.bitk=0,o.bitb=0,o.read=o.write=0},o.reset(_,null),o.inflate_flush=function(p,y){let g,b,E;return b=p.next_out_index,E=o.read,g=(E<=o.write?o.write:o.end)-E,g>p.avail_out&&(g=p.avail_out),g!==0&&y==Z_BUF_ERROR&&(y=Z_OK),p.avail_out-=g,p.total_out+=g,p.next_out.set(o.win.subarray(E,E+g),b),b+=g,E+=g,E==o.end&&(E=0,o.write==o.end&&(o.write=0),g=o.write-E,g>p.avail_out&&(g=p.avail_out),g!==0&&y==Z_BUF_ERROR&&(y=Z_OK),p.avail_out-=g,p.total_out+=g,p.next_out.set(o.win.subarray(E,E+g),b),b+=g,E+=g),p.next_out_index=b,o.read=E,y},o.proc=function(p,y){let g,b,E,x,M,S,O,C;for(x=p.next_in_index,M=p.avail_in,b=o.bitb,E=o.bitk,S=o.write,O=S<o.read?o.read-S-1:o.end-S;;){let T,R,B,z,L,Y,ie,$;switch(c){case TYPE:for(;E<3;){if(M!==0)y=Z_OK;else return o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);M--,b|=(p.read_byte(x++)&255)<<E,E+=8}switch(g=b&7,t=g&1,g>>>1){case 0:b>>>=3,E-=3,g=E&7,b>>>=g,E-=g,c=LENS;break;case 1:T=[],R=[],B=[[]],z=[[]],InfTree.inflate_trees_fixed(T,R,B,z),n.init(T[0],R[0],B[0],0,z[0],0),b>>>=3,E-=3,c=CODES;break;case 2:b>>>=3,E-=3,c=TABLE;break;case 3:return b>>>=3,E-=3,c=BADBLOCKS,p.msg="invalid block type",y=Z_DATA_ERROR,o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y)}break;case LENS:for(;E<32;){if(M!==0)y=Z_OK;else return o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);M--,b|=(p.read_byte(x++)&255)<<E,E+=8}if((~b>>>16&65535)!=(b&65535))return c=BADBLOCKS,p.msg="invalid stored block lengths",y=Z_DATA_ERROR,o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);d=b&65535,b=E=0,c=d!==0?STORED:t!==0?DRY:TYPE;break;case STORED:if(M===0||O===0&&(S==o.end&&o.read!==0&&(S=0,O=S<o.read?o.read-S-1:o.end-S),O===0&&(o.write=S,y=o.inflate_flush(p,y),S=o.write,O=S<o.read?o.read-S-1:o.end-S,S==o.end&&o.read!==0&&(S=0,O=S<o.read?o.read-S-1:o.end-S),O===0)))return o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);if(y=Z_OK,g=d,g>M&&(g=M),g>O&&(g=O),o.win.set(p.read_buf(x,g),S),x+=g,M-=g,S+=g,O-=g,(d-=g)!==0)break;c=t!==0?DRY:TYPE;break;case TABLE:for(;E<14;){if(M!==0)y=Z_OK;else return o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);M--,b|=(p.read_byte(x++)&255)<<E,E+=8}if(m=g=b&16383,(g&31)>29||(g>>5&31)>29)return c=BADBLOCKS,p.msg="too many length or distance symbols",y=Z_DATA_ERROR,o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);if(g=258+(g&31)+(g>>5&31),!s||s.length<g)s=[];else for(C=0;C<g;C++)s[C]=0;b>>>=14,E-=14,h=0,c=BTREE;case BTREE:for(;h<4+(m>>>10);){for(;E<3;){if(M!==0)y=Z_OK;else return o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);M--,b|=(p.read_byte(x++)&255)<<E,E+=8}s[border[h++]]=b&7,b>>>=3,E-=3}for(;h<19;)s[border[h++]]=0;if(a[0]=7,g=f.inflate_trees_bits(s,a,r,i,p),g!=Z_OK)return y=g,y==Z_DATA_ERROR&&(s=null,c=BADBLOCKS),o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);h=0,c=DTREE;case DTREE:for(;g=m,!(h>=258+(g&31)+(g>>5&31));){let Q,ce;for(g=a[0];E<g;){if(M!==0)y=Z_OK;else return o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);M--,b|=(p.read_byte(x++)&255)<<E,E+=8}if(g=i[(r[0]+(b&inflate_mask[g]))*3+1],ce=i[(r[0]+(b&inflate_mask[g]))*3+2],ce<16)b>>>=g,E-=g,s[h++]=ce;else{for(C=ce==18?7:ce-14,Q=ce==18?11:3;E<g+C;){if(M!==0)y=Z_OK;else return o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);M--,b|=(p.read_byte(x++)&255)<<E,E+=8}if(b>>>=g,E-=g,Q+=b&inflate_mask[C],b>>>=C,E-=C,C=h,g=m,C+Q>258+(g&31)+(g>>5&31)||ce==16&&C<1)return s=null,c=BADBLOCKS,p.msg="invalid bit length repeat",y=Z_DATA_ERROR,o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);ce=ce==16?s[C-1]:0;do s[C++]=ce;while(--Q!==0);h=C}}if(r[0]=-1,L=[],Y=[],ie=[],$=[],L[0]=9,Y[0]=6,g=m,g=f.inflate_trees_dynamic(257+(g&31),1+(g>>5&31),s,L,Y,ie,$,i,p),g!=Z_OK)return g==Z_DATA_ERROR&&(s=null,c=BADBLOCKS),y=g,o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);n.init(L[0],Y[0],i,ie[0],i,$[0]),c=CODES;case CODES:if(o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,(y=n.proc(o,p,y))!=Z_STREAM_END)return o.inflate_flush(p,y);if(y=Z_OK,n.free(p),x=p.next_in_index,M=p.avail_in,b=o.bitb,E=o.bitk,S=o.write,O=S<o.read?o.read-S-1:o.end-S,t===0){c=TYPE;break}c=DRY;case DRY:if(o.write=S,y=o.inflate_flush(p,y),S=o.write,O=S<o.read?o.read-S-1:o.end-S,o.read!=o.write)return o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);c=DONELOCKS;case DONELOCKS:return y=Z_STREAM_END,o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);case BADBLOCKS:return y=Z_DATA_ERROR,o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y);default:return y=Z_STREAM_ERROR,o.bitb=b,o.bitk=E,p.avail_in=M,p.total_in+=x-p.next_in_index,p.next_in_index=x,o.write=S,o.inflate_flush(p,y)}}},o.free=function(p){o.reset(p,null),o.win=null,i=null},o.set_dictionary=function(p,y,g){o.win.set(p.subarray(y,y+g),0),o.read=o.write=g},o.sync_point=function(){return c==LENS?1:0}}const PRESET_DICT=32,Z_DEFLATED=8,METHOD=0,FLAG=1,DICT4=2,DICT3=3,DICT2=4,DICT1=5,DICT0=6,BLOCKS=7,DONE=12,BAD=13,mark=[0,0,255,255];function Inflate(){const _=this;_.mode=0,_.method=0,_.was=[0],_.need=0,_.marker=0,_.wbits=0;function l(o){return!o||!o.istate?Z_STREAM_ERROR:(o.total_in=o.total_out=0,o.msg=null,o.istate.mode=BLOCKS,o.istate.blocks.reset(o,null),Z_OK)}_.inflateEnd=function(o){return _.blocks&&_.blocks.free(o),_.blocks=null,Z_OK},_.inflateInit=function(o,c){return o.msg=null,_.blocks=null,c<8||c>15?(_.inflateEnd(o),Z_STREAM_ERROR):(_.wbits=c,o.istate.blocks=new InfBlocks(o,1<<c),l(o),Z_OK)},_.inflate=function(o,c){let d,m;if(!o||!o.istate||!o.next_in)return Z_STREAM_ERROR;const h=o.istate;for(c=c==Z_FINISH?Z_BUF_ERROR:Z_OK,d=Z_BUF_ERROR;;)switch(h.mode){case METHOD:if(o.avail_in===0)return d;if(d=c,o.avail_in--,o.total_in++,((h.method=o.read_byte(o.next_in_index++))&15)!=Z_DEFLATED){h.mode=BAD,o.msg="unknown compression method",h.marker=5;break}if((h.method>>4)+8>h.wbits){h.mode=BAD,o.msg="invalid win size",h.marker=5;break}h.mode=FLAG;case FLAG:if(o.avail_in===0)return d;if(d=c,o.avail_in--,o.total_in++,m=o.read_byte(o.next_in_index++)&255,((h.method<<8)+m)%31!==0){h.mode=BAD,o.msg="incorrect header check",h.marker=5;break}if((m&PRESET_DICT)===0){h.mode=BLOCKS;break}h.mode=DICT4;case DICT4:if(o.avail_in===0)return d;d=c,o.avail_in--,o.total_in++,h.need=(o.read_byte(o.next_in_index++)&255)<<24&4278190080,h.mode=DICT3;case DICT3:if(o.avail_in===0)return d;d=c,o.avail_in--,o.total_in++,h.need+=(o.read_byte(o.next_in_index++)&255)<<16&16711680,h.mode=DICT2;case DICT2:if(o.avail_in===0)return d;d=c,o.avail_in--,o.total_in++,h.need+=(o.read_byte(o.next_in_index++)&255)<<8&65280,h.mode=DICT1;case DICT1:return o.avail_in===0?d:(d=c,o.avail_in--,o.total_in++,h.need+=o.read_byte(o.next_in_index++)&255,h.mode=DICT0,Z_NEED_DICT);case DICT0:return h.mode=BAD,o.msg="need dictionary",h.marker=0,Z_STREAM_ERROR;case BLOCKS:if(d=h.blocks.proc(o,d),d==Z_DATA_ERROR){h.mode=BAD,h.marker=0;break}if(d==Z_OK&&(d=c),d!=Z_STREAM_END)return d;d=c,h.blocks.reset(o,h.was),h.mode=DONE;case DONE:return o.avail_in=0,Z_STREAM_END;case BAD:return Z_DATA_ERROR;default:return Z_STREAM_ERROR}},_.inflateSetDictionary=function(o,c,d){let m=0,h=d;if(!o||!o.istate||o.istate.mode!=DICT0)return Z_STREAM_ERROR;const s=o.istate;return h>=1<<s.wbits&&(h=(1<<s.wbits)-1,m=d-h),s.blocks.set_dictionary(c,m,h),s.mode=BLOCKS,Z_OK},_.inflateSync=function(o){let c,d,m,h,s;if(!o||!o.istate)return Z_STREAM_ERROR;const a=o.istate;if(a.mode!=BAD&&(a.mode=BAD,a.marker=0),(c=o.avail_in)===0)return Z_BUF_ERROR;for(d=o.next_in_index,m=a.marker;c!==0&&m<4;)o.read_byte(d)==mark[m]?m++:o.read_byte(d)!==0?m=0:m=4-m,d++,c--;return o.total_in+=d-o.next_in_index,o.next_in_index=d,o.avail_in=c,a.marker=m,m!=4?Z_DATA_ERROR:(h=o.total_in,s=o.total_out,l(o),o.total_in=h,o.total_out=s,a.mode=BLOCKS,Z_OK)},_.inflateSyncPoint=function(o){return!o||!o.istate||!o.istate.blocks?Z_STREAM_ERROR:o.istate.blocks.sync_point()}}function ZStream(){}ZStream.prototype={inflateInit(_){const l=this;return l.istate=new Inflate,_||(_=MAX_BITS),l.istate.inflateInit(l,_)},inflate(_){const l=this;return l.istate?l.istate.inflate(l,_):Z_STREAM_ERROR},inflateEnd(){const _=this;if(!_.istate)return Z_STREAM_ERROR;const l=_.istate.inflateEnd(_);return _.istate=null,l},inflateSync(){const _=this;return _.istate?_.istate.inflateSync(_):Z_STREAM_ERROR},inflateSetDictionary(_,l){const o=this;return o.istate?o.istate.inflateSetDictionary(o,_,l):Z_STREAM_ERROR},read_byte(_){return this.next_in[_]},read_buf(_,l){return this.next_in.subarray(_,_+l)}};function ZipInflate(_){const l=this,o=new ZStream,c=_&&_.chunkSize?Math.floor(_.chunkSize*2):128*1024,d=Z_NO_FLUSH,m=new Uint8Array(c);let h=!1;o.inflateInit(),o.next_out=m,l.append=function(s,a){const r=[];let n,t,i=0,u=0,f=0;if(s.length!==0){o.next_in_index=0,o.next_in=s,o.avail_in=s.length;do{if(o.next_out_index=0,o.avail_out=c,o.avail_in===0&&!h&&(o.next_in_index=0,h=!0),n=o.inflate(d),h&&n===Z_BUF_ERROR){if(o.avail_in!==0)throw new Error("inflating: bad input")}else if(n!==Z_OK&&n!==Z_STREAM_END)throw new Error("inflating: "+o.msg);if((h||n===Z_STREAM_END)&&o.avail_in===s.length)throw new Error("inflating: bad input");o.next_out_index&&(o.next_out_index===c?r.push(new Uint8Array(m)):r.push(m.subarray(0,o.next_out_index))),f+=o.next_out_index,a&&o.next_in_index>0&&o.next_in_index!=i&&(a(o.next_in_index),i=o.next_in_index)}while(o.avail_in>0||o.avail_out===0);return r.length>1?(t=new Uint8Array(f),r.forEach(function(p){t.set(p,u),u+=p.length})):t=r[0]?new Uint8Array(r[0]):new Uint8Array,t}},l.flush=function(){o.inflateEnd()}}const MAX_32_BITS=4294967295,MAX_16_BITS=65535,COMPRESSION_METHOD_DEFLATE=8,COMPRESSION_METHOD_STORE=0,COMPRESSION_METHOD_AES=99,LOCAL_FILE_HEADER_SIGNATURE=67324752,SPLIT_ZIP_FILE_SIGNATURE=134695760,DATA_DESCRIPTOR_RECORD_SIGNATURE=SPLIT_ZIP_FILE_SIGNATURE,CENTRAL_FILE_HEADER_SIGNATURE=33639248,END_OF_CENTRAL_DIR_SIGNATURE=101010256,ZIP64_END_OF_CENTRAL_DIR_SIGNATURE=101075792,ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE=117853008,END_OF_CENTRAL_DIR_LENGTH=22,ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH=20,ZIP64_END_OF_CENTRAL_DIR_LENGTH=56,DATA_DESCRIPTOR_RECORD_LENGTH=12,DATA_DESCRIPTOR_RECORD_ZIP_64_LENGTH=20,DATA_DESCRIPTOR_RECORD_SIGNATURE_LENGTH=4,EXTRAFIELD_TYPE_ZIP64=1,EXTRAFIELD_TYPE_AES=39169,EXTRAFIELD_TYPE_NTFS=10,EXTRAFIELD_TYPE_NTFS_TAG1=1,EXTRAFIELD_TYPE_EXTENDED_TIMESTAMP=21589,EXTRAFIELD_TYPE_UNICODE_PATH=28789,EXTRAFIELD_TYPE_UNICODE_COMMENT=25461,EXTRAFIELD_TYPE_USDZ=6534,BITFLAG_ENCRYPTED=1,BITFLAG_LEVEL=6,BITFLAG_DATA_DESCRIPTOR=8,BITFLAG_LANG_ENCODING_FLAG=2048,FILE_ATTR_MSDOS_DIR_MASK=16,FILE_ATTR_UNIX_TYPE_MASK=61440,FILE_ATTR_UNIX_TYPE_DIR=16384,FILE_ATTR_UNIX_EXECUTABLE_MASK=73,DIRECTORY_SIGNATURE="/",HEADER_SIZE=30,HEADER_OFFSET_SIGNATURE=10,HEADER_OFFSET_COMPRESSED_SIZE=14,HEADER_OFFSET_UNCOMPRESSED_SIZE=18,UNDEFINED_VALUE=void 0,UNDEFINED_TYPE="undefined",FUNCTION_TYPE="function";class StreamAdapter{constructor(l){return class extends TransformStream{constructor(o,c){const d=new l(c);super({transform(m,h){h.enqueue(d.append(m))},flush(m){const h=d.flush();h&&m.enqueue(h)}})}}}}const MINIMUM_CHUNK_SIZE=64;let maxWorkers=2;try{typeof navigator!=UNDEFINED_TYPE&&navigator.hardwareConcurrency&&(maxWorkers=navigator.hardwareConcurrency)}catch(_){}const DEFAULT_CONFIGURATION={chunkSize:512*1024,maxWorkers,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:UNDEFINED_VALUE,CompressionStreamNative:typeof CompressionStream!=UNDEFINED_TYPE&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=UNDEFINED_TYPE&&DecompressionStream},config=Object.assign({},DEFAULT_CONFIGURATION);function getConfiguration(){return config}function getChunkSize(_){return Math.max(_.chunkSize,MINIMUM_CHUNK_SIZE)}function configure(_){const{baseURL:l,chunkSize:o,maxWorkers:c,terminateWorkerTimeout:d,useCompressionStream:m,useWebWorkers:h,Deflate:s,Inflate:a,CompressionStream:r,DecompressionStream:n,workerScripts:t}=_;if(setIfDefined("baseURL",l),setIfDefined("chunkSize",o),setIfDefined("maxWorkers",c),setIfDefined("terminateWorkerTimeout",d),setIfDefined("useCompressionStream",m),setIfDefined("useWebWorkers",h),s&&(config.CompressionStream=new StreamAdapter(s)),a&&(config.DecompressionStream=new StreamAdapter(a)),setIfDefined("CompressionStream",r),setIfDefined("DecompressionStream",n),t!==UNDEFINED_VALUE){const{deflate:i,inflate:u}=t;if((i||u)&&(config.workerScripts||(config.workerScripts={})),i){if(!Array.isArray(i))throw new Error("workerScripts.deflate must be an array");config.workerScripts.deflate=i}if(u){if(!Array.isArray(u))throw new Error("workerScripts.inflate must be an array");config.workerScripts.inflate=u}}}function setIfDefined(_,l){l!==UNDEFINED_VALUE&&(config[_]=l)}const table$1={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin","cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot","wiz"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf","xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","xpdl"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot","ppa","pwz"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":["odm","otm"],"vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw","vsdx","vssx","vstx","vssm","vstm"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-director":["dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-latex":"latex","x-lyx":"lyx","x-lzx":"lzx","x-maker":["frm","fb","fbdoc"],"x-ms-wmd":"wmd","x-msdos-program":["com","exe","bat","dll"],"x-netcdf":["nc"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":["rpm","rpa"],"x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":["mathml","mml"],mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","application/x-ms-installer":"msi","x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-perfmon":["pma","pmc","pmr","pmw"],"ynd.ms-pkipko":"pko",gzip:["gz","tgz"],"smil+xml":["smi","smil"],"vnd.debian.binary-package":["deb","udeb"],"vnd.hzn-3d-crossword":"x3d","vnd.sqlite3":["db","sqlite","sqlite3","db-wal","sqlite-wal","db-shm","sqlite-shm"],"vnd.wap.sic":"sic","vnd.wap.slc":"slc","x-krita":["kra","krz"],"x-perl":["pm","pl"],yaml:["yaml","yml"]},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":"aifc","x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",aac:"aac",aiff:["aiff","aif","aff"],opus:"opus",wav:"wav"},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":"mmod","x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":"sd","x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":"val","x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},font:{otf:"otf",woff:"woff",woff2:"woff2"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe","jfif","jfif-tbnl","jif"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",avif:"avifs",heic:["heif","heic"],pjpeg:["pjpg"],"vnd.adobe.photoshop":"psd","x-adobe-dng":"dng","x-fuji-raf":"raf","x-icns":"icns","x-kodak-dcr":"dcr","x-kodak-k25":"k25","x-kodak-kdc":"kdc","x-minolta-mrw":"mrw","x-panasonic-raw":["raw","rw2","rwl"],"x-pentax-pef":["pef","ptx"],"x-sigma-x3f":"x3f","x-sony-arw":"arw","x-sony-sr2":"sr2","x-sony-srf":"srf"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":"x3dz","x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.usdz+zip":"usdz","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",plain:["txt","text","brf","conf","def","list","log","in","bas","diff","ksh"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:"tm","tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":"patch","x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas","pp","inc"],"x-pcs-gcd":"gcd","x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","h","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt",javascript:"js",json:"json",markdown:["md","markdown","mdown","markdn"],"vnd.wap.si":"si","vnd.wap.sl":"sl"},video:{avif:"avif","3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv",mp2t:"ts"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","flr","wrz","xaf","xof"]}};(()=>{const _={};for(const l of Object.keys(table$1))for(const o of Object.keys(table$1[l])){const c=table$1[l][o];if(typeof c=="string")_[c]=l+"/"+o;else for(let d=0;d<c.length;d++)_[c[d]]=l+"/"+o}return _})();const table=[];for(let _=0;_<256;_++){let l=_;for(let o=0;o<8;o++)l&1?l=l>>>1^3988292384:l=l>>>1;table[_]=l}class Crc32{constructor(l){this.crc=l||-1}append(l){let o=this.crc|0;for(let c=0,d=l.length|0;c<d;c++)o=o>>>8^table[(o^l[c])&255];this.crc=o}get(){return~this.crc}}class Crc32Stream extends TransformStream{constructor(){let l;const o=new Crc32;super({transform(c,d){o.append(c),d.enqueue(c)},flush(){const c=new Uint8Array(4);new DataView(c.buffer).setUint32(0,o.get()),l.value=c}}),l=this}}function encodeText(_){if(typeof TextEncoder==UNDEFINED_TYPE){_=unescape(encodeURIComponent(_));const l=new Uint8Array(_.length);for(let o=0;o<l.length;o++)l[o]=_.charCodeAt(o);return l}else return new TextEncoder().encode(_)}const bitArray={concat(_,l){if(_.length===0||l.length===0)return _.concat(l);const o=_[_.length-1],c=bitArray.getPartial(o);return c===32?_.concat(l):bitArray._shiftRight(l,c,o|0,_.slice(0,_.length-1))},bitLength(_){const l=_.length;if(l===0)return 0;const o=_[l-1];return(l-1)*32+bitArray.getPartial(o)},clamp(_,l){if(_.length*32<l)return _;_=_.slice(0,Math.ceil(l/32));const o=_.length;return l=l&31,o>0&&l&&(_[o-1]=bitArray.partial(l,_[o-1]&2147483648>>l-1,1)),_},partial(_,l,o){return _===32?l:(o?l|0:l<<32-_)+_*1099511627776},getPartial(_){return Math.round(_/1099511627776)||32},_shiftRight(_,l,o,c){for(c===void 0&&(c=[]);l>=32;l-=32)c.push(o),o=0;if(l===0)return c.concat(_);for(let h=0;h<_.length;h++)c.push(o|_[h]>>>l),o=_[h]<<32-l;const d=_.length?_[_.length-1]:0,m=bitArray.getPartial(d);return c.push(bitArray.partial(l+m&31,l+m>32?o:c.pop(),1)),c}},codec={bytes:{fromBits(_){const o=bitArray.bitLength(_)/8,c=new Uint8Array(o);let d;for(let m=0;m<o;m++)(m&3)===0&&(d=_[m/4]),c[m]=d>>>24,d<<=8;return c},toBits(_){const l=[];let o,c=0;for(o=0;o<_.length;o++)c=c<<8|_[o],(o&3)===3&&(l.push(c),c=0);return o&3&&l.push(bitArray.partial(8*(o&3),c)),l}}},hash={};hash.sha1=class{constructor(_){const l=this;l.blockSize=512,l._init=[1732584193,4023233417,2562383102,271733878,3285377520],l._key=[1518500249,1859775393,2400959708,3395469782],_?(l._h=_._h.slice(0),l._buffer=_._buffer.slice(0),l._length=_._length):l.reset()}reset(){const _=this;return _._h=_._init.slice(0),_._buffer=[],_._length=0,_}update(_){const l=this;typeof _=="string"&&(_=codec.utf8String.toBits(_));const o=l._buffer=bitArray.concat(l._buffer,_),c=l._length,d=l._length=c+bitArray.bitLength(_);if(d>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const m=new Uint32Array(o);let h=0;for(let s=l.blockSize+c-(l.blockSize+c&l.blockSize-1);s<=d;s+=l.blockSize)l._block(m.subarray(16*h,16*(h+1))),h+=1;return o.splice(0,16*h),l}finalize(){const _=this;let l=_._buffer;const o=_._h;l=bitArray.concat(l,[bitArray.partial(1,1)]);for(let c=l.length+2;c&15;c++)l.push(0);for(l.push(Math.floor(_._length/4294967296)),l.push(_._length|0);l.length;)_._block(l.splice(0,16));return _.reset(),o}_f(_,l,o,c){if(_<=19)return l&o|~l&c;if(_<=39)return l^o^c;if(_<=59)return l&o|l&c|o&c;if(_<=79)return l^o^c}_S(_,l){return l<<_|l>>>32-_}_block(_){const l=this,o=l._h,c=Array(80);for(let r=0;r<16;r++)c[r]=_[r];let d=o[0],m=o[1],h=o[2],s=o[3],a=o[4];for(let r=0;r<=79;r++){r>=16&&(c[r]=l._S(1,c[r-3]^c[r-8]^c[r-14]^c[r-16]));const n=l._S(5,d)+l._f(r,m,h,s)+a+c[r]+l._key[Math.floor(r/20)]|0;a=s,s=h,h=l._S(30,m),m=d,d=n}o[0]=o[0]+d|0,o[1]=o[1]+m|0,o[2]=o[2]+h|0,o[3]=o[3]+s|0,o[4]=o[4]+a|0}};const cipher={};cipher.aes=class{constructor(_){const l=this;l._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],l._tables[0][0][0]||l._precompute();const o=l._tables[0][4],c=l._tables[1],d=_.length;let m,h,s,a=1;if(d!==4&&d!==6&&d!==8)throw new Error("invalid aes key size");for(l._key=[h=_.slice(0),s=[]],m=d;m<4*d+28;m++){let r=h[m-1];(m%d===0||d===8&&m%d===4)&&(r=o[r>>>24]<<24^o[r>>16&255]<<16^o[r>>8&255]<<8^o[r&255],m%d===0&&(r=r<<8^r>>>24^a<<24,a=a<<1^(a>>7)*283)),h[m]=h[m-d]^r}for(let r=0;m;r++,m--){const n=h[r&3?m:m-4];m<=4||r<4?s[r]=n:s[r]=c[0][o[n>>>24]]^c[1][o[n>>16&255]]^c[2][o[n>>8&255]]^c[3][o[n&255]]}}encrypt(_){return this._crypt(_,0)}decrypt(_){return this._crypt(_,1)}_precompute(){const _=this._tables[0],l=this._tables[1],o=_[4],c=l[4],d=[],m=[];let h,s,a,r;for(let n=0;n<256;n++)m[(d[n]=n<<1^(n>>7)*283)^n]=n;for(let n=h=0;!o[n];n^=s||1,h=m[h]||1){let t=h^h<<1^h<<2^h<<3^h<<4;t=t>>8^t&255^99,o[n]=t,c[t]=n,r=d[a=d[s=d[n]]];let i=r*16843009^a*65537^s*257^n*16843008,u=d[t]*257^t*16843008;for(let f=0;f<4;f++)_[f][n]=u=u<<24^u>>>8,l[f][t]=i=i<<24^i>>>8}for(let n=0;n<5;n++)_[n]=_[n].slice(0),l[n]=l[n].slice(0)}_crypt(_,l){if(_.length!==4)throw new Error("invalid aes block size");const o=this._key[l],c=o.length/4-2,d=[0,0,0,0],m=this._tables[l],h=m[0],s=m[1],a=m[2],r=m[3],n=m[4];let t=_[0]^o[0],i=_[l?3:1]^o[1],u=_[2]^o[2],f=_[l?1:3]^o[3],p=4,y,g,b;for(let E=0;E<c;E++)y=h[t>>>24]^s[i>>16&255]^a[u>>8&255]^r[f&255]^o[p],g=h[i>>>24]^s[u>>16&255]^a[f>>8&255]^r[t&255]^o[p+1],b=h[u>>>24]^s[f>>16&255]^a[t>>8&255]^r[i&255]^o[p+2],f=h[f>>>24]^s[t>>16&255]^a[i>>8&255]^r[u&255]^o[p+3],p+=4,t=y,i=g,u=b;for(let E=0;E<4;E++)d[l?3&-E:E]=n[t>>>24]<<24^n[i>>16&255]<<16^n[u>>8&255]<<8^n[f&255]^o[p++],y=t,t=i,i=u,u=f,f=y;return d}};const random={getRandomValues(_){const l=new Uint32Array(_.buffer),o=c=>{let d=987654321;const m=4294967295;return function(){return d=36969*(d&65535)+(d>>16)&m,c=18e3*(c&65535)+(c>>16)&m,(((d<<16)+c&m)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let c=0,d;c<_.length;c+=4){const m=o((d||Math.random())*4294967296);d=m()*987654071,l[c/4]=m()*4294967296|0}return _}},mode={};mode.ctrGladman=class{constructor(_,l){this._prf=_,this._initIv=l,this._iv=l}reset(){this._iv=this._initIv}update(_){return this.calculate(this._prf,_,this._iv)}incWord(_){if((_>>24&255)===255){let l=_>>16&255,o=_>>8&255,c=_&255;l===255?(l=0,o===255?(o=0,c===255?c=0:++c):++o):++l,_=0,_+=l<<16,_+=o<<8,_+=c}else _+=1<<24;return _}incCounter(_){(_[0]=this.incWord(_[0]))===0&&(_[1]=this.incWord(_[1]))}calculate(_,l,o){let c;if(!(c=l.length))return[];const d=bitArray.bitLength(l);for(let m=0;m<c;m+=4){this.incCounter(o);const h=_.encrypt(o);l[m]^=h[0],l[m+1]^=h[1],l[m+2]^=h[2],l[m+3]^=h[3]}return bitArray.clamp(l,d)}};const misc={importKey(_){return new misc.hmacSha1(codec.bytes.toBits(_))},pbkdf2(_,l,o,c){if(o=o||1e4,c<0||o<0)throw new Error("invalid params to pbkdf2");const d=(c>>5)+1<<2;let m,h,s,a,r;const n=new ArrayBuffer(d),t=new DataView(n);let i=0;const u=bitArray;for(l=codec.bytes.toBits(l),r=1;i<(d||1);r++){for(m=h=_.encrypt(u.concat(l,[r])),s=1;s<o;s++)for(h=_.encrypt(h),a=0;a<h.length;a++)m[a]^=h[a];for(s=0;i<(d||1)&&s<m.length;s++)t.setInt32(i,m[s]),i+=4}return n.slice(0,c/8)}};misc.hmacSha1=class{constructor(_){const l=this,o=l._hash=hash.sha1,c=[[],[]];l._baseHash=[new o,new o];const d=l._baseHash[0].blockSize/32;_.length>d&&(_=new o().update(_).finalize());for(let m=0;m<d;m++)c[0][m]=_[m]^909522486,c[1][m]=_[m]^1549556828;l._baseHash[0].update(c[0]),l._baseHash[1].update(c[1]),l._resultHash=new o(l._baseHash[0])}reset(){const _=this;_._resultHash=new _._hash(_._baseHash[0]),_._updated=!1}update(_){const l=this;l._updated=!0,l._resultHash.update(_)}digest(){const _=this,l=_._resultHash.finalize(),o=new _._hash(_._baseHash[1]).update(l).finalize();return _.reset(),o}encrypt(_){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(_),this.digest(_)}};const GET_RANDOM_VALUES_SUPPORTED=typeof crypto!=UNDEFINED_TYPE&&typeof crypto.getRandomValues==FUNCTION_TYPE,ERR_INVALID_PASSWORD="Invalid password",ERR_INVALID_SIGNATURE="Invalid signature",ERR_ABORT_CHECK_PASSWORD="zipjs-abort-check-password";function getRandomValues(_){return GET_RANDOM_VALUES_SUPPORTED?crypto.getRandomValues(_):random.getRandomValues(_)}const BLOCK_LENGTH=16,RAW_FORMAT="raw",PBKDF2_ALGORITHM={name:"PBKDF2"},HASH_ALGORITHM={name:"HMAC"},HASH_FUNCTION="SHA-1",BASE_KEY_ALGORITHM=Object.assign({hash:HASH_ALGORITHM},PBKDF2_ALGORITHM),DERIVED_BITS_ALGORITHM=Object.assign({iterations:1e3,hash:{name:HASH_FUNCTION}},PBKDF2_ALGORITHM),DERIVED_BITS_USAGE=["deriveBits"],SALT_LENGTH=[8,12,16],KEY_LENGTH=[16,24,32],SIGNATURE_LENGTH=10,COUNTER_DEFAULT_VALUE=[0,0,0,0],CRYPTO_API_SUPPORTED=typeof crypto!=UNDEFINED_TYPE,subtle=CRYPTO_API_SUPPORTED&&crypto.subtle,SUBTLE_API_SUPPORTED=CRYPTO_API_SUPPORTED&&typeof subtle!=UNDEFINED_TYPE,codecBytes=codec.bytes,Aes=cipher.aes,CtrGladman=mode.ctrGladman,HmacSha1=misc.hmacSha1;let IMPORT_KEY_SUPPORTED=CRYPTO_API_SUPPORTED&&SUBTLE_API_SUPPORTED&&typeof subtle.importKey==FUNCTION_TYPE,DERIVE_BITS_SUPPORTED=CRYPTO_API_SUPPORTED&&SUBTLE_API_SUPPORTED&&typeof subtle.deriveBits==FUNCTION_TYPE;class AESDecryptionStream extends TransformStream{constructor({password:l,rawPassword:o,signed:c,encryptionStrength:d,checkPasswordOnly:m}){super({start(){Object.assign(this,{ready:new Promise(h=>this.resolveReady=h),password:encodePassword(l,o),signed:c,strength:d-1,pending:new Uint8Array})},async transform(h,s){const a=this,{password:r,strength:n,resolveReady:t,ready:i}=a;r?(await createDecryptionKeys(a,n,r,subarray(h,0,SALT_LENGTH[n]+2)),h=subarray(h,SALT_LENGTH[n]+2),m?s.error(new Error(ERR_ABORT_CHECK_PASSWORD)):t()):await i;const u=new Uint8Array(h.length-SIGNATURE_LENGTH-(h.length-SIGNATURE_LENGTH)%BLOCK_LENGTH);s.enqueue(append(a,h,u,0,SIGNATURE_LENGTH,!0))},async flush(h){const{signed:s,ctr:a,hmac:r,pending:n,ready:t}=this;if(r&&a){await t;const i=subarray(n,0,n.length-SIGNATURE_LENGTH),u=subarray(n,n.length-SIGNATURE_LENGTH);let f=new Uint8Array;if(i.length){const p=toBits(codecBytes,i);r.update(p);const y=a.update(p);f=fromBits(codecBytes,y)}if(s){const p=subarray(fromBits(codecBytes,r.digest()),0,SIGNATURE_LENGTH);for(let y=0;y<SIGNATURE_LENGTH;y++)if(p[y]!=u[y])throw new Error(ERR_INVALID_SIGNATURE)}h.enqueue(f)}}})}}class AESEncryptionStream extends TransformStream{constructor({password:l,rawPassword:o,encryptionStrength:c}){let d;super({start(){Object.assign(this,{ready:new Promise(m=>this.resolveReady=m),password:encodePassword(l,o),strength:c-1,pending:new Uint8Array})},async transform(m,h){const s=this,{password:a,strength:r,resolveReady:n,ready:t}=s;let i=new Uint8Array;a?(i=await createEncryptionKeys(s,r,a),n()):await t;const u=new Uint8Array(i.length+m.length-m.length%BLOCK_LENGTH);u.set(i,0),h.enqueue(append(s,m,u,i.length,0))},async flush(m){const{ctr:h,hmac:s,pending:a,ready:r}=this;if(s&&h){await r;let n=new Uint8Array;if(a.length){const t=h.update(toBits(codecBytes,a));s.update(t),n=fromBits(codecBytes,t)}d.signature=fromBits(codecBytes,s.digest()).slice(0,SIGNATURE_LENGTH),m.enqueue(concat(n,d.signature))}}}),d=this}}function append(_,l,o,c,d,m){const{ctr:h,hmac:s,pending:a}=_,r=l.length-d;a.length&&(l=concat(a,l),o=expand(o,r-r%BLOCK_LENGTH));let n;for(n=0;n<=r-BLOCK_LENGTH;n+=BLOCK_LENGTH){const t=toBits(codecBytes,subarray(l,n,n+BLOCK_LENGTH));m&&s.update(t);const i=h.update(t);m||s.update(i),o.set(fromBits(codecBytes,i),n+c)}return _.pending=subarray(l,n),o}async function createDecryptionKeys(_,l,o,c){const d=await createKeys$1(_,l,o,subarray(c,0,SALT_LENGTH[l])),m=subarray(c,SALT_LENGTH[l]);if(d[0]!=m[0]||d[1]!=m[1])throw new Error(ERR_INVALID_PASSWORD)}async function createEncryptionKeys(_,l,o){const c=getRandomValues(new Uint8Array(SALT_LENGTH[l])),d=await createKeys$1(_,l,o,c);return concat(c,d)}async function createKeys$1(_,l,o,c){_.password=null;const d=await importKey(RAW_FORMAT,o,BASE_KEY_ALGORITHM,!1,DERIVED_BITS_USAGE),m=await deriveBits(Object.assign({salt:c},DERIVED_BITS_ALGORITHM),d,8*(KEY_LENGTH[l]*2+2)),h=new Uint8Array(m),s=toBits(codecBytes,subarray(h,0,KEY_LENGTH[l])),a=toBits(codecBytes,subarray(h,KEY_LENGTH[l],KEY_LENGTH[l]*2)),r=subarray(h,KEY_LENGTH[l]*2);return Object.assign(_,{keys:{key:s,authentication:a,passwordVerification:r},ctr:new CtrGladman(new Aes(s),Array.from(COUNTER_DEFAULT_VALUE)),hmac:new HmacSha1(a)}),r}async function importKey(_,l,o,c,d){if(IMPORT_KEY_SUPPORTED)try{return await subtle.importKey(_,l,o,c,d)}catch{return IMPORT_KEY_SUPPORTED=!1,misc.importKey(l)}else return misc.importKey(l)}async function deriveBits(_,l,o){if(DERIVE_BITS_SUPPORTED)try{return await subtle.deriveBits(_,l,o)}catch{return DERIVE_BITS_SUPPORTED=!1,misc.pbkdf2(l,_.salt,DERIVED_BITS_ALGORITHM.iterations,o)}else return misc.pbkdf2(l,_.salt,DERIVED_BITS_ALGORITHM.iterations,o)}function encodePassword(_,l){return l===UNDEFINED_VALUE?encodeText(_):l}function concat(_,l){let o=_;return _.length+l.length&&(o=new Uint8Array(_.length+l.length),o.set(_,0),o.set(l,_.length)),o}function expand(_,l){if(l&&l>_.length){const o=_;_=new Uint8Array(l),_.set(o,0)}return _}function subarray(_,l,o){return _.subarray(l,o)}function fromBits(_,l){return _.fromBits(l)}function toBits(_,l){return _.toBits(l)}const HEADER_LENGTH=12;class ZipCryptoDecryptionStream extends TransformStream{constructor({password:l,passwordVerification:o,checkPasswordOnly:c}){super({start(){Object.assign(this,{password:l,passwordVerification:o}),createKeys(this,l)},transform(d,m){const h=this;if(h.password){const s=decrypt(h,d.subarray(0,HEADER_LENGTH));if(h.password=null,s.at(-1)!=h.passwordVerification)throw new Error(ERR_INVALID_PASSWORD);d=d.subarray(HEADER_LENGTH)}c?m.error(new Error(ERR_ABORT_CHECK_PASSWORD)):m.enqueue(decrypt(h,d))}})}}class ZipCryptoEncryptionStream extends TransformStream{constructor({password:l,passwordVerification:o}){super({start(){Object.assign(this,{password:l,passwordVerification:o}),createKeys(this,l)},transform(c,d){const m=this;let h,s;if(m.password){m.password=null;const a=getRandomValues(new Uint8Array(HEADER_LENGTH));a[HEADER_LENGTH-1]=m.passwordVerification,h=new Uint8Array(c.length+a.length),h.set(encrypt(m,a),0),s=HEADER_LENGTH}else h=new Uint8Array(c.length),s=0;h.set(encrypt(m,c),s),d.enqueue(h)}})}}function decrypt(_,l){const o=new Uint8Array(l.length);for(let c=0;c<l.length;c++)o[c]=getByte(_)^l[c],updateKeys(_,o[c]);return o}function encrypt(_,l){const o=new Uint8Array(l.length);for(let c=0;c<l.length;c++)o[c]=getByte(_)^l[c],updateKeys(_,l[c]);return o}function createKeys(_,l){const o=[305419896,591751049,878082192];Object.assign(_,{keys:o,crcKey0:new Crc32(o[0]),crcKey2:new Crc32(o[2])});for(let c=0;c<l.length;c++)updateKeys(_,l.charCodeAt(c))}function updateKeys(_,l){let[o,c,d]=_.keys;_.crcKey0.append([l]),o=~_.crcKey0.get(),c=getInt32(Math.imul(getInt32(c+getInt8(o)),134775813)+1),_.crcKey2.append([c>>>24]),d=~_.crcKey2.get(),_.keys=[o,c,d]}function getByte(_){const l=_.keys[2]|2;return getInt8(Math.imul(l,l^1)>>>8)}function getInt8(_){return _&255}function getInt32(_){return _&4294967295}const ERR_INVALID_UNCOMPRESSED_SIZE="Invalid uncompressed size",COMPRESSION_FORMAT="deflate-raw";class DeflateStream extends TransformStream{constructor(l,{chunkSize:o,CompressionStream:c,CompressionStreamNative:d}){super({});const{compressed:m,encrypted:h,useCompressionStream:s,zipCrypto:a,signed:r,level:n}=l,t=this;let i,u,f=super.readable;(!h||a)&&r&&(i=new Crc32Stream,f=pipeThrough(f,i)),m&&(f=pipeThroughCommpressionStream(f,s,{level:n,chunkSize:o},d,c)),h&&(a?f=pipeThrough(f,new ZipCryptoEncryptionStream(l)):(u=new AESEncryptionStream(l),f=pipeThrough(f,u))),setReadable(t,f,()=>{let p;h&&!a&&(p=u.signature),(!h||a)&&r&&(p=new DataView(i.value.buffer).getUint32(0)),t.signature=p})}}class InflateStream extends TransformStream{constructor(l,{chunkSize:o,DecompressionStream:c,DecompressionStreamNative:d}){super({});const{zipCrypto:m,encrypted:h,signed:s,signature:a,compressed:r,useCompressionStream:n}=l;let t,i,u=super.readable;h&&(m?u=pipeThrough(u,new ZipCryptoDecryptionStream(l)):(i=new AESDecryptionStream(l),u=pipeThrough(u,i))),r&&(u=pipeThroughCommpressionStream(u,n,{chunkSize:o},d,c)),(!h||m)&&s&&(t=new Crc32Stream,u=pipeThrough(u,t)),setReadable(this,u,()=>{if((!h||m)&&s){const f=new DataView(t.value.buffer);if(a!=f.getUint32(0,!1))throw new Error(ERR_INVALID_SIGNATURE)}})}}function setReadable(_,l,o){l=pipeThrough(l,new TransformStream({flush:o})),Object.defineProperty(_,"readable",{get(){return l}})}function pipeThroughCommpressionStream(_,l,o,c,d){try{const m=l&&c?c:d;_=pipeThrough(_,new m(COMPRESSION_FORMAT,o))}catch(m){if(l)_=pipeThrough(_,new d(COMPRESSION_FORMAT,o));else throw m}return _}function pipeThrough(_,l){return _.pipeThrough(l)}const MESSAGE_EVENT_TYPE="message",MESSAGE_START="start",MESSAGE_PULL="pull",MESSAGE_DATA="data",MESSAGE_ACK_DATA="ack",MESSAGE_CLOSE="close",CODEC_DEFLATE="deflate",CODEC_INFLATE="inflate";class CodecStream extends TransformStream{constructor(l,o){super({});const c=this,{codecType:d}=l;let m;d.startsWith(CODEC_DEFLATE)?m=DeflateStream:d.startsWith(CODEC_INFLATE)&&(m=InflateStream),c.outputSize=0;let h=0;const s=new m(l,o),a=super.readable,r=new TransformStream({transform(t,i){t&&t.length&&(h+=t.length,i.enqueue(t))},flush(){Object.assign(c,{inputSize:h})}}),n=new TransformStream({transform(t,i){if(t&&t.length&&(i.enqueue(t),c.outputSize+=t.length,l.outputSize&&c.outputSize>l.outputSize))throw new Error(ERR_INVALID_UNCOMPRESSED_SIZE)},flush(){const{signature:t}=s;Object.assign(c,{signature:t,inputSize:h})}});Object.defineProperty(c,"readable",{get(){return a.pipeThrough(r).pipeThrough(s).pipeThrough(n)}})}}class ChunkStream extends TransformStream{constructor(l){let o;super({transform:c,flush(d){o&&o.length&&d.enqueue(o)}});function c(d,m){if(o){const h=new Uint8Array(o.length+d.length);h.set(o),h.set(d,o.length),d=h,o=null}d.length>l?(m.enqueue(d.slice(0,l)),c(d.slice(l),m)):o=d}}}let WEB_WORKERS_SUPPORTED=typeof Worker!=UNDEFINED_TYPE;class CodecWorker{constructor(l,{readable:o,writable:c},{options:d,config:m,streamOptions:h,useWebWorkers:s,transferStreams:a,scripts:r},n){const{signal:t}=h;return Object.assign(l,{busy:!0,readable:o.pipeThrough(new ChunkStream(m.chunkSize)).pipeThrough(new ProgressWatcherStream(h),{signal:t}),writable:c,options:Object.assign({},d),scripts:r,transferStreams:a,terminate(){return new Promise(i=>{const{worker:u,busy:f}=l;u?(f?l.resolveTerminated=i:(u.terminate(),i()),l.interface=null):i()})},onTaskFinished(){const{resolveTerminated:i}=l;i&&(l.resolveTerminated=null,l.terminated=!0,l.worker.terminate(),i()),l.busy=!1,n(l)}}),(s&&WEB_WORKERS_SUPPORTED?createWebWorkerInterface:createWorkerInterface)(l,m)}}class ProgressWatcherStream extends TransformStream{constructor({onstart:l,onprogress:o,size:c,onend:d}){let m=0;super({async start(){l&&await callHandler(l,c)},async transform(h,s){m+=h.length,o&&await callHandler(o,m,c),s.enqueue(h)},async flush(){d&&await callHandler(d,m)}})}}async function callHandler(_,...l){try{await _(...l)}catch{}}function createWorkerInterface(_,l){return{run:()=>runWorker$1(_,l)}}function createWebWorkerInterface(_,l){const{baseURL:o,chunkSize:c}=l;if(!_.interface){let d;try{d=getWebWorker(_.scripts[0],o,_)}catch{return WEB_WORKERS_SUPPORTED=!1,createWorkerInterface(_,l)}Object.assign(_,{worker:d,interface:{run:()=>runWebWorker(_,{chunkSize:c})}})}return _.interface}async function runWorker$1({options:_,readable:l,writable:o,onTaskFinished:c},d){let m;try{m=new CodecStream(_,d),await l.pipeThrough(m).pipeTo(o,{preventClose:!0,preventAbort:!0});const{signature:h,inputSize:s,outputSize:a}=m;return{signature:h,inputSize:s,outputSize:a}}catch(h){throw m&&(h.outputSize=m.outputSize),h}finally{c()}}async function runWebWorker(_,l){let o,c;const d=new Promise((i,u)=>{o=i,c=u});Object.assign(_,{reader:null,writer:null,resolveResult:o,rejectResult:c,result:d});const{readable:m,options:h,scripts:s}=_,{writable:a,closed:r}=watchClosedStream(_.writable),n=sendMessage({type:MESSAGE_START,scripts:s.slice(1),options:h,config:l,readable:m,writable:a},_);n||Object.assign(_,{reader:m.getReader(),writer:a.getWriter()});const t=await d;return n||await a.getWriter().close(),await r,t}function watchClosedStream(_){let l;const o=new Promise(d=>l=d);return{writable:new WritableStream({async write(d){const m=_.getWriter();await m.ready,await m.write(d),m.releaseLock()},close(){l()},abort(d){return _.getWriter().abort(d)}}),closed:o}}let classicWorkersSupported=!0,transferStreamsSupported=!0;function getWebWorker(_,l,o){const c={type:"module"};let d,m;typeof _==FUNCTION_TYPE&&(_=_());try{d=new URL(_,l)}catch{d=_}if(classicWorkersSupported)try{m=new Worker(d)}catch{classicWorkersSupported=!1,m=new Worker(d,c)}else m=new Worker(d,c);return m.addEventListener(MESSAGE_EVENT_TYPE,h=>onMessage(h,o)),m}function sendMessage(_,{worker:l,writer:o,onTaskFinished:c,transferStreams:d}){try{const{value:m,readable:h,writable:s}=_,a=[];if(m&&(m.byteLength<m.buffer.byteLength?_.value=m.buffer.slice(0,m.byteLength):_.value=m.buffer,a.push(_.value)),d&&transferStreamsSupported?(h&&a.push(h),s&&a.push(s)):_.readable=_.writable=null,a.length)try{return l.postMessage(_,a),!0}catch{transferStreamsSupported=!1,_.readable=_.writable=null,l.postMessage(_)}else l.postMessage(_)}catch(m){throw o&&o.releaseLock(),c(),m}}async function onMessage({data:_},l){const{type:o,value:c,messageId:d,result:m,error:h}=_,{reader:s,writer:a,resolveResult:r,rejectResult:n,onTaskFinished:t}=l;try{if(h){const{message:u,stack:f,code:p,name:y,outputSize:g}=h,b=new Error(u);Object.assign(b,{stack:f,code:p,name:y,outputSize:g}),i(b)}else{if(o==MESSAGE_PULL){const{value:u,done:f}=await s.read();sendMessage({type:MESSAGE_DATA,value:u,done:f,messageId:d},l)}o==MESSAGE_DATA&&(await a.ready,await a.write(new Uint8Array(c)),sendMessage({type:MESSAGE_ACK_DATA,messageId:d},l)),o==MESSAGE_CLOSE&&i(null,m)}}catch(u){sendMessage({type:MESSAGE_CLOSE,messageId:d},l),i(u)}function i(u,f){u?n(u):r(f),a&&a.releaseLock(),t()}}let pool=[];const pendingRequests=[];let indexWorker=0;async function runWorker(_,l){const{options:o,config:c}=l,{transferStreams:d,useWebWorkers:m,useCompressionStream:h,codecType:s,compressed:a,signed:r,encrypted:n}=o,{workerScripts:t,maxWorkers:i}=c;l.transferStreams=d||d===UNDEFINED_VALUE;const u=!a&&!r&&!n&&!l.transferStreams;return l.useWebWorkers=!u&&(m||m===UNDEFINED_VALUE&&c.useWebWorkers),l.scripts=l.useWebWorkers&&t?t[s]:[],o.useCompressionStream=h||h===UNDEFINED_VALUE&&c.useCompressionStream,(await f()).run();async function f(){const y=pool.find(g=>!g.busy);if(y)return clearTerminateTimeout(y),new CodecWorker(y,_,l,p);if(pool.length<i){const g={indexWorker};return indexWorker++,pool.push(g),new CodecWorker(g,_,l,p)}else return new Promise(g=>pendingRequests.push({resolve:g,stream:_,workerOptions:l}))}function p(y){if(pendingRequests.length){const[{resolve:g,stream:b,workerOptions:E}]=pendingRequests.splice(0,1);g(new CodecWorker(y,b,E,p))}else y.worker?(clearTerminateTimeout(y),terminateWorker(y,l)):pool=pool.filter(g=>g!=y)}}function terminateWorker(_,l){const{config:o}=l,{terminateWorkerTimeout:c}=o;Number.isFinite(c)&&c>=0&&(_.terminated?_.terminated=!1:_.terminateTimeout=setTimeout(async()=>{pool=pool.filter(d=>d!=_);try{await _.terminate()}catch{}},c))}function clearTerminateTimeout(_){const{terminateTimeout:l}=_;l&&(clearTimeout(l),_.terminateTimeout=null)}function e(_,l={}){const o=`const{Array:e,Object:t,Number:n,Math:r,Error:s,Uint8Array:i,Uint16Array:o,Uint32Array:c,Int32Array:f,Map:a,DataView:l,Promise:u,TextEncoder:w,crypto:h,postMessage:d,TransformStream:p,ReadableStream:y,WritableStream:m,CompressionStream:b,DecompressionStream:g}=self,k=void 0,v="undefined",S="function";class z{constructor(e){return class extends p{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}const C=[];for(let e=0;256>e;e++){let t=e;for(let e=0;8>e;e++)1&t?t=t>>>1^3988292384:t>>>=1;C[e]=t}class x{constructor(e){this.t=e||-1}append(e){let t=0|this.t;for(let n=0,r=0|e.length;r>n;n++)t=t>>>8^C[255&(t^e[n])];this.t=t}get(){return~this.t}}class A extends p{constructor(){let e;const t=new x;super({transform(e,n){t.append(e),n.enqueue(e)},flush(){const n=new i(4);new l(n.buffer).setUint32(0,t.get()),e.value=n}}),e=this}}const I={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=I.i(n);return 32===r?e.concat(t):I.o(t,r,0|n,e.slice(0,e.length-1))},l(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+I.i(n)},u(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,r.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=I.h(t,e[n-1]&2147483648>>t-1,1)),e},h:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,i:e=>r.round(e/1099511627776)||32,o(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let s=0;s<e.length;s++)r.push(n|e[s]>>>t),n=e[s]<<32-t;const s=e.length?e[e.length-1]:0,i=I.i(s);return r.push(I.h(t+i&31,t+i>32?n:r.pop(),1)),r}},_={bytes:{p(e){const t=I.l(e)/8,n=new i(t);let r;for(let s=0;t>s;s++)3&s||(r=e[s/4]),n[s]=r>>>24,r<<=8;return n},m(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3&~n||(t.push(r),r=0);return 3&n&&t.push(I.h(8*(3&n),r)),t}}},P=class{constructor(e){const t=this;t.blockSize=512,t.k=[1732584193,4023233417,2562383102,271733878,3285377520],t.v=[1518500249,1859775393,2400959708,3395469782],e?(t.S=e.S.slice(0),t.C=e.C.slice(0),t.A=e.A):t.reset()}reset(){const e=this;return e.S=e.k.slice(0),e.C=[],e.A=0,e}update(e){const t=this;"string"==typeof e&&(e=_.I.m(e));const n=t.C=I.concat(t.C,e),r=t.A,i=t.A=r+I.l(e);if(i>9007199254740991)throw new s("Cannot hash more than 2^53 - 1 bits");const o=new c(n);let f=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);i>=e;e+=t.blockSize)t._(o.subarray(16*f,16*(f+1))),f+=1;return n.splice(0,16*f),t}P(){const e=this;let t=e.C;const n=e.S;t=I.concat(t,[I.h(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(r.floor(e.A/4294967296)),t.push(0|e.A);t.length;)e._(t.splice(0,16));return e.reset(),n}D(e,t,n,r){return e>19?e>39?e>59?e>79?void 0:t^n^r:t&n|t&r|n&r:t^n^r:t&n|~t&r}V(e,t){return t<<e|t>>>32-e}_(t){const n=this,s=n.S,i=e(80);for(let e=0;16>e;e++)i[e]=t[e];let o=s[0],c=s[1],f=s[2],a=s[3],l=s[4];for(let e=0;79>=e;e++){16>e||(i[e]=n.V(1,i[e-3]^i[e-8]^i[e-14]^i[e-16]));const t=n.V(5,o)+n.D(e,c,f,a)+l+i[e]+n.v[r.floor(e/20)]|0;l=a,a=f,f=n.V(30,c),c=o,o=t}s[0]=s[0]+o|0,s[1]=s[1]+c|0,s[2]=s[2]+f|0,s[3]=s[3]+a|0,s[4]=s[4]+l|0}},D={getRandomValues(e){const t=new c(e.buffer),n=e=>{let t=987654321;const n=4294967295;return()=>(t=36969*(65535&t)+(t>>16)&n,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(r.random()>.5?1:-1))};for(let s,i=0;i<e.length;i+=4){const e=n(4294967296*(s||r.random()));s=987654071*e(),t[i/4]=4294967296*e()|0}return e}},V={importKey:e=>new V.R(_.bytes.m(e)),B(e,t,n,r){if(n=n||1e4,0>r||0>n)throw new s("invalid params to pbkdf2");const i=1+(r>>5)<<2;let o,c,f,a,u;const w=new ArrayBuffer(i),h=new l(w);let d=0;const p=I;for(t=_.bytes.m(t),u=1;(i||1)>d;u++){for(o=c=e.encrypt(p.concat(t,[u])),f=1;n>f;f++)for(c=e.encrypt(c),a=0;a<c.length;a++)o[a]^=c[a];for(f=0;(i||1)>d&&f<o.length;f++)h.setInt32(d,o[f]),d+=4}return w.slice(0,r/8)},R:class{constructor(e){const t=this,n=t.M=P,r=[[],[]];t.U=[new n,new n];const s=t.U[0].blockSize/32;e.length>s&&(e=(new n).update(e).P());for(let t=0;s>t;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t.U[0].update(r[0]),t.U[1].update(r[1]),t.K=new n(t.U[0])}reset(){const e=this;e.K=new e.M(e.U[0]),e.N=!1}update(e){this.N=!0,this.K.update(e)}digest(){const e=this,t=e.K.P(),n=new e.M(e.U[1]).update(t).P();return e.reset(),n}encrypt(e){if(this.N)throw new s("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},R=typeof h!=v&&typeof h.getRandomValues==S,B="Invalid password",E="Invalid signature",M="zipjs-abort-check-password";function U(e){return R?h.getRandomValues(e):D.getRandomValues(e)}const K=16,N={name:"PBKDF2"},O=t.assign({hash:{name:"HMAC"}},N),T=t.assign({iterations:1e3,hash:{name:"SHA-1"}},N),W=["deriveBits"],j=[8,12,16],H=[16,24,32],L=10,F=[0,0,0,0],q=typeof h!=v,G=q&&h.subtle,J=q&&typeof G!=v,Q=_.bytes,X=class{constructor(e){const t=this;t.O=[[[],[],[],[],[]],[[],[],[],[],[]]],t.O[0][0][0]||t.T();const n=t.O[0][4],r=t.O[1],i=e.length;let o,c,f,a=1;if(4!==i&&6!==i&&8!==i)throw new s("invalid aes key size");for(t.v=[c=e.slice(0),f=[]],o=i;4*i+28>o;o++){let e=c[o-1];(o%i===0||8===i&&o%i===4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],o%i===0&&(e=e<<8^e>>>24^a<<24,a=a<<1^283*(a>>7))),c[o]=c[o-i]^e}for(let e=0;o;e++,o--){const t=c[3&e?o:o-4];f[e]=4>=o||4>e?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this.W(e,0)}decrypt(e){return this.W(e,1)}T(){const e=this.O[0],t=this.O[1],n=e[4],r=t[4],s=[],i=[];let o,c,f,a;for(let e=0;256>e;e++)i[(s[e]=e<<1^283*(e>>7))^e]=e;for(let l=o=0;!n[l];l^=c||1,o=i[o]||1){let i=o^o<<1^o<<2^o<<3^o<<4;i=i>>8^255&i^99,n[l]=i,r[i]=l,a=s[f=s[c=s[l]]];let u=16843009*a^65537*f^257*c^16843008*l,w=257*s[i]^16843008*i;for(let n=0;4>n;n++)e[n][l]=w=w<<24^w>>>8,t[n][i]=u=u<<24^u>>>8}for(let n=0;5>n;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}W(e,t){if(4!==e.length)throw new s("invalid aes block size");const n=this.v[t],r=n.length/4-2,i=[0,0,0,0],o=this.O[t],c=o[0],f=o[1],a=o[2],l=o[3],u=o[4];let w,h,d,p=e[0]^n[0],y=e[t?3:1]^n[1],m=e[2]^n[2],b=e[t?1:3]^n[3],g=4;for(let e=0;r>e;e++)w=c[p>>>24]^f[y>>16&255]^a[m>>8&255]^l[255&b]^n[g],h=c[y>>>24]^f[m>>16&255]^a[b>>8&255]^l[255&p]^n[g+1],d=c[m>>>24]^f[b>>16&255]^a[p>>8&255]^l[255&y]^n[g+2],b=c[b>>>24]^f[p>>16&255]^a[y>>8&255]^l[255&m]^n[g+3],g+=4,p=w,y=h,m=d;for(let e=0;4>e;e++)i[t?3&-e:e]=u[p>>>24]<<24^u[y>>16&255]<<16^u[m>>8&255]<<8^u[255&b]^n[g++],w=p,p=y,y=m,m=b,b=w;return i}},Y=class{constructor(e,t){this.j=e,this.H=t,this.L=t}reset(){this.L=this.H}update(e){return this.F(this.j,e,this.L)}q(e){if(255&~(e>>24))e+=1<<24;else{let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}return e}G(e){0===(e[0]=this.q(e[0]))&&(e[1]=this.q(e[1]))}F(e,t,n){let r;if(!(r=t.length))return[];const s=I.l(t);for(let s=0;r>s;s+=4){this.G(n);const r=e.encrypt(n);t[s]^=r[0],t[s+1]^=r[1],t[s+2]^=r[2],t[s+3]^=r[3]}return I.u(t,s)}},Z=V.R;let $=q&&J&&typeof G.importKey==S,ee=q&&J&&typeof G.deriveBits==S;class te extends p{constructor({password:e,rawPassword:n,signed:r,encryptionStrength:o,checkPasswordOnly:c}){super({start(){t.assign(this,{ready:new u(e=>this.J=e),password:ie(e,n),signed:r,X:o-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:o,J:f,ready:a}=n;r?(await(async(e,t,n,r)=>{const i=await se(e,t,n,ce(r,0,j[t])),o=ce(r,j[t]);if(i[0]!=o[0]||i[1]!=o[1])throw new s(B)})(n,o,r,ce(e,0,j[o]+2)),e=ce(e,j[o]+2),c?t.error(new s(M)):f()):await a;const l=new i(e.length-L-(e.length-L)%K);t.enqueue(re(n,e,l,0,L,!0))},async flush(e){const{signed:t,Y:n,Z:r,pending:o,ready:c}=this;if(r&&n){await c;const f=ce(o,0,o.length-L),a=ce(o,o.length-L);let l=new i;if(f.length){const e=ae(Q,f);r.update(e);const t=n.update(e);l=fe(Q,t)}if(t){const e=ce(fe(Q,r.digest()),0,L);for(let t=0;L>t;t++)if(e[t]!=a[t])throw new s(E)}e.enqueue(l)}}})}}class ne extends p{constructor({password:e,rawPassword:n,encryptionStrength:r}){let s;super({start(){t.assign(this,{ready:new u(e=>this.J=e),password:ie(e,n),X:r-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:s,J:o,ready:c}=n;let f=new i;r?(f=await(async(e,t,n)=>{const r=U(new i(j[t]));return oe(r,await se(e,t,n,r))})(n,s,r),o()):await c;const a=new i(f.length+e.length-e.length%K);a.set(f,0),t.enqueue(re(n,e,a,f.length,0))},async flush(e){const{Y:t,Z:n,pending:r,ready:o}=this;if(n&&t){await o;let c=new i;if(r.length){const e=t.update(ae(Q,r));n.update(e),c=fe(Q,e)}s.signature=fe(Q,n.digest()).slice(0,L),e.enqueue(oe(c,s.signature))}}}),s=this}}function re(e,t,n,r,s,o){const{Y:c,Z:f,pending:a}=e,l=t.length-s;let u;for(a.length&&(t=oe(a,t),n=((e,t)=>{if(t&&t>e.length){const n=e;(e=new i(t)).set(n,0)}return e})(n,l-l%K)),u=0;l-K>=u;u+=K){const e=ae(Q,ce(t,u,u+K));o&&f.update(e);const s=c.update(e);o||f.update(s),n.set(fe(Q,s),u+r)}return e.pending=ce(t,u),n}async function se(n,r,s,o){n.password=null;const c=await(async(e,t,n,r,s)=>{if(!$)return V.importKey(t);try{return await G.importKey("raw",t,n,!1,s)}catch(e){return $=!1,V.importKey(t)}})(0,s,O,0,W),f=await(async(e,t,n)=>{if(!ee)return V.B(t,e.salt,T.iterations,n);try{return await G.deriveBits(e,t,n)}catch(r){return ee=!1,V.B(t,e.salt,T.iterations,n)}})(t.assign({salt:o},T),c,8*(2*H[r]+2)),a=new i(f),l=ae(Q,ce(a,0,H[r])),u=ae(Q,ce(a,H[r],2*H[r])),w=ce(a,2*H[r]);return t.assign(n,{keys:{key:l,$:u,passwordVerification:w},Y:new Y(new X(l),e.from(F)),Z:new Z(u)}),w}function ie(e,t){return t===k?(e=>{if(typeof w==v){const t=new i((e=unescape(encodeURIComponent(e))).length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new w).encode(e)})(e):t}function oe(e,t){let n=e;return e.length+t.length&&(n=new i(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function ce(e,t,n){return e.subarray(t,n)}function fe(e,t){return e.p(t)}function ae(e,t){return e.m(t)}class le extends p{constructor({password:e,passwordVerification:n,checkPasswordOnly:r}){super({start(){t.assign(this,{password:e,passwordVerification:n}),de(this,e)},transform(e,t){const n=this;if(n.password){const t=we(n,e.subarray(0,12));if(n.password=null,t.at(-1)!=n.passwordVerification)throw new s(B);e=e.subarray(12)}r?t.error(new s(M)):t.enqueue(we(n,e))}})}}class ue extends p{constructor({password:e,passwordVerification:n}){super({start(){t.assign(this,{password:e,passwordVerification:n}),de(this,e)},transform(e,t){const n=this;let r,s;if(n.password){n.password=null;const t=U(new i(12));t[11]=n.passwordVerification,r=new i(e.length+t.length),r.set(he(n,t),0),s=12}else r=new i(e.length),s=0;r.set(he(n,e),s),t.enqueue(r)}})}}function we(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=ye(e)^t[r],pe(e,n[r]);return n}function he(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=ye(e)^t[r],pe(e,t[r]);return n}function de(e,n){const r=[305419896,591751049,878082192];t.assign(e,{keys:r,ee:new x(r[0]),te:new x(r[2])});for(let t=0;t<n.length;t++)pe(e,n.charCodeAt(t))}function pe(e,t){let[n,s,i]=e.keys;e.ee.append([t]),n=~e.ee.get(),s=be(r.imul(be(s+me(n)),134775813)+1),e.te.append([s>>>24]),i=~e.te.get(),e.keys=[n,s,i]}function ye(e){const t=2|e.keys[2];return me(r.imul(t,1^t)>>>8)}function me(e){return 255&e}function be(e){return 4294967295&e}const ge="deflate-raw";class ke extends p{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:s,encrypted:i,useCompressionStream:o,zipCrypto:c,signed:f,level:a}=e,u=this;let w,h,d=super.readable;i&&!c||!f||(w=new A,d=Ce(d,w)),s&&(d=ze(d,o,{level:a,chunkSize:t},r,n)),i&&(c?d=Ce(d,new ue(e)):(h=new ne(e),d=Ce(d,h))),Se(u,d,()=>{let e;i&&!c&&(e=h.signature),i&&!c||!f||(e=new l(w.value.buffer).getUint32(0)),u.signature=e})}}class ve extends p{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:i,encrypted:o,signed:c,signature:f,compressed:a,useCompressionStream:u}=e;let w,h,d=super.readable;o&&(i?d=Ce(d,new le(e)):(h=new te(e),d=Ce(d,h))),a&&(d=ze(d,u,{chunkSize:t},r,n)),o&&!i||!c||(w=new A,d=Ce(d,w)),Se(this,d,()=>{if((!o||i)&&c){const e=new l(w.value.buffer);if(f!=e.getUint32(0,!1))throw new s(E)}})}}function Se(e,n,r){n=Ce(n,new p({flush:r})),t.defineProperty(e,"readable",{get:()=>n})}function ze(e,t,n,r,s){try{e=Ce(e,new(t&&r?r:s)(ge,n))}catch(r){if(!t)throw r;e=Ce(e,new s(ge,n))}return e}function Ce(e,t){return e.pipeThrough(t)}const xe="data",Ae="close";class Ie extends p{constructor(e,n){super({});const r=this,{codecType:i}=e;let o;i.startsWith("deflate")?o=ke:i.startsWith("inflate")&&(o=ve),r.outputSize=0;let c=0;const f=new o(e,n),a=super.readable,l=new p({transform(e,t){e&&e.length&&(c+=e.length,t.enqueue(e))},flush(){t.assign(r,{inputSize:c})}}),u=new p({transform(t,n){if(t&&t.length&&(n.enqueue(t),r.outputSize+=t.length,e.outputSize&&r.outputSize>e.outputSize))throw new s("Invalid uncompressed size")},flush(){const{signature:e}=f;t.assign(r,{signature:e,inputSize:c})}});t.defineProperty(r,"readable",{get:()=>a.pipeThrough(l).pipeThrough(f).pipeThrough(u)})}}class _e extends p{constructor(e){let t;super({transform:function n(r,s){if(t){const e=new i(t.length+r.length);e.set(t),e.set(r,t.length),r=e,t=null}r.length>e?(s.enqueue(r.slice(0,e)),n(r.slice(e),s)):t=r},flush(e){t&&t.length&&e.enqueue(t)}})}}const Pe=new a,De=new a;let Ve,Re=0,Be=!0;async function Ee(e){try{const{options:t,scripts:r,config:s}=e;if(r&&r.length)try{Be?importScripts.apply(k,r):await Me(r)}catch(e){Be=!1,await Me(r)}self.initCodec&&self.initCodec(),s.CompressionStreamNative=self.CompressionStream,s.DecompressionStreamNative=self.DecompressionStream,self.Deflate&&(s.CompressionStream=new z(self.Deflate)),self.Inflate&&(s.DecompressionStream=new z(self.Inflate));const i={highWaterMark:1},o=e.readable||new y({async pull(e){const t=new u(e=>Pe.set(Re,e));Ue({type:"pull",messageId:Re}),Re=(Re+1)%n.MAX_SAFE_INTEGER;const{value:r,done:s}=await t;e.enqueue(r),s&&e.close()}},i),c=e.writable||new m({async write(e){let t;const r=new u(e=>t=e);De.set(Re,t),Ue({type:xe,value:e,messageId:Re}),Re=(Re+1)%n.MAX_SAFE_INTEGER,await r}},i),f=new Ie(t,s);Ve=new AbortController;const{signal:a}=Ve;await o.pipeThrough(f).pipeThrough(new _e(s.chunkSize)).pipeTo(c,{signal:a,preventClose:!0,preventAbort:!0}),await c.getWriter().close();const{signature:l,inputSize:w,outputSize:h}=f;Ue({type:Ae,result:{signature:l,inputSize:w,outputSize:h}})}catch(e){e.outputSize=0,Ke(e)}}async function Me(e){for(const t of e)await import(t)}function Ue(e){let{value:t}=e;if(t)if(t.length)try{t=new i(t),e.value=t.buffer,d(e,[e.value])}catch(t){d(e)}else d(e);else d(e)}function Ke(e=new s("Unknown error")){const{message:t,stack:n,code:r,name:i,outputSize:o}=e;d({error:{message:t,stack:n,code:r,name:i,outputSize:o}})}addEventListener("message",({data:e})=>{const{type:t,messageId:n,value:r,done:s}=e;try{if("start"==t&&Ee(e),t==xe){const e=Pe.get(n);Pe.delete(n),e({value:new i(r),done:s})}if("ack"==t){const e=De.get(n);De.delete(n),e()}t==Ae&&Ve.abort()}catch(e){Ke(e)}});const Ne=-2;function Oe(t){return Te(t.map(([t,n])=>new e(t).fill(n,0,t)))}function Te(t){return t.reduce((t,n)=>t.concat(e.isArray(n)?Te(n):n),[])}const We=[0,1,2,3].concat(...Oe([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function je(){const e=this;function t(e,t){let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.ne=n=>{const s=e.re,i=e.ie.se,o=e.ie.oe;let c,f,a,l=-1;for(n.ce=0,n.fe=573,c=0;o>c;c++)0!==s[2*c]?(n.ae[++n.ce]=l=c,n.le[c]=0):s[2*c+1]=0;for(;2>n.ce;)a=n.ae[++n.ce]=2>l?++l:0,s[2*a]=1,n.le[a]=0,n.ue--,i&&(n.we-=i[2*a+1]);for(e.he=l,c=r.floor(n.ce/2);c>=1;c--)n.de(s,c);a=o;do{c=n.ae[1],n.ae[1]=n.ae[n.ce--],n.de(s,1),f=n.ae[1],n.ae[--n.fe]=c,n.ae[--n.fe]=f,s[2*a]=s[2*c]+s[2*f],n.le[a]=r.max(n.le[c],n.le[f])+1,s[2*c+1]=s[2*f+1]=a,n.ae[1]=a++,n.de(s,1)}while(n.ce>=2);n.ae[--n.fe]=n.ae[1],(t=>{const n=e.re,r=e.ie.se,s=e.ie.pe,i=e.ie.ye,o=e.ie.me;let c,f,a,l,u,w,h=0;for(l=0;15>=l;l++)t.be[l]=0;for(n[2*t.ae[t.fe]+1]=0,c=t.fe+1;573>c;c++)f=t.ae[c],l=n[2*n[2*f+1]+1]+1,l>o&&(l=o,h++),n[2*f+1]=l,f>e.he||(t.be[l]++,u=0,i>f||(u=s[f-i]),w=n[2*f],t.ue+=w*(l+u),r&&(t.we+=w*(r[2*f+1]+u)));if(0!==h){do{for(l=o-1;0===t.be[l];)l--;t.be[l]--,t.be[l+1]+=2,t.be[o]--,h-=2}while(h>0);for(l=o;0!==l;l--)for(f=t.be[l];0!==f;)a=t.ae[--c],a>e.he||(n[2*a+1]!=l&&(t.ue+=(l-n[2*a+1])*n[2*a],n[2*a+1]=l),f--)}})(n),((e,n,r)=>{const s=[];let i,o,c,f=0;for(i=1;15>=i;i++)s[i]=f=f+r[i-1]<<1;for(o=0;n>=o;o++)c=e[2*o+1],0!==c&&(e[2*o]=t(s[c]++,c))})(s,e.he,n.be)}}function He(e,t,n,r,s){const i=this;i.se=e,i.pe=t,i.ye=n,i.oe=r,i.me=s}je.ge=[0,1,2,3,4,5,6,7].concat(...Oe([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),je.ke=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],je.ve=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],je.Se=e=>256>e?We[e]:We[256+(e>>>7)],je.ze=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],je.Ce=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],je.xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],je.Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const Le=Oe([[144,8],[112,9],[24,7],[8,8]]);He.Ie=Te([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map((e,t)=>[e,Le[t]]));const Fe=Oe([[30,5]]);function qe(e,t,n,r,s){const i=this;i._e=e,i.Pe=t,i.De=n,i.Ve=r,i.Re=s}He.Be=Te([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map((e,t)=>[e,Fe[t]])),He.Ee=new He(He.Ie,je.ze,257,286,15),He.Me=new He(He.Be,je.Ce,0,30,15),He.Ue=new He(null,je.xe,0,19,7);const Ge=[new qe(0,0,0,0,0),new qe(4,4,8,4,1),new qe(4,5,16,8,1),new qe(4,6,32,32,1),new qe(4,4,16,16,2),new qe(8,16,32,32,2),new qe(8,16,128,128,2),new qe(8,32,128,256,2),new qe(32,128,258,1024,2),new qe(32,258,258,4096,2)],Je=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],Qe=113,Xe=666,Ye=262;function Ze(e,t,n,r){const s=e[2*t],i=e[2*n];return i>s||s==i&&r[t]<=r[n]}function $e(){const e=this;let t,n,s,c,f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z,C,x,A,I,_,P,D,V,R,B,E,M,U;const K=new je,N=new je,O=new je;let T,W,j,H,L,F;function q(){let t;for(t=0;286>t;t++)E[2*t]=0;for(t=0;30>t;t++)M[2*t]=0;for(t=0;19>t;t++)U[2*t]=0;E[512]=1,e.ue=e.we=0,W=j=0}function G(e,t){let n,r=-1,s=e[1],i=0,o=7,c=4;0===s&&(o=138,c=3),e[2*(t+1)+1]=65535;for(let f=0;t>=f;f++)n=s,s=e[2*(f+1)+1],++i<o&&n==s||(c>i?U[2*n]+=i:0!==n?(n!=r&&U[2*n]++,U[32]++):i>10?U[36]++:U[34]++,i=0,r=n,0===s?(o=138,c=3):n==s?(o=6,c=3):(o=7,c=4))}function J(t){e.Ke[e.pending++]=t}function Q(e){J(255&e),J(e>>>8&255)}function X(e,t){let n;const r=t;F>16-r?(n=e,L|=n<<F&65535,Q(L),L=n>>>16-F,F+=r-16):(L|=e<<F&65535,F+=r)}function Y(e,t){const n=2*e;X(65535&t[n],65535&t[n+1])}function Z(e,t){let n,r,s=-1,i=e[1],o=0,c=7,f=4;for(0===i&&(c=138,f=3),n=0;t>=n;n++)if(r=i,i=e[2*(n+1)+1],++o>=c||r!=i){if(f>o)do{Y(r,U)}while(0!==--o);else 0!==r?(r!=s&&(Y(r,U),o--),Y(16,U),X(o-3,2)):o>10?(Y(18,U),X(o-11,7)):(Y(17,U),X(o-3,3));o=0,s=r,0===i?(c=138,f=3):r==i?(c=6,f=3):(c=7,f=4)}}function $(){16==F?(Q(L),L=0,F=0):8>F||(J(255&L),L>>>=8,F-=8)}function ee(t,n){let s,i,o;if(e.Ne[W]=t,e.Oe[W]=255&n,W++,0===t?E[2*n]++:(j++,t--,E[2*(je.ge[n]+256+1)]++,M[2*je.Se(t)]++),!(8191&W)&&D>2){for(s=8*W,i=C-k,o=0;30>o;o++)s+=M[2*o]*(5+je.Ce[o]);if(s>>>=3,j<r.floor(W/2)&&s<r.floor(i/2))return!0}return W==T-1}function te(t,n){let r,s,i,o,c=0;if(0!==W)do{r=e.Ne[c],s=e.Oe[c],c++,0===r?Y(s,t):(i=je.ge[s],Y(i+256+1,t),o=je.ze[i],0!==o&&(s-=je.ke[i],X(s,o)),r--,i=je.Se(r),Y(i,n),o=je.Ce[i],0!==o&&(r-=je.ve[i],X(r,o)))}while(W>c);Y(256,t),H=t[513]}function ne(){F>8?Q(L):F>0&&J(255&L),L=0,F=0}function re(t,n,r){X(0+(r?1:0),3),((t,n)=>{ne(),H=8,Q(n),Q(~n),e.Ke.set(u.subarray(t,t+n),e.pending),e.pending+=n})(t,n)}function se(n){((t,n,r)=>{let s,i,o=0;D>0?(K.ne(e),N.ne(e),o=(()=>{let t;for(G(E,K.he),G(M,N.he),O.ne(e),t=18;t>=3&&0===U[2*je.Ae[t]+1];t--);return e.ue+=14+3*(t+1),t})(),s=e.ue+3+7>>>3,i=e.we+3+7>>>3,i>s||(s=i)):s=i=n+5,n+4>s||-1==t?i==s?(X(2+(r?1:0),3),te(He.Ie,He.Be)):(X(4+(r?1:0),3),((e,t,n)=>{let r;for(X(e-257,5),X(t-1,5),X(n-4,4),r=0;n>r;r++)X(U[2*je.Ae[r]+1],3);Z(E,e-1),Z(M,t-1)})(K.he+1,N.he+1,o+1),te(E,M)):re(t,n,r),q(),r&&ne()})(0>k?-1:k,C-k,n),k=C,t.Te()}function ie(){let e,n,r,s;do{if(s=w-A-C,0===s&&0===C&&0===A)s=f;else if(-1==s)s--;else if(C>=f+f-Ye){u.set(u.subarray(f,f+f),0),x-=f,C-=f,k-=f,e=y,r=e;do{n=65535&d[--r],d[r]=f>n?0:n-f}while(0!==--e);e=f,r=e;do{n=65535&h[--r],h[r]=f>n?0:n-f}while(0!==--e);s+=f}if(0===t.We)return;e=t.je(u,C+A,s),A+=e,3>A||(p=255&u[C],p=(p<<g^255&u[C+1])&b)}while(Ye>A&&0!==t.We)}function oe(e){let t,n,r=_,s=C,i=I;const o=C>f-Ye?C-(f-Ye):0;let c=B;const a=l,w=C+258;let d=u[s+i-1],p=u[s+i];R>I||(r>>=2),c>A&&(c=A);do{if(t=e,u[t+i]==p&&u[t+i-1]==d&&u[t]==u[s]&&u[++t]==u[s+1]){s+=2,t++;do{}while(u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&w>s);if(n=258-(w-s),s=w-258,n>i){if(x=e,i=n,n>=c)break;d=u[s+i-1],p=u[s+i]}}}while((e=65535&h[e&a])>o&&0!==--r);return i>A?A:i}e.le=[],e.be=[],e.ae=[],E=[],M=[],U=[],e.de=(t,n)=>{const r=e.ae,s=r[n];let i=n<<1;for(;i<=e.ce&&(i<e.ce&&Ze(t,r[i+1],r[i],e.le)&&i++,!Ze(t,s,r[i],e.le));)r[n]=r[i],n=i,i<<=1;r[n]=s},e.He=(t,S,x,W,j,G)=>(W||(W=8),j||(j=8),G||(G=0),t.Le=null,-1==S&&(S=6),1>j||j>9||8!=W||9>x||x>15||0>S||S>9||0>G||G>2?Ne:(t.Fe=e,a=x,f=1<<a,l=f-1,m=j+7,y=1<<m,b=y-1,g=r.floor((m+3-1)/3),u=new i(2*f),h=[],d=[],T=1<<j+6,e.Ke=new i(4*T),s=4*T,e.Ne=new o(T),e.Oe=new i(T),D=S,V=G,(t=>(t.qe=t.Ge=0,t.Le=null,e.pending=0,e.Je=0,n=Qe,c=0,K.re=E,K.ie=He.Ee,N.re=M,N.ie=He.Me,O.re=U,O.ie=He.Ue,L=0,F=0,H=8,q(),(()=>{w=2*f,d[y-1]=0;for(let e=0;y-1>e;e++)d[e]=0;P=Ge[D].Pe,R=Ge[D]._e,B=Ge[D].De,_=Ge[D].Ve,C=0,k=0,A=0,v=I=2,z=0,p=0})(),0))(t))),e.Qe=()=>42!=n&&n!=Qe&&n!=Xe?Ne:(e.Oe=null,e.Ne=null,e.Ke=null,d=null,h=null,u=null,e.Fe=null,n==Qe?-3:0),e.Xe=(e,t,n)=>{let r=0;return-1==t&&(t=6),0>t||t>9||0>n||n>2?Ne:(Ge[D].Re!=Ge[t].Re&&0!==e.qe&&(r=e.Ye(1)),D!=t&&(D=t,P=Ge[D].Pe,R=Ge[D]._e,B=Ge[D].De,_=Ge[D].Ve),V=n,r)},e.Ze=(e,t,r)=>{let s,i=r,o=0;if(!t||42!=n)return Ne;if(3>i)return 0;for(i>f-Ye&&(i=f-Ye,o=r-i),u.set(t.subarray(o,o+i),0),C=i,k=i,p=255&u[0],p=(p<<g^255&u[1])&b,s=0;i-3>=s;s++)p=(p<<g^255&u[s+2])&b,h[s&l]=d[p],d[p]=s;return 0},e.Ye=(r,i)=>{let o,w,m,_,R;if(i>4||0>i)return Ne;if(!r.$e||!r.et&&0!==r.We||n==Xe&&4!=i)return r.Le=Je[4],Ne;if(0===r.tt)return r.Le=Je[7],-5;var B;if(t=r,_=c,c=i,42==n&&(w=8+(a-8<<4)<<8,m=(D-1&255)>>1,m>3&&(m=3),w|=m<<6,0!==C&&(w|=32),w+=31-w%31,n=Qe,J((B=w)>>8&255),J(255&B)),0!==e.pending){if(t.Te(),0===t.tt)return c=-1,0}else if(0===t.We&&_>=i&&4!=i)return t.Le=Je[7],-5;if(n==Xe&&0!==t.We)return r.Le=Je[7],-5;if(0!==t.We||0!==A||0!=i&&n!=Xe){switch(R=-1,Ge[D].Re){case 0:R=(e=>{let n,r=65535;for(r>s-5&&(r=s-5);;){if(1>=A){if(ie(),0===A&&0==e)return 0;if(0===A)break}if(C+=A,A=0,n=k+r,(0===C||C>=n)&&(A=C-n,C=n,se(!1),0===t.tt))return 0;if(C-k>=f-Ye&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 1:R=(e=>{let n,r=0;for(;;){if(Ye>A){if(ie(),Ye>A&&0==e)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C),0===r||(C-r&65535)>f-Ye||2!=V&&(v=oe(r)),3>v)n=ee(0,255&u[C]),A--,C++;else if(n=ee(C-x,v-3),A-=v,v>P||3>A)C+=v,v=0,p=255&u[C],p=(p<<g^255&u[C+1])&b;else{v--;do{C++,p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C}while(0!==--v);C++}if(n&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 2:R=(e=>{let n,r,s=0;for(;;){if(Ye>A){if(ie(),Ye>A&&0==e)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C),I=v,S=x,v=2,0!==s&&P>I&&f-Ye>=(C-s&65535)&&(2!=V&&(v=oe(s)),5>=v&&(1==V||3==v&&C-x>4096)&&(v=2)),3>I||v>I)if(0!==z){if(n=ee(0,255&u[C-1]),n&&se(!1),C++,A--,0===t.tt)return 0}else z=1,C++,A--;else{r=C+A-3,n=ee(C-1-S,I-3),A-=I-1,I-=2;do{++C>r||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C)}while(0!==--I);if(z=0,v=2,C++,n&&(se(!1),0===t.tt))return 0}}return 0!==z&&(n=ee(0,255&u[C-1]),z=0),se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i)}if(2!=R&&3!=R||(n=Xe),0==R||2==R)return 0===t.tt&&(c=-1),0;if(1==R){if(1==i)X(2,3),Y(256,He.Ie),$(),9>1+H+10-F&&(X(2,3),Y(256,He.Ie),$()),H=7;else if(re(0,0,!1),3==i)for(o=0;y>o;o++)d[o]=0;if(t.Te(),0===t.tt)return c=-1,0}}return 4!=i?0:1}}function et(){const e=this;e.nt=0,e.rt=0,e.We=0,e.qe=0,e.tt=0,e.Ge=0}function tt(e){const t=new et,n=(o=e&&e.chunkSize?e.chunkSize:65536)+5*(r.floor(o/16383)+1);var o;const c=new i(n);let f=e?e.level:-1;void 0===f&&(f=-1),t.He(f),t.$e=c,this.append=(e,r)=>{let o,f,a=0,l=0,u=0;const w=[];if(e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,o=t.Ye(0),0!=o)throw new s("deflating: "+t.Le);t.rt&&(t.rt==n?w.push(new i(c)):w.push(c.subarray(0,t.rt))),u+=t.rt,r&&t.nt>0&&t.nt!=a&&(r(t.nt),a=t.nt)}while(t.We>0||0===t.tt);return w.length>1?(f=new i(u),w.forEach(e=>{f.set(e,l),l+=e.length})):f=w[0]?new i(w[0]):new i,f}},this.flush=()=>{let e,r,o=0,f=0;const a=[];do{if(t.rt=0,t.tt=n,e=t.Ye(4),1!=e&&0!=e)throw new s("deflating: "+t.Le);n-t.tt>0&&a.push(c.slice(0,t.rt)),f+=t.rt}while(t.We>0||0===t.tt);return t.Qe(),r=new i(f),a.forEach(e=>{r.set(e,o),o+=e.length}),r}}et.prototype={He(e,t){const n=this;return n.Fe=new $e,t||(t=15),n.Fe.He(n,e,t)},Ye(e){const t=this;return t.Fe?t.Fe.Ye(t,e):Ne},Qe(){const e=this;if(!e.Fe)return Ne;const t=e.Fe.Qe();return e.Fe=null,t},Xe(e,t){const n=this;return n.Fe?n.Fe.Xe(n,e,t):Ne},Ze(e,t){const n=this;return n.Fe?n.Fe.Ze(n,e,t):Ne},je(e,t,n){const r=this;let s=r.We;return s>n&&(s=n),0===s?0:(r.We-=s,e.set(r.et.subarray(r.nt,r.nt+s),t),r.nt+=s,r.qe+=s,s)},Te(){const e=this;let t=e.Fe.pending;t>e.tt&&(t=e.tt),0!==t&&(e.$e.set(e.Fe.Ke.subarray(e.Fe.Je,e.Fe.Je+t),e.rt),e.rt+=t,e.Fe.Je+=t,e.Ge+=t,e.tt-=t,e.Fe.pending-=t,0===e.Fe.pending&&(e.Fe.Je=0))}};const nt=-2,rt=-3,st=-5,it=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],ot=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],ct=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],ft=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],at=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],lt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],ut=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function wt(){let e,t,n,r,s,i;function o(e,t,o,c,f,a,l,u,w,h,d){let p,y,m,b,g,k,v,S,z,C,x,A,I,_,P;C=0,g=o;do{n[e[t+C]]++,C++,g--}while(0!==g);if(n[0]==o)return l[0]=-1,u[0]=0,0;for(S=u[0],k=1;15>=k&&0===n[k];k++);for(v=k,k>S&&(S=k),g=15;0!==g&&0===n[g];g--);for(m=g,S>g&&(S=g),u[0]=S,_=1<<k;g>k;k++,_<<=1)if(0>(_-=n[k]))return rt;if(0>(_-=n[g]))return rt;for(n[g]+=_,i[1]=k=0,C=1,I=2;0!==--g;)i[I]=k+=n[C],I++,C++;g=0,C=0;do{0!==(k=e[t+C])&&(d[i[k]++]=g),C++}while(++g<o);for(o=i[m],i[0]=g=0,C=0,b=-1,A=-S,s[0]=0,x=0,P=0;m>=v;v++)for(p=n[v];0!==p--;){for(;v>A+S;){if(b++,A+=S,P=m-A,P=P>S?S:P,(y=1<<(k=v-A))>p+1&&(y-=p+1,I=v,P>k))for(;++k<P&&(y<<=1)>n[++I];)y-=n[I];if(P=1<<k,h[0]+P>1440)return rt;s[b]=x=h[0],h[0]+=P,0!==b?(i[b]=g,r[0]=k,r[1]=S,k=g>>>A-S,r[2]=x-s[b-1]-k,w.set(r,3*(s[b-1]+k))):l[0]=x}for(r[1]=v-A,o>C?d[C]<c?(r[0]=256>d[C]?0:96,r[2]=d[C++]):(r[0]=a[d[C]-c]+16+64,r[2]=f[d[C++]-c]):r[0]=192,y=1<<v-A,k=g>>>A;P>k;k+=y)w.set(r,3*(x+k));for(k=1<<v-1;0!==(g&k);k>>>=1)g^=k;for(g^=k,z=(1<<A)-1;(g&z)!=i[b];)b--,A-=S,z=(1<<A)-1}return 0!==_&&1!=m?st:0}function c(o){let c;for(e||(e=[],t=[],n=new f(16),r=[],s=new f(15),i=new f(16)),t.length<o&&(t=[]),c=0;o>c;c++)t[c]=0;for(c=0;16>c;c++)n[c]=0;for(c=0;3>c;c++)r[c]=0;s.set(n.subarray(0,15),0),i.set(n.subarray(0,16),0)}this.st=(n,r,s,i,f)=>{let a;return c(19),e[0]=0,a=o(n,0,19,19,null,null,s,r,i,e,t),a==rt?f.Le="oversubscribed dynamic bit lengths tree":a!=st&&0!==r[0]||(f.Le="incomplete dynamic bit lengths tree",a=rt),a},this.it=(n,r,s,i,f,a,l,u,w)=>{let h;return c(288),e[0]=0,h=o(s,0,n,257,ft,at,a,i,u,e,t),0!=h||0===i[0]?(h==rt?w.Le="oversubscribed literal/length tree":-4!=h&&(w.Le="incomplete literal/length tree",h=rt),h):(c(288),h=o(s,n,r,0,lt,ut,l,f,u,e,t),0!=h||0===f[0]&&n>257?(h==rt?w.Le="oversubscribed distance tree":h==st?(w.Le="incomplete distance tree",h=rt):-4!=h&&(w.Le="empty distance tree with lengths",h=rt),h):0)}}function ht(){const e=this;let t,n,r,s,i=0,o=0,c=0,f=0,a=0,l=0,u=0,w=0,h=0,d=0;function p(e,t,n,r,s,i,o,c){let f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z;d=c.nt,p=c.We,w=o.ot,h=o.ct,y=o.write,m=y<o.read?o.read-y-1:o.end-y,b=it[e],g=it[t];do{for(;20>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(f=w&b,a=n,l=r,z=3*(l+f),0!==(u=a[z]))for(;;){if(w>>=a[z+1],h-=a[z+1],16&u){for(u&=15,k=a[z+2]+(w&it[u]),w>>=u,h-=u;15>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;for(f=w&g,a=s,l=i,z=3*(l+f),u=a[z];;){if(w>>=a[z+1],h-=a[z+1],16&u){for(u&=15;u>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(v=a[z+2]+(w&it[u]),w>>=u,h-=u,m-=k,v>y){S=y-v;do{S+=o.end}while(0>S);if(u=o.end-S,k>u){if(k-=u,y-S>0&&u>y-S)do{o.lt[y++]=o.lt[S++]}while(0!==--u);else o.lt.set(o.lt.subarray(S,S+u),y),y+=u,S+=u,u=0;S=0}}else S=y-v,y-S>0&&2>y-S?(o.lt[y++]=o.lt[S++],o.lt[y++]=o.lt[S++],k-=2):(o.lt.set(o.lt.subarray(S,S+2),y),y+=2,S+=2,k-=2);if(y-S>0&&k>y-S)do{o.lt[y++]=o.lt[S++]}while(0!==--k);else o.lt.set(o.lt.subarray(S,S+k),y),y+=k,S+=k,k=0;break}if(64&u)return c.Le="invalid distance code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,rt;f+=a[z+2],f+=w&it[u],z=3*(l+f),u=a[z]}break}if(64&u)return 32&u?(k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,1):(c.Le="invalid literal/length code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,rt);if(f+=a[z+2],f+=w&it[u],z=3*(l+f),0===(u=a[z])){w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--;break}}else w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--}while(m>=258&&p>=10);return k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,0}e.init=(e,i,o,c,f,a)=>{t=0,u=e,w=i,r=o,h=c,s=f,d=a,n=null},e.ut=(e,y,m)=>{let b,g,k,v,S,z,C,x=0,A=0,I=0;for(I=y.nt,v=y.We,x=e.ot,A=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S;;)switch(t){case 0:if(z>=258&&v>=10&&(e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,m=p(u,w,r,h,s,d,e,y),I=y.nt,v=y.We,x=e.ot,A=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S,0!=m)){t=1==m?7:9;break}c=u,n=r,o=h,t=1;case 1:for(b=c;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(I++))<<A,A+=8}if(g=3*(o+(x&it[b])),x>>>=n[g+1],A-=n[g+1],k=n[g],0===k){f=n[g+2],t=6;break}if(16&k){a=15&k,i=n[g+2],t=2;break}if(!(64&k)){c=k,o=g/3+n[g+2];break}if(32&k){t=7;break}return t=9,y.Le="invalid literal/length code",m=rt,e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);case 2:for(b=a;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(I++))<<A,A+=8}i+=x&it[b],x>>=b,A-=b,c=w,n=s,o=d,t=3;case 3:for(b=c;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(I++))<<A,A+=8}if(g=3*(o+(x&it[b])),x>>=n[g+1],A-=n[g+1],k=n[g],16&k){a=15&k,l=n[g+2],t=4;break}if(!(64&k)){c=k,o=g/3+n[g+2];break}return t=9,y.Le="invalid distance code",m=rt,e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);case 4:for(b=a;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(I++))<<A,A+=8}l+=x&it[b],x>>=b,A-=b,t=5;case 5:for(C=S-l;0>C;)C+=e.end;for(;0!==i;){if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);e.lt[S++]=e.lt[C++],z--,C==e.end&&(C=0),i--}t=0;break;case 6:if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);m=0,e.lt[S++]=f,z--,t=0;break;case 7:if(A>7&&(A-=8,v++,I--),e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,e.read!=e.write)return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);t=8;case 8:return m=1,e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);case 9:return m=rt,e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);default:return m=nt,e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m)}},e.ht=()=>{}}wt.dt=(e,t,n,r)=>(e[0]=9,t[0]=5,n[0]=ot,r[0]=ct,0);const dt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function pt(e,t){const n=this;let r,s=0,o=0,c=0,a=0;const l=[0],u=[0],w=new ht;let h=0,d=new f(4320);const p=new wt;n.ct=0,n.ot=0,n.lt=new i(t),n.end=t,n.read=0,n.write=0,n.reset=(e,t)=>{t&&(t[0]=0),6==s&&w.ht(e),s=0,n.ct=0,n.ot=0,n.read=n.write=0},n.reset(e,null),n.wt=(e,t)=>{let r,s,i;return s=e.rt,i=n.read,r=(i>n.write?n.end:n.write)-i,r>e.tt&&(r=e.tt),0!==r&&t==st&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r,i==n.end&&(i=0,n.write==n.end&&(n.write=0),r=n.write-i,r>e.tt&&(r=e.tt),0!==r&&t==st&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r),e.rt=s,n.read=i,t},n.ut=(e,t)=>{let i,f,y,m,b,g,k,v;for(m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g;;){let S,z,C,x,A,I,_,P;switch(s){case 0:for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}switch(i=7&f,h=1&i,i>>>1){case 0:f>>>=3,y-=3,i=7&y,f>>>=i,y-=i,s=1;break;case 1:S=[],z=[],C=[[]],x=[[]],wt.dt(S,z,C,x),w.init(S[0],z[0],C[0],0,x[0],0),f>>>=3,y-=3,s=6;break;case 2:f>>>=3,y-=3,s=3;break;case 3:return f>>>=3,y-=3,s=9,e.Le="invalid block type",t=rt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}break;case 1:for(;32>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if((~f>>>16&65535)!=(65535&f))return s=9,e.Le="invalid stored block lengths",t=rt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);o=65535&f,f=y=0,s=0!==o?2:0!==h?7:0;break;case 2:if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(0===k&&(g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k&&(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k)))return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(t=0,i=o,i>b&&(i=b),i>k&&(i=k),n.lt.set(e.je(m,i),g),m+=i,b-=i,g+=i,k-=i,0!==(o-=i))break;s=0!==h?7:0;break;case 3:for(;14>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(c=i=16383&f,(31&i)>29||(i>>5&31)>29)return s=9,e.Le="too many length or distance symbols",t=rt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(i=258+(31&i)+(i>>5&31),!r||r.length<i)r=[];else for(v=0;i>v;v++)r[v]=0;f>>>=14,y-=14,a=0,s=4;case 4:for(;4+(c>>>10)>a;){for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}r[dt[a++]]=7&f,f>>>=3,y-=3}for(;19>a;)r[dt[a++]]=0;if(l[0]=7,i=p.st(r,l,u,d,e),0!=i)return(t=i)==rt&&(r=null,s=9),n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);a=0,s=5;case 5:for(;i=c,258+(31&i)+(i>>5&31)>a;){let o,w;for(i=l[0];i>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(i=d[3*(u[0]+(f&it[i]))+1],w=d[3*(u[0]+(f&it[i]))+2],16>w)f>>>=i,y-=i,r[a++]=w;else{for(v=18==w?7:w-14,o=18==w?11:3;i+v>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(f>>>=i,y-=i,o+=f&it[v],f>>>=v,y-=v,v=a,i=c,v+o>258+(31&i)+(i>>5&31)||16==w&&1>v)return r=null,s=9,e.Le="invalid bit length repeat",t=rt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w=16==w?r[v-1]:0;do{r[v++]=w}while(0!==--o);a=v}}if(u[0]=-1,A=[],I=[],_=[],P=[],A[0]=9,I[0]=6,i=c,i=p.it(257+(31&i),1+(i>>5&31),r,A,I,_,P,d,e),0!=i)return i==rt&&(r=null,s=9),t=i,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w.init(A[0],I[0],d,_[0],d,P[0]),s=6;case 6:if(n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,1!=(t=w.ut(n,e,t)))return n.wt(e,t);if(t=0,w.ht(e),m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g,0===h){s=0;break}s=7;case 7:if(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,n.read!=n.write)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);s=8;case 8:return t=1,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);case 9:return t=rt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);default:return t=nt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}}},n.ht=e=>{n.reset(e,null),n.lt=null,d=null},n.yt=(e,t,r)=>{n.lt.set(e.subarray(t,t+r),0),n.read=n.write=r},n.bt=()=>1==s?1:0}const yt=13,mt=[0,0,255,255];function bt(){const e=this;function t(e){return e&&e.gt?(e.qe=e.Ge=0,e.Le=null,e.gt.mode=7,e.gt.kt.reset(e,null),0):nt}e.mode=0,e.method=0,e.vt=[0],e.St=0,e.marker=0,e.zt=0,e.Ct=t=>(e.kt&&e.kt.ht(t),e.kt=null,0),e.xt=(n,r)=>(n.Le=null,e.kt=null,8>r||r>15?(e.Ct(n),nt):(e.zt=r,n.gt.kt=new pt(n,1<<r),t(n),0)),e.At=(e,t)=>{let n,r;if(!e||!e.gt||!e.et)return nt;const s=e.gt;for(t=4==t?st:0,n=st;;)switch(s.mode){case 0:if(0===e.We)return n;if(n=t,e.We--,e.qe++,8!=(15&(s.method=e.ft(e.nt++)))){s.mode=yt,e.Le="unknown compression method",s.marker=5;break}if(8+(s.method>>4)>s.zt){s.mode=yt,e.Le="invalid win size",s.marker=5;break}s.mode=1;case 1:if(0===e.We)return n;if(n=t,e.We--,e.qe++,r=255&e.ft(e.nt++),((s.method<<8)+r)%31!=0){s.mode=yt,e.Le="incorrect header check",s.marker=5;break}if(!(32&r)){s.mode=7;break}s.mode=2;case 2:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St=(255&e.ft(e.nt++))<<24&4278190080,s.mode=3;case 3:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<16&16711680,s.mode=4;case 4:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<8&65280,s.mode=5;case 5:return 0===e.We?n:(n=t,e.We--,e.qe++,s.St+=255&e.ft(e.nt++),s.mode=6,2);case 6:return s.mode=yt,e.Le="need dictionary",s.marker=0,nt;case 7:if(n=s.kt.ut(e,n),n==rt){s.mode=yt,s.marker=0;break}if(0==n&&(n=t),1!=n)return n;n=t,s.kt.reset(e,s.vt),s.mode=12;case 12:return e.We=0,1;case yt:return rt;default:return nt}},e.It=(e,t,n)=>{let r=0,s=n;if(!e||!e.gt||6!=e.gt.mode)return nt;const i=e.gt;return s<1<<i.zt||(s=(1<<i.zt)-1,r=n-s),i.kt.yt(t,r,s),i.mode=7,0},e._t=e=>{let n,r,s,i,o;if(!e||!e.gt)return nt;const c=e.gt;if(c.mode!=yt&&(c.mode=yt,c.marker=0),0===(n=e.We))return st;for(r=e.nt,s=c.marker;0!==n&&4>s;)e.ft(r)==mt[s]?s++:s=0!==e.ft(r)?0:4-s,r++,n--;return e.qe+=r-e.nt,e.nt=r,e.We=n,c.marker=s,4!=s?rt:(i=e.qe,o=e.Ge,t(e),e.qe=i,e.Ge=o,c.mode=7,0)},e.Pt=e=>e&&e.gt&&e.gt.kt?e.gt.kt.bt():nt}function gt(){}function kt(e){const t=new gt,n=e&&e.chunkSize?r.floor(2*e.chunkSize):131072,o=new i(n);let c=!1;t.xt(),t.$e=o,this.append=(e,r)=>{const f=[];let a,l,u=0,w=0,h=0;if(0!==e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,0!==t.We||c||(t.nt=0,c=!0),a=t.At(0),c&&a===st){if(0!==t.We)throw new s("inflating: bad input")}else if(0!==a&&1!==a)throw new s("inflating: "+t.Le);if((c||1===a)&&t.We===e.length)throw new s("inflating: bad input");t.rt&&(t.rt===n?f.push(new i(o)):f.push(o.subarray(0,t.rt))),h+=t.rt,r&&t.nt>0&&t.nt!=u&&(r(t.nt),u=t.nt)}while(t.We>0||0===t.tt);return f.length>1?(l=new i(h),f.forEach(e=>{l.set(e,w),w+=e.length})):l=f[0]?new i(f[0]):new i,l}},this.flush=()=>{t.Ct()}}gt.prototype={xt(e){const t=this;return t.gt=new bt,e||(e=15),t.gt.xt(t,e)},At(e){const t=this;return t.gt?t.gt.At(t,e):nt},Ct(){const e=this;if(!e.gt)return nt;const t=e.gt.Ct(e);return e.gt=null,t},_t(){const e=this;return e.gt?e.gt._t(e):nt},It(e,t){const n=this;return n.gt?n.gt.It(n,e,t):nt},ft(e){return this.et[e]},je(e,t){return this.et.subarray(e,e+t)}},self.initCodec=()=>{self.Deflate=tt,self.Inflate=kt};
`,c=()=>l.useDataURI?"data:text/javascript,"+encodeURIComponent(o):URL.createObjectURL(new Blob([o],{type:"text/javascript"}));_({workerScripts:{inflate:[c],deflate:[c]}})}const ERR_ITERATOR_COMPLETED_TOO_SOON="Writer iterator completed too soon",HTTP_HEADER_CONTENT_TYPE="Content-Type",DEFAULT_CHUNK_SIZE=64*1024,PROPERTY_NAME_WRITABLE="writable";class Stream{constructor(){this.size=0}init(){this.initialized=!0}}class Reader extends Stream{get readable(){const l=this,{chunkSize:o=DEFAULT_CHUNK_SIZE}=l,c=new ReadableStream({start(){this.chunkOffset=0},async pull(d){const{offset:m=0,size:h,diskNumberStart:s}=c,{chunkOffset:a}=this,r=h===UNDEFINED_VALUE?o:Math.min(o,h-a),n=await readUint8Array(l,m+a,r,s);d.enqueue(n),a+o>h||h===UNDEFINED_VALUE&&!n.length&&r?d.close():this.chunkOffset+=o}});return c}}class BlobReader extends Reader{constructor(l){super(),Object.assign(this,{blob:l,size:l.size})}async readUint8Array(l,o){const c=this,d=l+o;let h=await(l||d<c.size?c.blob.slice(l,d):c.blob).arrayBuffer();return h.byteLength>o&&(h=h.slice(l,d)),new Uint8Array(h)}}class BlobWriter extends Stream{constructor(l){super();const o=this,c=new TransformStream,d=[];l&&d.push([HTTP_HEADER_CONTENT_TYPE,l]),Object.defineProperty(o,PROPERTY_NAME_WRITABLE,{get(){return c.writable}}),o.blob=new Response(c.readable,{headers:d}).blob()}getData(){return this.blob}}class SplitDataReader extends Reader{constructor(l){super(),this.readers=l}async init(){const l=this,{readers:o}=l;l.lastDiskNumber=0,l.lastDiskOffset=0,await Promise.all(o.map(async(c,d)=>{await c.init(),d!=o.length-1&&(l.lastDiskOffset+=c.size),l.size+=c.size})),super.init()}async readUint8Array(l,o,c=0){const d=this,{readers:m}=this;let h,s=c;s==-1&&(s=m.length-1);let a=l;for(;m[s]&&a>=m[s].size;)a-=m[s].size,s++;const r=m[s];if(r){const n=r.size;if(a+o<=n)h=await readUint8Array(r,a,o);else{const t=n-a;h=new Uint8Array(o);const i=await readUint8Array(r,a,t);h.set(i,0);const u=await d.readUint8Array(l+t,o-t,c);h.set(u,t),i.length+u.length<o&&(h=h.subarray(0,i.length+u.length))}}else h=new Uint8Array;return d.lastDiskNumber=Math.max(s,d.lastDiskNumber),h}}class SplitDataWriter extends Stream{constructor(l,o=4294967295){super();const c=this;Object.assign(c,{diskNumber:0,diskOffset:0,size:0,maxSize:o,availableSize:o});let d,m,h;const s=new WritableStream({async write(n){const{availableSize:t}=c;if(h)n.length>=t?(await a(n.subarray(0,t)),await r(),c.diskOffset+=d.size,c.diskNumber++,h=null,await this.write(n.subarray(t))):await a(n);else{const{value:i,done:u}=await l.next();if(u&&!i)throw new Error(ERR_ITERATOR_COMPLETED_TOO_SOON);d=i,d.size=0,d.maxSize&&(c.maxSize=d.maxSize),c.availableSize=c.maxSize,await initStream(d),m=i.writable,h=m.getWriter(),await this.write(n)}},async close(){await h.ready,await r()}});Object.defineProperty(c,PROPERTY_NAME_WRITABLE,{get(){return s}});async function a(n){const t=n.length;t&&(await h.ready,await h.write(n),d.size+=t,c.size+=t,c.availableSize-=t)}async function r(){await h.close()}}}class GenericReader{constructor(l){return Array.isArray(l)&&(l=new SplitDataReader(l)),l instanceof ReadableStream&&(l={readable:l}),l}}class GenericWriter{constructor(l){return l.writable===UNDEFINED_VALUE&&typeof l.next==FUNCTION_TYPE&&(l=new SplitDataWriter(l)),l instanceof WritableStream&&(l={writable:l}),l.size===UNDEFINED_VALUE&&(l.size=0),l instanceof SplitDataWriter||Object.assign(l,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),l}}async function initStream(_,l){if(_.init&&!_.initialized)await _.init(l);else return Promise.resolve()}function readUint8Array(_,l,o,c){return _.readUint8Array(l,o,c)}const CP437="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),VALID_CP437=CP437.length==256;function decodeCP437(_){if(VALID_CP437){let l="";for(let o=0;o<_.length;o++)l+=CP437[_[o]];return l}else return new TextDecoder().decode(_)}function decodeText(_,l){return l&&l.trim().toLowerCase()=="cp437"?decodeCP437(_):new TextDecoder(l).decode(_)}const PROPERTY_NAME_FILENAME="filename",PROPERTY_NAME_RAW_FILENAME="rawFilename",PROPERTY_NAME_COMMENT="comment",PROPERTY_NAME_RAW_COMMENT="rawComment",PROPERTY_NAME_UNCOMPRESSED_SIZE="uncompressedSize",PROPERTY_NAME_COMPRESSED_SIZE="compressedSize",PROPERTY_NAME_OFFSET="offset",PROPERTY_NAME_DISK_NUMBER_START="diskNumberStart",PROPERTY_NAME_LAST_MODIFICATION_DATE="lastModDate",PROPERTY_NAME_RAW_LAST_MODIFICATION_DATE="rawLastModDate",PROPERTY_NAME_LAST_ACCESS_DATE="lastAccessDate",PROPERTY_NAME_RAW_LAST_ACCESS_DATE="rawLastAccessDate",PROPERTY_NAME_CREATION_DATE="creationDate",PROPERTY_NAME_RAW_CREATION_DATE="rawCreationDate",PROPERTY_NAME_INTERNAL_FILE_ATTRIBUTE="internalFileAttribute",PROPERTY_NAME_INTERNAL_FILE_ATTRIBUTES="internalFileAttributes",PROPERTY_NAME_EXTERNAL_FILE_ATTRIBUTE="externalFileAttribute",PROPERTY_NAME_EXTERNAL_FILE_ATTRIBUTES="externalFileAttributes",PROPERTY_NAME_MS_DOS_COMPATIBLE="msDosCompatible",PROPERTY_NAME_ZIP64="zip64",PROPERTY_NAME_ENCRYPTED="encrypted",PROPERTY_NAME_VERSION="version",PROPERTY_NAME_VERSION_MADE_BY="versionMadeBy",PROPERTY_NAME_ZIPCRYPTO="zipCrypto",PROPERTY_NAME_DIRECTORY="directory",PROPERTY_NAME_EXECUTABLE="executable",PROPERTY_NAME_COMPRESSION_METHOD="compressionMethod",PROPERTY_NAME_SIGNATURE="signature",PROPERTY_NAME_EXTRA_FIELD="extraField",PROPERTY_NAMES=[PROPERTY_NAME_FILENAME,PROPERTY_NAME_RAW_FILENAME,PROPERTY_NAME_COMPRESSED_SIZE,PROPERTY_NAME_UNCOMPRESSED_SIZE,PROPERTY_NAME_LAST_MODIFICATION_DATE,PROPERTY_NAME_RAW_LAST_MODIFICATION_DATE,PROPERTY_NAME_COMMENT,PROPERTY_NAME_RAW_COMMENT,PROPERTY_NAME_LAST_ACCESS_DATE,PROPERTY_NAME_CREATION_DATE,PROPERTY_NAME_OFFSET,PROPERTY_NAME_DISK_NUMBER_START,PROPERTY_NAME_DISK_NUMBER_START,PROPERTY_NAME_INTERNAL_FILE_ATTRIBUTE,PROPERTY_NAME_INTERNAL_FILE_ATTRIBUTES,PROPERTY_NAME_EXTERNAL_FILE_ATTRIBUTE,PROPERTY_NAME_EXTERNAL_FILE_ATTRIBUTES,PROPERTY_NAME_MS_DOS_COMPATIBLE,PROPERTY_NAME_ZIP64,PROPERTY_NAME_ENCRYPTED,PROPERTY_NAME_VERSION,PROPERTY_NAME_VERSION_MADE_BY,PROPERTY_NAME_ZIPCRYPTO,PROPERTY_NAME_DIRECTORY,PROPERTY_NAME_EXECUTABLE,PROPERTY_NAME_COMPRESSION_METHOD,PROPERTY_NAME_SIGNATURE,PROPERTY_NAME_EXTRA_FIELD,"bitFlag","filenameUTF8","commentUTF8","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class Entry{constructor(l){PROPERTY_NAMES.forEach(o=>this[o]=l[o])}}const OPTION_FILENAME_ENCODING="filenameEncoding",OPTION_COMMENT_ENCODING="commentEncoding",OPTION_DECODE_TEXT="decodeText",OPTION_EXTRACT_PREPENDED_DATA="extractPrependedData",OPTION_EXTRACT_APPENDED_DATA="extractAppendedData",OPTION_PASSWORD="password",OPTION_RAW_PASSWORD="rawPassword",OPTION_PASS_THROUGH="passThrough",OPTION_SIGNAL="signal",OPTION_CHECK_PASSWORD_ONLY="checkPasswordOnly",OPTION_CHECK_OVERLAPPING_ENTRY_ONLY="checkOverlappingEntryOnly",OPTION_CHECK_OVERLAPPING_ENTRY="checkOverlappingEntry",OPTION_CHECK_SIGNATURE="checkSignature",OPTION_USE_WEB_WORKERS="useWebWorkers",OPTION_USE_COMPRESSION_STREAM="useCompressionStream",OPTION_TRANSFER_STREAMS="transferStreams",OPTION_PREVENT_CLOSE="preventClose",ERR_BAD_FORMAT="File format is not recognized",ERR_EOCDR_NOT_FOUND="End of central directory not found",ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND="End of Zip64 central directory locator not found",ERR_CENTRAL_DIRECTORY_NOT_FOUND="Central directory header not found",ERR_LOCAL_FILE_HEADER_NOT_FOUND="Local file header not found",ERR_EXTRAFIELD_ZIP64_NOT_FOUND="Zip64 extra field not found",ERR_ENCRYPTED="File contains encrypted entry",ERR_UNSUPPORTED_ENCRYPTION="Encryption method not supported",ERR_UNSUPPORTED_COMPRESSION="Compression method not supported",ERR_SPLIT_ZIP_FILE="Split zip file",ERR_OVERLAPPING_ENTRY="Overlapping entry found",CHARSET_UTF8="utf-8",CHARSET_CP437="cp437",ZIP64_PROPERTIES=[[PROPERTY_NAME_UNCOMPRESSED_SIZE,MAX_32_BITS],[PROPERTY_NAME_COMPRESSED_SIZE,MAX_32_BITS],[PROPERTY_NAME_OFFSET,MAX_32_BITS],[PROPERTY_NAME_DISK_NUMBER_START,MAX_16_BITS]],ZIP64_EXTRACTION={[MAX_16_BITS]:{getValue:getUint32,bytes:4},[MAX_32_BITS]:{getValue:getBigUint64,bytes:8}};class ZipReader{constructor(l,o={}){Object.assign(this,{reader:new GenericReader(l),options:o,config:getConfiguration(),readRanges:[]})}async*getEntriesGenerator(l={}){const o=this;let{reader:c}=o;const{config:d}=o;if(await initStream(c),(c.size===UNDEFINED_VALUE||!c.readUint8Array)&&(c=new BlobReader(await new Response(c.readable).blob()),await initStream(c)),c.size<END_OF_CENTRAL_DIR_LENGTH)throw new Error(ERR_BAD_FORMAT);c.chunkSize=getChunkSize(d);const m=await seekSignature(c,END_OF_CENTRAL_DIR_SIGNATURE,c.size,END_OF_CENTRAL_DIR_LENGTH,MAX_16_BITS*16);if(!m){const R=await readUint8Array(c,0,4),B=getDataView(R);throw getUint32(B)==SPLIT_ZIP_FILE_SIGNATURE?new Error(ERR_SPLIT_ZIP_FILE):new Error(ERR_EOCDR_NOT_FOUND)}const h=getDataView(m);let s=getUint32(h,12),a=getUint32(h,16);const r=m.offset,n=getUint16(h,20),t=r+END_OF_CENTRAL_DIR_LENGTH+n;let i=getUint16(h,4);const u=c.lastDiskNumber||0;let f=getUint16(h,6),p=getUint16(h,8),y=0,g=0;if(a==MAX_32_BITS||s==MAX_32_BITS||p==MAX_16_BITS||f==MAX_16_BITS){const R=await readUint8Array(c,m.offset-ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH,ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH),B=getDataView(R);if(getUint32(B,0)==ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE){a=getBigUint64(B,8);let z=await readUint8Array(c,a,ZIP64_END_OF_CENTRAL_DIR_LENGTH,-1),L=getDataView(z);const Y=m.offset-ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH-ZIP64_END_OF_CENTRAL_DIR_LENGTH;if(getUint32(L,0)!=ZIP64_END_OF_CENTRAL_DIR_SIGNATURE&&a!=Y){const ie=a;a=Y,a>ie&&(y=a-ie),z=await readUint8Array(c,a,ZIP64_END_OF_CENTRAL_DIR_LENGTH,-1),L=getDataView(z)}if(getUint32(L,0)!=ZIP64_END_OF_CENTRAL_DIR_SIGNATURE)throw new Error(ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND);i==MAX_16_BITS&&(i=getUint32(L,16)),f==MAX_16_BITS&&(f=getUint32(L,20)),p==MAX_16_BITS&&(p=getBigUint64(L,32)),s==MAX_32_BITS&&(s=getBigUint64(L,40)),a-=s}}if(a>=c.size&&(y=c.size-a-s-END_OF_CENTRAL_DIR_LENGTH,a=c.size-s-END_OF_CENTRAL_DIR_LENGTH),u!=i)throw new Error(ERR_SPLIT_ZIP_FILE);if(a<0)throw new Error(ERR_BAD_FORMAT);let b=0,E=await readUint8Array(c,a,s,f),x=getDataView(E);if(s){const R=m.offset-s;if(getUint32(x,b)!=CENTRAL_FILE_HEADER_SIGNATURE&&a!=R){const B=a;a=R,a>B&&(y+=a-B),E=await readUint8Array(c,a,s,f),x=getDataView(E)}}const M=m.offset-a-(c.lastDiskOffset||0);if(s!=M&&M>=0&&(s=M,E=await readUint8Array(c,a,s,f),x=getDataView(E)),a<0||a>=c.size)throw new Error(ERR_BAD_FORMAT);const S=getOptionValue(o,l,OPTION_FILENAME_ENCODING),O=getOptionValue(o,l,OPTION_COMMENT_ENCODING);for(let R=0;R<p;R++){const B=new ZipEntry(c,d,o.options);if(getUint32(x,b)!=CENTRAL_FILE_HEADER_SIGNATURE)throw new Error(ERR_CENTRAL_DIRECTORY_NOT_FOUND);readCommonHeader(B,x,b+6);const z=!!B.bitFlag.languageEncodingFlag,L=b+46,Y=L+B.filenameLength,ie=Y+B.extraFieldLength,$=getUint16(x,b+4),Q=$>>8==0,ce=$>>8==3,be=E.subarray(L,Y),Ae=getUint16(x,b+32),we=ie+Ae,Xe=E.subarray(ie,we),Ve=z,st=z,tt=getUint32(x,b+38),he=Q&&(getUint8(x,b+38)&FILE_ATTR_MSDOS_DIR_MASK)==FILE_ATTR_MSDOS_DIR_MASK||ce&&(tt>>16&FILE_ATTR_UNIX_TYPE_MASK)==FILE_ATTR_UNIX_TYPE_DIR||be.length&&be.at(-1)==DIRECTORY_SIGNATURE.charCodeAt(0),de=ce&&(tt>>16&FILE_ATTR_UNIX_EXECUTABLE_MASK)!=0,ze=getUint32(x,b+42)+y;Object.assign(B,{versionMadeBy:$,msDosCompatible:Q,compressedSize:0,uncompressedSize:0,commentLength:Ae,directory:he,offset:ze,diskNumberStart:getUint16(x,b+34),internalFileAttributes:getUint16(x,b+36),externalFileAttributes:tt,rawFilename:be,filenameUTF8:Ve,commentUTF8:st,rawExtraField:E.subarray(Y,ie),executable:de}),B.internalFileAttribute=B.internalFileAttributes,B.externalFileAttribute=B.externalFileAttributes;const P=getOptionValue(o,l,OPTION_DECODE_TEXT)||decodeText,A=Ve?CHARSET_UTF8:S||CHARSET_CP437,D=st?CHARSET_UTF8:O||CHARSET_CP437;let W=P(be,A);W===UNDEFINED_VALUE&&(W=decodeText(be,A));let ae=P(Xe,D);ae===UNDEFINED_VALUE&&(ae=decodeText(Xe,D)),Object.assign(B,{rawComment:Xe,filename:W,comment:ae,directory:he||W.endsWith(DIRECTORY_SIGNATURE)}),g=Math.max(ze,g),readCommonFooter(B,B,x,b+6),B.zipCrypto=B.encrypted&&!B.extraFieldAES;const le=new Entry(B);le.getData=(De,Ye)=>B.getData(De,le,o.readRanges,Ye),le.arrayBuffer=async De=>{const Ye=new TransformStream,[ht]=await Promise.all([new Response(Ye.readable).arrayBuffer(),B.getData(Ye,le,o.readRanges,De)]);return ht},b=we;const{onprogress:Ne}=l;if(Ne)try{await Ne(R+1,p,new Entry(B))}catch{}yield le}const C=getOptionValue(o,l,OPTION_EXTRACT_PREPENDED_DATA),T=getOptionValue(o,l,OPTION_EXTRACT_APPENDED_DATA);return C&&(o.prependedData=g>0?await readUint8Array(c,0,g):new Uint8Array),o.comment=n?await readUint8Array(c,r+END_OF_CENTRAL_DIR_LENGTH,n):new Uint8Array,T&&(o.appendedData=t<c.size?await readUint8Array(c,t,c.size-t):new Uint8Array),!0}async getEntries(l={}){const o=[];for await(const c of this.getEntriesGenerator(l))o.push(c);return o}async close(){}}class ZipEntry{constructor(l,o,c){Object.assign(this,{reader:l,config:o,options:c})}async getData(l,o,c,d={}){const m=this,{reader:h,offset:s,diskNumberStart:a,extraFieldAES:r,extraFieldZip64:n,compressionMethod:t,config:i,bitFlag:u,signature:f,rawLastModDate:p,uncompressedSize:y,compressedSize:g}=m,{dataDescriptor:b}=u,E=o.localDirectory={},x=await readUint8Array(h,s,HEADER_SIZE,a),M=getDataView(x);let S=getOptionValue(m,d,OPTION_PASSWORD),O=getOptionValue(m,d,OPTION_RAW_PASSWORD);const C=getOptionValue(m,d,OPTION_PASS_THROUGH);if(S=S&&S.length&&S,O=O&&O.length&&O,r&&r.originalCompressionMethod!=COMPRESSION_METHOD_AES)throw new Error(ERR_UNSUPPORTED_COMPRESSION);if(t!=COMPRESSION_METHOD_STORE&&t!=COMPRESSION_METHOD_DEFLATE&&!C)throw new Error(ERR_UNSUPPORTED_COMPRESSION);if(getUint32(M,0)!=LOCAL_FILE_HEADER_SIGNATURE)throw new Error(ERR_LOCAL_FILE_HEADER_NOT_FOUND);readCommonHeader(E,M,4);const{extraFieldLength:T,filenameLength:R,lastAccessDate:B,creationDate:z}=E;E.rawExtraField=T?await readUint8Array(h,s+HEADER_SIZE+R,T,a):new Uint8Array,readCommonFooter(m,E,M,4,!0),Object.assign(o,{lastAccessDate:B,creationDate:z});const L=m.encrypted&&E.encrypted&&!C,Y=L&&!r;if(C||(o.zipCrypto=Y),L){if(!Y&&r.strength===UNDEFINED_VALUE)throw new Error(ERR_UNSUPPORTED_ENCRYPTION);if(!S&&!O)throw new Error(ERR_ENCRYPTED)}const ie=s+HEADER_SIZE+R+T,$=g,Q=h.readable;Object.assign(Q,{diskNumberStart:a,offset:ie,size:$});const ce=getOptionValue(m,d,OPTION_SIGNAL),be=getOptionValue(m,d,OPTION_CHECK_PASSWORD_ONLY);let Ae=getOptionValue(m,d,OPTION_CHECK_OVERLAPPING_ENTRY);const we=getOptionValue(m,d,OPTION_CHECK_OVERLAPPING_ENTRY_ONLY);we&&(Ae=!0);const{onstart:Xe,onprogress:Ve,onend:st}=d,tt={options:{codecType:CODEC_INFLATE,password:S,rawPassword:O,zipCrypto:Y,encryptionStrength:r&&r.strength,signed:getOptionValue(m,d,OPTION_CHECK_SIGNATURE)&&!C,passwordVerification:Y&&(b?p>>>8&255:f>>>24&255),outputSize:y,signature:f,compressed:t!=0&&!C,encrypted:m.encrypted&&!C,useWebWorkers:getOptionValue(m,d,OPTION_USE_WEB_WORKERS),useCompressionStream:getOptionValue(m,d,OPTION_USE_COMPRESSION_STREAM),transferStreams:getOptionValue(m,d,OPTION_TRANSFER_STREAMS),checkPasswordOnly:be},config:i,streamOptions:{signal:ce,size:$,onstart:Xe,onprogress:Ve,onend:st}};Ae&&await detectOverlappingEntry({reader:h,fileEntry:o,offset:s,diskNumberStart:a,signature:f,compressedSize:g,uncompressedSize:y,dataOffset:ie,dataDescriptor:b||E.bitFlag.dataDescriptor,extraFieldZip64:n||E.extraFieldZip64,readRanges:c});let he;try{if(!we){be&&(l=new WritableStream),l=new GenericWriter(l),await initStream(l,C?g:y),{writable:he}=l;const{outputSize:de}=await runWorker({readable:Q,writable:he},tt);if(l.size+=de,de!=(C?g:y))throw new Error(ERR_INVALID_UNCOMPRESSED_SIZE)}}catch(de){if(de.outputSize!==UNDEFINED_VALUE&&(l.size+=de.outputSize),!be||de.message!=ERR_ABORT_CHECK_PASSWORD)throw de}finally{!getOptionValue(m,d,OPTION_PREVENT_CLOSE)&&he&&!he.locked&&await he.getWriter().close()}return be||we?UNDEFINED_VALUE:l.getData?l.getData():he}}function readCommonHeader(_,l,o){const c=_.rawBitFlag=getUint16(l,o+2),d=(c&BITFLAG_ENCRYPTED)==BITFLAG_ENCRYPTED,m=getUint32(l,o+6);Object.assign(_,{encrypted:d,version:getUint16(l,o),bitFlag:{level:(c&BITFLAG_LEVEL)>>1,dataDescriptor:(c&BITFLAG_DATA_DESCRIPTOR)==BITFLAG_DATA_DESCRIPTOR,languageEncodingFlag:(c&BITFLAG_LANG_ENCODING_FLAG)==BITFLAG_LANG_ENCODING_FLAG},rawLastModDate:m,lastModDate:getDate(m),filenameLength:getUint16(l,o+22),extraFieldLength:getUint16(l,o+24)})}function readCommonFooter(_,l,o,c,d){const{rawExtraField:m}=l,h=l.extraField=new Map,s=getDataView(new Uint8Array(m));let a=0;try{for(;a<m.length;){const g=getUint16(s,a),b=getUint16(s,a+2);h.set(g,{type:g,data:m.slice(a+4,a+4+b)}),a+=4+b}}catch{}const r=getUint16(o,c+4);Object.assign(l,{signature:getUint32(o,c+HEADER_OFFSET_SIGNATURE),compressedSize:getUint32(o,c+HEADER_OFFSET_COMPRESSED_SIZE),uncompressedSize:getUint32(o,c+HEADER_OFFSET_UNCOMPRESSED_SIZE)});const n=h.get(EXTRAFIELD_TYPE_ZIP64);n&&(readExtraFieldZip64(n,l),l.extraFieldZip64=n);const t=h.get(EXTRAFIELD_TYPE_UNICODE_PATH);t&&(readExtraFieldUnicode(t,PROPERTY_NAME_FILENAME,PROPERTY_NAME_RAW_FILENAME,l,_),l.extraFieldUnicodePath=t);const i=h.get(EXTRAFIELD_TYPE_UNICODE_COMMENT);i&&(readExtraFieldUnicode(i,PROPERTY_NAME_COMMENT,PROPERTY_NAME_RAW_COMMENT,l,_),l.extraFieldUnicodeComment=i);const u=h.get(EXTRAFIELD_TYPE_AES);u?(readExtraFieldAES(u,l,r),l.extraFieldAES=u):l.compressionMethod=r;const f=h.get(EXTRAFIELD_TYPE_NTFS);f&&(readExtraFieldNTFS(f,l),l.extraFieldNTFS=f);const p=h.get(EXTRAFIELD_TYPE_EXTENDED_TIMESTAMP);p&&(readExtraFieldExtendedTimestamp(p,l,d),l.extraFieldExtendedTimestamp=p);const y=h.get(EXTRAFIELD_TYPE_USDZ);y&&(l.extraFieldUSDZ=y)}function readExtraFieldZip64(_,l){l.zip64=!0;const o=getDataView(_.data),c=ZIP64_PROPERTIES.filter(([d,m])=>l[d]==m);for(let d=0,m=0;d<c.length;d++){const[h,s]=c[d];if(l[h]==s){const a=ZIP64_EXTRACTION[s];l[h]=_[h]=a.getValue(o,m),m+=a.bytes}else if(_[h])throw new Error(ERR_EXTRAFIELD_ZIP64_NOT_FOUND)}}function readExtraFieldUnicode(_,l,o,c,d){const m=getDataView(_.data),h=new Crc32;h.append(d[o]);const s=getDataView(new Uint8Array(4));s.setUint32(0,h.get(),!0);const a=getUint32(m,1);Object.assign(_,{version:getUint8(m,0),[l]:decodeText(_.data.subarray(5)),valid:!d.bitFlag.languageEncodingFlag&&a==getUint32(s,0)}),_.valid&&(c[l]=_[l],c[l+"UTF8"]=!0)}function readExtraFieldAES(_,l,o){const c=getDataView(_.data),d=getUint8(c,4);Object.assign(_,{vendorVersion:getUint8(c,0),vendorId:getUint8(c,2),strength:d,originalCompressionMethod:o,compressionMethod:getUint16(c,5)}),l.compressionMethod=_.compressionMethod}function readExtraFieldNTFS(_,l){const o=getDataView(_.data);let c=4,d;try{for(;c<_.data.length&&!d;){const m=getUint16(o,c),h=getUint16(o,c+2);m==EXTRAFIELD_TYPE_NTFS_TAG1&&(d=_.data.slice(c+4,c+4+h)),c+=4+h}}catch{}try{if(d&&d.length==24){const m=getDataView(d),h=m.getBigUint64(0,!0),s=m.getBigUint64(8,!0),a=m.getBigUint64(16,!0);Object.assign(_,{rawLastModDate:h,rawLastAccessDate:s,rawCreationDate:a});const r=getDateNTFS(h),n=getDateNTFS(s),t=getDateNTFS(a),i={lastModDate:r,lastAccessDate:n,creationDate:t};Object.assign(_,i),Object.assign(l,i)}}catch{}}function readExtraFieldExtendedTimestamp(_,l,o){const c=getDataView(_.data),d=getUint8(c,0),m=[],h=[];o?((d&1)==1&&(m.push(PROPERTY_NAME_LAST_MODIFICATION_DATE),h.push(PROPERTY_NAME_RAW_LAST_MODIFICATION_DATE)),(d&2)==2&&(m.push(PROPERTY_NAME_LAST_ACCESS_DATE),h.push(PROPERTY_NAME_RAW_LAST_ACCESS_DATE)),(d&4)==4&&(m.push(PROPERTY_NAME_CREATION_DATE),h.push(PROPERTY_NAME_RAW_CREATION_DATE))):_.data.length>=5&&(m.push(PROPERTY_NAME_LAST_MODIFICATION_DATE),h.push(PROPERTY_NAME_RAW_LAST_MODIFICATION_DATE));let s=1;m.forEach((a,r)=>{if(_.data.length>=s+4){const n=getUint32(c,s);l[a]=_[a]=new Date(n*1e3);const t=h[r];_[t]=n}s+=4})}async function detectOverlappingEntry({reader:_,fileEntry:l,offset:o,diskNumberStart:c,signature:d,compressedSize:m,uncompressedSize:h,dataOffset:s,dataDescriptor:a,extraFieldZip64:r,readRanges:n}){let t=0;if(c)for(let f=0;f<c;f++){const p=_.readers[f];t+=p.size}let i=0;if(a&&(r?i=DATA_DESCRIPTOR_RECORD_ZIP_64_LENGTH:i=DATA_DESCRIPTOR_RECORD_LENGTH),i){const f=await readUint8Array(_,s+m,i+DATA_DESCRIPTOR_RECORD_SIGNATURE_LENGTH,c);if(getUint32(getDataView(f),0)==DATA_DESCRIPTOR_RECORD_SIGNATURE){const y=getUint32(getDataView(f),4);let g,b;r?(g=getBigUint64(getDataView(f),8),b=getBigUint64(getDataView(f),16)):(g=getUint32(getDataView(f),8),b=getUint32(getDataView(f),12)),(l.encrypted&&!l.zipCrypto||y==d)&&g==m&&b==h&&(i+=DATA_DESCRIPTOR_RECORD_SIGNATURE_LENGTH)}}const u={start:t+o,end:t+s+m+i,fileEntry:l};for(const f of n)if(f.fileEntry!=l&&u.start>=f.start&&u.start<f.end){const p=new Error(ERR_OVERLAPPING_ENTRY);throw p.overlappingEntry=f.fileEntry,p}n.push(u)}async function seekSignature(_,l,o,c,d){const m=new Uint8Array(4),h=getDataView(m);setUint32(h,0,l);const s=c+d;return await a(c)||await a(Math.min(s,o));async function a(r){const n=o-r,t=await readUint8Array(_,n,r);for(let i=t.length-c;i>=0;i--)if(t[i]==m[0]&&t[i+1]==m[1]&&t[i+2]==m[2]&&t[i+3]==m[3])return{offset:n+i,buffer:t.slice(i,i+c).buffer}}}function getOptionValue(_,l,o){return l[o]===UNDEFINED_VALUE?_.options[o]:l[o]}function getDate(_){const l=(_&4294901760)>>16,o=_&65535;try{return new Date(1980+((l&65024)>>9),((l&480)>>5)-1,l&31,(o&63488)>>11,(o&2016)>>5,(o&31)*2,0)}catch{}}function getDateNTFS(_){return new Date(Number(_/BigInt(1e4)-BigInt(116444736e5)))}function getUint8(_,l){return _.getUint8(l)}function getUint16(_,l){return _.getUint16(l,!0)}function getUint32(_,l){return _.getUint32(l,!0)}function getBigUint64(_,l){return Number(_.getBigUint64(l,!0))}function setUint32(_,l,o){_.setUint32(l,o,!0)}function getDataView(_){return new DataView(_.buffer)}let baseURL;try{baseURL=import.meta.url}catch(_){}configure({baseURL});e(configure);configure({Deflate:ZipDeflate,Inflate:ZipInflate});const BASE_URL="/";async function loadShapefileFromBuffers(_){let l,o,c,d;const m={shp:null,dbf:null,prj:null};try{if(_.zip){const r=new Blob([_.zip]),n=new ZipReader(new BlobReader(r)),t=await n.getEntries();for(const i of Object.keys(m)){const u=t.filter(f=>f.filename.toLocaleLowerCase().endsWith(i));if(u.length==1){const f=new BlobWriter;await u[0].getData(f);const p=await f.getData();m[i]=i=="prj"?await p.text():await p.arrayBuffer()}}l=m.shp,o=m.dbf,c=m.prj,n.close()}else l=_.shp,o=_.dbf,c=_.prj;console.log({files:m}),d=await read(l,o),d.features=d.features.filter(r=>!!r.geometry)}catch(r){throw console.error(r),Error("Error loading shapefile: "+r)}const h=m.prj||"EPSG:4326";d=reproject.toWgs84(d,h,Coords.allEPSGs);function s(r){return Array.isArray(r[0])?s(r[0]):[r[0],r[1]]}const a=s(d.features[0].geometry.coordinates);if(Math.abs(a[0])>180||Math.abs(a[1])>90)throw Error("Coordinates not lon/lat. Try adding projection to YAML, or provide a .prj file");return d.features}async function loadGeoPackageFromBuffer(_){geopackage_minExports.setSqljsWasmLocateFile(n=>BASE_URL+n);const l=new Uint8Array(_),o=await geopackage_minExports.GeoPackageAPI.open(l),c=o.getFeatureTables();console.log("GEOPACKAGE contains:",c);const d=c[0],m=o.getFeatureDao(d),h=o.getInfoForTable(m),s=`${h.srs.organization}:${h.srs.id}`;console.log("GEOPACKAGE crs:",s);const a=[],r=m.queryForEach();for(const n of r){const{the_geom:t,geom:i,...u}=n,f=t??i;if(!f)continue;const y=new geopackage_minExports.GeometryData(f).toGeoJSON(),g=reproject.toWgs84(y,s,Coords.allEPSGs);a.push({type:"Feature",properties:u,geometry:g})}return o.close(),a}const Geotools={loadGeoPackageFromBuffer,loadShapefileFromBuffers};export{Geotools as G,reproject as r};
